? _darcs
? cvs.log.out
? index.html

RCS file: /sources/tramp/tramp/.cvsignore,v
Working file: .cvsignore
head: 2.7
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.7
	branch-2-1-stable: 2.7.0.2
	branchpoint-2-1-stable: 2.7
	V-2-1-19: 2.7
	V-2-1-18: 2.7
	V-2-1-17: 2.6
	V-2-1-16: 2.6
	V-2-1-15: 2.6
	V-2-1-14: 2.6
	V-2-1-13: 2.6
	V-2-0-57: 2.5.2.1
	V-2-1-12: 2.6
	V-2-1-11: 2.6
	V-2-1-10: 2.6
	V-2-0-56: 2.5.2.1
	V-2-1-9: 2.6
	V-2-1-8: 2.6
	V-2-0-55: 2.5.2.1
	V-2-1-7: 2.6
	V-2-0-54: 2.5.2.1
	V-2-1-6: 2.6
	V-2-0-53: 2.5.2.1
	V-2-0-52: 2.5.2.1
	V-2-1-5: 2.6
	V-2-1-4: 2.6
	V-2-0-51: 2.5.2.1
	V-2-0-50: 2.5.2.1
	V-2-0-49: 2.5.2.1
	V-2-0-48: 2.5.2.1
	V-2-1-3: 2.6
	V-2-0-47: 2.5.2.1
	V-2-0-46: 2.5.2.1
	V-2-0-45: 2.5.2.1
	V-2-1-2: 2.6
	V-2-0-44: 2.5.2.1
	V-2-1-1: 2.6
	V-2-0-43: 2.5.2.1
	V-2-0-42: 2.5
	V-2-0-41: 2.5
	V-2-1-0: 2.5
	branch-2-0-stable: 2.5.0.2
	branchpoint-2-0-stable: 2.5
	V-2-0-40: 2.5
	V-2-0-39: 2.4
	V-2-0-38: 2.4
	V-2-0-37: 2.4
	V-2-0-36: 2.4
	V-2-0-35: 2.4
	V-2-0-34: 2.4
	V-2-0-33: 2.3
	V-2-0-32: 2.3
	V-2-0-30: 2.2
	V-2-0-29: 2.2
	V-2-0-28: 2.2
	V-2-0-27: 2.2
	V-2-0-26: 2.2
	V-2-0-25: 2.2
	V-2-0-24: 2.2
	V-2-0-23: 2.2
	V-2-0-22: 2.2
	V-2-0-21: 2.2
	V-2-0-20: 2.2
	V-2-0-19: 2.2
	V-2-0-18: 2.2
	V-2-0-17: 2.2
	V-2-0-16: 2.2
	V-2-0-15: 2.2
	V-2-0-14: 2.2
	V-2-0-13: 2.2
	completion: 2.2.0.2
	V-2-0-12: 2.2
	V-2-0-11: 2.2
	V-2-0-10: 2.2
	V-2-0-9: 2.2
	V-2-0-8: 2.2
	V-2-0-7: 2.2
	V-2-0-6: 2.2
	V-2-0-5: 2.2
	V-2-0-4: 2.2
	V-2-0-3: 2.2
	V-2-0-1: 2.1
	EMACS-21: 2.2
	V-2-0-0: 2.1
	tramp-xemacs-pkg: 2.0.0.4
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 12;	selected revisions: 12
description:
----------------------------
revision 2.7
date: 2010-01-14 20:54:10 -0800;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: nv3dFemb5ORKypju;
Add configure.lineno
----------------------------
revision 2.6
date: 2004-06-01 13:36:15 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


* .cvsignore: Add *.diff.

* configure.ac (TRAMP_CLEAN_FILES): Add *.diff.

* lisp/tramp.el (tramp-process-alive-regexp): Precise doc string.
(tramp-multi-action-process-alive): New defun.
(tramp-multi-actions): Use it.
----------------------------
revision 2.5
date: 2004-03-14 08:46:25 -0800;  author: kai;  state: Exp;  lines: +2 -0;
branches:  2.5.2;
Ignore some more files.
----------------------------
revision 2.4
date: 2003-04-08 13:20:14 -0700;  author: kai;  state: Exp;  lines: +3 -2;
* Makefile.in (savannah): Do not copy the Japanese HTML file.

* Makefile.in (savannah): Invoke configure after creating the
distribution tarball, because that deletes texi/Makefile which is
needed for the rest of the target.
----------------------------
revision 2.3
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;  lines: +4 -1;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.2
date: 2002-07-14 12:46:37 -0700;  author: kai;  state: Exp;  lines: +1 -0;
* Makefile (tramp.info, tramp_ja.info): Create ../info directory
if necessary.

* tramp.texi: Use @dircategory, @copying.  Add lots of index
entries.  Use @samp or @kbd for stuff that users type on the
keyboard.  Use @item on its own line, except in tables.
Suggestion from Eli Zaretskii.
"@setfilename ../info/tramp" to be compatible with the Emacs
version.
----------------------------
revision 2.1
date: 2002-06-17 03:57:20 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Include version number.
(MANIFEST): Don't include directory name "tramp/" in the entries.
(tar): Create a tramp-$(VERSION).tar.gz file.
(dist, savannah): tramp.tar.gz renamed to tramp-$(VERSION).tar.gz.
----------------------------
revision 2.0
date: 2001-02-28 02:39:25 -0800;  author: grossjoh;  state: Exp;  lines: +0 -0;
Going stable?
----------------------------
revision 1.3
date: 2000-06-06 15:08:57 -0700;  author: grossjoh;  state: Exp;  lines: +1 -0;
Ignore MANIFEST.
----------------------------
revision 1.2
date: 2000-06-02 16:23:04 -0700;  author: grossjoh;  state: Exp;  lines: +1 -2;
Ignore some more files.
----------------------------
revision 1.1
date: 2000-03-12 05:36:01 -0800;  author: grossjoh;  state: Exp;
Some files don't need to be in the CVS repository.
----------------------------
revision 2.5.2.1
date: 2004-07-13 12:29:51 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


Sync with trunk.
=============================================================================

RCS file: /sources/tramp/tramp/.dir-locals.el,v
Working file: .dir-locals.el
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.2
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
keyword substitution: kv
total revisions: 1;	selected revisions: 1
description:
----------------------------
revision 1.1
date: 2010-07-19 05:52:36 -0700;  author: albinus;  state: Exp;  commitid: RFW3usnD1a2cgeHu;
* .dir-locals.el: New file.
=============================================================================

RCS file: /sources/tramp/tramp/CONTRIBUTORS,v
Working file: CONTRIBUTORS
head: 2.3
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.3
	branch-2-1-stable: 2.3.0.6
	branchpoint-2-1-stable: 2.3
	V-2-1-19: 2.3
	V-2-1-18: 2.3
	V-2-1-17: 2.3
	V-2-1-16: 2.3
	V-2-1-15: 2.3
	V-2-1-14: 2.3
	V-2-1-13: 2.3
	V-2-0-57: 2.3
	V-2-1-12: 2.3
	V-2-1-11: 2.3
	V-2-1-10: 2.3
	V-2-0-56: 2.3
	V-2-1-9: 2.3
	V-2-1-8: 2.3
	V-2-0-55: 2.3
	V-2-1-7: 2.3
	V-2-0-54: 2.3
	V-2-1-6: 2.3
	V-2-0-53: 2.3
	V-2-0-52: 2.3
	V-2-1-5: 2.3
	V-2-1-4: 2.3
	V-2-0-51: 2.3
	V-2-0-50: 2.3
	V-2-0-49: 2.3
	V-2-0-48: 2.3
	V-2-1-3: 2.3
	V-2-0-47: 2.3
	V-2-0-46: 2.3
	V-2-0-45: 2.3
	V-2-1-2: 2.3
	V-2-0-44: 2.3
	V-2-1-1: 2.3
	V-2-0-43: 2.3
	V-2-0-42: 2.3
	V-2-0-41: 2.3
	V-2-1-0: 2.3
	branch-2-0-stable: 2.3.0.4
	branchpoint-2-0-stable: 2.3
	V-2-0-40: 2.3
	V-2-0-39: 2.3
	V-2-0-38: 2.3
	V-2-0-37: 2.3
	V-2-0-36: 2.3
	V-2-0-35: 2.3
	V-2-0-34: 2.3
	V-2-0-33: 2.3
	V-2-0-32: 2.3
	V-2-0-30: 2.3
	V-2-0-29: 2.3
	V-2-0-28: 2.3
	V-2-0-27: 2.3
	V-2-0-26: 2.3
	V-2-0-25: 2.3
	V-2-0-24: 2.3
	V-2-0-23: 2.3
	V-2-0-22: 2.3
	V-2-0-21: 2.3
	V-2-0-20: 2.3
	V-2-0-19: 2.3
	V-2-0-18: 2.3
	V-2-0-17: 2.3
	V-2-0-16: 2.3
	V-2-0-15: 2.3
	V-2-0-14: 2.3
	V-2-0-13: 2.3
	completion: 2.3.0.2
	V-2-0-12: 2.3
	V-2-0-11: 2.3
	V-2-0-10: 2.3
	V-2-0-9: 2.3
	V-2-0-8: 2.3
	V-2-0-7: 2.3
	V-2-0-6: 2.3
	V-2-0-5: 2.3
	V-2-0-4: 2.3
	V-2-0-3: 2.3
	V-2-0-1: 2.3
	EMACS-21: 2.3
	V-2-0-0: 2.3
	tramp-xemacs-pkg: 2.1.0.2
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 8;	selected revisions: 8
description:
----------------------------
revision 2.3
date: 2002-03-03 08:47:28 -0800;  author: kaig;  state: Exp;  lines: +13 -12;
(top-level): Require cl when compiling.  This
fixes problems with byte-compiling under Emacs 20.  Reported by
Yoichi NAKAYAMA <yoichi@eken.phys.nagoya-u.ac.jp>.
----------------------------
revision 2.2
date: 2002-03-03 08:01:41 -0800;  author: kaig;  state: Exp;  lines: +4 -0;
*** empty log message ***
----------------------------
revision 2.1
date: 2001-12-07 16:55:55 -0800;  author: youngs;  state: Exp;  lines: +1 -1;
Steve Youngs just testing my CVS access.

Feel free to revert this, Kai.  I just added my name to the
list of contributers.
----------------------------
revision 2.0
date: 2001-02-28 02:39:26 -0800;  author: grossjoh;  state: Exp;  lines: +0 -0;
Going stable?
----------------------------
revision 1.4
date: 2000-09-20 04:36:45 -0700;  author: daniel;  state: Exp;  lines: +1 -1;
Fix an infinite recursion from a bad 'require' statement. Also, update my
email address in CONTRIBUTORS.
----------------------------
revision 1.3
date: 2000-07-13 14:49:56 -0700;  author: grossjoh;  state: Exp;  lines: +1 -1;
New email address for Francesco.
----------------------------
revision 1.2
date: 2000-05-29 13:06:49 -0700;  author: grossjoh;  state: Exp;  lines: +1 -1;
Add Pete's email address to CONTRIBUTORS file.
----------------------------
revision 1.1
date: 2000-04-22 11:14:46 -0700;  author: grossjoh;  state: Exp;
*** empty log message ***
=============================================================================

RCS file: /sources/tramp/tramp/COPYING,v
Working file: COPYING
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.4
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
	V-2-1-18: 1.1
	V-2-1-17: 1.1
	V-2-1-16: 1.1
	V-2-1-15: 1.1
	V-2-1-14: 1.1
	V-2-1-13: 1.1
	V-2-0-57: 1.1.2.2
	branch-2-0-stable: 1.1.0.2
keyword substitution: kv
total revisions: 3;	selected revisions: 3
description:
----------------------------
revision 1.1
date: 2008-01-26 05:04:28 -0800;  author: albinus;  state: Exp;  commitid: h5PujXpeSBcPpVOs;
branches:  1.1.2;
* COPYING: New file.
----------------------------
revision 1.1.2.2
date: 2008-02-02 02:14:34 -0800;  author: albinus;  state: Exp;  lines: +674 -0;  commitid: 1tSd59fEso6BfOPs;
*** empty log message ***
----------------------------
revision 1.1.2.1
date: 2008-01-26 05:04:28 -0800;  author: albinus;  state: dead;  lines: +0 -674;  commitid: 1tSd59fEso6BfOPs;
file COPYING was added on branch branch-2-0-stable on 2008-02-02 10:14:34 +0000
=============================================================================

RCS file: /sources/tramp/tramp/ChangeLog,v
Working file: ChangeLog
head: 1.193
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.191
	branch-2-1-stable: 1.186.0.2
	branchpoint-2-1-stable: 1.186
	V-2-1-19: 1.186
	V-2-1-18: 1.180
	V-2-1-17: 1.178
	V-2-1-16: 1.175
	V-2-1-15: 1.172
	V-2-1-14: 1.170
	V-2-1-13: 1.167
	V-2-0-57: 1.94.2.50
	V-2-1-12: 1.164
	V-2-1-11: 1.161
	V-2-1-10: 1.156
	V-2-0-56: 1.94.2.47
	V-2-1-9: 1.151
	V-2-1-8: 1.147
	V-2-0-55: 1.94.2.44
	V-2-1-7: 1.143
	V-2-0-54: 1.94.2.42
	V-2-1-6: 1.140
	V-2-0-53: 1.94.2.40
	V-2-0-52: 1.94.2.37
	V-2-1-5: 1.136
	V-2-1-4: 1.131
	V-2-0-51: 1.94.2.33
	V-2-0-50: 1.94.2.31
	V-2-0-49: 1.94.2.29
	V-2-0-48: 1.94.2.27
	V-2-1-3: 1.119
	V-2-0-47: 1.94.2.23
	V-2-0-46: 1.94.2.19
	V-2-0-45: 1.94.2.16
	V-2-1-2: 1.115
	V-2-0-44: 1.94.2.10
	V-2-1-1: 1.111
	V-2-0-43: 1.94.2.8
	V-2-0-42: 1.94.2.6
	V-2-0-41: 1.94.2.3
	V-2-1-0: 1.98
	branch-2-0-stable: 1.94.0.2
	branchpoint-2-0-stable: 1.94
	V-2-0-40: 1.93
	V-2-0-39: 1.84
	V-2-0-38: 1.81
	V-2-0-37: 1.79
	V-2-0-36: 1.73
	V-2-0-35: 1.70
	V-2-0-34: 1.67
	V-2-0-33: 1.62
	V-2-0-32: 1.60
	V-2-0-30: 1.56
	V-2-0-29: 1.55
	V-2-0-28: 1.53
	V-2-0-27: 1.52
	V-2-0-26: 1.51
	V-2-0-25: 1.49
	V-2-0-24: 1.47
	V-2-0-23: 1.44
	V-2-0-22: 1.43
	V-2-0-21: 1.42
	V-2-0-20: 1.42
	V-2-0-19: 1.40
	V-2-0-18: 1.38
	V-2-0-17: 1.36
	V-2-0-16: 1.36
	V-2-0-15: 1.34
	V-2-0-14: 1.33
	V-2-0-13: 1.32
	completion: 1.31.0.2
	V-2-0-12: 1.31
	V-2-0-11: 1.30
	V-2-0-10: 1.28
	V-2-0-9: 1.27
	V-2-0-8: 1.25
	V-2-0-7: 1.24
	V-2-0-6: 1.23
	V-2-0-5: 1.22
	V-2-0-4: 1.22
	V-2-0-3: 1.18
	V-2-0-1: 1.16
	EMACS-21: 1.17
	V-2-0-0: 1.12
	tramp-xemacs-pkg: 1.6.0.2
keyword substitution: kv
total revisions: 248;	selected revisions: 248
description:
----------------------------
revision 1.193
date: 2010-12-27 02:45:26 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: mPczkfHizJJHnU1v;
* aclocal.m4 (AC_CONTRIB_FILES): Use AC_CONFIG_LINKS.
----------------------------
revision 1.192
date: 2010-11-30 11:58:20 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: U7QVjzScQlWbjuYu;
* configure.ac: Bump version (to 2.2.1-pre).  Update merge
version to 2.2.0.
----------------------------
revision 1.191
date: 2010-11-20 03:09:57 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: OEjCifFu53ZGH9Xu;
*** empty log message ***
----------------------------
revision 1.190
date: 2010-10-21 02:54:12 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: 1BFSbSYazw0EfiTu;
* configure.ac: Substitute abs_builddir instead of abs_srcdir.
----------------------------
revision 1.189
date: 2010-09-17 00:47:06 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: OhmgC0YIVnyODUOu;
* configure.ac: Regenerate autoloads.

* tramp-compat.el (tramp-compat-with-temp-message): Make it a defmacro.
----------------------------
revision 1.188
date: 2010-09-06 03:45:37 -0700;  author: albinus;  state: Exp;  lines: +6 -3;  commitid: dbwJT23jYosYYvNu;
* configure.ac: Substitute abs_srcdir.
----------------------------
revision 1.187
date: 2010-09-02 02:17:55 -0700;  author: albinus;  state: Exp;  lines: +16 -0;  commitid: NHuTgSvU6LQQCZMu;
* INSTALL (System Requirements): Adapt versions.
(Japanese Manual): Remove.

* Makefile.in (XEMACS_FILES): Remove texi/tramp_ja.texi.
(cvstag): Use -F.
(savannah): Don't configure --with-japanese-manual.

* aclocal.m4 (AC_EMACS_INFO): Pretty-print
TRAMP_EMACS_VERSION_CHECK.
(AC_JA_MANUAL): Remove.

* configure.ac: Bump version (to 2.2.0).  Update merge
version to 2.1.19.  Remove AC_JA_MANUAL call.
----------------------------
revision 1.186
date: 2010-08-23 12:09:06 -0700;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: wrLhrjAFb03BdLLu;
branches:  1.186.2;
* Makefile.in (tar): Create version 1.1 directive.
----------------------------
revision 1.185
date: 2010-08-23 11:23:06 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: tiSTp0DWhbgDXKLu;
Version 2.1.19 released.

* configure.ac: Bump version.
----------------------------
revision 1.184
date: 2010-07-19 05:52:36 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: RFW3usnD1a2cgeHu;
* .dir-locals.el: New file.
----------------------------
revision 1.183
date: 2010-03-19 07:13:45 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: ACPT3UjVzqU9Dyru;
* aclocal.m4 (AC_EMACS_INFO): Discard GNU Emacs 21 compatibility.
----------------------------
revision 1.182
date: 2010-03-18 12:19:00 -0700;  author: albinus;  state: Exp;  lines: +62 -58;  commitid: KKr2H99dib6Slsru;
*** empty log message ***
----------------------------
revision 1.181
date: 2010-03-15 16:32:26 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: VOkv5e7SXt6NQ5ru;
* configure.ac: Bump version (to 2.1.19-pre).  Update merge
version to 2.1.18.
----------------------------
revision 1.180
date: 2010-03-14 03:30:09 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: Fhwj0p760AveyTqu;
Version 2.1.18 released.

* configure.ac: Bump version.

* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Make call
of `delete-directory' backwards compatible.
----------------------------
revision 1.179
date: 2009-11-08 02:38:57 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: FuGlBJRyDRAxEHau;
*** empty log message ***
----------------------------
revision 1.178
date: 2009-11-07 12:50:31 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: sZVSbcp6iEoj4Dau;
*** empty log message ***
----------------------------
revision 1.177
date: 2009-09-24 01:26:14 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: 78W5IGXKJWpHmU4u;
*** empty log message ***
----------------------------
revision 1.176
date: 2009-06-29 07:01:09 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: h2VpRJqxvMzY0LTt;
*** empty log message ***
----------------------------
revision 1.175
date: 2009-06-22 12:26:32 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: GY7fYWvAIPsy2TSt;
*** empty log message ***
----------------------------
revision 1.174
date: 2009-06-15 11:35:07 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: Jsr3O1WdN5cRYYRt;
*** empty log message ***
----------------------------
revision 1.173
date: 2009-02-06 08:15:44 -0800;  author: albinus;  state: Exp;  lines: +10 -1;  commitid: VHeuo6gVkxC5moBt;
*** empty log message ***
----------------------------
revision 1.172
date: 2009-02-01 01:46:36 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: GmWvx4eI2ZfBmIAt;
*** empty log message ***
----------------------------
revision 1.171
date: 2008-08-22 12:13:46 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: gMbn4sT5OEJ0KOft;
*** empty log message ***
----------------------------
revision 1.170
date: 2008-07-27 09:06:22 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: dYIy3fwdQBexxsct;
*** empty log message ***
----------------------------
revision 1.169
date: 2008-07-23 21:56:22 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: 1aZ25c7Ksm4FV0ct;
*** empty log message ***
----------------------------
revision 1.168
date: 2008-03-30 09:32:08 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: eAKpHrPmkTLwvaXs;
*** empty log message ***
----------------------------
revision 1.167
date: 2008-03-29 12:58:01 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: 96hAGFXjcEW9G3Xs;
*** empty log message ***
----------------------------
revision 1.166
date: 2008-01-26 05:03:45 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: Mv8p8f4GBNvApVOs;
*** empty log message ***
----------------------------
revision 1.165
date: 2008-01-12 03:04:22 -0800;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 1.164
date: 2007-12-23 04:02:44 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: dXm8BQWGRHrW9yKs;

Version 2.1.12 released.

* configure.ac: Bump version.

* lisp/tramp.el: New todo item.

* lisp/tramp-smb.el (tramp-smb-handle-insert-directory): Handle "-F"
switch.  Reported by Mark T. Kennedy <mkennedy@diamondbackcap.com>.
----------------------------
revision 1.163
date: 2007-10-18 11:46:35 -0700;  author: albinus;  state: Exp;  lines: +3 -0;  commitid: BHD6VmLqheQ8w6Cs;

* configure.ac: Bump version (to 2.1.12-pre).  Update merge
version to 2.1.11.

* texi/tramp.texi (Cleanup remote connections): New section.
(Password caching): Remove `tramp-clear-passwd'.  It's not a
command anymore.
(Bug Reports): Add `tramp-bug' to function index.
----------------------------
revision 1.162
date: 2007-10-17 15:09:50 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: gM2uQ3KaIjZIFZBs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-cmds.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-cmds.el.

* lisp/tramp.el (top): Put load of all tramp-* files into a dolist.
Require tramp-cmds.el.
(tramp-clear-passwd): Add parameter VEC.  Adapt all callees.
(tramp-append-tramp-buffers): Apply `tramp-list-tramp-buffers'.

* lisp/tramp-cmds.el: New file.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Apply VEC to
`tramp-clear-passwd'.
----------------------------
revision 1.161
date: 2007-10-09 21:34:16 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: bfWBAWxgBaaT30Bs;

Version 2.1.11 released.
----------------------------
revision 1.160
date: 2007-09-30 09:32:28 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 1.159
date: 2007-09-28 08:52:02 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 1.158
date: 2007-07-29 08:09:36 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 1.157
date: 2007-07-23 13:33:24 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: fJOGPxd0nkIYTVqs;

* configure.ac: Bump version (to 2.1.11-pre).  Update merge
version to 2.1.10.

* lisp/tramp.el (tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-stat(
(tramp-convert-file-attributes): Handle huge file sizes.
----------------------------
revision 1.156
date: 2007-07-22 09:29:39 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: JpiEgUOKtSqCAMqs;

Version 2.1.10 released.
----------------------------
revision 1.155
date: 2007-07-07 13:35:30 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: R05FbXfuLJwRqSos;

* aclocal.m4 (AC_EMACS_INFO): Check whether tramp-util.el and
tramp-vc.el are still needed.

* Makefile.in (EMACS_EL_FILES): Remove tramp-util.el and
tramp-vc.el.

* lisp/Makefile.in (EMACS_UTILS): New variable.
(LISP_FILES): Add tramp-util.el and tramp-vc.el depending on
$EMACS_UTILS.
----------------------------
revision 1.154
date: 2007-07-01 11:31:32 -0700;  author: albinus;  state: Exp;  lines: +11 -0;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.153
date: 2007-05-28 06:20:37 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: Ma8UwuYWkhiejHjs;

* Makefile.in (XEMACS_FILES) Add texi/doclicense.texi.

* texi/doclicense.texi: New file.

* texi/Makefile.in (TEXI_FILES): Add doclicense.texi.
----------------------------
revision 1.152
date: 2007-04-15 14:03:41 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* configure.ac: Bump version (to 2.1.10-pre).

* INSTALL: Commands cannot contain whitespaces in their path.

* lisp/tramp.el (tramp-default-user): Fix typo in docstring.  Value can
also be nil.

* texi/trampinst.texi (Installation parameters): Commands cannot
contain whitespaces in their path.
----------------------------
revision 1.151
date: 2007-04-08 03:13:35 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

Version 2.1.9 released.
----------------------------
revision 1.150
date: 2007-03-25 11:39:27 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* aclocal.m4 (AC_EMACS_INFO): Add gateway support.
(AC_EMACS_CHECK_LIB): Remove.

* configure.ac: Add gateway support.

* lisp/Makefile.in: Add gateway support.

* lisp/tramp.el (top): Require tramp-gw conditionally only.
(tramp-methods): Add port spec to "plink", "plink1" and "pscp"
methods.

* texi/Makefile.in: Add gateway support.

* texi/tramp.texi (all): Make gateway text conditional.
----------------------------
revision 1.149
date: 2007-02-13 23:14:45 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* Makefile.in: Add tramp-gw.el

* lisp/Makefile.in: Add tramp-gw.el

* lisp/tramp-gw.el: New package.

* lisp/tramp.el (top): Require tramp-gw.
(tramp-methods): Add `tramp-gw-args' and `tramp-default-port' for
ssh and telnet methods.
(tramp-message): Catch errors.
(tramp-action-yesno, tramp-action-yn): Trace messages.
(tramp-maybe-open-connection): Handle gateways.
(tramp-read-passwd): New parameter PROC. Used in order to improve
password prompt. Adapt callees.
----------------------------
revision 1.148
date: 2007-01-18 13:00:11 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* configure.ac: Bump version (to 2.1.9-pre).

* lisp/tramp.el (with-parsed-tramp-file-name): Protect debug spec
during compilation.
(tramp-handle-expand-file-name, tramp-find-method)
(tramp-find-user, tramp-find-host): Don't check for
`tramp-completion-mode'.
(tramp-find-foreign-file-name-handler): Check also for
`tramp-completion-mode' and `ramp-completion-file-name-regexp'.
(tramp-completion-mode): Variable removed.  Also all occurencies.
(tramp-completion-handle-file-name-all-completions): Don't call
`tramp-run-real-handler'.
(tramp-make-tramp-file-name): It must return always a well-formed
Tramp file name.
(tramp-completion-make-tramp-file-name): New defun.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Apply it.
----------------------------
revision 1.147
date: 2007-01-14 12:24:38 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

Version 2.1.8 released.
----------------------------
revision 1.146
date: 2007-01-08 23:20:48 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* configure.ac: texi2dvi cannot be called with "-o /dev/null",
this changes permissions of /dev/null.  Reported by Hans Halvorson
<hhalvors@Princeton.EDU>
----------------------------
revision 1.145
date: 2006-12-27 14:12:29 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* Makefile.in: Add tramp-fish.el

* lisp/tramp-fish.el: New package.

* lisp/tramp.el (top): Require tramp-fish.
(tramp-inodes): New defvar.
(tramp-handle-expand-file-name): Cache "home-directory".
(tramp-get-inode): New defun.

* lisp/tramp-smb.el (tramp-smb-no-stat, tramp-smb-inodes)
(tramp-smb-get-inode): Removed.  Apply new names.

* lisp/tramp-util.el (tramp-advice-executable-find): Add check for
`tramp-fish-file-name-handler'.

* texi/tramp.texi (Inline methods): Add `fish' method.
----------------------------
revision 1.144
date: 2006-10-24 22:47:09 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* configure.ac: Bump version (to 2.1.8-pre).

* lisp/tramp.el (tramp-yn-prompt-regexp): Add question from plink.
(tramp-message): Reduce messages in minibuffer.
(tramp-handle-call-process): Fix error in error handling.
(tramp-touch): UTC handling is not possible for XEmacs.

* lisp/tramp-cache.el (top): Don't autoload macro
`with-parsed-tramp-file-name' but function
`tramp-dissect-file-name'.
(tramp-cache-before-revert-function): Change implementation
accordingly.  Reported by Jonathan Hankins
<jonathan-hankins@mindspring.com>.

* lisp/tramp-util.el (tramp-advice-executable-find): Check for
`load-in-progress)'.
(tramp-advice-call-process): Add check for
`tramp-fish-file-name-handler'.
(tramp-grep-setup, tramp-gud-setup, tramp-ediff-setup): Remove
functions, and call defadvices directly. There is no need for
`eval-after-load'.
(top): Add defadvices for `gnus-1', `jka-compr-call-process' and
`jka-compr-partial-uncompress'.
----------------------------
revision 1.143
date: 2006-09-03 05:23:58 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

Version 2.1.7 released.
----------------------------
revision 1.142
date: 2006-06-04 08:36:15 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Expand
`datarootdir´.  Perform all expansions with "eval".

* configure.ac: Add "-o /dev/null" to texi2dvi call.

* lisp/tramp.el (tramp-process-actions): Pop connection buffer in case
of error.  Modify error message depending on `tramp-action'.

* lisp/tramp-cache.el (tramp-persistency-file-name): Default value is
"~/.emacs.d/tramp" or "~/.xemacs/tramp", respectively.  Suggested
by Romain Francoise <romain@orebokech.com>.
(tramp-dump-connection-properties): Suppress error when
`tramp-persistency-file-name´ cannot be written.

* texi/tramp.texi (Connection caching): Change default file name.
----------------------------
revision 1.141
date: 2006-05-31 14:27:02 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* configure.ac: Bump version (to 2.1.7-pre).

* lisp/tramp.el (tramp-get-debug-buffer): `outline-mode' must be
protected with a local `default-directory'.

* lisp/tramp-cache.el (top): When reading
`tramp-persistency-file-name', discard error messages for
'file-error.
----------------------------
revision 1.140
date: 2006-05-28 13:21:14 -0700;  author: albinus;  state: Exp;  lines: +3 -0;
*** empty log message ***
----------------------------
revision 1.139
date: 2006-05-28 11:47:01 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

Version 2.1.6 released.
----------------------------
revision 1.138
date: 2006-03-14 13:40:09 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

DESTDIR support
----------------------------
revision 1.137
date: 2005-12-28 13:49:47 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* configure.ac: Bump version (to 2.1.6-pre).

* texi/tramp.texi (Frequently Asked Questions): Add bookmarks and
filecache to approaches shortening Tramp file names to be typed.
----------------------------
revision 1.136
date: 2005-12-11 07:24:20 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

Version 2.1.5 released.

* configure.ac: Bump version.

* INSTALL: Point to Posix environments for installation under MS
Windows.

* lisp/tramp.el (tramp-remote-path): Beautify "/usr/xpg4/bin".  Clarify
docstring.
(tramp-handle-expand-file-name): Remove double slash.
(tramp-set-remote-path): It is sufficient to check for
`file-directory-p'.
(tramp-find-file-exists-command): Remove unnecessary message.
(tramp-check-ls-command, tramp-check-ls-commands)
(tramp-find-ls-command, tramp-find-id-command): Remove functions.
Code is moved to corresponding `tramp-get-*' functions.
(tramp-get-*): Work in connection buffer because local
`tramp-remote-path'. Insert code from above when necessary.
(tramp-bug): Add `tramp-default-host', `tramp-default-user',
`tramp-default-user-alist'.
(tramp-append-tramp-buffers): Add local variables for all Tramp
buffers.
----------------------------
revision 1.135
date: 2005-12-02 14:16:36 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* INSTALL, configure.ac: We depend on GNU texinfo 4.6.

* lisp/tramp.el (tramp-verbose): Document level 7.
(tramp-send-command-and-check): Clean up tramp_exit_status from
buffer.
(tramp-handle-file-local-copy, tramp-send-command-and-read):
Remove cleaning of tramp_exit_status.
(tramp-handle-write-region): Make cksum check more robust.
(tramp-remote-path): Add "/usr/xpg4/bin/".  On Solaris, there are
the POSIX programs.
(tramp-find-executable): IGNORE-TILDE is optional now.  New
parameter IGNORE-PATH.  Adapt callees.
(tramp-set-remote-path): Return list of existing directories.
(tramp-post-connection): Make `tramp-remote-path' buffer local.
Set it to list of existing directories.
(tramp-find-id-command, tramp-get-remote-id ): New defun.
(tramp-get-remote-uid, tramp-get-remote-gid): Use them.

* texi/tramp.texi (Frequently Asked Questions): Example how to set
`file-precious-flag' buffer local.

* texi/test.texi: Expand check for Texinfo 4.6 feature.
----------------------------
revision 1.134
date: 2005-11-29 14:24:39 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* lisp/tramp.el (tramp-do-copy-or-rename-file-via-buffer)
(tramp-handle-file-local-copy, tramp-handle-write-region):
Generate always a new temp buffer. Kill it finally.
(tramp-handle-unhandled-file-name-directory): Take home directory
on remote host.
(tramp-handle-write-region): When `file-precious-flag' is set,
check also the checksums (in case of inline methods).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.

* texi/tramp.texi (Remote processes): Explain gud.el integration in
more detail.
(Frequently Asked Questions): Recommend `file-precious-flag' when
`tramp-chunksize' is set.
----------------------------
revision 1.133
date: 2005-10-23 04:48:04 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* configure.ac: Bump version (to 2.1.5-pre).

* Makefile.in (clean): Cleanup also subdirectory test.
(MANIFEST): Exclude tramp2 and .cvsignore.

* lisp/tramp.el (tramp-let-maybe): Add `edebug-form-spec' property.
(tramp-handle-expand-file-name): Bind `default-directory' locally
to "/" in order to avoid problems with UNC shares or Cygwin
mounts.
----------------------------
revision 1.132
date: 2005-10-18 12:43:26 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): `datadir',
`lispdir' and `infodir' should still contain environment
variables, which can be changed during make. `lispdir_default' and
`infodir_default' must be expanded for the Tramp manual.

* texi/tramp.texi (Traces and Profiles): Reference to `Outline Mode'
should be done for info pages only.
----------------------------
revision 1.131
date: 2005-10-13 13:55:22 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

Version 2.1.4 released.

* configure.ac: Bump version.

* texi/tramp.texi (Bug Reports): Make a cross reference to `Traces and
Profiles'.
(Traces and Profiles): Explain settings for backtraces.
----------------------------
revision 1.130
date: 2005-10-11 14:58:44 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rearrange
substitutions that they are accepted with older shell versions.

* Makefile.XEmacs (REQUIRES): Remove fsf-compat, add
sh-script (for executable-find).

* lisp/tramp.el: Require `timer-funcs' instead of `timer' if in
XEmacs.
(tramp-verbose): Start rewriting the doc string.  Not
finished yet.
(tramp-handle-delete-file, tramp-handle-insert-file-contents)
(tramp-sh-file-name-handler): Signals expect a list as last
parameter.
(tramp-file-name-handler): Handle signals in order to trace them
in the debug buffer.

* lisp/tramp-smb.el (tramp-smb-handle-directory-files): Rewritten in
order to profit from caching results.
(tramp-smb-handle-file-name-all-completions): `localname' must be
expanded by `file-name-as-directory'.
----------------------------
revision 1.129
date: 2005-10-09 12:43:33 -0700;  author: albinus;  state: Exp;  lines: +5 -1;

* INSTALL: Provide working options for installing on MS Windows.

* lisp/tramp.el (tramp-completion-without-shell-p): Removed.  Not
needed anymore.
(tramp-md5-function): Fix typo in error message.
(tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-handle-file-name-all-completions): Rewritten in order to
profit from caching results.
(tramp-handle-file-name-completion): Removed unnecessary code.

* lisp/tramp-cache.el (with-cache-data): ,@body must be wrapped by
`progn'.  Add `edebug-form-spec' property.

* lisp/tramp-smb.el (tramp-smb-handle-file-name-all-completions):
Rewritten in order to profit from caching results.

* texi/tramp.texi (Dired): Node removed.  There are no limitations on
directory listings anymore.
(Default Method): Fix typo in variable name.
(Filename completion): Remove limitations on directory listings.

* texi/trampinst.texi (Installation parameters): Provide working
options for installing on MS Windows.
----------------------------
revision 1.128
date: 2005-08-28 11:56:37 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/trampcache.el: Removed.  Replaced by tramp-cache.el.

* lisp/tramp-cache.el: New file.  Implementation inspired by work of
Daniel Pittman <daniel@rimspace.net>.

* lisp/tramp.el: Introduce filename caching.  Require `tramp-cache'.
(tramp-syntax): Correct doc string.
(tramp-handle-file-truename, tramp-handle-file-exists-p)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-accessible-directory-p)
(tramp-handle-file-directory-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p): Add `with-cache-data'.
(tramp-handle-file-attributes): Add `with-cache-data'.  Check also
for existence of applicable stat(1) command, which is preferred
over the Perl script.
(tramp-handle-file-attributes-with-stat, tramp-get-remote-stat):
New defuns.
(tramp-handle-set-file-modes, tramp-handle-add-name-to-file)
(tramp-do-copy-or-rename-file, tramp-handle-delete-directory)
(tramp-handle-delete-file, tramp-handle-dired-compress-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-write-region): Flush cashed data.
(tramp-pre-connection): Initialise cache.
(tramp-post-connection): Check for stat(1) command.
(tramp-maybe-open-connection): Optimize code.
(tramp-convert-file-attributes): Handle also attributes returned
by stat.

* test/tramp-time.el: New file.
----------------------------
revision 1.127
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 1.126
date: 2005-03-20 11:27:16 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* Makefile.in (FTP_UPLOAD): Change upload address to
"ftp://ftp-upload.gnu.org/incoming/ftp".
(tar): Handle "$(TARNAME).tar.gz.directive".
----------------------------
revision 1.125
date: 2005-02-13 10:42:44 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* INSTALL, texi/tramp.texi, texi/trampinst.texi: Replace "Linux" by
"GNU/Linux".  Suggested by Richard M. Stallman <rms@gnu.org>

* aclocal.m4 (AC_PATH_LISPDIR): Document an alternative approach
configuring `lispdir'.  Not activated (yet).

* configure.ac: Documentation fix.
----------------------------
revision 1.124
date: 2005-02-12 03:19:00 -0800;  author: albinus;  state: Exp;  lines: +13 -9;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 1.123
date: 2005-02-05 15:02:40 -0800;  author: albinus;  state: Exp;  lines: +12 -0;

* INSTALL: Explain in more detail configure parameters
"with-xemacs", "--with-lispdir" and "--infodir".  Change bug
report address to [tramp-devel@gnu.org].

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rewrite
completely in order to apply better default values.

* configure.ac: Reorder substitution of installation directories
wrt changes in aclocal.m4.

* lisp/tramp.el (all): Change all addresses to .gnu.org.

* texi/Makefile.in (datadir): New variable.

* texi/trampinst.texi (Installation parameters): Explain in more detail
configure parameters "with-xemacs", "--with-lispdir" and
"--infodir".
----------------------------
revision 1.122
date: 2005-02-02 14:38:25 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* INSTALL: Linux configure option prefix should be
"--prefix=/usr".  Reported by Bradley Dilger <dilger@wrecking.org>.

* configure.ac: Bump version (to 2.1.4-pre).  Change bug report
address to [tramp-devel@gnu.org].

* texi/tramp.texi (all): Change all addresses to .gnu.org.
(Obtaining Tramp): Mention the Nightly CVS Tree Tarball as CVS
direct access alternative.

* texi/trampinst.texi (Installation parameters): Linux configure option
prefix should be "--prefix=/usr".  Reported by Bradley Dilger
<dilger@wrecking.org>.
----------------------------
revision 1.121
date: 2005-01-16 07:17:26 -0800;  author: albinus;  state: Exp;  lines: +0 -2;
*** empty log message ***
----------------------------
revision 1.120
date: 2005-01-16 07:12:45 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* Makefile.in (savannah): Revert change from 2004-10-10.  It
doesn't work.
----------------------------
revision 1.119
date: 2005-01-16 06:18:59 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

Version 2.1.3 released.
----------------------------
revision 1.118
date: 2004-12-30 01:33:07 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* aclocal.m4, configure.ac: grep(1) on OpenBSD 3.6 does not
understand the '-' option.  Small change.  From Ryan Yeske
<rcyeske@gmail.com>.
----------------------------
revision 1.117
date: 2004-10-17 09:33:30 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 1.116
date: 2004-10-10 09:48:44 -0700;  author: albinus;  state: Exp;  lines: +14 -1;


* Makefile.in (savannah): Don't apply "configure" for Japanese
manual, but call "make -C texi" with proper variable settings.

* aclocal.m4 (AC_EMACS_INFO): Write default values in help output
for "--with-xemacs" and "--with-emacs".
(AC_PATH_LISPDIR): Write default value in help output for
"--with-lispdir".
(all): Unify capitalization for help output.

* configure.ac: Bump version (to 2.1.3-pre).

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.
(savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 1.115
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +15 -0;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 1.114
date: 2004-09-16 13:04:47 -0700;  author: albinus;  state: Exp;  lines: +7 -0;


* Makefile.in (AUTOCONF): New variable.
(configure): Apply it.  Reported by Norbert Koch
<viteno@xemacs.org> in order to have a simple possibility applying
autoconf under another name.

* texi/trampinst.texi (Installation parameters): Mention usefull
configure option "--prefix=/usr/share" for Linux systems.
Reported by Charles Curley <charlescurley@charlescurley.com>.
----------------------------
revision 1.113
date: 2004-08-14 12:20:13 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* configure.ac: Bump version (to 2.1.2-pre).  Set
TRAMP_EMACS_MERGE_VERSION (to 2.0.44).

* lisp/tramp.el (tramp-methods): "sftp" has nil
`tramp-copy-keep-date-arg'.
(tramp-do-copy-or-rename-file-out-of-band): Handle it.
----------------------------
revision 1.112
date: 2004-08-10 14:25:57 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* Makefile.in (EMACS_EL_FILES): Remove lisp/trampver.el, it is a
generated file.
(emacs): Copy trampver.el.
----------------------------
revision 1.111
date: 2004-08-09 13:20:37 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


Version 2.1.1 released.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-methods): "sftp", "psftp": new external methods.
"plink", "plink1" and "pscp": parameter for port specification is
"-P".

* texi/tramp.texi (Inline methods): Correct wrong (outdated) index
"km".  Say, that the port specification is also available for
"plink".
(External transfer methods): Add "sftp" and "psftp" methods.
----------------------------
revision 1.110
date: 2004-07-30 12:52:03 -0700;  author: albinus;  state: Exp;  lines: +9 -0;


* INSTALL: Precise supported (X)Emacs versions.

* aclocal.m4 (AC_EMACS_INFO): Add check for proper (X)Emacs
version.

* configure.ac: Precise comments.

* lisp/trampver.el.in: Check for (X)Emacs version.  Code is from macro
AC_EMACS_INFO of aclocal.m4.

* lisp/tramp.el (top): Remove (X)Emacs version check.
(tramp-maybe-open-connection): Handle NIL values in
`tramp-default-proxies-alist'.

* texi/trampver.texi.in: Remove `postfixmultihop'.  Rename
`postfixsinglehop' into `postfixhop'.

* texi/tramp.texi (top): Rename `postfixsinglehop' into `postfixhop'.
(Multi-hop Methods, Multi-hop filename syntax): Removed, including
al pointers to.
(Multi-hops): New chapter.
(History of Tramp): Proxy hosts mentioned.
(Frequently Asked Questions): Precise supported (X)Emacs
versions.
----------------------------
revision 1.109
date: 2004-06-26 10:39:48 -0700;  author: kai;  state: Exp;  lines: +2 -0;
Remove special-casing for building as an XEmacs
package.  They have their own repository with their own Makefile.
(cl-release): New target, makes "Version X released." ChangeLog
entries.
----------------------------
revision 1.108
date: 2004-06-26 08:55:53 -0700;  author: kai;  state: Exp;  lines: +5 -0;
Remove special-casing for building as an XEmacs
package.  They have their own repository with their own Makefile.
----------------------------
revision 1.107
date: 2004-06-06 04:29:48 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


* README-CVS: Explaining stable releases and pre-releases in CVS.
----------------------------
revision 1.106
date: 2004-06-03 14:21:49 -0700;  author: albinus;  state: Exp;  lines: +10 -0;


* configure.ac (FTP_UPLOAD): New variable, indicating which ftp
upload program to savannah has to be used.  Kai and Michael differ
in their preferences ...

* Makefile.in (FTP_UPLOAD): New variable.  Value depending on
@FTP_UPLOAD@.
(savannah): Use it.

* lisp/tramp.el (all): Code cleanup.  Change all `tramp-handle-xxx'
calls to respective `xxx` calls.

* lisp/tramp-vc.el (all): Code cleanup.  Change all `tramp-handle-xxx'
calls to respective `xxx` calls.
----------------------------
revision 1.105
date: 2004-06-01 13:43:28 -0700;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 1.104
date: 2004-06-01 13:36:16 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* .cvsignore: Add *.diff.

* configure.ac (TRAMP_CLEAN_FILES): Add *.diff.

* lisp/tramp.el (tramp-process-alive-regexp): Precise doc string.
(tramp-multi-action-process-alive): New defun.
(tramp-multi-actions): Use it.
----------------------------
revision 1.103
date: 2004-05-29 15:56:26 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


* configure.ac: Set TRAMP_EMACS_MERGE_VERSION (to 2.0.41).
----------------------------
revision 1.102
date: 2004-05-29 14:12:06 -0700;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 1.101
date: 2004-05-29 13:52:54 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* Makefile.in (.SILENT, .PHONY): Add lisp target.
(info): Depends on $(CONFIG_FILES).

* lisp/tramp.el (tramp-file-name-handler-alist)
(tramp-file-name-for-operation): Add entry for `file-remote-p'.
(tramp-handle-file-remote-p): New defun.
(top): Remove setting of `file-remote-p'.  Don't set
`inhibit-file-name-handlers' and `inhibit-file-name-operation'.

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`file-remote-p'.
----------------------------
revision 1.100
date: 2004-05-29 06:24:38 -0700;  author: kai;  state: Exp;  lines: +6 -0;
Use "-pre" suffix on CVS versions.
----------------------------
revision 1.99
date: 2004-05-28 08:30:25 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(lisp): New target: byte-compile the lisp/*.el files.
----------------------------
revision 1.98
date: 2004-05-07 14:44:03 -0700;  author: kai;  state: Exp;  lines: +9 -4;
Replace kgrossjo@eu.uu.net with kai@emptydomain.de.
----------------------------
revision 1.97
date: 2004-05-07 14:26:03 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* configure.ac: Bump version (to 2.0.41) and set the
last-merged-with-Emacs version (to 2.0.40).  Hm.  The version bump
to 2.0.41 is probably bogus, we want to create a stable
branch...  Argh.
----------------------------
revision 1.96
date: 2004-05-07 14:06:27 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* Makefile.in (emacs): Don't patch man/trampver.texi in the Emacs
repository, just copy texi/trampver.texi there.  We can't run
"cvs diff" on texi/trampver.texi since it is a generated file, so
our patching trick won't work for this file.
----------------------------
revision 1.95
date: 2004-05-07 13:54:47 -0700;  author: kai;  state: Exp;  lines: +19 -0;
* configure.ac (TRAMP_EMACS_MERGE_VERSION): New variable,
indicating which was the last revision of Tramp that was merged
into Emacs.  Don't forget to update this after running "make
emacs" (or "gmake emacs")!

* Makefile.in (EMACS_EL_FILES): Mention files explicitly to make
sure that tramp-efs.el is not included.
(EMACS_TEXI_FILES): New variable, lists manual files that need to
be merged with the Emacs repository.
(TRAMP_EMACS_MERGE_VERSION, TRAMP_EMACS_MERGE_TAG): New
variables, indicating which was the last revision of Tramp that
was merged into Emacs.  Automatically set by configure, original
is in configure.ac.
(emacs): Reword to use patches instead of copying the files.
This helps to make sure that changes to Tramp files in the Emacs
repository aren't overwritten.
----------------------------
revision 1.94
date: 2004-05-02 09:50:52 -0700;  author: kai;  state: Exp;  lines: +2 -0;
branches:  1.94.2;
(savannah): Use FreeBSD syntax for FTP upload.
----------------------------
revision 1.93
date: 2004-05-02 09:38:39 -0700;  author: kai;  state: Exp;  lines: +9 -0;
* aclocal.m4 (AC_CONTRIB_FILES): Load the library in question
before invoking fboundp on the function searched.

* configure.ac: Bump version.
----------------------------
revision 1.92
date: 2004-04-09 09:14:27 -0700;  author: albinus;  state: Exp;  lines: +7 -0;


Complete rework, based on review by Karl Berry <karl@gnu.org>

* aclocal.m4 (AC_EMACS_INSTALL): Rewrite function.  Apply a
variable substitution rather then a file substitution

* configure.ac: Adapt comment for AC_EMACS_INSTALL call.

* texi/Makefile.in (INSTALL_CHAPTER): New variable, set by configure.
(TEXI_FILES): Includes "trampinst.texi" also if $(INSTALL_CHAPTER)
is "yes".
($(localinfodir)/%, %.dvi, tramp-%.html, tramp_ja-%.html):
$(INSTALL_CHAPTER) is a parameter, too.

* texi/trampver.texi.in (trampver, tramp): Macros changed to flags.
(otherflavor, installationchapter): Macros removed.  Not necessary
any longer.
(all): "tramp-" and "-" removed from flag names.

* texi/tramp.texi, texi/tramp_ja.texi (tramp): Macro removed.
(Obtaining Tramp): Flag removed from title.
(all): "tramp-" and "-" removed from flag names.  Flags `tramp'
and `trampver' used properly.  Flag `tramp-inst' replaced by
`installchapter'.  Installation related text adapted.

* texi/trampinst.texi (otherflavor, installationchapter): Macros
removed.  Not necessary any longer.
(all): Includes "trampver.texi" for flag setting.  All local flags
moved to that file.  "tramp-" and "-" removed from flag names.
Flags `tramp' and `trampver' used properly.  Flag `tramp-inst'
replaced by `installchapter'.
----------------------------
revision 1.91
date: 2004-03-29 12:37:49 -0800;  author: albinus;  state: Exp;  lines: +8 -0;


* configure.ac: Beautify check for "install-info".

* INSTALL (Installation Names): Describe what to do in case of
errors and warnings.
(Load Path): Add XEmacs example.

* texi/Makefile.in (INSTALL_INFO): Use option `--quiet'.

* texi/tramp.texi (Frequently Asked Questions): Use "MS Windows
NT/2000/XP" (not only "NT").  Remove doubled entry "What kinds of
systems does @tramp{} work on".

* texi/trampinst.texi (Installation parameters): Describe what to do in
case of errors and warnings.
----------------------------
revision 1.90
date: 2004-03-28 08:44:41 -0800;  author: albinus;  state: Exp;  lines: +5 -0;


* configure.ac: Check existence of "install-info".  Taken from
Emacs configure.in.

* texi/Makefile.in (INSTALL_INFO): New Variable.
($(localinfodir)/dir, $(infodir)/dir): New Targets.
(.PHONY): Add "$(localinfodir)/dir" and "$(infodir)/dir".
(install): Depends on "$(infodir)/dir".
(tramp): Depends on "$(localinfodir)/dir".

* texi/dir_sample: Created new.  Existing one didn't work, don't know  why.

* texi/tramp_ja.texi: @direntry corrected to "tramp_ja".

* texi/trampinst.texi (Load paths): Remove explanation on applying
"install-info".  It should work now, even on Debian.
----------------------------
revision 1.89
date: 2004-03-14 13:06:24 -0800;  author: albinus;  state: Exp;  lines: +1 -0;


* Makefile.in (distclean): Recurse to subdirectories.
----------------------------
revision 1.88
date: 2004-03-14 12:59:18 -0800;  author: albinus;  state: Exp;  lines: +20 -0;


* INSTALL: Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.

* Makefile.in: Don't check for $(USE_CONTRIB) any longer.
(xemacs): Use ""$(MAKE)" instead of "make".
(emacs): Use "--with-emacs" configure option.
(savannah): Use "ftp-upload" instead of "scp".  Hope it works for
Kai.

* aclocal.m4 (AC_EMACS_LISP): Use "-vanilla" in case of XEmacs.
(AC_CONTRIB_FILES): New function.  Checks for the need of
provisioning of a contributed package.

* configure.ac: Apply `AC_CONTRIB_FILES' for all Lisp files of
contrib directory.

* contrib/README: Clarify run-at-time.el.

* lisp/Makefile.in: New environment variables $(CONTRIB_FILES) and
$(INSTALL_FILES).  Don't check for $(USE_CONTRIB) any longer.
(all): Depends on $(CONTRIB_FILES), too.
(install): Copy $(INSTALL_FILES) but $?.
(distclean): Remove also $(CONTRIB_FILES).

* texi/Makefile.in (savannah): Simplify copy command.

* texi/trampinst.texi (Installation, Installation parameters)
(Load paths): Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.
----------------------------
revision 1.87
date: 2004-03-05 12:47:49 -0800;  author: albinus;  state: Exp;  lines: +8 -0;


* configure.ac: Write "${MAKE}" if appropriate (but "make").

* Makefile.in: (.PHONY): Remove unused targets.
(distclean): Remove also *.tar.gz*
(tar): Call gpg.

* lisp/Makefile.in (.PHONY): Remove unused targets.
(install): Depends on "all".

* lisp/tramp-vc.el (tramp-vc-workfile-unchanged-p): Correct typo
("file" -> "filename").  Reported by Kim F. Storm <storm@cua.dk>.

* texi/Makefile.in (SINFO): Removed.
(.PHONY): New Target.
----------------------------
revision 1.86
date: 2004-03-01 23:10:06 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Look for "gmake", first.
----------------------------
revision 1.85
date: 2004-02-29 10:06:49 -0800;  author: kai;  state: Exp;  lines: +2 -0;
* Makefile.in (dist, install-html): Remove unused targets.

* Makefile.in (install-ftp, site-lisp): Remove unused targets.

* Makefile.in (site-info, install-html): Remove unused targets.
----------------------------
revision 1.84
date: 2004-02-29 05:37:34 -0800;  author: kai;  state: Exp;  lines: +6 -0;
Version 2.0.39 released.
----------------------------
revision 1.83
date: 2004-01-09 11:47:24 -0800;  author: albinus;  state: Exp;  lines: +5 -0;


* aclocal.m4 (AC_EMACS_INFO): If an (X)Emacs binary is given,
check also for absolute paths.  Reported by Eli Tziperman.
----------------------------
revision 1.82
date: 2004-01-02 03:38:32 -0800;  author: albinus;  state: Exp;  lines: +6 -0;


* configure.ac: *.elc files must be removed always.  Otherwise,
there could be problems if they are created with the wrong Emacs
flavor.

* texi/tramp.texi (Obtaining TRAMP): Remove CVS login from example.
That's necessary for pserver password authentification only.
----------------------------
revision 1.81
date: 2003-11-30 09:52:15 -0800;  author: kai;  state: Exp;  lines: +5 -0;
Release 2.0.38.
----------------------------
revision 1.80
date: 2003-11-30 09:49:57 -0800;  author: kai;  state: Exp;  lines: +8 -0;
Bump version number.
Avoid --mode arg to tar.
----------------------------
revision 1.79
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +11 -0;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 1.78
date: 2003-10-01 04:58:54 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* aclocal.m4 (AC_PATH_INFODIR): Fix path to xemacs site-packages.
From Norbert Koch <viteno@xemacs.org>.
----------------------------
revision 1.77
date: 2003-08-23 12:56:01 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tar): Make sure that files in tarball are readable
by world.
----------------------------
revision 1.76
date: 2003-07-26 12:46:54 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


	* configure.ac: Add "-s" option for make version check.  Kai's
	kludge not needed anymore.
	* lisp/Makefile.in (.PHONY): Add `xemacs'.
----------------------------
revision 1.75
date: 2003-07-26 05:42:40 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* Makefile.in (xemacs): Use new `xemacs' target in lisp subdir,
instead of copying *.el files manually.

* Makefile.in (xemacs): New target to copy files to XEmacs
working dir.  (For use by Kai only.)
----------------------------
revision 1.74
date: 2003-07-20 10:52:22 -0700;  author: kai;  state: Exp;  lines: +8 -0;
Bump version.
Kludge suitable version test to pass for Kai doing "make
savannah".  For some reason, make prints "Entering directory
foo" and "Leaving directory foo" messages in that case.
----------------------------
revision 1.73
date: 2003-07-15 14:00:32 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


* INSTALL: List required GNU software for installation.

* lisp/Makefile.in (LISP_FILES): tramp-ftp.el is conditional, too.
(install): Install only files belonging to the respective Emacs
flavour.
----------------------------
revision 1.72
date: 2003-07-14 14:38:14 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* aclocal.m4 (AC_EMACS_INFO): Fix typo.

* configure.ac: Add a check for suitable make version.
Reported by Sven Utcke <utcke@informatik.uni-hamburg.de>.

* test.makefile: New file.  Used for checking proper "make"
version.

* lisp/Makefile.in (LISP_FILES): New variable.  Used to distinguish
collection of *.el files for Emacs and XEmacs.
Reported by Sven Utcke <utcke@informatik.uni-hamburg.de>.
(EM): Use `-vanilla' option for XEmacs call.
(all): depend on $(LISP_FILES).
----------------------------
revision 1.71
date: 2003-06-24 12:29:49 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(xemacs): Make sure to configure for XEmacs.
----------------------------
revision 1.70
date: 2003-06-17 06:04:20 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Bump version.
----------------------------
revision 1.69
date: 2003-05-24 15:41:01 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

* Makefile.in (configure): It depends on "aclocal.m4", too.

* aclocal.m4, lisp/Makefile.in, contrib/Makefile.in: Use
`--no-site-file' option for Emacs call, in order to avoid loading of
Tramp in site specific init files.  Reported by Harry Putnam
<reader@newsguy.com>.

* lisp/Makefile.in (.PHONY): New target.
(all): "trampver.el" and "tramp.el" must be handled first due to
dependencies.

* lisp/tramp.el (tramp-completion-function-alist): Add completion
function for "remcp", "remsh" and "plink1".

* texi/tramp.texi (Inline methods): Add methods `remsh' and `plink1'.
(External transfer methods): Add method `remcp'.
(Multi-hop Methods): Add method `remsh'.
----------------------------
revision 1.68
date: 2003-05-24 09:10:39 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.el (tramp-password-end-of-line): Use "xy" with plink.

* configure.ac: Bump version.

* Makefile.in (cvstag): "cvs tag", not "cvs cvstag".
----------------------------
revision 1.67
date: 2003-04-24 14:16:14 -0700;  author: albinus;  state: Exp;  lines: +6 -1;

	* Makefile.in (.PHONY): Add `tags'.
	(distclean) Remove also "autom4te.cache".

	* lisp/tramp.el (tramp-real-rsh-program): New constant.  On
	HP-UX, the "rsh" program is called "remsh".
	(tramp-methods, tramp-multi-connection-function-alist): Apply
	`tramp-real-rsh-program'.  Use "-p Password:\ " for "sudo"
	method, because password prompt might be changed by either passprompt
	option in /etc/sudoers, or SUDO_PROMPT environment variable.
	Suggested by Peter Oliver <peter.oliver@aquila-networks.co.uk>.
----------------------------
revision 1.66
date: 2003-04-18 13:14:41 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tags): New target.
(cvstag): Renamed from `tag' to avoid confusion with `tags'.
----------------------------
revision 1.65
date: 2003-04-17 12:36:53 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* Makefile.in (.SILENT): New target.  Remove noise entering
subdirectories.
(.PHONY): Add missing targets.
(all, install): Merge them into one rule.
($(CONFIG_FILES)): Depend on $(CONFIG_FILES:=.in), too.
(configure): Remove "--trace" option from autoconf call.  It
prevented generation of configure.
----------------------------
revision 1.64
date: 2003-04-14 13:12:36 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* aclocal.m4 (AC_EMACS_INFO): Make "emacs" as default if $EMACS
isn't set.  Be more robust this case.

* tramp.el (tramp-handle-file-truename): `sym' shouldn't be quoted.
----------------------------
revision 1.63
date: 2003-04-08 13:20:14 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* Makefile.in (savannah): Do not copy the Japanese HTML file.

* Makefile.in (savannah): Invoke configure after creating the
distribution tarball, because that deletes texi/Makefile which is
needed for the rest of the target.
----------------------------
revision 1.62
date: 2003-04-08 12:18:09 -0700;  author: kai;  state: Exp;  lines: +6 -0;
Bump version.
----------------------------
revision 1.61
date: 2003-04-08 12:11:11 -0700;  author: kai;  state: Exp;  lines: +6 -0;
Bump version.
----------------------------
revision 1.60
date: 2003-04-06 14:44:33 -0700;  author: albinus;  state: Exp;  lines: +11 -0;

* aclocal.m4 (AC_EMACS_INSTALL): New macro.  Depending on
configure option `--with-packaging', Tramp installation chapter
will be part of the manual, or not.

* configure.ac (top-level): Apply `AC_EMACS_INSTALL'.

* Makefile.in (xemacs, emacs): Call `./configure --with-packaging'
in order to generate `trampver.texi' without installation chapter.

* texi/Makefile.in (%.dvi): Apply parameter `-t "@set $(EMACS_INFO)"'
for texi2dvi.

* texi/tramp.texi (top-level): Move installation related entries to
trampinst.texi.  Apply respective macros instead of, in case flag
`tramp-inst' is set.
Move all (X)Emacs related flags to trampver.texi.in.

* texi/trampinst.texi: New file.  Contains installation related
entries.

* texi/trampver.texi.in (top-level): Define all (X)Emacs related
flags.  Include trampinst.texi depending on configure option
`--with-packaging'.
----------------------------
revision 1.59
date: 2003-03-30 12:09:35 -0800;  author: kai;  state: Exp;  lines: +10 -0;
(xemacs, emacs): Copy trampver.texi, too.
----------------------------
revision 1.58
date: 2003-03-24 12:47:58 -0800;  author: albinus;  state: Exp;  lines: +6 -1;

* INSTALL: Add a first step calling `autoconf' in case Tramp is
taken from CVS sources.
----------------------------
revision 1.57
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;  lines: +36 -0;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 1.56
date: 2003-02-28 10:12:29 -0800;  author: kai;  state: Exp;  lines: +4 -0;
* tramp.texi: Bump version.

* tramp.el (tramp-version): Bump.
(tramp-handle-expand-file-name): Protect against short localnames
when comparing with "/../".

* Makefile (VERSION): Bump.
----------------------------
revision 1.55
date: 2003-02-05 11:34:18 -0800;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.texi (Installation): In Emacs, use M-x
texinfo-format-buffer RET, not M-x makeinfo-buffer RET.  Reported
by gebser@ameritech.net.

* tramp.el (tramp-send-region): Protect against tramp-chunksize
being nil.

* Makefile (VERSION): Bump.
----------------------------
revision 1.54
date: 2003-01-02 02:59:25 -0800;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.el (top-level): Avoid byte-compiler warnings of unused
variables if the byte-compiler supports this.  This is for the
with-parsed-tramp-file-name macro which is wont to produce such
stuff.

* Makefile (EMACS_EL_FILES): List of files for Emacs repository.
(emacs): New target.  Copy data into Emacs CVS repository.
(xemacs): Copy more files to XEmacs repository.
----------------------------
revision 1.53
date: 2002-12-23 06:03:44 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.28 released.
----------------------------
revision 1.52
date: 2002-12-05 14:29:22 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.27 released.
----------------------------
revision 1.51
date: 2002-11-28 13:35:10 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.26 released.
----------------------------
revision 1.50
date: 2002-10-19 10:27:20 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(xemacs): Add reminder for Kai.
----------------------------
revision 1.49
date: 2002-10-06 12:03:20 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(VERSION): Bump.
----------------------------
revision 1.48
date: 2002-10-03 12:31:09 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* tramp.texi: Move @copying section to preamble of document.  Do
@insertcopying on page after the title page for tex output, and in
the top node otherwise.

* Makefile (realclean): New target, delete info file and tarball
here.
----------------------------
revision 1.47
date: 2002-09-29 09:05:58 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(VERSION): Bump.
----------------------------
revision 1.46
date: 2002-09-28 05:08:52 -0700;  author: kai;  state: Exp;  lines: +1 -0;
* Makefile (tramp): Renamed from tramp.info.

* Makefile (cvs-update): New convenience target.
(clean): Remove info subdir, too.
----------------------------
revision 1.45
date: 2002-09-28 04:57:20 -0700;  author: kai;  state: Exp;  lines: +4 -0;
* tramp.el (tramp-open-connection-setup-interactive-shell):
Explicitly set tramp-last-cmd-time before invoking
tramp-send-command the first time.  Otherwise, tramp-send-command
would issue "echo are you awake" right at the first time, which
is not what we want.  Reported by Douglas Gray Stephens.

* Makefile (cvs-update): New convenience target.
----------------------------
revision 1.44
date: 2002-09-27 09:39:03 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.23 released.
----------------------------
revision 1.43
date: 2002-09-22 10:30:03 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.22.
----------------------------
revision 1.42
date: 2002-09-22 06:11:59 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.20 released.
----------------------------
revision 1.41
date: 2002-09-16 12:25:08 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* contrib/README: Explain uudecode.el.

* contrib/uudecode.el: New file.
----------------------------
revision 1.40
date: 2002-09-13 14:19:48 -0700;  author: kai;  state: Exp;  lines: +6 -0;
Version 2.0.19 released.

* tramp-uu.el: New file.

* tramp.el (tramp-coding-commands): Use `tramp-uuencode-region'
as local encoder for the uuencode based entries.

* tramp.texi: Define macro for printing a Tramp filename.
----------------------------
revision 1.39
date: 2002-09-13 03:14:54 -0700;  author: kai;  state: Exp;  lines: +1 -0;
(MANIFEST): Ignore .#* files.
----------------------------
revision 1.38
date: 2002-09-13 03:12:30 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.el (tramp-perl-decode): Perl changes to accomodate older
versions of Perl.  Now tested with 5.004.  Suggestion from
Michael Albinus.

* Makefile (VERSION): Bump
----------------------------
revision 1.37
date: 2002-09-12 09:08:04 -0700;  author: kai;  state: Exp;  lines: +8 -0;
* tramp.el (tramp-find-inline-encoding): Call
tramp-call-local-coding-command with nil for INPUT and OUTPUT.
(tramp-call-local-coding-command): OUTPUT equals nil means to
discard the output.  INPUT equals nil means /dev/null.

* Makefile (tar): Depend on prepversion, not tag.
(dist): Depend on tag.
(VERSION): Bump.
----------------------------
revision 1.36
date: 2002-09-11 04:03:45 -0700;  author: kai;  state: Exp;  lines: +4 -0;
* tramp.el (tramp-post-connection): Only send Perl
mime-encode/decode implementations when using inline method.
(tramp-handle-file-local-copy)
(tramp-handle-write-region, tramp-post-connection)
(tramp-coding-commands, tramp-find-inline-encoding): For the
inline encodings, distinguish between local and remote commands,
instead of between commands and functions.  (The local commands
can be functions, too.)  If the local host is a Windows machine,
we can't expect the same commands to work there as on the remote
host.
(tramp-call-local-coding-command): New function for calling local
encoding and decoding commands.
(tramp-set-remote-encoding, tramp-get-remote-encoding)
(tramp-set-remote-decoding, tramp-get-remote-decoding)
(tramp-set-local-encoding, tramp-get-local-encoding)
(tramp-set-local-decoding, tramp-get-local-decoding): New functions.
(tramp-get-encoding-command, tramp-set-encoding-command)
(tramp-get-decoding-command, tramp-set-decoding-command)
(tramp-get-encoding-function, tramp-set-encoding-function)
(tramp-get-decoding-function, tramp-set-decoding-function): Old
functions, removed.

* Makefile (VERSION): Bump.
----------------------------
revision 1.35
date: 2002-09-01 13:29:51 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(dist): Don't try to install on local ftp server unless at
university account.
----------------------------
revision 1.34
date: 2002-09-01 12:29:45 -0700;  author: kai;  state: Exp;  lines: +6 -0;
Version 2.0.15 is released.
----------------------------
revision 1.33
date: 2002-08-22 08:12:23 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.texi (Remote shell setup): Mention
`tramp-shell-prompt-pattern', `tramp-actions-before-shell', and
`tramp-multi-actions'.

* tramp.el (tramp-shell-prompt-pattern): New variable.
(tramp-actions-before-shell, tramp-multi-actions)
(tramp-find-shell, tramp-open-connection-multi)
(tramp-open-connection-setup-interactive-shell): Use it.
(tramp-open-connection-telnet, tramp-open-connection-rsh)
(tramp-open-connection-su): Mention `tramp-shell-prompt-pattern'
in the docstring.
(tramp-bug): Report `tramp-shell-prompt-pattern'.
(tramp-process-one-multi-action, tramp-process-one-action): Make
message clearer so people don't confuse it with Emacs asking them
a question if the regexp happens to end with "?".
(tramp-verbose): Change default value from 10 to 9.  Also change
some logging levels so that 10 is reserved for stuff which is
needed for debugging only, but 9 catches everything that people
might like to see in order to see that Tramp is actually working.

* Makefile (VERSION): Bump.
----------------------------
revision 1.32
date: 2002-08-21 08:00:59 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.el (tramp-handle-write-region): Don't check to see if
remote end is awake after sending data to remote host: we want to
send "EOF" not "echo are you awake"...
(tramp-maybe-open-connection): Swap args for tramp-time-diff.

* Makefile (VERSION): Bump.
----------------------------
revision 1.31
date: 2002-08-07 07:51:36 -0700;  author: kai;  state: Exp;  lines: +6 -0;
branches:  1.31.2;
* tramp.el (tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Comment out
possibly obsolete "echo hello" commands.
(tramp-run-real-handler): If operation is
`ange-ftp-hook-function', use first arg as the real operation.
(tramp-check-ls-commands): Use / instead of \ as directory
separator.  (Relevant for XEmacs on Windows.)
(tramp-maybe-open-connection): Use tramp-wait-for-output when
waiting for the "are you awake" command.  Use a different string
for the "are you awake" command.
(tramp-send-command): New optional arg NEVEROPEN means to never
invoke tramp-maybe-open-connection.
(tramp-maybe-open-connection): Use it.

* Makefile (VERSION): Bump.
----------------------------
revision 1.30
date: 2002-08-05 07:53:47 -0700;  author: kai;  state: Exp;  lines: +3 -0;
Version 2.0.11.

* tramp.el (tramp-invoke-ange-ftp): Avoid infloop by Ange-FTP
calling Tramp again: use tramp-run-real-handler to invoke
Ange-FTP.
(tramp-post-connection): Erase buffer after finding a remote
shell.
(tramp-find-file-exists-command): Try "test -e" and its variants
before "ls -d".

* Makefile (xemacs): Adjust to new directory names after moving
from SourceForge to Savannah.
(VERSION): Bump.
----------------------------
revision 1.29
date: 2002-08-05 07:41:17 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* tramp.el (tramp-invoke-ange-ftp): Avoid infloop by Ange-FTP
calling Tramp again: use tramp-run-real-handler to invoke
Ange-FTP.
(tramp-post-connection): Erase buffer after finding a remote
shell.
(tramp-find-file-exists-command): Try "test -e" and its variants
before "ls -d".

* Makefile (xemacs): Adjust to new directory names after moving
from SourceForge to Savannah.
----------------------------
revision 1.28
date: 2002-08-04 06:53:24 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.el (tramp-perl-encode-with-module,
tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode): Doc fix.  From Andreas
Schwab.
(tramp-bug): New variables to report.
(tramp-post-connection): After finding shell, wait a bit.  I have
no idea why it is necessary, but Daniel also thinks it's
necessary.
(tramp-uudecode): New variable.  Shell function `tramp_uudecode'
for decoding to standard output for those Unices that don't have
it.
(tramp-post-connection): Install the function on the remote host.
(tramp-coding-commands): Add an alternative for using the
`tramp_uudecode' shell function.

* Makefile (VERSION): Bump.
----------------------------
revision 1.27
date: 2002-08-04 04:37:01 -0700;  author: kai;  state: Exp;  lines: +2 -0;
Version 2.0.9 released.
----------------------------
revision 1.26
date: 2002-08-04 01:44:50 -0700;  author: kai;  state: Exp;  lines: +4 -0;
* tramp.el (tramp-bug): Add wording about additional info to
include in bug report.
(tramp-find-shell): Set $PS1 for invocation of second shell (for
tilde expansion).
(tramp-find-shell): Shell prompt must match at end of buffer.  Do
this also for fallback shell prompt.
(tramp-find-shell): More debugging output.

* Makefile (VERSION): Bump.
----------------------------
revision 1.25
date: 2002-08-03 13:52:41 -0700;  author: kai;  state: Exp;  lines: +8 -0;
(tramp-perl-encode, tramp-perl-encode): Double the
backslashes in the string.
----------------------------
revision 1.24
date: 2002-08-03 02:25:07 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.6 released.
----------------------------
revision 1.23
date: 2002-07-31 02:59:03 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(tramp-wrong-passwd-regexp): Restructure.  Add
additional alternative.
(tramp-action-permission-denied): Show *tramp/foo* buffer so that
the user knows why.
----------------------------
revision 1.22
date: 2002-07-29 02:14:30 -0700;  author: kai;  state: Exp;  lines: +6 -0;
Release notice.
----------------------------
revision 1.21
date: 2002-07-29 01:25:01 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(prepversion): New target, invokes itself in lisp and
texi subdirs.
----------------------------
revision 1.20
date: 2002-07-26 10:12:36 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* tramp.texi (Top): Add copying.
(Overview, Obtaining @tramp{}, Installation, Multi-hop Methods)
(Remote Programs, Multi-hop filename syntax)
(Frequently Asked Questions): Reformat.

* Makefile (clean): Delete more.

* tramp.el (tramp-coding-commands): New variable.
(tramp-find-inline-encoding): New function.
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file): Do expand-file-name on arg.

* Makefile: Bump version, preparing for next release.  (But that
release is not soon.)
----------------------------
revision 1.19
date: 2002-07-23 09:46:30 -0700;  author: youngs;  state: Exp;  lines: +4 -0;

2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (all): Export $VERSION to the subdirectories.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target to create tramp-version.el.
	(all): Use it.
	(clean): Add tramp-version.elc.

	* tramp.el (tramp-version): Removed, we create it on the fly from
	the Makefile.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target.  Creates
	tramp-version.texi.
	(all): Use it.
	(clean): Add tramp-version.texi.

	* tramp.texi: Include tramp-version.texi.
	(Top): Use macro defined in tramp-version.texi.
	(copying): Ditto.
----------------------------
revision 1.18
date: 2002-07-23 02:59:47 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(tramp-version): Bump version to 2.0.3.

* Makefile (VERSION): New version 2.0.3.
----------------------------
revision 1.17
date: 2002-07-19 07:31:16 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.el (tramp-multi-sh-program): New variable.
(tramp-open-connection-multi): Use it.
Bump version to 2.0.2.

* Makefile (VERSION): New version 2.0.2.
----------------------------
revision 1.16
date: 2002-06-25 11:01:21 -0700;  author: kai;  state: Exp;  lines: +0 -2;
2.0.1 release note.
----------------------------
revision 1.15
date: 2002-06-25 10:59:00 -0700;  author: kai;  state: Exp;  lines: +8 -0;
(VERSION): New version 2.0.1.
----------------------------
revision 1.14
date: 2002-06-19 14:36:36 -0700;  author: kai;  state: Exp;  lines: +4 -0;
*** empty log message ***
----------------------------
revision 1.13
date: 2002-06-17 04:19:22 -0700;  author: kai;  state: Exp;  lines: +2 -0;
Version 2.0.0 released.
----------------------------
revision 1.12
date: 2002-06-17 03:57:20 -0700;  author: kai;  state: Exp;  lines: +7 -0;
Include version number.
(MANIFEST): Don't include directory name "tramp/" in the entries.
(tar): Create a tramp-$(VERSION).tar.gz file.
(dist, savannah): tramp.tar.gz renamed to tramp-$(VERSION).tar.gz.
----------------------------
revision 1.11
date: 2002-06-16 09:19:04 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(tar): Make sure tarball is world-readable.
----------------------------
revision 1.10
date: 2002-06-14 07:40:11 -0700;  author: kai;  state: Exp;  lines: +1 -0;
* Makefile (sourceforge): Removed target.
(savannah): New target for uploading web page to Savannah.

* Makefile (MANIFEST): Write it in the source dir, not in "..".
(tar): Create only one tarball, don't distinguish between
developer release and stable release.
(sourceforge): Remove target.  The project has moved to Savannah.
(savannah): New target for uploading tarball to Savannah.
Also make home page.
----------------------------
revision 1.9
date: 2002-06-14 07:31:05 -0700;  author: kai;  state: Exp;  lines: +8 -0;
(MANIFEST): Write it in the source dir, not in "..".
(tar): Create only one tarball, don't distinguish between
developer release and stable release.
(sourceforge): Remove target.  The project has moved to Savannah.
(savannah): New target for uploading tarball to Savannah.
----------------------------
revision 1.8
date: 2002-01-21 23:34:03 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
* tramp.el (tramp-handle-set-visited-file-modtime): Save
`last-coding-system-used' in a way that works even if the
variable is not defined.

* Makefile (xemacs): New target: copy stuff to the XEmacs package
source directory.
----------------------------
revision 1.7
date: 2002-01-02 05:55:15 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(clean): Add target.
(all): Ditto.
----------------------------
revision 1.6
date: 2001-12-06 04:47:32 -0800;  author: kaig;  state: Exp;  lines: +3 -0;
branches:  1.6.2;
(upstream-cvs-update): Remove target.
Suggested by Stephen Turnbull.
----------------------------
revision 1.5
date: 2001-12-06 04:34:38 -0800;  author: kaig;  state: Exp;  lines: +1 -0;
Make it work inside XEmacs, too.  From Stephen
J. Turnbull <stephen@xemacs.org>.
(MANIFEST): New directory layout.
----------------------------
revision 1.4
date: 2001-12-06 02:46:02 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
Make it work inside XEmacs, too.  From Stephen
J. Turnbull <stephen@xemacs.org>.
----------------------------
revision 1.3
date: 2001-11-07 06:39:09 -0800;  author: kaig;  state: Exp;  lines: +4 -0;
(sourceforge): Submit tarballs via FTP automatically.
----------------------------
revision 1.2
date: 2001-10-08 00:21:53 -0700;  author: kaig;  state: Exp;  lines: +4 -0;
(tar): Add rules for more tarballs.
----------------------------
revision 1.1
date: 2001-09-07 06:51:35 -0700;  author: kaig;  state: Exp;
*** empty log message ***
----------------------------
revision 1.6.2.2
date: 2001-12-08 03:51:40 -0800;  author: youngs;  state: Exp;  lines: +3 -0;
2001-12-08  Steve Youngs  <youngs@xemacs.org>

	* README: Update to reflect XEmacs package branch, add section
	about getting Tramp2 code.
----------------------------
revision 1.6.2.1
date: 2001-12-08 03:24:17 -0800;  author: youngs;  state: Exp;  lines: +9 -6;
Re-write Makefile for XEmacs package
----------------------------
revision 1.31.2.1
date: 2002-08-20 12:33:48 -0700;  author: albinus;  state: Exp;  lines: +5 -0;
*** empty log message ***
----------------------------
revision 1.94.2.51
date: 2008-04-09 12:55:52 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: F6NMHLGHqT0vjtYs;
*** empty log message ***
----------------------------
revision 1.94.2.50
date: 2008-02-02 02:11:45 -0800;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: c7Tb9sZWU50DeOPs;
*** empty log message ***
----------------------------
revision 1.94.2.49
date: 2007-07-25 12:37:29 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 1.94.2.48
date: 2007-07-15 01:41:00 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: aM3x77bQBIEHdQps;

* configure.ac: Bump version (to 2.0.57-pre).  Update merge
version to 2.0.56.

* lisp/tramp.el (tramp-find-shell, tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-multi)
(tramp-open-connection-setup-interactive-shell): Guard against
$PROMPT_COMMAND shell var.  Reported by Steve Youngs
<steve@sxemacs.org>.
----------------------------
revision 1.94.2.47
date: 2007-05-28 01:49:42 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: 3AYYXUpQ30DuOFjs;

Version 2.0.56 released.
----------------------------
revision 1.94.2.46
date: 2007-01-08 23:25:32 -0800;  author: albinus;  state: Exp;  lines: +3 -0;

* configure.ac: texi2dvi cannot be called with "-o /dev/null", this
changes permissions of /dev/null.  Reported by Hans Halvorson
<hhalvors@Princeton.EDU>
----------------------------
revision 1.94.2.45
date: 2007-01-08 21:33:18 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* configure.ac: Bump version (to 2.0.56-pre).  Update merge
version to 2.0.55.
----------------------------
revision 1.94.2.44
date: 2006-12-30 07:15:39 -0800;  author: albinus;  state: Exp;  lines: +8 -2;

Version 2.0.55 released.
----------------------------
revision 1.94.2.43
date: 2006-10-21 06:40:49 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* configure.ac: Bump version (to 2.0.55-pre).  Update merge
version to 2.0.54.

* lisp/tramp.el (tramp-yn-prompt-regexp): Add question from plink.
(tramp-completion-mode): Remove clause (not
tramp-unified-filenames), because the function is called in other
context too, where this check results in wrong results in the
XEmacs case on Windows.
(tramp-touch): UTC handling is not possible for XEmacs.
----------------------------
revision 1.94.2.42
date: 2006-08-28 22:21:37 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

Version 2.0.54 released.
----------------------------
revision 1.94.2.41
date: 2006-05-06 15:08:04 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* configure.ac: Bump version (to 2.0.54-pre).  Update merge
version to 2.0.53.

* lisp/tramp.el (tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): That's a defsubst now.  Code
from `tramp-repair-jka-compr' moved here.  Register
`tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-repair-jka-compr): Remove.
(tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name): Remove them.
(tramp-completion-handle-file-name-all-completions):
Delete directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-completion-file-name-handler-alist): Delete
expand-file-name and other operations that can cause spurious loading.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
----------------------------
revision 1.94.2.40
date: 2006-04-17 05:07:58 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

Version 2.0.53 released.
----------------------------
revision 1.94.2.39
date: 2006-03-14 13:15:56 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

DESTDIR support
----------------------------
revision 1.94.2.38
date: 2006-01-27 13:55:22 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* configure.ac: Bump version (to 2.0.53-pre).  Update merge
version to 2.0.52.

* lisp/tramp.el: Add autoload for adding
`tramp-completion-file-name-handler' to `file-name-handler-alist'.
----------------------------
revision 1.94.2.37
date: 2006-01-22 10:38:31 -0800;  author: albinus;  state: Exp;  lines: +6 -0;


Version 2.0.52 released.

* configure.ac: Bump version.

* lisp/tramp.el, lisp/tramp-ftp.el, lisp/tramp-util.el,
lisp/tramp-vc.el: Add code for unloading Tramp.  See comment before
`tramp-unload-tramp' for checklist.

* lisp/tramp.el (tramp-unload-file-name-handler-alist)
(tramp-unload-tramp): New defuns.
(tramp-advice-PC-expand-many-files): New defadvice.
(tramp-save-PC-expand-many-files, tramp-setup-complete) Defuns
removed.

* lisp/tramp-ftp.el (tramp-ftp-enable-ange-ftp): New defun.

* lisp/tramp-util.el (top): Apply `ignore' instead of `identity' for
byte-compiler pacification.

* texi/tramp.texi (Frequently Asked Questions): Remove Ange-FTP item.
Add Tramp disabling item.
----------------------------
revision 1.94.2.36
date: 2005-12-02 12:33:27 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.
----------------------------
revision 1.94.2.35
date: 2005-10-23 12:06:25 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* Makefile.in (clean): Cleanup also subdirectory test.
(MANIFEST): Exclude tramp2 and .cvsignore.
----------------------------
revision 1.94.2.34
date: 2005-10-11 14:40:00 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* configure.ac: Bump version (to 2.0.52-pre).  Update merge
version to 2.0.51.

* Makefile.XEmacs (REQUIRES): Remove fsf-compat, add
sh-script (for executable-find).

* lisp/tramp.el: Require `timer-funcs' instead of `timer' if in
XEmacs.
----------------------------
revision 1.94.2.33
date: 2005-10-08 06:55:37 -0700;  author: albinus;  state: Exp;  lines: +7 -1;

Version 2.0.51 released.
----------------------------
revision 1.94.2.32
date: 2005-08-28 12:00:31 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* configure.ac: Bump version (to 2.0.51-pre).  Update merge
version to 2.0.50.
----------------------------
revision 1.94.2.31
date: 2005-08-07 08:06:53 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

Version 2.0.50 released.

* configure.ac: Bump version.

* lisp/tramp.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-accept-process-output): New defun.
(tramp-process-one-action, tramp-process-one-multi-action)
(tramp-wait-for-regexp, tramp-wait-for-output)
(tramp-discard-garbage-erase-buffer): Call it.  Reported by David
Howells <dhowells@redhat.com>.
(clear-visited-file-modtime): Defadvice removed.  The check for
unset buffer's modtime does not need to be based on
`tramp-buffer-file-attributes'.  Suggested by RMS.

* lisp/tramp-smb.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-smb-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-smb-wait-for-output): Call `tramp-accept-process-output'.
----------------------------
revision 1.94.2.30
date: 2005-07-10 14:36:47 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 1.94.2.29
date: 2005-05-14 08:21:27 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


Version 2.0.49 released.

* configure.ac: Bump version.
----------------------------
revision 1.94.2.28
date: 2005-04-03 09:48:45 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* configure.ac: Bump version (to 2.0.49-pre).  Update merge
version to 2.0.48.

* lisp/tramp.el (tramp-set-auto-save): Actions should be done for Tramp
file name handler only.  Ange-FTP has its own auto-save mechanism.
Reported by Richard G. Bielawski <Richard.G.Bielawski@wellsfargo.com>.
(tramp-bug): Remove obsolete variable.
(tramp-append-tramp-buffers): Rewrite partly.  More suitable check
for presence of `mml-mode'.  Make it running for older Emacsen as
well.
----------------------------
revision 1.94.2.27
date: 2005-03-20 11:16:32 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

Version 2.0.48 released.

* configure.ac: Bump version.

* Makefile.in (FTP_UPLOAD): Change upload address to
"ftp://ftp-upload.gnu.org/incoming/ftp".
(tar): Handle "$(TARNAME).tar.gz.directive".
----------------------------
revision 1.94.2.26
date: 2005-02-12 03:34:28 -0800;  author: albinus;  state: Exp;  lines: +12 -8;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 1.94.2.25
date: 2005-02-05 15:00:03 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* INSTALL: Change bug report address to [tramp-devel@gnu.org].

* lisp/tramp.el (all): Change all addresses to .gnu.org.
----------------------------
revision 1.94.2.24
date: 2005-02-02 14:08:21 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* configure.ac: Bump version (to 2.0.48-pre).  Update merge
version to 2.0.47.  Change bug report address to
[tramp-devel@gnu.org].

* lisp/tramp.el (tramp-file-name-for-operation) Use 'shell-command but
'shell.  Cut'n'waste error.  Reported by Vincent Bernat
<bernat@free.fr>.

* texi/tramp.texi (all): Change all addresses to .gnu.org.
----------------------------
revision 1.94.2.23
date: 2005-01-16 03:36:04 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

Version 2.0.47 released.
----------------------------
revision 1.94.2.22
date: 2004-12-30 01:33:45 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* aclocal.m4, configure.ac: grep(1) on OpenBSD 3.6 does not
understand the '-' option.  Small change.  From Ryan Yeske
<rcyeske@gmail.com>.
----------------------------
revision 1.94.2.21
date: 2004-12-23 16:00:48 -0800;  author: albinus;  state: Exp;  lines: +2 -1;

* configure.ac: Bump version (to 2.0.47-pre).  Update merge
version to 2.0.46.

* lisp/tramp.el (tramp-file-name-for-operation): Mark `shell-command'
as magic for Emacs only.
(tramp-wait-for-output): Fix error in deleting region.  From Kai
Grossjohann <kai.grossjohann@gmx.net>.

* lisp/tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
(tramp-vc-simple-command): Call `tramp-handle-shell-command' but
`shell-command', because it isn't magic in XEmacs.  Reported by
Adrian Aichner <adrian@xemacs.org>.
----------------------------
revision 1.94.2.20
date: 2004-12-23 02:58:23 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* configure.ac: Bump version (to 2.0.47-pre).

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`substitute-in-file-name.
(tramp-smb-handle-substitute-in-file-name): New defun.
(tramp-smb-advice-PC-do-completion): Delete advice.

Sync with trunk (Michael Albinus <michael.albinus@gmx.de>).

* lisp/tramp.el (tramp-handle-file-newer-than-file-p): Reverse logic.
From Andrew J. Korty <ajk@iu.edu>.
----------------------------
revision 1.94.2.19
date: 2004-12-16 06:11:07 -0800;  author: albinus;  state: Exp;  lines: +6 -0;


Version 2.0.46 released.
----------------------------
revision 1.94.2.18
date: 2004-10-17 09:03:17 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 1.94.2.17
date: 2004-10-14 14:13:21 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* configure.ac: Bump version (to 2.0.46-pre).  Update merge
version to 2.0.45.

* texi/trampver.texi.in (top): Set default value of `emacs' or `xemacs'
derived from @EMACS_INFO@.  This simplifies synchronizing with
XEmacs CVS.
----------------------------
revision 1.94.2.16
date: 2004-10-12 13:37:18 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


Version 2.0.45 released.

* configure.ac: Bump version.

* lisp/tramp-smb.el
(tramp-smb-advice-PC-do-completion): Don't activate
advice during definition.  This is done later on, depending on
test result of `substitute-in-file-name'.  Suggested by Stefan
Monnier <monnier@iro.umontreal.ca>.
----------------------------
revision 1.94.2.15
date: 2004-10-10 09:54:27 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* Makefile.in (savannah): Don't call make for texi.  Only the
trunk should place its files there.

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 1.94.2.14
date: 2004-09-19 03:31:39 -0700;  author: albinus;  state: Exp;  lines: +10 -0;


* Makefile.in (AUTOCONF, XEMACS_FILES): New variables.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.
(configure): Apply $(AUTOCONF).  Reported by Norbert Koch
<viteno@xemacs.org> in order to have a simple possibility applying
autoconf under another name.
----------------------------
revision 1.94.2.13
date: 2004-09-11 13:54:49 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* configure.ac: Bump version (to 2.0.45-pre).  Update merge
version to 2.0.44.
----------------------------
revision 1.94.2.12
date: 2004-08-10 14:26:49 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


* Makefile.in (EMACS_EL_FILES): Remove lisp/trampver.el, it is a
generated file.
(emacs): Copy trampver.el.
----------------------------
revision 1.94.2.11
date: 2004-08-10 14:22:39 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


* Makefile.in (MACS_EL_FILES): Remove lisp/trampver.el, it is a
generated file.
(emacs): Copy trampver.el.
----------------------------
revision 1.94.2.10
date: 2004-08-10 13:25:06 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


Version 2.0.44 released.

* configure.ac: Bump version.
----------------------------
revision 1.94.2.9
date: 2004-07-17 10:19:19 -0700;  author: kai;  state: Exp;  lines: +7 -0;
Missed to add a release changelog entry.

* Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.

* configure.ac: Bump version (to 2.0.44-pre).  Update merge
version to 2.0.43.
----------------------------
revision 1.94.2.8
date: 2004-07-17 07:51:45 -0700;  author: kai;  state: Exp;  lines: +5 -0;
Forgotten commit.
----------------------------
revision 1.94.2.7
date: 2004-07-13 12:29:52 -0700;  author: albinus;  state: Exp;  lines: +30 -2;


Sync with trunk.
----------------------------
revision 1.94.2.6
date: 2004-06-26 08:10:59 -0700;  author: kai;  state: Exp;  lines: +2 -0;
Release 2.0.42.
----------------------------
revision 1.94.2.5
date: 2004-06-26 08:10:23 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Release 2.0.42.
----------------------------
revision 1.94.2.4
date: 2004-05-29 15:52:50 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* configure.ac: Bump version (to 2.0.42-pre) and set
TRAMP_EMACS_MERGE_VERSION (to 2.0.41).
----------------------------
revision 1.94.2.3
date: 2004-05-29 14:40:48 -0700;  author: albinus;  state: Exp;  lines: +17 -0;


Version 2.0.41 released.

Sync with trunk
----------------------------
revision 1.94.2.2
date: 2004-05-29 04:59:56 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Use "-pre" suffix on CVS versions.
----------------------------
revision 1.94.2.1
date: 2004-05-07 14:37:12 -0700;  author: kai;  state: Exp;  lines: +29 -0;
Merge from trunk:

2004-05-07  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* configure.ac: Bump version (to 2.0.41) and set the
	last-merged-with-Emacs version (to 2.0.40).  Hm.  The version bump
	to 2.0.41 is probably bogus, we want to create a stable
	branch...  Argh.

	* Makefile.in (emacs): Don't patch man/trampver.texi in the Emacs
	repository, just copy texi/trampver.texi there.  We can't run
	"cvs diff" on texi/trampver.texi since it is a generated file, so
	our patching trick won't work for this file.

	* configure.ac (TRAMP_EMACS_MERGE_VERSION): New variable,
	indicating which was the last revision of Tramp that was merged
	into Emacs.  Don't forget to update this after running "make
	emacs" (or "gmake emacs")!

	* Makefile.in (EMACS_EL_FILES): Mention files explicitly to make
	sure that tramp-efs.el is not included.
	(EMACS_TEXI_FILES): New variable, lists manual files that need to
	be merged with the Emacs repository.
	(TRAMP_EMACS_MERGE_VERSION, TRAMP_EMACS_MERGE_TAG): New
	variables, indicating which was the last revision of Tramp that
	was merged into Emacs.  Automatically set by configure, original
	is in configure.ac.
	(emacs): Reword to use patches instead of copying the files.
	This helps to make sure that changes to Tramp files in the Emacs
	repository aren't overwritten.
----------------------------
revision 1.186.2.1
date: 2010-10-20 23:15:49 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: ho7z9k5WMCZI2hTu;
* configure.ac: Bump version (to 2.1.20-pre).  Update merge
version to 2.1.19.

* Makefile.in (cvstag): Use -F.
=============================================================================

RCS file: /sources/tramp/tramp/INSTALL,v
Working file: INSTALL
head: 2.18
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.18
	branch-2-1-stable: 2.17.0.2
	branchpoint-2-1-stable: 2.17
	V-2-1-19: 2.17
	V-2-1-18: 2.17
	V-2-1-17: 2.17
	V-2-1-16: 2.17
	V-2-1-15: 2.17
	V-2-1-14: 2.17
	V-2-1-13: 2.17
	V-2-0-57: 2.6.2.3
	V-2-1-12: 2.17
	V-2-1-11: 2.17
	V-2-1-10: 2.17
	V-2-0-56: 2.6.2.3
	V-2-1-9: 2.16
	V-2-1-8: 2.16
	V-2-0-55: 2.6.2.3
	V-2-1-7: 2.16
	V-2-0-54: 2.6.2.3
	V-2-1-6: 2.16
	V-2-0-53: 2.6.2.3
	V-2-0-52: 2.6.2.2
	V-2-1-5: 2.15
	V-2-1-4: 2.13
	V-2-0-51: 2.6.2.2
	V-2-0-50: 2.6.2.2
	V-2-0-49: 2.6.2.2
	V-2-0-48: 2.6.2.2
	V-2-1-3: 2.8
	V-2-0-47: 2.6
	V-2-0-46: 2.6
	V-2-0-45: 2.6
	V-2-1-2: 2.8
	V-2-0-44: 2.6
	V-2-1-1: 2.7
	V-2-0-43: 2.6
	V-2-0-42: 2.6
	V-2-0-41: 2.6
	V-2-1-0: 2.6
	branch-2-0-stable: 2.6.0.2
	branchpoint-2-0-stable: 2.6
	V-2-0-40: 2.6
	V-2-0-39: 2.4
	V-2-0-38: 2.4
	V-2-0-37: 2.4
	V-2-0-36: 2.3
	V-2-0-35: 2.2
	V-2-0-34: 2.2
	V-2-0-33: 2.2
	V-2-0-32: 2.2
keyword substitution: kv
total revisions: 21;	selected revisions: 21
description:
----------------------------
revision 2.18
date: 2010-09-02 02:17:56 -0700;  author: albinus;  state: Exp;  lines: +6 -16;  commitid: NHuTgSvU6LQQCZMu;
* INSTALL (System Requirements): Adapt versions.
(Japanese Manual): Remove.

* Makefile.in (XEMACS_FILES): Remove texi/tramp_ja.texi.
(cvstag): Use -F.
(savannah): Don't configure --with-japanese-manual.

* aclocal.m4 (AC_EMACS_INFO): Pretty-print
TRAMP_EMACS_VERSION_CHECK.
(AC_JA_MANUAL): Remove.

* configure.ac: Bump version (to 2.2.0).  Update merge
version to 2.1.19.  Remove AC_JA_MANUAL call.
----------------------------
revision 2.17
date: 2007-04-15 14:03:41 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* configure.ac: Bump version (to 2.1.10-pre).

* INSTALL: Commands cannot contain whitespaces in their path.

* lisp/tramp.el (tramp-default-user): Fix typo in docstring.  Value can
also be nil.

* texi/trampinst.texi (Installation parameters): Commands cannot
contain whitespaces in their path.
----------------------------
revision 2.16
date: 2006-03-14 13:40:09 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

DESTDIR support
----------------------------
revision 2.15
date: 2005-12-11 07:24:20 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

Version 2.1.5 released.

* configure.ac: Bump version.

* INSTALL: Point to Posix environments for installation under MS
Windows.

* lisp/tramp.el (tramp-remote-path): Beautify "/usr/xpg4/bin".  Clarify
docstring.
(tramp-handle-expand-file-name): Remove double slash.
(tramp-set-remote-path): It is sufficient to check for
`file-directory-p'.
(tramp-find-file-exists-command): Remove unnecessary message.
(tramp-check-ls-command, tramp-check-ls-commands)
(tramp-find-ls-command, tramp-find-id-command): Remove functions.
Code is moved to corresponding `tramp-get-*' functions.
(tramp-get-*): Work in connection buffer because local
`tramp-remote-path'. Insert code from above when necessary.
(tramp-bug): Add `tramp-default-host', `tramp-default-user',
`tramp-default-user-alist'.
(tramp-append-tramp-buffers): Add local variables for all Tramp
buffers.
----------------------------
revision 2.14
date: 2005-12-02 14:16:36 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* INSTALL, configure.ac: We depend on GNU texinfo 4.6.

* lisp/tramp.el (tramp-verbose): Document level 7.
(tramp-send-command-and-check): Clean up tramp_exit_status from
buffer.
(tramp-handle-file-local-copy, tramp-send-command-and-read):
Remove cleaning of tramp_exit_status.
(tramp-handle-write-region): Make cksum check more robust.
(tramp-remote-path): Add "/usr/xpg4/bin/".  On Solaris, there are
the POSIX programs.
(tramp-find-executable): IGNORE-TILDE is optional now.  New
parameter IGNORE-PATH.  Adapt callees.
(tramp-set-remote-path): Return list of existing directories.
(tramp-post-connection): Make `tramp-remote-path' buffer local.
Set it to list of existing directories.
(tramp-find-id-command, tramp-get-remote-id ): New defun.
(tramp-get-remote-uid, tramp-get-remote-gid): Use them.

* texi/tramp.texi (Frequently Asked Questions): Example how to set
`file-precious-flag' buffer local.

* texi/test.texi: Expand check for Texinfo 4.6 feature.
----------------------------
revision 2.13
date: 2005-10-09 12:43:33 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* INSTALL: Provide working options for installing on MS Windows.

* lisp/tramp.el (tramp-completion-without-shell-p): Removed.  Not
needed anymore.
(tramp-md5-function): Fix typo in error message.
(tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-handle-file-name-all-completions): Rewritten in order to
profit from caching results.
(tramp-handle-file-name-completion): Removed unnecessary code.

* lisp/tramp-cache.el (with-cache-data): ,@body must be wrapped by
`progn'.  Add `edebug-form-spec' property.

* lisp/tramp-smb.el (tramp-smb-handle-file-name-all-completions):
Rewritten in order to profit from caching results.

* texi/tramp.texi (Dired): Node removed.  There are no limitations on
directory listings anymore.
(Default Method): Fix typo in variable name.
(Filename completion): Remove limitations on directory listings.

* texi/trampinst.texi (Installation parameters): Provide working
options for installing on MS Windows.
----------------------------
revision 2.12
date: 2005-02-13 10:42:44 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* INSTALL, texi/tramp.texi, texi/trampinst.texi: Replace "Linux" by
"GNU/Linux".  Suggested by Richard M. Stallman <rms@gnu.org>

* aclocal.m4 (AC_PATH_LISPDIR): Document an alternative approach
configuring `lispdir'.  Not activated (yet).

* configure.ac: Documentation fix.
----------------------------
revision 2.11
date: 2005-02-12 03:19:00 -0800;  author: albinus;  state: Exp;  lines: +2 -3;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.10
date: 2005-02-05 15:02:40 -0800;  author: albinus;  state: Exp;  lines: +8 -9;

* INSTALL: Explain in more detail configure parameters
"with-xemacs", "--with-lispdir" and "--infodir".  Change bug
report address to [tramp-devel@gnu.org].

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rewrite
completely in order to apply better default values.

* configure.ac: Reorder substitution of installation directories
wrt changes in aclocal.m4.

* lisp/tramp.el (all): Change all addresses to .gnu.org.

* texi/Makefile.in (datadir): New variable.

* texi/trampinst.texi (Installation parameters): Explain in more detail
configure parameters "with-xemacs", "--with-lispdir" and
"--infodir".
----------------------------
revision 2.9
date: 2005-02-02 14:38:25 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* INSTALL: Linux configure option prefix should be
"--prefix=/usr".  Reported by Bradley Dilger <dilger@wrecking.org>.

* configure.ac: Bump version (to 2.1.4-pre).  Change bug report
address to [tramp-devel@gnu.org].

* texi/tramp.texi (all): Change all addresses to .gnu.org.
(Obtaining Tramp): Mention the Nightly CVS Tree Tarball as CVS
direct access alternative.

* texi/trampinst.texi (Installation parameters): Linux configure option
prefix should be "--prefix=/usr".  Reported by Bradley Dilger
<dilger@wrecking.org>.
----------------------------
revision 2.8
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +6 -3;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 2.7
date: 2004-07-30 12:52:03 -0700;  author: albinus;  state: Exp;  lines: +5 -4;


* INSTALL: Precise supported (X)Emacs versions.

* aclocal.m4 (AC_EMACS_INFO): Add check for proper (X)Emacs
version.

* configure.ac: Precise comments.

* lisp/trampver.el.in: Check for (X)Emacs version.  Code is from macro
AC_EMACS_INFO of aclocal.m4.

* lisp/tramp.el (top): Remove (X)Emacs version check.
(tramp-maybe-open-connection): Handle NIL values in
`tramp-default-proxies-alist'.

* texi/trampver.texi.in: Remove `postfixmultihop'.  Rename
`postfixsinglehop' into `postfixhop'.

* texi/tramp.texi (top): Rename `postfixsinglehop' into `postfixhop'.
(Multi-hop Methods, Multi-hop filename syntax): Removed, including
al pointers to.
(Multi-hops): New chapter.
(History of Tramp): Proxy hosts mentioned.
(Frequently Asked Questions): Precise supported (X)Emacs
versions.
----------------------------
revision 2.6
date: 2004-03-29 12:37:49 -0800;  author: albinus;  state: Exp;  lines: +20 -1;
branches:  2.6.2;


* configure.ac: Beautify check for "install-info".

* INSTALL (Installation Names): Describe what to do in case of
errors and warnings.
(Load Path): Add XEmacs example.

* texi/Makefile.in (INSTALL_INFO): Use option `--quiet'.

* texi/tramp.texi (Frequently Asked Questions): Use "MS Windows
NT/2000/XP" (not only "NT").  Remove doubled entry "What kinds of
systems does @tramp{} work on".

* texi/trampinst.texi (Installation parameters): Describe what to do in
case of errors and warnings.
----------------------------
revision 2.5
date: 2004-03-14 12:59:18 -0800;  author: albinus;  state: Exp;  lines: +7 -23;


* INSTALL: Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.

* Makefile.in: Don't check for $(USE_CONTRIB) any longer.
(xemacs): Use ""$(MAKE)" instead of "make".
(emacs): Use "--with-emacs" configure option.
(savannah): Use "ftp-upload" instead of "scp".  Hope it works for
Kai.

* aclocal.m4 (AC_EMACS_LISP): Use "-vanilla" in case of XEmacs.
(AC_CONTRIB_FILES): New function.  Checks for the need of
provisioning of a contributed package.

* configure.ac: Apply `AC_CONTRIB_FILES' for all Lisp files of
contrib directory.

* contrib/README: Clarify run-at-time.el.

* lisp/Makefile.in: New environment variables $(CONTRIB_FILES) and
$(INSTALL_FILES).  Don't check for $(USE_CONTRIB) any longer.
(all): Depends on $(CONTRIB_FILES), too.
(install): Copy $(INSTALL_FILES) but $?.
(distclean): Remove also $(CONTRIB_FILES).

* texi/Makefile.in (savannah): Simplify copy command.

* texi/trampinst.texi (Installation, Installation parameters)
(Load paths): Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.
----------------------------
revision 2.4
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +12 -0;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 2.3
date: 2003-07-15 14:00:32 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* INSTALL: List required GNU software for installation.

* lisp/Makefile.in (LISP_FILES): tramp-ftp.el is conditional, too.
(install): Install only files belonging to the respective Emacs
flavour.
----------------------------
revision 2.2
date: 2003-03-24 12:47:58 -0800;  author: albinus;  state: Exp;  lines: +8 -5;

* INSTALL: Add a first step calling `autoconf' in case Tramp is
taken from CVS sources.
----------------------------
revision 2.1
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.6.2.3
date: 2006-03-14 13:15:56 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

DESTDIR support
----------------------------
revision 2.6.2.2
date: 2005-02-12 03:34:28 -0800;  author: albinus;  state: Exp;  lines: +4 -4;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.6.2.1
date: 2005-02-05 15:00:03 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* INSTALL: Change bug report address to [tramp-devel@gnu.org].

* lisp/tramp.el (all): Change all addresses to .gnu.org.
=============================================================================

RCS file: /sources/tramp/tramp/Attic/MANIFEST,v
Working file: MANIFEST
head: 1.8
branch:
locks: strict
access list:
symbolic names:
keyword substitution: kv
total revisions: 8;	selected revisions: 8
description:
----------------------------
revision 1.8
date: 2000-06-07 21:40:41 -0700;  author: daniel;  state: dead;  lines: +0 -0;
This is automatically generated, and shouldn't be in CVS.
----------------------------
revision 1.7
date: 2000-05-21 06:51:34 -0700;  author: grossjoh;  state: Exp;  lines: +0 -1;
*** empty log message ***
----------------------------
revision 1.6
date: 2000-05-06 04:07:04 -0700;  author: grossjoh;  state: Exp;  lines: +1 -0;
Use format-spec.el from Gnus 5.8.
----------------------------
revision 1.5
date: 2000-05-06 03:44:02 -0700;  author: grossjoh;  state: Exp;  lines: +6 -4;
Little bug fixes.
----------------------------
revision 1.4
date: 2000-04-06 15:10:08 -0700;  author: grossjoh;  state: Exp;  lines: +0 -2;
Simple cleanup.
----------------------------
revision 1.3
date: 2000-04-06 14:13:21 -0700;  author: grossjoh;  state: Exp;  lines: +0 -20;
Removed source tarball.
----------------------------
revision 1.2
date: 2000-04-04 07:40:56 -0700;  author: grossjoh;  state: Exp;  lines: +15 -1;
*** empty log message ***
----------------------------
revision 1.1
date: 2000-03-12 05:36:01 -0800;  author: grossjoh;  state: Exp;
Some files don't need to be in the CVS repository.
=============================================================================

RCS file: /sources/tramp/tramp/Attic/MANIFEST.src,v
Working file: MANIFEST.src
head: 1.3
branch:
locks: strict
access list:
symbolic names:
keyword substitution: kv
total revisions: 3;	selected revisions: 3
description:
----------------------------
revision 1.3
date: 2000-04-06 14:10:02 -0700;  author: grossjoh;  state: dead;  lines: +0 -0;
We used to have a tarball with the *,v files, but now that there's CVS...
----------------------------
revision 1.2
date: 2000-04-04 07:41:01 -0700;  author: grossjoh;  state: Exp;  lines: +15 -1;
*** empty log message ***
----------------------------
revision 1.1
date: 2000-03-12 05:36:02 -0800;  author: grossjoh;  state: Exp;
Some files don't need to be in the CVS repository.
=============================================================================

RCS file: /sources/tramp/tramp/Attic/Makefile,v
Working file: Makefile
head: 2.51
branch:
locks: strict
access list:
symbolic names:
	V-2-0-30: 2.50
	V-2-0-29: 2.49
	V-2-0-28: 2.47
	V-2-0-27: 2.46
	V-2-0-26: 2.45
	V-2-0-25: 2.43
	V-2-0-24: 2.41
	V-2-0-23: 2.38
	V-2-0-22: 2.37
	V-2-0-21: 2.36
	V-2-0-20: 2.35
	V-2-0-19: 2.34
	V-2-0-18: 2.32
	V-2-0-17: 2.30
	V-2-0-16: 2.30
	V-2-0-15: 2.28
	V-2-0-14: 2.27
	V-2-0-13: 2.26
	completion: 2.25.0.2
	V-2-0-12: 2.25
	V-2-0-11: 2.24
	V-2-0-10: 2.22
	V-2-0-9: 2.21
	V-2-0-8: 2.20
	V-2-0-7: 2.19
	V-2-0-6: 2.19
	V-2-0-5: 2.18
	V-2-0-4: 2.16
	V-2-0-3: 2.13
	V-2-0-1: 2.11
	EMACS-21: 2.12
	V-2-0-0: 2.10
	tramp-xemacs-pkg: 2.5.0.2
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 65;	selected revisions: 65
description:
----------------------------
revision 2.51
date: 2003-03-22 08:52:22 -0800;  author: albinus;  state: dead;  lines: +0 -0;
*** empty log message ***
----------------------------
revision 2.50
date: 2003-02-28 10:12:29 -0800;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.texi: Bump version.

* tramp.el (tramp-version): Bump.
(tramp-handle-expand-file-name): Protect against short localnames
when comparing with "/../".

* Makefile (VERSION): Bump.
----------------------------
revision 2.49
date: 2003-02-05 11:34:18 -0800;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.texi (Installation): In Emacs, use M-x
texinfo-format-buffer RET, not M-x makeinfo-buffer RET.  Reported
by gebser@ameritech.net.

* tramp.el (tramp-send-region): Protect against tramp-chunksize
being nil.

* Makefile (VERSION): Bump.
----------------------------
revision 2.48
date: 2003-01-02 02:59:25 -0800;  author: kai;  state: Exp;  lines: +16 -4;
* tramp.el (top-level): Avoid byte-compiler warnings of unused
variables if the byte-compiler supports this.  This is for the
with-parsed-tramp-file-name macro which is wont to produce such
stuff.

* Makefile (EMACS_EL_FILES): List of files for Emacs repository.
(emacs): New target.  Copy data into Emacs CVS repository.
(xemacs): Copy more files to XEmacs repository.
----------------------------
revision 2.47
date: 2002-12-23 06:03:44 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.28 released.
----------------------------
revision 2.46
date: 2002-12-05 14:29:22 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.27 released.
----------------------------
revision 2.45
date: 2002-11-28 13:35:11 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.26 released.
----------------------------
revision 2.44
date: 2002-10-19 10:27:20 -0700;  author: kai;  state: Exp;  lines: +1 -0;
(xemacs): Add reminder for Kai.
----------------------------
revision 2.43
date: 2002-10-06 12:03:20 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(VERSION): Bump.
----------------------------
revision 2.42
date: 2002-10-03 12:31:09 -0700;  author: kai;  state: Exp;  lines: +4 -2;
* tramp.texi: Move @copying section to preamble of document.  Do
@insertcopying on page after the title page for tex output, and in
the top node otherwise.

* Makefile (realclean): New target, delete info file and tarball
here.
----------------------------
revision 2.41
date: 2002-09-29 09:05:58 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(VERSION): Bump.
----------------------------
revision 2.40
date: 2002-09-28 05:08:52 -0700;  author: kai;  state: Exp;  lines: +1 -0;
* Makefile (tramp): Renamed from tramp.info.

* Makefile (cvs-update): New convenience target.
(clean): Remove info subdir, too.
----------------------------
revision 2.39
date: 2002-09-28 04:57:20 -0700;  author: kai;  state: Exp;  lines: +3 -0;
* tramp.el (tramp-open-connection-setup-interactive-shell):
Explicitly set tramp-last-cmd-time before invoking
tramp-send-command the first time.  Otherwise, tramp-send-command
would issue "echo are you awake" right at the first time, which
is not what we want.  Reported by Douglas Gray Stephens.

* Makefile (cvs-update): New convenience target.
----------------------------
revision 2.38
date: 2002-09-24 09:22:16 -0700;  author: kai;  state: Exp;  lines: +5 -2;
* tramp.texi: Bump version.

* tramp.el (tramp-handle-file-truename): Eliminate unused
variable.
(tramp-version): Bump.
----------------------------
revision 2.37
date: 2002-09-22 10:30:03 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.22.
----------------------------
revision 2.36
date: 2002-09-22 06:53:01 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.21 released.

(tramp-handle-file-newer-than-file-p): If mtime of
both files is known, return a useful result.  Better error
message in case one is a Tramp file and one isn't.
(tramp-handle-file-local-copy, tramp-handle-write-region)
(tramp-find-shell, tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-setup-interactive-shell)
(tramp-post-connection, tramp-maybe-open-connection)
(tramp-method-out-of-band-p): Correct number of args for
`tramp-get-rsh-program' and similar functions.
----------------------------
revision 2.35
date: 2002-09-22 06:11:59 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.20 released.
----------------------------
revision 2.34
date: 2002-09-13 14:19:48 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.19 released.

* tramp-uu.el: New file.

* tramp.el (tramp-coding-commands): Use `tramp-uuencode-region'
as local encoder for the uuencode based entries.

* tramp.texi: Define macro for printing a Tramp filename.
----------------------------
revision 2.33
date: 2002-09-13 03:14:54 -0700;  author: kai;  state: Exp;  lines: +1 -0;
(MANIFEST): Ignore .#* files.
----------------------------
revision 2.32
date: 2002-09-13 03:12:30 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-perl-decode): Perl changes to accomodate older
versions of Perl.  Now tested with 5.004.  Suggestion from
Michael Albinus.

* Makefile (VERSION): Bump
----------------------------
revision 2.31
date: 2002-09-12 09:08:04 -0700;  author: kai;  state: Exp;  lines: +3 -3;
* tramp.el (tramp-find-inline-encoding): Call
tramp-call-local-coding-command with nil for INPUT and OUTPUT.
(tramp-call-local-coding-command): OUTPUT equals nil means to
discard the output.  INPUT equals nil means /dev/null.

* Makefile (tar): Depend on prepversion, not tag.
(dist): Depend on tag.
(VERSION): Bump.
----------------------------
revision 2.30
date: 2002-09-11 04:03:45 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-post-connection): Only send Perl
mime-encode/decode implementations when using inline method.
(tramp-handle-file-local-copy)
(tramp-handle-write-region, tramp-post-connection)
(tramp-coding-commands, tramp-find-inline-encoding): For the
inline encodings, distinguish between local and remote commands,
instead of between commands and functions.  (The local commands
can be functions, too.)  If the local host is a Windows machine,
we can't expect the same commands to work there as on the remote
host.
(tramp-call-local-coding-command): New function for calling local
encoding and decoding commands.
(tramp-set-remote-encoding, tramp-get-remote-encoding)
(tramp-set-remote-decoding, tramp-get-remote-decoding)
(tramp-set-local-encoding, tramp-get-local-encoding)
(tramp-set-local-decoding, tramp-get-local-decoding): New functions.
(tramp-get-encoding-command, tramp-set-encoding-command)
(tramp-get-decoding-command, tramp-set-decoding-command)
(tramp-get-encoding-function, tramp-set-encoding-function)
(tramp-get-decoding-function, tramp-set-decoding-function): Old
functions, removed.

* Makefile (VERSION): Bump.
----------------------------
revision 2.29
date: 2002-09-01 13:29:51 -0700;  author: kai;  state: Exp;  lines: +4 -1;
(dist): Don't try to install on local ftp server unless at
university account.
----------------------------
revision 2.28
date: 2002-09-01 12:29:45 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.15 is released.
----------------------------
revision 2.27
date: 2002-08-22 08:12:23 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.texi (Remote shell setup): Mention
`tramp-shell-prompt-pattern', `tramp-actions-before-shell', and
`tramp-multi-actions'.

* tramp.el (tramp-shell-prompt-pattern): New variable.
(tramp-actions-before-shell, tramp-multi-actions)
(tramp-find-shell, tramp-open-connection-multi)
(tramp-open-connection-setup-interactive-shell): Use it.
(tramp-open-connection-telnet, tramp-open-connection-rsh)
(tramp-open-connection-su): Mention `tramp-shell-prompt-pattern'
in the docstring.
(tramp-bug): Report `tramp-shell-prompt-pattern'.
(tramp-process-one-multi-action, tramp-process-one-action): Make
message clearer so people don't confuse it with Emacs asking them
a question if the regexp happens to end with "?".
(tramp-verbose): Change default value from 10 to 9.  Also change
some logging levels so that 10 is reserved for stuff which is
needed for debugging only, but 9 catches everything that people
might like to see in order to see that Tramp is actually working.

* Makefile (VERSION): Bump.
----------------------------
revision 2.26
date: 2002-08-21 08:00:59 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-handle-write-region): Don't check to see if
remote end is awake after sending data to remote host: we want to
send "EOF" not "echo are you awake"...
(tramp-maybe-open-connection): Swap args for tramp-time-diff.

* Makefile (VERSION): Bump.
----------------------------
revision 2.25
date: 2002-08-07 07:51:36 -0700;  author: kai;  state: Exp;  lines: +1 -1;
branches:  2.25.2;
* tramp.el (tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Comment out
possibly obsolete "echo hello" commands.
(tramp-run-real-handler): If operation is
`ange-ftp-hook-function', use first arg as the real operation.
(tramp-check-ls-commands): Use / instead of \ as directory
separator.  (Relevant for XEmacs on Windows.)
(tramp-maybe-open-connection): Use tramp-wait-for-output when
waiting for the "are you awake" command.  Use a different string
for the "are you awake" command.
(tramp-send-command): New optional arg NEVEROPEN means to never
invoke tramp-maybe-open-connection.
(tramp-maybe-open-connection): Use it.

* Makefile (VERSION): Bump.
----------------------------
revision 2.24
date: 2002-08-05 07:53:47 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.11.

* tramp.el (tramp-invoke-ange-ftp): Avoid infloop by Ange-FTP
calling Tramp again: use tramp-run-real-handler to invoke
Ange-FTP.
(tramp-post-connection): Erase buffer after finding a remote
shell.
(tramp-find-file-exists-command): Try "test -e" and its variants
before "ls -d".

* Makefile (xemacs): Adjust to new directory names after moving
from SourceForge to Savannah.
(VERSION): Bump.
----------------------------
revision 2.23
date: 2002-08-05 07:41:17 -0700;  author: kai;  state: Exp;  lines: +3 -3;
* tramp.el (tramp-invoke-ange-ftp): Avoid infloop by Ange-FTP
calling Tramp again: use tramp-run-real-handler to invoke
Ange-FTP.
(tramp-post-connection): Erase buffer after finding a remote
shell.
(tramp-find-file-exists-command): Try "test -e" and its variants
before "ls -d".

* Makefile (xemacs): Adjust to new directory names after moving
from SourceForge to Savannah.
----------------------------
revision 2.22
date: 2002-08-04 06:53:24 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-perl-encode-with-module,
tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode): Doc fix.  From Andreas
Schwab.
(tramp-bug): New variables to report.
(tramp-post-connection): After finding shell, wait a bit.  I have
no idea why it is necessary, but Daniel also thinks it's
necessary.
(tramp-uudecode): New variable.  Shell function `tramp_uudecode'
for decoding to standard output for those Unices that don't have
it.
(tramp-post-connection): Install the function on the remote host.
(tramp-coding-commands): Add an alternative for using the
`tramp_uudecode' shell function.

* Makefile (VERSION): Bump.
----------------------------
revision 2.21
date: 2002-08-04 01:44:50 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-bug): Add wording about additional info to
include in bug report.
(tramp-find-shell): Set $PS1 for invocation of second shell (for
tilde expansion).
(tramp-find-shell): Shell prompt must match at end of buffer.  Do
this also for fallback shell prompt.
(tramp-find-shell): More debugging output.

* Makefile (VERSION): Bump.
----------------------------
revision 2.20
date: 2002-08-03 13:52:41 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-perl-encode, tramp-perl-encode): Double the
backslashes in the string.
----------------------------
revision 2.19
date: 2002-07-31 08:25:08 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-handle-file-truename): Invoke Ange-FTP properly.
(tramp-handle-expand-many-files): Don't try to invoke Ange-FTP
twice.
----------------------------
revision 2.18
date: 2002-07-30 12:56:50 -0700;  author: kai;  state: Exp;  lines: +2 -2;
Correct dependencies so that tagging is done first.
----------------------------
revision 2.17
date: 2002-07-29 07:09:49 -0700;  author: kai;  state: Exp;  lines: +5 -2;
* Makefile (prepversion): Edit tramp.el instead of creating new
file tramp-version.el.
(clean): Don't remove tramp-version.el, the file doesn't exist
anymore.

* tramp.el (tramp-perl-encode, tramp-perl-decode): Very simple
implementations requiring the Perl module MIME::Base64.
(tramp-coding-commands): Use them.
(tramp-version): Move back here from tramp-version.el.  The
variable is automatically edited from the Makefile.
(tramp-login-prompt-regexp, tramp-password-prompt-regexp)
(tramp-wrong-passwd-regexp): Remove "$" from regexp, it must match
at end of buffer anyway.
(tramp-action-login, tramp-action-succeed)
(tramp-action-permission-denied, tramp-multi-action-login)
(tramp-multi-action-succeed)
(tramp-multi-action-permission-denied): Erase buffer when
finished.
(tramp-process-one-action, tramp-process-one-multi-action):
Always search from point-min.
(tramp-enter-password): Erase buffer.
----------------------------
revision 2.16
date: 2002-07-29 01:25:01 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(prepversion): New target, invokes itself in lisp and
texi subdirs.
----------------------------
revision 2.15
date: 2002-07-26 10:12:36 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.texi (Top): Add copying.
(Overview, Obtaining @tramp{}, Installation, Multi-hop Methods)
(Remote Programs, Multi-hop filename syntax)
(Frequently Asked Questions): Reformat.

* Makefile (clean): Delete more.

* tramp.el (tramp-coding-commands): New variable.
(tramp-find-inline-encoding): New function.
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file): Do expand-file-name on arg.

* Makefile: Bump version, preparing for next release.  (But that
release is not soon.)
----------------------------
revision 2.14
date: 2002-07-23 09:46:30 -0700;  author: youngs;  state: Exp;  lines: +2 -1;

2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (all): Export $VERSION to the subdirectories.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target to create tramp-version.el.
	(all): Use it.
	(clean): Add tramp-version.elc.

	* tramp.el (tramp-version): Removed, we create it on the fly from
	the Makefile.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target.  Creates
	tramp-version.texi.
	(all): Use it.
	(clean): Add tramp-version.texi.

	* tramp.texi: Include tramp-version.texi.
	(Top): Use macro defined in tramp-version.texi.
	(copying): Ditto.
----------------------------
revision 2.13
date: 2002-07-23 02:59:47 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-version): Bump version to 2.0.3.

* Makefile (VERSION): New version 2.0.3.
----------------------------
revision 2.12
date: 2002-07-19 07:31:16 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-multi-sh-program): New variable.
(tramp-open-connection-multi): Use it.
Bump version to 2.0.2.

* Makefile (VERSION): New version 2.0.2.
----------------------------
revision 2.11
date: 2002-06-25 10:59:00 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(VERSION): New version 2.0.1.
----------------------------
revision 2.10
date: 2002-06-17 03:57:20 -0700;  author: kai;  state: Exp;  lines: +12 -8;
Include version number.
(MANIFEST): Don't include directory name "tramp/" in the entries.
(tar): Create a tramp-$(VERSION).tar.gz file.
(dist, savannah): tramp.tar.gz renamed to tramp-$(VERSION).tar.gz.
----------------------------
revision 2.9
date: 2002-06-16 09:19:04 -0700;  author: kai;  state: Exp;  lines: +1 -0;
(tar): Make sure tarball is world-readable.
----------------------------
revision 2.8
date: 2002-06-14 07:40:11 -0700;  author: kai;  state: Exp;  lines: +1 -0;
* Makefile (sourceforge): Removed target.
(savannah): New target for uploading web page to Savannah.

* Makefile (MANIFEST): Write it in the source dir, not in "..".
(tar): Create only one tarball, don't distinguish between
developer release and stable release.
(sourceforge): Remove target.  The project has moved to Savannah.
(savannah): New target for uploading tarball to Savannah.
Also make home page.
----------------------------
revision 2.7
date: 2002-06-14 07:31:05 -0700;  author: kai;  state: Exp;  lines: +4 -17;
(MANIFEST): Write it in the source dir, not in "..".
(tar): Create only one tarball, don't distinguish between
developer release and stable release.
(sourceforge): Remove target.  The project has moved to Savannah.
(savannah): New target for uploading tarball to Savannah.
----------------------------
revision 2.6
date: 2002-01-21 23:34:03 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
* tramp.el (tramp-handle-set-visited-file-modtime): Save
`last-coding-system-used' in a way that works even if the
variable is not defined.

* Makefile (xemacs): New target: copy stuff to the XEmacs package
source directory.
----------------------------
revision 2.5
date: 2001-12-06 04:34:38 -0800;  author: kaig;  state: Exp;  lines: +1 -1;
branches:  2.5.2;
Make it work inside XEmacs, too.  From Stephen
J. Turnbull <stephen@xemacs.org>.
(MANIFEST): New directory layout.
----------------------------
revision 2.4
date: 2001-12-06 02:46:02 -0800;  author: kaig;  state: Exp;  lines: +20 -5;
Make it work inside XEmacs, too.  From Stephen
J. Turnbull <stephen@xemacs.org>.
----------------------------
revision 2.3
date: 2001-11-07 06:39:09 -0800;  author: kaig;  state: Exp;  lines: +8 -0;
(sourceforge): Submit tarballs via FTP automatically.
----------------------------
revision 2.2
date: 2001-10-08 00:21:53 -0700;  author: kaig;  state: Exp;  lines: +6 -2;
(tar): Add rules for more tarballs.
----------------------------
revision 2.1
date: 2001-09-07 06:50:27 -0700;  author: kaig;  state: Exp;  lines: +3 -0;
* tramp.texi (Module): Repository has moved to SF.

* Makefile (Module): Install things on SourceForge.

* Makefile (Module): Rule for submitting to SourceForge.
----------------------------
revision 2.0
date: 2001-02-28 02:39:26 -0800;  author: grossjoh;  state: Exp;  lines: +0 -0;
Going stable?
----------------------------
revision 1.11
date: 2000-05-31 15:08:19 -0700;  author: grossjoh;  state: Exp;  lines: +6 -6;
Name change.
----------------------------
revision 1.10
date: 2000-05-30 09:54:43 -0700;  author: grossjoh;  state: Exp;  lines: +1 -0;
Publish Yuji's Japanese translation on the Web.
----------------------------
revision 1.9
date: 2000-05-25 15:36:15 -0700;  author: grossjoh;  state: Exp;  lines: +3 -0;
Add target for installing HTML file.
----------------------------
revision 1.8
date: 2000-05-21 06:51:39 -0700;  author: grossjoh;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 1.7
date: 2000-05-17 06:51:56 -0700;  author: grossjoh;  state: Exp;  lines: +5 -3;
File names in tar ball are rcp/* rather than *.
----------------------------
revision 1.6
date: 2000-05-04 13:33:06 -0700;  author: grossjoh;  state: Exp;  lines: +3 -1;
Separate `tar' target.
----------------------------
revision 1.5
date: 2000-04-22 11:24:47 -0700;  author: grossjoh;  state: Exp;  lines: +1 -0;
Meaningless change to test the loginfo script
----------------------------
revision 1.4
date: 2000-04-06 15:10:08 -0700;  author: grossjoh;  state: Exp;  lines: +13 -8;
Simple cleanup.
----------------------------
revision 1.3
date: 2000-04-06 14:13:21 -0700;  author: grossjoh;  state: Exp;  lines: +6 -8;
Removed source tarball.
----------------------------
revision 1.2
date: 2000-01-28 15:53:01 -0800;  author: grossjoh;  state: Exp;  lines: +7 -4;
Ted Stern <stern@tera.com>: Suggestions for Makefile; missing subdir
Makefiles
----------------------------
revision 1.1
date: 2000-01-28 09:22:13 -0800;  author: grossjoh;  state: Exp;
*** empty log message ***
----------------------------
revision 2.5.2.1
date: 2001-12-08 03:24:17 -0800;  author: youngs;  state: Exp;  lines: +60 -76;
Re-write Makefile for XEmacs package
----------------------------
revision 2.25.2.1
date: 2002-08-20 12:33:48 -0700;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
=============================================================================

RCS file: /sources/tramp/tramp/Makefile.XEmacs,v
Working file: Makefile.XEmacs
head: 2.5
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.5
	branch-2-1-stable: 2.5.0.2
	branchpoint-2-1-stable: 2.5
	V-2-1-19: 2.5
	V-2-1-18: 2.5
	V-2-1-17: 2.5
	V-2-1-16: 2.5
	V-2-1-15: 2.5
	V-2-1-14: 2.5
	V-2-1-13: 2.5
	V-2-0-57: 2.2.6.3
	V-2-1-12: 2.5
	V-2-1-11: 2.5
	V-2-1-10: 2.5
	V-2-0-56: 2.2.6.3
	V-2-1-9: 2.5
	V-2-1-8: 2.5
	V-2-0-55: 2.2.6.3
	V-2-1-7: 2.5
	V-2-0-54: 2.2.6.3
	V-2-1-6: 2.5
	V-2-0-53: 2.2.6.3
	V-2-0-52: 2.2.6.3
	V-2-1-5: 2.5
	V-2-1-4: 2.5
	V-2-0-51: 2.2.6.2
	V-2-0-50: 2.2.6.2
	V-2-0-49: 2.2.6.1
	V-2-0-48: 2.2.6.1
	V-2-1-3: 2.3
	V-2-0-47: 2.2.6.1
	V-2-0-46: 2.2.6.1
	V-2-0-45: 2.2
	V-2-1-2: 2.2
	V-2-0-44: 2.2
	V-2-1-1: 2.2
	V-2-0-43: 2.2
	V-2-0-42: 2.2
	V-2-0-41: 2.2
	V-2-1-0: 2.2
	branch-2-0-stable: 2.2.0.6
	branchpoint-2-0-stable: 2.2
	V-2-0-40: 2.2
	V-2-0-39: 2.2
	V-2-0-38: 2.2
	V-2-0-37: 2.2
	V-2-0-36: 2.2
	V-2-0-35: 2.2
	V-2-0-34: 2.2
	V-2-0-33: 2.2
	V-2-0-32: 2.2
	V-2-0-30: 2.2
	V-2-0-29: 2.2
	V-2-0-28: 2.2
	V-2-0-27: 2.2
	V-2-0-26: 2.2
	V-2-0-25: 2.2
	V-2-0-24: 2.2
	V-2-0-23: 2.2
	V-2-0-22: 2.2
	V-2-0-21: 2.2
	V-2-0-20: 2.2
	V-2-0-19: 2.2
	V-2-0-18: 2.2
	V-2-0-17: 2.2
	V-2-0-16: 2.2
	V-2-0-15: 2.2
	V-2-0-14: 2.2
	V-2-0-13: 2.2
	completion: 2.2.0.4
	V-2-0-12: 2.2
	V-2-0-11: 2.2
	V-2-0-10: 2.2
	V-2-0-9: 2.2
	V-2-0-8: 2.2
	V-2-0-7: 2.2
	V-2-0-6: 2.2
	V-2-0-5: 2.2
	V-2-0-4: 2.2
	V-2-0-3: 2.2
	V-2-0-1: 2.2
	EMACS-21: 2.2
	V-2-0-0: 2.2
	tramp-xemacs-pkg: 2.2.0.2
keyword substitution: kv
total revisions: 9;	selected revisions: 9
description:
----------------------------
revision 2.5
date: 2005-10-11 14:58:44 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rearrange
substitutions that they are accepted with older shell versions.

* Makefile.XEmacs (REQUIRES): Remove fsf-compat, add
sh-script (for executable-find).

* lisp/tramp.el: Require `timer-funcs' instead of `timer' if in
XEmacs.
(tramp-verbose): Start rewriting the doc string.  Not
finished yet.
(tramp-handle-delete-file, tramp-handle-insert-file-contents)
(tramp-sh-file-name-handler): Signals expect a list as last
parameter.
(tramp-file-name-handler): Handle signals in order to trace them
in the debug buffer.

* lisp/tramp-smb.el (tramp-smb-handle-directory-files): Rewritten in
order to profit from caching results.
(tramp-smb-handle-file-name-all-completions): `localname' must be
expanded by `file-name-as-directory'.
----------------------------
revision 2.4
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.3
date: 2004-10-17 09:33:30 -0700;  author: albinus;  state: Exp;  lines: +23 -66;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.2
date: 2001-12-06 04:47:32 -0800;  author: kaig;  state: Exp;  lines: +0 -3;
branches:  2.2.2;  2.2.6;
(upstream-cvs-update): Remove target.
Suggested by Stephen Turnbull.
----------------------------
revision 2.1
date: 2001-12-06 02:46:02 -0800;  author: kaig;  state: Exp;
Make it work inside XEmacs, too.  From Stephen
J. Turnbull <stephen@xemacs.org>.
----------------------------
revision 2.2.6.3
date: 2005-10-11 14:40:00 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* configure.ac: Bump version (to 2.0.52-pre).  Update merge
version to 2.0.51.

* Makefile.XEmacs (REQUIRES): Remove fsf-compat, add
sh-script (for executable-find).

* lisp/tramp.el: Require `timer-funcs' instead of `timer' if in
XEmacs.
----------------------------
revision 2.2.6.2
date: 2005-07-10 14:36:47 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.2.6.1
date: 2004-10-17 09:03:17 -0700;  author: albinus;  state: Exp;  lines: +23 -66;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.2.2.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +0 -0;
Removing files not needed for XEmacs package
=============================================================================

RCS file: /sources/tramp/tramp/Makefile.in,v
Working file: Makefile.in
head: 2.58
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.57
	branch-2-1-stable: 2.56.0.2
	branchpoint-2-1-stable: 2.56
	V-2-1-19: 2.56
	V-2-1-18: 2.55
	V-2-1-17: 2.55
	V-2-1-16: 2.54
	V-2-1-15: 2.53
	V-2-1-14: 2.53
	V-2-1-13: 2.52
	V-2-0-57: 2.20.2.14
	V-2-1-12: 2.49
	V-2-1-11: 2.48
	V-2-1-10: 2.46
	V-2-0-56: 2.20.2.13
	V-2-1-9: 2.42
	V-2-1-8: 2.41
	V-2-0-55: 2.20.2.12
	V-2-1-7: 2.39
	V-2-0-54: 2.20.2.12
	V-2-1-6: 2.39
	V-2-0-53: 2.20.2.12
	V-2-0-52: 2.20.2.11
	V-2-1-5: 2.38
	V-2-1-4: 2.36
	V-2-0-51: 2.20.2.9
	V-2-0-50: 2.20.2.9
	V-2-0-49: 2.20.2.8
	V-2-0-48: 2.20.2.8
	V-2-1-3: 2.32
	V-2-0-47: 2.20.2.6
	V-2-0-46: 2.20.2.6
	V-2-0-45: 2.20.2.6
	V-2-1-2: 2.31
	V-2-0-44: 2.20.2.3
	V-2-1-1: 2.28
	V-2-0-43: 2.20.2.3
	V-2-0-42: 2.20.2.2
	V-2-0-41: 2.20.2.2
	V-2-1-0: 2.22
	branch-2-0-stable: 2.20.0.2
	branchpoint-2-0-stable: 2.20
	V-2-0-40: 2.19
	V-2-0-39: 2.14
	V-2-0-38: 2.14
	V-2-0-37: 2.13
	V-2-0-36: 2.10
	V-2-0-35: 2.9
	V-2-0-34: 2.7
	V-2-0-33: 2.3
	V-2-0-32: 2.3
keyword substitution: kv
total revisions: 73;	selected revisions: 73
description:
----------------------------
revision 2.58
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.57
date: 2010-09-02 02:17:56 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: NHuTgSvU6LQQCZMu;
* INSTALL (System Requirements): Adapt versions.
(Japanese Manual): Remove.

* Makefile.in (XEMACS_FILES): Remove texi/tramp_ja.texi.
(cvstag): Use -F.
(savannah): Don't configure --with-japanese-manual.

* aclocal.m4 (AC_EMACS_INFO): Pretty-print
TRAMP_EMACS_VERSION_CHECK.
(AC_JA_MANUAL): Remove.

* configure.ac: Bump version (to 2.2.0).  Update merge
version to 2.1.19.  Remove AC_JA_MANUAL call.
----------------------------
revision 2.56
date: 2010-08-23 12:09:06 -0700;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: wrLhrjAFb03BdLLu;
branches:  2.56.2;
* Makefile.in (tar): Create version 1.1 directive.
----------------------------
revision 2.55
date: 2009-09-24 01:25:20 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: k6P8mLHxjtZnmU4u;
* Makefile.in: Add tramp-imap.el.
----------------------------
revision 2.54
date: 2009-02-06 08:10:35 -0800;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: RLmkG50RwlT3koBt;

* Makefile.in: Add tramp-gvfs.el.
----------------------------
revision 2.53
date: 2008-05-13 14:14:01 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: ZxthN4HbUfdyEQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.52
date: 2008-03-21 09:37:39 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: ockoj2oqDpAmP0Ws;
Fix up encoding.
----------------------------
revision 2.51
date: 2008-02-03 03:01:43 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: JhIadKAaB6OMtWPs;
*** empty log message ***
----------------------------
revision 2.50
date: 2008-01-12 03:04:22 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.49
date: 2007-10-17 15:09:50 -0700;  author: albinus;  state: Exp;  lines: +7 -6;  commitid: gM2uQ3KaIjZIFZBs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-cmds.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-cmds.el.

* lisp/tramp.el (top): Put load of all tramp-* files into a dolist.
Require tramp-cmds.el.
(tramp-clear-passwd): Add parameter VEC.  Adapt all callees.
(tramp-append-tramp-buffers): Apply `tramp-list-tramp-buffers'.

* lisp/tramp-cmds.el: New file.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Apply VEC to
`tramp-clear-passwd'.
----------------------------
revision 2.48
date: 2007-09-30 09:32:28 -0700;  author: albinus;  state: Exp;  lines: +10 -10;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 2.47
date: 2007-07-29 08:09:36 -0700;  author: albinus;  state: Exp;  lines: +7 -6;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.46
date: 2007-07-07 13:35:30 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: R05FbXfuLJwRqSos;

* aclocal.m4 (AC_EMACS_INFO): Check whether tramp-util.el and
tramp-vc.el are still needed.

* Makefile.in (EMACS_EL_FILES): Remove tramp-util.el and
tramp-vc.el.

* lisp/Makefile.in (EMACS_UTILS): New variable.
(LISP_FILES): Add tramp-util.el and tramp-vc.el depending on
$EMACS_UTILS.
----------------------------
revision 2.45
date: 2007-07-01 22:09:50 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.44
date: 2007-07-01 11:31:32 -0700;  author: albinus;  state: Exp;  lines: +4 -6;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.43
date: 2007-05-28 06:20:38 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: Ma8UwuYWkhiejHjs;

* Makefile.in (XEMACS_FILES) Add texi/doclicense.texi.

* texi/doclicense.texi: New file.

* texi/Makefile.in (TEXI_FILES): Add doclicense.texi.
----------------------------
revision 2.42
date: 2007-02-13 23:14:45 -0800;  author: albinus;  state: Exp;  lines: +7 -7;

* Makefile.in: Add tramp-gw.el

* lisp/Makefile.in: Add tramp-gw.el

* lisp/tramp-gw.el: New package.

* lisp/tramp.el (top): Require tramp-gw.
(tramp-methods): Add `tramp-gw-args' and `tramp-default-port' for
ssh and telnet methods.
(tramp-message): Catch errors.
(tramp-action-yesno, tramp-action-yn): Trace messages.
(tramp-maybe-open-connection): Handle gateways.
(tramp-read-passwd): New parameter PROC. Used in order to improve
password prompt. Adapt callees.
----------------------------
revision 2.41
date: 2007-01-10 14:04:37 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el (tramp-maybe-open-connection): The sent command must
ensure that the process terminates, finally.  Write the command
compatible for shells and w32 COMSPEC.
----------------------------
revision 2.40
date: 2006-12-27 14:12:29 -0800;  author: albinus;  state: Exp;  lines: +8 -7;

* Makefile.in: Add tramp-fish.el

* lisp/tramp-fish.el: New package.

* lisp/tramp.el (top): Require tramp-fish.
(tramp-inodes): New defvar.
(tramp-handle-expand-file-name): Cache "home-directory".
(tramp-get-inode): New defun.

* lisp/tramp-smb.el (tramp-smb-no-stat, tramp-smb-inodes)
(tramp-smb-get-inode): Removed.  Apply new names.

* lisp/tramp-util.el (tramp-advice-executable-find): Add check for
`tramp-fish-file-name-handler'.

* texi/tramp.texi (Inline methods): Add `fish' method.
----------------------------
revision 2.39
date: 2006-03-14 13:40:09 -0800;  author: albinus;  state: Exp;  lines: +10 -6;

DESTDIR support
----------------------------
revision 2.38
date: 2005-11-29 14:24:39 -0800;  author: albinus;  state: Exp;  lines: +1 -0;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* lisp/tramp.el (tramp-do-copy-or-rename-file-via-buffer)
(tramp-handle-file-local-copy, tramp-handle-write-region):
Generate always a new temp buffer. Kill it finally.
(tramp-handle-unhandled-file-name-directory): Take home directory
on remote host.
(tramp-handle-write-region): When `file-precious-flag' is set,
check also the checksums (in case of inline methods).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.

* texi/tramp.texi (Remote processes): Explain gud.el integration in
more detail.
(Frequently Asked Questions): Recommend `file-precious-flag' when
`tramp-chunksize' is set.
----------------------------
revision 2.37
date: 2005-10-23 04:48:04 -0700;  author: albinus;  state: Exp;  lines: +8 -5;

* configure.ac: Bump version (to 2.1.5-pre).

* Makefile.in (clean): Cleanup also subdirectory test.
(MANIFEST): Exclude tramp2 and .cvsignore.

* lisp/tramp.el (tramp-let-maybe): Add `edebug-form-spec' property.
(tramp-handle-expand-file-name): Bind `default-directory' locally
to "/" in order to avoid problems with UNC shares or Cygwin
mounts.
----------------------------
revision 2.36
date: 2005-08-28 11:56:37 -0700;  author: albinus;  state: Exp;  lines: +6 -5;

* Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/trampcache.el: Removed.  Replaced by tramp-cache.el.

* lisp/tramp-cache.el: New file.  Implementation inspired by work of
Daniel Pittman <daniel@rimspace.net>.

* lisp/tramp.el: Introduce filename caching.  Require `tramp-cache'.
(tramp-syntax): Correct doc string.
(tramp-handle-file-truename, tramp-handle-file-exists-p)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-accessible-directory-p)
(tramp-handle-file-directory-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p): Add `with-cache-data'.
(tramp-handle-file-attributes): Add `with-cache-data'.  Check also
for existence of applicable stat(1) command, which is preferred
over the Perl script.
(tramp-handle-file-attributes-with-stat, tramp-get-remote-stat):
New defuns.
(tramp-handle-set-file-modes, tramp-handle-add-name-to-file)
(tramp-do-copy-or-rename-file, tramp-handle-delete-directory)
(tramp-handle-delete-file, tramp-handle-dired-compress-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-write-region): Flush cashed data.
(tramp-pre-connection): Initialise cache.
(tramp-post-connection): Check for stat(1) command.
(tramp-maybe-open-connection): Optimize code.
(tramp-convert-file-attributes): Handle also attributes returned
by stat.

* test/tramp-time.el: New file.
----------------------------
revision 2.35
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.34
date: 2005-03-20 11:27:16 -0800;  author: albinus;  state: Exp;  lines: +7 -4;

* Makefile.in (FTP_UPLOAD): Change upload address to
"ftp://ftp-upload.gnu.org/incoming/ftp".
(tar): Handle "$(TARNAME).tar.gz.directive".
----------------------------
revision 2.33
date: 2005-01-16 07:12:45 -0800;  author: albinus;  state: Exp;  lines: +3 -2;

* Makefile.in (savannah): Revert change from 2004-10-10.  It
doesn't work.
----------------------------
revision 2.32
date: 2004-10-10 09:48:44 -0700;  author: albinus;  state: Exp;  lines: +1 -2;


* Makefile.in (savannah): Don't apply "configure" for Japanese
manual, but call "make -C texi" with proper variable settings.

* aclocal.m4 (AC_EMACS_INFO): Write default values in help output
for "--with-xemacs" and "--with-emacs".
(AC_PATH_LISPDIR): Write default value in help output for
"--with-lispdir".
(all): Unify capitalization for help output.

* configure.ac: Bump version (to 2.1.3-pre).

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.
(savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.31
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +34 -15;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 2.30
date: 2004-09-16 13:04:47 -0700;  author: albinus;  state: Exp;  lines: +2 -1;


* Makefile.in (AUTOCONF): New variable.
(configure): Apply it.  Reported by Norbert Koch
<viteno@xemacs.org> in order to have a simple possibility applying
autoconf under another name.

* texi/trampinst.texi (Installation parameters): Mention usefull
configure option "--prefix=/usr/share" for Linux systems.
Reported by Charles Curley <charlescurley@charlescurley.com>.
----------------------------
revision 2.29
date: 2004-08-10 14:25:57 -0700;  author: albinus;  state: Exp;  lines: +5 -2;


* Makefile.in (EMACS_EL_FILES): Remove lisp/trampver.el, it is a
generated file.
(emacs): Copy trampver.el.
----------------------------
revision 2.28
date: 2004-06-26 10:39:48 -0700;  author: kai;  state: Exp;  lines: +12 -0;
Remove special-casing for building as an XEmacs
package.  They have their own repository with their own Makefile.
(cl-release): New target, makes "Version X released." ChangeLog
entries.
----------------------------
revision 2.27
date: 2004-06-26 08:55:53 -0700;  author: kai;  state: Exp;  lines: +0 -13;
Remove special-casing for building as an XEmacs
package.  They have their own repository with their own Makefile.
----------------------------
revision 2.26
date: 2004-06-03 14:21:49 -0700;  author: albinus;  state: Exp;  lines: +19 -9;


* configure.ac (FTP_UPLOAD): New variable, indicating which ftp
upload program to savannah has to be used.  Kai and Michael differ
in their preferences ...

* Makefile.in (FTP_UPLOAD): New variable.  Value depending on
@FTP_UPLOAD@.
(savannah): Use it.

* lisp/tramp.el (all): Code cleanup.  Change all `tramp-handle-xxx'
calls to respective `xxx` calls.

* lisp/tramp-vc.el (all): Code cleanup.  Change all `tramp-handle-xxx'
calls to respective `xxx` calls.
----------------------------
revision 2.25
date: 2004-05-29 14:12:06 -0700;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.24
date: 2004-05-29 13:52:55 -0700;  author: albinus;  state: Exp;  lines: +8 -7;


* Makefile.in (.SILENT, .PHONY): Add lisp target.
(info): Depends on $(CONFIG_FILES).

* lisp/tramp.el (tramp-file-name-handler-alist)
(tramp-file-name-for-operation): Add entry for `file-remote-p'.
(tramp-handle-file-remote-p): New defun.
(top): Remove setting of `file-remote-p'.  Don't set
`inhibit-file-name-handlers' and `inhibit-file-name-operation'.

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`file-remote-p'.
----------------------------
revision 2.23
date: 2004-05-28 08:30:25 -0700;  author: kai;  state: Exp;  lines: +4 -1;
(lisp): New target: byte-compile the lisp/*.el files.
----------------------------
revision 2.22
date: 2004-05-07 14:06:26 -0700;  author: kai;  state: Exp;  lines: +5 -1;
* Makefile.in (emacs): Don't patch man/trampver.texi in the Emacs
repository, just copy texi/trampver.texi there.  We can't run
"cvs diff" on texi/trampver.texi since it is a generated file, so
our patching trick won't work for this file.
----------------------------
revision 2.21
date: 2004-05-07 13:54:42 -0700;  author: kai;  state: Exp;  lines: +21 -5;
* configure.ac (TRAMP_EMACS_MERGE_VERSION): New variable,
indicating which was the last revision of Tramp that was merged
into Emacs.  Don't forget to update this after running "make
emacs" (or "gmake emacs")!

* Makefile.in (EMACS_EL_FILES): Mention files explicitly to make
sure that tramp-efs.el is not included.
(EMACS_TEXI_FILES): New variable, lists manual files that need to
be merged with the Emacs repository.
(TRAMP_EMACS_MERGE_VERSION, TRAMP_EMACS_MERGE_TAG): New
variables, indicating which was the last revision of Tramp that
was merged into Emacs.  Automatically set by configure, original
is in configure.ac.
(emacs): Reword to use patches instead of copying the files.
This helps to make sure that changes to Tramp files in the Emacs
repository aren't overwritten.
----------------------------
revision 2.20
date: 2004-05-02 09:50:52 -0700;  author: kai;  state: Exp;  lines: +3 -1;
branches:  2.20.2;
(savannah): Use FreeBSD syntax for FTP upload.
----------------------------
revision 2.19
date: 2004-03-14 13:08:13 -0800;  author: albinus;  state: Exp;  lines: +0 -1;


* Makefile.in (distclean): Recurse to subdirectories.
----------------------------
revision 2.18
date: 2004-03-14 13:06:24 -0800;  author: albinus;  state: Exp;  lines: +4 -0;


* Makefile.in (distclean): Recurse to subdirectories.
----------------------------
revision 2.17
date: 2004-03-14 12:59:18 -0800;  author: albinus;  state: Exp;  lines: +9 -7;


* INSTALL: Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.

* Makefile.in: Don't check for $(USE_CONTRIB) any longer.
(xemacs): Use ""$(MAKE)" instead of "make".
(emacs): Use "--with-emacs" configure option.
(savannah): Use "ftp-upload" instead of "scp".  Hope it works for
Kai.

* aclocal.m4 (AC_EMACS_LISP): Use "-vanilla" in case of XEmacs.
(AC_CONTRIB_FILES): New function.  Checks for the need of
provisioning of a contributed package.

* configure.ac: Apply `AC_CONTRIB_FILES' for all Lisp files of
contrib directory.

* contrib/README: Clarify run-at-time.el.

* lisp/Makefile.in: New environment variables $(CONTRIB_FILES) and
$(INSTALL_FILES).  Don't check for $(USE_CONTRIB) any longer.
(all): Depends on $(CONTRIB_FILES), too.
(install): Copy $(INSTALL_FILES) but $?.
(distclean): Remove also $(CONTRIB_FILES).

* texi/Makefile.in (savannah): Simplify copy command.

* texi/trampinst.texi (Installation, Installation parameters)
(Load paths): Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.
----------------------------
revision 2.16
date: 2004-03-05 12:47:49 -0800;  author: albinus;  state: Exp;  lines: +7 -8;


* configure.ac: Write "${MAKE}" if appropriate (but "make").

* Makefile.in: (.PHONY): Remove unused targets.
(distclean): Remove also *.tar.gz*
(tar): Call gpg.

* lisp/Makefile.in (.PHONY): Remove unused targets.
(install): Depends on "all".

* lisp/tramp-vc.el (tramp-vc-workfile-unchanged-p): Correct typo
("file" -> "filename").  Reported by Kim F. Storm <storm@cua.dk>.

* texi/Makefile.in (SINFO): Removed.
(.PHONY): New Target.
----------------------------
revision 2.15
date: 2004-02-29 10:06:49 -0800;  author: kai;  state: Exp;  lines: +0 -7;
* Makefile.in (dist, install-html): Remove unused targets.

* Makefile.in (install-ftp, site-lisp): Remove unused targets.

* Makefile.in (site-info, install-html): Remove unused targets.
----------------------------
revision 2.14
date: 2003-11-30 09:49:57 -0800;  author: kai;  state: Exp;  lines: +3 -2;
Bump version number.
Avoid --mode arg to tar.
----------------------------
revision 2.13
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 2.12
date: 2003-08-23 12:56:01 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tar): Make sure that files in tarball are readable
by world.
----------------------------
revision 2.11
date: 2003-07-26 05:42:40 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* Makefile.in (xemacs): Use new `xemacs' target in lisp subdir,
instead of copying *.el files manually.

* Makefile.in (xemacs): New target to copy files to XEmacs
working dir.  (For use by Kai only.)
----------------------------
revision 2.10
date: 2003-06-24 12:29:49 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(xemacs): Make sure to configure for XEmacs.
----------------------------
revision 2.9
date: 2003-05-24 15:41:01 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* Makefile.in (configure): It depends on "aclocal.m4", too.

* aclocal.m4, lisp/Makefile.in, contrib/Makefile.in: Use
`--no-site-file' option for Emacs call, in order to avoid loading of
Tramp in site specific init files.  Reported by Harry Putnam
<reader@newsguy.com>.

* lisp/Makefile.in (.PHONY): New target.
(all): "trampver.el" and "tramp.el" must be handled first due to
dependencies.

* lisp/tramp.el (tramp-completion-function-alist): Add completion
function for "remcp", "remsh" and "plink1".

* texi/tramp.texi (Inline methods): Add methods `remsh' and `plink1'.
(External transfer methods): Add method `remcp'.
(Multi-hop Methods): Add method `remsh'.
----------------------------
revision 2.8
date: 2003-05-24 09:10:39 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-password-end-of-line): Use "xy" with plink.

* configure.ac: Bump version.

* Makefile.in (cvstag): "cvs tag", not "cvs cvstag".
----------------------------
revision 2.7
date: 2003-04-24 14:16:14 -0700;  author: albinus;  state: Exp;  lines: +4 -3;

	* Makefile.in (.PHONY): Add `tags'.
	(distclean) Remove also "autom4te.cache".

	* lisp/tramp.el (tramp-real-rsh-program): New constant.  On
	HP-UX, the "rsh" program is called "remsh".
	(tramp-methods, tramp-multi-connection-function-alist): Apply
	`tramp-real-rsh-program'.  Use "-p Password:\ " for "sudo"
	method, because password prompt might be changed by either passprompt
	option in /etc/sudoers, or SUDO_PROMPT environment variable.
	Suggested by Peter Oliver <peter.oliver@aquila-networks.co.uk>.
----------------------------
revision 2.6
date: 2003-04-18 13:14:41 -0700;  author: kai;  state: Exp;  lines: +7 -4;
(tags): New target.
(cvstag): Renamed from `tag' to avoid confusion with `tags'.
----------------------------
revision 2.5
date: 2003-04-17 12:36:53 -0700;  author: albinus;  state: Exp;  lines: +9 -10;

* Makefile.in (.SILENT): New target.  Remove noise entering
subdirectories.
(.PHONY): Add missing targets.
(all, install): Merge them into one rule.
($(CONFIG_FILES)): Depend on $(CONFIG_FILES:=.in), too.
(configure): Remove "--trace" option from autoconf call.  It
prevented generation of configure.
----------------------------
revision 2.4
date: 2003-04-08 13:20:14 -0700;  author: kai;  state: Exp;  lines: +1 -0;
* Makefile.in (savannah): Do not copy the Japanese HTML file.

* Makefile.in (savannah): Invoke configure after creating the
distribution tarball, because that deletes texi/Makefile which is
needed for the rest of the target.
----------------------------
revision 2.3
date: 2003-04-06 14:44:33 -0700;  author: albinus;  state: Exp;  lines: +2 -0;

* aclocal.m4 (AC_EMACS_INSTALL): New macro.  Depending on
configure option `--with-packaging', Tramp installation chapter
will be part of the manual, or not.

* configure.ac (top-level): Apply `AC_EMACS_INSTALL'.

* Makefile.in (xemacs, emacs): Call `./configure --with-packaging'
in order to generate `trampver.texi' without installation chapter.

* texi/Makefile.in (%.dvi): Apply parameter `-t "@set $(EMACS_INFO)"'
for texi2dvi.

* texi/tramp.texi (top-level): Move installation related entries to
trampinst.texi.  Apply respective macros instead of, in case flag
`tramp-inst' is set.
Move all (X)Emacs related flags to trampver.texi.in.

* texi/trampinst.texi: New file.  Contains installation related
entries.

* texi/trampver.texi.in (top-level): Define all (X)Emacs related
flags.  Include trampinst.texi depending on configure option
`--with-packaging'.
----------------------------
revision 2.2
date: 2003-03-30 12:09:35 -0800;  author: kai;  state: Exp;  lines: +3 -3;
(xemacs, emacs): Copy trampver.texi, too.
----------------------------
revision 2.1
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.20.2.14
date: 2007-07-25 12:37:29 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.20.2.13
date: 2007-05-28 01:49:42 -0700;  author: albinus;  state: Exp;  lines: +4 -3;  commitid: 3AYYXUpQ30DuOFjs;

Version 2.0.56 released.
----------------------------
revision 2.20.2.12
date: 2006-03-14 13:15:56 -0800;  author: albinus;  state: Exp;  lines: +10 -6;

DESTDIR support
----------------------------
revision 2.20.2.11
date: 2005-12-02 12:33:27 -0800;  author: albinus;  state: Exp;  lines: +1 -0;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.
----------------------------
revision 2.20.2.10
date: 2005-10-23 12:06:25 -0700;  author: albinus;  state: Exp;  lines: +8 -5;

* Makefile.in (clean): Cleanup also subdirectory test.
(MANIFEST): Exclude tramp2 and .cvsignore.
----------------------------
revision 2.20.2.9
date: 2005-07-10 14:36:47 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.20.2.8
date: 2005-03-20 11:30:13 -0800;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.20.2.7
date: 2005-03-20 11:16:32 -0800;  author: albinus;  state: Exp;  lines: +7 -4;

Version 2.0.48 released.

* configure.ac: Bump version.

* Makefile.in (FTP_UPLOAD): Change upload address to
"ftp://ftp-upload.gnu.org/incoming/ftp".
(tar): Handle "$(TARNAME).tar.gz.directive".
----------------------------
revision 2.20.2.6
date: 2004-10-10 09:54:27 -0700;  author: albinus;  state: Exp;  lines: +0 -2;


* Makefile.in (savannah): Don't call make for texi.  Only the
trunk should place its files there.

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.20.2.5
date: 2004-09-19 03:31:39 -0700;  author: albinus;  state: Exp;  lines: +36 -16;


* Makefile.in (AUTOCONF, XEMACS_FILES): New variables.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.
(configure): Apply $(AUTOCONF).  Reported by Norbert Koch
<viteno@xemacs.org> in order to have a simple possibility applying
autoconf under another name.
----------------------------
revision 2.20.2.4
date: 2004-08-10 14:22:39 -0700;  author: albinus;  state: Exp;  lines: +5 -2;


* Makefile.in (MACS_EL_FILES): Remove lisp/trampver.el, it is a
generated file.
(emacs): Copy trampver.el.
----------------------------
revision 2.20.2.3
date: 2004-07-13 12:29:52 -0700;  author: albinus;  state: Exp;  lines: +29 -20;


Sync with trunk.
----------------------------
revision 2.20.2.2
date: 2004-05-29 14:40:48 -0700;  author: albinus;  state: Exp;  lines: +10 -6;


Version 2.0.41 released.

Sync with trunk
----------------------------
revision 2.20.2.1
date: 2004-05-07 14:37:37 -0700;  author: kai;  state: Exp;  lines: +25 -5;
Merge from trunk:

* configure.ac: Bump version (to 2.0.41) and set the
last-merged-with-Emacs version (to 2.0.40).  Hm.  The version bump
to 2.0.41 is probably bogus, we want to create a stable
branch...  Argh.

* Makefile.in (emacs): Don't patch man/trampver.texi in the Emacs
repository, just copy texi/trampver.texi there.  We can't run
"cvs diff" on texi/trampver.texi since it is a generated file, so
our patching trick won't work for this file.

* configure.ac (TRAMP_EMACS_MERGE_VERSION): New variable,
indicating which was the last revision of Tramp that was merged
into Emacs.  Don't forget to update this after running "make
emacs" (or "gmake emacs")!

* Makefile.in (EMACS_EL_FILES): Mention files explicitly to make
sure that tramp-efs.el is not included.
(EMACS_TEXI_FILES): New variable, lists manual files that need to
be merged with the Emacs repository.
(TRAMP_EMACS_MERGE_VERSION, TRAMP_EMACS_MERGE_TAG): New
variables, indicating which was the last revision of Tramp that
was merged into Emacs.  Automatically set by configure, original
is in configure.ac.
(emacs): Reword to use patches instead of copying the files.
This helps to make sure that changes to Tramp files in the Emacs
repository aren't overwritten.
----------------------------
revision 2.56.2.1
date: 2010-10-20 23:15:50 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: ho7z9k5WMCZI2hTu;
* configure.ac: Bump version (to 2.1.20-pre).  Update merge
version to 2.1.19.

* Makefile.in (cvstag): Use -F.
=============================================================================

RCS file: /sources/tramp/tramp/README,v
Working file: README
head: 2.6
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.6
	branch-2-1-stable: 2.6.0.2
	branchpoint-2-1-stable: 2.6
	V-2-1-19: 2.6
	V-2-1-18: 2.6
	V-2-1-17: 2.6
	V-2-1-16: 2.6
	V-2-1-15: 2.6
	V-2-1-14: 2.6
	V-2-1-13: 2.6
	V-2-0-57: 2.5
	V-2-1-12: 2.6
	V-2-1-11: 2.6
	V-2-1-10: 2.6
	V-2-0-56: 2.5
	V-2-1-9: 2.5
	V-2-1-8: 2.5
	V-2-0-55: 2.5
	V-2-1-7: 2.5
	V-2-0-54: 2.5
	V-2-1-6: 2.5
	V-2-0-53: 2.5
	V-2-0-52: 2.5
	V-2-1-5: 2.5
	V-2-1-4: 2.5
	V-2-0-51: 2.5
	V-2-0-50: 2.5
	V-2-0-49: 2.5
	V-2-0-48: 2.5
	V-2-1-3: 2.5
	V-2-0-47: 2.5
	V-2-0-46: 2.5
	V-2-0-45: 2.5
	V-2-1-2: 2.5
	V-2-0-44: 2.5
	V-2-1-1: 2.5
	V-2-0-43: 2.5
	V-2-0-42: 2.5
	V-2-0-41: 2.5
	V-2-1-0: 2.5
	branch-2-0-stable: 2.5.0.2
	branchpoint-2-0-stable: 2.5
	V-2-0-40: 2.5
	V-2-0-39: 2.5
	V-2-0-38: 2.5
	V-2-0-37: 2.5
	V-2-0-36: 2.5
	V-2-0-35: 2.5
	V-2-0-34: 2.5
	V-2-0-33: 2.5
	V-2-0-32: 2.5
	V-2-0-30: 2.4
	V-2-0-29: 2.4
	V-2-0-28: 2.4
	V-2-0-27: 2.4
	V-2-0-26: 2.4
	V-2-0-25: 2.4
	V-2-0-24: 2.4
	V-2-0-23: 2.4
	V-2-0-22: 2.4
	V-2-0-21: 2.4
	V-2-0-20: 2.4
	V-2-0-19: 2.4
	V-2-0-18: 2.4
	V-2-0-17: 2.4
	V-2-0-16: 2.4
	V-2-0-15: 2.4
	V-2-0-14: 2.4
	V-2-0-13: 2.4
	completion: 2.4.0.2
	V-2-0-12: 2.4
	V-2-0-11: 2.4
	V-2-0-10: 2.4
	V-2-0-9: 2.4
	V-2-0-8: 2.4
	V-2-0-7: 2.4
	V-2-0-6: 2.4
	V-2-0-5: 2.4
	V-2-0-4: 2.4
	V-2-0-3: 2.4
	V-2-0-1: 2.3
	EMACS-21: 2.4
	V-2-0-0: 2.3
	tramp-xemacs-pkg: 2.1.0.2
keyword substitution: kv
total revisions: 7;	selected revisions: 7
description:
----------------------------
revision 2.6
date: 2007-07-01 11:31:32 -0700;  author: albinus;  state: Exp;  lines: +0 -3;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.5
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;  lines: +14 -5;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.4
date: 2002-07-19 07:31:16 -0700;  author: kai;  state: Exp;  lines: +3 -0;
* tramp.el (tramp-multi-sh-program): New variable.
(tramp-open-connection-multi): Use it.
Bump version to 2.0.2.

* Makefile (VERSION): New version 2.0.2.
----------------------------
revision 2.3
date: 2002-06-05 20:32:09 -0700;  author: youngs;  state: Exp;  lines: +0 -1;
Reverting my test commit.
----------------------------
revision 2.2
date: 2002-06-05 20:31:05 -0700;  author: youngs;  state: Exp;  lines: +1 -0;
Test commit (just added a '#')
Will revert in a minute.
----------------------------
revision 2.1
date: 2001-12-06 04:34:38 -0800;  author: kaig;  state: Exp;
branches:  2.1.2;
Make it work inside XEmacs, too.  From Stephen
J. Turnbull <stephen@xemacs.org>.
(MANIFEST): New directory layout.
----------------------------
revision 2.1.2.1
date: 2001-12-08 03:51:40 -0800;  author: youngs;  state: Exp;  lines: +18 -9;
2001-12-08  Steve Youngs  <youngs@xemacs.org>

	* README: Update to reflect XEmacs package branch, add section
	about getting Tramp2 code.
=============================================================================

RCS file: /sources/tramp/tramp/README-CVS,v
Working file: README-CVS
head: 1.3
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.3
	branch-2-1-stable: 1.3.0.2
	branchpoint-2-1-stable: 1.3
	V-2-1-19: 1.3
	V-2-1-18: 1.3
	V-2-1-17: 1.3
	V-2-1-16: 1.3
	V-2-1-15: 1.3
	V-2-1-14: 1.3
	V-2-1-13: 1.3
	V-2-0-57: 1.2.2.1
	V-2-1-12: 1.3
	V-2-1-11: 1.3
	V-2-1-10: 1.3
	V-2-0-56: 1.2.2.1
	V-2-1-9: 1.3
	V-2-1-8: 1.3
	V-2-0-55: 1.2.2.1
	V-2-1-7: 1.3
	V-2-0-54: 1.2.2.1
	V-2-1-6: 1.3
	V-2-0-53: 1.2.2.1
	V-2-0-52: 1.2.2.1
	V-2-1-5: 1.3
	V-2-1-4: 1.3
	V-2-0-51: 1.2.2.1
	V-2-0-50: 1.2.2.1
	V-2-0-49: 1.2.2.1
	V-2-0-48: 1.2.2.1
	V-2-1-3: 1.3
	V-2-0-47: 1.2.2.1
	V-2-0-46: 1.2.2.1
	V-2-0-45: 1.2.2.1
	V-2-1-2: 1.3
	V-2-0-44: 1.2.2.1
	V-2-1-1: 1.3
	V-2-0-43: 1.2.2.1
	V-2-0-42: 1.2
	V-2-0-41: 1.2
	V-2-1-0: 1.2
	branch-2-0-stable: 1.2.0.2
	branchpoint-2-0-stable: 1.2
	V-2-0-40: 1.2
	V-2-0-39: 1.2
	V-2-0-38: 1.2
	V-2-0-37: 1.2
	V-2-0-36: 1.2
	V-2-0-35: 1.2
	V-2-0-34: 1.2
	V-2-0-33: 1.2
	V-2-0-32: 1.2
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.2
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
keyword substitution: kv
total revisions: 4;	selected revisions: 4
description:
----------------------------
revision 1.3
date: 2004-06-06 04:29:48 -0700;  author: albinus;  state: Exp;  lines: +11 -3;


* README-CVS: Explaining stable releases and pre-releases in CVS.
----------------------------
revision 1.2
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;  lines: +6 -5;
branches:  1.2.2;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 1.1
date: 2002-06-17 04:08:12 -0700;  author: kai;  state: Exp;
*** empty log message ***
----------------------------
revision 1.2.2.1
date: 2004-07-13 12:29:52 -0700;  author: albinus;  state: Exp;  lines: +11 -3;


Sync with trunk.
=============================================================================

RCS file: /sources/tramp/tramp/aclocal.m4,v
Working file: aclocal.m4
head: 2.38
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.36
	branch-2-1-stable: 2.34.0.2
	branchpoint-2-1-stable: 2.34
	V-2-1-19: 2.34
	V-2-1-18: 2.33
	V-2-1-17: 2.33
	V-2-1-16: 2.32
	V-2-1-15: 2.30
	V-2-1-14: 2.30
	V-2-1-13: 2.27
	V-2-0-57: 2.11.2.2
	V-2-1-12: 2.26
	V-2-1-11: 2.26
	V-2-1-10: 2.24
	V-2-0-56: 2.11.2.2
	V-2-1-9: 2.21
	V-2-1-8: 2.20
	V-2-0-55: 2.11.2.2
	V-2-1-7: 2.20
	V-2-0-54: 2.11.2.2
	V-2-1-6: 2.19
	V-2-0-53: 2.11.2.1
	V-2-0-52: 2.11.2.1
	V-2-1-5: 2.18
	V-2-1-4: 2.17
	V-2-0-51: 2.11.2.1
	V-2-0-50: 2.11.2.1
	V-2-0-49: 2.11.2.1
	V-2-0-48: 2.11.2.1
	V-2-1-3: 2.14
	V-2-0-47: 2.11.2.1
	V-2-0-46: 2.11
	V-2-0-45: 2.11
	V-2-1-2: 2.12
	V-2-0-44: 2.11
	V-2-1-1: 2.12
	V-2-0-43: 2.11
	V-2-0-42: 2.11
	V-2-0-41: 2.11
	V-2-1-0: 2.11
	branch-2-0-stable: 2.11.0.2
	branchpoint-2-0-stable: 2.11
	V-2-0-40: 2.11
	V-2-0-39: 2.8
	V-2-0-38: 2.7
	V-2-0-37: 2.7
	V-2-0-36: 2.5
	V-2-0-35: 2.4
	V-2-0-34: 2.3
	V-2-0-33: 2.2
	V-2-0-32: 2.2
keyword substitution: kv
total revisions: 40;	selected revisions: 40
description:
----------------------------
revision 2.38
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.37
date: 2010-12-27 02:45:27 -0800;  author: albinus;  state: Exp;  lines: +5 -3;  commitid: mPczkfHizJJHnU1v;
* aclocal.m4 (AC_CONTRIB_FILES): Use AC_CONFIG_LINKS.
----------------------------
revision 2.36
date: 2010-09-06 03:45:38 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: dbwJT23jYosYYvNu;
* configure.ac: Substitute abs_srcdir.
----------------------------
revision 2.35
date: 2010-09-02 02:17:56 -0700;  author: albinus;  state: Exp;  lines: +10 -28;  commitid: NHuTgSvU6LQQCZMu;
* INSTALL (System Requirements): Adapt versions.
(Japanese Manual): Remove.

* Makefile.in (XEMACS_FILES): Remove texi/tramp_ja.texi.
(cvstag): Use -F.
(savannah): Don't configure --with-japanese-manual.

* aclocal.m4 (AC_EMACS_INFO): Pretty-print
TRAMP_EMACS_VERSION_CHECK.
(AC_JA_MANUAL): Remove.

* configure.ac: Bump version (to 2.2.0).  Update merge
version to 2.1.19.  Remove AC_JA_MANUAL call.
----------------------------
revision 2.34
date: 2010-03-19 07:13:46 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: ACPT3UjVzqU9Dyru;
* aclocal.m4 (AC_EMACS_INFO): Discard GNU Emacs 21 compatibility.
----------------------------
revision 2.33
date: 2009-09-24 01:23:51 -0700;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: 6zq9uWO5O16TlU4u;
* aclocal.m4 (AC_EMACS_INFO) Add imap support.
----------------------------
revision 2.32
date: 2009-06-15 11:34:38 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: 8XKtEyYQebeHYYRt;
* aclocal.m4 (AC_EMACS_INFO): Make TRAMP_EMACS_VERSION_CHECK fit
for SXEmacs 22.
----------------------------
revision 2.31
date: 2009-02-06 08:11:15 -0800;  author: albinus;  state: Exp;  lines: +12 -2;  commitid: RcM2RaQYmqVvkoBt;

* aclocal.m4 (AC_EMACS_INFO): Add gvfs support.
----------------------------
revision 2.30
date: 2008-07-27 09:06:06 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: pbBqMRebBlnrxsct;
* aclocal.m4 (AC_EMACS_LISP): Move change to ...
(AC_CONTRIB_FILES): Require 'timer-funcs in case of XEmacs.
----------------------------
revision 2.29
date: 2008-07-23 21:55:59 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: EaQsFWvABEdxV0ct;
* aclocal.m4 (AC_EMACS_LISP): Require 'timer-funcs in case of
XEmacs.  It is needed for password.el.
----------------------------
revision 2.28
date: 2008-05-13 14:13:19 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: xH8FqDSUcYajEQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.27
date: 2008-01-12 03:04:22 -0800;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.26
date: 2007-09-28 08:52:02 -0700;  author: albinus;  state: Exp;  lines: +16 -8;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 2.25
date: 2007-07-29 08:09:36 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.24
date: 2007-07-07 13:35:30 -0700;  author: albinus;  state: Exp;  lines: +13 -1;  commitid: R05FbXfuLJwRqSos;

* aclocal.m4 (AC_EMACS_INFO): Check whether tramp-util.el and
tramp-vc.el are still needed.

* Makefile.in (EMACS_EL_FILES): Remove tramp-util.el and
tramp-vc.el.

* lisp/Makefile.in (EMACS_UTILS): New variable.
(LISP_FILES): Add tramp-util.el and tramp-vc.el depending on
$EMACS_UTILS.
----------------------------
revision 2.23
date: 2007-07-01 22:09:50 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.22
date: 2007-07-01 11:31:32 -0700;  author: albinus;  state: Exp;  lines: +17 -0;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.21
date: 2007-03-25 11:39:27 -0700;  author: albinus;  state: Exp;  lines: +12 -31;

* aclocal.m4 (AC_EMACS_INFO): Add gateway support.
(AC_EMACS_CHECK_LIB): Remove.

* configure.ac: Add gateway support.

* lisp/Makefile.in: Add gateway support.

* lisp/tramp.el (top): Require tramp-gw conditionally only.
(tramp-methods): Add port spec to "plink", "plink1" and "pscp"
methods.

* texi/Makefile.in: Add gateway support.

* texi/tramp.texi (all): Make gateway text conditional.
----------------------------
revision 2.20
date: 2006-06-04 08:36:15 -0700;  author: albinus;  state: Exp;  lines: +17 -22;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Expand
`datarootdir´.  Perform all expansions with "eval".

* configure.ac: Add "-o /dev/null" to texi2dvi call.

* lisp/tramp.el (tramp-process-actions): Pop connection buffer in case
of error.  Modify error message depending on `tramp-action'.

* lisp/tramp-cache.el (tramp-persistency-file-name): Default value is
"~/.emacs.d/tramp" or "~/.xemacs/tramp", respectively.  Suggested
by Romain Francoise <romain@orebokech.com>.
(tramp-dump-connection-properties): Suppress error when
`tramp-persistency-file-name´ cannot be written.

* texi/tramp.texi (Connection caching): Change default file name.
----------------------------
revision 2.19
date: 2006-05-28 13:21:15 -0700;  author: albinus;  state: Exp;  lines: +9 -2;
*** empty log message ***
----------------------------
revision 2.18
date: 2005-10-18 12:43:26 -0700;  author: albinus;  state: Exp;  lines: +31 -9;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): `datadir',
`lispdir' and `infodir' should still contain environment
variables, which can be changed during make. `lispdir_default' and
`infodir_default' must be expanded for the Tramp manual.

* texi/tramp.texi (Traces and Profiles): Reference to `Outline Mode'
should be done for info pages only.
----------------------------
revision 2.17
date: 2005-10-11 14:58:44 -0700;  author: albinus;  state: Exp;  lines: +17 -25;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rearrange
substitutions that they are accepted with older shell versions.

* Makefile.XEmacs (REQUIRES): Remove fsf-compat, add
sh-script (for executable-find).

* lisp/tramp.el: Require `timer-funcs' instead of `timer' if in
XEmacs.
(tramp-verbose): Start rewriting the doc string.  Not
finished yet.
(tramp-handle-delete-file, tramp-handle-insert-file-contents)
(tramp-sh-file-name-handler): Signals expect a list as last
parameter.
(tramp-file-name-handler): Handle signals in order to trace them
in the debug buffer.

* lisp/tramp-smb.el (tramp-smb-handle-directory-files): Rewritten in
order to profit from caching results.
(tramp-smb-handle-file-name-all-completions): `localname' must be
expanded by `file-name-as-directory'.
----------------------------
revision 2.16
date: 2005-02-13 10:42:44 -0800;  author: albinus;  state: Exp;  lines: +27 -18;

* INSTALL, texi/tramp.texi, texi/trampinst.texi: Replace "Linux" by
"GNU/Linux".  Suggested by Richard M. Stallman <rms@gnu.org>

* aclocal.m4 (AC_PATH_LISPDIR): Document an alternative approach
configuring `lispdir'.  Not activated (yet).

* configure.ac: Documentation fix.
----------------------------
revision 2.15
date: 2005-02-05 15:02:40 -0800;  author: albinus;  state: Exp;  lines: +50 -48;

* INSTALL: Explain in more detail configure parameters
"with-xemacs", "--with-lispdir" and "--infodir".  Change bug
report address to [tramp-devel@gnu.org].

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rewrite
completely in order to apply better default values.

* configure.ac: Reorder substitution of installation directories
wrt changes in aclocal.m4.

* lisp/tramp.el (all): Change all addresses to .gnu.org.

* texi/Makefile.in (datadir): New variable.

* texi/trampinst.texi (Installation parameters): Explain in more detail
configure parameters "with-xemacs", "--with-lispdir" and
"--infodir".
----------------------------
revision 2.14
date: 2004-12-30 01:33:07 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* aclocal.m4, configure.ac: grep(1) on OpenBSD 3.6 does not
understand the '-' option.  Small change.  From Ryan Yeske
<rcyeske@gmail.com>.
----------------------------
revision 2.13
date: 2004-10-10 09:48:44 -0700;  author: albinus;  state: Exp;  lines: +10 -10;


* Makefile.in (savannah): Don't apply "configure" for Japanese
manual, but call "make -C texi" with proper variable settings.

* aclocal.m4 (AC_EMACS_INFO): Write default values in help output
for "--with-xemacs" and "--with-emacs".
(AC_PATH_LISPDIR): Write default value in help output for
"--with-lispdir".
(all): Unify capitalization for help output.

* configure.ac: Bump version (to 2.1.3-pre).

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.
(savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.12
date: 2004-07-30 12:52:03 -0700;  author: albinus;  state: Exp;  lines: +39 -16;


* INSTALL: Precise supported (X)Emacs versions.

* aclocal.m4 (AC_EMACS_INFO): Add check for proper (X)Emacs
version.

* configure.ac: Precise comments.

* lisp/trampver.el.in: Check for (X)Emacs version.  Code is from macro
AC_EMACS_INFO of aclocal.m4.

* lisp/tramp.el (top): Remove (X)Emacs version check.
(tramp-maybe-open-connection): Handle NIL values in
`tramp-default-proxies-alist'.

* texi/trampver.texi.in: Remove `postfixmultihop'.  Rename
`postfixsinglehop' into `postfixhop'.

* texi/tramp.texi (top): Rename `postfixsinglehop' into `postfixhop'.
(Multi-hop Methods, Multi-hop filename syntax): Removed, including
al pointers to.
(Multi-hops): New chapter.
(History of Tramp): Proxy hosts mentioned.
(Frequently Asked Questions): Precise supported (X)Emacs
versions.
----------------------------
revision 2.11
date: 2004-05-02 09:38:39 -0700;  author: kai;  state: Exp;  lines: +1 -1;
branches:  2.11.2;
* aclocal.m4 (AC_CONTRIB_FILES): Load the library in question
before invoking fboundp on the function searched.

* configure.ac: Bump version.
----------------------------
revision 2.10
date: 2004-04-09 09:14:27 -0700;  author: albinus;  state: Exp;  lines: +4 -5;


Complete rework, based on review by Karl Berry <karl@gnu.org>

* aclocal.m4 (AC_EMACS_INSTALL): Rewrite function.  Apply a
variable substitution rather then a file substitution

* configure.ac: Adapt comment for AC_EMACS_INSTALL call.

* texi/Makefile.in (INSTALL_CHAPTER): New variable, set by configure.
(TEXI_FILES): Includes "trampinst.texi" also if $(INSTALL_CHAPTER)
is "yes".
($(localinfodir)/%, %.dvi, tramp-%.html, tramp_ja-%.html):
$(INSTALL_CHAPTER) is a parameter, too.

* texi/trampver.texi.in (trampver, tramp): Macros changed to flags.
(otherflavor, installationchapter): Macros removed.  Not necessary
any longer.
(all): "tramp-" and "-" removed from flag names.

* texi/tramp.texi, texi/tramp_ja.texi (tramp): Macro removed.
(Obtaining Tramp): Flag removed from title.
(all): "tramp-" and "-" removed from flag names.  Flags `tramp'
and `trampver' used properly.  Flag `tramp-inst' replaced by
`installchapter'.  Installation related text adapted.

* texi/trampinst.texi (otherflavor, installationchapter): Macros
removed.  Not necessary any longer.
(all): Includes "trampver.texi" for flag setting.  All local flags
moved to that file.  "tramp-" and "-" removed from flag names.
Flags `tramp' and `trampver' used properly.  Flag `tramp-inst'
replaced by `installchapter'.
----------------------------
revision 2.9
date: 2004-03-14 12:59:18 -0800;  author: albinus;  state: Exp;  lines: +65 -4;


* INSTALL: Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.

* Makefile.in: Don't check for $(USE_CONTRIB) any longer.
(xemacs): Use ""$(MAKE)" instead of "make".
(emacs): Use "--with-emacs" configure option.
(savannah): Use "ftp-upload" instead of "scp".  Hope it works for
Kai.

* aclocal.m4 (AC_EMACS_LISP): Use "-vanilla" in case of XEmacs.
(AC_CONTRIB_FILES): New function.  Checks for the need of
provisioning of a contributed package.

* configure.ac: Apply `AC_CONTRIB_FILES' for all Lisp files of
contrib directory.

* contrib/README: Clarify run-at-time.el.

* lisp/Makefile.in: New environment variables $(CONTRIB_FILES) and
$(INSTALL_FILES).  Don't check for $(USE_CONTRIB) any longer.
(all): Depends on $(CONTRIB_FILES), too.
(install): Copy $(INSTALL_FILES) but $?.
(distclean): Remove also $(CONTRIB_FILES).

* texi/Makefile.in (savannah): Simplify copy command.

* texi/trampinst.texi (Installation, Installation parameters)
(Load paths): Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.
----------------------------
revision 2.8
date: 2004-01-09 11:47:24 -0800;  author: albinus;  state: Exp;  lines: +1 -1;


* aclocal.m4 (AC_EMACS_INFO): If an (X)Emacs binary is given,
check also for absolute paths.  Reported by Eli Tziperman.
----------------------------
revision 2.7
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +21 -3;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 2.6
date: 2003-10-01 04:58:56 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


* aclocal.m4 (AC_PATH_INFODIR): Fix path to xemacs site-packages.
From Norbert Koch <viteno@xemacs.org>.
----------------------------
revision 2.5
date: 2003-07-14 14:38:14 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* aclocal.m4 (AC_EMACS_INFO): Fix typo.

* configure.ac: Add a check for suitable make version.
Reported by Sven Utcke <utcke@informatik.uni-hamburg.de>.

* test.makefile: New file.  Used for checking proper "make"
version.

* lisp/Makefile.in (LISP_FILES): New variable.  Used to distinguish
collection of *.el files for Emacs and XEmacs.
Reported by Sven Utcke <utcke@informatik.uni-hamburg.de>.
(EM): Use `-vanilla' option for XEmacs call.
(all): depend on $(LISP_FILES).
----------------------------
revision 2.4
date: 2003-05-24 15:41:01 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* Makefile.in (configure): It depends on "aclocal.m4", too.

* aclocal.m4, lisp/Makefile.in, contrib/Makefile.in: Use
`--no-site-file' option for Emacs call, in order to avoid loading of
Tramp in site specific init files.  Reported by Harry Putnam
<reader@newsguy.com>.

* lisp/Makefile.in (.PHONY): New target.
(all): "trampver.el" and "tramp.el" must be handled first due to
dependencies.

* lisp/tramp.el (tramp-completion-function-alist): Add completion
function for "remcp", "remsh" and "plink1".

* texi/tramp.texi (Inline methods): Add methods `remsh' and `plink1'.
(External transfer methods): Add method `remcp'.
(Multi-hop Methods): Add method `remsh'.
----------------------------
revision 2.3
date: 2003-04-14 13:12:36 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* aclocal.m4 (AC_EMACS_INFO): Make "emacs" as default if $EMACS
isn't set.  Be more robust this case.

* tramp.el (tramp-handle-file-truename): `sym' shouldn't be quoted.
----------------------------
revision 2.2
date: 2003-04-06 14:44:33 -0700;  author: albinus;  state: Exp;  lines: +21 -0;

* aclocal.m4 (AC_EMACS_INSTALL): New macro.  Depending on
configure option `--with-packaging', Tramp installation chapter
will be part of the manual, or not.

* configure.ac (top-level): Apply `AC_EMACS_INSTALL'.

* Makefile.in (xemacs, emacs): Call `./configure --with-packaging'
in order to generate `trampver.texi' without installation chapter.

* texi/Makefile.in (%.dvi): Apply parameter `-t "@set $(EMACS_INFO)"'
for texi2dvi.

* texi/tramp.texi (top-level): Move installation related entries to
trampinst.texi.  Apply respective macros instead of, in case flag
`tramp-inst' is set.
Move all (X)Emacs related flags to trampver.texi.in.

* texi/trampinst.texi: New file.  Contains installation related
entries.

* texi/trampver.texi.in (top-level): Define all (X)Emacs related
flags.  Include trampinst.texi depending on configure option
`--with-packaging'.
----------------------------
revision 2.1
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.11.2.2
date: 2006-08-28 22:21:38 -0700;  author: albinus;  state: Exp;  lines: +112 -83;

Version 2.0.54 released.
----------------------------
revision 2.11.2.1
date: 2004-12-30 01:33:45 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* aclocal.m4, configure.ac: grep(1) on OpenBSD 3.6 does not
understand the '-' option.  Small change.  From Ryan Yeske
<rcyeske@gmail.com>.
=============================================================================

RCS file: /sources/tramp/tramp/configure.ac,v
Working file: configure.ac
head: 2.89
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.87
	branch-2-1-stable: 2.82.0.2
	branchpoint-2-1-stable: 2.82
	V-2-1-19: 2.82
	V-2-1-18: 2.80
	V-2-1-17: 2.78
	V-2-1-16: 2.76
	V-2-1-15: 2.74
	V-2-1-14: 2.72
	V-2-1-13: 2.69
	V-2-0-57: 2.22.2.39
	V-2-1-12: 2.67
	V-2-1-11: 2.65
	V-2-1-10: 2.61
	V-2-0-56: 2.22.2.36
	V-2-1-9: 2.57
	V-2-1-8: 2.54
	V-2-0-55: 2.22.2.33
	V-2-1-7: 2.51
	V-2-0-54: 2.22.2.31
	V-2-1-6: 2.48
	V-2-0-53: 2.22.2.29
	V-2-0-52: 2.22.2.27
	V-2-1-5: 2.46
	V-2-1-4: 2.42
	V-2-0-51: 2.22.2.24
	V-2-0-50: 2.22.2.22
	V-2-0-49: 2.22.2.20
	V-2-0-48: 2.22.2.18
	V-2-1-3: 2.37
	V-2-0-47: 2.22.2.16
	V-2-0-46: 2.22.2.12
	V-2-0-45: 2.22.2.10
	V-2-1-2: 2.34
	V-2-0-44: 2.22.2.8
	V-2-1-1: 2.32
	V-2-0-43: 2.22.2.6
	V-2-0-42: 2.22.2.5
	V-2-0-41: 2.22.2.3
	V-2-1-0: 2.24
	branch-2-0-stable: 2.22.0.2
	branchpoint-2-0-stable: 2.22
	V-2-0-40: 2.22
	V-2-0-39: 2.15
	V-2-0-38: 2.13
	V-2-0-37: 2.11
	V-2-0-36: 2.8
	V-2-0-35: 2.7
	V-2-0-34: 2.5
	V-2-0-33: 2.5
	V-2-0-32: 2.3
keyword substitution: kv
total revisions: 130;	selected revisions: 130
description:
----------------------------
revision 2.89
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.88
date: 2010-11-30 11:58:20 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: U7QVjzScQlWbjuYu;
* configure.ac: Bump version (to 2.2.1-pre).  Update merge
version to 2.2.0.
----------------------------
revision 2.87
date: 2010-11-20 03:09:57 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: OEjCifFu53ZGH9Xu;
*** empty log message ***
----------------------------
revision 2.86
date: 2010-10-21 02:54:13 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 1BFSbSYazw0EfiTu;
* configure.ac: Substitute abs_builddir instead of abs_srcdir.
----------------------------
revision 2.85
date: 2010-09-17 00:47:06 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: OhmgC0YIVnyODUOu;
* configure.ac: Regenerate autoloads.

* tramp-compat.el (tramp-compat-with-temp-message): Make it a defmacro.
----------------------------
revision 2.84
date: 2010-09-06 03:45:38 -0700;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: dbwJT23jYosYYvNu;
* configure.ac: Substitute abs_srcdir.
----------------------------
revision 2.83
date: 2010-09-02 02:17:56 -0700;  author: albinus;  state: Exp;  lines: +2 -5;  commitid: NHuTgSvU6LQQCZMu;
* INSTALL (System Requirements): Adapt versions.
(Japanese Manual): Remove.

* Makefile.in (XEMACS_FILES): Remove texi/tramp_ja.texi.
(cvstag): Use -F.
(savannah): Don't configure --with-japanese-manual.

* aclocal.m4 (AC_EMACS_INFO): Pretty-print
TRAMP_EMACS_VERSION_CHECK.
(AC_JA_MANUAL): Remove.

* configure.ac: Bump version (to 2.2.0).  Update merge
version to 2.1.19.  Remove AC_JA_MANUAL call.
----------------------------
revision 2.82
date: 2010-08-23 11:23:06 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: tiSTp0DWhbgDXKLu;
branches:  2.82.2;
Version 2.1.19 released.

* configure.ac: Bump version.
----------------------------
revision 2.81
date: 2010-03-15 16:32:26 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: VOkv5e7SXt6NQ5ru;
* configure.ac: Bump version (to 2.1.19-pre).  Update merge
version to 2.1.18.
----------------------------
revision 2.80
date: 2010-03-14 03:30:10 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: Fhwj0p760AveyTqu;
Version 2.1.18 released.

* configure.ac: Bump version.

* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Make call
of `delete-directory' backwards compatible.
----------------------------
revision 2.79
date: 2009-11-08 02:38:43 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: XKQXuHzreYTsEHau;
* configure.ac: Bump version (to 2.1.18-pre).  Update merge
version to 2.1.17.
----------------------------
revision 2.78
date: 2009-11-07 12:50:59 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: slFdMiSOEpjv4Dau;
Version 2.1.17 released.

* configure.ac: Bump version.
----------------------------
revision 2.77
date: 2009-06-29 07:00:54 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: VztA5WtKsLeT0LTt;
* configure.ac: Bump version (to 2.1.17-pre).  Update merge
version to 2.1.16.
----------------------------
revision 2.76
date: 2009-06-22 12:25:54 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: yaDXM9tJYyNk2TSt;
Version 2.1.16 released.

* configure.ac: Bump version.
----------------------------
revision 2.75
date: 2009-02-06 08:12:21 -0800;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: LKEhVbev4WVKkoBt;

* configure.ac: Bump version (to 2.1.16-pre).  Update merge
version to 2.1.15.
----------------------------
revision 2.74
date: 2009-02-01 01:47:03 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: KL02QrfPGwJKmIAt;
Version 2.1.15 released.
----------------------------
revision 2.73
date: 2008-08-22 12:13:32 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: acN4e3gaGJ2WJOft;
* configure.ac: Bump version (to 2.1.15-pre).  Update merge
version to 2.1.14.
----------------------------
revision 2.72
date: 2008-07-27 09:05:26 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: LthXufJP9vNdxsct;
*** empty log message ***
----------------------------
revision 2.71
date: 2008-05-13 14:13:42 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: voOS0VlMh7YqEQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.70
date: 2008-03-30 09:31:46 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: a0IxDp45v2kpvaXs;
* configure.ac: Bump version (to 2.1.14-pre).  Update merge
version to 2.1.13.
----------------------------
revision 2.69
date: 2008-03-29 12:58:27 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: nLBeC1gTScViG3Xs;
Version 2.1.13 released.

* configure.ac: Bump version.
----------------------------
revision 2.68
date: 2008-01-12 03:04:22 -0800;  author: albinus;  state: Exp;  lines: +4 -3;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.67
date: 2007-12-23 04:02:44 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: dXm8BQWGRHrW9yKs;

Version 2.1.12 released.

* configure.ac: Bump version.

* lisp/tramp.el: New todo item.

* lisp/tramp-smb.el (tramp-smb-handle-insert-directory): Handle "-F"
switch.  Reported by Mark T. Kennedy <mkennedy@diamondbackcap.com>.
----------------------------
revision 2.66
date: 2007-10-18 11:46:35 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: BHD6VmLqheQ8w6Cs;

* configure.ac: Bump version (to 2.1.12-pre).  Update merge
version to 2.1.11.

* texi/tramp.texi (Cleanup remote connections): New section.
(Password caching): Remove `tramp-clear-passwd'.  It's not a
command anymore.
(Bug Reports): Add `tramp-bug' to function index.
----------------------------
revision 2.65
date: 2007-10-09 21:34:16 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: bfWBAWxgBaaT30Bs;

Version 2.1.11 released.
----------------------------
revision 2.64
date: 2007-09-28 08:52:02 -0700;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 2.63
date: 2007-07-29 08:09:36 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.62
date: 2007-07-23 13:33:24 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: fJOGPxd0nkIYTVqs;

* configure.ac: Bump version (to 2.1.11-pre).  Update merge
version to 2.1.10.

* lisp/tramp.el (tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-stat(
(tramp-convert-file-attributes): Handle huge file sizes.
----------------------------
revision 2.61
date: 2007-07-22 09:29:39 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: JpiEgUOKtSqCAMqs;

Version 2.1.10 released.
----------------------------
revision 2.60
date: 2007-07-01 22:09:50 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.59
date: 2007-07-01 11:31:33 -0700;  author: albinus;  state: Exp;  lines: +8 -19;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.58
date: 2007-04-15 14:03:41 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* configure.ac: Bump version (to 2.1.10-pre).

* INSTALL: Commands cannot contain whitespaces in their path.

* lisp/tramp.el (tramp-default-user): Fix typo in docstring.  Value can
also be nil.

* texi/trampinst.texi (Installation parameters): Commands cannot
contain whitespaces in their path.
----------------------------
revision 2.57
date: 2007-04-08 03:13:35 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

Version 2.1.9 released.
----------------------------
revision 2.56
date: 2007-03-25 11:39:27 -0700;  author: albinus;  state: Exp;  lines: +5 -2;

* aclocal.m4 (AC_EMACS_INFO): Add gateway support.
(AC_EMACS_CHECK_LIB): Remove.

* configure.ac: Add gateway support.

* lisp/Makefile.in: Add gateway support.

* lisp/tramp.el (top): Require tramp-gw conditionally only.
(tramp-methods): Add port spec to "plink", "plink1" and "pscp"
methods.

* texi/Makefile.in: Add gateway support.

* texi/tramp.texi (all): Make gateway text conditional.
----------------------------
revision 2.55
date: 2007-01-18 13:00:11 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* configure.ac: Bump version (to 2.1.9-pre).

* lisp/tramp.el (with-parsed-tramp-file-name): Protect debug spec
during compilation.
(tramp-handle-expand-file-name, tramp-find-method)
(tramp-find-user, tramp-find-host): Don't check for
`tramp-completion-mode'.
(tramp-find-foreign-file-name-handler): Check also for
`tramp-completion-mode' and `ramp-completion-file-name-regexp'.
(tramp-completion-mode): Variable removed.  Also all occurencies.
(tramp-completion-handle-file-name-all-completions): Don't call
`tramp-run-real-handler'.
(tramp-make-tramp-file-name): It must return always a well-formed
Tramp file name.
(tramp-completion-make-tramp-file-name): New defun.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Apply it.
----------------------------
revision 2.54
date: 2007-01-14 12:24:38 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

Version 2.1.8 released.
----------------------------
revision 2.53
date: 2007-01-08 23:20:48 -0800;  author: albinus;  state: Exp;  lines: +4 -2;

* configure.ac: texi2dvi cannot be called with "-o /dev/null",
this changes permissions of /dev/null.  Reported by Hans Halvorson
<hhalvors@Princeton.EDU>
----------------------------
revision 2.52
date: 2006-10-24 22:47:09 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* configure.ac: Bump version (to 2.1.8-pre).

* lisp/tramp.el (tramp-yn-prompt-regexp): Add question from plink.
(tramp-message): Reduce messages in minibuffer.
(tramp-handle-call-process): Fix error in error handling.
(tramp-touch): UTC handling is not possible for XEmacs.

* lisp/tramp-cache.el (top): Don't autoload macro
`with-parsed-tramp-file-name' but function
`tramp-dissect-file-name'.
(tramp-cache-before-revert-function): Change implementation
accordingly.  Reported by Jonathan Hankins
<jonathan-hankins@mindspring.com>.

* lisp/tramp-util.el (tramp-advice-executable-find): Check for
`load-in-progress)'.
(tramp-advice-call-process): Add check for
`tramp-fish-file-name-handler'.
(tramp-grep-setup, tramp-gud-setup, tramp-ediff-setup): Remove
functions, and call defadvices directly. There is no need for
`eval-after-load'.
(top): Add defadvices for `gnus-1', `jka-compr-call-process' and
`jka-compr-partial-uncompress'.
----------------------------
revision 2.51
date: 2006-09-03 05:23:58 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Version 2.1.7 released.
----------------------------
revision 2.50
date: 2006-06-04 08:36:15 -0700;  author: albinus;  state: Exp;  lines: +4 -4;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Expand
`datarootdir´.  Perform all expansions with "eval".

* configure.ac: Add "-o /dev/null" to texi2dvi call.

* lisp/tramp.el (tramp-process-actions): Pop connection buffer in case
of error.  Modify error message depending on `tramp-action'.

* lisp/tramp-cache.el (tramp-persistency-file-name): Default value is
"~/.emacs.d/tramp" or "~/.xemacs/tramp", respectively.  Suggested
by Romain Francoise <romain@orebokech.com>.
(tramp-dump-connection-properties): Suppress error when
`tramp-persistency-file-name´ cannot be written.

* texi/tramp.texi (Connection caching): Change default file name.
----------------------------
revision 2.49
date: 2006-05-31 14:27:02 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* configure.ac: Bump version (to 2.1.7-pre).

* lisp/tramp.el (tramp-get-debug-buffer): `outline-mode' must be
protected with a local `default-directory'.

* lisp/tramp-cache.el (top): When reading
`tramp-persistency-file-name', discard error messages for
'file-error.
----------------------------
revision 2.48
date: 2006-05-28 11:47:01 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

Version 2.1.6 released.
----------------------------
revision 2.47
date: 2005-12-28 13:49:47 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* configure.ac: Bump version (to 2.1.6-pre).

* texi/tramp.texi (Frequently Asked Questions): Add bookmarks and
filecache to approaches shortening Tramp file names to be typed.
----------------------------
revision 2.46
date: 2005-12-11 07:24:20 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

Version 2.1.5 released.

* configure.ac: Bump version.

* INSTALL: Point to Posix environments for installation under MS
Windows.

* lisp/tramp.el (tramp-remote-path): Beautify "/usr/xpg4/bin".  Clarify
docstring.
(tramp-handle-expand-file-name): Remove double slash.
(tramp-set-remote-path): It is sufficient to check for
`file-directory-p'.
(tramp-find-file-exists-command): Remove unnecessary message.
(tramp-check-ls-command, tramp-check-ls-commands)
(tramp-find-ls-command, tramp-find-id-command): Remove functions.
Code is moved to corresponding `tramp-get-*' functions.
(tramp-get-*): Work in connection buffer because local
`tramp-remote-path'. Insert code from above when necessary.
(tramp-bug): Add `tramp-default-host', `tramp-default-user',
`tramp-default-user-alist'.
(tramp-append-tramp-buffers): Add local variables for all Tramp
buffers.
----------------------------
revision 2.45
date: 2005-12-02 14:16:36 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* INSTALL, configure.ac: We depend on GNU texinfo 4.6.

* lisp/tramp.el (tramp-verbose): Document level 7.
(tramp-send-command-and-check): Clean up tramp_exit_status from
buffer.
(tramp-handle-file-local-copy, tramp-send-command-and-read):
Remove cleaning of tramp_exit_status.
(tramp-handle-write-region): Make cksum check more robust.
(tramp-remote-path): Add "/usr/xpg4/bin/".  On Solaris, there are
the POSIX programs.
(tramp-find-executable): IGNORE-TILDE is optional now.  New
parameter IGNORE-PATH.  Adapt callees.
(tramp-set-remote-path): Return list of existing directories.
(tramp-post-connection): Make `tramp-remote-path' buffer local.
Set it to list of existing directories.
(tramp-find-id-command, tramp-get-remote-id ): New defun.
(tramp-get-remote-uid, tramp-get-remote-gid): Use them.

* texi/tramp.texi (Frequently Asked Questions): Example how to set
`file-precious-flag' buffer local.

* texi/test.texi: Expand check for Texinfo 4.6 feature.
----------------------------
revision 2.44
date: 2005-11-29 14:24:39 -0800;  author: albinus;  state: Exp;  lines: +0 -7;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* lisp/tramp.el (tramp-do-copy-or-rename-file-via-buffer)
(tramp-handle-file-local-copy, tramp-handle-write-region):
Generate always a new temp buffer. Kill it finally.
(tramp-handle-unhandled-file-name-directory): Take home directory
on remote host.
(tramp-handle-write-region): When `file-precious-flag' is set,
check also the checksums (in case of inline methods).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.

* texi/tramp.texi (Remote processes): Explain gud.el integration in
more detail.
(Frequently Asked Questions): Recommend `file-precious-flag' when
`tramp-chunksize' is set.
----------------------------
revision 2.43
date: 2005-10-23 04:48:04 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* configure.ac: Bump version (to 2.1.5-pre).

* Makefile.in (clean): Cleanup also subdirectory test.
(MANIFEST): Exclude tramp2 and .cvsignore.

* lisp/tramp.el (tramp-let-maybe): Add `edebug-form-spec' property.
(tramp-handle-expand-file-name): Bind `default-directory' locally
to "/" in order to avoid problems with UNC shares or Cygwin
mounts.
----------------------------
revision 2.42
date: 2005-10-13 13:55:22 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

Version 2.1.4 released.

* configure.ac: Bump version.

* texi/tramp.texi (Bug Reports): Make a cross reference to `Traces and
Profiles'.
(Traces and Profiles): Explain settings for backtraces.
----------------------------
revision 2.41
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.40
date: 2005-02-13 10:42:44 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* INSTALL, texi/tramp.texi, texi/trampinst.texi: Replace "Linux" by
"GNU/Linux".  Suggested by Richard M. Stallman <rms@gnu.org>

* aclocal.m4 (AC_PATH_LISPDIR): Document an alternative approach
configuring `lispdir'.  Not activated (yet).

* configure.ac: Documentation fix.
----------------------------
revision 2.39
date: 2005-02-05 15:02:40 -0800;  author: albinus;  state: Exp;  lines: +9 -3;

* INSTALL: Explain in more detail configure parameters
"with-xemacs", "--with-lispdir" and "--infodir".  Change bug
report address to [tramp-devel@gnu.org].

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rewrite
completely in order to apply better default values.

* configure.ac: Reorder substitution of installation directories
wrt changes in aclocal.m4.

* lisp/tramp.el (all): Change all addresses to .gnu.org.

* texi/Makefile.in (datadir): New variable.

* texi/trampinst.texi (Installation parameters): Explain in more detail
configure parameters "with-xemacs", "--with-lispdir" and
"--infodir".
----------------------------
revision 2.38
date: 2005-02-02 14:38:25 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* INSTALL: Linux configure option prefix should be
"--prefix=/usr".  Reported by Bradley Dilger <dilger@wrecking.org>.

* configure.ac: Bump version (to 2.1.4-pre).  Change bug report
address to [tramp-devel@gnu.org].

* texi/tramp.texi (all): Change all addresses to .gnu.org.
(Obtaining Tramp): Mention the Nightly CVS Tree Tarball as CVS
direct access alternative.

* texi/trampinst.texi (Installation parameters): Linux configure option
prefix should be "--prefix=/usr".  Reported by Bradley Dilger
<dilger@wrecking.org>.
----------------------------
revision 2.37
date: 2005-01-16 06:18:59 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

Version 2.1.3 released.
----------------------------
revision 2.36
date: 2004-12-30 01:33:07 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* aclocal.m4, configure.ac: grep(1) on OpenBSD 3.6 does not
understand the '-' option.  Small change.  From Ryan Yeske
<rcyeske@gmail.com>.
----------------------------
revision 2.35
date: 2004-10-10 09:48:44 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


* Makefile.in (savannah): Don't apply "configure" for Japanese
manual, but call "make -C texi" with proper variable settings.

* aclocal.m4 (AC_EMACS_INFO): Write default values in help output
for "--with-xemacs" and "--with-emacs".
(AC_PATH_LISPDIR): Write default value in help output for
"--with-lispdir".
(all): Unify capitalization for help output.

* configure.ac: Bump version (to 2.1.3-pre).

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.
(savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.34
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 2.33
date: 2004-08-14 12:20:14 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


* configure.ac: Bump version (to 2.1.2-pre).  Set
TRAMP_EMACS_MERGE_VERSION (to 2.0.44).

* lisp/tramp.el (tramp-methods): "sftp" has nil
`tramp-copy-keep-date-arg'.
(tramp-do-copy-or-rename-file-out-of-band): Handle it.
----------------------------
revision 2.32
date: 2004-08-09 13:20:37 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


Version 2.1.1 released.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-methods): "sftp", "psftp": new external methods.
"plink", "plink1" and "pscp": parameter for port specification is
"-P".

* texi/tramp.texi (Inline methods): Correct wrong (outdated) index
"km".  Say, that the port specification is also available for
"plink".
(External transfer methods): Add "sftp" and "psftp" methods.
----------------------------
revision 2.31
date: 2004-07-30 12:52:03 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


* INSTALL: Precise supported (X)Emacs versions.

* aclocal.m4 (AC_EMACS_INFO): Add check for proper (X)Emacs
version.

* configure.ac: Precise comments.

* lisp/trampver.el.in: Check for (X)Emacs version.  Code is from macro
AC_EMACS_INFO of aclocal.m4.

* lisp/tramp.el (top): Remove (X)Emacs version check.
(tramp-maybe-open-connection): Handle NIL values in
`tramp-default-proxies-alist'.

* texi/trampver.texi.in: Remove `postfixmultihop'.  Rename
`postfixsinglehop' into `postfixhop'.

* texi/tramp.texi (top): Rename `postfixsinglehop' into `postfixhop'.
(Multi-hop Methods, Multi-hop filename syntax): Removed, including
al pointers to.
(Multi-hops): New chapter.
(History of Tramp): Proxy hosts mentioned.
(Frequently Asked Questions): Precise supported (X)Emacs
versions.
----------------------------
revision 2.30
date: 2004-06-03 14:21:49 -0700;  author: albinus;  state: Exp;  lines: +12 -8;


* configure.ac (FTP_UPLOAD): New variable, indicating which ftp
upload program to savannah has to be used.  Kai and Michael differ
in their preferences ...

* Makefile.in (FTP_UPLOAD): New variable.  Value depending on
@FTP_UPLOAD@.
(savannah): Use it.

* lisp/tramp.el (all): Code cleanup.  Change all `tramp-handle-xxx'
calls to respective `xxx` calls.

* lisp/tramp-vc.el (all): Code cleanup.  Change all `tramp-handle-xxx'
calls to respective `xxx` calls.
----------------------------
revision 2.29
date: 2004-06-01 13:43:29 -0700;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.28
date: 2004-06-01 13:36:18 -0700;  author: albinus;  state: Exp;  lines: +3 -3;


* .cvsignore: Add *.diff.

* configure.ac (TRAMP_CLEAN_FILES): Add *.diff.

* lisp/tramp.el (tramp-process-alive-regexp): Precise doc string.
(tramp-multi-action-process-alive): New defun.
(tramp-multi-actions): Use it.
----------------------------
revision 2.27
date: 2004-05-29 15:56:26 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


* configure.ac: Set TRAMP_EMACS_MERGE_VERSION (to 2.0.41).
----------------------------
revision 2.26
date: 2004-05-29 06:24:38 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Use "-pre" suffix on CVS versions.
----------------------------
revision 2.25
date: 2004-05-08 03:21:25 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Bump version to 2.1.0.
----------------------------
revision 2.24
date: 2004-05-07 14:26:03 -0700;  author: kai;  state: Exp;  lines: +2 -2;
* configure.ac: Bump version (to 2.0.41) and set the
last-merged-with-Emacs version (to 2.0.40).  Hm.  The version bump
to 2.0.41 is probably bogus, we want to create a stable
branch...  Argh.
----------------------------
revision 2.23
date: 2004-05-07 13:54:41 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* configure.ac (TRAMP_EMACS_MERGE_VERSION): New variable,
indicating which was the last revision of Tramp that was merged
into Emacs.  Don't forget to update this after running "make
emacs" (or "gmake emacs")!

* Makefile.in (EMACS_EL_FILES): Mention files explicitly to make
sure that tramp-efs.el is not included.
(EMACS_TEXI_FILES): New variable, lists manual files that need to
be merged with the Emacs repository.
(TRAMP_EMACS_MERGE_VERSION, TRAMP_EMACS_MERGE_TAG): New
variables, indicating which was the last revision of Tramp that
was merged into Emacs.  Automatically set by configure, original
is in configure.ac.
(emacs): Reword to use patches instead of copying the files.
This helps to make sure that changes to Tramp files in the Emacs
repository aren't overwritten.
----------------------------
revision 2.22
date: 2004-05-02 09:38:39 -0700;  author: kai;  state: Exp;  lines: +1 -1;
branches:  2.22.2;
* aclocal.m4 (AC_CONTRIB_FILES): Load the library in question
before invoking fboundp on the function searched.

* configure.ac: Bump version.
----------------------------
revision 2.21
date: 2004-04-09 09:14:27 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


Complete rework, based on review by Karl Berry <karl@gnu.org>

* aclocal.m4 (AC_EMACS_INSTALL): Rewrite function.  Apply a
variable substitution rather then a file substitution

* configure.ac: Adapt comment for AC_EMACS_INSTALL call.

* texi/Makefile.in (INSTALL_CHAPTER): New variable, set by configure.
(TEXI_FILES): Includes "trampinst.texi" also if $(INSTALL_CHAPTER)
is "yes".
($(localinfodir)/%, %.dvi, tramp-%.html, tramp_ja-%.html):
$(INSTALL_CHAPTER) is a parameter, too.

* texi/trampver.texi.in (trampver, tramp): Macros changed to flags.
(otherflavor, installationchapter): Macros removed.  Not necessary
any longer.
(all): "tramp-" and "-" removed from flag names.

* texi/tramp.texi, texi/tramp_ja.texi (tramp): Macro removed.
(Obtaining Tramp): Flag removed from title.
(all): "tramp-" and "-" removed from flag names.  Flags `tramp'
and `trampver' used properly.  Flag `tramp-inst' replaced by
`installchapter'.  Installation related text adapted.

* texi/trampinst.texi (otherflavor, installationchapter): Macros
removed.  Not necessary any longer.
(all): Includes "trampver.texi" for flag setting.  All local flags
moved to that file.  "tramp-" and "-" removed from flag names.
Flags `tramp' and `trampver' used properly.  Flag `tramp-inst'
replaced by `installchapter'.
----------------------------
revision 2.20
date: 2004-03-29 12:37:49 -0800;  author: albinus;  state: Exp;  lines: +5 -3;


* configure.ac: Beautify check for "install-info".

* INSTALL (Installation Names): Describe what to do in case of
errors and warnings.
(Load Path): Add XEmacs example.

* texi/Makefile.in (INSTALL_INFO): Use option `--quiet'.

* texi/tramp.texi (Frequently Asked Questions): Use "MS Windows
NT/2000/XP" (not only "NT").  Remove doubled entry "What kinds of
systems does @tramp{} work on".

* texi/trampinst.texi (Installation parameters): Describe what to do in
case of errors and warnings.
----------------------------
revision 2.19
date: 2004-03-28 08:44:41 -0800;  author: albinus;  state: Exp;  lines: +9 -0;


* configure.ac: Check existence of "install-info".  Taken from
Emacs configure.in.

* texi/Makefile.in (INSTALL_INFO): New Variable.
($(localinfodir)/dir, $(infodir)/dir): New Targets.
(.PHONY): Add "$(localinfodir)/dir" and "$(infodir)/dir".
(install): Depends on "$(infodir)/dir".
(tramp): Depends on "$(localinfodir)/dir".

* texi/dir_sample: Created new.  Existing one didn't work, don't know  why.

* texi/tramp_ja.texi: @direntry corrected to "tramp_ja".

* texi/trampinst.texi (Load paths): Remove explanation on applying
"install-info".  It should work now, even on Debian.
----------------------------
revision 2.18
date: 2004-03-14 12:59:18 -0800;  author: albinus;  state: Exp;  lines: +18 -0;


* INSTALL: Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.

* Makefile.in: Don't check for $(USE_CONTRIB) any longer.
(xemacs): Use ""$(MAKE)" instead of "make".
(emacs): Use "--with-emacs" configure option.
(savannah): Use "ftp-upload" instead of "scp".  Hope it works for
Kai.

* aclocal.m4 (AC_EMACS_LISP): Use "-vanilla" in case of XEmacs.
(AC_CONTRIB_FILES): New function.  Checks for the need of
provisioning of a contributed package.

* configure.ac: Apply `AC_CONTRIB_FILES' for all Lisp files of
contrib directory.

* contrib/README: Clarify run-at-time.el.

* lisp/Makefile.in: New environment variables $(CONTRIB_FILES) and
$(INSTALL_FILES).  Don't check for $(USE_CONTRIB) any longer.
(all): Depends on $(CONTRIB_FILES), too.
(install): Copy $(INSTALL_FILES) but $?.
(distclean): Remove also $(CONTRIB_FILES).

* texi/Makefile.in (savannah): Simplify copy command.

* texi/trampinst.texi (Installation, Installation parameters)
(Load paths): Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.
----------------------------
revision 2.17
date: 2004-03-05 12:47:49 -0800;  author: albinus;  state: Exp;  lines: +2 -2;


* configure.ac: Write "${MAKE}" if appropriate (but "make").

* Makefile.in: (.PHONY): Remove unused targets.
(distclean): Remove also *.tar.gz*
(tar): Call gpg.

* lisp/Makefile.in (.PHONY): Remove unused targets.
(install): Depends on "all".

* lisp/tramp-vc.el (tramp-vc-workfile-unchanged-p): Correct typo
("file" -> "filename").  Reported by Kim F. Storm <storm@cua.dk>.

* texi/Makefile.in (SINFO): Removed.
(.PHONY): New Target.
----------------------------
revision 2.16
date: 2004-03-01 23:10:06 -0800;  author: kai;  state: Exp;  lines: +2 -2;
Look for "gmake", first.
----------------------------
revision 2.15
date: 2004-02-29 05:37:34 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.39 released.
----------------------------
revision 2.14
date: 2004-01-02 03:38:32 -0800;  author: albinus;  state: Exp;  lines: +3 -0;


* configure.ac: *.elc files must be removed always.  Otherwise,
there could be problems if they are created with the wrong Emacs
flavor.

* texi/tramp.texi (Obtaining TRAMP): Remove CVS login from example.
That's necessary for pserver password authentification only.
----------------------------
revision 2.13
date: 2003-11-30 09:52:16 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Release 2.0.38.
----------------------------
revision 2.12
date: 2003-11-30 09:49:57 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Bump version number.
Avoid --mode arg to tar.
----------------------------
revision 2.11
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +7 -3;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 2.10
date: 2003-07-26 12:46:54 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


	* configure.ac: Add "-s" option for make version check.  Kai's
	kludge not needed anymore.
	* lisp/Makefile.in (.PHONY): Add `xemacs'.
----------------------------
revision 2.9
date: 2003-07-20 10:52:22 -0700;  author: kai;  state: Exp;  lines: +2 -2;
Bump version.
Kludge suitable version test to pass for Kai doing "make
savannah".  For some reason, make prints "Entering directory
foo" and "Leaving directory foo" messages in that case.
----------------------------
revision 2.8
date: 2003-07-14 14:38:14 -0700;  author: albinus;  state: Exp;  lines: +15 -0;

* aclocal.m4 (AC_EMACS_INFO): Fix typo.

* configure.ac: Add a check for suitable make version.
Reported by Sven Utcke <utcke@informatik.uni-hamburg.de>.

* test.makefile: New file.  Used for checking proper "make"
version.

* lisp/Makefile.in (LISP_FILES): New variable.  Used to distinguish
collection of *.el files for Emacs and XEmacs.
Reported by Sven Utcke <utcke@informatik.uni-hamburg.de>.
(EM): Use `-vanilla' option for XEmacs call.
(all): depend on $(LISP_FILES).
----------------------------
revision 2.7
date: 2003-06-17 06:04:20 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Bump version.
----------------------------
revision 2.6
date: 2003-05-24 09:10:39 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-password-end-of-line): Use "xy" with plink.

* configure.ac: Bump version.

* Makefile.in (cvstag): "cvs tag", not "cvs cvstag".
----------------------------
revision 2.5
date: 2003-04-08 12:18:09 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Bump version.
----------------------------
revision 2.4
date: 2003-04-08 12:11:11 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Bump version.
----------------------------
revision 2.3
date: 2003-04-06 14:44:33 -0700;  author: albinus;  state: Exp;  lines: +3 -0;

* aclocal.m4 (AC_EMACS_INSTALL): New macro.  Depending on
configure option `--with-packaging', Tramp installation chapter
will be part of the manual, or not.

* configure.ac (top-level): Apply `AC_EMACS_INSTALL'.

* Makefile.in (xemacs, emacs): Call `./configure --with-packaging'
in order to generate `trampver.texi' without installation chapter.

* texi/Makefile.in (%.dvi): Apply parameter `-t "@set $(EMACS_INFO)"'
for texi2dvi.

* texi/tramp.texi (top-level): Move installation related entries to
trampinst.texi.  Apply respective macros instead of, in case flag
`tramp-inst' is set.
Move all (X)Emacs related flags to trampver.texi.in.

* texi/trampinst.texi: New file.  Contains installation related
entries.

* texi/trampver.texi.in (top-level): Define all (X)Emacs related
flags.  Include trampinst.texi depending on configure option
`--with-packaging'.
----------------------------
revision 2.2
date: 2003-03-30 12:09:35 -0800;  author: kai;  state: Exp;  lines: +1 -1;
(xemacs, emacs): Copy trampver.texi, too.
----------------------------
revision 2.1
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.22.2.40
date: 2008-04-09 12:55:38 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: QKBcgQofd4gqjtYs;
* configure.ac: Bump version (to 2.0.58-pre).  Update merge
version to 2.0.57.
----------------------------
revision 2.22.2.39
date: 2008-02-02 02:12:17 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: Cn1Y2juSfKSOeOPs;
Version 2.0.57 released.
----------------------------
revision 2.22.2.38
date: 2007-07-25 12:37:29 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.22.2.37
date: 2007-07-15 01:41:01 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: aM3x77bQBIEHdQps;

* configure.ac: Bump version (to 2.0.57-pre).  Update merge
version to 2.0.56.

* lisp/tramp.el (tramp-find-shell, tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-multi)
(tramp-open-connection-setup-interactive-shell): Guard against
$PROMPT_COMMAND shell var.  Reported by Steve Youngs
<steve@sxemacs.org>.
----------------------------
revision 2.22.2.36
date: 2007-05-28 01:49:42 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 3AYYXUpQ30DuOFjs;

Version 2.0.56 released.
----------------------------
revision 2.22.2.35
date: 2007-01-08 23:25:33 -0800;  author: albinus;  state: Exp;  lines: +4 -2;

* configure.ac: texi2dvi cannot be called with "-o /dev/null", this
changes permissions of /dev/null.  Reported by Hans Halvorson
<hhalvors@Princeton.EDU>
----------------------------
revision 2.22.2.34
date: 2007-01-08 21:33:18 -0800;  author: albinus;  state: Exp;  lines: +3 -3;

* configure.ac: Bump version (to 2.0.56-pre).  Update merge
version to 2.0.55.
----------------------------
revision 2.22.2.33
date: 2006-12-30 07:15:39 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

Version 2.0.55 released.
----------------------------
revision 2.22.2.32
date: 2006-10-21 06:40:49 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* configure.ac: Bump version (to 2.0.55-pre).  Update merge
version to 2.0.54.

* lisp/tramp.el (tramp-yn-prompt-regexp): Add question from plink.
(tramp-completion-mode): Remove clause (not
tramp-unified-filenames), because the function is called in other
context too, where this check results in wrong results in the
XEmacs case on Windows.
(tramp-touch): UTC handling is not possible for XEmacs.
----------------------------
revision 2.22.2.31
date: 2006-08-28 22:21:38 -0700;  author: albinus;  state: Exp;  lines: +15 -10;

Version 2.0.54 released.
----------------------------
revision 2.22.2.30
date: 2006-05-06 15:08:04 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* configure.ac: Bump version (to 2.0.54-pre).  Update merge
version to 2.0.53.

* lisp/tramp.el (tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): That's a defsubst now.  Code
from `tramp-repair-jka-compr' moved here.  Register
`tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-repair-jka-compr): Remove.
(tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name): Remove them.
(tramp-completion-handle-file-name-all-completions):
Delete directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-completion-file-name-handler-alist): Delete
expand-file-name and other operations that can cause spurious loading.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
----------------------------
revision 2.22.2.29
date: 2006-04-17 05:07:58 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

Version 2.0.53 released.
----------------------------
revision 2.22.2.28
date: 2006-01-27 13:55:22 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* configure.ac: Bump version (to 2.0.53-pre).  Update merge
version to 2.0.52.

* lisp/tramp.el: Add autoload for adding
`tramp-completion-file-name-handler' to `file-name-handler-alist'.
----------------------------
revision 2.22.2.27
date: 2006-01-22 10:38:31 -0800;  author: albinus;  state: Exp;  lines: +2 -2;


Version 2.0.52 released.

* configure.ac: Bump version.

* lisp/tramp.el, lisp/tramp-ftp.el, lisp/tramp-util.el,
lisp/tramp-vc.el: Add code for unloading Tramp.  See comment before
`tramp-unload-tramp' for checklist.

* lisp/tramp.el (tramp-unload-file-name-handler-alist)
(tramp-unload-tramp): New defuns.
(tramp-advice-PC-expand-many-files): New defadvice.
(tramp-save-PC-expand-many-files, tramp-setup-complete) Defuns
removed.

* lisp/tramp-ftp.el (tramp-ftp-enable-ange-ftp): New defun.

* lisp/tramp-util.el (top): Apply `ignore' instead of `identity' for
byte-compiler pacification.

* texi/tramp.texi (Frequently Asked Questions): Remove Ange-FTP item.
Add Tramp disabling item.
----------------------------
revision 2.22.2.26
date: 2005-12-02 12:33:27 -0800;  author: albinus;  state: Exp;  lines: +0 -6;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.
----------------------------
revision 2.22.2.25
date: 2005-10-11 14:40:00 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* configure.ac: Bump version (to 2.0.52-pre).  Update merge
version to 2.0.51.

* Makefile.XEmacs (REQUIRES): Remove fsf-compat, add
sh-script (for executable-find).

* lisp/tramp.el: Require `timer-funcs' instead of `timer' if in
XEmacs.
----------------------------
revision 2.22.2.24
date: 2005-10-08 06:55:37 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

Version 2.0.51 released.
----------------------------
revision 2.22.2.23
date: 2005-08-28 12:00:31 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* configure.ac: Bump version (to 2.0.51-pre).  Update merge
version to 2.0.50.
----------------------------
revision 2.22.2.22
date: 2005-08-07 08:06:53 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

Version 2.0.50 released.

* configure.ac: Bump version.

* lisp/tramp.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-accept-process-output): New defun.
(tramp-process-one-action, tramp-process-one-multi-action)
(tramp-wait-for-regexp, tramp-wait-for-output)
(tramp-discard-garbage-erase-buffer): Call it.  Reported by David
Howells <dhowells@redhat.com>.
(clear-visited-file-modtime): Defadvice removed.  The check for
unset buffer's modtime does not need to be based on
`tramp-buffer-file-attributes'.  Suggested by RMS.

* lisp/tramp-smb.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-smb-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-smb-wait-for-output): Call `tramp-accept-process-output'.
----------------------------
revision 2.22.2.21
date: 2005-07-10 14:36:47 -0700;  author: albinus;  state: Exp;  lines: +4 -4;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.22.2.20
date: 2005-05-14 08:21:27 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


Version 2.0.49 released.

* configure.ac: Bump version.
----------------------------
revision 2.22.2.19
date: 2005-04-03 09:48:45 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* configure.ac: Bump version (to 2.0.49-pre).  Update merge
version to 2.0.48.

* lisp/tramp.el (tramp-set-auto-save): Actions should be done for Tramp
file name handler only.  Ange-FTP has its own auto-save mechanism.
Reported by Richard G. Bielawski <Richard.G.Bielawski@wellsfargo.com>.
(tramp-bug): Remove obsolete variable.
(tramp-append-tramp-buffers): Rewrite partly.  More suitable check
for presence of `mml-mode'.  Make it running for older Emacsen as
well.
----------------------------
revision 2.22.2.18
date: 2005-03-20 11:16:32 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

Version 2.0.48 released.

* configure.ac: Bump version.

* Makefile.in (FTP_UPLOAD): Change upload address to
"ftp://ftp-upload.gnu.org/incoming/ftp".
(tar): Handle "$(TARNAME).tar.gz.directive".
----------------------------
revision 2.22.2.17
date: 2005-02-02 14:08:21 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* configure.ac: Bump version (to 2.0.48-pre).  Update merge
version to 2.0.47.  Change bug report address to
[tramp-devel@gnu.org].

* lisp/tramp.el (tramp-file-name-for-operation) Use 'shell-command but
'shell.  Cut'n'waste error.  Reported by Vincent Bernat
<bernat@free.fr>.

* texi/tramp.texi (all): Change all addresses to .gnu.org.
----------------------------
revision 2.22.2.16
date: 2005-01-16 03:36:04 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

Version 2.0.47 released.
----------------------------
revision 2.22.2.15
date: 2004-12-30 01:33:45 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* aclocal.m4, configure.ac: grep(1) on OpenBSD 3.6 does not
understand the '-' option.  Small change.  From Ryan Yeske
<rcyeske@gmail.com>.
----------------------------
revision 2.22.2.14
date: 2004-12-23 16:00:48 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* configure.ac: Bump version (to 2.0.47-pre).  Update merge
version to 2.0.46.

* lisp/tramp.el (tramp-file-name-for-operation): Mark `shell-command'
as magic for Emacs only.
(tramp-wait-for-output): Fix error in deleting region.  From Kai
Grossjohann <kai.grossjohann@gmx.net>.

* lisp/tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
(tramp-vc-simple-command): Call `tramp-handle-shell-command' but
`shell-command', because it isn't magic in XEmacs.  Reported by
Adrian Aichner <adrian@xemacs.org>.
----------------------------
revision 2.22.2.13
date: 2004-12-23 02:58:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* configure.ac: Bump version (to 2.0.47-pre).

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`substitute-in-file-name.
(tramp-smb-handle-substitute-in-file-name): New defun.
(tramp-smb-advice-PC-do-completion): Delete advice.

Sync with trunk (Michael Albinus <michael.albinus@gmx.de>).

* lisp/tramp.el (tramp-handle-file-newer-than-file-p): Reverse logic.
From Andrew J. Korty <ajk@iu.edu>.
----------------------------
revision 2.22.2.12
date: 2004-12-16 06:11:07 -0800;  author: albinus;  state: Exp;  lines: +1 -1;


Version 2.0.46 released.
----------------------------
revision 2.22.2.11
date: 2004-10-14 14:13:21 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


* configure.ac: Bump version (to 2.0.46-pre).  Update merge
version to 2.0.45.

* texi/trampver.texi.in (top): Set default value of `emacs' or `xemacs'
derived from @EMACS_INFO@.  This simplifies synchronizing with
XEmacs CVS.
----------------------------
revision 2.22.2.10
date: 2004-10-12 13:37:18 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


Version 2.0.45 released.

* configure.ac: Bump version.

* lisp/tramp-smb.el
(tramp-smb-advice-PC-do-completion): Don't activate
advice during definition.  This is done later on, depending on
test result of `substitute-in-file-name'.  Suggested by Stefan
Monnier <monnier@iro.umontreal.ca>.
----------------------------
revision 2.22.2.9
date: 2004-09-11 13:54:49 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


* configure.ac: Bump version (to 2.0.45-pre).  Update merge
version to 2.0.44.
----------------------------
revision 2.22.2.8
date: 2004-08-10 13:25:06 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


Version 2.0.44 released.

* configure.ac: Bump version.
----------------------------
revision 2.22.2.7
date: 2004-07-17 10:19:19 -0700;  author: kai;  state: Exp;  lines: +2 -2;
Missed to add a release changelog entry.

* Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.

* configure.ac: Bump version (to 2.0.44-pre).  Update merge
version to 2.0.43.
----------------------------
revision 2.22.2.6
date: 2004-07-13 12:29:52 -0700;  author: albinus;  state: Exp;  lines: +18 -14;


Sync with trunk.
----------------------------
revision 2.22.2.5
date: 2004-06-26 08:10:22 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Release 2.0.42.
----------------------------
revision 2.22.2.4
date: 2004-05-29 15:52:50 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


* configure.ac: Bump version (to 2.0.42-pre) and set
TRAMP_EMACS_MERGE_VERSION (to 2.0.41).
----------------------------
revision 2.22.2.3
date: 2004-05-29 14:40:48 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


Version 2.0.41 released.

Sync with trunk
----------------------------
revision 2.22.2.2
date: 2004-05-29 04:59:55 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Use "-pre" suffix on CVS versions.
----------------------------
revision 2.22.2.1
date: 2004-05-07 14:37:37 -0700;  author: kai;  state: Exp;  lines: +6 -1;
Merge from trunk:

* configure.ac: Bump version (to 2.0.41) and set the
last-merged-with-Emacs version (to 2.0.40).  Hm.  The version bump
to 2.0.41 is probably bogus, we want to create a stable
branch...  Argh.

* Makefile.in (emacs): Don't patch man/trampver.texi in the Emacs
repository, just copy texi/trampver.texi there.  We can't run
"cvs diff" on texi/trampver.texi since it is a generated file, so
our patching trick won't work for this file.

* configure.ac (TRAMP_EMACS_MERGE_VERSION): New variable,
indicating which was the last revision of Tramp that was merged
into Emacs.  Don't forget to update this after running "make
emacs" (or "gmake emacs")!

* Makefile.in (EMACS_EL_FILES): Mention files explicitly to make
sure that tramp-efs.el is not included.
(EMACS_TEXI_FILES): New variable, lists manual files that need to
be merged with the Emacs repository.
(TRAMP_EMACS_MERGE_VERSION, TRAMP_EMACS_MERGE_TAG): New
variables, indicating which was the last revision of Tramp that
was merged into Emacs.  Automatically set by configure, original
is in configure.ac.
(emacs): Reword to use patches instead of copying the files.
This helps to make sure that changes to Tramp files in the Emacs
repository aren't overwritten.
----------------------------
revision 2.82.2.1
date: 2010-10-20 23:15:50 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: ho7z9k5WMCZI2hTu;
* configure.ac: Bump version (to 2.1.20-pre).  Update merge
version to 2.1.19.

* Makefile.in (cvstag): Use -F.
=============================================================================

RCS file: /sources/tramp/tramp/package-info.in,v
Working file: package-info.in
head: 2.2
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.2
	branch-2-1-stable: 2.2.0.2
	branchpoint-2-1-stable: 2.2
	V-2-1-19: 2.2
	V-2-1-18: 2.2
	V-2-1-17: 2.2
	V-2-1-16: 2.2
	V-2-1-15: 2.2
	V-2-1-14: 2.2
	V-2-1-13: 2.2
	V-2-0-57: 2.1.6.1
	V-2-1-12: 2.2
	V-2-1-11: 2.2
	V-2-1-10: 2.2
	V-2-0-56: 2.1.6.1
	V-2-1-9: 2.2
	V-2-1-8: 2.2
	V-2-0-55: 2.1.6.1
	V-2-1-7: 2.2
	V-2-0-54: 2.1.6.1
	V-2-1-6: 2.2
	V-2-0-53: 2.1.6.1
	V-2-0-52: 2.1.6.1
	V-2-1-5: 2.2
	V-2-1-4: 2.2
	V-2-0-51: 2.1.6.1
	V-2-0-50: 2.1.6.1
	V-2-0-49: 2.1.6.1
	V-2-0-48: 2.1.6.1
	V-2-1-3: 2.2
	V-2-0-47: 2.1.6.1
	V-2-0-46: 2.1.6.1
	V-2-0-45: 2.1
	V-2-1-2: 2.1
	V-2-0-44: 2.1
	V-2-1-1: 2.1
	V-2-0-43: 2.1
	V-2-0-42: 2.1
	V-2-0-41: 2.1
	V-2-1-0: 2.1
	branch-2-0-stable: 2.1.0.6
	branchpoint-2-0-stable: 2.1
	V-2-0-40: 2.1
	V-2-0-39: 2.1
	V-2-0-38: 2.1
	V-2-0-37: 2.1
	V-2-0-36: 2.1
	V-2-0-35: 2.1
	V-2-0-34: 2.1
	V-2-0-33: 2.1
	V-2-0-32: 2.1
	V-2-0-30: 2.1
	V-2-0-29: 2.1
	V-2-0-28: 2.1
	V-2-0-27: 2.1
	V-2-0-26: 2.1
	V-2-0-25: 2.1
	V-2-0-24: 2.1
	V-2-0-23: 2.1
	V-2-0-22: 2.1
	V-2-0-21: 2.1
	V-2-0-20: 2.1
	V-2-0-19: 2.1
	V-2-0-18: 2.1
	V-2-0-17: 2.1
	V-2-0-16: 2.1
	V-2-0-15: 2.1
	V-2-0-14: 2.1
	V-2-0-13: 2.1
	completion: 2.1.0.4
	V-2-0-12: 2.1
	V-2-0-11: 2.1
	V-2-0-10: 2.1
	V-2-0-9: 2.1
	V-2-0-8: 2.1
	V-2-0-7: 2.1
	V-2-0-6: 2.1
	V-2-0-5: 2.1
	V-2-0-4: 2.1
	V-2-0-3: 2.1
	V-2-0-1: 2.1
	EMACS-21: 2.1
	V-2-0-0: 2.1
	tramp-xemacs-pkg: 2.1.0.2
keyword substitution: kv
total revisions: 3;	selected revisions: 3
description:
----------------------------
revision 2.2
date: 2004-10-17 09:33:30 -0700;  author: albinus;  state: Exp;  lines: +2 -1;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.1
date: 2001-12-06 02:46:02 -0800;  author: kaig;  state: Exp;
branches:  2.1.6;
Make it work inside XEmacs, too.  From Stephen
J. Turnbull <stephen@xemacs.org>.
----------------------------
revision 2.1.6.1
date: 2004-10-17 09:03:17 -0700;  author: albinus;  state: Exp;  lines: +2 -1;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
=============================================================================

RCS file: /sources/tramp/tramp/test.makefile,v
Working file: test.makefile
head: 2.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.1
	branch-2-1-stable: 2.1.0.4
	branchpoint-2-1-stable: 2.1
	V-2-1-19: 2.1
	V-2-1-18: 2.1
	V-2-1-17: 2.1
	V-2-1-16: 2.1
	V-2-1-15: 2.1
	V-2-1-14: 2.1
	V-2-1-13: 2.1
	V-2-0-57: 2.1
	V-2-1-12: 2.1
	V-2-1-11: 2.1
	V-2-1-10: 2.1
	V-2-0-56: 2.1
	V-2-1-9: 2.1
	V-2-1-8: 2.1
	V-2-0-55: 2.1
	V-2-1-7: 2.1
	V-2-0-54: 2.1
	V-2-1-6: 2.1
	V-2-0-53: 2.1
	V-2-0-52: 2.1
	V-2-1-5: 2.1
	V-2-1-4: 2.1
	V-2-0-51: 2.1
	V-2-0-50: 2.1
	V-2-0-49: 2.1
	V-2-0-48: 2.1
	V-2-1-3: 2.1
	V-2-0-47: 2.1
	V-2-0-46: 2.1
	V-2-0-45: 2.1
	V-2-1-2: 2.1
	V-2-0-44: 2.1
	V-2-1-1: 2.1
	V-2-0-43: 2.1
	V-2-0-42: 2.1
	V-2-0-41: 2.1
	V-2-1-0: 2.1
	branch-2-0-stable: 2.1.0.2
	branchpoint-2-0-stable: 2.1
	V-2-0-40: 2.1
	V-2-0-39: 2.1
	V-2-0-38: 2.1
	V-2-0-37: 2.1
	V-2-0-36: 2.1
keyword substitution: kv
total revisions: 1;	selected revisions: 1
description:
----------------------------
revision 2.1
date: 2003-07-14 14:38:14 -0700;  author: albinus;  state: Exp;

* aclocal.m4 (AC_EMACS_INFO): Fix typo.

* configure.ac: Add a check for suitable make version.
Reported by Sven Utcke <utcke@informatik.uni-hamburg.de>.

* test.makefile: New file.  Used for checking proper "make"
version.

* lisp/Makefile.in (LISP_FILES): New variable.  Used to distinguish
collection of *.el files for Emacs and XEmacs.
Reported by Sven Utcke <utcke@informatik.uni-hamburg.de>.
(EM): Use `-vanilla' option for XEmacs call.
(all): depend on $(LISP_FILES).
=============================================================================

RCS file: /sources/tramp/tramp/contrib/.cvsignore,v
Working file: contrib/.cvsignore
head: 1.2
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.2
	branch-2-1-stable: 1.2.0.4
	branchpoint-2-1-stable: 1.2
	V-2-1-19: 1.2
	V-2-1-18: 1.2
	V-2-1-17: 1.2
	V-2-1-16: 1.2
	V-2-1-15: 1.2
	V-2-1-14: 1.2
	V-2-1-13: 1.2
	V-2-0-57: 1.2
	V-2-1-12: 1.2
	V-2-1-11: 1.2
	V-2-1-10: 1.2
	V-2-0-56: 1.2
	V-2-1-9: 1.2
	V-2-1-8: 1.2
	V-2-0-55: 1.2
	V-2-1-7: 1.2
	V-2-0-54: 1.2
	V-2-1-6: 1.2
	V-2-0-53: 1.2
	V-2-0-52: 1.2
	V-2-1-5: 1.2
	V-2-1-4: 1.2
	V-2-0-51: 1.2
	V-2-0-50: 1.2
	V-2-0-49: 1.2
	V-2-0-48: 1.2
	V-2-1-3: 1.2
	V-2-0-47: 1.2
	V-2-0-46: 1.2
	V-2-0-45: 1.2
	V-2-1-2: 1.2
	V-2-0-44: 1.2
	V-2-1-1: 1.2
	V-2-0-43: 1.2
	V-2-0-42: 1.2
	V-2-0-41: 1.2
	V-2-1-0: 1.2
	branch-2-0-stable: 1.2.0.2
	branchpoint-2-0-stable: 1.2
	V-2-0-40: 1.2
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.2
date: 2004-03-14 08:46:25 -0800;  author: kai;  state: Exp;  lines: +1 -0;
Ignore some more files.
----------------------------
revision 1.1
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;

Makefiles rewritten.  See ChangeLogs for details.
=============================================================================

RCS file: /sources/tramp/tramp/contrib/ChangeLog,v
Working file: contrib/ChangeLog
head: 1.17
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.17
	branch-2-1-stable: 1.17.0.2
	branchpoint-2-1-stable: 1.17
	V-2-1-19: 1.17
	V-2-1-18: 1.17
	V-2-1-17: 1.17
	V-2-1-16: 1.17
	V-2-1-15: 1.17
	V-2-1-14: 1.17
	V-2-1-13: 1.16
	V-2-0-57: 1.9.2.5
	V-2-1-12: 1.15
	V-2-1-11: 1.15
	V-2-1-10: 1.13
	V-2-0-56: 1.9.2.4
	V-2-1-9: 1.12
	V-2-1-8: 1.11
	V-2-0-55: 1.9.2.4
	V-2-1-7: 1.11
	V-2-0-54: 1.9.2.4
	V-2-1-6: 1.11
	V-2-0-53: 1.9.2.4
	V-2-0-52: 1.9.2.3
	V-2-1-5: 1.10
	V-2-1-4: 1.10
	V-2-0-51: 1.9.2.3
	V-2-0-50: 1.9.2.3
	V-2-0-49: 1.9.2.2
	V-2-0-48: 1.9.2.2
	V-2-1-3: 1.9
	V-2-0-47: 1.9.2.2
	V-2-0-46: 1.9.2.2
	V-2-0-45: 1.9.2.2
	V-2-1-2: 1.9
	V-2-0-44: 1.9.2.2
	V-2-1-1: 1.9
	V-2-0-43: 1.9.2.1
	V-2-0-42: 1.9.2.1
	V-2-0-41: 1.9
	V-2-1-0: 1.9
	branch-2-0-stable: 1.9.0.2
	branchpoint-2-0-stable: 1.9
	V-2-0-40: 1.9
	V-2-0-39: 1.6
	V-2-0-38: 1.4
	V-2-0-37: 1.4
	V-2-0-36: 1.4
	V-2-0-35: 1.4
	V-2-0-34: 1.3
	V-2-0-33: 1.3
	V-2-0-32: 1.3
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
keyword substitution: kv
total revisions: 22;	selected revisions: 22
description:
----------------------------
revision 1.17
date: 2008-05-13 14:21:33 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: MOXKsAniEXe8HQ2t;
*** empty log message ***
----------------------------
revision 1.16
date: 2008-01-12 03:04:22 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 1.15
date: 2007-09-28 08:52:02 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 1.14
date: 2007-07-29 08:09:36 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 1.13
date: 2007-07-01 11:31:33 -0700;  author: albinus;  state: Exp;  lines: +15 -0;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.12
date: 2007-04-06 10:37:52 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* contrib/socks.el: New file, needed for socks server support in
tramp-gw.el.  Taken from w3.

* contrib/README: Add socks.el.
----------------------------
revision 1.11
date: 2006-03-14 13:40:09 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

DESTDIR support
----------------------------
revision 1.10
date: 2005-06-26 12:45:08 -0700;  author: albinus;  state: Exp;  lines: +6 -1;

* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fourth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in: Adapt email addresses.
----------------------------
revision 1.9
date: 2004-05-02 09:38:39 -0700;  author: kai;  state: Exp;  lines: +4 -0;
branches:  1.9.2;
* aclocal.m4 (AC_CONTRIB_FILES): Load the library in question
before invoking fboundp on the function searched.

* configure.ac: Bump version.
----------------------------
revision 1.8
date: 2004-03-14 12:59:18 -0800;  author: albinus;  state: Exp;  lines: +4 -0;


* INSTALL: Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.

* Makefile.in: Don't check for $(USE_CONTRIB) any longer.
(xemacs): Use ""$(MAKE)" instead of "make".
(emacs): Use "--with-emacs" configure option.
(savannah): Use "ftp-upload" instead of "scp".  Hope it works for
Kai.

* aclocal.m4 (AC_EMACS_LISP): Use "-vanilla" in case of XEmacs.
(AC_CONTRIB_FILES): New function.  Checks for the need of
provisioning of a contributed package.

* configure.ac: Apply `AC_CONTRIB_FILES' for all Lisp files of
contrib directory.

* contrib/README: Clarify run-at-time.el.

* lisp/Makefile.in: New environment variables $(CONTRIB_FILES) and
$(INSTALL_FILES).  Don't check for $(USE_CONTRIB) any longer.
(all): Depends on $(CONTRIB_FILES), too.
(install): Copy $(INSTALL_FILES) but $?.
(distclean): Remove also $(CONTRIB_FILES).

* texi/Makefile.in (savannah): Simplify copy command.

* texi/trampinst.texi (Installation, Installation parameters)
(Load paths): Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.
----------------------------
revision 1.7
date: 2004-03-05 12:03:32 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

----------------------------------------------------------------------
contrib/ChangeLog contrib/README CVS: Added Files: CVS:
contrib/run-at-time.el CVS:
----------------------------------------------------------------------
* contrib/run-at-time.el: New file, needed for password.el in
XEmacs case. Taken from No Gnus.  Reported by Adrian Phillips
<a.phillips@met.no>.

* contrib/README: Add decriptions for password.el and run-at-time.el.
----------------------------
revision 1.6
date: 2004-02-29 05:37:34 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.39 released.
----------------------------
revision 1.5
date: 2004-02-29 05:29:07 -0800;  author: albinus;  state: Exp;  lines: +4 -1;


* lisp/tramp.el (top-level): Require password.el if visible.  Should be
mandatory once No Gnus has found its way into (X)Emacs.
(tramp-read-passwd): Invoke `password-read' if available,
`read-passwd' otherwise. `ange-ftp-read-passwd' isn't used as
fallback any longer.
(tramp-clear-passwd): New function.
(tramp-process-actions, tramp-process-multi-actions): Clear
password cache if login has failed.

* lisp/tramp-smb.el (tramp-smb-open-connection): Clear password cache
if login has failed.

* texi/tramp.texi (all): Use "@value{emacs-name}" everywhere where it
is intended (some accidents of last fix corrected).
(Password caching): New node.
(External transfer methods): Refer to password caching for "smb"
method.

* contrib/password.el: New file.  Taken from No Gnus.
----------------------------
revision 1.4
date: 2003-05-24 15:41:01 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* Makefile.in (configure): It depends on "aclocal.m4", too.

* aclocal.m4, lisp/Makefile.in, contrib/Makefile.in: Use
`--no-site-file' option for Emacs call, in order to avoid loading of
Tramp in site specific init files.  Reported by Harry Putnam
<reader@newsguy.com>.

* lisp/Makefile.in (.PHONY): New target.
(all): "trampver.el" and "tramp.el" must be handled first due to
dependencies.

* lisp/tramp.el (tramp-completion-function-alist): Add completion
function for "remcp", "remsh" and "plink1".

* texi/tramp.texi (Inline methods): Add methods `remsh' and `plink1'.
(External transfer methods): Add method `remcp'.
(Multi-hop Methods): Add method `remsh'.
----------------------------
revision 1.3
date: 2003-03-30 12:09:35 -0800;  author: kai;  state: Exp;  lines: +4 -0;
(xemacs, emacs): Copy trampver.texi, too.
----------------------------
revision 1.2
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;  lines: +14 -0;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 1.1
date: 2002-11-02 10:14:52 -0800;  author: kai;  state: Exp;
New file.
----------------------------
revision 1.9.2.5
date: 2007-07-25 12:37:29 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 1.9.2.4
date: 2006-03-14 13:15:56 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

DESTDIR support
----------------------------
revision 1.9.2.3
date: 2005-06-26 12:23:34 -0700;  author: albinus;  state: Exp;  lines: +6 -1;


* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fifth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in:
----------------------------
revision 1.9.2.2
date: 2004-07-17 10:19:25 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Missed to add a release changelog entry.

* Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.

* configure.ac: Bump version (to 2.0.44-pre).  Update merge
version to 2.0.43.
----------------------------
revision 1.9.2.1
date: 2004-06-26 08:08:32 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Release 2.0.42.
=============================================================================

RCS file: /sources/tramp/tramp/contrib/Attic/Makefile,v
Working file: contrib/Makefile
head: 1.3
branch:
locks: strict
access list:
symbolic names:
	V-2-0-30: 1.2
	V-2-0-29: 1.2
	V-2-0-28: 1.2
	V-2-0-27: 1.2
	V-2-0-26: 1.2
	V-2-0-25: 1.2
	V-2-0-24: 1.2
	V-2-0-23: 1.2
	V-2-0-22: 1.2
	V-2-0-21: 1.2
	V-2-0-20: 1.2
	V-2-0-19: 1.2
	V-2-0-18: 1.2
	V-2-0-17: 1.2
	V-2-0-16: 1.2
	V-2-0-15: 1.2
	V-2-0-14: 1.2
	V-2-0-13: 1.2
	completion: 1.2.0.2
	V-2-0-12: 1.2
	V-2-0-11: 1.2
	V-2-0-10: 1.2
	V-2-0-9: 1.2
	V-2-0-8: 1.2
	V-2-0-7: 1.2
	V-2-0-6: 1.2
	V-2-0-5: 1.2
	V-2-0-4: 1.2
	V-2-0-3: 1.2
	V-2-0-1: 1.2
	EMACS-21: 1.2
	V-2-0-0: 1.2
	tramp-xemacs-pkg: 1.1.0.2
keyword substitution: kv
total revisions: 4;	selected revisions: 4
description:
----------------------------
revision 1.3
date: 2003-03-22 08:52:55 -0800;  author: albinus;  state: dead;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 1.2
date: 2002-01-02 05:55:15 -0800;  author: kaig;  state: Exp;  lines: +6 -1;
(clean): Add target.
(all): Ditto.
----------------------------
revision 1.1
date: 2001-12-06 04:18:12 -0800;  author: kaig;  state: Exp;
branches:  1.1.2;
New directory for code which is not part of Tramp.
----------------------------
revision 1.1.2.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +1 -1;
Removing files not needed for XEmacs package
=============================================================================

RCS file: /sources/tramp/tramp/contrib/Makefile.in,v
Working file: contrib/Makefile.in
head: 1.13
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.12
	branch-2-1-stable: 1.12.0.2
	branchpoint-2-1-stable: 1.12
	V-2-1-19: 1.12
	V-2-1-18: 1.12
	V-2-1-17: 1.12
	V-2-1-16: 1.12
	V-2-1-15: 1.12
	V-2-1-14: 1.12
	V-2-1-13: 1.11
	V-2-0-57: 1.2.2.4
	V-2-1-12: 1.8
	V-2-1-11: 1.8
	V-2-1-10: 1.6
	V-2-0-56: 1.2.2.3
	V-2-1-9: 1.4
	V-2-1-8: 1.4
	V-2-0-55: 1.2.2.3
	V-2-1-7: 1.4
	V-2-0-54: 1.2.2.3
	V-2-1-6: 1.4
	V-2-0-53: 1.2.2.3
	V-2-0-52: 1.2.2.2
	V-2-1-5: 1.3
	V-2-1-4: 1.3
	V-2-0-51: 1.2.2.2
	V-2-0-50: 1.2.2.2
	V-2-0-49: 1.2
	V-2-0-48: 1.2
	V-2-1-3: 1.2
	V-2-0-47: 1.2
	V-2-0-46: 1.2
	V-2-0-45: 1.2
	V-2-1-2: 1.2
	V-2-0-44: 1.2
	V-2-1-1: 1.2
	V-2-0-43: 1.2
	V-2-0-42: 1.2
	V-2-0-41: 1.2
	V-2-1-0: 1.2
	branch-2-0-stable: 1.2.0.2
	branchpoint-2-0-stable: 1.2
	V-2-0-40: 1.2
	V-2-0-39: 1.2
	V-2-0-38: 1.2
	V-2-0-37: 1.2
	V-2-0-36: 1.2
	V-2-0-35: 1.2
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
keyword substitution: kv
total revisions: 17;	selected revisions: 17
description:
----------------------------
revision 1.13
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 1.12
date: 2008-05-13 14:20:28 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: b6oJxkVzl1nLGQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 1.11
date: 2008-03-21 10:26:52 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: gmI0zdzYoLEf61Ws;
Fix up encoding.
----------------------------
revision 1.10
date: 2008-02-03 03:02:46 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: 9zEr9fzKgqX8uWPs;
*** empty log message ***
----------------------------
revision 1.9
date: 2008-01-12 03:04:22 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 1.8
date: 2007-09-28 08:52:02 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 1.7
date: 2007-07-29 08:09:36 -0700;  author: albinus;  state: Exp;  lines: +6 -5;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 1.6
date: 2007-07-01 22:09:50 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 1.5
date: 2007-07-01 11:31:33 -0700;  author: albinus;  state: Exp;  lines: +6 -7;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.4
date: 2006-03-14 13:40:09 -0800;  author: albinus;  state: Exp;  lines: +6 -3;

DESTDIR support
----------------------------
revision 1.3
date: 2005-06-26 12:45:08 -0700;  author: albinus;  state: Exp;  lines: +3 -3;

* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fourth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in: Adapt email addresses.
----------------------------
revision 1.2
date: 2003-05-24 15:41:01 -0700;  author: albinus;  state: Exp;  lines: +1 -1;
branches:  1.2.2;

* Makefile.in (configure): It depends on "aclocal.m4", too.

* aclocal.m4, lisp/Makefile.in, contrib/Makefile.in: Use
`--no-site-file' option for Emacs call, in order to avoid loading of
Tramp in site specific init files.  Reported by Harry Putnam
<reader@newsguy.com>.

* lisp/Makefile.in (.PHONY): New target.
(all): "trampver.el" and "tramp.el" must be handled first due to
dependencies.

* lisp/tramp.el (tramp-completion-function-alist): Add completion
function for "remcp", "remsh" and "plink1".

* texi/tramp.texi (Inline methods): Add methods `remsh' and `plink1'.
(External transfer methods): Add method `remcp'.
(Multi-hop Methods): Add method `remsh'.
----------------------------
revision 1.1
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 1.2.2.4
date: 2007-07-25 12:37:29 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 1.2.2.3
date: 2006-03-14 13:15:57 -0800;  author: albinus;  state: Exp;  lines: +4 -1;

DESTDIR support
----------------------------
revision 1.2.2.2
date: 2005-07-10 14:36:47 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 1.2.2.1
date: 2005-06-26 12:23:35 -0700;  author: albinus;  state: Exp;  lines: +3 -3;


* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fifth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in:
=============================================================================

RCS file: /sources/tramp/tramp/contrib/README,v
Working file: contrib/README
head: 1.9
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.9
	branch-2-1-stable: 1.9.0.2
	branchpoint-2-1-stable: 1.9
	V-2-1-19: 1.9
	V-2-1-18: 1.9
	V-2-1-17: 1.9
	V-2-1-16: 1.9
	V-2-1-15: 1.9
	V-2-1-14: 1.9
	V-2-1-13: 1.9
	V-2-0-57: 1.6.2.1
	V-2-1-12: 1.9
	V-2-1-11: 1.9
	V-2-1-10: 1.9
	V-2-0-56: 1.6.2.1
	V-2-1-9: 1.8
	V-2-1-8: 1.7
	V-2-0-55: 1.6.2.1
	V-2-1-7: 1.7
	V-2-0-54: 1.6.2.1
	V-2-1-6: 1.7
	V-2-0-53: 1.6.2.1
	V-2-0-52: 1.6.2.1
	V-2-1-5: 1.7
	V-2-1-4: 1.7
	V-2-0-51: 1.6.2.1
	V-2-0-50: 1.6.2.1
	V-2-0-49: 1.6
	V-2-0-48: 1.6
	V-2-1-3: 1.6
	V-2-0-47: 1.6
	V-2-0-46: 1.6
	V-2-0-45: 1.6
	V-2-1-2: 1.6
	V-2-0-44: 1.6
	V-2-1-1: 1.6
	V-2-0-43: 1.6
	V-2-0-42: 1.6
	V-2-0-41: 1.6
	V-2-1-0: 1.6
	branch-2-0-stable: 1.6.0.2
	branchpoint-2-0-stable: 1.6
	V-2-0-40: 1.6
	V-2-0-39: 1.4
	V-2-0-38: 1.4
	V-2-0-37: 1.4
	V-2-0-36: 1.4
	V-2-0-35: 1.4
	V-2-0-34: 1.4
	V-2-0-33: 1.4
	V-2-0-32: 1.4
	V-2-0-30: 1.4
	V-2-0-29: 1.4
	V-2-0-28: 1.4
	V-2-0-27: 1.4
	V-2-0-26: 1.4
	V-2-0-25: 1.2
	V-2-0-24: 1.2
	V-2-0-23: 1.2
	V-2-0-22: 1.2
	V-2-0-21: 1.2
	V-2-0-20: 1.2
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.4
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.2
keyword substitution: kv
total revisions: 11;	selected revisions: 11
description:
----------------------------
revision 1.9
date: 2007-07-01 11:31:33 -0700;  author: albinus;  state: Exp;  lines: +3 -26;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.8
date: 2007-04-06 10:37:52 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* contrib/socks.el: New file, needed for socks server support in
tramp-gw.el.  Taken from w3.

* contrib/README: Add socks.el.
----------------------------
revision 1.7
date: 2005-06-26 12:45:08 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fourth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in: Adapt email addresses.
----------------------------
revision 1.6
date: 2004-03-14 12:59:18 -0800;  author: albinus;  state: Exp;  lines: +0 -1;
branches:  1.6.2;


* INSTALL: Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.

* Makefile.in: Don't check for $(USE_CONTRIB) any longer.
(xemacs): Use ""$(MAKE)" instead of "make".
(emacs): Use "--with-emacs" configure option.
(savannah): Use "ftp-upload" instead of "scp".  Hope it works for
Kai.

* aclocal.m4 (AC_EMACS_LISP): Use "-vanilla" in case of XEmacs.
(AC_CONTRIB_FILES): New function.  Checks for the need of
provisioning of a contributed package.

* configure.ac: Apply `AC_CONTRIB_FILES' for all Lisp files of
contrib directory.

* contrib/README: Clarify run-at-time.el.

* lisp/Makefile.in: New environment variables $(CONTRIB_FILES) and
$(INSTALL_FILES).  Don't check for $(USE_CONTRIB) any longer.
(all): Depends on $(CONTRIB_FILES), too.
(install): Copy $(INSTALL_FILES) but $?.
(distclean): Remove also $(CONTRIB_FILES).

* texi/Makefile.in (savannah): Simplify copy command.

* texi/trampinst.texi (Installation, Installation parameters)
(Load paths): Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.
----------------------------
revision 1.5
date: 2004-03-05 12:03:32 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

----------------------------------------------------------------------
contrib/ChangeLog contrib/README CVS: Added Files: CVS:
contrib/run-at-time.el CVS:
----------------------------------------------------------------------
* contrib/run-at-time.el: New file, needed for password.el in
XEmacs case. Taken from No Gnus.  Reported by Adrian Phillips
<a.phillips@met.no>.

* contrib/README: Add decriptions for password.el and run-at-time.el.
----------------------------
revision 1.4
date: 2002-11-03 14:34:54 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

tramp.el (tramp-handle-insert-file-contents): Use Emacs file
name primitives instead of calling tramp-handle-* equivalents
directly.  Needed for tramp-smb.

tramp-smb.el: First usefull version.  Directory traversing and
file displaying work.
----------------------------
revision 1.3
date: 2002-11-02 10:14:52 -0800;  author: kai;  state: Exp;  lines: +5 -0;
New file.
----------------------------
revision 1.2
date: 2002-09-16 12:25:08 -0700;  author: kai;  state: Exp;  lines: +4 -0;
* contrib/README: Explain uudecode.el.

* contrib/uudecode.el: New file.
----------------------------
revision 1.1
date: 2001-12-06 04:34:38 -0800;  author: kaig;  state: Exp;
branches:  1.1.2;
Make it work inside XEmacs, too.  From Stephen
J. Turnbull <stephen@xemacs.org>.
(MANIFEST): New directory layout.
----------------------------
revision 1.1.2.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +0 -0;
Removing files not needed for XEmacs package
----------------------------
revision 1.6.2.1
date: 2005-06-26 12:23:35 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fifth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in:
=============================================================================

RCS file: /sources/tramp/tramp/contrib/Attic/base64.el,v
Working file: contrib/base64.el
head: 1.2
branch:
locks: strict
access list:
symbolic names:
	V-2-0-57: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.6
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.4
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.2
keyword substitution: kv
total revisions: 3;	selected revisions: 3
description:
----------------------------
revision 1.2
date: 2007-07-01 11:31:33 -0700;  author: albinus;  state: dead;  lines: +0 -0;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.1
date: 2001-12-06 04:18:12 -0800;  author: kaig;  state: Exp;
branches:  1.1.2;
New directory for code which is not part of Tramp.
----------------------------
revision 1.1.2.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +0 -0;
Removing files not needed for XEmacs package
=============================================================================

RCS file: /sources/tramp/tramp/contrib/Attic/dir_sample,v
Working file: contrib/dir_sample
head: 1.2
branch:
locks: strict
access list:
symbolic names:
	V-2-0-57: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.4
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.2
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.2
date: 2007-07-01 11:31:33 -0700;  author: albinus;  state: dead;  lines: +0 -0;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.1
date: 2002-04-22 11:55:11 -0700;  author: kaig;  state: Exp;
*** empty log message ***
=============================================================================

RCS file: /sources/tramp/tramp/contrib/format-spec.el,v
Working file: contrib/format-spec.el
head: 1.4
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.4
	branch-2-1-stable: 1.4.0.2
	branchpoint-2-1-stable: 1.4
	V-2-1-19: 1.4
	V-2-1-18: 1.4
	V-2-1-17: 1.4
	V-2-1-16: 1.4
	V-2-1-15: 1.4
	V-2-1-14: 1.4
	V-2-1-13: 1.4
	V-2-0-57: 1.1.6.1
	V-2-1-12: 1.4
	V-2-1-11: 1.4
	V-2-1-10: 1.3
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.6
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.4
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.2
keyword substitution: kv
total revisions: 6;	selected revisions: 6
description:
----------------------------
revision 1.4
date: 2007-07-29 08:09:36 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 1.3
date: 2007-07-01 22:09:50 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 1.2
date: 2007-07-01 11:31:33 -0700;  author: albinus;  state: Exp;  lines: +20 -9;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.1
date: 2001-12-06 04:18:12 -0800;  author: kaig;  state: Exp;
branches:  1.1.2;  1.1.6;
New directory for code which is not part of Tramp.
----------------------------
revision 1.1.6.1
date: 2007-07-25 12:37:29 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 1.1.2.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +0 -0;
Removing files not needed for XEmacs package
=============================================================================

RCS file: /sources/tramp/tramp/contrib/Attic/md5.el,v
Working file: contrib/md5.el
head: 1.2
branch:
locks: strict
access list:
symbolic names:
	V-2-0-57: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.2
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.2
date: 2007-07-01 11:31:33 -0700;  author: albinus;  state: dead;  lines: +0 -0;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.1
date: 2002-11-02 10:14:52 -0800;  author: kai;  state: Exp;
New file.
=============================================================================

RCS file: /sources/tramp/tramp/contrib/password.el,v
Working file: contrib/password.el
head: 1.5
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.5
	branch-2-1-stable: 1.5.0.2
	branchpoint-2-1-stable: 1.5
	V-2-1-19: 1.5
	V-2-1-18: 1.5
	V-2-1-17: 1.5
	V-2-1-16: 1.5
	V-2-1-15: 1.5
	V-2-1-14: 1.5
	V-2-1-13: 1.4
	V-2-0-57: 1.1.2.1
	V-2-1-12: 1.4
	V-2-1-11: 1.4
	V-2-1-10: 1.3
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.2
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
keyword substitution: kv
total revisions: 6;	selected revisions: 6
description:
----------------------------
revision 1.5
date: 2008-05-13 14:21:55 -0700;  author: albinus;  state: Exp;  lines: +18 -25;  commitid: xEBIedSMCEhgHQ2t;
* password.el:
* socks.el: Synchronize with recent versions from their
repositories.
----------------------------
revision 1.4
date: 2007-07-29 08:09:36 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 1.3
date: 2007-07-01 22:09:50 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 1.2
date: 2007-07-01 11:31:33 -0700;  author: albinus;  state: Exp;  lines: +44 -16;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.1
date: 2004-02-29 05:29:07 -0800;  author: albinus;  state: Exp;
branches:  1.1.2;


* lisp/tramp.el (top-level): Require password.el if visible.  Should be
mandatory once No Gnus has found its way into (X)Emacs.
(tramp-read-passwd): Invoke `password-read' if available,
`read-passwd' otherwise. `ange-ftp-read-passwd' isn't used as
fallback any longer.
(tramp-clear-passwd): New function.
(tramp-process-actions, tramp-process-multi-actions): Clear
password cache if login has failed.

* lisp/tramp-smb.el (tramp-smb-open-connection): Clear password cache
if login has failed.

* texi/tramp.texi (all): Use "@value{emacs-name}" everywhere where it
is intended (some accidents of last fix corrected).
(Password caching): New node.
(External transfer methods): Refer to password caching for "smb"
method.

* contrib/password.el: New file.  Taken from No Gnus.
----------------------------
revision 1.1.2.1
date: 2007-07-25 12:37:30 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
=============================================================================

RCS file: /sources/tramp/tramp/contrib/Attic/run-at-time.el,v
Working file: contrib/run-at-time.el
head: 1.2
branch:
locks: strict
access list:
symbolic names:
	V-2-0-57: 1.1.2.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.2
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
keyword substitution: kv
total revisions: 3;	selected revisions: 3
description:
----------------------------
revision 1.2
date: 2007-07-01 11:31:33 -0700;  author: albinus;  state: dead;  lines: +0 -0;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.1
date: 2004-03-05 12:03:32 -0800;  author: albinus;  state: Exp;
branches:  1.1.2;

----------------------------------------------------------------------
contrib/ChangeLog contrib/README CVS: Added Files: CVS:
contrib/run-at-time.el CVS:
----------------------------------------------------------------------
* contrib/run-at-time.el: New file, needed for password.el in
XEmacs case. Taken from No Gnus.  Reported by Adrian Phillips
<a.phillips@met.no>.

* contrib/README: Add decriptions for password.el and run-at-time.el.
----------------------------
revision 1.1.2.1
date: 2007-07-25 12:37:30 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
=============================================================================

RCS file: /sources/tramp/tramp/contrib/socks.el,v
Working file: contrib/socks.el
head: 1.5
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.5
	branch-2-1-stable: 1.5.0.2
	branchpoint-2-1-stable: 1.5
	V-2-1-19: 1.5
	V-2-1-18: 1.5
	V-2-1-17: 1.5
	V-2-1-16: 1.5
	V-2-1-15: 1.5
	V-2-1-14: 1.5
	V-2-1-13: 1.4
	V-2-1-12: 1.4
	V-2-1-11: 1.4
	V-2-1-10: 1.3
	V-2-1-9: 1.1
keyword substitution: kv
total revisions: 5;	selected revisions: 5
description:
----------------------------
revision 1.5
date: 2008-05-13 14:22:15 -0700;  author: albinus;  state: Exp;  lines: +32 -33;  commitid: 2T5dOJ2Y2M5nHQ2t;
* password.el:
* socks.el: Synchronize with recent versions from their
repositories.
----------------------------
revision 1.4
date: 2007-07-29 08:09:36 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 1.3
date: 2007-07-01 22:09:50 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 1.2
date: 2007-07-01 11:31:34 -0700;  author: albinus;  state: Exp;  lines: +166 -170;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.1
date: 2007-04-06 10:37:52 -0700;  author: albinus;  state: Exp;

* contrib/socks.el: New file, needed for socks server support in
tramp-gw.el.  Taken from w3.

* contrib/README: Add socks.el.
=============================================================================

RCS file: /sources/tramp/tramp/contrib/tramp.spec,v
Working file: contrib/tramp.spec
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.4
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
	V-2-1-18: 1.1
	V-2-1-17: 1.1
	V-2-1-16: 1.1
	V-2-1-15: 1.1
	V-2-1-14: 1.1
	V-2-1-13: 1.1
	V-2-0-57: 1.1
	V-2-1-12: 1.1
	V-2-1-11: 1.1
	V-2-1-10: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.2
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
keyword substitution: kv
total revisions: 1;	selected revisions: 1
description:
----------------------------
revision 1.1
date: 2003-09-30 13:48:27 -0700;  author: kai;  state: Exp;
Build RPM package from Tramp with this.
=============================================================================

RCS file: /sources/tramp/tramp/contrib/Attic/uudecode.el,v
Working file: contrib/uudecode.el
head: 1.2
branch:
locks: strict
access list:
symbolic names:
	V-2-0-57: 1.1.2.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.2
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
keyword substitution: kv
total revisions: 3;	selected revisions: 3
description:
----------------------------
revision 1.2
date: 2007-07-01 11:31:34 -0700;  author: albinus;  state: dead;  lines: +0 -0;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.1
date: 2002-09-16 12:25:08 -0700;  author: kai;  state: Exp;
branches:  1.1.2;
* contrib/README: Explain uudecode.el.

* contrib/uudecode.el: New file.
----------------------------
revision 1.1.2.1
date: 2007-07-25 12:37:30 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/.cvsignore,v
Working file: lisp/.cvsignore
head: 2.5
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.5
	branch-2-1-stable: 2.4.0.4
	branchpoint-2-1-stable: 2.4
	V-2-1-19: 2.4
	V-2-1-18: 2.4
	V-2-1-17: 2.4
	V-2-1-16: 2.4
	V-2-1-15: 2.4
	V-2-1-14: 2.4
	V-2-1-13: 2.4
	V-2-0-57: 2.4
	V-2-1-12: 2.4
	V-2-1-11: 2.4
	V-2-1-10: 2.4
	V-2-0-56: 2.4
	V-2-1-9: 2.4
	V-2-1-8: 2.4
	V-2-0-55: 2.4
	V-2-1-7: 2.4
	V-2-0-54: 2.4
	V-2-1-6: 2.4
	V-2-0-53: 2.4
	V-2-0-52: 2.4
	V-2-1-5: 2.4
	V-2-1-4: 2.4
	V-2-0-51: 2.4
	V-2-0-50: 2.4
	V-2-0-49: 2.4
	V-2-0-48: 2.4
	V-2-1-3: 2.4
	V-2-0-47: 2.4
	V-2-0-46: 2.4
	V-2-0-45: 2.4
	V-2-1-2: 2.4
	V-2-0-44: 2.4
	V-2-1-1: 2.4
	V-2-0-43: 2.4
	V-2-0-42: 2.4
	V-2-0-41: 2.4
	V-2-1-0: 2.4
	branch-2-0-stable: 2.4.0.2
	branchpoint-2-0-stable: 2.4
	V-2-0-40: 2.4
	V-2-0-39: 2.3
	V-2-0-38: 2.3
	V-2-0-37: 2.3
	V-2-0-36: 2.3
	V-2-0-35: 2.3
	V-2-0-34: 2.3
	V-2-0-33: 2.3
	V-2-0-32: 2.3
	V-2-0-30: 2.2
	V-2-0-29: 2.2
	V-2-0-28: 2.2
	V-2-0-27: 2.2
	V-2-0-26: 2.2
	V-2-0-25: 2.2
	V-2-0-24: 2.2
	V-2-0-23: 2.2
	V-2-0-22: 2.2
	V-2-0-21: 2.2
	V-2-0-20: 2.2
	V-2-0-19: 2.2
	V-2-0-18: 2.2
	V-2-0-17: 2.2
	V-2-0-16: 2.2
	V-2-0-15: 2.2
	V-2-0-14: 2.2
	V-2-0-13: 2.2
	completion: 2.2.0.2
	V-2-0-12: 2.2
	V-2-0-11: 2.2
	V-2-0-10: 2.2
	V-2-0-9: 2.2
	V-2-0-8: 2.2
	V-2-0-7: 2.2
	V-2-0-6: 2.2
	V-2-0-5: 2.2
	V-2-0-4: 2.2
keyword substitution: kv
total revisions: 5;	selected revisions: 5
description:
----------------------------
revision 2.5
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.4
date: 2004-03-01 23:24:45 -0800;  author: kai;  state: Exp;  lines: +1 -0;
(tramp-completion-mode, tramp-md5-function): Use
symbol-function to invoke functions only known on some Emacs
flavors.  This avoids byte-compiler warnings.  Reported by Kevin
Scaldeferri <kevin@scaldeferri.com>.
----------------------------
revision 2.3
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;  lines: +2 -0;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.2
date: 2002-07-29 02:06:46 -0700;  author: kai;  state: Exp;  lines: +0 -1;
lisp/tramp-version.el and texi/tramp-version.texi don't exist anymore.
----------------------------
revision 2.1
date: 2002-07-26 13:26:21 -0700;  author: kai;  state: Exp;
(tramp-handle-file-local-copy)
(tramp-handle-write-region): Call
`tramp-get-{de,en}coding-{function,command}' with four args.
(tramp-post-connection): Always send Perl implementation of
mimencode and mimedecode when Perl is available.
(tramp-get-encoding-command, tramp-get-decoding-command)
(tramp-get-encoding-function, tramp-get-decoding-function): New
implementation, uses auto-detected connection properties.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/ChangeLog,v
Working file: lisp/ChangeLog
head: 2.960
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.949
	branch-2-1-stable: 2.923.0.2
	branchpoint-2-1-stable: 2.923
	V-2-1-19: 2.923
	V-2-1-18: 2.883
	V-2-1-17: 2.849
	V-2-1-16: 2.772
	V-2-1-15: 2.745
	V-2-1-14: 2.727
	V-2-1-13: 2.698
	V-2-0-57: 2.382.2.140
	V-2-1-12: 2.676
	V-2-1-11: 2.652
	V-2-1-10: 2.628
	V-2-0-56: 2.382.2.124
	V-2-1-9: 2.609
	V-2-1-8: 2.585
	V-2-0-55: 2.382.2.110
	V-2-1-7: 2.546
	V-2-0-54: 2.382.2.96
	V-2-1-6: 2.532
	V-2-0-53: 2.382.2.88
	V-2-0-52: 2.382.2.78
	V-2-1-5: 2.506
	V-2-1-4: 2.488
	V-2-0-51: 2.382.2.66
	V-2-0-50: 2.382.2.58
	V-2-0-49: 2.382.2.49
	V-2-0-48: 2.382.2.43
	V-2-1-3: 2.448
	V-2-0-47: 2.382.2.35
	V-2-0-46: 2.382.2.25
	V-2-0-45: 2.382.2.17
	V-2-1-2: 2.428
	V-2-0-44: 2.382.2.14
	V-2-1-1: 2.418
	V-2-0-43: 2.382.2.8
	V-2-0-42: 2.382.2.5
	V-2-0-41: 2.382.2.3
	V-2-1-0: 2.382
	branch-2-0-stable: 2.382.0.2
	branchpoint-2-0-stable: 2.382
	V-2-0-40: 2.382
	V-2-0-39: 2.363
	V-2-0-38: 2.345
	V-2-0-37: 2.343
	V-2-0-36: 2.335
	V-2-0-35: 2.326
	V-2-0-34: 2.314
	V-2-0-33: 2.301
	V-2-0-32: 2.299
	V-2-0-30: 2.289
	V-2-0-29: 2.281
	V-2-0-28: 2.266
	V-2-0-27: 2.263
	V-2-0-26: 2.257
	V-2-0-25: 2.232
	V-2-0-24: 2.226
	V-2-0-23: 2.222
	V-2-0-22: 2.215
	V-2-0-21: 2.213
	V-2-0-20: 2.211
	V-2-0-19: 2.203
	V-2-0-18: 2.202
	V-2-0-17: 2.199
	V-2-0-16: 2.196
	V-2-0-15: 2.181
	V-2-0-14: 2.176
	V-2-0-13: 2.175
	completion: 2.172.0.2
	V-2-0-12: 2.172
	V-2-0-11: 2.167
	V-2-0-10: 2.165
	V-2-0-9: 2.162
	V-2-0-8: 2.159
	V-2-0-7: 2.158
	V-2-0-6: 2.156
	V-2-0-5: 2.151
	V-2-0-4: 2.148
	V-2-0-3: 2.136
	V-2-0-1: 2.112
	EMACS-21: 2.133
	V-2-0-0: 2.106
	tramp-xemacs-pkg: 2.46.0.2
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 1179;	selected revisions: 1179
description:
----------------------------
revision 2.960
date: 2011-01-10 12:49:37 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: ryuo6RZcxcEWgL3v;
* tramp-sh.el (tramp-find-inline-compress)
(tramp-get-inline-coding): Quote command after pipe symbol for
local calls under W32.  (Bug#6784)
----------------------------
revision 2.959
date: 2011-01-10 11:38:27 -0800;  author: albinus;  state: Exp;  lines: +7 -1;  commitid: y8jnAyeuYI5ySK3v;
* tramp.el (tramp-default-method): Initialize with pscp/plink only
when running under W32.
(tramp-debug-message): Extend function exclude list.  Use `regexp-opt'.
----------------------------
revision 2.958
date: 2010-12-31 11:52:57 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: qIe661QsRJjrht2v;
* tramp-sh.el (tramp-methods): Add recursive options to "scpc" and
"scpx".
----------------------------
revision 2.957
date: 2010-12-30 00:57:34 -0800;  author: albinus;  state: Exp;  lines: +15 -0;  commitid: sJi0TOvcI16wGh2v;
* tramp.el (tramp-default-method-alist, tramp-default-user-alist)
(tramp-local-host-regexp, tramp-prefix-domain-format)
(tramp-prefix-domain-regexp): Set tramp-autoload cookie.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-sh.el:
* tramp-smb.el: Add tramp-autoload cookie for initialisation code
of `tramp-default-method-alist' and `tramp-default-user-alist'.
----------------------------
revision 2.956
date: 2010-12-27 02:53:36 -0800;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: ItfUDI8BtGbnqU1v;
* Makefile.in (tramp-loaddefs.el): Hnadle case on systems on which
the format of absolute pathes are different between its shell and
in emacsen, like MSYS.  Reported by Yosuke YAMADA
<sunasaji@gmail.com>.

* tramp.el (tramp-default-user-alist): Do not add "ssh" based
methods, otherwise ~/.ssh/config would be ignored.
----------------------------
revision 2.955
date: 2010-12-14 12:26:20 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: aYRPhr9xEY3N0i0v;
* tramp-cache.el (tramp-persistency-file-name): Use
`locate-user-emacs-file' if fboundp.
----------------------------
revision 2.954
date: 2010-12-10 05:43:53 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: cTWXAQeJEEFGUJZu;
* tramp.el (tramp-action-password, tramp-process-actions): Revert
patch from 2010-12-08.  Use `save-restriction'.
----------------------------
revision 2.953
date: 2010-12-08 12:16:47 -0800;  author: albinus;  state: Exp;  lines: +11 -0;  commitid: 0k4sZ6GR3P5p9wZu;
* tramp.el (tramp-temp-buffer-file-name): Make it permanent-local.
(tramp-handle-insert-file-contents): Do not set permanent-local
property.
(tramp-action-password): Delete region, do not narrow.
(tramp-process-actions): Do not widen.

* tramp-sh.el (tramp-handle-start-file-process): Protect
buffer-modified value.  (Bug#7557)
----------------------------
revision 2.952
date: 2010-12-03 07:43:55 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: gi6hxSRo3KONNQYu;
* tramp-sh.el (tramp-methods): Add "ksu".
(tramp-default-user-alist): Add "ksu".  Use `regexp-opt' for
method list.
----------------------------
revision 2.951
date: 2010-12-01 09:42:17 -0800;  author: albinus;  state: Exp;  lines: +44 -0;  commitid: Uh2KDiGC5DnnwBYu;
* tramp.el (tramp-debug-message): Extend function exclude list.

* tramp-sh.el (tramp-methods): Add recursive options to "pscp" and
"psftp".  Exchange "%k" marker with options.
(tramp-do-copy-or-rename-file, tramp-sh-handle-file-local-copy):
Compute size of link target.
(tramp-do-copy-or-rename-file-out-of-band). Move setting of
`tramp-current-*' up due to gateway methods.  Optimze computing of
copy arguments.  Use `tramp-get-connection-name' and
`tramp-get-connection-buffer'.  Improve debug messages.

* tramp.el (tramp-default-method-alist)
(tramp-default-user-alist, tramp-default-proxies-alist): Adapt
custom options type.  (Bug#7445)
(tramp-local-host-regexp): Add "localhost6".
(tramp-file-name-port): Check also for `tramp-default-port'.
(tramp-get-connection-name): New defun.
(tramp-get-connection-process): Use it.
(tramp-drop-volume-letter): Fix doc string.

* tramp-cmds.el: Remove solved todo item.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-smb.el: Fix regexps added to `tramp-default-method-alist'
and `tramp-default-user-alist', respectively.

* tramp-gw.el (tramp-gw-open-connection): Use
`tramp-get-connection-name' and `tramp-get-connection-buffer'.

* tramp-imap.el (tramp-imap-make-iht): Use just
`tramp-file-name-port'.

* tramp-sh.el (tramp-compute-multi-hops): Remove port
determination.
(tramp-maybe-open-connection): Use `tramp-get-connection-name'.
----------------------------
revision 2.950
date: 2010-11-21 11:43:09 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: 9jRqh1SjMaUNvkXu;
* tramp.el (tramp-handle-insert-file-contents): Do not set
`backup-by-copying-when-mismatch'.
----------------------------
revision 2.949
date: 2010-11-20 03:38:50 -0800;  author: albinus;  state: Exp;  lines: +3 -0;  commitid: nQGoxapmOwxGR9Xu;
*** empty log message ***
----------------------------
revision 2.948
date: 2010-11-20 03:09:57 -0800;  author: albinus;  state: Exp;  lines: +10 -3;  commitid: OEjCifFu53ZGH9Xu;
*** empty log message ***
----------------------------
revision 2.947
date: 2010-11-13 02:27:32 -0800;  author: albinus;  state: Exp;  lines: +25 -0;  commitid: JAP0ddpM79e3HfWu;
* tramp-compat.el (tramp-compat-line-beginning-position)
(tramp-compat-line-end-position): Remove them.

* tramp.el (tramp-parse-rhosts-group, tramp-parse-shosts-group)
(tramp-parse-sconfig-group, tramp-parse-passwd-group)
(tramp-parse-netrc-group, tramp-parse-putty-group):
* tramp-cmds.el (tramp-append-tramp-buffers):
* tramp-sh.el (tramp-do-file-attributes-with-ls)
(tramp-sh-handle-file-selinux-context)
(tramp-sh-handle-file-name-all-completions)
(tramp-sh-handle-insert-directory)
(tramp-sh-handle-expand-file-name, tramp-find-executable)
(tramp-wait-for-output, tramp-send-command-and-read)
* tramp-smb.el (tramp-smb-read-file-entry)
(tramp-smb-get-cifs-capabilities)
* tramp-util.el (tramp-PC-expand-many-files): Use `point-at-eol'.

* tramp-sh.el (tramp-sh-handle-insert-directory) Use `point-at-bol'.
(tramp-remote-coding-commands): Add an alternative using "base64
-d -i".  This is needed for older base64 versions from GNU
coreutils.  Reported by Klaus Reichl
<Klaus.Reichl@thalesgroup.com>.
----------------------------
revision 2.946
date: 2010-11-10 01:56:32 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: fkCkCjktNvDACRVu;
* tramp.el (tramp-handle-insert-file-contents): Do not set
`permanent-local' property for `backup-by-copying-when-mismatch'.
----------------------------
revision 2.945
date: 2010-10-30 09:43:26 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: aU02fWQLwRIQduUu;
* tramp.el (tramp-handle-insert-file-contents): For root, preserve
owner and group when editing files.  (Bug#7289)
----------------------------
revision 2.944
date: 2010-10-27 22:45:41 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: 2FYAAcs4BjmlEaUu;
* Makefile.in (autoloads): Use $(builddir) prefix.
----------------------------
revision 2.943
date: 2010-10-21 03:16:38 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: 7umnTHoXaOOlniTu;
*** empty log message ***
----------------------------
revision 2.942
date: 2010-10-21 03:06:50 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: TdhAcKUkWkdZjiTu;
* Makefile.in (builddir): New variable, used instead of srcdir.
(INSTALL_FILES, xemacs): Add tramp-loaddefs.el.
(autoloads): Do not use $(srcdir) prefix.
----------------------------
revision 2.941
date: 2010-10-21 00:55:10 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: i0pDrGvHdPkOAhTu;
* tramp-sh.el (tramp-get-inline-coding): Return `nil' in case of
errors.
----------------------------
revision 2.940
date: 2010-10-20 04:59:13 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: JwxdUsG93nWwYaTu;
* tramp-sh.el (tramp-send-command): Simplify last patch, and
restrict it to here documents.
----------------------------
revision 2.939
date: 2010-10-19 13:13:45 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: rL0aBeDCMHZ5K5Tu;
* tramp-util.el (tramp-advice-executable-find): Do not check for
`tramp-fish-file-name-handler'.  Use
`tramp-sh-handle-executable-find'.
(tramp-advice-process-file): Do
not check for `tramp-fish-file-name-handler'.
(tramp-advice-call-process-region): Do not check for
`tramp-fish-file-name-handler'.  Use
`tramp-sh-handle-call-process-region.
----------------------------
revision 2.938
date: 2010-10-19 08:36:03 -0700;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: EO46b7cha4XOc4Tu;
* tramp-sh.el (tramp-send-command): Unset $PS1 in a subshell, in order not to
get several prompts when there are commands separated by ";".
----------------------------
revision 2.937
date: 2010-10-19 02:43:11 -0700;  author: albinus;  state: Exp;  lines: +9 -1;  commitid: RFxKW3Ci3a4Rf2Tu;
* tramp-sh.el (tramp-do-file-attributes-with-stat)
(tramp-do-directory-files-and-attributes-with-stat): Use "e0" in
order to make stat results a float.  Patch by Andreas Schwab
<schwab@linux-m68k.org>.
----------------------------
revision 2.936
date: 2010-10-15 05:04:40 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: d6iHSioI7vGmaxSu;
* tramp-sh.el (tramp-open-connection-setup-interactive-shell):
Suppress expansion of tabs to spaces.
----------------------------
revision 2.935
date: 2010-10-06 05:13:38 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: Kj518gRSVI5nvnRu;
* tramp-sh.el (tramp-sh-file-name-handler-alist): Use
`tramp-handle-find-backup-file-name'.
----------------------------
revision 2.934
date: 2010-10-05 07:06:01 -0700;  author: albinus;  state: Exp;  lines: +43 -0;  commitid: Yfgg9L8idLcN9gRu;
* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-handle-file-exists-p, tramp-handle-file-newer-than-file-p):
New defuns, taken from tramp-smb.el.
(tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag): Removed.

* tramp-compat.el (top): Do not check for byte-compiler objects.
(tramp-compat-coding-system-change-eol-conversion)
(tramp-compat-set-process-query-on-exit-flag): New defuns, taken
from tramp.el.

* tramp-gvfs.el:
* tramp-gw.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.

* tramp-imap.el (tramp-imap-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-imap-handle-file-exists-p)
(tramp-imap-handle-file-executable-p)
(tramp-imap-handle-file-readable-p)
(tramp-imap-handle-directory-files-and-attributes)
(tramp-imap-handle-file-newer-than-file-p): Removed.

* tramp-sh.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag' and
`tramp-coding-system-change-eol-conversion' by
`tramp-compat-coding-system-change-eol-conversion'.

* tramp-smb.el (tramp-smb-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-newer-than-file-p): Removed.
(tramp-smb-maybe-open-connection): Replace
`tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.
----------------------------
revision 2.933
date: 2010-10-04 12:49:00 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: wskfsGIn9xlv5aRu;
* tramp-compat.el: Don't mess about with the byte-compiler unless
it is "necessary".
----------------------------
revision 2.932
date: 2010-10-04 12:34:57 -0700;  author: albinus;  state: Exp;  lines: +31 -0;  commitid: n7rp0IAxnvWy0aRu;
Continue reorganization of load dependencies.  (Bug#7156)

* tramp.el (tramp-handle-file-local-copy-hook)
(tramp-delete-temp-file-function): Move down.
(tramp-exists-file-name-handler): Move up.
(tramp-register-file-name-handlers): Simplify autoload.
(tramp-handle-write-region-hook, tramp-handle-directory-file-name)
(tramp-handle-directory-files, tramp-handle-dired-uncache)
(tramp-handle-file-modes, tramp-handle-file-name-as-directory)
(tramp-handle-file-name-completion)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-regular-p)
(tramp-handle-file-remote-p, tramp-handle-file-symlink-p)
(tramp-handle-find-backup-file-name)
(tramp-handle-insert-file-contents, tramp-handle-load)
(tramp-handle-substitute-in-file-name)
(tramp-handle-unhandled-file-name-directory)
(tramp-mode-string-to-int, tramp-local-host-p)
(tramp-make-tramp-temp-file): Moved from tramp-sh.el.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Do not require 'tramp-sh.

* tramp-sh.el (all): Move several objects to tramp.el, see there.
Rename `tramp-handle-*' to `tramp-sh-handle-*'.

* tramp-vc.el (tramp-vc-user-login-name, tramp-vc-file-owner): Use
`file-attributes'.
----------------------------
revision 2.931
date: 2010-10-02 04:51:45 -0700;  author: albinus;  state: Exp;  lines: +29 -0;  commitid: VuxAzfL6W3iEvRQu;
* tramp.el (tramp-completion-reread-directory-timeout): Fix
docstring.

* tramp-cache.el (tramp-cache-inhibit-cache): Remove.
(tramp-get-file-property): Replace `tramp-cache-inhibit-cache' by
`remote-file-name-inhibit-cache'.  Check also for an integer
value.  Add/increase counter when `tramp-verbose' >= 10.
(tramp-set-file-property): Add/increase counter when
`tramp-verbose' >= 10.

* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-cleanup-all-buffers): Set tramp-autoload cookie.
(tramp-bug): Set tramp-autoload cookie.  Report all interned
tramp-* variables.  Report also `remote-file-name-inhibit-cache'.
(tramp-reporter-dump-variable): Fix docstring.  Mask non-7bit
characters only in strings.

* tramp-compat.el (remote-file-name-inhibit-cache): Define due to
backward compatibility.

* tramp-sh.el (tramp-handle-verify-visited-file-modtime)
(tramp-handle-file-name-all-completions)
(tramp-handle-vc-registered): Use
`remote-file-name-inhibit-cache'.
(tramp-open-connection-setup-interactive-shell): Call
`tramp-cleanup-connection' directly.
----------------------------
revision 2.930
date: 2010-09-17 00:47:06 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: OhmgC0YIVnyODUOu;
* configure.ac: Regenerate autoloads.

* tramp-compat.el (tramp-compat-with-temp-message): Make it a defmacro.
----------------------------
revision 2.929
date: 2010-09-16 08:36:06 -0700;  author: albinus;  state: Exp;  lines: +10 -2;  commitid: ZaWo7b7BbuAHgPOu;
* Makefile.in (autoloads): Renamed from tramp-autoloads.
(tramp-loaddefs.el): Revert check for XEmacs.

* tramp-cmds.el (tramp-cleanup-connection): Set tramp-autoload cookie.
----------------------------
revision 2.928
date: 2010-09-15 13:14:10 -0700;  author: albinus;  state: Exp;  lines: +32 -1;  commitid: cEIrA9vZbWCTPIOu;
Ensure XEmacs compatibility.

* Makefile.in (tramp-loaddefs.el): Adapt `autoload-trim-file-name'
and feature name.
(distclean): Remove trampver.el, it is handled in the upper Makefile.

* tramp-compat.el (tramp-compat-with-temp-message)
(tramp-compat-font-lock-add-keywords, tramp-compat-process-get)
(tramp-compat-process-put): New defuns.

* tramp.el (top):
* tramp-gvfs.el (top):
* tramp-cache.el (top): Use `tramp-compat-font-lock-add-keywords'.

* tramp.el (tramp-progress-reporter-update): Use `tramp-compat-funcall.

* tramp.el (tramp-process-actions):
* tramp-gvfs.el (tramp-handle-vc-registered):
* tramp-sh.el (tramp-gvfs-handler-askquestion)
(tramp-get-remote-stat, tramp-get-remote-readlink): Use
`tramp-compat-with-temp-message'.

* tramp-sh.el (top): Require 'cl.
(tramp-handle-start-file-process): Use `tramp-compat-process-get'.
(tramp-open-connection-setup-interactive-shell): Use
`tramp-compat-process-put'.

* tramp-util.el (top): Require 'tramp-sh.
----------------------------
revision 2.927
date: 2010-09-13 06:59:37 -0700;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: b1nL8wRcHHoyPqOu;
* tramp-fish.el: Remove file.
----------------------------
revision 2.926
date: 2010-09-13 06:18:44 -0700;  author: albinus;  state: Exp;  lines: +139 -0;  commitid: hctSFHPfw5XxBqOu;
Major code cleanup.  Split tramp.el into tramp.el and tramp-sh.el.

* Makefile.in (LISP_FILES): Remove tramp-fish.el.  Add tramp-sh.el.

* tramp.el (top): Don't show loading message.  Require just
'tramp-compat, everything else is required there.  Use
`ignore-errors' where appropriate.
(tramp-inline-compress-start-size, tramp-copy-size-limit)
(tramp-terminal-type, tramp-end-of-output)
(tramp-initial-end-of-output, tramp-completion-function-alist-rsh)
(tramp-completion-function-alist-ssh)
(tramp-completion-function-alist-telnet)
(tramp-completion-function-alist-su)
(tramp-completion-function-alist-putty, tramp-remote-path)
(tramp-remote-process-environment, tramp-sh-extra-args)
(tramp-actions-before-shell, tramp-uudecode)
(tramp-perl-file-truename, tramp-perl-file-name-all-completions)
(tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode)
(tramp-vc-registered-read-file-names, tramp-file-mode-type-map)
(tramp-file-name-handler-alist, tramp-make-tramp-temp-file)
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-as-directory)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-exists-p, tramp-handle-file-attributes)
(tramp-do-file-attributes-with-ls)
(tramp-do-file-attributes-with-perl)
(tramp-do-file-attributes-with-stat)
(tramp-handle-set-visited-file-modtime)
(tramp-handle-verify-visited-file-modtime)
(tramp-handle-set-file-modes, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-remote-selinux-p)
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-newer-than-file-p, tramp-handle-file-modes)
(tramp-handle-file-directory-p, tramp-handle-file-regular-p)
(tramp-handle-file-symlink-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p)
(tramp-handle-directory-file-name, tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-do-directory-files-and-attributes-with-perl)
(tramp-do-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions)
(tramp-handle-file-name-completion, tramp-handle-add-name-to-file)
(tramp-handle-copy-file, tramp-handle-copy-directory)
(tramp-handle-rename-file, tramp-do-copy-or-rename-file)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-dired-compress-file, tramp-handle-dired-uncache)
(tramp-handle-insert-directory)
(tramp-handle-unhandled-file-name-directory)
(tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-executable-find, tramp-process-sentinel)
(tramp-handle-start-file-process, tramp-handle-process-file)
(tramp-handle-call-process-region, tramp-handle-shell-command)
(tramp-handle-file-local-copy, tramp-handle-file-remote-p)
(tramp-handle-insert-file-contents)
(tramp-handle-insert-file-contents-literally)
(tramp-handle-find-backup-file-name)
(tramp-handle-make-auto-save-file-name, tramp-handle-write-region)
(tramp-vc-registered-file-names, tramp-handle-vc-registered)
(tramp-sh-file-name-handler, tramp-vc-file-name-handler)
(tramp-maybe-send-script, tramp-set-auto-save, tramp-run-test)
(tramp-run-test2, tramp-find-executable, tramp-set-remote-path)
(tramp-find-file-exists-command, tramp-open-shell)
(tramp-find-shell, tramp-barf-if-no-shell-prompt)
(tramp-open-connection-setup-interactive-shell)
(tramp-local-coding-commands, tramp-remote-coding-commands)
(tramp-find-inline-encoding, tramp-call-local-coding-command)
(tramp-inline-compress-commands, tramp-find-inline-compress)
(tramp-compute-multi-hops, tramp-maybe-open-connection)
(tramp-send-command , tramp-wait-for-output)
(tramp-send-command-and-check, tramp-barf-unless-okay)
(tramp-send-command-and-read, tramp-mode-string-to-int)
(tramp-convert-file-attributes, tramp-check-cached-permissions)
(tramp-file-mode-from-int, tramp-file-mode-permissions)
(tramp-shell-case-fold, tramp-make-copy-program-file-name)
(tramp-method-out-of-band-p, tramp-local-host-p)
(tramp-get-remote-path, tramp-get-remote-tmpdir)
(tramp-get-ls-command, tramp-get-ls-command-with-dired)
(tramp-get-test-command, tramp-get-test-nt-command)
(tramp-get-file-exists-command, tramp-get-remote-ln)
(tramp-get-remote-perl, tramp-get-remote-stat)
(tramp-get-remote-readlink, tramp-get-remote-trash)
(tramp-get-remote-id, tramp-get-remote-uid, tramp-get-remote-gid)
(tramp-get-local-uid, tramp-get-local-gid)
(tramp-get-inline-compress, tramp-get-inline-coding, ): Move to
tramp-sh.el.
(tramp-methods, tramp-default-method-alist)
(tramp-default-user-alist, tramp-foreign-file-name-handler-alist):
Move initialization to tramp-sh.el.
(tramp-temp-name-prefix): Make it a defconst.
(tramp-dissect-file-name): Don't check anymore for multi-hop
methods.
(tramp-debug-outline-regexp): Add a docstring.
(tramp-debug-outline-level): Renamed from `tramp-outline-level'.
(tramp-get-debug-buffer): Use it.

* tramp-cache.el (top): Set tramp-autoload cookie for
initialization forms.
(tramp-set-connection-property): Don't protect `tramp-message'
call, it isn't necessary any longer.
(tramp-dump-connection-properties): Use `ignore-errors'.

* tramp-compat.el (top): Require 'advice, 'format-spec,
'password-cache and 'auth-source.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Require 'tramp-sh.

* tramp-gw.el (tramp-gw-open-network-stream): Use `ignore-errors'.

* tramp-sh.el: New file, derived from tramp.el.
(top): Initialize `tramp-methods', `tramp-default-method-alist',
`tramp-default-user-alist', tramp-foreign-file-name-handler-alist.
Remove "scp1_old", "scp2_old", "ssh1_old", "ssh2_old".  Use
`ignore-errors' where appropriate.
(tramp-sh-file-name-handler-alist): Renamed from
`tramp-file-name-handler-alist'.
(tramp-send-command-and-check): Return t or nil.  Remove all
`zerop' checks, where called.
(tramp-handle-set-file-modes)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-delete-directory, tramp-handle-delete-file)
(tramp-maybe-send-script, ): Use `tramp-barf-unless-okay'.
(tramp-sh-file-name-handler, tramp-send-command-and-check)
(tramp-get-remote-ln): Set tramp-autoload cookie.
----------------------------
revision 2.925
date: 2010-09-09 06:21:11 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: YV9TD6OpPJ8hKUNu;
* tramp-cache.el (tramp-parse-connection-properties): Set tramp-autoload cookie.
----------------------------
revision 2.924
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +130 -0;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.923
date: 2010-08-23 11:23:06 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: tiSTp0DWhbgDXKLu;
branches:  2.923.2;
Version 2.1.19 released.

* configure.ac: Bump version.
----------------------------
revision 2.922
date: 2010-08-16 21:49:15 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: UqVVdbDwpkXoEUKu;
* tramp.el (tramp-handle-make-symbolic-link): Flush file
properties.
(tramp-handle-process-file): Call the program in a subshell, in
order to preserve working directory.
(tramp-action-password): Hide password prompt before next run.
(tramp-process-actions): Widen connection buffer for the trace.
----------------------------
revision 2.921
date: 2010-08-10 02:55:44 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: VDqMOSNrAw0Fz2Ku;
* tramp.el (tramp-vc-registered-read-file-names): Read input as
here-document, otherwise the command could exceed maximum length
of command line.
(tramp-handle-vc-registered): Call script accordingly.  Reported
by Toru TSUNEYOSHI <t_tuneyosi@hotmail.com>.
----------------------------
revision 2.920
date: 2010-08-06 07:28:35 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: 4fu9aBbB5kL9dyJu;
* tramp.el (tramp-handle-start-file-process ): Set connection
property "vec".
(tramp-process-sentinel): Use it for flushing the cache.  We
cannot do it via the process buffer, the buffer could be deleted
already when running the sentinel.
----------------------------
revision 2.919
date: 2010-08-05 01:09:08 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: 3Vb1XTzcyIp39oJu;
* tramp.el (tramp-handle-dired-uncache): Flush directory cache,
not only file cache.
(tramp-process-sentinel): New defun.
(tramp-handle-start-file-process): Use it, in order to invalidate
file caches.
----------------------------
revision 2.918
date: 2010-07-29 06:06:21 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: p0aVFhNttzEY0wIu;
* tramp.el (tramp-handle-start-file-process): Check only for
`remote-tty' process property.
(tramp-open-shell): Don't check for tty.
(tramp-open-connection-setup-interactive-shell): Set `remote-tty'
process property.
----------------------------
revision 2.917
date: 2010-07-28 02:57:06 -0700;  author: albinus;  state: Exp;  lines: +14 -0;  commitid: cMk21qq3P9j20nIu;
* tramp.el (tramp-methods): Move hostname to the end in all ssh
`tramp-login-args'.
(tramp-verbose): Describe verbose level 9.
(tramp-open-shell): Check for tty if `tramp-verbose' >= 9.
(tramp-open-connection-setup-interactive-shell): Trace stty
settings if `tramp-verbose' >= 9.
(tramp-handle-start-file-process): Implement tty setting.
(Bug#4604, Bug#6360)

* tramp-cmds.el (tramp-bug): Recommend setting of `tramp-verbose'
to 9.
----------------------------
revision 2.916
date: 2010-07-23 06:57:23 -0700;  author: albinus;  state: Exp;  lines: +3 -1;  commitid: 2pVeXbM4DaQquKHu;
* tramp.el (tramp-methods): Move hostname to the end in all plink
`tramp-login-args'.
----------------------------
revision 2.915
date: 2010-07-23 06:26:53 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: rgUENcGkADwMjKHu;
* tramp.el (tramp-file-name-regexp-unified)
(tramp-completion-file-name-regexp-unified): On W32 systems, do
not regard the volume letter as remote filename.  (Bug#5447)
(tramp-open-shell): New defun.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Use it.
----------------------------
revision 2.914
date: 2010-07-20 21:38:39 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: TsBevGCXfv6AsrHu;
* tramp.el (tramp-get-ls-command)
(tramp-get-ls-command-with-dired): Run tests on "/dev/null"
instead of "/".
----------------------------
revision 2.913
date: 2010-07-20 12:03:59 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: P8cuXMMgcx6qhoHu;
* tramp.el (tramp-file-name-handler): Trace 'quit.
(tramp-open-connection-setup-interactive-shell): Apply
workaround for IRIX64 bug.  Move argument of last
`tramp-send-command' where it belongs to.
----------------------------
revision 2.912
date: 2010-07-20 03:21:46 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: TTP8FvQc87tmolHu;
* tramp.el (tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes): Don't pass "$3".
(tramp-maybe-open-connection): Use `async-args' and `gw-args' in
front of `login-args'.
----------------------------
revision 2.911
date: 2010-07-17 01:40:45 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: rlZd7tLu9OVzVWGu;
* tramp.el (tramp-get-ls-command-with-dired): Make test for
"--dired" stronger.
----------------------------
revision 2.910
date: 2010-07-16 05:07:01 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: 5xAFxYqIfgem6QGu;
* tramp.el (tramp-handle-shell-command): Don't use hard-wired
"/bin/sh" but `tramp-remote-sh' from `tramp-methods'.
(tramp-find-shell): Simplify setting connection property.
(tramp-get-ls-command): Make test for "--color=never" stronger.
----------------------------
revision 2.909
date: 2010-07-11 01:19:16 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: 66eW6k3uokdh0bGu;
* tramp-gvfs.el (tramp-gvfs-handle-copy-file): Do not pass empty
argument to gvfs-copy.
----------------------------
revision 2.908
date: 2010-06-12 01:54:22 -0700;  author: albinus;  state: Exp;  lines: +20 -0;  commitid: FPHoi5NWl1x08sCu;
* tramp.el (tramp-remote-process-environment): Protect version
string by apostroph.
(tramp-shell-prompt-pattern): Do not use a shy group in case of
XEmacs.
(tramp-file-name-for-operation): Add `call-process-region'.
(tramp-set-process-query-on-exit-flag): Fix wrong parentheses.

* tramp-compat.el (top): Do not autoload
`tramp-handle-file-remote-p'.  Load tramp-util.el and tramp-vc.el
only when `start-file-process' is not bound.
(tramp-advice-file-expand-wildcards): Do not use
`tramp-handle-file-remote-p'.
(tramp-compat-make-temp-file): Handle the case, that
`make-temp-file' has no third argument EXTENSION.

* tramp-util.el (top): Apply advices only when there are no file
name handlers for `start-file-process' and `process-file'.
----------------------------
revision 2.907
date: 2010-06-04 04:09:30 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: 6aP3cpHZc3Lu8rBu;
* tramp-gvfs.el (tramp-gvfs-handle-expand-file-name): Expand "~/".
(tramp-gvfs-handler-mounted-unmounted)
(tramp-gvfs-connection-mounted-p): Handle default-location.

* tramp-smb.el (tramp-smb-handle-delete-directory): Don't try to
move files to trash.
----------------------------
revision 2.906
date: 2010-06-02 02:30:05 -0700;  author: albinus;  state: Exp;  lines: +25 -1;  commitid: xqOQ91Cl0TYmEaBu;
* tramp-gvfs.el (top): Require url-util.
(tramp-gvfs-mount-point): Removed.
(tramp-gvfs-stringify-dbus-message, tramp-gvfs-send-command): New
defuns.
(with-tramp-dbus-call-method): Format trace message.
(tramp-gvfs-handle-copy-file, tramp-gvfs-handle-rename-file):
Implement backup call, when operation on local files fails.  Use
progress reporter.  Flush properties of changed files.
(tramp-gvfs-handle-make-directory): Make more traces.
(tramp-gvfs-url-file-name): Hexify file name in url.
(tramp-gvfs-fuse-file-name): Take also prefix (like dav shares)
into account for the resulting file name.
(tramp-gvfs-handler-askquestion): Return dummy mountpoint, when
the answer is "no".  See `tramp-gvfs-maybe-open-connection'.
(tramp-gvfs-handler-mounted-unmounted)
(tramp-gvfs-connection-mounted-p): Test also for new mountspec
attribute "default_location".  Set "prefix" property.
(tramp-gvfs-mount-spec): Return both prefix and mountspec.
(tramp-gvfs-maybe-open-connection): Test, whether mountpoint
exists.  Raise an error, if not (due to a corresponding answer
"no" in interactive questions, for example).
----------------------------
revision 2.905
date: 2010-05-28 07:44:34 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: 9Psmv9pA2R09yyAu;
* tramp.el (tramp-debug-message ): Add `tramp-compat-funcall' to
ignored backtrace functions.
(with-progress-reporter): Expand docstring.
(tramp-handle-delete-file): Implement TRASH argument.
(tramp-get-remote-trash): New defun.
----------------------------
revision 2.904
date: 2010-05-28 06:13:24 -0700;  author: albinus;  state: Exp;  lines: +39 -0;  commitid: 2CLK9YLsWaoW2yAu;
* tramp-compat.el (tramp-compat-delete-file): Use `symbol-value'
for backward compatibility.

* tramp.el (tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use `delete-file'
instead of `tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-do-copy-or-rename-file): Use
`delete-file' instead of `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.
(tramp-smb-handle-delete-directory): Use 'trash as arg.

* tramp-vc.el (tramp-vc-user-login-name): Use `delete-file'
instead of `tramp-compat-delete-file'.
----------------------------
revision 2.903
date: 2010-05-28 03:31:50 -0700;  author: albinus;  state: Exp;  lines: +40 -0;  commitid: 8f88ImmlFUbw9xAu;
* tramp-compat.el (tramp-compat-delete-file): Rewrite to handle
new TRASH arg of `delete-file'.

* tramp.el (tramp-handle-delete-file): Change FORCE arg to TRASH.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use null TRASH arg in
tramp-compat-delete-file call.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-delete-file)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use null TRASH arg
in `tramp-compat-delete-file' call.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-imap.el (tramp-imap-handle-delete-file): Rename arg.
(tramp-imap-do-copy-or-rename-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use null TRASH arg in
tramp-compat-delete-file call.
(tramp-smb-handle-delete-directory): Use tramp-compat-delete-file.
(tramp-smb-handle-delete-file): Rename arg.
----------------------------
revision 2.902
date: 2010-05-25 06:25:13 -0700;  author: albinus;  state: Exp;  lines: +6 -1;  commitid: Nc5TB3qqPPTYcaAu;
* tramp.el (tramp-handle-insert-directory): Don't use
`forward-word', it's default syntax could be changed.
----------------------------
revision 2.901
date: 2010-05-25 01:39:26 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: n5aSqPkqy3PVC8Au;
* tramp.el (tramp-progress-reporter-update): New defun.
(with-progress-reporter): Use it.
(tramp-process-one-action):
* tramp-gvfs.el (tramp-gvfs-handler-askquestion): Preserve current
message, in order to let progress reporter continue
afterwards.  (Bug#6257)
----------------------------
revision 2.900
date: 2010-05-21 06:46:38 -0700;  author: albinus;  state: Exp;  lines: +14 -0;  commitid: RZ9vsTHEycGisEzu;
* tramp.el (tramp-do-copy-or-rename-file)
(tramp-handle-file-local-copy, tramp-maybe-open-connection): Tune
`with-progress-reporter' messages.
(tramp-handle-vc-registered):
* tramp-fish.el (tramp-fish-handle-file-local-copy)
(tramp-fish-handle-insert-file-contents)
(tramp-fish-maybe-open-connection):
* tramp-gvfs.el (tramp-gvfs-maybe-open-connection):
* tramp-imap.el (tramp-imap-do-copy-or-rename-file)
(tramp-imap-handle-insert-file-contents)
(tramp-imap-handle-file-local-copy): Use `with-progress-reporter'.
----------------------------
revision 2.899
date: 2010-05-19 11:52:35 -0700;  author: albinus;  state: Exp;  lines: +7 -1;  commitid: QV1obrXnz4e5dqzu;
* tramp.el (tramp-methods): Add `tramp-async-args' attribute where
appropriate.
(tramp-maybe-open-connection): Use it.
----------------------------
revision 2.898
date: 2010-05-13 13:38:53 -0700;  author: albinus;  state: Exp;  lines: +16 -0;  commitid: IdwA2HqyQHCuZEyu;
* tramp.el (with-progress-reporter): Create reporter object only
when the message would be displayed.  Handled nested calls.
(tramp-handle-load, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-maybe-send-script, tramp-find-shell): Use
`with-progress-reporter'.
(tramp-handle-dired-compress-file, tramp-maybe-open-connection):
Fix message text.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region, tramp-smb-maybe-open-connection):
Use `with-progress-reporter'.
----------------------------
revision 2.897
date: 2010-05-10 08:38:47 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: sed1jmcgk0UHqfyu;
* tramp.el (tramp-do-file-attributes-with-stat): Add space in
format string, in order to work around a bug in pdksh.  Reported
by Gilles Pion <gpion@lfdj.com>.
(tramp-handle-verify-visited-file-modtime): Do not send a command
when the connection is not established.
(tramp-handle-set-file-times): Simplify the check for utc.
----------------------------
revision 2.896
date: 2010-05-09 12:45:05 -0700;  author: albinus;  state: Exp;  lines: +30 -0;  commitid: mYjXXOy50YSYO8yu;
* tramp-compat.el (byte-compile-not-obsolete-vars): Define if not
bound.
(tramp-compat-copy-file): Add PRESERVE-SELINUX-CONTEXT.
(tramp-compat-funcall): New defmacro.
(tramp-compat-line-beginning-position)
(tramp-compat-line-end-position)
(tramp-compat-temporary-file-directory)
(tramp-compat-make-temp-file, tramp-compat-file-attributes)
(tramp-compat-copy-file, tramp-compat-copy-directory)
(tramp-compat-delete-file, tramp-compat-delete-directory)
(tramp-compat-number-sequence, tramp-compat-process-running-p)
* tramp.el (top, with-progress-reporter)
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-handle-dired-compress-file, tramp-handle-shell-command)
(tramp-completion-mode-p, tramp-check-for-regexp)
(tramp-open-connection-setup-interactive-shell)
(tramp-compute-multi-hops, tramp-read-passwd, tramp-clear-passwd)
(tramp-time-diff, tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag, tramp-unload-tramp)
* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-reporter-dump-variable, tramp-load-report-modules)
(tramp-append-tramp-buffers)
* tramp-gvfs.el (tramp-gvfs-handle-file-selinux-context)
* tramp-util.el (tramp-gud-file-name): Use it.

* tramp-imap.el (top): Autoload `epg-make-context'.
----------------------------
revision 2.895
date: 2010-05-06 01:28:23 -0700;  author: albinus;  state: Exp;  lines: +13 -0;  commitid: gZma8ggIUvl1bHxu;
* tramp.el (top, with-progress-reporter): Use `symbol-function'
inside `funcall'.

* tramp-compat.el (tramp-compat-file-attributes)
(tramp-compat-delete-file, tramp-compat-delete-directory): Handle
only `wrong-number-of-arguments' error.

* tramp-gvfs.el (tramp-gvfs-handle-copy-file): Fix typo.
(tramp-gvfs-handle-file-selinux-context): Use `symbol-function'
inside `funcall'.
----------------------------
revision 2.894
date: 2010-05-05 02:57:35 -0700;  author: albinus;  state: Exp;  lines: +37 -0;  commitid: 7vDVEtI34jXBHzxu;
Add FORCE argument to `delete-file'.

* tramp-compat.el (tramp-compat-delete-file): New defun.

* tramp.el (tramp-handle-delete-file): Add FORCE arg.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-file): Add FORCE arg.
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use
`tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Add FORCE arg.
(tramp-gvfs-handle-write-region): Use `tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-handle-delete-file): Add FORCE arg.
(tramp-imap-do-copy-or-rename-file): Use `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-delete-file): Add FORCE arg.
(tramp-smb-handle-copy-file, tramp-smb-handle-file-local-copy)
(tramp-smb-handle-rename-file, tramp-smb-handle-write-region): Use
`tramp-compat-delete-file'.

* tramp-vc.el (tramp-vc-user-login-name): Use
`tramp-compat-delete-file'.
----------------------------
revision 2.893
date: 2010-05-04 01:38:19 -0700;  author: albinus;  state: Exp;  lines: +6 -1;  commitid: XifZ46LAiNUpirxu;
* tramp.el (tramp-methods): Remove "-q" from `tramp-login-args' in
order to see error messages for failed logins.
----------------------------
revision 2.892
date: 2010-05-01 02:27:14 -0700;  author: albinus;  state: Exp;  lines: +15 -0;  commitid: YCDwnEUDndF0F3xu;
Implement compression for inline methods.

* tramp.el (tramp-inline-compress-start-size): New defcustom.
(tramp-copy-size-limit): Allow also nil.
(tramp-inline-compress-commands): New defconst.
(tramp-find-inline-compress, tramp-get-inline-compress)
(tramp-get-inline-coding): New defuns.
(tramp-get-remote-coding, tramp-get-local-coding): Removed,
replaced by `tramp-get-inline-coding'.
(tramp-handle-file-local-copy, tramp-handle-write-region)
(tramp-method-out-of-band-p): Use `tramp-get-inline-coding'.
----------------------------
revision 2.891
date: 2010-04-28 11:37:54 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: UwezdYURkmFTNIwu;
* tramp.el (tramp-remote-selinux-p): New defun.
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context): Use it.
----------------------------
revision 2.890
date: 2010-04-23 06:58:43 -0700;  author: albinus;  state: Exp;  lines: +23 -1;  commitid: jjKGKL8Sxss2q3wu;
Implement SELINUX backends.

* tramp.el (tramp-file-name-handler-alist): Add
`file-selinux-context' and `set-file-selinux-context'.
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context): New defuns.
(tramp-handle-copy-file, tramp-do-copy-or-rename-file): Handle
PRESERVE-SELINUX-CONTEXT.

* tramp-gvfs.el (tramp-gvfs-file-name-handler-alist): Add
`file-selinux-context' and `set-file-selinux-context'.
(tramp-gvfs-handle-file-selinux-context)
(tramp-gvfs-handle-set-file-selinux-context): New defuns.
(tramp-gvfs-handle-copy-file): Handle
PRESERVE-SELINUX-CONTEXT.

* tramp-fish.el (tramp-fish-handle-copy-file):
* tramp-imap.el (tramp-imap-handle-copy-file):
* tramp-smb.el (tramp-smb-handle-copy-file): Add
PRESERVE-SELINUX-CONTEXT.
----------------------------
revision 2.889
date: 2010-04-22 04:59:18 -0700;  author: albinus;  state: Exp;  lines: +35 -0;  commitid: bNgFjZfjw3AhNUvu;
* tramp.el (tramp-detect-ssh-controlmaster): New defun.
(tramp-default-method): Use it.

* tramp.el (tramp-error-with-buffer): Don't show the connection
buffer when we are in completion mode.
(with-connection-property, tramp-completion-mode-p)
(tramp-action-process-alive, tramp-action-out-of-band)
(tramp-check-for-regexp, tramp-file-name-p, tramp-equal-remote)
(tramp-exists-file-name-handler): Fix docstring.
(with-progress-reporter): New defmacro.
(tramp-do-copy-or-rename-file, tramp-handle-dired-compress-file)
(tramp-maybe-open-connection): Use it.
(tramp-handle-copy-file): Add new optional parameter
`preserve-selinux-context'.
(tramp-file-name-for-operation): Add `set-file-selinux-context'.
(tramp-connectable-p): New defun.
(tramp-handle-expand-file-name)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Use it.
(tramp-file-name-handler): Catch the error for some operations
when we are in completion mode.  This gives the user the chance to
correct the file name in the minibuffer.
(tramp-completion-mode-p): Use `non-essential'.

* tramp.el (tramp-file-name-for-operation):
Add file-selinux-context.
----------------------------
revision 2.888
date: 2010-04-10 08:48:44 -0700;  author: albinus;  state: Exp;  lines: +10 -1;  commitid: Lb4WYKS8yFbKrouu;
* tramp.el (tramp-do-copy-or-rename-file): Add progress reporter.
----------------------------
revision 2.887
date: 2010-03-19 07:12:20 -0700;  author: albinus;  state: Exp;  lines: +18 -0;  commitid: vPLrSNK85jZuCyru;
Discard GNU Emacs 21 compatibility.

* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-get-remote-path): Use `copy-tree'.
(tramp-set-auto-save-file-modes): Adapt version check.

* tramp-compat.el (tramp-advice-file-expand-wildcards): No need to
protect `featurep' call anymore.
(tramp-compat-make-temp-file): Simplify fallback implementation.
(tramp-compat-copy-tree): Remove function.

* tramp-fish.el (tramp-fish-handle-directory-files-and-attributes):
Use `tramp-compat-file-attributes'.

* tramp-util.el (tramp-advice-dired-insert-directory): Remove advice.
----------------------------
revision 2.886
date: 2010-03-18 12:21:21 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: 97eLV6PglkHwmsru;
* tramp.el (tramp-do-copy-or-rename-file-out-of-band)
(tramp-compute-multi-hops, tramp-maybe-open-connection): Use
`format-spec-make'.
(tramp-debug-outline-regexp): New defconst.
(tramp-get-debug-buffer): Use it.
----------------------------
revision 2.885
date: 2010-03-15 16:38:21 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: jOAvuJj0cAcFS5ru;
* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Use
`tramp-compat-delete-directory'.

* tramp-compat.el (tramp-compat-delete-directory): Provide
implementation for older Emacsen.
----------------------------
revision 2.884
date: 2010-03-14 04:11:57 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: ewiPIlGpMfsAMTqu;
* tramp.el (tramp): Put in comm group.
* tramp-imap.el (tramp-imap): Put in tramp group.
----------------------------
revision 2.883
date: 2010-03-14 03:30:10 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: Fhwj0p760AveyTqu;
Version 2.1.18 released.

* configure.ac: Bump version.

* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Make call
of `delete-directory' backwards compatible.
----------------------------
revision 2.882
date: 2010-03-13 11:18:45 -0800;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: VzSfnEH3lwaAvOqu;
* tramp.el (tramp-find-executable): Use
`tramp-get-connection-buffer'.  Make the regexp for checking
output of "wc -l" more robust.
(tramp-find-shell): Use another shell but /bin/sh on OpenSolaris.
(tramp-open-connection-setup-interactive-shell): Remove workaround
for OpenSolaris bug, it is not needed anymore.
----------------------------
revision 2.881
date: 2010-03-02 01:00:51 -0800;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: sqObKjE4Vfcxrlpu;
* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Fix an
error when FILENAME and NEWNAME are existing remote directories.

* tramp-compat.el (tramp-compat-make-temp-file): Add optional
parameter DIR-FLAG.
----------------------------
revision 2.880
date: 2010-02-28 03:24:29 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: ifEmZkMrdufNi6pu;
* tramp.el (tramp-handle-write-region): START can be a string.
Take care in the checks.  Reported by Dan Davison
<davison@stats.ox.ac.uk>.
----------------------------
revision 2.879
date: 2010-02-22 05:43:13 -0800;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: WMG6LBDCSnNlglou;
* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Protect
setting the modes by `ignore-errors'.  It might fail, for example
if the file is not owned by the user but the group.
(tramp-handle-write-region): Ensure, that `tmpfile' is always readable.
----------------------------
revision 2.878
date: 2010-02-18 01:57:09 -0800;  author: albinus;  state: Exp;  lines: +13 -0;  commitid: 04E2EMQz21QL8Onu;
* tramp.el (tramp-handle-directory-files): When FULL, do not
expand "." and "..".  Reported by Thierry Volpiatto
<thierry.volpiatto@gmail.com>.
(tramp-handle-insert-file-contents): Set always the
permissions of the temporary file to "0600".  In case the remote
file has no read permissions for the owner, there might be
problems otherwise.  Reported by Ole Laursen <olau@iola.dk>.
----------------------------
revision 2.877
date: 2010-02-16 07:53:00 -0800;  author: albinus;  state: Exp;  lines: +11 -0;  commitid: O636X782nmAPaAnu;
* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Fix errors
  in copying directories.
  (tramp-handle-add-name-to-file, tramp-handle-copy-directory)
  (tramp-do-copy-or-rename-file, tramp-handle-delete-directory)
  (tramp-handle-delete-file)
  (tramp-handle-dired-recursive-delete-directory)
  (tramp-handle-write-region): Flush also the cache for the upper
  directory.
----------------------------
revision 2.876
date: 2010-02-15 06:56:16 -0800;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: zC9KezLCr9DlTrnu;
* tramp.el (tramp-process-actions, tramp-read-passwd):
* tramp-gvfs.el (tramp-gvfs-maybe-open-connection): Use VEC
instead of PROC for caching "first-password-request".  Otherwise,
new processes would not profit from passwords already entered.

* tramp-cache.el (tramp-dump-connection-properties): Don't save
"first-password-request" property.
----------------------------
revision 2.875
date: 2010-02-05 03:08:55 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: O8Ov7vj9pqmmX8mu;
* tramp-imap.el (tramp-imap-handle-insert-directory):
* tramp-smb.el (tramp-smb-handle-insert-directory):
Handle also directories.  (Bug#5478)
----------------------------
revision 2.874
date: 2010-02-04 08:02:01 -0800;  author: albinus;  state: Exp;  lines: +11 -0;  commitid: MoSIFmVTXc10C2mu;
* tramp.el (tramp-handle-dired-uncache): When DIR is not a
directory, handle its directory component.
(tramp-handle-file-remote-p): Let-bind `tramp-verbose' to 3; this
function is called permanently and creates noise, otherwise.

* tramp-imap.el (tramp-imap-handle-insert-directory):
* tramp-smb.el (tramp-smb-handle-insert-directory):
Handle the case, FILENAME is not in `default-directory'.  (Bug#5478)
----------------------------
revision 2.873
date: 2010-01-29 08:14:31 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: fcDpPGjB3U5fSglu;
* tramp.el (tramp-handle-insert-directory): Handle also symlinks,
when FILENAME is not in `default-directory'.
----------------------------
revision 2.872
date: 2010-01-28 13:05:19 -0800;  author: albinus;  state: Exp;  lines: +8 -2;  commitid: c3BjjjvbLmAPvalu;
* tramp.el (tramp-handle-insert-directory): Handle the case,
FILENAME is not in `default-directory'.  (Bug#5478)
(tramp-register-file-name-handlers): Add safe-magic property.
----------------------------
revision 2.871
date: 2010-01-27 08:35:48 -0800;  author: albinus;  state: Exp;  lines: +13 -0;  commitid: DzqGDgWlAWxn31lu;
* tramp.el (ramp-remote-process-environment): Use `format' instead
of `concat'.
(tramp-check-for-regexp): User (forward-line 1).
(tramp-open-connection-setup-interactive-shell): Handle "=" in
variable values properly.
(tramp-find-inline-encoding): Raise an error, when no encoding is
found.
(tramp-wait-for-output): Remove spurious " ^H" sequences, sent by
busybox.
(tramp-get-ls-command): Suppress coloring, if possible.
----------------------------
revision 2.870
date: 2010-01-23 02:54:02 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: Yqc3gmikfgFbitku;
*** empty log message ***
----------------------------
revision 2.869
date: 2010-01-23 02:53:30 -0800;  author: albinus;  state: Exp;  lines: +20 -1;  commitid: r6lhKUCOypTThtku;
* tramp.el (tramp-completion-function-alist)
(tramp-file-name-regexp, tramp-chunksize)
(tramp-local-coding-commands, tramp-remote-coding-commands):
Fix docstring.
(tramp-do-copy-or-rename-file-directly): Do not use
`tramp-handle-file-remote-p'.
(tramp-find-foreign-file-name-handler)
(tramp-advice-make-auto-save-file-name)
(tramp-set-auto-save-file-modes): Remove superfluous check for
`stringp'.  This is done inside `tramp-tramp-file-p'.

* tramp-fish.el (tramp-fish-handle-directory-files-and-attributes):
Do not use `tramp-fish-handle-file-attributes.

* tramp-smb.conf (tramp-smb-conf): New defcustom.
(tramp-smb-maybe-open-connection): Use it.
----------------------------
revision 2.868
date: 2010-01-22 13:13:57 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: Pfp1A8yJSIjKKoku;
* tramp-imap.el (top): Autoload needed packages.
----------------------------
revision 2.867
date: 2010-01-19 11:33:45 -0800;  author: albinus;  state: Exp;  lines: +10 -1;  commitid: Q70j1VYZ0jWmi0ku;
* tramp.el (tramp-wrong-passwd-regexp): Add "Timeout, server not
responding." string.
(tramp-remote-coding-commands): Fix typo in docstring.
----------------------------
revision 2.866
date: 2010-01-12 14:33:44 -0800;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: S6PpbWbHJlF3w7ju;
* tramp.el (tramp-perl-encode, tramp-perl-decode):
Update copyrights for 2010.
(tramp-handle-insert-directory): Simplify handling of SWITCHES.
(tramp-wait-for-output): Check, whether PROC is available.

* tramp-compat.el (tramp-advice-file-expand-wildcards): Wrap call
of `featurep' for 2nd argument.
----------------------------
revision 2.865
date: 2009-12-26 11:59:00 -0800;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: Xb6yjRvwPqwRcVgu;
* tramp.el (tramp-handle-insert-directory): Quote "'" in the
switches.
(tramp-open-connection-setup-interactive-shell): Dump stty
settings.  Enable "neveropen" arg for all `tramp-send-command' calls.
----------------------------
revision 2.864
date: 2009-12-23 02:11:21 -0800;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: jfRDu8Vtvn5e3ugu;
* tramp.el (tramp-handle-file-name-all-completions): Backward/
XEmacs compatibility: Use `completion-ignore-case' if
`read-file-name-completion-ignore-case' does not exist.
(tramp-handle-dired-uncache): Add optional parameter DIR-P for
XEmacs compatibility.  Reported by Pete Forman
<petef4+usenet@gmail.com>.
(tramp-handle-insert-directory): Check also for //SUBDIRED// line.
----------------------------
revision 2.863
date: 2009-12-17 05:04:21 -0800;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: Cvmh8LFqA5fxcJfu;
* tramp.el (tramp-handle-file-remote-p): Expand file name only if
there is already an established connection.
(tramp-advice-file-expand-wildcards): Remove it.

* tramp-compat.el (top): Autoload `tramp-handle-file-remote-p'.
(tramp-advice-file-expand-wildcards): Moved from tramp.el.
Activate advice for older GNU Emacs versions.  (Bug#5237)
----------------------------
revision 2.862
date: 2009-12-15 13:07:28 -0800;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: 76XMdde6VTpgWvfu;
* tramp.el (tramp-echo-mark-marker-length): New defconst.
(tramp-echo-mark, tramp-echoed-echo-mark-regexp): Use it.
(tramp-check-for-regexp): Check also, when an echoing shell stops
to echo sent commands.
----------------------------
revision 2.861
date: 2009-12-09 02:14:30 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: Ycte6ihHmNidwGeu;
* tramp.el (tramp-handle-insert-directory): Suppress error messages.
----------------------------
revision 2.860
date: 2009-12-06 22:22:11 -0800;  author: albinus;  state: Exp;  lines: +17 -0;  commitid: 9AtrWYGiwkVxipeu;
*** empty log message ***
----------------------------
revision 2.859
date: 2009-12-03 03:01:44 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: 2eoHY1YKK0gfYUdu;

VS: ----------------------------------------------------------------------
* tramp.el (tramp-handle-file-remote-p): Expand FILENAME for the
benefit of returning an expanded localname.
(tramp-tramp-file-p): Handle the case NAME is not a string.
----------------------------
revision 2.858
date: 2009-11-29 11:59:38 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: HCbF7PfJnd8Y4sdu;
*** empty log message ***
----------------------------
revision 2.857
date: 2009-11-24 00:55:06 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: D2SIluvFlUxEyKcu;

* tramp.el (tramp-eshell-directory-change): New defun.  Add it to
`eshell-directory-change-hook'.
----------------------------
revision 2.856
date: 2009-11-23 07:55:17 -0800;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: jQp2zYKtKP6KUEcu;

* tramp.el (tramp-shell-prompt-pattern): Use \r for carriage
return.
(tramp-handle-make-symbolic-link)
(tramp-handle-dired-compress-file, tramp-handle-expand-file-name):
Quote file names.
(tramp-send-command-and-check): New argument DONT-SUPPRESS-ERR.
(tramp-handle-process-file): Use it.
----------------------------
revision 2.855
date: 2009-11-19 01:22:06 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: uSOSxBQ4ShzXR6cu;

* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Set
variables for computing the prompt for reading password.
----------------------------
revision 2.854
date: 2009-11-17 06:55:17 -0800;  author: albinus;  state: Exp;  lines: +3 -0;  commitid: t9UTskKQxIxsMSbu;
*** empty log message ***
----------------------------
revision 2.853
date: 2009-11-17 02:31:09 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: gxNpELW65WtQjRbu;
*** empty log message ***
----------------------------
revision 2.852
date: 2009-11-16 12:06:18 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: 3UJW2sSsR7g6xMbu;
*** empty log message ***
----------------------------
revision 2.851
date: 2009-11-11 06:36:59 -0800;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: 0otMwSQ3M7aeS6bu;
*** empty log message ***
----------------------------
revision 2.850
date: 2009-11-08 02:36:11 -0800;  author: albinus;  state: Exp;  lines: +16 -0;  commitid: paqmeuDcvFUvDHau;
*** empty log message ***
----------------------------
revision 2.849
date: 2009-11-07 14:31:31 -0800;  author: albinus;  state: Exp;  lines: +18 -0;  commitid: luPfRWU4FIOSCDau;
*** empty log message ***
----------------------------
revision 2.848
date: 2009-10-27 03:50:43 -0700;  author: albinus;  state: Exp;  lines: +13 -0;  commitid: l5BWCocoJQqu6a9u;
*** empty log message ***
----------------------------
revision 2.847
date: 2009-10-26 01:59:05 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: muESsWAq6LJbw19u;
*** empty log message ***
----------------------------
revision 2.846
date: 2009-10-23 07:57:06 -0700;  author: albinus;  state: Exp;  lines: +14 -0;  commitid: agYoMEd7KyhZAF8u;
*** empty log message ***
----------------------------
revision 2.845
date: 2009-10-21 04:22:27 -0700;  author: albinus;  state: Exp;  lines: +13 -1;  commitid: GdaxAhLI0Nelto8u;
*** empty log message ***
----------------------------
revision 2.844
date: 2009-10-16 07:33:04 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: BT1Icg6VO9rHGL7u;
*** empty log message ***
----------------------------
revision 2.843
date: 2009-10-15 06:06:54 -0700;  author: albinus;  state: Exp;  lines: +28 -0;  commitid: 71ixAZjzKnm8fD7u;
*** empty log message ***
----------------------------
revision 2.842
date: 2009-10-13 13:08:44 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: HHqyW6T67e6GDp7u;
*** empty log message ***
----------------------------
revision 2.841
date: 2009-10-11 08:04:56 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: shtD9l7t79Or187u;
*** empty log message ***
----------------------------
revision 2.840
date: 2009-10-11 06:53:11 -0700;  author: albinus;  state: Exp;  lines: +28 -0;  commitid: FzGVWqJDxCGSC77u;
*** empty log message ***
----------------------------
revision 2.839
date: 2009-10-08 08:18:10 -0700;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: hA9hYKXz70I6cK6u;
*** empty log message ***
----------------------------
revision 2.838
date: 2009-10-07 04:31:44 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: iRidOPo3XIEqYA6u;
*** empty log message ***
----------------------------
revision 2.837
date: 2009-10-07 04:22:43 -0700;  author: albinus;  state: Exp;  lines: +18 -0;  commitid: Z38DqyCjnH0kVA6u;
*** empty log message ***
----------------------------
revision 2.836
date: 2009-10-07 00:00:52 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: G2AA4pdblQWutz6u;
*** empty log message ***
----------------------------
revision 2.835
date: 2009-10-06 00:03:55 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: b45L0iqaJRvxwr6u;
*** empty log message ***
----------------------------
revision 2.834
date: 2009-10-05 04:15:42 -0700;  author: albinus;  state: Exp;  lines: +14 -0;  commitid: 0RdswZJf3AMUWk6u;
*** empty log message ***
----------------------------
revision 2.833
date: 2009-10-03 05:41:07 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: T3Yb1Eh79FW6u56u;
*** empty log message ***
----------------------------
revision 2.832
date: 2009-10-02 05:35:42 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: n1Tr6TeBDJUkuX5u;
*** empty log message ***
----------------------------
revision 2.831
date: 2009-10-01 08:23:56 -0700;  author: albinus;  state: Exp;  lines: +22 -0;  commitid: rJLWVQomQ3D2sQ5u;
*** empty log message ***
----------------------------
revision 2.830
date: 2009-09-29 07:23:09 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: qVMdko3H2mWabA5u;
*** empty log message ***
----------------------------
revision 2.829
date: 2009-09-28 23:55:41 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: w2hlu5vOxjzFHx5u;
*** empty log message ***
----------------------------
revision 2.828
date: 2009-09-28 04:53:52 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: EvnqFQBJZ3qXnr5u;
*** empty log message ***
----------------------------
revision 2.827
date: 2009-09-28 04:44:28 -0700;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: O8pupjdvoPnJkr5u;
*** empty log message ***
----------------------------
revision 2.826
date: 2009-09-27 12:16:16 -0700;  author: albinus;  state: Exp;  lines: +16 -0;  commitid: ORUJRFME2xSDRl5u;
*** empty log message ***
----------------------------
revision 2.825
date: 2009-09-27 08:50:11 -0700;  author: tzz;  state: Exp;  lines: +5 -0;  commitid: Hyj6khcNYC71Jk5u;
(tramp-imap-file-name-handler-alist): Remove
file-local-copy handler.
----------------------------
revision 2.824
date: 2009-09-24 01:48:49 -0700;  author: albinus;  state: Exp;  lines: +16 -0;  commitid: AuOt16bL3jsruU4u;
*** empty log message ***
----------------------------
revision 2.823
date: 2009-09-19 12:50:43 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: HHQfRNUx3Bqojk4u;
*** empty log message ***
----------------------------
revision 2.822
date: 2009-09-08 08:30:31 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: ZvF4RvOzj7n8eT2u;
*** empty log message ***
----------------------------
revision 2.821
date: 2009-09-04 01:10:48 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: AsGYBP9k11dgVk2u;
*** empty log message ***
----------------------------
revision 2.820
date: 2009-09-02 02:59:48 -0700;  author: albinus;  state: Exp;  lines: +13 -0;  commitid: Lmybt38H6UCDA52u;
*** empty log message ***
----------------------------
revision 2.819
date: 2009-09-01 14:08:52 -0700;  author: albinus;  state: Exp;  lines: +24 -0;  commitid: phPhHOKXq3n4k12u;
*** empty log message ***
----------------------------
revision 2.818
date: 2009-08-28 05:32:38 -0700;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: bwC1ZaAAOp42Bs1u;
*** empty log message ***
----------------------------
revision 2.817
date: 2009-08-28 05:32:00 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: amFtI61SDBDOAs1u;
*** empty log message ***
----------------------------
revision 2.816
date: 2009-08-28 05:30:21 -0700;  author: albinus;  state: Exp;  lines: +25 -0;  commitid: G8sr5o7SlUnfAs1u;
*** empty log message ***
----------------------------
revision 2.815
date: 2009-08-27 06:46:52 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: XiWrxALe4jFu2l1u;
*** empty log message ***
----------------------------
revision 2.814
date: 2009-08-27 06:33:13 -0700;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: Lvmz2P6V4qxOXk1u;
*** empty log message ***
----------------------------
revision 2.813
date: 2009-08-27 06:01:29 -0700;  author: albinus;  state: Exp;  lines: +3 -0;  commitid: UFojZSaJAEuVMk1u;
*** empty log message ***
----------------------------
revision 2.812
date: 2009-08-27 05:48:34 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: vq96jw6JY6xuIk1u;
*** empty log message ***
----------------------------
revision 2.811
date: 2009-08-19 02:36:54 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: NzS52vMKi5oGUh0u;
*** empty log message ***
----------------------------
revision 2.810
date: 2009-08-18 05:03:28 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: 7ysEJT1JtQWWKa0u;
*** empty log message ***
----------------------------
revision 2.809
date: 2009-08-17 21:15:09 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: 3C7KMJLZv9dda80u;
*** empty log message ***
----------------------------
revision 2.808
date: 2009-08-17 21:07:23 -0700;  author: albinus;  state: Exp;  lines: +11 -0;  commitid: uY2suqZlk51y780u;
*** empty log message ***
----------------------------
revision 2.807
date: 2009-08-17 12:03:45 -0700;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: NjwjyehujKI3750u;
*** empty log message ***
----------------------------
revision 2.806
date: 2009-08-17 07:45:32 -0700;  author: albinus;  state: Exp;  lines: +8 -1;  commitid: jNeIx5qvEucyG30u;
*** empty log message ***
----------------------------
revision 2.805
date: 2009-08-16 08:17:41 -0700;  author: albinus;  state: Exp;  lines: +19 -0;  commitid: SCCK8qJUhr8uTVZt;
*** empty log message ***
----------------------------
revision 2.804
date: 2009-08-15 11:08:36 -0700;  author: albinus;  state: Exp;  lines: +18 -0;  commitid: TK1N1T5zS817SOZt;
*** empty log message ***
----------------------------
revision 2.803
date: 2009-08-14 12:07:53 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: H20yzciKE4LreHZt;
*** empty log message ***
----------------------------
revision 2.802
date: 2009-08-14 07:43:45 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: QON7Fcvq011VLFZt;
*** empty log message ***
----------------------------
revision 2.801
date: 2009-08-09 07:21:34 -0700;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: E9bIFLjmujtbO1Zt;
*** empty log message ***
----------------------------
revision 2.800
date: 2009-08-07 08:04:43 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: CdtjKr8K57D37MYt;
*** empty log message ***
----------------------------
revision 2.799
date: 2009-08-06 07:20:21 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: fO1M9qMw4CdPTDYt;
*** empty log message ***
----------------------------
revision 2.798
date: 2009-08-05 22:53:13 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: AFAUMtJ6H0QL5BYt;
*** empty log message ***
----------------------------
revision 2.797
date: 2009-08-05 22:52:36 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: ydMPD0KuiyNy5BYt;
*** empty log message ***
----------------------------
revision 2.796
date: 2009-08-05 14:20:26 -0700;  author: albinus;  state: Exp;  lines: +16 -1;  commitid: MRz8wlfUPD1RfyYt;
*** empty log message ***
----------------------------
revision 2.795
date: 2009-08-03 20:27:20 -0700;  author: albinus;  state: Exp;  lines: +3 -0;  commitid: QSxkior6qMzIlkYt;
*** empty log message ***
----------------------------
revision 2.794
date: 2009-08-03 20:23:07 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: QvuEBKySjffgkkYt;
*** empty log message ***
----------------------------
revision 2.793
date: 2009-08-03 12:29:14 -0700;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: 2TL9xhWVj34HHhYt;
*** empty log message ***
----------------------------
revision 2.792
date: 2009-08-03 01:30:40 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: lfPEPymguQkQ3eYt;
*** empty log message ***
----------------------------
revision 2.791
date: 2009-08-03 01:17:38 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: XK4xsjCaZAqnZdYt;
*** empty log message ***
----------------------------
revision 2.790
date: 2009-08-02 10:07:39 -0700;  author: albinus;  state: Exp;  lines: +15 -0;  commitid: 72sRo1578Jr7X8Yt;
*** empty log message ***
----------------------------
revision 2.789
date: 2009-07-28 13:32:00 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: jhLjZmHaXDgbfwXt;
*** empty log message ***
----------------------------
revision 2.788
date: 2009-07-16 03:21:20 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: N7XJBRoT8cAGfVVt;
*** empty log message ***
----------------------------
revision 2.787
date: 2009-07-08 05:44:27 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: yo2dxwz8FJDEiUUt;
*** empty log message ***
----------------------------
revision 2.786
date: 2009-07-08 05:38:46 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: xeoUjFiQRMtHgUUt;
*** empty log message ***
----------------------------
revision 2.785
date: 2009-07-06 06:33:37 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: ic2EIzcleDXzDEUt;
*** empty log message ***
----------------------------
revision 2.784
date: 2009-07-03 07:51:57 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: x7JTfcEw4iQqahUt;
*** empty log message ***
----------------------------
revision 2.783
date: 2009-07-03 07:46:17 -0700;  author: albinus;  state: Exp;  lines: +13 -0;  commitid: o3BGKVTqIGVt8hUt;
*** empty log message ***
----------------------------
revision 2.782
date: 2009-07-02 08:30:26 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: Ft7mbFJ9y3XCp9Ut;
*** empty log message ***
----------------------------
revision 2.781
date: 2009-07-01 08:22:07 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: BiGBPJgDXxILo1Ut;
*** empty log message ***
----------------------------
revision 2.780
date: 2009-07-01 08:18:25 -0700;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: yj2ImceG76Iun1Ut;
*** empty log message ***
----------------------------
revision 2.779
date: 2009-06-30 14:06:25 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: cP8vqiaR1l3OkVTt;
*** empty log message ***
----------------------------
revision 2.778
date: 2009-06-30 08:26:16 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: 7JvGJDCVy8zbsTTt;
*** empty log message ***
----------------------------
revision 2.777
date: 2009-06-30 07:45:09 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: 3QBTvR4QIIJ4eTTt;
*** empty log message ***
----------------------------
revision 2.776
date: 2009-06-30 05:18:10 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: z6fUmhCplk4EpSTt;
*** empty log message ***
----------------------------
revision 2.775
date: 2009-06-30 05:17:56 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: FJMTgNIlMYBzpSTt;
*** empty log message ***
----------------------------
revision 2.774
date: 2009-06-29 14:13:44 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: 9vs9VhKKEdbjpNTt;
*** empty log message ***
----------------------------
revision 2.773
date: 2009-06-23 22:04:05 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: xBY8Iier3LjDc4Tt;
*** empty log message ***
----------------------------
revision 2.772
date: 2009-06-22 12:24:50 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: pBmhCj5tEWXW1TSt;
*** empty log message ***
----------------------------
revision 2.771
date: 2009-06-22 00:39:05 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 3ZxL6JbAalQQ7PSt;
*** empty log message ***
----------------------------
revision 2.770
date: 2009-06-21 13:20:58 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: jBWrh7epzpw9nLSt;
*** empty log message ***
----------------------------
revision 2.769
date: 2009-06-17 07:52:41 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: KxQHomu2GGnzGdSt;
*** empty log message ***
----------------------------
revision 2.768
date: 2009-06-15 08:38:35 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: scHB9jjsrQVi0YRt;
*** empty log message ***
----------------------------
revision 2.767
date: 2009-06-13 03:46:23 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: 5rotk6LH3nwYrGRt;
*** empty log message ***
----------------------------
revision 2.766
date: 2009-06-07 09:08:14 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: HSpnWywzG7zlqWQt;
*** empty log message ***
----------------------------
revision 2.765
date: 2009-06-06 16:15:41 -0700;  author: albinus;  state: Exp;  lines: +24 -0;  commitid: jDxMJsl2jiRYOQQt;
*** empty log message ***
----------------------------
revision 2.764
date: 2009-04-24 06:46:55 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: CY12GA3z2fBC3hLt;
*** empty log message ***
----------------------------
revision 2.763
date: 2009-04-23 07:13:17 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: 2ZixgvDoUKNEe9Lt;
*** empty log message ***
----------------------------
revision 2.762
date: 2009-04-21 13:00:39 -0700;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: 6X0hHqruFcANdVKt;
*** empty log message ***
----------------------------
revision 2.761
date: 2009-04-19 13:33:52 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: hDlRV9h8JIBvsFKt;
*** empty log message ***
----------------------------
revision 2.760
date: 2009-04-14 07:47:52 -0700;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: ZZdspHNHA5OsIZJt;
*** empty log message ***
----------------------------
revision 2.759
date: 2009-04-12 12:22:25 -0700;  author: albinus;  state: Exp;  lines: +13 -0;  commitid: MXY7qnJQIEzCiLJt;
*** empty log message ***
----------------------------
revision 2.758
date: 2009-04-05 11:05:06 -0700;  author: albinus;  state: Exp;  lines: +2 -4;  commitid: 6ktDaXS9NfI26RIt;
*** empty log message ***
----------------------------
revision 2.757
date: 2009-04-05 10:34:46 -0700;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: UwQ0A3JCj8aDVQIt;
*** empty log message ***
----------------------------
revision 2.756
date: 2009-03-23 09:25:44 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: 4cLEGAPXm19DXaHt;

* tramp.el (tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Don't use quotes
for `tramp-end-of-output'.
(tramp-open-connection-setup-interactive-shell): Trace coding system.
----------------------------
revision 2.755
date: 2009-03-22 04:27:24 -0700;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: XJUjpkTYGDysl1Ht;
*** empty log message ***
----------------------------
revision 2.754
date: 2009-03-17 11:41:37 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: h1uGcnrMNfcnUpGt;
*** empty log message ***
----------------------------
revision 2.753
date: 2009-03-15 12:32:09 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: rzS13N4XC94LfaGt;
*** empty log message ***
----------------------------
revision 2.752
date: 2009-02-26 06:46:16 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: wukohrrB7uoudXDt;
*** empty log message ***
----------------------------
revision 2.751
date: 2009-02-22 07:31:25 -0800;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: ECp4LjByePB1BrDt;
*** empty log message ***
----------------------------
revision 2.750
date: 2009-02-22 07:11:33 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: DbytgWmGJY3durDt;
*** empty log message ***
----------------------------
revision 2.749
date: 2009-02-17 08:22:07 -0800;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: GVwv58GjsKdi2OCt;
*** empty log message ***
----------------------------
revision 2.748
date: 2009-02-15 13:05:11 -0800;  author: albinus;  state: Exp;  lines: +15 -0;  commitid: xNVnQjzWvkvtFzCt;
*** empty log message ***
----------------------------
revision 2.747
date: 2009-02-11 12:10:28 -0800;  author: albinus;  state: Exp;  lines: +8 -1;  commitid: SRjVVaxaNziCu3Ct;
*** empty log message ***
----------------------------
revision 2.746
date: 2009-02-06 08:13:06 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: ofjs0C4nEmi8loBt;
*** empty log message ***
----------------------------
revision 2.745
date: 2009-02-01 02:15:03 -0800;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: iTj87accCN0iwIAt;
*** empty log message ***
----------------------------
revision 2.744
date: 2009-02-01 01:45:04 -0800;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: atAsKFbL10P0mIAt;
*** empty log message ***
----------------------------
revision 2.743
date: 2009-01-29 13:56:31 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: pPRj0OMVmZdVuoAt;
*** empty log message ***
----------------------------
revision 2.742
date: 2009-01-18 22:56:54 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: 5Ab0pECQLgDdQ1zt;
*** empty log message ***
----------------------------
revision 2.741
date: 2009-01-05 23:46:01 -0800;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: Hx4jqMqdhJsYwmxt;
*** empty log message ***
----------------------------
revision 2.740
date: 2009-01-05 11:46:22 -0800;  author: albinus;  state: Exp;  lines: +15 -0;  commitid: eCSKwtsRUDX5yixt;
*** empty log message ***
----------------------------
revision 2.739
date: 2009-01-03 06:35:01 -0800;  author: albinus;  state: Exp;  lines: +23 -0;  commitid: yLJB0nEjyl1dT0xt;
*** empty log message ***
----------------------------
revision 2.738
date: 2008-12-22 08:34:20 -0800;  author: albinus;  state: Exp;  lines: +11 -0;  commitid: SyaTmxGPifT9Wtvt;
*** empty log message ***
----------------------------
revision 2.737
date: 2008-12-04 12:40:57 -0800;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: 0XVC1Una1pkBSbtt;
*** empty log message ***
----------------------------
revision 2.736
date: 2008-11-30 22:33:25 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: u6XRdMwJNJxohJst;
*** empty log message ***
----------------------------
revision 2.735
date: 2008-11-25 22:06:10 -0800;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: bLgrTXOC5o7ri5st;
*** empty log message ***
----------------------------
revision 2.734
date: 2008-11-16 06:11:40 -0800;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: BroDyfXPWylViQqt;
*** empty log message ***
----------------------------
revision 2.733
date: 2008-11-16 04:26:12 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: aJ0feDmZfpWLIPqt;
*** empty log message ***
----------------------------
revision 2.732
date: 2008-10-13 22:49:35 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: 1PKPgvbkG9brAymt;
*** empty log message ***
----------------------------
revision 2.731
date: 2008-09-07 04:10:35 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: vkge49wKRbViyPht;
*** empty log message ***
----------------------------
revision 2.730
date: 2008-08-22 12:11:20 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: kVi1XyXDMNc7JOft;
*** empty log message ***
----------------------------
revision 2.729
date: 2008-08-13 22:12:21 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: iJXeRylrnOCelIet;
*** empty log message ***
----------------------------
revision 2.728
date: 2008-07-27 20:50:31 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 769XZif0Fkz2rwct;
*** empty log message ***
----------------------------
revision 2.727
date: 2008-07-27 09:07:55 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: PQPGipCa9JHZxsct;
*** empty log message ***
----------------------------
revision 2.726
date: 2008-07-26 11:08:19 -0700;  author: albinus;  state: Exp;  lines: +14 -0;  commitid: CjW8gtnXsDWiflct;
*** empty log message ***
----------------------------
revision 2.725
date: 2008-07-24 10:45:20 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: b0geSNDwIsjpb5ct;
*** empty log message ***
----------------------------
revision 2.724
date: 2008-07-23 12:13:25 -0700;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: Y76hRFf1hrdCHXbt;
*** empty log message ***
----------------------------
revision 2.723
date: 2008-06-29 09:58:16 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: CuzIvyRLb645JR8t;
*** empty log message ***
----------------------------
revision 2.722
date: 2008-06-28 03:11:44 -0700;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: Q22KsUlRM32CvH8t;
*** empty log message ***
----------------------------
revision 2.721
date: 2008-06-22 01:25:56 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: DyGS0DQNEZOg7V7t;
*** empty log message ***
----------------------------
revision 2.720
date: 2008-06-15 09:55:51 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: E8wq1tNgVhb9a47t;
*** empty log message ***
----------------------------
revision 2.719
date: 2008-06-15 06:33:12 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: UkCKAF6iOAfD237t;
*** empty log message ***
----------------------------
revision 2.718
date: 2008-05-25 14:14:26 -0700;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: 2gJV0vqlxZfIgo4t;
*** empty log message ***
----------------------------
revision 2.717
date: 2008-05-25 14:11:51 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: l5rN7uouCLCPfo4t;
*** empty log message ***
----------------------------
revision 2.716
date: 2008-05-25 14:01:01 -0700;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: KamymAqPLc97co4t;
*** empty log message ***
----------------------------
revision 2.715
date: 2008-05-25 13:36:34 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: l2LbmM3JONZI3o4t;
*** empty log message ***
----------------------------
revision 2.714
date: 2008-05-19 12:03:50 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: yA3MEEiCYRSRJB3t;
*** empty log message ***
----------------------------
revision 2.713
date: 2008-05-16 13:15:54 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: dS31AokwwRBzee3t;
*** empty log message ***
----------------------------
revision 2.712
date: 2008-05-15 14:02:47 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: PhLgKLqSKY3Ew63t;
*** empty log message ***
----------------------------
revision 2.711
date: 2008-05-14 13:42:00 -0700;  author: tzz;  state: Exp;  lines: +5 -0;  commitid: Lk0U7ts2yTczrY2t;
Load auth-source library.
(tramp-read-passwd): Use it for password, not login.
----------------------------
revision 2.710
date: 2008-05-14 12:25:53 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: sgXtja4ooWQo1Y2t;
*** empty log message ***
----------------------------
revision 2.709
date: 2008-04-28 12:04:54 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: tR2DfSJJGui5qU0t;
*** empty log message ***
----------------------------
revision 2.708
date: 2008-04-27 09:39:48 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: PvkHF9U2pqyiEL0t;
*** empty log message ***
----------------------------
revision 2.707
date: 2008-04-27 09:30:52 -0700;  author: albinus;  state: Exp;  lines: +17 -0;  commitid: DbtiZsck6kEeBL0t;
*** empty log message ***
----------------------------
revision 2.706
date: 2008-04-27 02:27:29 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: Gkz7MxQKObtZfJ0t;
*** empty log message ***
----------------------------
revision 2.705
date: 2008-04-24 12:29:59 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: UxMsjy2AFmmEGo0t;
*** empty log message ***
----------------------------
revision 2.704
date: 2008-04-09 12:49:53 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: dh3BoxesvFMnhtYs;
*** empty log message ***
----------------------------
revision 2.703
date: 2008-04-07 12:22:46 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: IZpyzf7PT474cdYs;
*** empty log message ***
----------------------------
revision 2.702
date: 2008-04-04 14:59:13 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: uooDKpnQ7CtI9QXs;
*** empty log message ***
----------------------------
revision 2.701
date: 2008-04-03 12:12:14 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: ifDTQC2haJvqgHXs;
*** empty log message ***
----------------------------
revision 2.700
date: 2008-04-02 11:56:00 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: vR6JVHlMHMxQczXs;
*** empty log message ***
----------------------------
revision 2.699
date: 2008-03-30 09:41:38 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: Ys4mvo0UiFpJyaXs;
*** empty log message ***
----------------------------
revision 2.698
date: 2008-03-29 12:57:19 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: 7cnFa0Bk82eRF3Xs;
*** empty log message ***
----------------------------
revision 2.697
date: 2008-03-21 10:19:46 -0700;  author: albinus;  state: Exp;  lines: +253 -248;  commitid: yYOfGwvRbjyK31Ws;
*** empty log message ***
----------------------------
revision 2.696
date: 2008-03-19 14:10:59 -0700;  author: albinus;  state: Exp;  lines: +17 -0;  commitid: rrEgkFObzPz3pMVs;
*** empty log message ***
----------------------------
revision 2.695
date: 2008-03-17 15:56:18 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: xRXYLcDN87Ra3xVs;
*** empty log message ***
----------------------------
revision 2.694
date: 2008-03-17 15:46:43 -0700;  author: albinus;  state: Exp;  lines: +26 -0;  commitid: INxb6Pco2JTSZwVs;
*** empty log message ***
----------------------------
revision 2.693
date: 2008-03-15 14:46:51 -0700;  author: albinus;  state: Exp;  lines: +19 -0;  commitid: 1dLIQLU59JOkJgVs;
*** empty log message ***
----------------------------
revision 2.692
date: 2008-02-09 00:46:19 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: 8NwCiwlONNvjxHQs;
*** empty log message ***
----------------------------
revision 2.691
date: 2008-02-05 13:20:38 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: LNcBX7mKqBZ3QfQs;
*** empty log message ***
----------------------------
revision 2.690
date: 2008-02-03 03:55:00 -0800;  author: albinus;  state: Exp;  lines: +18 -0;  commitid: Qx608hgYX5a0MWPs;
*** empty log message ***
----------------------------
revision 2.689
date: 2008-01-29 13:08:17 -0800;  author: albinus;  state: Exp;  lines: +11 -0;  commitid: dd35IYJcWqULZlPs;
*** empty log message ***
----------------------------
revision 2.688
date: 2008-01-28 13:16:37 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: BaoehLvtdiZC4ePs;
*** empty log message ***
----------------------------
revision 2.687
date: 2008-01-27 08:23:39 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 5FCvpO4ePTg7u4Ps;
*** empty log message ***
----------------------------
revision 2.686
date: 2008-01-27 07:55:33 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: dOQMIC5xRnutk4Ps;
*** empty log message ***
----------------------------
revision 2.685
date: 2008-01-26 06:26:22 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: TEqY2rUAfB2SRVOs;
*** empty log message ***
----------------------------
revision 2.684
date: 2008-01-24 13:22:38 -0800;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: SVsZqseJ0kEDeIOs;
*** empty log message ***
----------------------------
revision 2.683
date: 2008-01-24 13:19:52 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: exiu8WfeyYHudIOs;

* lisp/tramp.el (tramp-do-copy-or-rename-file): Flush the cache of the
source file in case of `rename'.
----------------------------
revision 2.682
date: 2008-01-23 12:38:53 -0800;  author: albinus;  state: Exp;  lines: +11 -0;  commitid: 5jJCs9jJDHUk1AOs;

* lisp/tramp.el (tramp-end-of-output): Add `tramp-rsh-end-of-line' into
the regexp.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Don't send `tramp-rsh-end-of-line' additionally, when setting the
prompt.
(tramp-wait-for-output): Distinguish different prompt formats.
(tramp-get-test-nt-command): Don't check for "\n" in the prompt.
(tramp-local-host-p): Check whether temp directory is writable.
----------------------------
revision 2.681
date: 2008-01-17 11:48:51 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: kO14QeUbiokcWNNs;

* lisp/tramp.el (tramp-remote-process-environment): Set "LC_ALL=C".
----------------------------
revision 2.680
date: 2008-01-14 11:29:13 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: dTgT6hfSSiYtVpNs;

* lisp/tramp.el (tramp-local-host-p): Use `tramp-file-name-host'
instead of `tramp-file-name-real-host'.
----------------------------
revision 2.679
date: 2008-01-12 03:04:22 -0800;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.678
date: 2008-01-08 11:58:11 -0800;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: KRtKGntf9F5ohEMs;

* lisp/tramp.el (tramp-handle-process-file): Handle the case where
DESTINATION is a consp with t as car.
(tramp-wait-for-output): We shall remove exactly what has been
find by the search.
----------------------------
revision 2.677
date: 2008-01-04 14:32:30 -0800;  author: albinus;  state: Exp;  lines: +11 -0;  commitid: gTXvBQYlNbReg9Ms;

* lisp/tramp.el (tramp-remote-process-environment): Add "LC_CTYPE=C".
Reported by Pete Forman <pete.forman@westerngeco.com>.
(tramp-perl-encode, tramp-perl-decode): Update copyrights.
----------------------------
revision 2.676
date: 2007-12-23 04:26:39 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: NvaEbe3Y9l0piyKs;

* lisp/trampver.el.in (x): Fix buggy call to `error'.
----------------------------
revision 2.675
date: 2007-12-23 04:02:44 -0800;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: dXm8BQWGRHrW9yKs;

Version 2.1.12 released.

* configure.ac: Bump version.

* lisp/tramp.el: New todo item.

* lisp/tramp-smb.el (tramp-smb-handle-insert-directory): Handle "-F"
switch.  Reported by Mark T. Kennedy <mkennedy@diamondbackcap.com>.
----------------------------
revision 2.674
date: 2007-12-18 12:56:22 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: u4YIGu3nyaNihXJs;

* tramp-compat.el (top): Require cl only when compiling.
Reported by Glenn Morris <rgm@gnu.org>.
----------------------------
revision 2.673
date: 2007-12-17 12:20:09 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: pFDzyTIPArwJ6PJs;

* lisp/tramp.el (tramp-open-connection-setup-interactive-shell)
(tramp-find-shell): Send only single prompt setting commands, in
order to avoid double-prompt.
----------------------------
revision 2.672
date: 2007-12-04 13:48:20 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: YV9grC60UMnW0aIs;

* lisp/tramp.el: Require password-cache or password.
----------------------------
revision 2.671
date: 2007-11-19 12:01:01 -0800;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: aFmIyJs3joLZTdGs;

* lisp/tramp.el (tramp-open-connection-setup-interactive-shell): Still
some tuning in case of an echoing shell.
(tramp-send-command): Connection property "remote-echo" is not
persistent; cache key is the process therefore.
----------------------------
revision 2.670
date: 2007-11-18 21:48:45 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: d6mBoO1EHInAb9Gs;

* tramp.el (tramp-terminal-type): Remove duplicated definition.
----------------------------
revision 2.669
date: 2007-11-18 02:21:15 -0800;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: jkzQ2MY6x6n1J2Gs;

* lisp/tramp.el (tramp-open-connection-setup-interactive-shell): Call
`tramp-cleanup-connection' via funcall.
----------------------------
revision 2.668
date: 2007-11-18 02:11:38 -0800;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: RBxaXmIdsa2tF2Gs;

* lisp/tramp.el (tramp-completion-reread-directory-timeout): New
defcustom.
(tramp-handle-file-name-all-completions): Flush directory contents
from cache regularly.
(tramp-set-auto-save-file-modes): Check also for
`buffer-modified-p'.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Temp file is already
created when copying.

* texi/tramp.texi (Filename completion): Simplify explanation of
double-slash behaviour.  Explain directory contents flushing.
----------------------------
revision 2.667
date: 2007-11-12 11:59:07 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: S56poiUr97a57kFs;

* lisp/tramp.el (tramp-open-connection-setup-interactive-shell): Check
whether the output of "uname -sr" has been changed.

* texi/tramp.texi (Connection caching): Tramp flushes connection
properties when remote operating system has been changed.
----------------------------
revision 2.666
date: 2007-11-08 12:07:23 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: KGsz1Z5Uqg97iOEs;

* lisp/tramp.el (tramp-maybe-open-connection): Use a local copy of
`process-environment'.
----------------------------
revision 2.665
date: 2007-11-07 12:34:52 -0800;  author: albinus;  state: Exp;  lines: +21 -0;  commitid: 6QaEdkjJBQXZsGEs;

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Don't expand
the remote connection identification.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Set also $PS2 and $PS3 when setting $PS1.  Check for shell echoing
before calling stty.

* lisp/tramp-cache.el (tramp-cache-print)
(tramp-dump-connection-properties): Fix docstring.
(tramp-list-connections): Renamed from
`tramp-cache-list-connections'.

* lisp/tramp-cmds.el (tramp-cleanup-connection): Apply it.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Don't expand the
remote connection identification when setting connection property.

* lisp/tramp-smb.el (tramp-smb-handle-substitute-in-file-name): "//"
substitutes only in the local filename part.

* texi/tramp.texi (Overview): Mention also the PuTTY integration under
Win32.  Remove paragraphs about Tramp's experimental status.
(Frequently Asked Questions): Add code example for highlighting
the mode line.
----------------------------
revision 2.664
date: 2007-11-06 13:11:37 -0800;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: 94tJSiGFLfU2IyEs;

* lisp/tramp.el (top): Don't autoload `tramp-cache-print'.

* lisp/tramp-cache (tramp-cache-print): Move down.
(tramp-cache-list-connections): New defun.

* lisp/tramp-cmds.el (tramp-cleanup-connection): Use it.
----------------------------
revision 2.663
date: 2007-11-05 12:38:51 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: oS6Ugbo6Hm3SyqEs;

* lisp/tramp.el (tramp-wait-for-output): Ignore escape sequences in the
prompt.
----------------------------
revision 2.662
date: 2007-10-31 13:00:26 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: f9KDfynUwQfxvMDs;

* lisp/tramp.el (tramp-handle-shell-command): Call `start-file-process'
directly.  Fix bug in deleting temp file.
----------------------------
revision 2.661
date: 2007-10-30 13:21:43 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: WH2b3jFqSDeVEEDs;

* lisp/tramp.el (tramp-maybe-open-connection): Set $LC_ALL to "C".

* lisp/tramp-cache.el (tramp-flush-file-function): Check also
`default-directory' if `buffer-file-name' does not return a
string.  Added to `eshell-pre-command-hook'.
----------------------------
revision 2.660
date: 2007-10-27 06:50:42 -0700;  author: albinus;  state: Exp;  lines: +22 -0;  commitid: h3wsKiYvXLWtAeDs;

* lisp/tramp.el (tramp-wrong-passwd-regexp): Tune regexp.
(tramp-get-remote-tmpdir): New defun.
(tramp-make-tramp-temp-file): Use it.
(tramp-local-call-process): New defun.  Replace all calls of
`call-process' by this when appropriate.
(tramp-handle-write-region): Replace calls of `file-attributes' by
`tramp-compat-file-attributes'.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Make the first command a `tramp-send-command' call, with let-bind
of `tramp-end-of-output'.
(tramp-version, tramp-bug, tramp-reporter-dump-variable)
(tramp-load-report-modules, tramp-append-tramp-buffers): Move to
tramp-cmds.el.

* lisp/tramp-fish.el (tramp-fish-handle-copy-file)
(tramp-fish-do-copy-or-rename-file)
(tramp-fish-do-copy-or-rename-file-directly):
* lisp/tramp-smb.el (tramp-smb-handle-copy-file):
Add parameter PRESERVE-UID-GID.
----------------------------
revision 2.659
date: 2007-10-23 14:50:55 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: WQGp5ST40E6jnLCs;

* lisp/tramp.el (tramp-set-file-uid-gid): Protect `call-process' when
we are local.

* texi/tramp.texi (Traces and Profiles): Simplify loop over
`trace-function-background'.
----------------------------
revision 2.658
date: 2007-10-22 12:06:20 -0700;  author: albinus;  state: Exp;  lines: +18 -0;  commitid: u424SqaGvkwRuCCs;

* lisp/tramp.el (tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Improve sending
initial commands.
(tramp-action-terminal): Send debug message.
(tramp-wait-for-shell-prompt, tramp-send-command-internal): Removed.
(tramp-barf-if-no-shell-prompt): Insert code of
`tramp-wait-for-shell-prompt'.

* lisp/tramp-util.el (tramp-PC-expand-many-files): New defun.
(tramp-advice-PC-expand-many-files): Defadvice moved from tramp.el.
----------------------------
revision 2.657
date: 2007-10-21 06:25:37 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: h1CUokhKH2z4EsCs;

* lisp/tramp.el (tramp-do-copy-or-rename-file-directly): Make more
rigid checks.
(tramp-handle-insert-file-contents): Don't raise a tramp-error but
a signal, in order to give the callee a chance to suppress.
(tramp-handle-write-region): Set owner also in case of short
track.  Don't use compatibility calls for `write-region' anymore.
----------------------------
revision 2.656
date: 2007-10-18 19:57:31 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: xv8CtIjZmVqDe9Cs;

* lisp/tramp.el (tramp-rfn-eshadow-update-overlay): Save excursion.
Use `save-restriction' rather than `widen'.
----------------------------
revision 2.655
date: 2007-10-17 15:09:50 -0700;  author: albinus;  state: Exp;  lines: +14 -0;  commitid: gM2uQ3KaIjZIFZBs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-cmds.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-cmds.el.

* lisp/tramp.el (top): Put load of all tramp-* files into a dolist.
Require tramp-cmds.el.
(tramp-clear-passwd): Add parameter VEC.  Adapt all callees.
(tramp-append-tramp-buffers): Apply `tramp-list-tramp-buffers'.

* lisp/tramp-cmds.el: New file.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Apply VEC to
`tramp-clear-passwd'.
----------------------------
revision 2.654
date: 2007-10-15 12:22:41 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: qRT37mPU3aioOIBs;

* lisp/tramp.el (tramp-handle-file-name-all-completions): Expand
DIRECTORY.
(tramp-handle-dired-recursive-delete-directory): Call "rm -rf".

* texi/tramp.texi (Function Index, Variable Index): New nodes.
(Remote shell setup): Describe `tramp-password-prompt-regexp'.
----------------------------
revision 2.653
date: 2007-10-14 11:51:28 -0700;  author: albinus;  state: Exp;  lines: +14 -0;  commitid: t0mwalxwQ9YHFABs;

* lisp/tramp.el (tramp-make-tramp-temp-file): We can get rid of
DONT-CREATE.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): Use `make-temp-name'.  This is
possible, because we don't need to create the temporary file, but
we need a prefix for ssh, which has its own temporary file
handling.
(tramp-handle-delete-directory): Add "-f" to rmdir.

* lisp/tramp-util.el (top): Check for `tramp-handle-start-file-process',
not its symbol-function.
----------------------------
revision 2.652
date: 2007-10-09 21:34:16 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: bfWBAWxgBaaT30Bs;

Version 2.1.11 released.
----------------------------
revision 2.651
date: 2007-10-08 13:03:28 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: ZIw7t1mXjHGwgPAs;

* lisp/tramp.el (tramp-find-foreign-file-name-handler): Check also
host.
(tramp-maybe-send-script): Apply `member' but `memq'.
(tramp-advice-file-expand-wildcards): Simplify implementation.
----------------------------
revision 2.650
date: 2007-10-06 04:52:24 -0700;  author: albinus;  state: Exp;  lines: +18 -0;  commitid: rLyecNwMxsQHBwAs;

* lisp/tramp.el (top): Move loading of tramp-util.el and tramp-vc.el to
tramp-compat.el.
(tramp-make-tramp-temp-file): Complete rewrite.  Create remote
temporary file if possible, in order to avoid a security hole.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): Call `tramp-make-tramp-temp-file'
with DONT-CREATE, because the connection is not setup yet.
(tramp-handle-process-file): Rewrite temporary file handling.
(tramp-completion-mode): New defvar.
(tramp-completion-mode-p): Use it.

* lisp/tramp-compat.el (top):  Load tramp-util.el and tramp-vc.el.

* lisp/tramp-fish.el (tramp-fish-handle-process-file): Rewrite
temporary file handling.

* texi/tramp.texi (External packages): New section.
----------------------------
revision 2.649
date: 2007-10-04 13:04:37 -0700;  author: albinus;  state: Exp;  lines: +16 -0;  commitid: CaRN4HuMV0iBojAs;

* lisp/tramp.el (tramp-make-temp-file): Move to tramp-compat.el.
(tramp-do-copy-or-rename-file-directly): Handle tmpfile only in
the cond clauses where needed.
(tramp-handle-write-region): Rearrange code for proper handling of
tmpfile.

* lisp/tramp-compat.el (tramp-compat-make-temp-file): New defsubst.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el: Rename `tramp-make-temp-file' to
`tramp-compat-make-temp-file'.
----------------------------
revision 2.648
date: 2007-10-03 04:37:06 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: s0aGC0DnHo4QC8As;
*** empty log message ***
----------------------------
revision 2.647
date: 2007-10-03 03:45:47 -0700;  author: albinus;  state: Exp;  lines: +34 -1;  commitid: T0jhSlYBL14Nk8As;

* lisp/tramp.el (top): Add tramp-compat to `tramp-unload-hook'.
(tramp-file-name-handler-alist): Add
`tramp-handle-insert-file-contents-literally'.  Neded for XEmacs.
(tramp-make-temp-file): Use `make-temp-name'. `make-temp-file',
used before, creates the file already, which is not desired.
(tramp-do-copy-or-rename-file-directly): Simplify handling of
temporary file.
(tramp-handle-insert-file-contents): Assign the result in the
short track case.
(tramp-handle-insert-file-contents-literally): New defun.
(tramp-completion-mode-p): Revert change from 2007-09-24.
Checking for `return' etc as last character is not sufficient, for
example in dired-mode when entering <g> (revert-buffer) or
<s> (dired-sort).

* lisp/tramp-compat.el (top): Add also compatibility code for loading
appropriate timer package.
(tramp-compat-copy-tree): Check for `subrp' and `symbol-file' in
order to avoid autoloading problems.

* lisp/tramp-efs-el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Move further compatibility code to
tramp-compat.el.

	* tramp-ftp.el (tramp-ftp-file-name-handler): Handle the case
	where the second parameter of `copy-file' or `rename-file' is a
	remote file but not via ftp.

	* tramp-util.el: Remove `tramp-minor-mode' and its declarations.
----------------------------
revision 2.646
date: 2007-09-30 09:32:29 -0700;  author: albinus;  state: Exp;  lines: +15 -0;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 2.645
date: 2007-09-28 08:52:02 -0700;  author: albinus;  state: Exp;  lines: +37 -0;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 2.644
date: 2007-09-26 21:33:55 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: rETqagHVnfvztkzs;

* lisp/tramp.el (tramp-maybe-open-connection): Make test for alive
connection more robust.
----------------------------
revision 2.643
date: 2007-09-23 22:22:37 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: TVHkNk8JNeCdQWys;

* lisp/tramp.el (tramp-completion-mode-p): Rename from
`tramp-completion-mode'. Revert logic, check `return', `newline'
and such alike. Packages like Icicles tend to use other completion
characters but `tab' and `space' only.
----------------------------
revision 2.642
date: 2007-09-20 22:11:04 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: xfwhuF69r0qaSyys;

* lisp/tramp.el (tramp-rfn-eshadow-overlay): New defvar.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay): New defuns.

* lisp/tramp-smb.el (tramp-smb-errors): Add error message for call
timeout.
----------------------------
revision 2.641
date: 2007-09-09 01:20:59 -0700;  author: albinus;  state: Exp;  lines: +11 -0;  commitid: C6iZp7soVVUMi2xs;

* lisp/tramp.el (top): Remove declarations of `tramp-gw-*' symbols,
they are useless with the byte compiler.
(tramp-make-temp-file, tramp-make-tramp-temp-file): Move up.
(tramp-do-copy-or-rename-file-directly): Rearrange let-bindings.
(tramp-compute-multi-hops): Mask `tramp-gw-*' symbols.
(tramp-file-name-real-host, tramp-file-name-port)
(tramp-find-method, tramp-find-user, tramp-find-host): Make them
defuns.
----------------------------
revision 2.640
date: 2007-09-06 14:22:30 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: CR6IaFnGC5LsJIws;

* lisp/tramp-vc.el (tramp-vc-user-login-name): Use `vc-find-version'
instead of `process-file' to check whether we have a new enough vc
that doesn't need the defadvice.
----------------------------
revision 2.639
date: 2007-09-04 12:22:31 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: qNUmKLq98MHc8sws;

* lisp/tramp-cache.el (top): Improve error message when
`tramp-persistency-file-name' is corrupted.
----------------------------
revision 2.638
date: 2007-08-28 13:05:52 -0700;  author: albinus;  state: Exp;  lines: +23 -0;  commitid: HaYV2zcWsD8QAyvs;

cvs update: Updating admin/unidata
cvs update: Updating etc
P etc/ChangeLog
P etc/NEWS
cvs update: Updating etc/charsets
cvs update: Updating etc/e
cvs update: Updating etc/images
cvs update: Updating etc/images/ezimage
cvs update: Updating etc/images/gnus
cvs update: Updating etc/images/gud
cvs update: Updating etc/images/icons
cvs update: Updating etc/images/lc
cvs update: Updating etc/images/low-color
cvs update: Updating etc/images/mail
cvs update: Updating etc/images/smilies
cvs update: Updating etc/images/tree-widget
cvs update: Updating etc/images/tree-widget/default
cvs update: Updating etc/images/tree-widget/folder
cvs update: Updating etc/refcards
U etc/refcards/de-refcard.pdf
P etc/refcards/de-refcard.tex
cvs update: Updating etc/tree-widget
cvs update: Updating etc/tree-widget/default
cvs update: Updating etc/tree-widget/folder
cvs update: Updating etc/tutorials
cvs update: Updating gc
cvs update: Updating gc/Mac_files
cvs update: Updating gc/doc
cvs update: Updating gc/include
cvs update: Updating gc/include/private
cvs update: Updating info
cvs update: Updating leim
cvs update: Updating leim/CXTERM-DIC
cvs update: Updating leim/MISC-DIC
cvs update: Updating leim/SKK-DIC
cvs update: Updating leim/ja-dic
cvs update: Updating leim/quail
cvs update: Updating leim/skk
cvs update: Updating lib-src
cvs update: Updating lisp
P lisp/ChangeLog
P lisp/info.el
P lisp/time.el
cvs update: Updating lisp/calc
cvs update: Updating lisp/calendar
cvs update: Updating lisp/emacs-lisp
cvs update: Updating lisp/emulation
cvs update: Updating lisp/erc
cvs update: Updating lisp/eshell
cvs update: Updating lisp/gnus
cvs update: Updating lisp/international
cvs update: Updating lisp/language
cvs update: Updating lisp/mail
cvs update: Updating lisp/mh-e
cvs update: Updating lisp/net
cvs update: Updating lisp/obsolete
cvs update: Updating lisp/play
P lisp/play/bubbles.el
P lisp/play/gamegrid.el
cvs update: Updating lisp/progmodes
P lisp/progmodes/cc-langs.el
cvs update: Updating lisp/term
P lisp/term/x-win.el
cvs update: Updating lisp/textmodes
cvs update: Updating lisp/toolbar
cvs update: Updating lisp/url
cvs update: Updating lispintro
cvs update: Updating lispref
cvs update: Updating lock
cvs update: Updating lwlib
cvs update: Updating m4
cvs update: Updating mac
cvs update: Updating mac/Emacs.app
cvs update: Updating mac/Emacs.app/Contents
cvs update: Updating mac/Emacs.app/Contents/MacOS
cvs update: Updating mac/Emacs.app/Contents/Resources
cvs update: Updating mac/Emacs.app/Contents/Resources/English.lproj
cvs update: Updating mac/bin
cvs update: Updating mac/inc
cvs update: Updating mac/inc/sys
cvs update: Updating mac/src
cvs update: Updating man
cvs update: Updating msdos
cvs update: Updating notes
cvs update: Updating nt
cvs update: Updating nt/icons
cvs update: Updating nt/inc
cvs update: Updating nt/inc/arpa
cvs update: Updating nt/inc/netinet
cvs update: Updating nt/inc/sys
cvs update: Updating oldXMenu
cvs update: Updating site-lisp
cvs update: Updating src
P src/ChangeLog
P src/dispextern.h
P src/gtkutil.c
P src/keyboard.c
cvs update: Updating src/bitmaps
cvs update: Updating src/m
cvs update: Updating src/s
cvs update: Updating vms
magdalene:~/src/emacs> ssh ford
The authenticity of host 'ford (192.168.0.50)' can't be established.
RSA key fingerprint is 4f:06:e0:46:f9:13:3e:ac:ae:41:eb:9a:e2:1f:88:a6.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'ford,192.168.0.50' (RSA) to the list of
known hosts.
Linux LKG29808F 2.6.18-4-ixp4xx #1 Sun Apr 22 08:34:11 UTC 2007 armv5tel

The programs included with the Debian GNU/Linux system are free
software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

  GNU nano 2.0.2            File: /tmp/cvsfT5uaA


----------------------------------------------------------------------
----------------------------------------------------------------------
* lisp/tramp.el (tramp-handle-set-file-times): Flush the file
properties.
(tramp-set-file-uid-gid, tramp-get-local-uid)
(tramp-get-local-gid): New defuns.
(tramp-handle-copy-file): Handle new parameter PRESERVE-UID-GID.
(tramp-do-copy-or-rename-file): New parameter PRESERVE-UID-GID.
Improve fast track.
(tramp-do-copy-or-rename-file-directly): Sync parameter list with
the other tramp-do-copy-or-rename-file-* functions.  Major
rewrite.
(tramp-handle-file-local-copy, tramp-handle-insert-file-contents)
(tramp-handle-write-region): Improve fast track.
(tramp-handle-file-remote-p): IDENTIFICATION can also be
'localname.
(tramp-maybe-open-connection): Let `process-adaptive-read-buffering'
be nil.

* lisp/tramp-util.el (tramp-advice-process-file): Rename from
`tramp-advice-call-process'.
(tramp-advice-call-process-shell-command): Correct doc string.
----------------------------
revision 2.637
date: 2007-08-23 22:19:29 -0700;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: cVxmejaz6llQOXus;

* lisp/tramp.el (tramp-local-host-p): New defun.
(tramp-handle-file-local-copy, tramp-handle-write-region):
Implement fast track when being on the local host.
(tramp-file-name-handler): Don't set "started" property.  It shall
be reserved for the "ftp" method.
(tramp-make-copy-program-file-name): Use `tramp-file-name-real-host'.

* lisp/tramp-ftp.el (top): Autoload `tramp-set-connection-property'.
(tramp-ftp-file-name-handler):  Set "started" property.
----------------------------
revision 2.636
date: 2007-08-21 22:38:44 -0700;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: VUup64FY1TX9ZHus;

* lisp/tramp.el (tramp-get-remote-path): New defun.  Replace occurences
of `tramp-default-remote-path' by this function.
(tramp-set-remote-path): Move most of the code to
`tramp-get-remote-path'.
(tramp-get-ls-command, tramp-get-remote-id): Don't check for not
existing directories, this is done already in
`tramp-get-remote-path'.

* texi/tramp.texi (Remote Programs): Persistency file must be cleared
when changing `tramp-remote-path'.
----------------------------
revision 2.635
date: 2007-08-14 11:58:47 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: cqKWGsujYpjLFKts;

* lisp/tramp.el (top): Require cl.el, when `copy-tree' is not available
otherwise.
----------------------------
revision 2.634
date: 2007-08-07 13:20:28 -0700;  author: albinus;  state: Exp;  lines: +14 -1;  commitid: hUSC79nhK79MlRss;

* lisp/tramp.el (tramp-handle-shell-command): Handle OUTPUT-BUFFER and
ERROR-BUFFER more robust.  Display output.
(tramp-handle-process-file): Fix bug inserting resulting output.

* lisp/tramp-cache.el (top): Read persistent connection history when
cache is empty.
----------------------------
revision 2.633
date: 2007-08-01 12:59:25 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: ttLEFGUf6QzHq5ss;

* lisp/tramp.el (tramp-file-name-handler): Add a connection property
when we found a foreign file name handler.  This allows backends
like ftp to profit also from usr/host name completion based on
connection cache.
----------------------------
revision 2.632
date: 2007-07-30 12:22:13 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: 65WZzCqsXnTUhPrs;

* lisp/tramp.el (tramp-wrong-passwd-regexp): Make the regexp more
global matching.
(tramp-send-command-and-read): Search for trash after the regexp
until eol only.  In XEmacs, there is a problem with \n.
----------------------------
revision 2.631
date: 2007-07-29 08:09:36 -0700;  author: albinus;  state: Exp;  lines: +24 -0;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.630
date: 2007-07-24 14:37:34 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: NojAmoGbWKzse4rs;
*** empty log message ***
----------------------------
revision 2.629
date: 2007-07-23 13:33:24 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: fJOGPxd0nkIYTVqs;

* configure.ac: Bump version (to 2.1.11-pre).  Update merge
version to 2.1.10.

* lisp/tramp.el (tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-stat(
(tramp-convert-file-attributes): Handle huge file sizes.
----------------------------
revision 2.628
date: 2007-07-22 09:29:40 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: JpiEgUOKtSqCAMqs;

Version 2.1.10 released.
----------------------------
revision 2.627
date: 2007-07-17 13:49:43 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: WDcBCTK3JXbObaqs;

* lisp/tramp.el (tramp-handle-file-remote-p): Handle optional parameter
IDENTIFICATION.

* lisp/tramp-util.el (tramp-advice-file-remote-p): Handle optional
parameter IDENTIFICATION.
----------------------------
revision 2.626
date: 2007-07-16 14:33:01 -0700;  author: albinus;  state: Exp;  lines: +31 -0;  commitid: hlv4JiwKkWs8s2qs;

* lisp/tramp.el (tramp-handle-set-file-times): New defun.  Replaces
`tramp-touch'.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add entry for `set-file-times'.
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-out-of-band): Use `set-file-times'.
(tramp-handle-unhandled-file-name-directory): Rewrite.
(tramp-convert-file-attributes): Add error handling when inode is
extraordinary big.
(tramp-get-inode): Change parameter from FILE to VEC.

* lisp/tramp-fish.el (tramp-fish-file-name-handler-alist): Add entry
for `set-file-times'.  Rename `start-process' into
`start-file-process'.  Remove `call-process' entry.
(tramp-fish-handle-set-file-times): New defun.
(tramp-fish-handle-executable-find): Use `process-file'.
(tramp-fish-handle-process-file): New defun.  Replaces
`tramp-fish-handle-call-process'.
(tramp-fish-do-copy-or-rename-file-directly): Use
`set-file-times'.
(tramp-fish-get-file-entries): Change `tramp-get-inode' parameter.

* lisp/tramp-smb.el (tramp-smb-handle-file-attributes): Change
`tramp-get-inode' parameter.

* lisp/tramp-util.el (all): Change all checks to (fboundp
'start-file-process).
(set-file-times): Add a defalias if function does not exist.

* texi/tramp.texi (Frequently Asked Questions): Simplify recentf
example.
----------------------------
revision 2.625
date: 2007-07-15 07:44:30 -0700;  author: albinus;  state: Exp;  lines: +14 -0;  commitid: jdzMDGqeXZMseSps;

* tramp.el (tramp-methods, tramp-find-shell)
(tramp-open-connection-setup-interactive-shell)
(tramp-maybe-open-connection): Guard against $PROMPT_COMMAND shell
var.  Reported by Steve Youngs <steve@sxemacs.org>.
(tramp-handle-start-file-process ): Use (current-buffer) if BUFFER
is NIL.  This is according to the specification.  Goto (point-max)
when ready.
(tramp-handle-shell-command): Rewrite completely, using
`process-file' and `start-file-process'.
(tramp-touch): Don't use variable expansion when calling
`shell-command'.
----------------------------
revision 2.624
date: 2007-07-08 02:36:29 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: uObdz1vQQBwFKWos;

* lisp/tramp.el (tramp-handle-file-remote-p): Handle optional parameter
CONNECTED.

* lisp/tramp-util.el (tramp-advice-file-remote-p): Handle optional
parameter CONNECTED.
(all): Use `unhandled-file-name-directory' where appropriate.
----------------------------
revision 2.623
date: 2007-07-07 13:35:30 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: R05FbXfuLJwRqSos;

* aclocal.m4 (AC_EMACS_INFO): Check whether tramp-util.el and
tramp-vc.el are still needed.

* Makefile.in (EMACS_EL_FILES): Remove tramp-util.el and
tramp-vc.el.

* lisp/Makefile.in (EMACS_UTILS): New variable.
(LISP_FILES): Add tramp-util.el and tramp-vc.el depending on
$EMACS_UTILS.
----------------------------
revision 2.622
date: 2007-07-01 11:31:34 -0700;  author: albinus;  state: Exp;  lines: +34 -0;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.621
date: 2007-06-20 13:26:39 -0700;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: 6Fqxls1tJZzgVGms;

* lisp/tramp.el:
* lisp/tramp-cache.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el: Use `expand-file-name' instead of `concat' where
appropriate.

* lisp/tramp.el (tramp-action-yesno, tramp-action-yn): Protect
`pop-to-buffer' by `save-match-data'.

* texi/tramp.texi (Filename completion): Rework examples for local
filename completion.
----------------------------
revision 2.620
date: 2007-06-17 04:12:31 -0700;  author: albinus;  state: Exp;  lines: +14 -0;  commitid: IQTI2NEf6N68Xfms;

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Unify "Tramp" in strings.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): "//" and "/~"
substitute only in the local filename part.  Suggested by Peter
Gordon <peter@pg-consultants.com>.
(tramp-advice-minibuffer-electric-separator)
(tramp-advice-minibuffer-electric-tilde): New defadvices.
(tramp-append-tramp-buffers): Replace "sensible" by "sensitive" in
the hint.

* texi/tramp.texi (Filename completion): "//" substitutes in local
filename only.
----------------------------
revision 2.619
date: 2007-06-10 13:58:37 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: j5FMSZcyy8vAqpls;

* lisp/tramp.el (tramp-handle-insert-file-contents): VISIT must be
handled after insertion of the local copy.  Reported by Peter
Gordon <peter@pg-consultants.com>.
----------------------------
revision 2.618
date: 2007-05-31 13:15:43 -0700;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: ST0w65uyFLXNv7ks;

* lisp/tramp-cache.el (tramp-persistency-file-name): Check also for
`user-emacs-directory' and `user-init-directory'.

* lisp/tramp-gw.el (tramp-gw-open-connection): Apply `vector' instead
of `make-tramp-file-name'.

* lisp/tramp-util.el (all): Quote the function names in
`tramp-util-unload-hook' if they aren't symbols yet.
(tramp-advice-before-ediff-exec-process): New defadvice.
----------------------------
revision 2.617
date: 2007-05-27 12:54:43 -0700;  author: albinus;  state: Exp;  lines: +27 -1;  commitid: 7PsnkV1mXPbnwBjs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-method,
(tramp-file-name-user, tramp-file-name-host)
(tramp-file-name-localname): New defuns, replacing defstruct
`tramp-file-name'.
(tramp-completion-dissect-file-name1, tramp-compute-multi-hops)
(tramp-dissect-file-name): Apply `vector' instead of
`make-tramp-file-name'.
(tramp-do-copy-or-rename-file-out-of-band): Aset 3rd index instead
of 4th, when setting localname.
(tramp-compute-multi-hops): Aset 2nd index instead of 3rd, when
setting host.

* lisp/tramp-cache.el (all): Aset 3rd index instead of 4th, when
unifying localname.
----------------------------
revision 2.616
date: 2007-05-22 13:21:44 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: DjFy5iQMKvGUPXis;

* lisp/tramp.el (tramp-handle-expand-file-name):
* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name):
Key for home directory cache entry must distinguish different
users.  Reported by Gilles Pion <gpion@lfdj.com>.
----------------------------
revision 2.615
date: 2007-04-23 14:24:26 -0700;  author: albinus;  state: Exp;  lines: +1 -0;

* lisp/tramp.el: (tramp-default-user): Mark the variable as obsolete in
the docstring.
----------------------------
revision 2.614
date: 2007-04-23 14:13:15 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el: New todo items.

* texi/tramp.texi (Default user): Declare `tramp-default-user' as
obsolete.  Explain how to use `tramp-default-user-alist' instead of.
----------------------------
revision 2.613
date: 2007-04-22 12:37:23 -0700;  author: albinus;  state: Exp;  lines: +11 -0;

* lisp/tramp.el (tramp-methods): "plinkx" loads a session.  No default
port.
(tramp-default-user-alist): No default user for "plinkx".
(tramp-completion-function-alist-putty): New defconst.
(tramp-completion-function-alist): Add "plinkx" completion.
(tramp-set-completion-function): Handle also registry keys.
(tramp-parse-putty, tramp-parse-putty-group): New defuns.
(tramp-action-login): Trace login prompt.

* texi/tramp.texi (Inline methods):  Add `plinkx' method.
----------------------------
revision 2.612
date: 2007-04-19 13:21:27 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-methods): New method "plinkx".
(tramp-default-user-alist): Add default user for "plink" methods.
(tramp-action-login): Read user name interactively when nil.
----------------------------
revision 2.611
date: 2007-04-15 14:03:41 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* configure.ac: Bump version (to 2.1.10-pre).

* INSTALL: Commands cannot contain whitespaces in their path.

* lisp/tramp.el (tramp-default-user): Fix typo in docstring.  Value can
also be nil.

* texi/trampinst.texi (Installation parameters): Commands cannot
contain whitespaces in their path.
----------------------------
revision 2.610
date: 2007-04-12 13:45:12 -0700;  author: albinus;  state: Exp;  lines: +12 -0;

* lisp/tramp.el (top): Make `set-buffer-multibyte' an alias if it
doesn't exist.
(tramp-handle-directory-files-and-attributes-with-stat)
(tramp-handle-file-attributes-with-stat): Return inode as real
number.
(tramp-convert-file-attributes): Convert inode into a list of two
integers.
----------------------------
revision 2.609
date: 2007-04-08 03:13:35 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.1.9 released.
----------------------------
revision 2.608
date: 2007-04-08 02:32:59 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-buffer-name, tramp-debug-buffer-name): We must
use `tramp-file-name-real-host', because for gateway methods the
default port will be expanded later on, which would tamper the
name.
----------------------------
revision 2.607
date: 2007-04-06 14:27:38 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-compute-multi-hops): Fix error in setting hop.
----------------------------
revision 2.606
date: 2007-04-03 14:01:21 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (tramp-message): Don't print "Error" in level 1, this
is part of the message already.
(tramp-error-with-buffer, tramp-action-yesno, tramp-action-yn):
Let `enable-recursive-minibuffers' be t, in case we need
`pop-to-buffer' during editing of the minibuffer.
(tramp-barf-if-no-shell-prompt): Apply `tramp-error-with-buffer'.

* texi/trampver.texi.in: Set default value of `emacsgw'.
----------------------------
revision 2.605
date: 2007-03-31 13:52:15 -0700;  author: albinus;  state: Exp;  lines: +23 -0;

* lisp/tramp.el (top): Don't require 'tramp-cache, it results in an
endless loop.  Autoload needed functions instead of.  Declare
needed gateway symbols, when tramp-gw cannot be loaded.
(with-parsed-tramp-file-name): Simplify `edebug-form-spec'.
(with-file-property, with-connection-property): New defmacros,
moved from tramp-cache.  This was necessary, because macros cannot
be autoloaded.
(tramp-register-file-name-handler)
(tramp-register-completion-file-name-handler): New defsubst,
derived from `tramp-register-file-name-handlers'.  The split is
necessary because Tramp's file name handlers must be registered at
different startup places.

* lisp/tramp-cache.el (with-file-property, with-connection-property):
Move them to tramp.el.

* texi/tramp.texi (Frequently Asked Questions): Add recentf to
approaches shortening Tramp file names to be typed.
(Traces and Profiles): Describe call traces; text moved from Bug
Reports.
----------------------------
revision 2.604
date: 2007-03-26 13:08:14 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-handle-expand-file-name): Don't apply
`tramp-drop-volume-letter' for non-Tramp files.
----------------------------
revision 2.603
date: 2007-03-25 11:39:27 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

* aclocal.m4 (AC_EMACS_INFO): Add gateway support.
(AC_EMACS_CHECK_LIB): Remove.

* configure.ac: Add gateway support.

* lisp/Makefile.in: Add gateway support.

* lisp/tramp.el (top): Require tramp-gw conditionally only.
(tramp-methods): Add port spec to "plink", "plink1" and "pscp"
methods.

* texi/Makefile.in: Add gateway support.

* texi/tramp.texi (all): Make gateway text conditional.
----------------------------
revision 2.602
date: 2007-03-21 14:48:24 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-handle-make-auto-save-file-name): Apply
`tramp-temporary-file-directory' for compatibility reasons.
----------------------------
revision 2.601
date: 2007-03-19 15:23:49 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-handle-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions): Add "-b" to the "ls"
command in order to handle file names with spaces.
----------------------------
revision 2.600
date: 2007-03-08 13:21:45 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp.el (tramp-methods): Extend doc string by description of
`tramp-default-port' and `tramp-gw-args'.
(tramp-enter-password): Remove `inhibit-trace'.  It is handled by
description in the manual now.
(tramp-maybe-open-connection): Fix small error in gateway handling.

* texi/tramp.texi (Bug Reports): Precise example for call traces.
Describe how to avoid passwords to be sent.
----------------------------
revision 2.599
date: 2007-03-07 13:24:30 -0800;  author: albinus;  state: Exp;  lines: +17 -0;

* lisp/tramp.el (tramp-methods): Add port spec to "telnet" method.
(tramp-do-copy-or-rename-file-out-of-band): Complete gateway
implementation.
(tramp-handle-insert-directory): Check (featurep 'ls-lisp).
(tramp-make-tramp-temp-file): Use `emacs-pid' if there is no
running process yet.
(tramp-compute-multi-hops): New defun.  Code extracted from
`tramp-maybe-open-connection'.
(tramp-maybe-open-connection): Code adapted accordingly.

* lisp/tramp-gw.el (tramp-gw-gw-proc-sentinel): Companion process might
not exist.
(tramp-gw-open-network-stream, tramp-gw-basic-authentication):
Clean password cache in error case only.

* texi/tramp.texi (Remote processes): Improve eshell example.
----------------------------
revision 2.598
date: 2007-03-05 13:57:51 -0800;  author: albinus;  state: Exp;  lines: +17 -0;

* lisp/tramp.el (tramp-methods): Add gateway parameter to "scp",
"scp1", "scp2", "scpc", "scpx", "sshx".
(tramp-do-copy-or-rename-file-out-of-band): Start implementation
for gateways.  It is not finished yet.
(tramp-make-copy-program-file-name): Change parameter to VEC.
(tramp-make-temp-file): New parameter FILENAME.  Append its
extension to the resulting temporary file name.
(tramp-handle-file-local-copy, tramp-handle-write-region): Apply
it.

* lisp/tramp-smb.el (tramp-smb-handle-file-local-copy)
(tramp-smb-handle-write-region): Apply it.

* lisp/tramp-fish.el (tramp-fish-handle-file-local-copy): Apply it.

* texi/tramp.texi (trampfn, trampfnmhl, trampfnuhl, trampfnhl): New
macros.  Apply them wherever possible, improving readability.
(Multi-hops): Add some words in the footnote regarding ethical
issues of passing firewalls.
(Remote processes): New subsection discussing integration into
eshell.
----------------------------
revision 2.597
date: 2007-02-28 14:56:41 -0800;  author: albinus;  state: Exp;  lines: +11 -0;

* lisp/tramp.el (tramp-error-with-buffer): Use `sit-for'.

* lisp/tramp-gw.el (tramp-gw-vector, tramp-gw-gw-proc): Renamed from
`tramp-gw-current-vector' and `tramp-gw-current-gw-proc'.
(tramp-gw-gw-vector): New defvar.
(tramp-gw-gw-proc-sentinel): New defun.
(tramp-gw-open-connection): Use an independent buffer name for
auxiliary process.  Set process sentinel for `tramp-gw-gw-proc'.
----------------------------
revision 2.596
date: 2007-02-27 14:09:44 -0800;  author: albinus;  state: Exp;  lines: +17 -0;

* lisp/tramp.el (tramp-error-with-buffer): New defsubst.  Apply it
wherever there is `pop-to-buffer', followed by `tramp-error'.
(tramp-maybe-open-connection): Rename `tramp-gw-http-method' to
`tramp-gw-tunnel-method'.

* lisp/tramp-gw.el (tramp-gw-tunnel-method)
(tramp-gw-default-tunnel-port): Renamed from
`tramp-gw-http-method' and `tramp-gw-default-http-port',
respectively.  Apply it everywhere.
(tramp-gw-open-connection): Improve doc-string.  Use only type 5
for `socks-server', we have our own 'http implementation.
(tramp-gw-open-network-stream): Improve error handling.
(tramp-gw-basic-authentication): Bind `tramp-current-*' locally
because of password cache key.

* texi/tramp.texi (History): Add gateway methods as well as relation to
GNU Emacs, XEmacs and GNU/Linux Debian.
(Gateway methods): Minor wording improvements.
(Multi-hops): Explain HTTP tunnel example in more detail.
----------------------------
revision 2.595
date: 2007-02-26 13:56:03 -0800;  author: albinus;  state: Exp;  lines: +14 -1;

* lisp/tramp.el (tramp-methods): Add "StrictHostKeyChecking=no" to
`tramp-gw-args' of ssh, ssh1 and ssh2 methods.
(tramp-maybe-open-connection): Implement changed interface of
`tramp-gw-open-connection'.
(tramp-send-eof): Removed.
(tramp-file-name-real-host, tramp-file-name-port): New defsubst.
(tramp-read-passwd): New parameter PROMPT.

* lisp/tramp-gw.el: Complete rewrite.  Use socks.el for SOCKS server;
implement HTTP tunnels on its own.

* texi/tramp.texi (Gateway methods): New section.
(Multi-hops): Describe useage of gateway methods.
----------------------------
revision 2.594
date: 2007-02-14 21:09:07 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp-gw.el (tramp-gw-current-gw-vector)
(tramp-gw-current-http-buffer): New defvars.
(tramp-advice-url-http-parse-response)
(tramp-advice-url-http-create-request, tramp-gw-aux-proc-sentinel)
(tramp-gw-open-connection): Make them fit for proxy authentication.
----------------------------
revision 2.593
date: 2007-02-13 23:14:45 -0800;  author: albinus;  state: Exp;  lines: +15 -0;

* Makefile.in: Add tramp-gw.el

* lisp/Makefile.in: Add tramp-gw.el

* lisp/tramp-gw.el: New package.

* lisp/tramp.el (top): Require tramp-gw.
(tramp-methods): Add `tramp-gw-args' and `tramp-default-port' for
ssh and telnet methods.
(tramp-message): Catch errors.
(tramp-action-yesno, tramp-action-yn): Trace messages.
(tramp-maybe-open-connection): Handle gateways.
(tramp-read-passwd): New parameter PROC. Used in order to improve
password prompt. Adapt callees.
----------------------------
revision 2.592
date: 2007-02-01 14:46:31 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp-cache.el (tramp-flush-file-function): Renamed from
`tramp-cache-before-revert-function'.  Added to
`kill-buffer-hook'.
----------------------------
revision 2.591
date: 2007-01-31 14:35:38 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp-smb.el (tramp-smb-handle-insert-directory)
* lisp/tramp.el (tramp-handle-insert-directory): Fix wildcard case.

* texi/tramp.texi (Frequently Asked Questions): New item for
performance considerations.
----------------------------
revision 2.590
date: 2007-01-28 12:08:54 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp-util.el (top): Add defadvices for `browse-url-*'.
----------------------------
revision 2.589
date: 2007-01-27 07:01:49 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-perl-encode, tramp-perl-decode): Update copyrights.
----------------------------
revision 2.588
date: 2007-01-18 13:00:11 -0800;  author: albinus;  state: Exp;  lines: +19 -1;

* configure.ac: Bump version (to 2.1.9-pre).

* lisp/tramp.el (with-parsed-tramp-file-name): Protect debug spec
during compilation.
(tramp-handle-expand-file-name, tramp-find-method)
(tramp-find-user, tramp-find-host): Don't check for
`tramp-completion-mode'.
(tramp-find-foreign-file-name-handler): Check also for
`tramp-completion-mode' and `ramp-completion-file-name-regexp'.
(tramp-completion-mode): Variable removed.  Also all occurencies.
(tramp-completion-handle-file-name-all-completions): Don't call
`tramp-run-real-handler'.
(tramp-make-tramp-file-name): It must return always a well-formed
Tramp file name.
(tramp-completion-make-tramp-file-name): New defun.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Apply it.
----------------------------
revision 2.587
date: 2007-01-15 13:34:47 -0800;  author: albinus;  state: Exp;  lines: +2 -2;
*** empty log message ***
----------------------------
revision 2.586
date: 2007-01-15 13:34:17 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* tramp.el (tramp-handle-start-process): BUFFER can be nil

* tramp-util.el (top): Add defadvice for `ispell-start-process'.
----------------------------
revision 2.585
date: 2007-01-14 12:24:38 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.1.8 released.
----------------------------
revision 2.584
date: 2007-01-13 11:59:32 -0800;  author: albinus;  state: Exp;  lines: +13 -0;

* lisp/tramp.el (top): Change declaration of `with-temp-message' if it
doesn't exist.
(tramp-buffer-name, tramp-debug-buffer-name)
(tramp-make-tramp-file-name, tramp-make-copy-program-file-name):
Check also for empty USER.

* lisp/tramp-smb.el (tramp-smb-actions-with-share):
(tramp-smb-actions-without-share): New defconst.
(tramp-smb-open-connection): Removed.  Code merged into
`tramp-smb-maybe-open-connection'.  Use new defconst.

* lisp/tramp.texi (Multi-hops): Change last example to `sudo'.
----------------------------
revision 2.583
date: 2007-01-11 22:44:26 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (top): Declare `with-temp-message' if it doesn't exist.
----------------------------
revision 2.582
date: 2007-01-11 13:57:07 -0800;  author: albinus;  state: Exp;  lines: +2 -1;

* lisp/tramp.el (tramp-touch): Check, whether `format-time-string' is
a primitive.
----------------------------
revision 2.581
date: 2007-01-11 13:19:10 -0800;  author: albinus;  state: Exp;  lines: +15 -0;

* lisp/tramp.el (tramp-actions-copy-out-of-band):
`tramp-copy-failed-regexp' calls `tramp-action-permission-denied'.
(tramp-handle-file-local-copy): Set `enable-multibyte-characters'
to nil.  Reported by Chris Moore <christopher.ian.moore@gmail.com>.
(tramp-handle-write-region): Compute file size as difference
between END and START.
(tramp-touch): In case of 'tramp-sh-file-name-handler, apply
`tramp-send-command', which is more efficient.
(tramp-action-permission-denied, tramp-action-process-alive):
Don't apply `pop-to-buffer', this is done centrally.
(tramp-action-copy-failed): Removed, not needed anymore.
(tramp-get-remote-stat): Hide temporary error message.
----------------------------
revision 2.580
date: 2007-01-10 14:04:37 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-maybe-open-connection): The sent command must
ensure that the process terminates, finally.  Write the command
compatible for shells and w32 COMSPEC.
----------------------------
revision 2.579
date: 2007-01-02 13:18:17 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp-fish.el (tramp-fish-handle-write-region): Implement APPEND.
(tramp-fish-handle-rename-file)
(tramp-fish-handle-copy-file): Error handling is not necessary here,
will be done centrally.  Apply `tramp-fish-do-copy-or-rename-file'.
(tramp-fish-do-copy-or-rename-file)
(tramp-fish-do-copy-or-rename-file-directly): New defuns.
----------------------------
revision 2.578
date: 2006-12-31 11:07:29 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-completion-mode): Use `natnump' instead of
`wholenump' because of XEmacs.
----------------------------
revision 2.577
date: 2006-12-30 14:32:13 -0800;  author: albinus;  state: Exp;  lines: +3 -2;
*** empty log message ***
----------------------------
revision 2.576
date: 2006-12-30 14:31:18 -0800;  author: albinus;  state: Exp;  lines: +13 -0;

* lisp/tramp.el (tramp-file-name-handler-alist): Add handler for
`shell-command'.
(tramp-handle-shell-command): New defun.
(tramp-touch): Don't bind `shell-file-name' locally.

* lisp/tramp-fish.el (tramp-fish-file-name-handler-alist): Add handler
for `shell-command'.

* lisp/tramp-util.el (start-process-shell-command)
(call-process-shell-command): Bind `shell-command-switch' locally.
----------------------------
revision 2.575
date: 2006-12-29 15:41:25 -0800;  author: albinus;  state: Exp;  lines: +12 -0;

* lisp/tramp.el (tramp-handle-call-process-region): New defun.
(tramp-touch): Use `shell-command' instead of `call-process', in
order to make it usable also for the `fish' method.

* lisp/tramp-fish.el (tramp-fish-handle-insert-file-contents): Move
point to the initial place after insertion.
(tramp-fish-handle-write-region): Don't send zero length data.

* lisp/tramp-util.el (tramp-advice-call-process-region): New defadvice.
----------------------------
revision 2.574
date: 2006-12-27 14:12:29 -0800;  author: albinus;  state: Exp;  lines: +17 -0;

* Makefile.in: Add tramp-fish.el

* lisp/tramp-fish.el: New package.

* lisp/tramp.el (top): Require tramp-fish.
(tramp-inodes): New defvar.
(tramp-handle-expand-file-name): Cache "home-directory".
(tramp-get-inode): New defun.

* lisp/tramp-smb.el (tramp-smb-no-stat, tramp-smb-inodes)
(tramp-smb-get-inode): Removed.  Apply new names.

* lisp/tramp-util.el (tramp-advice-executable-find): Add check for
`tramp-fish-file-name-handler'.

* texi/tramp.texi (Inline methods): Add `fish' method.
----------------------------
revision 2.573
date: 2006-12-26 13:42:55 -0800;  author: albinus;  state: Exp;  lines: +18 -0;

* lisp/tramp.el (tramp-action-process-alive)
(tramp-wait-for-regexp): Pop connection buffer in case of error.
(tramp-exists-file-name-handler): Handle also `default-directory'.
(tramp-half-a-year, tramp-parse-time-months): New defconst.
Transferred from tramp-smb.el.
(tramp-time-less-p, tramp-time-subtract): New defuns.  Transferred
from tramp-smb.el.
(tramp-time-diff): Use them.

* lisp/tramp-smb.el (tramp-smb-half-a-year)
(tramp-smb-parse-time-months, tramp-smb-time-less-p)
(tramp-smb-time-subtract): Removed.  Apply new names.

* lisp/tramp-util.el (top): Don't check for file name handlers of
`start-process-shell-command' and `call-process-shell-command'.

* texi/tramp.texi (Connection types): Mention `scpc' method.
(Default Method): Offer `scpc' for editing large files.
----------------------------
revision 2.572
date: 2006-12-21 12:18:01 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-completion-mode): Use `wholenump' instead of
`integerp'.  `char-equal' could fail else in case of negative
numbers.  Reported by Toby Speight <T.M.Speight.90@cantab.net>.
----------------------------
revision 2.571
date: 2006-12-20 13:38:37 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-handle-file-name-completion)
(tramp-completion-handle-file-name-completion): PREDICATE must be
applied on the expanded car's in `try-completion'.
----------------------------
revision 2.570
date: 2006-12-19 22:05:59 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-handle-file-name-completion)
(tramp-completion-handle-file-name-completion): Handle optional
parameter PREDICATE.
----------------------------
revision 2.569
date: 2006-12-18 23:24:49 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (tramp-methods): Introduce new method `scpc'.  Remove
"ControlMaster" option from the other `scp*' methods.
(tramp-default-method): Check for ssh-agent before setting to
`scp'.
(top): Check for `font-lock-add-keywords' before calling; it
doesn't exist under XEmacs.

* texi/tramp.texi (External transfer methods): Describe new method
`scpc'.
----------------------------
revision 2.568
date: 2006-12-17 22:00:08 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-default-method): Before setting to "pscp", check
whether package password.el is loaded, or Pageant is running.

* lisp/tramp-smb.el (tramp-smb-errors): Add error messages.
----------------------------
revision 2.567
date: 2006-12-14 13:31:14 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp-smb.el (tramp-smb-handle-delete-directory)
(tramp-smb-handle-delete-file): Write a more comprehensive error
message.  Suggested by Tom Wurgler <twurgl@goodyear.com>.
----------------------------
revision 2.566
date: 2006-12-13 13:37:36 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp-smb.el (tramp-smb-errors): Add error messages.
(tramp-smb-handle-directory-files): Fix check for MATCH.
----------------------------
revision 2.565
date: 2006-12-11 14:11:48 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp-smb.el (tramp-smb-get-file-entries):
`tramp-smb-maybe-open-connection' must still be called when share
is nil.
----------------------------
revision 2.564
date: 2006-12-10 08:43:07 -0800;  author: albinus;  state: Exp;  lines: +20 -0;

* lisp/tramp.el (tramp-password-prompt-regexp): "Passphrase" is used
with capital first letter by PuTTY.
(tramp-message): Add message to debug buffer only when process
buffer is not killed.  Otherwise, debug buffer name cannot be
determined.
(tramp-accept-process-output): Under Win32,
`accept-process-output' doesn't return sometimes.  So we add an
additional timeout around.

* lisp/tramp-smb.el (tramp-smb-send-command ): This is the only place
to call `tramp-smb-maybe-open-connection'.  Remove all other
calls.
(tramp-smb-maybe-open-connection): SHARE isn't needed as
parameter.  We compute it ourselves.
(tramp-smb-open-connection): Set `process-connection-type', which
was done in `tramp-smb-maybe-open-connection' before.  Pop up
connection buffer when there are problems.
----------------------------
revision 2.563
date: 2006-12-09 13:10:08 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* tramp.el (tramp-enter-password): Inhibit function call traces in
order to avoid passwords to be included there.

* tramp-smb.el (tramp-smb-errors): Add error messages.
(tramp-smb-handle-make-directory-internal): Local file names shall
carry "\\" instead of "/".  Reported by Tom Wurgler
<twurgl@goodyear.com>.

* tramp.texi (Bug Reports): Add code to retrieve function call
traces.
----------------------------
revision 2.562
date: 2006-12-03 03:55:27 -0800;  author: albinus;  state: Exp;  lines: +13 -0;

* tramp-cache.el (tramp-flush-directory-property): Check whether
KEY is a string.
(tramp-flush-connection-property): Work with a copy of the key in
order to avoid side effects.

* tramp-smb.el (tramp-smb-handle-insert-directory): Handle
WILDCARD and FULL-DIRECTORY-P.
(tramp-smb-handle-make-directory-internal): Flush also directory,
because `file-attributes' is computed from its entries.
(tramp-smb-get-file-entries): Parameter is a DIRECTORY.
----------------------------
revision 2.561
date: 2006-12-01 12:40:22 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp.el (tramp-handle-write-region): Erase buffer before
applying cksum.
(tramp-set-remote-path): Apply `tramp-split-string' instead of
`split-string', because Emacs 21 doesn't support OMIT-NULLS
parameter.
----------------------------
revision 2.560
date: 2006-11-30 14:20:39 -0800;  author: albinus;  state: Exp;  lines: +22 -0;

* lisp/tramp-cache.el (tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property): Work with a
copy of the vector in order to avoid side effects.

* lisp/tramp-smb.el (tramp-smb-errors): Add error message from Windows
Server 2003.
(tramp-smb-not-handled): Removed, replaced by `ignore'.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-directory)
(tramp-smb-handle-delete-file, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Flush also directory, because
`file-attributes' is computed from its entries.
(tramp-smb-file-name-handler, tramp-smb-handle-file-attributes)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-name-all-completions)
(tramp-smb-handle-file-writable-p)
(tramp-smb-handle-insert-directory, tramp-smb-get-file-entries)
(tramp-smb-get-inode): Simplify implementation.
(tramp-smb-open-connection): Add parameter "-s /dev/null".
----------------------------
revision 2.559
date: 2006-11-27 22:00:56 -0800;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.558
date: 2006-11-27 22:00:14 -0800;  author: albinus;  state: Exp;  lines: +12 -1;

* lisp/tramp-smb.el (tramp-smb-errors): Add error message from Windows
Server 2003.
(tramp-smb-no-stat): New constant.  Will be used later on for
implementation of the stat command.
(tramp-smb-open-connection): Revert change from 2006-11-23.
Quoting arguments is not needed, moreover it even breaks the
command.
(tramp-smb-wait-for-output): Read pending output.
----------------------------
revision 2.557
date: 2006-11-26 22:04:14 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp-smb.el: (tramp-smb-maybe-open-connection): Erase always
the connection buffer.
----------------------------
revision 2.556
date: 2006-11-26 03:43:11 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-default-method): Under Windows, change from
plink to pscp.
(tramp-copy-failed-regexp, tramp-action-copy-failed): Add.
(tramp-actions-copy-out-of-band):
Add pair (tramp-copy-failed-regexp tramp-action-copy-failed).
(tramp-action-out-of-band): Move "Permission denied" handling to
tramp-action-copy-failed.
----------------------------
revision 2.555
date: 2006-11-23 22:48:21 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-yn-prompt-regexp): Fix regexp.
----------------------------
revision 2.554
date: 2006-11-22 22:42:01 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp-smb.el (tramp-smb-read-file-entry): Share names can
contain spaces.
(tramp-smb-open-connection): Quote arguments.
----------------------------
revision 2.553
date: 2006-11-21 15:20:53 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-set-remote-path): `tramp-default-remote-path'
contains a trailing ":" under FreeBSD.
----------------------------
revision 2.552
date: 2006-11-19 22:30:04 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp-cache.el (tramp-get-connection-property)
(tramp-set-connection-property): Work with a copy of the vector in
order to avoid side effects.

* lisp/tramp-smb.el (tramp-smb-maybe-open-connection): Erase the buffer
when the process is killed, because it is reused.
----------------------------
revision 2.551
date: 2006-11-07 12:00:35 -0800;  author: albinus;  state: Exp;  lines: +5 -2;
*** empty log message ***
----------------------------
revision 2.550
date: 2006-11-07 03:49:33 -0800;  author: albinus;  state: Exp;  lines: +15 -0;

* lisp/tramp.el (tramp-copy-size-limit): New defcustom.
(tramp-methods): Add "ControlPath" and "ControlMaster" to scp,
scp1 and scp2 methods.  Suggested by Andreas Schwab
<schwab@suse.de>.  Rearrange entries for better readability.
Change syntax of `tramp-copy-args' to that of `tramp-login-args'.
Describe "%t" in the doc string.
(tramp-default-method): scp is the default method.
(tramp-do-copy-or-rename-file, tramp-handle-file-local-copy)
(tramp-handle-write-region): Check for `tramp-copy-size-limit'.
(tramp-do-copy-or-rename-file-out-of-band): Simplify
implementation.
(tramp-maybe-open-connection): Compute format spec only once.

* texi/tramp.texi (Configuration): scp is the default method.
(External transfer methods): Explain meaning of
`tramp-copy-size-limit'.  Don't mention password problems anymore,
this is solved.
(Default Method): Use ssh as example for another method.
----------------------------
revision 2.549
date: 2006-11-05 12:10:58 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* tramp.el (with-parsed-tramp-file-name): Correct debug spec.
Highlight as keyword.
(tramp-do-copy-or-rename-file): Correct data for
'file-already-exists.
(tramp-touch): Quote file name.
----------------------------
revision 2.548
date: 2006-10-24 22:47:09 -0700;  author: albinus;  state: Exp;  lines: +24 -0;

* configure.ac: Bump version (to 2.1.8-pre).

* lisp/tramp.el (tramp-yn-prompt-regexp): Add question from plink.
(tramp-message): Reduce messages in minibuffer.
(tramp-handle-call-process): Fix error in error handling.
(tramp-touch): UTC handling is not possible for XEmacs.

* lisp/tramp-cache.el (top): Don't autoload macro
`with-parsed-tramp-file-name' but function
`tramp-dissect-file-name'.
(tramp-cache-before-revert-function): Change implementation
accordingly.  Reported by Jonathan Hankins
<jonathan-hankins@mindspring.com>.

* lisp/tramp-util.el (tramp-advice-executable-find): Check for
`load-in-progress)'.
(tramp-advice-call-process): Add check for
`tramp-fish-file-name-handler'.
(tramp-grep-setup, tramp-gud-setup, tramp-ediff-setup): Remove
functions, and call defadvices directly. There is no need for
`eval-after-load'.
(top): Add defadvices for `gnus-1', `jka-compr-call-process' and
`jka-compr-partial-uncompress'.
----------------------------
revision 2.547
date: 2006-09-07 22:00:55 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-open-connection-setup-interactive-shell):
Simplify command checking the uname of the remote host.
----------------------------
revision 2.546
date: 2006-09-03 05:23:58 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

Version 2.1.7 released.
----------------------------
revision 2.545
date: 2006-08-30 23:06:15 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp.el (tramp-default-proxies-alist): Extend doc string for %h
and %u patterns.
(tramp-wrong-passwd-regexp): Fix strings.
(tramp-maybe-open-connection): Add handling of %h and %u
patterns.  Suggested by Kirk Strauser <kirk@daycos.com>.

* texi/tramp.texi (Multi-hops): Adding %h and %u patterns to
`tramp-default-proxies-alist'.
----------------------------
revision 2.544
date: 2006-08-28 21:35:25 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-get-remote-uid, tramp-get-remote-gid): Return -1
when ID-FORMAT is 'integer, and the command doesn't yield an
integer.

* texi/tramp.texi (Bug Reports): The Tramp mailing list is moderated
now.  Suggested by Adrian Phillips <a.phillips@met.no>.
----------------------------
revision 2.543
date: 2006-08-27 08:07:18 -0700;  author: albinus;  state: Exp;  lines: +19 -0;

* lisp/tramp.el (tramp-completion-function-alist-*): Provide the
constants also for the Windows case.
(tramp-completion-file-name-regexp-*): Add the drive letter to the
constants in the Windows case.
(tramp-debug-message): Simplify regexp for function names to be
ignored.
(tramp-handle-expand-file-name): Act also in completion mode.
Apply `tramp-drop-volume-letter' then.
(tramp-file-name-handler): No special handling for
`expand-file-name'.  But for `file-name-as-directory'.
(tramp-completion-handle-file-name-all-completions): Apply
`tramp-drop-volume-letter' where appropriate.
(tramp-parse-*): Set `default-directory' to a local filename, in
order to catch the files to be parsed under Windows.
(tramp-open-connection-setup-interactive-shell): Move
"(with-current-buffer ..." upwards; there was a wrong logic.
----------------------------
revision 2.542
date: 2006-08-17 11:28:30 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* tramp.el (tramp-completion-mode): Remove parameter, it isn't
necessary anymore.  Remove check for `tramp-syntax'.
(tramp-find-method, tramp-find-user, tramp-find-host): Don't
expand to default values when in completion mode.
----------------------------
revision 2.541
date: 2006-08-12 09:56:28 -0700;  author: albinus;  state: Exp;  lines: +19 -0;

* tramp.el (tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-stat): Add
quotes to the user and group elements.
(tramp-handle-file-attributes-with-ls): Goto buffer
head before reading.  Add also quotes to user and group entries
when not in integer format.

* tramp-cache.el: Tune autoloading of functions from tramp.el.
Wrap it with `eval-when-compile', because this is needed for
compiler pacification only.
(tramp-set-connection-property): Trap error from missing function
`tramp-message´ during startup, where we don't miss the debug
messages.
----------------------------
revision 2.540
date: 2006-07-18 13:40:20 -0700;  author: albinus;  state: Exp;  lines: +9 -3;

* lisp/tramp.el (tramp-find-inline-encoding): `rem-enc' and `rem-dec'
must not be cached as converted to a string.
----------------------------
revision 2.539
date: 2006-06-26 13:07:46 -0700;  author: albinus;  state: Exp;  lines: +14 -0;

* lisp/tramp.el (tramp-handle-file-local-copy): Don't evaluate rem-dec
and loc-enc.
(tramp-handle-write-region): Don't evaluate rem-enc and loc-dec.
(tramp-find-inline-encoding): Set connection properties directly
via `tramp-set-connection-property'.
(tramp-set-remote-encoding, tramp-set-remote-decoding)
(tramp-set-local-encoding, tramp-set-local-decoding): Removed.
(tramp-get-remote-encoding, tramp-get-remote-decoding): Removed,
replaced by new defun `tramp-get-remote-coding'.
(tramp-get-local-encoding, tramp-get-local-decoding): Removed,
replaced by new defun `tramp-get-local-coding'.
----------------------------
revision 2.538
date: 2006-06-25 14:09:07 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-unload-tramp): Provide a doc string.
----------------------------
revision 2.537
date: 2006-06-15 15:15:28 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (top): Require tramp-util also on Windows machines.
(tramp-message): Process buffer might have been killed.
(tramp-touch): Use UTC to express time.
----------------------------
revision 2.536
date: 2006-06-04 08:36:15 -0700;  author: albinus;  state: Exp;  lines: +11 -0;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Expand
`datarootdir´.  Perform all expansions with "eval".

* configure.ac: Add "-o /dev/null" to texi2dvi call.

* lisp/tramp.el (tramp-process-actions): Pop connection buffer in case
of error.  Modify error message depending on `tramp-action'.

* lisp/tramp-cache.el (tramp-persistency-file-name): Default value is
"~/.emacs.d/tramp" or "~/.xemacs/tramp", respectively.  Suggested
by Romain Francoise <romain@orebokech.com>.
(tramp-dump-connection-properties): Suppress error when
`tramp-persistency-file-name´ cannot be written.

* texi/tramp.texi (Connection caching): Change default file name.
----------------------------
revision 2.535
date: 2006-06-01 14:40:28 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (tramp-process-one-action): Remove `with-timeout'
clause.
(tramp-process-actions): Add optional TIMEOUT parameter.  If set,
apply it.
(tramp-maybe-open-connection): Call `tramp-process-actions' with a
timeout of 60".

* texi/tramp.texi (Filename completion): Explain how to enable
`partial-completion-mode' temporarily.
----------------------------
revision 2.534
date: 2006-06-01 13:32:55 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-make-copy-program-file-name): Quote LOCALNAME.
----------------------------
revision 2.533
date: 2006-05-31 14:27:02 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

* configure.ac: Bump version (to 2.1.7-pre).

* lisp/tramp.el (tramp-get-debug-buffer): `outline-mode' must be
protected with a local `default-directory'.

* lisp/tramp-cache.el (top): When reading
`tramp-persistency-file-name', discard error messages for
'file-error.
----------------------------
revision 2.532
date: 2006-05-28 11:47:01 -0700;  author: albinus;  state: Exp;  lines: +14 -0;

Version 2.1.6 released.
----------------------------
revision 2.531
date: 2006-05-27 11:43:30 -0700;  author: albinus;  state: Exp;  lines: +26 -0;

* lisp/tramp.el (tramp-initial-commands): Removed.
(tramp-remote-process-environment): Add the settings from
`tramp-initial-commands' here.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add `executable-find' entry.
(tramp-message): Apply `save-match-data'.
(tramp-do-copy-or-rename-file-out-of-band): `executable-find' must
be called locally.
(tramp-handle-executable-find): New defun.
(tramp-process-one-action)
(tramp-open-connection-setup-interactive-shell): Remove some
messages.  Send the "unset" commands as one bunch for
optimization.
(defun tramp-send-command-internal): Remove the MSG parameter.

* lisp/tramp-smb.el (tramp-smb-open-connection): `executable-find' must
be called locally.

* lisp/tramp-util.el (tramp-advice-executable-find)
(start-process-shell-command)
(tramp-advice-call-process-shell-command): New defadvices.
(tramp-advice-start-process, tramp-advice-call-process): Don't
apply parameter lists explicitely.
----------------------------
revision 2.530
date: 2006-05-24 13:12:23 -0700;  author: albinus;  state: Exp;  lines: +15 -0;

* lisp/tramp.el (tramp-message): Write into debug buffer only if
`tramp-verbose-level' is greater than or equal to 4.
(tramp-get-completion-function): Add
`tramp-parse-connection-properties´.
(tramp-process-initial-commands, tramp-post-connection): Removed,
also their respective calls..
(tramp-open-connection-setup-interactive-shell) Add code from
`tramp-process-initial-commands' and `tramp-post-connection'.

* lisp/tramp-cache.el (tramp-parse-connection-properties): New defun.

* lisp/tramp-util.el (tramp-ediff-setup): New defun.

* texi/tramp.texi (Traces and Profiles): Tramp debug buffer is written
with verbosity level 4 onwards.
----------------------------
revision 2.529
date: 2006-05-22 14:34:30 -0700;  author: albinus;  state: Exp;  lines: +22 -0;

* lisp/tramp.el (tramp-error): Don't kill the process.  There are
several cases it doesn't make sense.
(tramp-do-copy-or-rename-file): Flush NEWNAMEs file property.
(tramp-do-copy-or-rename-file-out-of-band): Apply `tramp-error'
when possible.  Make the temporary process more robust.  Use
"process-name" and "process-buffer" properties.
(tramp-handle-start-process): Return the process.
(tramp-completion-handle-file-name-all-completions): Use
`tramp-find-method'.  It was lost some day, don't know how.
(tramp-action-permission-denied, tramp-action-yesno)
(tramp-action-yn, tramp-find-inline-encoding): Apply `kill-process'.
(tramp-append-tramp-buffers): Add a remark about attached buffers.

* lisp/tramp-cache.el (tramp-cache-print): Make sure processes and
buffers are dumped as strings.
(tramp-flush-connection-property): Don't send a debug message.
Process and/or buffer might have been killed already.
(tramp-dump-connection-properties): Don't save "process-name" and
"process-buffer" properties.
----------------------------
revision 2.528
date: 2006-05-21 09:15:06 -0700;  author: albinus;  state: Exp;  lines: +25 -0;

Major rewrite.  Parameter lists changed from METHOD USER HOST to VEC.
----------------------------
revision 2.527
date: 2006-05-10 22:57:33 -0700;  author: albinus;  state: Exp;  lines: +34 -0;

* lisp/tramp.el (all): Apply renamings from tramp-cache.el.
(tramp-handle-start-process, tramp-get-connection-buffer)
(tramp-get-connection-process, tramp-maybe-open-connection):
"process-name" and "process-buffer" are handled as file property,
because they shouldn't be saved in Tramp connection history.
(tramp-maybe-send-script): Dito for "scripts".
(tramp-check-for-regexp, tramp-send-command)
(tramp-send-command-internal): Dito for "check-remote-echo".
(tramp-open-connection-setup-interactive-shell): Move test for
`tramp-chunksize)' down.
(tramp-bug): Add `tramp-file-properties'.
(tramp-append-tramp-buffers): Remove test for cache data.

* lisp/tramp-cache.el (tramp-file-properties): Renamed from
`tramp-cache-data'.  It's not buffer local anymore.
(tramp-cache-setup): Reimplementation.
(tramp-get-file-property): Renamed from
`tramp-cache-get-file-property'.  Reimplementation.
(tramp-set-file-property): Renamed from
`tramp-cache-set-file-property'.  Reimplementation.
(tramp-flush-file-property): Renamed from
`tramp-cache-flush-file'.  Reimplementation.
(tramp-flush-directory-property): Renamed from
`tramp-cache-directory-file'.  Reimplementation.
(with-file-property ): Renamed from `with-cache-data'.
Reimplementation.
(tramp-set-connection-property): Remove parameter TRANSIENT.
(tramp-dump-connection-properties): Pretty printing shall work for
other Emacsen too.

* lisp/tramp-smb.el (all): Apply renamings from tramp-cache.el.
----------------------------
revision 2.526
date: 2006-05-09 22:30:16 -0700;  author: albinus;  state: Exp;  lines: +16 -0;

* lisp/tramp.el (all):
* lisp/tramp-util.el (all): Adapt all occurencies of
`tramp-set-connection-property' and
`tramp-get-connection-property' according to changed parameter
list.

* lisp/tramp-cache.el (tramp-get-connection-property): Reorder
parameter list.
(tramp-set-connection-property): Reorder parameter list.  Add new
parameter TRANSIENT which suppresses saving that property in
persistent connection history.
(with-connection-property): Apply reordered parameter lists.
(tramp-dump-connection-properties): Remove transient entries.
----------------------------
revision 2.525
date: 2006-05-08 22:37:27 -0700;  author: albinus;  state: Exp;  lines: +21 -0;

* lisp/tramp.el (top): Eval expression for adding tramp-(ftp|efs) to
`tramp-unload-hook'.
(tramp-handle-file-name-all-completions)
(tramp-handle-insert-directory): Remove final "cd".
(tramp-register-file-name-handlers): Enable Tramp completion also
when ido is loaded.
(tramp-post-connection): Don't check for (en|de)coding.  It will
be done on-the-fly.
(tramp-find-inline-encoding): Remove tramp-get-* checks.
(tramp-get-remote-encoding, tramp-get-remote-decoding)
(tramp-get-local-encoding, tramp-get-local-decoding): Add
`tramp-find-inline-encoding'.

* lisp/tramp-cahe.el (top): Add unload code to
`tramp-cache-unload-hook'.  Remove also
`tramp-dump-connection-properties' from `kill-emacs-hook'.  Remove
"scripts" properties from connection history, they are not
persistent information.

* texi/tramp.texi (Filename completion): Improve wording.
----------------------------
revision 2.524
date: 2006-05-08 14:26:48 -0700;  author: albinus;  state: Exp;  lines: +15 -0;

* lisp/tramp.el (tramp-buffer-name, tramp-debug-buffer-name): Handle
the case when USER is NIL.  This was lost yesterday.
(tramp-set-remote-path): Save `tramp-default-remote-path' as
connection property.
(all): Remove `save-excursion' inside `with-connection-property'.
Will be handled there.

* lisp/tramp-cache.el (tramp-cache-print): Apply `prin1-to-string'.
(with-connection-property): Apply `save-excursion'.
(tramp-dump-connection-properties): Check for empty hash
table. Prettyprint.
(top): Simplify reading from connection history.
----------------------------
revision 2.523
date: 2006-05-07 14:33:48 -0700;  author: albinus;  state: Exp;  lines: +74 -0;

* lisp/tramp.el (top): cl and custom are always required.
(tramp-verbose): Change description of levels.
(tramp-encoding-reads-stdin, tramp-repair-jka-compr)
(tramp-discard-garbage, tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name)
(tramp-find-default-method, tramp-find-default-user)
(tramp-find-default-host): Remove them.
(tramp-methods): Change defcustom into defvar.
(tramp-actions-before-shell, tramp-actions-copy-out-of-band):
Change defcustom into defconst.
(tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-make-temp-file, tramp-make-tramp-temp-file): Move them up.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-handle-make-auto-save-file-name): For Emacs 21, set
`tramp-auto-save-directory' if unset in order to guarantee unique
auto-save file names.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): New defsubst.  Added with
autoload cookie.  Code from `tramp-repair-jka-compr' moved here.
Register `tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-unload-file-name-handlers): Renamed from
`tramp-unload-file-name-handler-alist'.
(tramp-completion-handle-file-name-all-completions): Delete
directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-process-actions, tramp-wait-for-regexp)
(tramp-maybe-open-connection, tramp-send-command)
(tramp-send-command-internal): Trace sent command with level 6.
(tramp-check-for-regexp): Trace echo with level 5.
(tramp-dissect-file-name): Expand method, user, host.
(tramp-find-method, tramp-find-user, tramp-find-host): Add code
for default values.  Remove all calls but the one in
`tramp-dissect-file-name'.
(tramp-bug, tramp-reporter-dump-variable)
(tramp-append-tramp-buffers): Dump also hash variables.

* lisp/tramp-cache.el: Trace cache commands with level 7.  Trace
connection commands with level 8.
(tramp-cache-print): Dump strings as such.
(tramp-persistency-file-name): New defcustom.
(tramp-connection-properties): New defvar.
(tramp-dump-connection-properties): New defun.
(tramp-get-connection-property, tramp-set-connection-property):
Rewritten.
(top): Dump connection history when leaving Emacs.  Read it during
initialization.

* lisp/tramp-efs.el (tramp-efs-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-ftp.el (tramp-ftp-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-smb.el: Trace sent commands with level 6.
(tramp-smb-file-name-p): Don't use tramp-find-* functions.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
(Bug Reports): Level 6 results already in file contents.
(Traces and Profiles): Describe new levels.
----------------------------
revision 2.522
date: 2006-04-16 03:02:56 -0700;  author: albinus;  state: Exp;  lines: +7 -1;

* lisp/tramp.el (tramp-completion-mode): ?\t has event-modifier
'control.  Reported by Matthias Förste
<slashdevslashnull@gmx.net>.

* texi/tramp.texi (History): Tell about commands on remote hosts.
(Filename completion): Remove exception of multi hop methods.
(Frequently Asked Questions): Give example for prompt checking.
----------------------------
revision 2.521
date: 2006-03-19 10:53:05 -0800;  author: albinus;  state: Exp;  lines: +13 -0;

* lisp/tramp.el (tramp-remote-path): Add `tramp-default-remote-path' as
first item.  Remove items which are usually returned by "getconf
PATH".  Extend custom parameters accordingly.
(tramp-set-remote-path): Apply "getconf PATH" in order to get
default directories.  Suggested by Kevin Rodgers <ihs_4664@yahoo.com>.
Remove patameters VAR and DIRLIST.
(tramp-post-connection): Set remote PATH variable as first action.
(tramp-handle-call-process): Add "</dev/null" when INFILE is nil.

* lisp/tramp-util.el (tramp-grep-setup): New defun.

* texi/tramp.texi (Remote Programs): Introduce `tramp-default-remote-path'.
----------------------------
revision 2.520
date: 2006-03-14 13:40:09 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

DESTDIR support
----------------------------
revision 2.519
date: 2006-03-12 14:06:22 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp-util.el (tramp-advice-dired-insert-directory): Ensure it
isn't used with Emacs 22.
----------------------------
revision 2.518
date: 2006-03-10 13:08:45 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp-util.el (tramp-advice-dired-insert-directory): New
defadvice.
----------------------------
revision 2.517
date: 2006-03-08 23:01:17 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-write-region, tramp-touch)
(tramp-call-local-coding-command): Local `call-process' and
`start-process' must be applied with a local `default-directory'.
----------------------------
revision 2.516
date: 2006-03-07 22:10:08 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-pre-connection): The buffer must be erased.
Reported by Heike C. Zimmerer <hcz@hczim.de>.
----------------------------
revision 2.515
date: 2006-03-05 04:54:13 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-debug-message): Don't filter for
`tramp-warning', it doesn't exist.
(tramp-touch): Raise a warning only if it fails.  It isn't worth
an error.
----------------------------
revision 2.514
date: 2006-02-27 12:53:09 -0800;  author: albinus;  state: Exp;  lines: +13 -0;

* lisp/tramp.el (tramp-echo-mark, tramp-echoed-echo-mark-regexp): New
defconst.
(tramp-check-for-regexp): New defun.
(tramp-wait-for-regexp): Apply it.
(tramp-open-connection-setup-interactive-shell): Check for echo
suppression on remote side.
(tramp-send-command, tramp-send-command-internal): Add
`tramp-echo-mark' to the command if needed.
(tramp-send-command-and-check): Take a more precise regexp for
exit status check.
----------------------------
revision 2.513
date: 2006-02-20 12:37:02 -0800;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.512
date: 2006-02-20 12:36:45 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-maybe-open-connection): Fix typo in calling
`tramp-wait-for-output'.
----------------------------
revision 2.511
date: 2006-02-12 12:48:01 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (tramp-maybe-open-connection): Do not wait for
output from a dead connection.
----------------------------
revision 2.510
date: 2006-02-07 13:00:47 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-error): Add a fmt-string to the call of
`tramp-message-for-buffer'.
----------------------------
revision 2.509
date: 2006-01-30 13:06:49 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (tramp-unload-tramp): Don't try to unload tramp-util.

* lisp/tramp-smb.el (tramp-smb-wait-for-output): Wait always for the
prompt.  If it returns earlier (when detecting an error message),
the rest of the output will merge accidently with the output of
the next command.  Reported by M Jared Finder <jared@hpalace.com>.
----------------------------
revision 2.508
date: 2006-01-27 14:38:56 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-handle-call-process): All excursions must be
saved correctly.
----------------------------
revision 2.507
date: 2006-01-27 14:29:02 -0800;  author: albinus;  state: Exp;  lines: +17 -0;

Add code for unloading Tramp.

* lisp/tramp-vc.el (vc-user-login-name): Wrap defadvice with a test for
`process-file', in order to let it work for older Emacsen too.
----------------------------
revision 2.506
date: 2005-12-11 07:24:20 -0800;  author: albinus;  state: Exp;  lines: +20 -0;

Version 2.1.5 released.

* configure.ac: Bump version.

* INSTALL: Point to Posix environments for installation under MS
Windows.

* lisp/tramp.el (tramp-remote-path): Beautify "/usr/xpg4/bin".  Clarify
docstring.
(tramp-handle-expand-file-name): Remove double slash.
(tramp-set-remote-path): It is sufficient to check for
`file-directory-p'.
(tramp-find-file-exists-command): Remove unnecessary message.
(tramp-check-ls-command, tramp-check-ls-commands)
(tramp-find-ls-command, tramp-find-id-command): Remove functions.
Code is moved to corresponding `tramp-get-*' functions.
(tramp-get-*): Work in connection buffer because local
`tramp-remote-path'. Insert code from above when necessary.
(tramp-bug): Add `tramp-default-host', `tramp-default-user',
`tramp-default-user-alist'.
(tramp-append-tramp-buffers): Add local variables for all Tramp
buffers.
----------------------------
revision 2.505
date: 2005-12-02 14:16:36 -0800;  author: albinus;  state: Exp;  lines: +19 -1;

* INSTALL, configure.ac: We depend on GNU texinfo 4.6.

* lisp/tramp.el (tramp-verbose): Document level 7.
(tramp-send-command-and-check): Clean up tramp_exit_status from
buffer.
(tramp-handle-file-local-copy, tramp-send-command-and-read):
Remove cleaning of tramp_exit_status.
(tramp-handle-write-region): Make cksum check more robust.
(tramp-remote-path): Add "/usr/xpg4/bin/".  On Solaris, there are
the POSIX programs.
(tramp-find-executable): IGNORE-TILDE is optional now.  New
parameter IGNORE-PATH.  Adapt callees.
(tramp-set-remote-path): Return list of existing directories.
(tramp-post-connection): Make `tramp-remote-path' buffer local.
Set it to list of existing directories.
(tramp-find-id-command, tramp-get-remote-id ): New defun.
(tramp-get-remote-uid, tramp-get-remote-gid): Use them.

* texi/tramp.texi (Frequently Asked Questions): Example how to set
`file-precious-flag' buffer local.

* texi/test.texi: Expand check for Texinfo 4.6 feature.
----------------------------
revision 2.504
date: 2005-11-29 14:24:39 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* lisp/tramp.el (tramp-do-copy-or-rename-file-via-buffer)
(tramp-handle-file-local-copy, tramp-handle-write-region):
Generate always a new temp buffer. Kill it finally.
(tramp-handle-unhandled-file-name-directory): Take home directory
on remote host.
(tramp-handle-write-region): When `file-precious-flag' is set,
check also the checksums (in case of inline methods).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.

* texi/tramp.texi (Remote processes): Explain gud.el integration in
more detail.
(Frequently Asked Questions): Recommend `file-precious-flag' when
`tramp-chunksize' is set.
----------------------------
revision 2.503
date: 2005-11-27 12:32:41 -0800;  author: albinus;  state: Exp;  lines: +18 -0;

* lisp/tramp.el (tramp-file-name-handler-alist): Remove
`dired-call-process' again.  Not necessary, now that `tramp-util'
is required.
(tramp-handle-dired-call-process): Removed.
(tramp-handle-process-file): Call just `call-process'.

* lisp/tramp-util.el (file-remote-p): Make it available (Emacs 21), or
advice it (XEmacs 21).
(compilation-mode-hook, tramp-gud-file-name): Use `file-remote-p'.
(tramp-gud-file-name-handler): Removed.  It was a wrong approach.
(tramp-gud-massage-args): New defun.
(tramp-gud-setup): Rewritten.  It is called now after loading
gud.el.
(tramp-gud-perldb-massage-args): Removed. Replaced by a more
general approach in `tramp-gud-setup'.
----------------------------
revision 2.502
date: 2005-11-23 13:48:53 -0800;  author: albinus;  state: Exp;  lines: +22 -0;

* lisp/tramp.el (top): Require `tramp-util'.
(tramp-make-tramp-temp-file): New defsubst.
(tramp-handle-call-process): Call it.
(tramp-find-foreign-file-name-handler): Test also for stringp.
(tramp-set-auto-save): Simplify test.  It is done in
`tramp-find-foreign-file-name-handler'.
(tramp-exists-file-name-handler): Protect it with
`condition-case'.

* lisp/tramp-util.el (tramp-advice-start-process)
(tramp-advice-call-process, gud-perldb-massage-args): Replace test
with `tramp-tramp-file-p' by `tramp-sh-file-name-handler'.  It
does not work with other file name handlers.
(tramp-gud-file-name-handler, tramp-gud-setup): New defuns.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Rewritten.
(tramp-vc-file-owner): Replace test with `tramp-tramp-file-p' by
`tramp-sh-file-name-handler'.  It does not work with other file
name handlers.
----------------------------
revision 2.501
date: 2005-11-20 14:16:40 -0800;  author: albinus;  state: Exp;  lines: +34 -0;

* lisp/tramp.el (tramp-send-command-and-read): New defun.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-perl)
(tramp-handle-directory-files-and-attributes-with-stat)
(tramp-get-remote-stat, tramp-get-remote-uid)
(tramp-get-remote-gid): Apply it.
(tramp-handle-insert-directory): Remove unnecessary comments.
(tramp-point-at-eol): Removed. All callees replaced by
`tramp-line-end-position'.
(tramp-barf-unless-okay): Don't pop up Tramp buffer in case of
error.
(tramp-get-ls-command, tramp-get-test-command)
(tramp-get-test-nt-command, tramp-get-file-exists-command)
(tramp-get-remote-ln, tramp-get-remote-perl)
(tramp-get-remote-stat)
(tramp-get-remote-uid, tramp-get-remote-gid): Apply
`with-connection-property'.
(tramp-get-connection-property, tramp-set-connection-property):
Move to tramp-cache.el.

* lisp/tramp-cache.el:
(tramp-get-connection-property, tramp-set-connection-property):
Moved from tramp.el.  Tramp messages added.
(with-connection-property): New macro.

* lisp/tramp-smb.el (tramp-smb-read-file-entry): `tramp-point-at-eol'
replaced by `tramp-line-end-position'.

* lisp/tramp-vc.el (tramp-handle-vc-user-login-name): Removed.
(tramp-vc-user-login-name): Rewritten.

* texi/tramp.texi (Remote File Ownership): Replace `user-full-name' by
`user-login-name'.
(Traces and Profiles): Add trace level 7.
----------------------------
revision 2.500
date: 2005-11-16 15:09:56 -0800;  author: albinus;  state: Exp;  lines: +21 -1;

* lisp/tramp.el (tramp-default-user-alist): Simplify default value.
(tramp-handle-file-attributes): Apply `expand-file-name'.
(tramp-handle-file-newer-than-file-p)
(tramp-handle-add-name-to-file, tramp-do-copy-or-rename-file):
Call of `tramp-error' must be more robust.
(tramp-touch): When there is no Tramp file, we cannot call
`tramp-error'.
(tramp-wait-for-regexp, tramp-wait-for-output): Remove unnecessary
parameter in `tramp-error' call.
(tramp-get-remote-uid, tramp-get-remote-gid): New parameter
ID-FORMAT.  Adapt callees.

* lisp/tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
(tramp-vc-simple-command, tramp-vc-workfile-unchanged-p)
(vc-checkout): Removed, including corresponding defadvices.
(tramp-file-owner): Removed.  Defadvice `vc-file-owner' changed
with code left.
----------------------------
revision 2.499
date: 2005-11-12 15:19:05 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-handle-file-attributes-with-ls): Return t as
9. attribute.  It doesn't matter, because it will be converted
later on.
(tramp-handle-file-ownership-preserved-p): Rewritten.  The old
implementation was just heuristic.
(tramp-convert-file-attributes): Set file's gid change bit.
(tramp-get-remote-uid, tramp-get-remote-gid): New defuns.
----------------------------
revision 2.498
date: 2005-11-09 15:01:22 -0800;  author: albinus;  state: Exp;  lines: +37 -0;

* lisp/tramp.el (tramp-remote-process-environment): New defcustom.
(tramp-file-name-handler-alist): Add `dired-call-process'.
(tramp-handle-dired-call-process ): New defun.
(tramp-debug-message): Extend regexp for backtrace.
(tramp-message): Apply level specific prefixes.
(tramp-error): New defsubst.  Replace all calls of `message',
`signal' and `error' with corresponding Tramp message functions.
(tramp-handle-file-truename): Apply `tramp-equal-remote'.
(tramp-handle-expand-file-name): Use "~root" for tilde expansion
in case of su(do)? methods.  The home directory of the local user
will be taken else.
(tramp-handle-start-process): Use narrowing for protecting buffer
contents.
(tramp-file-name-handler): Remove signal handling.  Not necessary,
because `tramp-error' handles it now.
(tramp-buffer-name, tramp-debug-buffer-name): Handle the case USER
is nil.
(tramp-outline-level): Change formula in order to handle level 0.
(tramp-set-remote-path): Add debug message.
(tramp-enter-password): Don't erase the buffer, not necessary.
(tramp-open-connection-setup-interactive-shell): Don't (un)set
explicitely "TERM", "HISTFILE", "HISTSIZE" "MAIL" "MAILCHECK"
"MAILPATH" "CDPATH" "LC_TIME".  Set
`tramp-remote-process-environment' instead of.
(tramp-barf-unless-okay): Remove SUBSHELL (always nil) and SIGNAL
(always 'file-error).  Change all callees.
(tramp-send-string): Apply `delete-region' instead of
`erase-buffer'.  Necessary because of narrowing.

* lisp/tramp-smb.el (all) Replace all calls of `message', `signal' and
`error' with corresponding Tramp message functions.

* lisp/tramp-util.el (tramp-advice-gud-perldb-massage-args): New
defadvice.

* texi/tramp.texi (Remote processes): Improve doc.
----------------------------
revision 2.497
date: 2005-11-06 12:40:17 -0800;  author: albinus;  state: Exp;  lines: +27 -0;

* lisp/tramp.el (tramp-file-name-handler-alist): Remove `shell-command.
(tramp-handle-start-process, tramp-handle-call-process): Apply
`save-excursion'.
(tramp-handle-shell-command): Removed.
(tramp-file-name-for-operation): Add `dired-call-process'. It IS a
file name handler primitive.
(tramp-wait-for-regexp): Take the message string from right
buffer.
(tramp-post-connection): Remove code for checking encoding
commands.  It is also in `tramp-find-inline-encoding'.
(tramp-find-inline-encoding): Check for connection properties.  By
this, the commands won't be executed again for new connection
buffers.
(tramp-maybe-open-connection): Apply `tramp-send-command' instead
of `tramp-send-string'.  No changed functionality, but better
traces.

* lisp/tramp-util.el (top): Don't require "compile".  Add handlers for
`compilation-mode-hook' and `gud-mode-hook'.
(tramp-advice-start-process, tramp-advice-call-process): Call the
handlers with `apply'.
(tramp-gud-file-name): New defun.
(tramp-compilation-parse-errors-filename-function): Removed.  It
wasn't such a good idea.

* texi/tramp.texi (Remote processes): New section.  Replaces
`Compilation'.
----------------------------
revision 2.496
date: 2005-11-05 13:11:35 -0800;  author: albinus;  state: Exp;  lines: +14 -1;

* lisp/tramp.el (tramp-action-out-of-band): Handle scp message
"Permission denied".

* lisp/tramp-util.el (tramp-compilation-parse-errors-filename-function):
New defun.  Assigned to `compilation-parse-errors-filename-function'.
----------------------------
revision 2.495
date: 2005-11-04 13:18:01 -0800;  author: albinus;  state: Exp;  lines: +16 -0;

* lisp/tramp.el (tramp-default-user): Set to nil.  Otherwise, it would
overwrite setttings for ssh.  Reported by Richard Edgar
<rge21@pas.rochester.edu>.
(tramp-default-user-alist): Add value for rsh and telnet and
alike.
(tramp-handle-file-newer-than-file-p)
(tramp-handle-add-name-to-file, tramp-do-copy-or-rename-file)
(tramp-run-test2 ): Apply `tramp-equal-remote'.
(tramp-equal-remote): Improve docstring.
(tramp-handle-call-process): Continue implementation.

* lisp/tramp-util.el (tramp-advice-start-process)
(tramp-advice-call-process): Check whether to apply.
----------------------------
revision 2.494
date: 2005-11-01 14:28:55 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp.el (tramp-handle-call-process): Improve handling of INFILE
and DESTINATION.
(tramp-handle-file-remote-p): Return string instead of struct.
Expand to default values.
(tramp-equal-remote): New defun.
----------------------------
revision 2.493
date: 2005-10-30 14:34:55 -0800;  author: albinus;  state: Exp;  lines: +37 -0;

* lisp/tramp.el: Global change to make access to connection buffer more
robust.  Don't trust that it is always current buffer; don't
expect it is writable.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add `start-process' and `call-process'.  Remove
`dired-call-process'.
(tramp-handle-start-process, tramp-handle-call-process)
(tramp-get-connection-buffer, tramp-get-connection-process): New
defuns.
(tramp-handle-dired-call-process, tramp-async-proc): Removed.
(tramp-handle-shell-command, tramp-handle-process-file): Rewritten
completely.
(tramp-wait-for-output): New arg PROC.
(tramp-get-connection-property, tramp-set-connection-property):
Don't call `tramp-maybe-open-connection'.  There might be
recursions otherwise.
(tramp-handle-expand-file-name): Use
`tramp-temporary-file-directory' instead of "/".
(tramp-maybe-open-connection): Set PS1 to "$ ".  Otherwise, a
local shell prompt could hurt.  Reported by Romain Francoise
<romain@orebokech.com>.
(tramp-chunksize): Escape parentheses in docstring starting at
beginning of line.  Fontification is messed up when
`open-paren-in-column-0-is-defun-start' set to t.  Reported by
John Paul Wallington <jpw@pobox.com>.

* lisp/tramp-cache.el (tramp-cache-setup): Reset `tramp-cache-data'
only when it doesn't exist yet.  Otherwise, it would be cleaned
every new asynchronous process.

* lisp/tramp-util.el: Deactivate key mappings for `tramp-minor-mode'.
(tramp-advice-start-process, tramp-advice-call-process): New
defadvices.
(tramp-compile, tramp-recompile): Removed.
----------------------------
revision 2.492
date: 2005-10-23 04:48:04 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* configure.ac: Bump version (to 2.1.5-pre).

* Makefile.in (clean): Cleanup also subdirectory test.
(MANIFEST): Exclude tramp2 and .cvsignore.

* lisp/tramp.el (tramp-let-maybe): Add `edebug-form-spec' property.
(tramp-handle-expand-file-name): Bind `default-directory' locally
to "/" in order to avoid problems with UNC shares or Cygwin
mounts.
----------------------------
revision 2.491
date: 2005-10-17 12:44:43 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

* tramp.el (tramp-completion-mode): New defvar.  Used in
`tramp-completion-mode' for checking if we are in completion mode.
(tramp-completion-handle-file-name-all-completions): Reorder code
in order to complete for file names only in case there are no
method/user/host completions.  This is necessary for cooperation
with ido.  Reported by Kim F. Storm <storm@cua.dk>.
----------------------------
revision 2.490
date: 2005-10-16 04:51:37 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-perl-directory-files-and-attributes): Add error
handling.
(tramp-handle-directory-files-and-attributes-with-perl): Handle
perl error msg.
----------------------------
revision 2.489
date: 2005-10-16 03:29:09 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-enter-password): `tramp-password-end-of-line'
must be taken from `tramp-current-hop-*'.
----------------------------
revision 2.488
date: 2005-10-13 13:55:22 -0700;  author: albinus;  state: Exp;  lines: +2 -0;

Version 2.1.4 released.

* configure.ac: Bump version.

* texi/tramp.texi (Bug Reports): Make a cross reference to `Traces and
Profiles'.
(Traces and Profiles): Explain settings for backtraces.
----------------------------
revision 2.487
date: 2005-10-12 23:58:44 -0700;  author: albinus;  state: Exp;  lines: +2 -2;
*** empty log message ***
----------------------------
revision 2.486
date: 2005-10-12 23:57:41 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-debug-message, tramp-message-for-buffer): Write
message only if connection buffer exists.  Otherwise, method, user
and host are not set yet.
(tramp-handle-directory-files-and-attributes-with-perl)
(tramp-handle-directory-files-and-attributes-with-stat): New
defuns.
(tramp-handle-directory-files-and-attributes): Use them.
----------------------------
revision 2.485
date: 2005-10-12 13:49:29 -0700;  author: albinus;  state: Exp;  lines: +19 -0;

* lisp/tramp.el (top): Try to simplify XEmacs byte-compiler
pacification.
(tramp-verbose): Finish doc string.  New default value is 3.
(all): Apply new verbosity levels.
(tramp-get-debug-buffer): Remove definition of outline faces.  The
default values are good enough.
(tramp-bug): Explain setting of `tramp-verbose'.

* lisp/tramp-cache.el (all): Apply new verbosity levels.

* lisp/tramp-smb.el (top): Try to simplify XEmacs byte-compiler
pacification.
(all): Apply new verbosity levels.

* lisp/tramp-vc.el (top): Try to simplify XEmacs byte-compiler
pacification.

* texi/tramp.texi (Bug Reports, Traces and Profiles): Explain setting
of `tramp-verbose'.

* texi/trampinst.texi (Installation parameters): Try it now with @w{}.
----------------------------
revision 2.484
date: 2005-10-11 14:58:44 -0700;  author: albinus;  state: Exp;  lines: +20 -0;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rearrange
substitutions that they are accepted with older shell versions.

* Makefile.XEmacs (REQUIRES): Remove fsf-compat, add
sh-script (for executable-find).

* lisp/tramp.el: Require `timer-funcs' instead of `timer' if in
XEmacs.
(tramp-verbose): Start rewriting the doc string.  Not
finished yet.
(tramp-handle-delete-file, tramp-handle-insert-file-contents)
(tramp-sh-file-name-handler): Signals expect a list as last
parameter.
(tramp-file-name-handler): Handle signals in order to trace them
in the debug buffer.

* lisp/tramp-smb.el (tramp-smb-handle-directory-files): Rewritten in
order to profit from caching results.
(tramp-smb-handle-file-name-all-completions): `localname' must be
expanded by `file-name-as-directory'.
----------------------------
revision 2.483
date: 2005-10-10 14:07:47 -0700;  author: albinus;  state: Exp;  lines: +21 -0;

* lisp/tramp.el (tramp-handle-delete-directory)
(tramp-handle-dired-recursive-delete-directory): Apply
`tramp-cache-flush-directory'.
(tramp-handle-insert-directory): Apply `tramp-cache-flush-file'.

* lisp/tramp-cache.el: Autoload the needed functions from tramp.el.
(tramp-cache-flush-directory, tramp-cache-before-revert-function):
New defuns.
(top): Add `tramp-cache-before-revert-function' to
`before-revert-hook'.  Deactivate all Tramp messages for
performance reasons.

* lisp/tramp-smb.el (tramp-smb-handle-delete-directory): Apply
`tramp-cache-flush-directory'.
(tramp-smb-handle-insert-directory): Apply
`tramp-cache-flush-file'.
(tramp-smb-handle-directory-files): Local file must be handled as
directory, otherwise the listing is senseless.

* texi/trampinst.texi (Installation parameters): Don't use @tie{}, it
isn't defined in older texinfo versions.
----------------------------
revision 2.482
date: 2005-10-09 12:43:34 -0700;  author: albinus;  state: Exp;  lines: +17 -0;

* INSTALL: Provide working options for installing on MS Windows.

* lisp/tramp.el (tramp-completion-without-shell-p): Removed.  Not
needed anymore.
(tramp-md5-function): Fix typo in error message.
(tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-handle-file-name-all-completions): Rewritten in order to
profit from caching results.
(tramp-handle-file-name-completion): Removed unnecessary code.

* lisp/tramp-cache.el (with-cache-data): ,@body must be wrapped by
`progn'.  Add `edebug-form-spec' property.

* lisp/tramp-smb.el (tramp-smb-handle-file-name-all-completions):
Rewritten in order to profit from caching results.

* texi/tramp.texi (Dired): Node removed.  There are no limitations on
directory listings anymore.
(Default Method): Fix typo in variable name.
(Filename completion): Remove limitations on directory listings.

* texi/trampinst.texi (Installation parameters): Provide working
options for installing on MS Windows.
----------------------------
revision 2.481
date: 2005-09-21 23:12:36 -0700;  author: albinus;  state: Exp;  lines: +14 -0;

* lisp/tramp.el (tramp-actions-before-shell): Reorder actions.  There
might be a speedup when the next action is recognized immediately.
At least it doesn't hurt.
(tramp-find-executable): "which(1)" doesn't return a correct error
code in some implementations.  Use the number of words it returns
as indication instead of.
(tramp-send-string): Trace all chunk sendings.  It might be huge
for large files, but trace level 10 should be an exception.
Remove the sleep, it's not necessary (and disturbs accept process
output logic on Emacs installations without timeouts, like on my
HP-UX 10.20 desktop).
----------------------------
revision 2.480
date: 2005-09-18 14:06:27 -0700;  author: albinus;  state: Exp;  lines: +17 -0;

* lisp/tramp.el (tramp-login-prompt-regexp): Expand regexp in order to
cover prompts like "login as:".  Reported by Slawomir Nowaczyk
<slawomir.nowaczyk.847@student.lu.se>.
(tramp-debug-message): Remove FACE as parameter.  Not necessary
any longer, we use outline mode now.
(tramp-message, tramp-trace): Change callees.
(tramp-message-for-buffer): It is a defsubst now.
(tramp-get-debug-buffer): Initialize outline mode.
(tramp-outline-level): New defun.
(tramp-insert-with-face): Removed.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): tramp-current-* and
tramp-current-hop-* values should be already expanded.
(tramp-action-login, tramp-read-passwd): Use tramp-current-hop-*.

* texi/tramp.texi (Traces and Profiles): New node.
----------------------------
revision 2.479
date: 2005-09-11 14:17:32 -0700;  author: albinus;  state: Exp;  lines: +46 -1;

* tramp.el (top): Reduce compiler warnings.
(tramp-current-hop-method, tramp-current-hop-user)
(tramp-current-hop-host): New defvars.
(tramp-handle-file-attributes-with-stat): Return floating point
numbers.  Integers did run out of 2**28.
(tramp-do-copy-or-rename-file-out-of-band, tramp-pre-connection)
(tramp-maybe-open-connection): Initialize new defvars.
(tramp-handle-shell-command): Send "tramp_set_exit_status", it
isn't sent any longer during initialization.
(tramp-handle-write-region): Remote decoding command is sent in
one bunch.
(tramp-find-executable): Check first in $PATH with "which"
command.  Directory scan command is sent in one bunch.
(tramp-check-ls-command, tramp-find-ls-command): Debug messages
did go to a wrong debug buffer.
(tramp-action-password, tramp-process-actions): Call
`tramp-enter-password' and `tramp-clear-passwd' with changed
parameters.
(tramp-enter-password, tramp-read-passwd, tramp-clear-passwd):
Change parameter set.  Rewrite.
(tramp-post-connection): Remove unnecessary commands.
(tramp-send-command, tramp-send-string): Move setting of
`tramp-last-cmd-time'.
(tramp-wait-for-output): Correct wrong variable names.
(tramp-get-ls-command): Simplify code.

* tramp-cache.el (tramp-enable-cache): Removed.  Works stable now.
(with-cache-data): Change accordingly.

* tramp-smb.el (top): Require `tramp-cache'.  Reduce compiler
warnings.
(tramp-smb-handle-file-attributes)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-writable-p): Add `with-cache-data'.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-directory)
(tramp-smb-handle-delete-file, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Flush cached data.
(tramp-smb-open-connection) Call `tramp-enter-password' and
`tramp-clear-passwd' with changed parameters.

* tramp-vc.el (top): Reduce compiler warnings.
----------------------------
revision 2.478
date: 2005-09-07 14:43:51 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

* tramp.el (tramp-action-password): Compile the password prompt
from `method', `user' and `host'.  Sometimes it isn't obvious
which password to enter, for example with remote files offered by
recentf.el.  Suggested by Robert Marshall
<robert@chezmarshall.freeserve.co.uk>.
----------------------------
revision 2.477
date: 2005-09-03 15:37:07 -0700;  author: albinus;  state: Exp;  lines: +51 -1;

* lisp/tramp.el (top): Rewrite compiler wrapping for `warnings'.
(tramp-ls-command, tramp-test-groks-nt)
(tramp-test-groks-nt): Remove variables.
(tramp-handle-file-accessible-directory-p): Remove function.
(tramp-file-name-handler-alist): Remove entry for
`file-accessible-directory-p'.  Due to caching it doesn't make
sense to call the test commands explicitely.
(tramp-handle-file-exists-p): Format-string must be given now.
(tramp-handle-file-attributes-with-stat): Don't use hard-coded
"stat" command.
(tramp-handle-file-newer-than-file-p): Simplify call of
`tramp-run-test2' by using `tramp-get-test-nt-command'.
(tramp-handle-file-directory-p): `tramp-run-test' should be
sufficient.
(tramp-handle-file-name-all-completions): Don't use hard-coded
"test" command.
(tramp-handle-make-auto-save-file-name):
`tramp-subst-strs-in-string' should be applied all cases.
(tramp-run-test): Use `with-parsed-tramp-file-name'.
(tramp-run-test2): PROGRAM is replaced by FORMAT-STRING.  SWITCH
not needed anymore.
(tramp-find-file-exists-command): Don't use hard-coded "test" and
"ls" commands.  Work with local file names but remote file names.
(tramp-post-connection): Remove settings for
`tramp-file-exists-command', `tramp-ls-command',
`tramp-test-groks-nt', `tramp-connection-property' "perl",
tramp-connection-property "perl-scripts",
`tramp-connection-property' "ln" and `tramp-connection-property'
"stat".  They are set on-the-fly.
(tramp-convert-file-attributes): Rewrite setting directory
indication bit.
(tramp-get-ls-command, tramp-get-file-exists-command)
(tramp-get-remote-perl, tramp-get-remote-stat):
(tramp-get-remote-ln):  Rewrite.
(tramp-bug): Remove deleted variables.
(tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): Insert special handling for
`last-coding-system-used' again, it still seems to be
necessary (unlike stated before).  Reported by Toshinori Sugita
<sugita@d-pad.co.jp>.

* lisp/tramp-cache.el (top): Rewrite compiler wrapping for
`with-no-warnings.
(tramp-cache-get-file-property): Add new parameter DEFAULT.
(tramp-cache-flush-file): Don't use the message.
(with-cache-data): Applicable for absolute file names only.
----------------------------
revision 2.476
date: 2005-08-31 13:54:43 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-file-name-handler-alist)
(tramp-file-name-for-operation): Add `make-auto-save-file-name'.
(tramp-handle-make-auto-save-file-name): Rename from
`tramp-make-auto-save-file-name'.
(tramp-exists-file-name-handler): New defun.
(tramp-advice-make-auto-save-file-name): Make defadvice only when
`make-auto-save-file-name' is not a magic file name operation.
----------------------------
revision 2.475
date: 2005-08-28 11:56:37 -0700;  author: albinus;  state: Exp;  lines: +32 -0;

* Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/trampcache.el: Removed.  Replaced by tramp-cache.el.

* lisp/tramp-cache.el: New file.  Implementation inspired by work of
Daniel Pittman <daniel@rimspace.net>.

* lisp/tramp.el: Introduce filename caching.  Require `tramp-cache'.
(tramp-syntax): Correct doc string.
(tramp-handle-file-truename, tramp-handle-file-exists-p)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-accessible-directory-p)
(tramp-handle-file-directory-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p): Add `with-cache-data'.
(tramp-handle-file-attributes): Add `with-cache-data'.  Check also
for existence of applicable stat(1) command, which is preferred
over the Perl script.
(tramp-handle-file-attributes-with-stat, tramp-get-remote-stat):
New defuns.
(tramp-handle-set-file-modes, tramp-handle-add-name-to-file)
(tramp-do-copy-or-rename-file, tramp-handle-delete-directory)
(tramp-handle-delete-file, tramp-handle-dired-compress-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-write-region): Flush cashed data.
(tramp-pre-connection): Initialise cache.
(tramp-post-connection): Check for stat(1) command.
(tramp-maybe-open-connection): Optimize code.
(tramp-convert-file-attributes): Handle also attributes returned
by stat.

* test/tramp-time.el: New file.
----------------------------
revision 2.474
date: 2005-08-25 14:23:51 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-password-prompt-regexp): There might be other
words before trailing ":".  Reported by Kurt Steinkraus
<kurt@steinkraus.us>.
(tramp-chunksize): Improve docstring.
(tramp-set-auto-save-file-modes): Octal integer code #o600 breaks
Emacs 20.  Use `tramp-octal-to-decimal' therefore.  Reported by
Christian Joergensen <bugs@razor.dk>.
----------------------------
revision 2.473
date: 2005-08-23 14:21:18 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-chunksize): Improve docstring.
----------------------------
revision 2.472
date: 2005-08-21 14:27:35 -0700;  author: albinus;  state: Exp;  lines: +65 -0;

Rewrite communication functions in order to apply them more transparent.
----------------------------
revision 2.471
date: 2005-08-09 14:34:10 -0700;  author: albinus;  state: Exp;  lines: +7 -1;

* lisp/tramp.el (tramp-make-tramp-file-name): METHOD must not be
prepopulated.
(tramp-bug): Fix variable names.
----------------------------
revision 2.470
date: 2005-08-07 14:33:41 -0700;  author: albinus;  state: Exp;  lines: +28 -0;

* lisp/tramp.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-accept-process-output): New defun.
(tramp-process-one-action, tramp-wait-for-regexp)
(tramp-wait-for-output, tramp-discard-garbage-erase-buffer): Call
it.  Reported by David Howells <dhowells@redhat.com>.
(clear-visited-file-modtime): Defadvice removed.  The check for
unset buffer's modtime does not need to be based on
`tramp-buffer-file-attributes'.  Suggested by RMS.
(tramp-send-command): Simplify.
(tramp-make-tramp-file-name): At least method and host delimeter
must exist.

* lisp/tramp-smb.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-smb-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-smb-wait-for-output): Call `tramp-accept-process-output'.
Simplify trace message.
----------------------------
revision 2.469
date: 2005-08-01 13:58:34 -0700;  author: albinus;  state: Exp;  lines: +14 -0;

Update years in copyright notice.

* lisp/tramp.el (tramp-debug-message): Handle the case, that
`backtrace-frame' returns a lambda expression, or nil.
(tramp-message): Don't use ARGS as format string, it
could contain "%".
(tramp-wait-for-regexp, tramp-wait-for-output): Add a format
string to the call of `tramp-trace'.
(tramp-discard-garbage-erase-buffer): Beautify trace.
----------------------------
revision 2.468
date: 2005-07-31 15:04:06 -0700;  author: albinus;  state: Exp;  lines: +30 -0;

* lisp/tramp.el (tramp-uudecode): Remove shell function frame to make
it fit for `tramp-maybe-send-script'.
(tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes): Add Perl call to make
it fit for `tramp-maybe-send-script'. Double "%".
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode): Change it to a defconst.
(tramp-debug-message, tramp-trace): New defsubst.
(tramp-message): Call it.
(tramp-handle-file-local-copy): Call `insert-buffer-substring'
instead of `insert-buffer'.  Compiler warning.
(tramp-maybe-send-perl-script): Rename to
`tramp-maybe-send-script'. Simplify sending the string.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-directory-files-and-attributes): Call it.
(tramp-find-shell): Use `tramp-barf-if-no-shell-prompt' for code
sequence with same logic.
(tramp-wait-for-regexp, tramp-wait-for-output)
(tramp-discard-garbage-erase-buffer)
(tramp-send-command, tramp-send-string): Simplify trace messages.
(tramp-post-connection): Don't send all coding scripts.  This
will be done if necessary only.
(tramp-coding-commands): Split into new defconst
`tramp-local-coding-commands' and `tramp-remote-coding-commands'.
(tramp-find-inline-encoding): Rewrite.  Use new coding constants
in order to send only scripts when needed.
(tramp-bug): Adapt list of variables.
----------------------------
revision 2.467
date: 2005-07-28 15:03:28 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-handle-write-region): Remove unnecessary code.
----------------------------
revision 2.466
date: 2005-07-26 13:10:10 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-user-regexp): Allow "@" as part of user name.
(tramp-last-cmd, tramp-process-echoes)
(tramp-feature-write-region-fix): Remove variables.  They are
mostly not used.
----------------------------
revision 2.465
date: 2005-07-21 14:37:17 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-handle-load): Fix typo in error message.
----------------------------
revision 2.464
date: 2005-07-20 11:54:42 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp.el (tramp-completion-handle-expand-file-name): Discard call
of `tramp-drop-volume-letter'.  It is not necessary, and there
have been problems with (expand-file-name "~/.netrc" "/") in
ange-ftp.  Reported by Richard G. Bielawski
<Richard.G.Bielawski@wellsfargo.com>.
----------------------------
revision 2.463
date: 2005-07-17 09:24:28 -0700;  author: albinus;  state: Exp;  lines: +14 -0;

* lisp/tramp.el (tramp-do-copy-or-rename-file-out-of-band): Transfer
message should always be visible.
(tramp-handle-insert-directory, tramp-append-tramp-buffers):
Pacify byte-compiler.
(tramp-bug): Delete non-existing variables from list.  Apply
`tramp-load-report-modules' as pre-hook.  Mask
`tramp-password-prompt-regexp', `tramp-shell-prompt-pattern' and
`shell-prompt-pattern' because of non-7bit characters.  Reported
by Sebastian Luque <sluque@mun.ca>.
(tramp-reporter-dump-variable, tramp-load-report-modules): New
defuns.
----------------------------
revision 2.462
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.461
date: 2005-06-26 12:45:08 -0700;  author: albinus;  state: Exp;  lines: +24 -0;

* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fourth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in: Adapt email addresses.
----------------------------
revision 2.460
date: 2005-05-01 00:31:48 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (tramp-handle-dired-call-process)
(tramp-handle-insert-directory):`insert-buffer' cannot be used
because the contents of the Tramp buffer is changed before
insertion (`expand-file' and alike).
(tramp-handle-insert-directory): If `localname' has an empty
nondirectory name, it must not be quoted.
----------------------------
revision 2.459
date: 2005-04-29 13:44:25 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set file modes of
`buffer-auto-save-file-name' to ?\600 as fallback solution.
Reported by Ferenc Wagner <wferi@tba.elte.hu>.
----------------------------
revision 2.458
date: 2005-04-16 08:52:24 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (tramp-pre-connection): Add parameter CHUNKSIZE.  Make
local variable `tramp-chunksize'.  Change callees.
(tramp-open-connection-setup-interactive-shell): Check remote host
for buggy `send-process-string' implementation.  Set
`tramp-chunksize' if found.  Reported by Michael Kifer
<kifer@cs.sunysb.edu> (and a lot of other people all the years).
----------------------------
revision 2.457
date: 2005-04-13 13:08:18 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-handle-shell-command): `insert-buffer' cannot be
used because the contents of the Tramp buffer is changed before
insertion (`expand-file' and alike).  Reported by Frédéric Bothamy
<frederic.bothamy@free.fr>.
----------------------------
revision 2.456
date: 2005-04-03 09:50:25 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-set-auto-save): Actions should be done for Tramp
file name handler only.  Ange-FTP has its own auto-save mechanism.
Reported by Richard G. Bielawski <Richard.G.Bielawski@wellsfargo.com>.
(tramp-bug): Remove obsolete variable.
(tramp-append-tramp-buffers): Rewrite partly.  More suitable check
for presence of `mml-mode'.  Make it running for older Emacsen as
well.
----------------------------
revision 2.455
date: 2005-02-27 06:36:23 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-append-tramp-buffers): New defun.
(tramp-bug): Apply `tramp-append-tramp-buffers' as post-hook.
Catch `dont-send' signal.
----------------------------
revision 2.454
date: 2005-02-20 08:19:53 -0800;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.453
date: 2005-02-20 08:11:48 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set always
permissions, because there might be an old auto-saved file
belonging to another original file.  This could be a security
threat.

* texi/trampver.texi.in: Replace "Emacs" by "GNU Emacs".

* texi/tramp.texi: Replace "Emacs" by "GNU Emacs".
(Default Method): Offer shortened syntax for "su" and "sudo"
methods.
----------------------------
revision 2.452
date: 2005-02-16 13:33:51 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp-smb.el (tramp-smb-prompt): Prompt can contain spaces
inside directory names.
(tramp-smb-handle-delete-directory, tramp-smb-handle-delete-file):
No error message if DIRECTORY or FILENAME doesn't exist.
----------------------------
revision 2.451
date: 2005-02-12 03:19:00 -0800;  author: albinus;  state: Exp;  lines: +86 -77;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.450
date: 2005-02-05 15:02:41 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* INSTALL: Explain in more detail configure parameters
"with-xemacs", "--with-lispdir" and "--infodir".  Change bug
report address to [tramp-devel@gnu.org].

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rewrite
completely in order to apply better default values.

* configure.ac: Reorder substitution of installation directories
wrt changes in aclocal.m4.

* lisp/tramp.el (all): Change all addresses to .gnu.org.

* texi/Makefile.in (datadir): New variable.

* texi/trampinst.texi (Installation parameters): Explain in more detail
configure parameters "with-xemacs", "--with-lispdir" and
"--infodir".
----------------------------
revision 2.449
date: 2005-02-02 14:38:25 -0800;  author: albinus;  state: Exp;  lines: +3 -3;

* INSTALL: Linux configure option prefix should be
"--prefix=/usr".  Reported by Bradley Dilger <dilger@wrecking.org>.

* configure.ac: Bump version (to 2.1.4-pre).  Change bug report
address to [tramp-devel@gnu.org].

* texi/tramp.texi (all): Change all addresses to .gnu.org.
(Obtaining Tramp): Mention the Nightly CVS Tree Tarball as CVS
direct access alternative.

* texi/trampinst.texi (Installation parameters): Linux configure option
prefix should be "--prefix=/usr".  Reported by Bradley Dilger
<dilger@wrecking.org>.
----------------------------
revision 2.448
date: 2005-01-16 06:18:59 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

Version 2.1.3 released.
----------------------------
revision 2.447
date: 2005-01-15 13:45:31 -0800;  author: albinus;  state: Exp;  lines: +16 -0;

* lisp/tramp.el (tramp-operation-not-permitted-regexp) New defcustom,
catching keep-date problems in cp/scp operations.
(tramp-handle-copy-file): Don't call `set-file-modes'
unconditionally.  Specialized functions should know better what is
necessary.  This improves performance a little bit, and the
functions could catch errors with `cp -p' and `scp -p'.
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-out-of-band): Call `set-file-modes'
when appropriate.
(tramp-do-copy-or-rename-file-directly): Mask `cp -p' error.  Call
`set-file-modes' when appropriate.
(tramp-action-out-of-band): Mask `scp -p' error.
Reported by Isak Johnsson <isak@hypergene.com>
----------------------------
revision 2.446
date: 2005-01-09 11:10:39 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp-util.el (tramp-remap-command): New defun.
(top): Remove `define-key' calls.  They are replaced by respective
`tramp-remap-command' and `add-menu-button' calls.  Add
`tramp-minor-mode' to `dired-mode-hook'.
(tramp-compile, tramp-recompile): Call the commands
asynchronously.  Add `compilation-mode' to *Compilation* buffer.

* texi/tramp.texi: (Compilation): Make reference to (X)Emacs manual
flavor specific.  Remove mentioned restrictions for Emacs < 21.4
and for XEmacs.
----------------------------
revision 2.445
date: 2005-01-05 13:20:52 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el: Fix copyright years.

* lisp/tramp-smb.el: Fix copyright years.  Adapt author address.

* lisp/tramp-util.el: Fix copyright years.  Adapt author address.
(tramp-minor-mode): Mode must toggle.

* texi/tramp.texi: Fix copyright years.
----------------------------
revision 2.444
date: 2005-01-04 15:19:03 -0800;  author: albinus;  state: Exp;  lines: +13 -0;

* lisp/tramp.el (tramp-maybe-open-connection): If the local host does
not run a UNIX derivate, the local shell cannot handle command
sequences separated with ";".  Reported by Takashi Tsunakawa
<tuna@is.s.u-tokyo.ac.jp>.

* lisp/tramp-smb.el (tramp-smb-open-connection): Check existence of
`tramp-smb-program'.

* lisp/tramp-util.el (tramp-compile, tramp-recompile): Enable
`tramp-minor-mode' in buffer "*Compilation*".

* texi/tramp.texi (Compilation): Give a note that remote compilation is
performed synchronously only, for the time being.
----------------------------
revision 2.443
date: 2004-12-29 13:15:27 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp-smb.el: Add new Todo item.

* lisp/tramp-util.el (tramp-minor-mode): New minor mode.  Add it to
`find-file-hooks'.
(tramp-minor-mode-map): Respective map.  Add remapping for
`compile' and `recompile'.
(tramp-recompile): New defun.

* texi/tramp.texi (Compilation): New section, describing compilation of
remote files.
----------------------------
revision 2.442
date: 2004-12-25 13:20:30 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-get-buffer, tramp-get-debug-buffer): Discard the
undo list of both Tramp buffer and debug buffer.  Reported by
Joakim Verona <joakim@verona.se>
----------------------------
revision 2.441
date: 2004-12-23 16:31:48 -0800;  author: albinus;  state: Exp;  lines: +12 -0;

* lisp/tramp.el (tramp-file-name-for-operation): Mark `shell-command'
as magic for Emacs only.
(tramp-wait-for-output): Fix error in deleting region.  From Kai
Grossjohann <kai.grossjohann@gmx.net>.

* lisp/tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
(tramp-vc-simple-command): Call `tramp-handle-shell-command' but
`shell-command', because it isn't magic in XEmacs.  Reported by
Adrian Aichner <adrian@xemacs.org>.
----------------------------
revision 2.440
date: 2004-12-23 03:00:00 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`substitute-in-file-name.
(tramp-smb-handle-substitute-in-file-name): New defun.
(tramp-smb-advice-PC-do-completion): Delete advice.
----------------------------
revision 2.439
date: 2004-12-05 08:55:01 -0800;  author: albinus;  state: Exp;  lines: +7 -0;


* lisp/tramp.el (tramp-maybe-send-perl-script): Change order of
parameters wrt Tramp convention.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-directory-files-and-attributes): Apply it.
----------------------------
revision 2.438
date: 2004-12-05 04:51:12 -0800;  author: albinus;  state: Exp;  lines: +22 -0;

Sync with Emacs CVS

* lisp/tramp.el (tramp-handle-directory-files-and-attributes): New function.
(tramp-perl-directory-files-and-attributes): New constant.
(tramp-file-name-handler-alist): Delete file-directory-files, add
directory-files-and-attributes.
(tramp-perl-file-attributes): Surround uid and gid by double
quotes. Change parameter id-format from nonnumeric.
(tramp-convert-file-attributes): New function.
(tramp-handle-file-attributes): Use it.
(tramp-maybe-send-perl-script): New function.
(tramp-handle-file-attributes-with-perl): Use it. Don't convert
file mode. Change parameter id-format from nonnumeric.
(tramp-handle-file-attributes-with-ls): Change parameter id-format
from nonnumeric.
(tramp-post-connection): Don't send tramp-perl-file-attributes
script. Reset connection property "perl-scripts".
(tramp-handle-insert-directory): Run real handler when ls-lisp is
in use.
----------------------------
revision 2.437
date: 2004-12-04 09:51:53 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-do-copy-or-rename-file-out-of-band): Check for
existence of `copy-program'.  Reported by Zack Weinberg
<zack@codesourcery.com>.
(tramp group): Add :version.
----------------------------
revision 2.436
date: 2004-11-06 12:33:07 -0800;  author: kai;  state: Exp;  lines: +1 -0;
(tramp-uudecode): Mention `uudecode -o /dev/stdout'.
----------------------------
revision 2.435
date: 2004-11-05 06:02:37 -0800;  author: kai;  state: Exp;  lines: +2 -1;
Add attribution to most recent entry.
----------------------------
revision 2.434
date: 2004-11-05 06:01:56 -0800;  author: kai;  state: Exp;  lines: +10 -0;
(tramp-coding-commands): Additionally try "uudecode -o
/dev/stdout" before trying "uudecode -o -".  Suggested by Han Boetes.

(tramp-handle-file-newer-than-file-p): Reverse logic.  From Andrew
J. Korty <ajk@iu.edu>.
----------------------------
revision 2.433
date: 2004-10-23 12:53:38 -0700;  author: kai;  state: Exp;  lines: +9 -0;
* tramp-vc.el (vc-do-command): Do not advise it if
process-file is fboundp.
* tramp.el (tramp-file-name-handler-alist): Add entry for
process-file.
(tramp-handle-process-file): New function.
(tramp-file-name-for-operation): Support process-file.
----------------------------
revision 2.432
date: 2004-10-17 09:33:30 -0700;  author: albinus;  state: Exp;  lines: +12 -0;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.431
date: 2004-10-12 14:31:26 -0700;  author: albinus;  state: Exp;  lines: +7 -0;


* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Don't activate
advice during definition.  This is done later on, depending on
test result of `substitute-in-file-name'.  Suggested by Stefan
Monnier <monnier@iro.umontreal.ca>.
----------------------------
revision 2.430
date: 2004-10-10 09:48:44 -0700;  author: albinus;  state: Exp;  lines: +11 -1;


* Makefile.in (savannah): Don't apply "configure" for Japanese
manual, but call "make -C texi" with proper variable settings.

* aclocal.m4 (AC_EMACS_INFO): Write default values in help output
for "--with-xemacs" and "--with-emacs".
(AC_PATH_LISPDIR): Write default value in help output for
"--with-lispdir".
(all): Unify capitalization for help output.

* configure.ac: Bump version (to 2.1.3-pre).

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.
(savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.429
date: 2004-10-10 05:34:22 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-coding-commands): New entry, uses built-in uu
encoding provided by Perl.  Contributed by Slaven Rezic.  (2
lines.)
----------------------------
revision 2.428
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +16 -5;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 2.427
date: 2004-09-08 14:55:51 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* lisp/tramp.el (tramp-perl-decode): Fixed an error in Perl
implementation.  $pending must be cleared every loop.  Reported by
Benjamin Place <benjaminplace@sprintmail.com>
----------------------------
revision 2.426
date: 2004-09-05 11:26:32 -0700;  author: albinus;  state: Exp;  lines: +6 -2;


* lisp/tramp.el (top): Undefine "/" in `read-file-name-map' when syntax
is 'url.  Otherwise, XEmacs would break the syntax with
`minibuffer-electric-separator'.

* text/tramp.texi (Alternative Syntax): New section.
----------------------------
revision 2.425
date: 2004-09-04 07:52:00 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* lisp/tramp-efs.el (all): Rename `tramp-postfix-single-method-*' to
`tramp-postfix-method-*'.

* texi/tramp.texi (Frequently Asked Questions): Add two examples of
using abbreviations to shortening Tramp file names.
----------------------------
revision 2.424
date: 2004-08-30 22:26:23 -0700;  author: albinus;  state: Exp;  lines: +7 -0;


* lisp/tramp.el (tramp-maybe-open-connection): The echo command
encloses every single word with '\"'.  Otherwise, the message
could be detected during connection already, and Tramp raises a
false error.
----------------------------
revision 2.423
date: 2004-08-29 07:09:21 -0700;  author: albinus;  state: Exp;  lines: +0 -1;


Adding URL syntax.  Open problems:
- Masking "/~".
- Masking "://" in XEmacs.
- FTP/EFS changes.
- Documentation.
----------------------------
revision 2.422
date: 2004-08-29 07:07:33 -0700;  author: albinus;  state: Exp;  lines: +44 -0;


Adding URL syntax.  Open problems:
- Masking "/~".
- Masking "://" in XEmacs.
- FTP/EFS changes.
- Documentation.
----------------------------
revision 2.421
date: 2004-08-29 06:03:35 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-handle-verify-visited-file-modtime): New docstring.  From
Luc Teirlinck.
----------------------------
revision 2.420
date: 2004-08-15 07:00:47 -0700;  author: albinus;  state: Exp;  lines: +8 -0;


* lisp/tramp.el (tramp-handle-rename-file): Apply t for KEEP-DATE
when calling `tramp-do-copy-or-rename-file'.
(tramp-do-copy-or-rename-file-out-of-band): If KEEP-DATE is true,
and the method doesn't provide a keep-date argument, call
`set-file-times' after copying.
----------------------------
revision 2.419
date: 2004-08-14 12:20:14 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* configure.ac: Bump version (to 2.1.2-pre).  Set
TRAMP_EMACS_MERGE_VERSION (to 2.0.44).

* lisp/tramp.el (tramp-methods): "sftp" has nil
`tramp-copy-keep-date-arg'.
(tramp-do-copy-or-rename-file-out-of-band): Handle it.
----------------------------
revision 2.418
date: 2004-08-09 13:20:37 -0700;  author: albinus;  state: Exp;  lines: +8 -0;


Version 2.1.1 released.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-methods): "sftp", "psftp": new external methods.
"plink", "plink1" and "pscp": parameter for port specification is
"-P".

* texi/tramp.texi (Inline methods): Correct wrong (outdated) index
"km".  Say, that the port specification is also available for
"plink".
(External transfer methods): Add "sftp" and "psftp" methods.
----------------------------
revision 2.417
date: 2004-08-06 13:12:26 -0700;  author: albinus;  state: Exp;  lines: +7 -0;


* lisp/tramp.el (tramp-post-connection): Quote $1 and $2 of shell
function "tramp_file_attributes".  Otherwise, file names
containing spaces are misinterpreted.  Reported by Magnus Henoch
<mange@freemail.hu>.
----------------------------
revision 2.416
date: 2004-08-05 13:09:12 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* lisp/tramp.el (tramp-handle-file-truename): FILENAME must be expanded
first.  Otherwise, parameters like "/ssh:deego@gnufans.net:~" will
return obscure results.  Reported by D. Goel <deego@gnufans.org>.
----------------------------
revision 2.415
date: 2004-08-03 14:20:10 -0700;  author: albinus;  state: Exp;  lines: +9 -0;


* lisp/tramp.el (tramp-methods): Change custom definition of log-args
to the new syntax.
(tramp-wrong-passwd-regexp): Add "Tramp connection closed" string.
(tramp-maybe-open-connection): Add "echo \"Tramp connection
closed\"" to connection command.  By this, we will see easily when
a connection has failed.
----------------------------
revision 2.414
date: 2004-08-02 14:07:19 -0700;  author: albinus;  state: Exp;  lines: +13 -0;


* lisp/tramp.el (tramp-methods): Add "(-p" "%p)" in login-args where
applicable for the port kludge.  Arrange login-args as list of
lists, in order to discard a sublist when the corresponding
parameter is not set (like user name, port number).  Adapt
docstring.
(tramp-maybe-open-connection): Change evaluation of login-args
according the the changes above.
(tramp-make-tramp-file-name): Use "%l" as placeholder for the
localname part.  "%p" is used for port numbers now, and we want to
avoid headaches.

* texi/tramp.texi (all): Exchange nil by @code{nil} where not done
already.
(Inline methods): Say explicitely, that the host name part is
ignored for the su and sudo methods.
(Default User): Give an example for user name mismatch if the
connection method has an own configuration. Show solution.
----------------------------
revision 2.413
date: 2004-08-01 07:36:24 -0700;  author: albinus;  state: Exp;  lines: +20 -1;


* lisp/tramp.el (tramp-default-method-alist)
(tramp-default-proxies-alist): Correcting doc string.
(tramp-default-user, tramp-default-user-alist)
(tramp-default-host): New defcustom.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-expand-file-name, tramp-action-login)
(tramp-buffer-name, tramp-debug-buffer-name)
(tramp-maybe-open-connection)
(tramp-read-passwd, tramp-clear-passwd): Apply `tramp-find-user'
and `tramp-find-host'.
(tramp-find-default-method): Allow nil regexps.
(tramp-find-default-user, tramp-find-user)
(tramp-find-default-host, tramp-find-host): New defun.

* lisp/tramp-smb.el (top): Add empty (anonymous) user to
`tramp-default-user-alist' for smb method.

* texi/tramp.texi (Default User, Default Host): New chapters.
----------------------------
revision 2.412
date: 2004-07-31 12:04:00 -0700;  author: albinus;  state: Exp;  lines: +7 -2;


* lisp/tramp.el (tramp-maybe-open-connection): Foreign and out-of-band
methods are not supported for multi-hops.
----------------------------
revision 2.411
date: 2004-07-30 12:52:03 -0700;  author: albinus;  state: Exp;  lines: +9 -0;


* INSTALL: Precise supported (X)Emacs versions.

* aclocal.m4 (AC_EMACS_INFO): Add check for proper (X)Emacs
version.

* configure.ac: Precise comments.

* lisp/trampver.el.in: Check for (X)Emacs version.  Code is from macro
AC_EMACS_INFO of aclocal.m4.

* lisp/tramp.el (top): Remove (X)Emacs version check.
(tramp-maybe-open-connection): Handle NIL values in
`tramp-default-proxies-alist'.

* texi/trampver.texi.in: Remove `postfixmultihop'.  Rename
`postfixsinglehop' into `postfixhop'.

* texi/tramp.texi (top): Rename `postfixsinglehop' into `postfixhop'.
(Multi-hop Methods, Multi-hop filename syntax): Removed, including
al pointers to.
(Multi-hops): New chapter.
(History of Tramp): Proxy hosts mentioned.
(Frequently Asked Questions): Precise supported (X)Emacs
versions.
----------------------------
revision 2.410
date: 2004-07-27 23:01:13 -0700;  author: albinus;  state: Exp;  lines: +15 -0;


* lisp/tramp.el (tramp-maybe-open-connection): Set
`coding-system-for-read'.  It was lost last patch.

* lisp/tramp-smb.el (all): Don't load "cl-seq", Emacs 19 is out of
scope.  Remove `with-parsed-tramp-file-name' kludge.  Debugging
spec set in tramp.el is sufficient.  Remove multi-method parameter
from `tramp-message-for-buffer' calls.
(tramp-smb-open-connection): Set `coding-system-for-read' to nil.
Check for Emacs 20 is not necessary any longer.

* lisp/tramp-ftp.el (top): Don't load "cl-seq", Emacs 19 is out of
scope.
----------------------------
revision 2.409
date: 2004-07-26 12:36:34 -0700;  author: albinus;  state: Exp;  lines: +57 -1;


Removing multi-hop methods.  Incorporating proxies.
----------------------------
revision 2.408
date: 2004-07-24 10:56:07 -0700;  author: albinus;  state: Exp;  lines: +13 -0;


* lisp/tramp.el (tramp-handle-set-visited-file-modtime): If `time-list'
is not nil, don't apply the whole body.  If the file doesn't
exists, set modtime to '(-1 65535).
(tramp-handle-verify-visited-file-modtime): Check whether a file
is visiting the buffer, or the buffer has no recorded last
modification time.  Return t in case the visiting file doesn't
exists.
(tramp-handle-write-region): `set-visited-file-modtime' must be
called always when `visit' is t or a string.
All changes suggested by Luc Teirlinck <teirllm@auburn.edu>.
----------------------------
revision 2.407
date: 2004-07-22 13:26:28 -0700;  author: albinus;  state: Exp;  lines: +7 -0;


* lisp/tramp.el (tramp-handle-write-region): `set-visited-file-modtime'
must be called always if `visit' is non-nil. Emacs Lisp
documentation is not clear in this point, `write-region'
implementation clarifies.
----------------------------
revision 2.406
date: 2004-07-17 08:36:53 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-verify-visited-file-modtime): Remove
outdated comment.
----------------------------
revision 2.405
date: 2004-07-17 08:25:12 -0700;  author: kai;  state: Exp;  lines: +6 -0;
2004-07-14  Luc Teirlinck  <teirllm@auburn.edu>

	* tramp.el (tramp-handle-verify-visited-file-modtime):
	`visited-file-modtime' now returns a list of two integers, instead
	of a cons.
----------------------------
revision 2.404
date: 2004-07-04 04:43:22 -0700;  author: albinus;  state: Exp;  lines: +8 -0;


* lisp/tramp.el (tramp-open-connection-rsh): If a port is given, the
Tramp buffer name must still contain the port number.  Otherwise,
we have two Tramp buffers, with all the confusion.  Reported by
Myron Selby <myron@xytech.com> and Rolf Dubitzky
<Dubitzky@physi.uni-heidelberg.de>.
----------------------------
revision 2.403
date: 2004-06-26 07:58:23 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-file-remote-p): New implementation to
agree with new return value of `file-remote-p'.
----------------------------
revision 2.402
date: 2004-06-13 08:37:08 -0700;  author: albinus;  state: Exp;  lines: +3 -0;


* lisp/tramp.el (tramp-handle-write-region): Set current buffer.
If connection wasn't open, `file-modes' has changed it accidently.
Reported by David Kastrup <dak@gnu.org>.
----------------------------
revision 2.401
date: 2004-06-13 08:08:50 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-handle-find-backup-file-name): `copy-tree' is
available since Emacs 21.4 only (XEmacs has it).  Implementation
rewritten in order to avoid this function.
----------------------------
revision 2.400
date: 2004-06-08 15:45:59 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* tramp.el (tramp-sh-file-name-handler): Leaving this function,
`tramp-locked' must be reset to the same value as during entering.
----------------------------
revision 2.399
date: 2004-06-06 03:07:52 -0700;  author: albinus;  state: Exp;  lines: +9 -0;


* tramp.el (tramp-enter-password, tramp-read-passwd): New
arguments USER and HOST.
(tramp-action-password, tramp-multi-action-password): Apply it.

* tramp-smb.el (tramp-smb-open-connection): Apply USER and HOST to
`tramp-enter-passwd'.
----------------------------
revision 2.398
date: 2004-06-03 14:21:49 -0700;  author: albinus;  state: Exp;  lines: +8 -0;


* configure.ac (FTP_UPLOAD): New variable, indicating which ftp
upload program to savannah has to be used.  Kai and Michael differ
in their preferences ...

* Makefile.in (FTP_UPLOAD): New variable.  Value depending on
@FTP_UPLOAD@.
(savannah): Use it.

* lisp/tramp.el (all): Code cleanup.  Change all `tramp-handle-xxx'
calls to respective `xxx` calls.

* lisp/tramp-vc.el (all): Code cleanup.  Change all `tramp-handle-xxx'
calls to respective `xxx` calls.
----------------------------
revision 2.397
date: 2004-06-01 13:36:18 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* .cvsignore: Add *.diff.

* configure.ac (TRAMP_CLEAN_FILES): Add *.diff.

* lisp/tramp.el (tramp-process-alive-regexp): Precise doc string.
(tramp-multi-action-process-alive): New defun.
(tramp-multi-actions): Use it.
----------------------------
revision 2.396
date: 2004-05-30 14:25:05 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(tramp-handle-file-local-copy-hook): New hook.
(tramp-handle-file-local-copy): Run it.
(tramp-handle-write-region-hook): New hook.
(tramp-handle-write-region): Run it.
----------------------------
revision 2.395
date: 2004-05-30 13:46:08 -0700;  author: kai;  state: Exp;  lines: +3 -2;
Add acknowledgement.
----------------------------
revision 2.394
date: 2004-05-30 13:44:34 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-let-maybe): Move to an earlier spot in the file.  Reverse
args of `get'.
----------------------------
revision 2.393
date: 2004-05-30 03:40:49 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-locked, tramp-locker): New variables for
implementing a global lock.
(tramp-sh-file-name-handler): Use them to implement the global
lock.
----------------------------
revision 2.392
date: 2004-05-29 13:52:55 -0700;  author: albinus;  state: Exp;  lines: +11 -0;


* Makefile.in (.SILENT, .PHONY): Add lisp target.
(info): Depends on $(CONFIG_FILES).

* lisp/tramp.el (tramp-file-name-handler-alist)
(tramp-file-name-for-operation): Add entry for `file-remote-p'.
(tramp-handle-file-remote-p): New defun.
(top): Remove setting of `file-remote-p'.  Don't set
`inhibit-file-name-handlers' and `inhibit-file-name-operation'.

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`file-remote-p'.
----------------------------
revision 2.391
date: 2004-05-28 08:29:12 -0700;  author: kai;  state: Exp;  lines: +14 -0;
* tramp-smb.el (tramp-smb-open-connection): Use
tramp-set-process-query-on-exit-flag compat function.

* tramp.el (tramp-set-process-query-on-exit-flag): New compat function.
(tramp-open-connection-multi, tramp-open-connection-su)
(tramp-open-connection-rsh, tramp-open-connection-telnet)
(tramp-do-copy-or-rename-file-out-of-band): Use it.
(tramp-let-maybe): New macro, let-binds a variable only if it
isn't obsolete.
(tramp-check-ls-commands, tramp-handle-expand-file-name)
(tramp-handle-file-truename): Use it.
----------------------------
revision 2.390
date: 2004-05-23 12:27:28 -0700;  author: albinus;  state: Exp;  lines: +7 -0;


* lisp/tramp.el (top): Add `tramp-completion-file-name-handler' to
`inhibit-file-name-handlers', and `file-local-copy' to
`inhibit-file-name-operation'.  Needed for proper working of
`file-remote-p'.
----------------------------
revision 2.389
date: 2004-05-20 00:36:12 -0700;  author: albinus;  state: Exp;  lines: +12 -0;


* lisp/tramp.el (tramp-out-of-band-prompt-regexp): Renamed to
`tramp-process-alive-regexp', because its usage is widen.
(tramp-actions-copy-out-of-band): Apply it.
(tramp-actions-before-shell, tramp-multi-actions): Add
`tramp-action-process-alive' action.
(tramp-action-process-alive): New defun.
(tramp-process-one-action, tramp-process-one-multi-action): Remove
check for process status.  Will be performed by the respective
action now.  Reported by Ted Stern <stern+tramp-devel@cray.com>.
----------------------------
revision 2.388
date: 2004-05-17 13:34:57 -0700;  author: albinus;  state: Exp;  lines: +3 -2;
*** empty log message ***
----------------------------
revision 2.387
date: 2004-05-16 14:09:01 -0700;  author: albinus;  state: Exp;  lines: +7 -0;


* tramp-uu.el (tramp-uuencode-region): Padding characters aren't
counted for (last) line.

* Makefile.in (TODO): New item, inspired by Kais change.
----------------------------
revision 2.386
date: 2004-05-16 04:44:55 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-completion-file-name-regexp-unified): Avoid
matching filenames starting with "/:" -- those are reserved for
file-name-non-special.
----------------------------
revision 2.385
date: 2004-05-13 13:31:23 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-process-one-action)
(tramp-process-one-multi-action, tramp-wait-for-regexp)
(tramp-wait-for-output): Throw away if process has died. Reported
by Luc Teirlinck <teirllm@dms.auburn.edu>.
----------------------------
revision 2.384
date: 2004-05-12 00:32:39 -0700;  author: kai;  state: Exp;  lines: +4 -2;
Change wording.
----------------------------
revision 2.383
date: 2004-05-12 00:25:42 -0700;  author: kai;  state: Exp;  lines: +8 -0;
(tramp-initial-commands): Add "unset HISTORY"; this is
not really necessary but seems to keep the shell history smaller
in some cases.  Suggested by Luc Teirlinck.
(tramp-open-connection-setup-interactive-shell): Export variables
HISTFILE and HISTSIZE, do not just set them.  From Luc Teirlinck.
----------------------------
revision 2.382
date: 2004-05-02 09:38:39 -0700;  author: kai;  state: Exp;  lines: +4 -0;
branches:  2.382.2;
* aclocal.m4 (AC_CONTRIB_FILES): Load the library in question
before invoking fboundp on the function searched.

* configure.ac: Bump version.
----------------------------
revision 2.381
date: 2004-05-01 13:04:22 -0700;  author: albinus;  state: Exp;  lines: +38 -0;


Suppress byte-compiler warnings were possible.

* lisp/tramp.el (toplevel): Call of `byte-compiler-options' pacified.
`directory-sep-char' set to not obsolete (we need it for XEmacs).
Define `last-coding-system-used' in XEmacs case.  Pacify
declarations of `backup-directory-alist',
`bkup-backup-directory-info' and
`tramp-save-PC-expand-many-files'.
(tramp-feature-write-region-fix): Pacify funcall of
`find-operation-coding-system'.
(tramp-line-end-position): Pacify funcall of `line-end-position'
and `point-at-eol'.
(tramp-handle-dired-compress-file): Pacify funcall of
`dired-remove-file'.
(tramp-handle-find-backup-file-name): Pacify access to
`tramp-backup-directory-alist' and
`tramp-bkup-backup-directory-info'.
(tramp-touch): `error' needs just one parameter if there is no
string substitution.
(tramp-bug): `tramp-backup-directory-alist',
`tramp-bkup-backup-directory-info', `backup-directory-alist' and
`bkup-backup-directory-info' must be quoted as symbols.

* lisp/tramp-efs.el (toplevel): Suppress byte-compiler warnings.

* lisp/tramp-smb.el (toplevel): Suppress byte-compiler warnings.
Define `last-coding-system-used' in XEmacs case.

* lisp/tramp-vc.el (toplevel): Suppress byte-compiler warnings.
(tramp-vc-do-command-new): Pacify funcall of `vc-setup-buffer' and
`vc-exec-after'.
(tramp-vc-workfile-unchanged-p): Pacify funcall of
`vc-default-workfile-unchanged-p'.
(tramp-handle-vc-user-login-name): Pacify funcall of
`subr-arity'. `let' must be `let*' because of `file'.
----------------------------
revision 2.380
date: 2004-04-29 01:39:23 -0700;  author: kai;  state: Exp;  lines: +5 -2;
(tramp-bug): Add backup-directory-alist and
bkup-backup-directory-info to bug reports, with Tramp
counterparts.
----------------------------
revision 2.379
date: 2004-04-29 01:35:23 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-read-passwd): Construct the key for the
password cache in a way that works for multi methods, too.
----------------------------
revision 2.378
date: 2004-04-25 08:41:10 -0700;  author: albinus;  state: Exp;  lines: +12 -0;


* lisp/tramp.el (tramp-backup-directory-alist)
(tramp-bkup-backup-directory-info): New defcustoms.
(tramp-file-name-handler-alist): Add entry for
`find-backup-file-name'.
(tramp-handle-find-backup-file-name): New function.  Implements
Tramp's find-backup-file-name.

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`find-backup-file-name'.

* texi/tramp.el (Auto-save and Backup): Explain exploitation of new
variables `tramp-backup-directory-alist' and
`tramp-bkup-backup-directory-info'.
----------------------------
revision 2.377
date: 2004-04-09 12:05:01 -0700;  author: albinus;  state: Exp;  lines: +8 -0;


* lisp/tramp.el (tramp-do-copy-or-rename-file-via-buffer): Set
permissions of the new file.
(tramp-handle-file-local-copy, tramp-handle-write-region): The
permissions of the temporary file are set if filename exists.
Reported by Ted Stern <stern@cray.com>.
----------------------------
revision 2.376
date: 2004-04-07 00:12:30 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-open-connection-setup-interactive-shell):
Revert weird EOL setting for first stty command (change from
2004-03-30).
----------------------------
revision 2.375
date: 2004-04-02 00:38:34 -0800;  author: albinus;  state: Exp;  lines: +6 -0;


* lisp/tramp.el (tramp-handle-insert-directory): Properly quote file
name also if not full-directory-p.  Handle wildcard case.
Reported by Andreas Schwab <schwab@suse.de>.
----------------------------
revision 2.374
date: 2004-03-30 07:37:22 -0800;  author: kai;  state: Exp;  lines: +8 -0;
(tramp-open-connection-setup-interactive-shell):
First stty command needs weird EOL setting -- it is for setting
EOL setting...  Due to the weird EOL, we might receive garbage
from the remote end which b0rks the next command.  So we add a
placeholder command for this.
----------------------------
revision 2.373
date: 2004-03-28 07:25:05 -0800;  author: kai;  state: Exp;  lines: +4 -0;
(tramp-process-initial-commands): Avoid liveness check
on shell -- we know that it must be alive since we're opening a
connection at this moment.
(tramp-last-cmd): New internal variable.
(tramp-process-echoes): New tunable.
(tramp-send-command): Set tramp-last-cmd.
(tramp-wait-for-output): Delete echo, if applicable.
----------------------------
revision 2.372
date: 2004-03-28 07:06:57 -0800;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-process-initial-commands): Avoid liveness check
on shell -- we know that it must be alive since we're opening a
connection at this moment.
----------------------------
revision 2.371
date: 2004-03-21 12:55:48 -0800;  author: albinus;  state: Exp;  lines: +1 -0;


* lisp/tramp.el (TODO): Remove items done.

* texi/tramp.texi (Auto-save and Backup): Make file name example
(X)Emacs neutral. In case of XEmacs, `bkup-backup-directory-info'
and `auto-save-directory' must be used.
----------------------------
revision 2.370
date: 2004-03-21 12:11:21 -0800;  author: albinus;  state: Exp;  lines: +4 -0;


* lisp/tramp.el (tramp-touch): FILE can be a local file, too.
----------------------------
revision 2.369
date: 2004-03-14 12:59:18 -0800;  author: albinus;  state: Exp;  lines: +8 -0;


* INSTALL: Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.

* Makefile.in: Don't check for $(USE_CONTRIB) any longer.
(xemacs): Use ""$(MAKE)" instead of "make".
(emacs): Use "--with-emacs" configure option.
(savannah): Use "ftp-upload" instead of "scp".  Hope it works for
Kai.

* aclocal.m4 (AC_EMACS_LISP): Use "-vanilla" in case of XEmacs.
(AC_CONTRIB_FILES): New function.  Checks for the need of
provisioning of a contributed package.

* configure.ac: Apply `AC_CONTRIB_FILES' for all Lisp files of
contrib directory.

* contrib/README: Clarify run-at-time.el.

* lisp/Makefile.in: New environment variables $(CONTRIB_FILES) and
$(INSTALL_FILES).  Don't check for $(USE_CONTRIB) any longer.
(all): Depends on $(CONTRIB_FILES), too.
(install): Copy $(INSTALL_FILES) but $?.
(distclean): Remove also $(CONTRIB_FILES).

* texi/Makefile.in (savannah): Simplify copy command.

* texi/trampinst.texi (Installation, Installation parameters)
(Load paths): Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.
----------------------------
revision 2.368
date: 2004-03-13 10:56:01 -0800;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-do-copy-or-rename-file-via-buffer): Renamed
from tramp-do-copy-or-rename-via-buffer (without `file'), to make
it consistent with the other tramp-do-* functions.
(tramp-do-copy-or-rename-file): Calls adjusted.
----------------------------
revision 2.367
date: 2004-03-07 22:11:15 -0800;  author: albinus;  state: Exp;  lines: +16 -0;


* lisp/tramp.el (tramp-out-of-band-prompt-regexp)
(tramp-actions-copy-out-of-band): New defcustoms.
(tramp-do-copy-or-rename-file-out-of-band): Asynchronous process
used instead of a synchronous one.  Allows password entering.
(tramp-action-out-of-band): New defun.
(tramp-open-connection-rsh, tramp-method-out-of-band-p): Remove
restriction with password from doc string.
(tramp-bug): Add variables `tramp-terminal-prompt-regexp',
`tramp-out-of-band-prompt-regexp',
`tramp-actions-copy-out-of-band', `password-cache' and
`password-cache-expiry'.
(toplevel): Remove todo item wrt ssh-agent.  Obsolete due to
password caching.

* texi/tramp.texi (Overview, Connection types)
(External transfer methods, Default Method)
(Windows setup hints): Remove restriction of password entering
with external methods.
----------------------------
revision 2.366
date: 2004-03-05 12:47:49 -0800;  author: albinus;  state: Exp;  lines: +8 -0;


* configure.ac: Write "${MAKE}" if appropriate (but "make").

* Makefile.in: (.PHONY): Remove unused targets.
(distclean): Remove also *.tar.gz*
(tar): Call gpg.

* lisp/Makefile.in (.PHONY): Remove unused targets.
(install): Depends on "all".

* lisp/tramp-vc.el (tramp-vc-workfile-unchanged-p): Correct typo
("file" -> "filename").  Reported by Kim F. Storm <storm@cua.dk>.

* texi/Makefile.in (SINFO): Removed.
(.PHONY): New Target.
----------------------------
revision 2.365
date: 2004-03-01 23:24:45 -0800;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-completion-mode, tramp-md5-function): Use
symbol-function to invoke functions only known on some Emacs
flavors.  This avoids byte-compiler warnings.  Reported by Kevin
Scaldeferri <kevin@scaldeferri.com>.
----------------------------
revision 2.364
date: 2004-02-29 10:06:49 -0800;  author: kai;  state: Exp;  lines: +2 -0;
* Makefile.in (dist, install-html): Remove unused targets.

* Makefile.in (install-ftp, site-lisp): Remove unused targets.

* Makefile.in (site-info, install-html): Remove unused targets.
----------------------------
revision 2.363
date: 2004-02-29 05:37:34 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.39 released.
----------------------------
revision 2.362
date: 2004-02-29 05:29:07 -0800;  author: albinus;  state: Exp;  lines: +14 -0;


* lisp/tramp.el (top-level): Require password.el if visible.  Should be
mandatory once No Gnus has found its way into (X)Emacs.
(tramp-read-passwd): Invoke `password-read' if available,
`read-passwd' otherwise. `ange-ftp-read-passwd' isn't used as
fallback any longer.
(tramp-clear-passwd): New function.
(tramp-process-actions, tramp-process-multi-actions): Clear
password cache if login has failed.

* lisp/tramp-smb.el (tramp-smb-open-connection): Clear password cache
if login has failed.

* texi/tramp.texi (all): Use "@value{emacs-name}" everywhere where it
is intended (some accidents of last fix corrected).
(Password caching): New node.
(External transfer methods): Refer to password caching for "smb"
method.

* contrib/password.el: New file.  Taken from No Gnus.
----------------------------
revision 2.361
date: 2004-02-23 01:40:43 -0800;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-write-region): Say which function is used
when encoding.
----------------------------
revision 2.360
date: 2004-02-15 15:27:25 -0800;  author: albinus;  state: Exp;  lines: +9 -2;


* lisp/tramp.el (tramp-async-proc): New variable.
(tramp-handle-shell-command): Adding asynchronous processes.  They
are far from being perfect, but it works at least for
`find-grep-dired' and `find-name-dired' in Emacs 21.4.
----------------------------
revision 2.359
date: 2004-02-09 13:26:55 -0800;  author: albinus;  state: Exp;  lines: +8 -0;


* lisp/tramp.el (tramp-handle-dired-compress-file): Added XEmacs
implementation.
(tramp-handle-dired-compress-file-for-emacs)
(tramp-handle-dired-compress-file-for-xemacs): Not needed
anymore.  Implementation not so different as expected.
----------------------------
revision 2.358
date: 2004-02-08 13:17:20 -0800;  author: albinus;  state: Exp;  lines: +9 -0;


* lisp/tramp.el (tramp-file-name-handler-alist): Add
`dired-compress-file' entry.
(tramp-handle-dired-compress-file)
(tramp-handle-dired-compress-file-for-emacs)
(tramp-handle-dired-compress-file-for-xemacs): New functions.
`tramp-handle-dired-compress-file-for-xemacs' not implemented yet.
----------------------------
revision 2.357
date: 2004-01-24 12:17:28 -0800;  author: albinus;  state: Exp;  lines: +8 -0;


* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Unset
`ange-ftp-ftp-name-arg' and `ange-ftp-ftp-name-res'.  There could
be incorrect values from previous calls in case the "ftp" method
is used in the Tramp file name.  Reported by Katsumi Yamaoka
<yamaoka@jpl.org>.
----------------------------
revision 2.356
date: 2004-01-22 14:56:46 -0800;  author: albinus;  state: Exp;  lines: +13 -0;


* lisp/tramp.el (tramp-completion-function-alist-ssh): Add
`tramp-parse-shostkeys' and `tramp-parse-sknownhosts'.
(tramp-completion-function-alist): It's a defvar now, because we
want to apply the optimized `tramp-set-completion-function'
instead of a static list.
(tramp-set-completion-function): Implementation tuned.  Avoid
double entries, and entries where the function or the
file/directory doesn' exist.
(tramp-parse-shostkeys, tramp-parse-sknownhosts): New functions
for SSH2.

* texi/tramp.texi (Customizing Completion): Explain new functions
`tramp-parse-shostkeys' and `tramp-parse-sknownhosts'.
----------------------------
revision 2.355
date: 2004-01-18 14:41:19 -0800;  author: albinus;  state: Exp;  lines: +17 -0;


* lisp/tramp.el (tramp-do-copy-or-rename-file): Handle out-of-band
methods.  Call `tramp-do-copy-or-rename-file-out-of-band' this
case.
(tramp-do-copy-or-rename-file-out-of-band): Renamed from
`tramp-do-copy-or-rename-file-one-local', because it handles also
the case both files use the same out-of-band method.
Implementation added.
(tramp-handle-file-local-copy, tramp-handle-write-region):
Out-of-band handling removed.  `copy-file' called instead, which
calls `tramp-do-copy-or-rename-file-out-of-band'.
(tramp-action-password): Check for out-of-band method removed.
This function is used for 'login-program.
(tramp-post-connection): Use `tramp-method-out-of-band-p' when
appropriate.
----------------------------
revision 2.354
date: 2004-01-18 11:28:32 -0800;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-do-copy-or-rename-via-buffer): Handle KEEP-DATE
arg, if possible.
(tramp-touch): Set last-modified time of a remote file.
----------------------------
revision 2.353
date: 2004-01-10 14:09:39 -0800;  author: albinus;  state: Exp;  lines: +6 -0;


* lisp/tramp-smb.el (tramp-smb-get-file-entries): In case of XEmacs,
apply a short sleep-for.  Otherwise it returns an empty list.
No idea what happens.
----------------------------
revision 2.352
date: 2004-01-08 09:06:39 -0800;  author: albinus;  state: Exp;  lines: +5 -0;


* lisp/tramp.el (tramp-buffer-name): Buffer name must contain the user
if exists.  Reported by Adrian Phillips <a.phillips@met.no>.
----------------------------
revision 2.351
date: 2004-01-06 13:48:50 -0800;  author: albinus;  state: Exp;  lines: +6 -0;


* lisp/tramp.el (tramp-completion-mode): Make test for XEmacs
explicitely.  `event-to-character' can exists in Emacs packages
too.  Reported by Matt Swift <swift@alum.mit.edu>.
----------------------------
revision 2.350
date: 2004-01-05 14:30:37 -0800;  author: albinus;  state: Exp;  lines: +5 -0;


* lisp/tramp-smb.el (tramp-smb-maybe-open-connection): Use
`tramp-process-connection-type'.

* texi/tramp.texi (Issues): Explain disabling "auto-autoloads.el*" for
unified filenames with XEmacs.
----------------------------
revision 2.349
date: 2004-01-03 08:47:47 -0800;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-process-connection-type): New variable.
(tramp-maybe-open-connection): Use it.
----------------------------
revision 2.348
date: 2004-01-03 07:18:25 -0800;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-handle-file-local-copy)
(tramp-handle-write-region, tramp-open-connection-rsh): Variable
name typo.  Small change.  From Patrick Tullmann
<tullmann@flux.utah.edu>.
----------------------------
revision 2.347
date: 2003-12-27 13:23:48 -0800;  author: uid67418;  state: Exp;  lines: +28 -0;


* lisp/tramp.el (tramp-completion-mode): Add XEmacs input
events. Until now it was not necessary, because they are
evaluated in case of unified filenames only.

* lisp/tramp-efs.el (top): Add all XEmacs download sites to
`tramp-default-method-alist'.  The existing settings should be
sufficient already, but it's better to make it explicitely.
(tramp-efs-method-given, tramp-efs-method-regexp): New variables.
(tramp-efs-path-regexp, tramp-efs-path-format-string)
(tramp-efs-path-format-without-user)
(tramp-efs-path-user-at-host-format)
(tramp-efs-path-host-format, tramp-efs-path-root-regexp): Changed
to a function.  Their values depend on the existence of the method
tag in filename.
(tramp-efs-file-name-handler): Check first whether the method tag
is given in a filename.
(tramp-efs-file-name-p): A syntax check must be performed first,
otherwise `tramp-dissect-file-name' returns with an error.

* lisp/tramp-ftp.el (Commentary): Removing pointer to EFS.  It has its
own module.

* lisp/tramp-smb.el (top): Setting default value in
`tramp-default-method-alist' corrected.  Order of USER and HOST
have been wrong.  Nobody claimed for months ...

* texi/tramp.texi (Issues): Describe how to use unified filenames with
XEmacs.
----------------------------
revision 2.346
date: 2003-12-25 08:18:29 -0800;  author: uid67418;  state: Exp;  lines: +40 -0;


	* lisp/tramp.el (tramp-completion-mode) Don't check for 'xemacs
but
	`tramp-unified-filenames'.

	* lisp/tramp-smb.el (tramp-smb-errors): Add
NT_STATUS_WRONG_PASSWORD"
	and "NT_STATUS_NETWORK_ACCESS_DENIED".
	(tramp-smb-maybe-open-connection): Set `process-connection-type'
	to 'pty.  Suggested by Piet van Oostrum <piet@cs.uu.nl>.

	* lisp/tramp-smb.el (tramp-smb-process-running): Removed.  Since
we
	acknowledge the virtual prompt for shares, there's no need for
	distinction of reading shares (process ends afterwards) and
	interactive mode of smblient.
	(tramp-smb-open-connection): Setting process sentinel removed.
	(tramp-smb-wait-for-output): Algorithm simplified, again.  Hope
it
	is more robust, too.

	* lisp/tramp-smb.el (tramp-smb-prompt): Add virtual prompt from
	listing shares, too.
	(tramp-smb-errors): Add "NT_STATUS_ACCOUNT_LOCKED_OUT".
	(tramp-smb-wait-for-output): Optimize algorithm getting pending
	output.  If it was received chunkwise, there have been problems.
	Remove the "prompt not found" error message; it is obvious.

	* lisp/tramp-smb.el (tramp-smb-handle-file-writable-p): Handle
the
case
	of non-existing filename, too.  Reported by Christoph Bauer
	<c_bauer@informatik.uni-kl.de>.
	(tramp-smb-get-file-entries): The directory in question should
	have permissions "drwxrwxrwx".  Just virtual, because we don't
	know the real permissions.  Don't we know?

	* lisp/tramp.texi (Obtaining TRAMP): Change Tramp CVS directory
to
	"-d:ext:anoncvs@savannah.nongnu.org:/cvsroot/tramp" as advised
on
	the Savannah page.
----------------------------
revision 2.345
date: 2003-11-30 09:52:16 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Release 2.0.38.
----------------------------
revision 2.344
date: 2003-11-30 09:48:03 -0800;  author: kai;  state: Exp;  lines: +9 -0;
* tramp-ftp.el, tramp-smb.el, tramp-util.el, tramp-uu.el:
* tramp-vc.el, tramp.el, trampver.el.in: Add arch tagline.
----------------------------
revision 2.343
date: 2003-11-25 13:57:49 -0800;  author: albinus;  state: Exp;  lines: +31 -0;

* lisp/tramp.el: Add new optional parameter ID-FORMAT to
`file-attributes'.  Calls of `file-attributes' won't use this
parameter for backward compatibility reasons.
(tramp-perl-file-attributes): Add a new parameter to Perl script
in order to handle uid/gid as strings, if desired.
(tramp-handle-file-truename, tramp-handle-file-symlink-p): Apply
`file-attributes' instead of `tramp-handle-file-attributes' in
order to make the function more general.
(tramp-handle-file-attributes): Replace proprietary optional
parameter NONNUMERIC by the recently (Emacs 21.4) introduced
ID-FORMAT.
(tramp-handle-file-attributes-with-perl): Handle parameter
NONNUMERIC if set. This wasn't done in the past.
(tramp-post-connection): Apply second parameter "$2" if
`tramp-remote-perl' is called.

* lisp/tramp-smb.el (tramp-smb-handle-delete-file): Correct cut'n'waste
error (`filename' instead of `directory').
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-attributes): Add recently (Emacs 21.4)
introduced parameter ID-FORMAT.
(tramp-smb-handle-make-directory-internal): Correct cut'n'waste
error (`directory' instead of `ldir').

* lisp/tramp-vc.el (tramp-handle-vc-user-login-name): Check if
`file-attributes' has a second parameter.  If yes, apply it with
value "'integer".  Otherwise, don't use that parameter (default
is integer format).
----------------------------
revision 2.342
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 2.341
date: 2003-08-09 07:12:00 -0700;  author: kai;  state: Exp;  lines: +18 -0;
(tramp-get-connection-function, tramp-get-remote-sh)
(tramp-get-login-program, tramp-get-login-args)
(tramp-get-copy-program, tramp-get-copy-args)
(tramp-get-copy-keep-date-arg, tramp-get-password-end-of-line):
Functions removed.  Use `tramp-get-method-parameter' instead.
(tramp-get-method-parameter): New function to retrieve a method
parameter.  This allows for omission of method parameters.
(tramp-handle-file-local-copy, tramp-handle-write-region)
(tramp-find-shell, tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-enter-password)
(tramp-open-connection-setup-interactive-shell)
(tramp-post-connection, tramp-maybe-open-connection)
(tramp-method-out-of-band-p): Use new function
`tramp-get-method-parameter'.
----------------------------
revision 2.340
date: 2003-08-08 09:15:11 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-multi-connection-function-alist): Add ssht
entry which adds "-e none -t -t" to the list of ssh args.
Suggested by Adrian Aichner.
----------------------------
revision 2.339
date: 2003-07-30 06:34:39 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-chunksize): Extend docstring.  Suggested by
Charles Curley <charlescurley@charlescurley.com>.
----------------------------
revision 2.338
date: 2003-07-26 12:46:54 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


	* configure.ac: Add "-s" option for make version check.  Kai's
	kludge not needed anymore.
	* lisp/Makefile.in (.PHONY): Add `xemacs'.
----------------------------
revision 2.337
date: 2003-07-26 05:42:40 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* Makefile.in (xemacs): Use new `xemacs' target in lisp subdir,
instead of copying *.el files manually.

* Makefile.in (xemacs): New target to copy files to XEmacs
working dir.  (For use by Kai only.)
----------------------------
revision 2.336
date: 2003-07-20 10:52:48 -0700;  author: kai;  state: Exp;  lines: +1 -0;
Version 2.0.36 released.
----------------------------
revision 2.335
date: 2003-07-20 06:19:01 -0700;  author: kai;  state: Exp;  lines: +13 -0;
(tramp-default-password-end-of-line): Renamed from
tramp-password-end-of-line.
(tramp-password-end-of-line): New method parameter.
(tramp-get-password-end-of-line): Function to access method
parameter `tramp-password-end-of-line', or variable
`tramp-default-password-end-of-line' (default value).
(tramp-methods): Add entries for new parameter
tramp-password-end-of-line.
(tramp-enter-password): Use new function
`tramp-get-password-end-of-line'.
----------------------------
revision 2.334
date: 2003-07-15 14:00:32 -0700;  author: albinus;  state: Exp;  lines: +7 -1;


* INSTALL: List required GNU software for installation.

* lisp/Makefile.in (LISP_FILES): tramp-ftp.el is conditional, too.
(install): Install only files belonging to the respective Emacs
flavour.
----------------------------
revision 2.333
date: 2003-07-14 14:38:14 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

* aclocal.m4 (AC_EMACS_INFO): Fix typo.

* configure.ac: Add a check for suitable make version.
Reported by Sven Utcke <utcke@informatik.uni-hamburg.de>.

* test.makefile: New file.  Used for checking proper "make"
version.

* lisp/Makefile.in (LISP_FILES): New variable.  Used to distinguish
collection of *.el files for Emacs and XEmacs.
Reported by Sven Utcke <utcke@informatik.uni-hamburg.de>.
(EM): Use `-vanilla' option for XEmacs call.
(all): depend on $(LISP_FILES).
----------------------------
revision 2.332
date: 2003-07-14 00:55:40 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(MKDIR): New variable.
(install): Create installation directory, if necessary.
----------------------------
revision 2.331
date: 2003-07-03 04:51:54 -0700;  author: kai;  state: Exp;  lines: +13 -0;
* tramp.el (tramp-handle-insert-file-contents): Do not
unconditionally inhibit the file operation file-local-copy, only
do that when the inhibit-file-name-operation is currently
insert-file-contents.  This fixes finding remote CVS-controlled
files.  (It would barf on inserting the CVS/Entries file
literally, because the file-local-copy handler wasn't called.)
(tramp-handle-shell-command): Support optional third arg
ERROR-BUFFER.

* tramp-vc.el (vc-workfile-unchanged-p): Add comment.
----------------------------
revision 2.330
date: 2003-06-30 00:31:45 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-sh-extra-args): Test whether widget type
`alist' is available (instead of testing (featurep 'xemacs)).
----------------------------
revision 2.329
date: 2003-06-27 08:23:14 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(tramp-sh-extra-args): Adapt defcustom type to XEmacs.
----------------------------
revision 2.328
date: 2003-06-24 12:23:09 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(tramp-open-connection-setup-interactive-shell): Erase buffer
before sending "stty -onlcr".  Maybe this leads to just one
prompt on a line.
----------------------------
revision 2.327
date: 2003-06-24 12:14:54 -0700;  author: kai;  state: Exp;  lines: +13 -0;
(tramp-initial-commands): New variable.
(tramp-process-initial-commands): New function, using the variable.
(tramp-open-connection-setup-interactive-shell): Call the new
function.
(tramp-buffer-name, tramp-debug-buffer-name): Always put the
method into the buffer name, never use nil.  Reported by Hanak
David <dhanak@inf.bme.hu>.
----------------------------
revision 2.326
date: 2003-06-17 02:25:25 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-shell-prompt-pattern): Allow space after escape
sequence.
----------------------------
revision 2.325
date: 2003-06-16 08:45:32 -0700;  author: kai;  state: Exp;  lines: +10 -0;
* tramp.el (tramp-shell-prompt-pattern): Allow multiple escape
sequences.

* tramp-uu.el:
* tramp-util.el:
* tramp-efs.el: Use iso-2022-7bit encoding with coding cookie for
XEmacs compatibility.
----------------------------
revision 2.324
date: 2003-06-12 03:32:33 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(tramp-handle-file-local-copy)
(tramp-do-copy-or-rename-via-buffer): Use binary coding system,
instead of no-conversion.  They are the same on Emacs but
different on XEmacs.
----------------------------
revision 2.323
date: 2003-06-12 03:30:05 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-copy-file): Set file modes of target
file.
----------------------------
revision 2.322
date: 2003-06-09 08:17:00 -0700;  author: kai;  state: Exp;  lines: +6 -4;
(tramp-handle-file-local-copy, tramp-handle-write-region): Add the
"-p" hack.
----------------------------
revision 2.321
date: 2003-06-08 06:58:13 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-foreign-file-name-handler-alist): Add comment about
default value having to come last.
----------------------------
revision 2.320
date: 2003-06-08 05:20:57 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-handle-insert-file-contents): When calling
`file-local-copy', let-bind `inhibit-file-name-operation'
accordingly.  This makes sure that jka-compr is not called when
`insert-file-contents-literally' is invoked.  From Katsumi Yamaoka
<yamaoka@jpl.org>.
(tramp-do-copy-or-rename-via-buffer): Avoid calling jka-compr
when writing the target file.
----------------------------
revision 2.319
date: 2003-06-08 04:53:07 -0700;  author: kai;  state: Exp;  lines: +13 -0;
(tramp-time-diff): Convert return value of subtract-time to a
number of seconds in a correct manner, by applying float-time or
time-to-seconds.  Also correct compat code accordingly.  The
XEmacs branch for itimer-time-difference didn't need correction,
it returned a float already.  Reported by David D. Smith
<ultrasoul@ultrasoul.com>.
----------------------------
revision 2.318
date: 2003-06-08 04:29:09 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-find-foreign-file-name-handler): Return after
first match is found.  From Francis Litterio <franl@world.std.com>.
----------------------------
revision 2.317
date: 2003-05-31 13:25:39 -0700;  author: kai;  state: Exp;  lines: +13 -0;
Factor out the `regular' file name handling via a
remote shell of some sort into a specific function.  Intent is to
later put that part of Tramp into a special file, so that the
Tramp `core' is just a dispatcher that dispatches to various
handlers.
(tramp-sh-file-name-handler): New function.
(tramp-foreign-file-name-handler-alist): New default value.  Call
tramp-sh-file-name-handler as default case.
(tramp-file-name-handler): Do not invoke the old remote-shell
handler.
----------------------------
revision 2.316
date: 2003-05-24 15:41:01 -0700;  author: albinus;  state: Exp;  lines: +12 -0;

* Makefile.in (configure): It depends on "aclocal.m4", too.

* aclocal.m4, lisp/Makefile.in, contrib/Makefile.in: Use
`--no-site-file' option for Emacs call, in order to avoid loading of
Tramp in site specific init files.  Reported by Harry Putnam
<reader@newsguy.com>.

* lisp/Makefile.in (.PHONY): New target.
(all): "trampver.el" and "tramp.el" must be handled first due to
dependencies.

* lisp/tramp.el (tramp-completion-function-alist): Add completion
function for "remcp", "remsh" and "plink1".

* texi/tramp.texi (Inline methods): Add methods `remsh' and `plink1'.
(External transfer methods): Add method `remcp'.
(Multi-hop Methods): Add method `remsh'.
----------------------------
revision 2.315
date: 2003-05-24 09:10:39 -0700;  author: kai;  state: Exp;  lines: +4 -0;
* tramp.el (tramp-password-end-of-line): Use "xy" with plink.

* configure.ac: Bump version.

* Makefile.in (cvstag): "cvs tag", not "cvs cvstag".
----------------------------
revision 2.314
date: 2003-05-21 00:53:50 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-shell-prompt-pattern): Allow ANSI escapes at
end of prompt.  (ANSI escapes elsewhere in the prompt are
recognized properly already.)
----------------------------
revision 2.313
date: 2003-05-18 08:00:47 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-methods): New method plink1.  Like plink but
pass "-1" to force protocol version 1.
----------------------------
revision 2.312
date: 2003-05-18 03:25:09 -0700;  author: kai;  state: Exp;  lines: +10 -0;
Forgot to commit ChangeLog.
----------------------------
revision 2.311
date: 2003-05-03 13:42:21 -0700;  author: kai;  state: Exp;  lines: +10 -0;
(tramp-methods): Unify tramp-rsh-program,
tramp-telnet-program, tramp-su-program into tramp-login-program.
Likewise with tramp-login-args, tramp-copy-program,
tramp-copy-args, tramp-copy-keep-date-arg.
Users changed.
----------------------------
revision 2.310
date: 2003-05-03 13:14:11 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-methods): Old entries "rsh" and "rcp"
unconditionally invoke rsh now.  New entries "remsh" and "remcp"
unconditionally invoke remsh now.
(tramp-real-rsh-program): Remove.
----------------------------
revision 2.309
date: 2003-04-27 06:16:00 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-real-rsh-program): Explain strategy for choosing default value.
----------------------------
revision 2.308
date: 2003-04-25 14:24:18 -0700;  author: albinus;  state: Exp;  lines: +11 -0;

* tramp.el (tramp-real-rsh-program): "remsh" is used on Cray
machines, too.  Suggested by Ted Stern <stern+tramp-devel@cray.com>.
(tramp-methods, tramp-multi-connection-function-alist): The list
must be backquoted, because the value of `tramp-real-rsh-program'
is needed.  No trailing space needed in the password argument of
sudo `tramp-su-args'.  Reported by my friendly supervisor Kai
Großjohann <kai.grossjohann@gmx.net>.
----------------------------
revision 2.307
date: 2003-04-24 14:16:14 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

	* Makefile.in (.PHONY): Add `tags'.
	(distclean) Remove also "autom4te.cache".

	* lisp/tramp.el (tramp-real-rsh-program): New constant.  On
	HP-UX, the "rsh" program is called "remsh".
	(tramp-methods, tramp-multi-connection-function-alist): Apply
	`tramp-real-rsh-program'.  Use "-p Password:\ " for "sudo"
	method, because password prompt might be changed by either passprompt
	option in /etc/sudoers, or SUDO_PROMPT environment variable.
	Suggested by Peter Oliver <peter.oliver@aquila-networks.co.uk>.
----------------------------
revision 2.306
date: 2003-04-18 13:15:24 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-expand-file-name): Make default method
explicit in file name.
(tramp-unified-filenames): Move to an earlier spot in the file.
(top-level): If tramp-unified-filenames is set and we're running
on XEmacs, load tramp-efs.
(tramp-wait-for-shell-prompt, tramp-barf-if-no-shell-prompt): New
functions, used by tramp-send-command-internal.
(tramp-open-connection-setup-interactive-shell): Simplify using
`tramp-send-command-internal'.
(tramp-send-command-internal): New function.
----------------------------
revision 2.305
date: 2003-04-18 07:59:18 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* tramp-efs.el: New file.

* tramp.el (tramp-handle-expand-file-name): Make default method
explicit in file name.
(tramp-unified-filenames): Move to an earlier spot in the file.
(top-level): If tramp-unified-filenames is set and we're running
on XEmacs, load tramp-efs.
----------------------------
revision 2.304
date: 2003-04-18 05:57:27 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-expand-file-name): Make default method
explicit in file name.
----------------------------
revision 2.303
date: 2003-04-14 13:12:36 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* aclocal.m4 (AC_EMACS_INFO): Make "emacs" as default if $EMACS
isn't set.  Be more robust this case.

* tramp.el (tramp-handle-file-truename): `sym' shouldn't be quoted.
----------------------------
revision 2.302
date: 2003-04-08 13:48:33 -0700;  author: kai;  state: Exp;  lines: +10 -2;
(tramp-handle-file-symlink-p): If target of symlink is
absolute, return a Tramp filename.  (Ie, return
"/user@host:/target" instead of "/target".)
(tramp-handle-file-truename): Deal with new return value from
`file-symlink-p'.
----------------------------
revision 2.301
date: 2003-04-08 12:18:09 -0700;  author: kai;  state: Exp;  lines: +1 -0;
Bump version.
----------------------------
revision 2.300
date: 2003-04-08 12:11:11 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Bump version.
----------------------------
revision 2.299
date: 2003-04-06 01:53:44 -0800;  author: kai;  state: Exp;  lines: +4 -0;
2003-04-04  Andreas Schwab  <schwab@suse.de>

	* tramp.el (tramp-send-string): Handle empty string.
----------------------------
revision 2.298
date: 2003-04-04 13:43:58 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* tramp-ftp.el (tramp-ftp-file-name-handler):
'ange-ftp-file-directory-p` calls 'file-directory-p` as
well.  Disabling of file-name-handler not appropriate, too.
----------------------------
revision 2.297
date: 2003-04-02 02:31:02 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Change actual encoding of file to match coding cookie.
----------------------------
revision 2.296
date: 2003-04-01 19:36:45 -0800;  author: youngs;  state: Exp;  lines: +5 -0;
2003-04-02  Steve Youngs  <youngs@xemacs.org>

	* tramp.el: Change coding cookie to 'iso-2022-7bit' to get around
	a bug in non-Mule XEmacs 21.5.
----------------------------
revision 2.295
date: 2003-03-30 12:09:35 -0800;  author: kai;  state: Exp;  lines: +11 -0;
(xemacs, emacs): Copy trampver.texi, too.
----------------------------
revision 2.294
date: 2003-03-30 10:47:14 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* tramp-ftp.el (tramp-ftp-file-name-handler): In
'ange-ftp-file-exists-p`, 'file-exists-p` is called in case of
symlinks.  So we cannot disable the file-name-handler this case.
----------------------------
revision 2.293
date: 2003-03-28 09:29:40 -0800;  author: kai;  state: Exp;  lines: +5 -0;
*** empty log message ***
----------------------------
revision 2.292
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;  lines: +20 -0;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.291
date: 2003-03-06 14:10:18 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* tramp-smb.el (tramp-smb-read-file-entry): Make reading size of a
listing entry more robust.  Ranges from 10 chars (Samba 1) to 7-9
chars (Samba 2).
----------------------------
revision 2.290
date: 2003-03-02 06:45:00 -0800;  author: albinus;  state: Exp;  lines: +6 -1;

* tramp.el (tramp-chunksize): Type can be nil as well.  Reported
by Markus Rost <rost@math.ohio-state.edu>.
----------------------------
revision 2.289
date: 2003-02-28 10:12:29 -0800;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.texi: Bump version.

* tramp.el (tramp-version): Bump.
(tramp-handle-expand-file-name): Protect against short localnames
when comparing with "/../".

* Makefile (VERSION): Bump.
----------------------------
revision 2.288
date: 2003-02-27 09:15:13 -0800;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-expand-file-name): Allow ".." to cross
host boundaries.
----------------------------
revision 2.287
date: 2003-02-20 03:45:25 -0800;  author: kai;  state: Exp;  lines: +2 -2;
(tramp-open-connection-setup-interactive-shell): Unset
$ENV in addition to setting $PS1 when starting the Bourne-ish
shell.  Some sh implementations (eg, bash when called as sh) read
the file named there on startup, which could clobber $PS1.
----------------------------
revision 2.286
date: 2003-02-19 23:53:07 -0800;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-open-connection-setup-interactive-shell): Unset
$ENV in addition to setting $PS1 when starting the Bourne-ish
shell.  For some reason, it seems to help to ensure that the
prompt is really '$ '.
----------------------------
revision 2.285
date: 2003-02-15 16:18:43 -0800;  author: albinus;  state: Exp;  lines: +11 -0;


* tramp-smb.el: Replace term `path' with `localname' unless it is
used for a search path.  In GNU, the word `path' is reserved for
search paths.

* tramp.el (tramp-send-string, tramp-send-region): Removed.
(tramp-send-string): New function.  Takes over the role of the
functions above, in order to have a unique place handling
`tramp-chunksize'.  Same implementation as `tramp-send-region'.
----------------------------
revision 2.284
date: 2003-02-15 10:37:29 -0800;  author: kai;  state: Exp;  lines: +5 -1;
* tramp.texi: Replace word `path' with `localname' where used as
a component of a Tramp file name.  In GNU, the word `path' is
used only for search paths, ie lists of directories.

* tramp-vc.el, tramp.el: Replace term `path' with `localname'
unless it is used for a search path.  In GNU, the word `path' is
reserved for search paths.

* tramp.el (tramp-do-copy-or-rename-file-one-local): New
function.  Not implemented.  Not used.  Should invoke rcp or scp
directly to keep the time.
----------------------------
revision 2.283
date: 2003-02-15 10:12:54 -0800;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-do-copy-or-rename-file-one-local): New
function.  Not implemented.  Not used.  Should invoke rcp or scp
directly to keep the time.
----------------------------
revision 2.282
date: 2003-02-09 11:22:36 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* tramp.el (tramp-chunksize): It's now a defcustom.  Set to 500 on
systems only known to have a buggy `process-send-string'
implementation.  First black-listed constellation is GNU Emacs/
hpux.
(tramp-send-region): Correct debug message.
(tramp-bug): Add `tramp-chunksize'.
* tramp.texi (Frequently Asked Questions): `tramp-chunksize'
introduced.
----------------------------
revision 2.281
date: 2003-02-05 11:34:18 -0800;  author: kai;  state: Exp;  lines: +2 -0;
* tramp.texi (Installation): In Emacs, use M-x
texinfo-format-buffer RET, not M-x makeinfo-buffer RET.  Reported
by gebser@ameritech.net.

* tramp.el (tramp-send-region): Protect against tramp-chunksize
being nil.

* Makefile (VERSION): Bump.
----------------------------
revision 2.280
date: 2003-02-05 11:31:01 -0800;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-send-region): Protect against tramp-chunksize
being nil.
----------------------------
revision 2.279
date: 2003-02-04 14:37:29 -0800;  author: albinus;  state: Exp;  lines: +25 -2;


* tramp.el (tramp-handle-directory-file-name): Handle the case
PATH is "".
(tramp-completion-handle-file-name-all-completions): Define
`tramp-current-user' locally.  See `tramp-parse-passwd'.
(tramp-parse-passwd): For su-alike methods it would be desirable
to return "root@localhost" as default.  Unfortunately, we have no
information whether any user name has been typed already.  So we
(mis-)use tramp-current-user as indication, assuming it is set in
`tramp-completion-handle-file-name-all-completions'.
(tramp-send-region): Handle the case `tramp-chunksize' is equal
0.  I did it accidently.  Infinite loop ...

* tramp-ftp.el (top-level): eval-after-load "ange-ftp"
'(tramp-disable-ange-ftp).  Suggested by Kai.
(tramp-ftp-file-name-handler): `tramp-disable-ange-ftp' not needed
any longer.

* tramp-smb.el (tramp-smb-file-name-handler-alist): Apply
`tramp-handle-directory-file-name' in order to profit from Kai's
yesterday changes.
----------------------------
revision 2.278
date: 2003-02-03 12:16:47 -0800;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-chunksize): Set default to 500 as workaround
for some ssh connections.
(tramp-handle-directory-file-name): New implementation.  Not sure
if it works.
----------------------------
revision 2.277
date: 2003-01-28 12:50:37 -0800;  author: albinus;  state: Exp;  lines: +5 -0;


* tramp.el (tramp-get-device): `tramp-make-tramp-file-name' must
not be called with NIL path.  It fails in case of multi-method.
----------------------------
revision 2.276
date: 2003-01-27 12:28:40 -0800;  author: albinus;  state: Exp;  lines: +10 -0;


* tramp.el (tramp-file-name-for-operation): Apply
`expand-file-name' for relative file names only.  Otherwise there
might be problems if the default directory is another Tramp
directory as the directory the file is based on.
(tramp-find-foreign-file-name-handler): Check whether FILENAME is
a Tramp file name.  It isn't if it comes from an expanded file
name (like "/xx:yy//zz").
----------------------------
revision 2.275
date: 2003-01-25 14:32:25 -0800;  author: albinus;  state: Exp;  lines: +29 -0;


* tramp.el (tramp-devices): New variable.  Keeps virtual device
numbers.  Devices must distinguish physical file systems.  The
device numbers provided by "lstat" aren't unique, because we
operate on different hosts.  So we use virtual device numbers,
generated by `tramp-get-device'.  Both Ange-FTP and EFS use device
number -1.  In order to be different, we use device number (-1 x),
whereby "x" is unique for a given (multi-method method user
host).  Suggested by Kai.
(tramp-perl-file-attributes): Always return device number -1.
There will be a virtual device number set in
`tramp-handle-file-attributes', which replaces this one.
(tramp-handle-file-attributes): Set virtual device number.
(tramp-get-device): New function.  Returns the virtual device
number.  If it doesn't exist, generate a new one.
(tramp-handle-file-regular-p): Use Emacs file name primitives
instead of calling tramp-handle-* equivalents directly.  Needed
for tramp-smb.

* tramp-smb.el (tramp-smb-devices, tramp-smb-get-device): Removed.
Functionality moved to tramp.el.
(tramp-smb-handle-file-attributes): Apply
`tramp-get-device'. ATIME and CTIME are (0 0) now (= "don't
know"), which is more honest.
(tramp-smb-handle-make-directory): Use Emacs file name primitives
instead of calling tramp-smb-handle-* equivalents directly.
(tramp-smb-read-file-entry): Return size as a number but a string.
----------------------------
revision 2.274
date: 2003-01-24 12:29:24 -0800;  author: albinus;  state: Exp;  lines: +9 -0;


* tramp.el (tramp-completion-function-alist-ssh): Add parsing of
"/etc/ssh_config" and "~/.ssh/config".  Suggested by Kai.
(tramp-completion-function-alist, tramp-set-completion-function):
Doc string update.
(tramp-parse-sconfig, tramp-parse-sconfig-group): New functions.
Provide parsing of "~/.ssh/config" style files.

* tramp.texi (Customizing Completion): Add function
`tramp-parse-sconfig'.  Change example of
`tramp-set-completion-function', because parsing of ssh config
files looks more natural.
----------------------------
revision 2.273
date: 2003-01-21 12:50:58 -0800;  author: albinus;  state: Exp;  lines: +6 -0;


* tramp.el (tramp-completion-handle-expand-file-name): Apply
`tramp-drop-volume-letter'.  Otherwise, there are problems on W32
systems.
----------------------------
revision 2.272
date: 2003-01-20 15:22:04 -0800;  author: albinus;  state: Exp;  lines: +9 -0;


* tramp-smb.el (tramp-smb-get-device, tramp-smb-get-inode): New
functions.  Device number and inode number don't exist for SMB
files.  Therefore we must generate virtual ones.
(tramp-smb-devices, tramp-smb-inodes): New variables.  Keep
generated virtual device numbers and inodes numbers for SMB files.
(tramp-smb-handle-file-attributes): Apply them.
----------------------------
revision 2.271
date: 2003-01-14 00:14:43 -0800;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-md5-function): Require md5 before checking
function md5.  If using md5-encode, put wrapper around it that
converts vector of bytes to ascii text.
----------------------------
revision 2.270
date: 2003-01-13 13:23:18 -0800;  author: albinus;  state: Exp;  lines: +7 -1;


* tramp.el (tramp-completion-mode): Perform check (integerp
last-input-event) before (event-modifiers last-input-event) -
there might be problems if `last-input-event' is a mouse event.
----------------------------
revision 2.269
date: 2003-01-11 15:40:34 -0800;  author: albinus;  state: Exp;  lines: +7 -0;


* tramp-smb.el (tramp-parse-rhosts, tramp-parse-shosts)
(tramp-parse-hosts, tramp-parse-passwd, tramp-parse-netrc): Use
`file-readable-p' instead of `file-exists-p'.  Otherwise these
functions might block.  Reported by <kin@neoscale.com>.
----------------------------
revision 2.268
date: 2003-01-02 14:21:03 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* tramp-ftp.el (top-level): Defaults for
`tramp-default-method-alist' must be a list.

* tramp-smb.el (top-level): Defaults for
`tramp-default-method-alist' must be a list.
----------------------------
revision 2.267
date: 2003-01-02 02:59:25 -0800;  author: kai;  state: Exp;  lines: +9 -1;
* tramp.el (top-level): Avoid byte-compiler warnings of unused
variables if the byte-compiler supports this.  This is for the
with-parsed-tramp-file-name macro which is wont to produce such
stuff.

* Makefile (EMACS_EL_FILES): List of files for Emacs repository.
(emacs): New target.  Copy data into Emacs CVS repository.
(xemacs): Copy more files to XEmacs repository.
----------------------------
revision 2.266
date: 2002-12-23 06:03:44 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.28 released.
----------------------------
revision 2.265
date: 2002-12-22 14:28:30 -0800;  author: albinus;  state: Exp;  lines: +27 -5;

* tramp.el (top-level): Discard tramp-smb.el also for Cygwin.  No
"smbclient" available there.
(tramp-completion-dissect-file-name):
`tramp-completion-file-name-structure1',
`tramp-completion-file-name-structure2',
`tramp-completion-file-name-structure3' and
`tramp-completion-file-name-structure4' changed from "defconst" to
"let*", because they are function local (but nevertheless
constants).  Suggested by David Kastrup
<David.Kastrup@t-online.de> and Kai Großjohann
<kai.grossjohann@uni-duisburg.de>.  The value "9" has changed to
"nil" (meaning there's nothing to match), because Emacs 21.3 seems
to be more sensible on `match-string'.
(tramp-completion-dissect-file-name1): In case of a "nil" position
don't call `match-string'.

* tramp-smb.el (tramp-smb-file-name-handler-alist):
`add-name-to-file' is handled by `tramp-smb-handle-copy-file',
because there are no hardlinks under Windows.
----------------------------
revision 2.264
date: 2002-12-21 13:32:59 -0800;  author: albinus;  state: Exp;  lines: +16 -0;

* tramp.el (tramp-default-method-alist): Defaults setting for FTP
method has moved to tramp-smb.el. The remaining default for the SU
method is available for both Emacs and XEmacs now.

* tramp-ftp.el (top-level): Set defaults for
`tramp-default-method-alist'. Taken over from tramp.el.

* tramp-smb.el (top-level): Set default for
`tramp-default-method-alist'. If the user name contains a domain
(visible via the "%" char), it must be the SMB method.
(tramp-smb-wait-for-output): Use `tramp-smb-process-running' where
appropriate. Last time I've changed this function I forgot one
place.
----------------------------
revision 2.263
date: 2002-12-05 14:29:22 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.27 released.
----------------------------
revision 2.262
date: 2002-12-05 12:06:09 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* tramp-smb.el (tramp-smb-process-running) New buffer local
variable.  Flag whether a corresponding process is still running.
(tramp-smb-open-connection): Set a process sentinel.  It disables
`tramp-smb-process-running'.
(tramp-smb-wait-for-output): Use `tramp-smb-process-running' for
several checks.
----------------------------
revision 2.261
date: 2002-12-05 01:54:14 -0800;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-run-real-handler)
(tramp-completion-run-real-handler): Disable cygwin-mount, too.
All files handled by Tramp are on Unix systems, where
cygwin-mount is not useful.  (Ie, remote Cygwin systems are not
supported.)
----------------------------
revision 2.260
date: 2002-12-05 01:21:05 -0800;  author: kai;  state: Exp;  lines: +3 -1;
(tramp-vc-do-command): Ensure that `okstatus' is an
integer before using `<' on it.
(tramp-vc-do-command-new): Pass relative filename as arg to remote
process.  This helps with CVS.  Suggested by Francis Litterio.
----------------------------
revision 2.259
date: 2002-12-02 11:51:39 -0800;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-vc-do-command): Ensure that `okstatus' is an integer before
using `<' on it.
----------------------------
revision 2.258
date: 2002-11-30 14:33:33 -0800;  author: kai;  state: Exp;  lines: +11 -0;
* tramp.el (tramp-end-of-output): Do not use directory listing as
input to `md5' function.  The current time is deemed to be good
enough.

* tramp-vc.el (tramp-vc-do-command-new): `okstatus' can be async.
From Francis Litterio <franl@world.std.com>.
(tramp-vc-simple-command): Comment on potential `okstatus'
problem with it being `async'.  No code change.
----------------------------
revision 2.257
date: 2002-11-28 13:38:40 -0800;  author: kai;  state: Exp;  lines: +2 -0;
Adjust version numbers in files.
----------------------------
revision 2.256
date: 2002-11-28 13:35:11 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.26 released.
----------------------------
revision 2.255
date: 2002-11-28 13:03:34 -0800;  author: albinus;  state: Exp;  lines: +34 -1;


* tramp.el (top-level): Require tramp-smb.el only if local
Operating System is not MS Windows.  There's no need for the SMB
method there, because those Emacsen support UNC file names.
(tramp-handle-file-modes): Use Emacs file name primitives instead
of calling tramp-handle-* equivalents directly.  Needed for
tramp-smb.

* tramp-smb.el (tramp-smb-errors): List of error strings extended.
(tramp-smb-not-handled-yet): Function removed.  All I/O primitives
are handled now.  All places where used updated accordingly.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region, tramp-smb-open-connection): Error
handling improved.
(tramp-smb-handle-delete-directory)
(tramp-smb-handle-directory-files)
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-make-directory)
(tramp-smb-handle-make-directory-internal): New file name
primitive functions implemented.
(tramp-smb-handle-insert-directory): In case parameter is not a
directory, the result of "dir filename*" will return too many
results.  They are filtered out now.
(tramp-smb-send-command): Returns nil if there has been an error
message from smbclient.  Used for improved error handling
mentioned above.
(tramp-smb-wait-for-output): Timeouts removed.  Too much trouble
with.
(tramp-smb-time-less-p, tramp-smb-time-subtract): Handle the case
when T1 or T2 is nil.  It shouldn't happen ever, but it did once.

* tramp.texi (External transfer methods): Note added for `smb'
method that's not implemented for Emacsen running locally under MS
Windows.  UNC file names shall be used instead of.
----------------------------
revision 2.254
date: 2002-11-27 01:36:39 -0800;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-uu-b64-char-to-byte, tramp-uuencode-region):  Abstain from
`incf'.
----------------------------
revision 2.253
date: 2002-11-22 14:51:36 -0800;  author: albinus;  state: Exp;  lines: +8 -0;


* tramp-smb.el (tramp-smb-handle-substitute-in-file-name):
Removed.  The default handler is good enough for us now.
(tramp-smb-advice-PC-do-completion): Advice for
`PC-do-completion'.  Corrects a the inconvenient usage of
`substitute-in-file-name' there.

* tramp.texi (External transfer methods): Remind the application
of "$$" in share names of the `smb' method.
----------------------------
revision 2.252
date: 2002-11-21 14:04:25 -0800;  author: albinus;  state: Exp;  lines: +18 -0;

* tramp-smb.el (tramp-use-smb): Remove variable.  "smb" method is
active now; beta test can start.
(tramp-smb-handle-file-newer-than-file-p): Apply
`tramp-smb-time-less-p' but `tramp-time-diff'.  Seems to be more
general.
(tramp-smb-handle-insert-directory): Use SWITCHES in order to
decide how to sort (but obscure dired variables).  Don't apply
`save-excursion'; the cursor must be at the end of the buffer
after insertion.  I should have it done from the beginning ...
(tramp-smb-handle-write-region): Remove unused variable
`trampbuf'.  Thanx to XEmacs compiler warning.
(tramp-smb-read-file-entry): Simplify handling of the dont-know
mtime value.
(tramp-smb-maybe-open-connection): Remove unused variable
`last-cmd-time'.  Thanx to XEmacs compiler warning.

* tramp.texi (External transfer methods): Add description of `smb'
method.
----------------------------
revision 2.251
date: 2002-11-20 14:53:03 -0800;  author: albinus;  state: Exp;  lines: +19 -0;

* tramp-smb.el (top-level): Autoload of "time-date" removed.
Needed functions snarfed from there.
(tramp-smb-handle-insert-directory): Dummy user renamed to
"nobody".
(tramp-smb-read-file-entry): Return list shortened; just MTIME is
used for all time strings and calculations.
(tramp-smb-open-connection): Test of anonymous USER introduced.
Also an empty HOST is tested, but does it makes sense?
(tramp-smb-half-a-year): New constant, in order to decide whether
to display time or year in dired buffers.
(tramp-smb-parse-time-months ): Snarfed from "time-date".  Alist
mapping month names to integers.
(tramp-smb-time-less-p): Snarfed from "time-date".  Replaces
`time-less-p'.
(tramp-smb-time-subtract): Snarfed from "time-date".  Replaces
`tramp-time-diff', which returns just an integer only.
----------------------------
revision 2.250
date: 2002-11-19 08:57:39 -0800;  author: albinus;  state: Exp;  lines: +46 -0;

* tramp-smb.el (top-level): Autoload "time-date".  Just a
work-around, until I have replaced the corresponding functions by
own implementation.
(tramp-smb-errors): List of error strings extended.
(tramp-smb-share-cache): New buffer local variable.  Holds the
share names of the respective host.
(tramp-smb-file-name-handler-alist): `vc-registered' changed to be
not-handled.  If default handler is used, there are problems with
version control files of shares themselves ...
(tramp-smb-handle-copy-file): Error handling improved, check for
shares is performed.
(tramp-smb-handle-file-attributes)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-name-all-completions)
(tramp-smb-handle-file-writable-p)
(tramp-smb-handle-insert-directory): `tramp-smb-get-file-entries'
used instead of own scenario.
(tramp-smb-get-share): Replace nil in case the share name isn't
completed.
(tramp-smb-get-path): Handling for "$" and "$$" added.  But I
still have the feeling it isn't trustworthy yet.  Too complex.
(tramp-smb-get-file-entries): New function.  Replaces
`tramp-smb-get-file-entry'.
(tramp-smb-read-file-entry): Reads share names as well now.
(tramp-smb-send-command): Erases always buffer.
(tramp-smb-maybe-open-connection): Check for being alive is
removed. Instead of, `process-status' is applied. Erasing the
buffer is removed, because it disturbs exited processes if just
the share names should be retrieved.
(tramp-open-connection-smb): Renamed to
`tramp-smb-open-connection' for uniqueness. Acknowledges now
domains in user names ("USER%DOMAIN"), and port numbers in host
names ("HOST#PORT").  Erasing the buffer is removed, because it
disturbs exited processes if just the share names should be
retrieved.
(tramp-smb-wait-for-output): Handling for exited processes
incorporated.
(tramp-smb-check-shares): Removed. Functionality moved to
`tramp-smb-open-connection' and `tramp-smb-get-file-entries',
respectively.
----------------------------
revision 2.249
date: 2002-11-10 11:43:57 -0800;  author: albinus;  state: Exp;  lines: +32 -0;

* tramp.el (tramp-handle-file-name-completion): Use Emacs file
name primitives instead of calling tramp-handle-* equivalents
directly.  Needed for tramp-smb.

* tramp-smb.el (tramp-smb-errors): List of error strings extended.
(tramp-smb-not-handled, tramp-smb-not-handled-yet):
`tramp-smb-not-handled' renamed to `tramp-smb-not-handled-yet'.
The new `tramp-smb-not-handled' returns nil for als primitives
which don't make sense for SMB servers.  All callers adapted.
(tramp-smb-handle-copy-file)
(tramp-smb-handle-file-name-all-completions)
(tramp-smb-handle-file-newer-than-file-p)
(tramp-smb-handle-rename-file)
(tramp-smb-handle-substitute-in-file-name)
(tramp-smb-handle-write-region): New file name primitive functions
implemented.
(tramp-smb-handle-delete-file): In the `let' clause, `path' must
be declared but `share'.  Found during compilation.
(tramp-smb-handle-file-symlink-p)
(tramp-smb-handle-set-visited-file-modtime)
(tramp-smb-handle-verify-visited-file-modtime): Replaced by
`tramp-smb-not-handled'.
(tramp-smb-handle-insert-directory): Handling of copyied files
added.
(tramp-smb-maybe-open-connection): Are-you-alive command changed
from "help" to "dir .".
(tramp-smb-wait-for-output): In case of finished process return
immediately.
(tramp-smb-check-shares): New function.  Reads share names.
----------------------------
revision 2.248
date: 2002-11-05 14:32:43 -0800;  author: albinus;  state: Exp;  lines: +17 -0;

* tramp-smb.el (tramp-smb-errors): List of error strings extended.
(tramp-smb-share): New buffer local variable.  Holds the share
name associated with the buffer process.
(tramp-smb-handle-delete-file, tramp-smb-handle-file-attributes)
(tramp-smb-handle-set-visited-file-modtime)
(tramp-smb-handle-verify-visited-file-modtime):
New file name primitive functions implemented.  The latter two do
nothing (yet).
(tramp-smb-handle-file-local-copy): `save-excursion' added.  I'm
not fully sure if it's needed here, but it is better in case of.
(tramp-smb-handle-insert-directory): Mode string adapted.
(tramp-smb-read-file-entry): Block introduced for better return
handling.  Return list values changed.  Callers	adapted.
----------------------------
revision 2.247
date: 2002-11-04 14:37:00 -0800;  author: albinus;  state: Exp;  lines: +15 -1;

* tramp-smb.el (tramp-smb-line): Defconst deleted.  Useless due to
nature of smbclient output.  More sophisticated handling in
`tramp-smb-read-file-entry'.
(tramp-smb-errors): List of error strings extended.
(tramp-smb-get-path): Additional parameter CONVERT for conversion
of "/" path separator into "\\".
(tramp-smb-get-file-entry): Top directory handling included.
(tramp-smb-read-file-entry): Reimplemented.  No chance to handle
smbclient output lines by a single regexp.
(tramp-smb-send-command): Parameters of commands enclosed in
\"...\".
----------------------------
revision 2.246
date: 2002-11-03 14:34:54 -0800;  author: albinus;  state: Exp;  lines: +11 -2;

tramp.el (tramp-handle-insert-file-contents): Use Emacs file
name primitives instead of calling tramp-handle-* equivalents
directly.  Needed for tramp-smb.

tramp-smb.el: First usefull version.  Directory traversing and
file displaying work.
----------------------------
revision 2.245
date: 2002-11-03 06:25:48 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Fix previous change.
----------------------------
revision 2.244
date: 2002-11-02 10:15:29 -0800;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-md5-function): New variable.
(tramp-end-of-output): Use it.1
----------------------------
revision 2.243
date: 2002-10-27 13:35:08 -0800;  author: albinus;  state: Exp;  lines: +7 -0;


tramp-ftp.el (top-level): Require some basic packages in order
to pacify byte-compiler.

tramp-smb.el (top-level): Ditto.
----------------------------
revision 2.242
date: 2002-10-27 12:53:49 -0800;  author: albinus;  state: Exp;  lines: +24 -0;

* tramp.el (top-level): Load tramp-smb.el.  Remove autoload of
`tramp-ftp-file-name-p'; not needed anymore.
(tramp-foreign-file-name-handler-alist): New variable.  Foreign
methods shall plug in.
(tramp-file-name-for-operation): Relative file names are checked
via `expand-file-name'.  If no absolute file name is given,
default directory of current-buffer is used.
(tramp-find-foreign-file-name-handler): New function.  Parses
`tramp-foreign-file-name-handler-alist' in order to find foreign
file name handlers.
(tramp-file-name-handler): Apply
`tramp-find-foreign-file-name-handler' instead of simply looking
for FTP foreign method.

* tramp-ftp.el (top-level): Plug into
`tramp-foreign-file-name-handler-alist'.

* tramp-smb.el: New file.  Functionality disabled by
`tramp-use-smb' during development.

* Makefile (tramp): Add tramp-smb.elc.
----------------------------
revision 2.241
date: 2002-10-22 14:04:48 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

(tramp-file-name-for-operation): Even more file
primitives.  Sort them alphabetically.
----------------------------
revision 2.240
date: 2002-10-22 03:50:36 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-action-yn): Erase the buffer when the user has
said yes, don't erase it when they said no.
----------------------------
revision 2.239
date: 2002-10-20 13:32:58 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

(tramp-file-name-for-operation): Complete file
primitives.  Lots of undocumented found.
----------------------------
revision 2.238
date: 2002-10-19 07:14:25 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-sh-extra-args): Use "-norc -noprofile" instead
of "--norc" for bash.  The single dash is for old versions, and
the additional option might help more.  Suggested by Tim Connors
<tconnors@astro.swin.edu.au>.
----------------------------
revision 2.237
date: 2002-10-15 02:09:58 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-end-of-output): Emulate
directory-files-and-attributes if it does not exist.  (It does
not exist on XEmacs.)
----------------------------
revision 2.236
date: 2002-10-14 13:39:22 -0700;  author: albinus;  state: Exp;  lines: +14 -4;

	* tramp.el (tramp-dissect-file-name): Check for multi-method
	syntax before raising an error.
	(tramp-primitive-file-name): Renamed to
	`tramp-file-name-for-operation'.  Docstring enhanced.  List of
	file primitives completed in order to be signalled when a new one
	appears.  All changes suggested by Kai.
	(tramp-file-name-handler): `save-match-data' global.
----------------------------
revision 2.235
date: 2002-10-14 08:03:33 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-end-of-output): Use a random value which
includes "///".  The "///" makes sure that the string can't occur
during normal operation, the random value makes it unlikely that
it occurs in random shell-command output.
----------------------------
revision 2.234
date: 2002-10-13 13:27:29 -0700;  author: albinus;  state: Exp;  lines: +56 -0;

2002-10-13  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-advice-find-file-name-handler): Remove defadvice
	because it might be not a good idea to hook into Emacs built-in
	subroutiones. Suggested by RMS.
	(tramp-primitive-file-name): Handle all primitives now.
	(tramp-file-name-handler): Allow call of
	`tramp-ftp-file-name-handler' for functions only defined in
	`tramp-file-name-handler-alist'.  Strange.

2002-10-12  Michael Albinus  <Michael.Albinus@alcatel.de>

	* Makefile (tramp): Add tramp-uu.elc and tramp-ftp.elc.

	* tramp.el (main): Require `tramp-ftp' after load in order to
	avoid infloop. Autoload `tramp-ftp-file-name-p' for compiler
	satisfaction.
	(tramp-primitive-file-name): Add handling of `expand-file-name'
	and `file-newer-than-file-p'.
	(tramp-file-name-handler): Call `tramp-primitive-file-name' via
	`apply'.

	* tramp-ftp.el (main): Require `tramp'.


2002-10-11  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp-ftp.el: New file.

	* tramp.el (tramp-default-method): Adapt doc string.
	(tramp-ftp-method, tramp-completion-function-alist-ftp)
	(tramp-disable-ange-ftp, tramp-invoke-ange-ftp)
	(tramp-ange-ftp-file-name-p, tramp-make-ange-ftp-file-name): Moved
	to tramp-ftp.el or removed (if not needed any longer).  Callees
	adapted.
	(tramp-completion-function-alist): "ftp" entry removed.  Will be
	added from within tramp-ftp.el.
	(tramp-set-completion-function ): Allow setting of methods not
	defined yet.
	(tramp-run-real-handler, tramp-completion-run-real-handler):
	Remove `ange-ftp-hook-function' handling.  Make
	`inhibit-file-name-handlers' a cons but a list.
	(tramp-advice-find-file-name-handler): Advice for
	`find-file-name-handler'.  Check for Ange-FTP file names,
	applicable for NON built-in primitives only.
	(tramp-primitive-file-name): New function.  Returns filename for
	some built-in primitives.
	(tramp-file-name-handler): Check for Ange-FTP file names (built-in
	primitives only).  Forward to Ange-FTP in case of.
	(tramp-completion-file-name-handler): Remove catch for
	`tramp-forward-to-ange-ftp'.  Not necessary any longer.
	(tramp-flatten-list): Remove function.  Never used.
	(tramp-completion-mode, tramp-get-completion-methods): Special
	handling of `tramp-ftp-method' removed.  It's part of
	`tramp-methods' now (as foreign method).

2002-10-13  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Windows setup hints): Fix typo (missing {} after
	@dots).
	(Inline methods, External transfer methods)
	(Remote shell setup, Windows setup hints)
	(Frequently Asked Questions, Issues): Replace "Tramp" by
	"@tramp{}".
----------------------------
revision 2.233
date: 2002-10-11 00:57:48 -0700;  author: kai;  state: Exp;  lines: +11 -0;
(tramp-handle-shell-command): Don't switch to the
output buffer, just display it.  From Francis Litterio
<franl@world.std.com>.
----------------------------
revision 2.232
date: 2002-10-06 12:03:20 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(VERSION): Bump.
----------------------------
revision 2.231
date: 2002-10-05 14:11:52 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-file-truename): If it's a directory,
append slash only if result doesn't end in a slash already.
----------------------------
revision 2.230
date: 2002-10-04 13:35:29 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-file-truename): Restructure logic.  If
list of steps is nil, return "/" as the real name.
----------------------------
revision 2.229
date: 2002-10-03 14:47:40 -0700;  author: albinus;  state: Exp;  lines: +11 -0;


2002-10-03  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): Add "\\(" and
	"\\)". Otherwise, `match-string' doesn't make sense.
	(tramp-host-with-port-regexp): New defcustom. Equal to previous
	`tramp-host-regexp'.
	(tramp-host-regexp): Taken off hashes in host names. Otherwise,
	scanning files like .rhosts would take comments as host names.
	(tramp-file-name-structure, tramp-multi-file-name-hop-structure):
	Replace `tramp-host-regexp' by `tramp-host-with-port-regexp'.
----------------------------
revision 2.228
date: 2002-10-03 12:15:23 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-action-terminal): New function.
(tramp-terminal-prompt-regexp): New variable, matches "tset"
prompts.
(tramp-actions-before-shell): Use them.
----------------------------
revision 2.227
date: 2002-09-30 07:25:24 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-shell-command): Logic error.  From Ivan
Zakharyaschev <imz@altlinux.org>.
----------------------------
revision 2.226
date: 2002-09-29 09:07:44 -0700;  author: kai;  state: Exp;  lines: +2 -0;
*** empty log message ***
----------------------------
revision 2.225
date: 2002-09-29 08:26:08 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-host-regexp): Allow hashes in host names (for
the "#port" feature).
----------------------------
revision 2.224
date: 2002-09-28 04:57:20 -0700;  author: kai;  state: Exp;  lines: +8 -0;
* tramp.el (tramp-open-connection-setup-interactive-shell):
Explicitly set tramp-last-cmd-time before invoking
tramp-send-command the first time.  Otherwise, tramp-send-command
would issue "echo are you awake" right at the first time, which
is not what we want.  Reported by Douglas Gray Stephens.

* Makefile (cvs-update): New convenience target.
----------------------------
revision 2.223
date: 2002-09-27 14:37:15 -0700;  author: albinus;  state: Exp;  lines: +10 -0;


	* tramp.texi (Inline methods): Explain that encoding/decoding
	commands are selected automagically ,based on `uuencode',
	'mimencode' and anown Perl implementation of base-64
	coding. Actualize the methods with respect to reality.
	(External transfer methods): Add missing methods `scp1', `scp2',
	`scp1_old', `scp2_old' and `ftp'.
	(Multi-hop Methods): Remove `multiu'.

	* tramp.el (tramp-methods, tramp-completion-function-alist):
	Rename "scp1-old", "scp2-old", "ssh1-old", "ssh2-old" to
	"*_old". There have been problems in method name completion,
	because "-" is a word delimeter for partial completion mode.
	(tramp-completion-function-alist): Set
	`tramp-completion-function-alist-ssh' as completion function for
	"fcp".
----------------------------
revision 2.222
date: 2002-09-27 09:39:03 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.23 released.
----------------------------
revision 2.221
date: 2002-09-26 04:24:02 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-handle-file-local-copy): More local bindings.
Bind results of tramp-get-{remote,local}-{de,en}coding earlier to
avoid nasty "are you awake" problem.
----------------------------
revision 2.220
date: 2002-09-25 08:57:52 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-maybe-open-connection): Don't send "are you awake" if
process has died.
----------------------------
revision 2.219
date: 2002-09-25 07:06:35 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-action-password): Protect against clobbered
match data.
----------------------------
revision 2.218
date: 2002-09-24 09:22:16 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.texi: Bump version.

* tramp.el (tramp-handle-file-truename): Eliminate unused
variable.
(tramp-version): Bump.
----------------------------
revision 2.217
date: 2002-09-24 03:09:06 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(tramp-ange-ftp-file-name-p): If METHOD is nil, find the right
default method.  Require additional args USER and HOST for this.
Callers changed.
----------------------------
revision 2.216
date: 2002-09-24 02:57:55 -0700;  author: kai;  state: Exp;  lines: +11 -0;
(tramp-find-inline-encoding): Don't redirect stdout to
/dev/null to avoid "chmode go-rwx" operation from "mimencode
>/dev/null" as root(!), and to check the output of the decoding
command.
----------------------------
revision 2.215
date: 2002-09-22 10:29:53 -0700;  author: kai;  state: Exp;  lines: +6 -0;
Version 2.0.22.
----------------------------
revision 2.214
date: 2002-09-22 09:25:40 -0700;  author: albinus;  state: Exp;  lines: +17 -0;

	* tramp.el (tramp-parse-rhosts, tramp-parse-shosts)
	(tramp-parse-hosts, tramp-parse-passwd): Apply `push' but
	`add-to-list' for performance reasons.
	(tramp-get-completion-user-host): Return `nil' in case both `user'
	and 'host' are empty (not necessarily `nil'.
	(tramp-parse-netrc, tramp-parse-netrc-group): New functions.
	(tramp-user-regexp): " \t" are not user regexp characters.
	(tramp-completion-handle-file-name-all-completions): Remove
	Ange-FTP cmpletion. It has a bug not handling the "/ftp:" prefix
	completely, and it returns local completions as well.
	(tramp-completion-function-alist-ftp): New constant.
	(tramp-completion-function-alist): Add completion function for
	"ftp".

	* tramp.texi (Customizing Completion): Introduce
	`tramp-parse-netrc'.
----------------------------
revision 2.213
date: 2002-09-22 06:53:01 -0700;  author: kai;  state: Exp;  lines: +7 -0;
Version 2.0.21 released.

(tramp-handle-file-newer-than-file-p): If mtime of
both files is known, return a useful result.  Better error
message in case one is a Tramp file and one isn't.
(tramp-handle-file-local-copy, tramp-handle-write-region)
(tramp-find-shell, tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-setup-interactive-shell)
(tramp-post-connection, tramp-maybe-open-connection)
(tramp-method-out-of-band-p): Correct number of args for
`tramp-get-rsh-program' and similar functions.
----------------------------
revision 2.212
date: 2002-09-22 06:40:58 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-handle-file-newer-than-file-p): If mtime of
both files is known, return a useful result.  Better error
message in case one is a Tramp file and one isn't.
----------------------------
revision 2.211
date: 2002-09-22 06:11:59 -0700;  author: kai;  state: Exp;  lines: +5 -1;
Version 2.0.20 released.
----------------------------
revision 2.210
date: 2002-09-20 13:40:27 -0700;  author: kai;  state: Exp;  lines: +4 -0;
*tramp.el (tramp-method-out-of-band-p): Add missing ")".
----------------------------
revision 2.209
date: 2002-09-20 10:03:39 -0700;  author: kai;  state: Exp;  lines: +22 -4;
(tramp-handle-file-local-copy, tramp-handle-write-region)
(tramp-completion-handle-file-name-all-completions)
(tramp-open-connection-telnet, tramp-open-connection-rsh)
(tramp-open-connection-su, tramp-post-connection)
(tramp-maybe-open-connection, tramp-method-out-of-band-p)
(tramp-get-connection-function, tramp-get-remote-sh)
(tramp-get-rsh-program, tramp-get-rsh-args)
(tramp-get-rcp-program, tramp-get-rcp-args)
(tramp-get-rcp-keep-date-arg, tramp-get-su-program)
(tramp-get-su-args, tramp-get-telnet-program)
(tramp-get-telnet-args): Use `tramp-find-method', perhaps require
additional args USER, HOST.
(tramp-action-password, tramp-open-connection-telnet)
(tramp-open-connection-su, tramp-open-connection-multi)
(tramp-method-out-of-band-p): `tramp-method-out-of-band-p' now
takes USER and HOST arguments, to be able to use
`tramp-find-method'.  Update callers.
(tramp-find-method): New function.
----------------------------
revision 2.208
date: 2002-09-20 09:27:58 -0700;  author: kai;  state: Exp;  lines: +11 -0;
(tramp-completion-function-alist): Escape open paren
in docstring.
(tramp-user-regexp, tramp-host-regexp): Allow empty strings.
(tramp-handle-insert-file-contents): Call
tramp-message-for-buffer instead of tramp-message.
(tramp-open-connection-rsh): Handle empty string as user name.
(tramp-open-connection-su): Handle empty string as host name.
Handle nil user name.
----------------------------
revision 2.207
date: 2002-09-20 08:33:41 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-insert-directory): Handle "--dired" in
SWITCHES (by removing it).
----------------------------
revision 2.206
date: 2002-09-18 00:40:01 -0700;  author: kai;  state: Exp;  lines: +9 -0;
* tramp.el (tramp-file-name-handler): Add `file-remote-p'
property.
----------------------------
revision 2.205
date: 2002-09-16 12:25:08 -0700;  author: kai;  state: Exp;  lines: +4 -0;
* contrib/README: Explain uudecode.el.

* contrib/uudecode.el: New file.
----------------------------
revision 2.204
date: 2002-09-16 01:46:05 -0700;  author: kai;  state: Exp;  lines: +8 -0;
* tramp.el (tramp-methods): Update docstring:
tramp-encoding-command, tramp-decoding-command,
tramp-encoding-function and tramp-decoding-function are not
parameters anymore.
(tramp-uuencode-region): Autoload it.
----------------------------
revision 2.203
date: 2002-09-13 14:19:48 -0700;  author: kai;  state: Exp;  lines: +13 -0;
Version 2.0.19 released.

* tramp-uu.el: New file.

* tramp.el (tramp-coding-commands): Use `tramp-uuencode-region'
as local encoder for the uuencode based entries.

* tramp.texi: Define macro for printing a Tramp filename.
----------------------------
revision 2.202
date: 2002-09-13 03:12:57 -0700;  author: kai;  state: Exp;  lines: +2 -0;
Version 2.0.18.
----------------------------
revision 2.201
date: 2002-09-13 03:12:30 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.el (tramp-perl-decode): Perl changes to accomodate older
versions of Perl.  Now tested with 5.004.  Suggestion from
Michael Albinus.

* Makefile (VERSION): Bump
----------------------------
revision 2.200
date: 2002-09-12 09:08:05 -0700;  author: kai;  state: Exp;  lines: +7 -0;
* tramp.el (tramp-find-inline-encoding): Call
tramp-call-local-coding-command with nil for INPUT and OUTPUT.
(tramp-call-local-coding-command): OUTPUT equals nil means to
discard the output.  INPUT equals nil means /dev/null.

* Makefile (tar): Depend on prepversion, not tag.
(dist): Depend on tag.
(VERSION): Bump.
----------------------------
revision 2.199
date: 2002-09-12 06:07:49 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-encoding-shell): Default to environment
variable COMSPEC on Windows.
(tramp-handle-write-region): More debugging output.
(tramp-find-inline-encoding): Ditto.
----------------------------
revision 2.198
date: 2002-09-11 12:25:36 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* tramp.el (tramp-completion-handle-file-name-all-completions):
	Define `result1'.
	(tramp-parse-hosts-group): Discard IPv6 entries.

* tramp.texi (Copying): New node. Contains the disclaimer
	part. Two occurences of this text removed.
	(Obtaining @tramp{}): Harmonize example. Use "~/emacs" but "~/lisp".
	(Top): Introduce new flags `emacs'/`xemacs', `emacs-name',
	´emacs-dir', `ftp-package-name', `tramp-prefix',
	`tramp-prefix-single-hop', `tramp-postfix',
	`tramp-postfix-single-hop', `tramp-postfix-multi-hop'.
	(All): Use them. Fix typos where seen.
----------------------------
revision 2.197
date: 2002-09-11 11:32:10 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* tramp.el: Next todo item. The list shall decrease, but it
	doesn't :(
----------------------------
revision 2.196
date: 2002-09-11 05:10:41 -0700;  author: kai;  state: Exp;  lines: +4 -0;
New todo item.
----------------------------
revision 2.195
date: 2002-09-11 04:03:45 -0700;  author: kai;  state: Exp;  lines: +30 -0;
* tramp.el (tramp-post-connection): Only send Perl
mime-encode/decode implementations when using inline method.
(tramp-handle-file-local-copy)
(tramp-handle-write-region, tramp-post-connection)
(tramp-coding-commands, tramp-find-inline-encoding): For the
inline encodings, distinguish between local and remote commands,
instead of between commands and functions.  (The local commands
can be functions, too.)  If the local host is a Windows machine,
we can't expect the same commands to work there as on the remote
host.
(tramp-call-local-coding-command): New function for calling local
encoding and decoding commands.
(tramp-set-remote-encoding, tramp-get-remote-encoding)
(tramp-set-remote-decoding, tramp-get-remote-decoding)
(tramp-set-local-encoding, tramp-get-local-encoding)
(tramp-set-local-decoding, tramp-get-local-decoding): New functions.
(tramp-get-encoding-command, tramp-set-encoding-command)
(tramp-get-decoding-command, tramp-set-decoding-command)
(tramp-get-encoding-function, tramp-set-encoding-function)
(tramp-get-decoding-function, tramp-set-decoding-function): Old
functions, removed.

* Makefile (VERSION): Bump.
----------------------------
revision 2.194
date: 2002-09-10 14:07:17 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

(tramp-handle-write-region): Added missing `)'. Hope
	it's the right place.
----------------------------
revision 2.193
date: 2002-09-09 09:52:06 -0700;  author: kai;  state: Exp;  lines: +14 -0;
(tramp-encoding-shell): Renamed from tramp-sh-program.  More
documentation.  Default to cmd.exe on Windows NT.
(tramp-encoding-command-switch): New variable.  Use instead of
hard-wired "-c" which is only good for /bin/sh.
(tramp-encoding-reads-stdin): New variable.  If t, commands are
called like "/bin/sh -c COMMAND <INPUT", if nil, they are called
like "/bin/sh -c COMMAND INPUT", ie the input file is the last
argument.
(tramp-multi-sh-program): Always default to tramp-encoding-shell.
(tramp-handle-file-local-copy, tramp-handle-write-region): Respect
tramp-encoding-shell and friends.
(tramp-find-inline-encoding): Use new-style calls for checking if
the local commands work.
----------------------------
revision 2.192
date: 2002-09-09 02:48:20 -0700;  author: kai;  state: Exp;  lines: +9 -0;
(tramp-open-connection-setup-interactive-shell): Do
"exec env PS1='$ ' /bin/sh" instead of just "exec /bin/sh" in
order to get a sane shell prompt.  If people have ${CWD}, say, in
their shell prompt, then the default login shell might display
something harmless, but the /bin/sh will display a dollar sign
which confused the subsequent prompt recognition.
----------------------------
revision 2.191
date: 2002-09-08 11:35:11 -0700;  author: albinus;  state: Exp;  lines: +32 -0;

2002-09-08  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Configuration): New node `Customizing Completion'.
	(Usage): New node `Filename completion'. Respective sentences from
	node `Dired' moved to.

2002-09-07  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-methods): Remove `tramp-completion-function'
	entries. They are handled now by `tramp-completion-function-alist'.
	(tramp-completion-function): Defvar removed. I've never used
	it. Hmm.
	(tramp-get-completion-function)
	(tramp-get-completion-rsh, tramp-get-completion-ssh)
	(tramp-get-completion-telnet, tramp-get-completion-su): Functions
	removed as well. Not necessary any longer due to extended
	customization means.
	(tramp-completion-function-alist): New defcustom. Holds all
	FUNCTION FILE pairs used for user and host name completion
	relevant for METHOD.
	(tramp-completion-function-alist-rsh)
	(tramp-completion-function-alist-ssh)
	(tramp-completion-function-alist-telnet)
	(tramp-completion-function-alist-su): Defconst for initializing
	`tramp-completion-function-alist'. Unfortunately, mainly UNIX-like
	values are known for me until now. Needs to be completed for at
	least VMS++ like operating systems.
	(tramp-set-completion-function)
	(tramp-get-completion-function): New functions for configuration
	of `tramp-completion-function-alist'. The old definition of
	`tramp-get-completion-function' has been discarded.
	(tramp-completion-handle-file-name-all-completions): Change
	function call for user/host completion according to definition in
	`tramp-completion-function-alist'.
	(tramp-parse-passwd): Added exception handling for "root", because
	`tramp-get-completion-su' (the previous place for this stuff)
	doesn't exist any longer.
----------------------------
revision 2.190
date: 2002-09-07 10:42:53 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-wait-for-output, tramp-post-connection): Allow "\r" at end
of line of the output delimiter.
----------------------------
revision 2.189
date: 2002-09-07 10:35:40 -0700;  author: kai;  state: Exp;  lines: +10 -0;
(tramp-enter-password): Use
`tramp-password-end-of-line' to terminate the line.
(tramp-bug): Include new variable `tramp-password-end-of-line'.
(tramp-password-end-of-line): New variable.  People who use plink
under Windows might have to issue "\r\n" after the password, but
they need to send just "\n" after the other commands.  So this
variable was introduced to complement `tramp-rsh-end-of-line'.
----------------------------
revision 2.188
date: 2002-09-06 13:27:49 -0700;  author: kai;  state: Exp;  lines: +10 -0;
(tramp-handle-file-local-copy, tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Add some
comments about Douglas Grey Stephen's suggestions to make Tramp
work better with plink under Windows.  I'm not sure what to think
of them, but now I have a guinea pig to try it out on.  Said
guinea pig is having other problems, though...
Also remove some commented-out code.
----------------------------
revision 2.187
date: 2002-09-06 13:22:39 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

2002-09-06  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-get-completion-methods): Algorithm slightly
	tuned.
	(tramp-get-completion-user-host): Accept user names as they are if
	typed until "@".
	(tramp-completion-mode): Replace `last-input-char' by modern
	`last-input-event'. Check for `event-modifiers'.
----------------------------
revision 2.186
date: 2002-09-06 03:41:14 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(file-expand-wildcards): Corrected check to see if
advising is necessary.
----------------------------
revision 2.185
date: 2002-09-06 03:10:13 -0700;  author: kai;  state: Exp;  lines: +211 -8;
Merge changes by Michael Albinus from "completion" branch.

2002-09-05  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-postfix-single-method-format)
	(tramp-postfix-multi-method-format)
	(tramp-postfix-multi-hop-format)
	(tramp-postfix-user-format): New format strings.
	(tramp-postfix-single-method-regexp)
	(tramp-postfix-multi-method-regexp)
	(tramp-postfix-multi-hop-regexp)
	(tramp-postfix-user-regexp)
	(tramp-make-multi-tramp-file-format)
	(tramp-make-tramp-file-name): Apply them.
	(tramp-completion-handle-file-name-all-completions): Fix for
	invoking ange-ftp in case of "/ftp:xxx" file names.

2002-09-04  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-prefix-format)
	(tramp-postfix-host-format): New format strings.
	(tramp-prefix-regexp, tramp-method-regexp)
	(tramp-postfix-single-method-regexp)
	(tramp-postfix-multi-method-regexp)
	(tramp-postfix-multi-hop-regexp)
	(tramp-user-regexp, tramp-postfix-user-regexp)
	(tramp-host-regexp, tramp-postfix-host-regexp)
	(tramp-path-regexp): New atomar regular expressions. If
	corresponding format strings exist, derived from them.
	(tramp-file-name-structure)
	(tramp-multi-file-name-structure)
	(tramp-multi-file-name-hop-structure)
	(tramp-make-multi-tramp-file-format)
	(tramp-completion-mode)
	(tramp-completion-dissect-file-name)
	(tramp-parse-rhosts-group)
	(tramp-parse-shosts-group)
	(tramp-parse-hosts-group)
	(tramp-parse-passwd-group): Apply these expressions.
	(tramp-file-name-structure-unified)
	(tramp-file-name-structure-separate)
	(tramp-make-tramp-file-format-unified)
	(tramp-make-tramp-file-format-separate)
	(tramp-make-tramp-file-format)
	(tramp-make-tramp-file-user-nil-format-unified)
	(tramp-make-tramp-file-user-nil-format-separate)
	(tramp-make-tramp-file-user-nil-format)
	(tramp-multi-file-name-structure-unified)
	(tramp-multi-file-name-structure-separate)
	(tramp-multi-file-name-hop-structure-unified)
	(tramp-multi-file-name-hop-structure-separate)
	(tramp-make-multi-tramp-file-format-unified)
	(tramp-make-multi-tramp-file-format-separate): Removed.
	(tramp-make-tramp-file-name): Allow partial tramp file
	names. Generate tramp file format on-the-fly depending on
	parameters. Apply atomar format strings resp expressions.
	(tramp-get-completion-methods)
	(tramp-get-completion-user-host): Apply
	`tramp-make-tramp-file-name'.
	(tramp-parse-hosts-group): Take all host names and IP addresses
	into account.
	(tramp-bug): Remove `tramp-make-tramp-file-format'.

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-methods): Add `tramp-completion-function' for
	"su" and "sudo".
	(tramp-get-completion-telnet): Implement it.
	(tramp-parse-hosts)
	(tramp-parse-hosts-group)
	(tramp-get-completion-su)
	(tramp-parse-passwd)
	(tramp-parse-passwd-group): New functions.

2002-08-31  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): Check for `last-input-char'.
	(tramp-completion-file-name-handler-alist): Add handler
	for `file-exists-p.
	(tramp-completion-handle-file-exists-p): New function.
	(tramp-completion-handle-file-name-completion): Simplified.
	(tramp-completion-dissect-file-name): Regexp's reorganised.
	(tramp-completion-handle-file-name-all-completions): Call
	completion-function only if `user' or `host' is given.
	(tramp-get-completion-user-host): New function.
	(tramp-get-completion-rsh)
	(tramp-get-completion-ssh): Apply it.

2002-08-29  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-handler-alist): Add handler
	for `expand-file-name'.
	(tramp-completion-handle-expand-file-name): New function.

2002-08-26  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): New function.
	(tramp-completion-handle-file-name-directory)
	(tramp-completion-handle-file-name-all-completions): Apply it.
	(tramp-methods): Remove double definition of `ssh1-old' and
	`ssh2-old'.
	(tramp-point-at-eol): New defalias.
	(tramp-parse-rhosts-group)
	(tramp-parse-shosts-group):: Apply it.

2002-08-25  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-get-completion-methods)
	(tramp-get-completion-rsh)
	(tramp-get-completion-ssh): Add "[" for Xemacs.
	(tramp-completion-file-name-regexp-separate): Expression adapted.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-directory' and `file-name-nondirectory'.
	(tramp-completion-handle-file-name-directory)
	(tramp-completion-handle-file-name-nondirectory)
	(tramp-completion-run-real-handler): New functions.
	(tramp-completion-file-name-handler)
	(tramp-completion-handle-file-name-all-completions): Apply
	`tramp-completion-run-real-handler'.
	(tramp-parse-rhosts)
	(tramp-parse-shosts): Use `with-temp-buffer'. `result´ renamed to
	`res' (otherwise side effects in XEmacs).

2002-08-24  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-regexp)
	(tramp-completion-file-name-handler-alist)
	(tramp-flatten-list)
	(tramp-completion-dissect-file-name)
	(tramp-get-completion-rsh)
	(tramp-parse-rhosts)
	(tramp-parse-rhosts-group)
	(tramp-get-completion-ssh): Doc string tuned.
	(tramp-methods): Doc string and custom type extended for
	`tramp-completion-function'.
	(tramp-completion-function): Variable added. Is it really used?
	Other variables like `tramp-completion-function' aren't used.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-completion'.
	(tramp-completion-handle-file-name-completion): New function.

2002-08-20  Michael Albinus  <Michael.Albinus@alcatel.de>

	Branch "completion" created. Version named (temporarily)
	"2.0.completion".

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Dired): Mention method, user name and machine name
	completion.
----------------------------
revision 2.184
date: 2002-09-05 09:14:31 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-chunksize): New kluge variable.
(tramp-send-region): If tramp-chunksize is non-nil, send region
in parts and sleep 0.1 seconds between chunks.
----------------------------
revision 2.183
date: 2002-09-03 05:50:21 -0700;  author: kai;  state: Exp;  lines: +11 -0;
(tramp-handle-insert-directory): Use
`insert-buffer-substring' instead of `insert-buffer', which is not
supposed to be used from Lisp.  Remember old point in a variable
instead of using `mark'.  Suggestion from Stefan Monnier.
(tramp-unified-filenames): New variable.  Use it in default value
of other filename variables.
(file-expand-wildcards): Don't advise unless "[" and "]" are used
in the filename format.
----------------------------
revision 2.182
date: 2002-09-01 13:29:20 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-methods): Remove duplicate definition of
ssh1-old and ssh2-old.
----------------------------
revision 2.181
date: 2002-09-01 12:29:45 -0700;  author: kai;  state: Exp;  lines: +2 -0;
Version 2.0.15 is released.
----------------------------
revision 2.180
date: 2002-09-01 12:27:38 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(require 'base64): Add explanatory comment to Steve's
change.
(tramp-feature-write-region-fix): Make sure that variable is
always defined, even on XEmacs (where it is nil).
----------------------------
revision 2.179
date: 2002-08-30 19:25:33 -0700;  author: youngs;  state: Exp;  lines: +9 -0;

2002-08-31  Steve Youngs  <youngs@xemacs.org>

	* tramp.el (require 'base64): Most modern Emacsen have the base64
	encode/decode functions built in, so test to see if they are bound
	before we go blindly requiring base64.el.
	(tramp-feature-write-region-fix): XEmacs doesn't have a
	'find-operation-coding-system' and this variable doesn't seem to
	be used anywhere so wrap it in (unless (featurep 'xemacs)).
----------------------------
revision 2.178
date: 2002-08-29 12:31:40 -0700;  author: albinus;  state: Exp;  lines: +13 -0;

2002-08-29  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-invoke-ange-ftp):
	(tramp-ange-ftp-file-name-p): Check for Xemacs.
	(tramp-do-copy-or-rename-file): Don't pass KEEP-DATE to
	tramp-invoke-ange-ftp 'rename.
	(tramp-handle-write-region): Don't pass LOCKNAME and CONFIRM to
	tramp-invoke-ange-ftp 'write-region.
	(tramp-handle-set-file-modes): Change order of FILENAME and MODE
	passing to tramp-invoke-ange-ftp 'set-file-modes.
	(tramp-invoke-ange-ftp): `tramp-disable-ange-ftp' must be called
	again after activating `ange-ftp'.
----------------------------
revision 2.177
date: 2002-08-24 04:12:38 -0700;  author: kai;  state: Exp;  lines: +5 -0;
2002-08-22  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* tramp.el (tramp-open-connection-su): Use user name "root" if no
	user name is given.

2002-08-22  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* tramp.texi (Usage): Mention type-ahead problem.
----------------------------
revision 2.176
date: 2002-08-22 08:12:23 -0700;  author: kai;  state: Exp;  lines: +20 -0;
* tramp.texi (Remote shell setup): Mention
`tramp-shell-prompt-pattern', `tramp-actions-before-shell', and
`tramp-multi-actions'.

* tramp.el (tramp-shell-prompt-pattern): New variable.
(tramp-actions-before-shell, tramp-multi-actions)
(tramp-find-shell, tramp-open-connection-multi)
(tramp-open-connection-setup-interactive-shell): Use it.
(tramp-open-connection-telnet, tramp-open-connection-rsh)
(tramp-open-connection-su): Mention `tramp-shell-prompt-pattern'
in the docstring.
(tramp-bug): Report `tramp-shell-prompt-pattern'.
(tramp-process-one-multi-action, tramp-process-one-action): Make
message clearer so people don't confuse it with Emacs asking them
a question if the regexp happens to end with "?".
(tramp-verbose): Change default value from 10 to 9.  Also change
some logging levels so that 10 is reserved for stuff which is
needed for debugging only, but 9 catches everything that people
might like to see in order to see that Tramp is actually working.

* Makefile (VERSION): Bump.
----------------------------
revision 2.175
date: 2002-08-21 08:00:59 -0700;  author: kai;  state: Exp;  lines: +9 -0;
* tramp.el (tramp-handle-write-region): Don't check to see if
remote end is awake after sending data to remote host: we want to
send "EOF" not "echo are you awake"...
(tramp-maybe-open-connection): Swap args for tramp-time-diff.

* Makefile (VERSION): Bump.
----------------------------
revision 2.174
date: 2002-08-17 13:09:27 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-yn-prompt-regexp): New variable.
(tramp-action-yn): New function, using it.
----------------------------
revision 2.173
date: 2002-08-08 13:06:24 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-feature-write-region-fix): New internal
variable.  Not yet used.  Should be used in
`tramp-handle-write-region'.
----------------------------
revision 2.172
date: 2002-08-07 07:51:36 -0700;  author: kai;  state: Exp;  lines: +2 -0;
branches:  2.172.2;
* tramp.el (tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Comment out
possibly obsolete "echo hello" commands.
(tramp-run-real-handler): If operation is
`ange-ftp-hook-function', use first arg as the real operation.
(tramp-check-ls-commands): Use / instead of \ as directory
separator.  (Relevant for XEmacs on Windows.)
(tramp-maybe-open-connection): Use tramp-wait-for-output when
waiting for the "are you awake" command.  Use a different string
for the "are you awake" command.
(tramp-send-command): New optional arg NEVEROPEN means to never
invoke tramp-maybe-open-connection.
(tramp-maybe-open-connection): Use it.

* Makefile (VERSION): Bump.
----------------------------
revision 2.171
date: 2002-08-07 06:23:45 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(tramp-send-command): New optional arg NEVEROPEN means to never
invoke tramp-maybe-open-connection.
(tramp-maybe-open-connection): Use it.
----------------------------
revision 2.170
date: 2002-08-07 05:47:13 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(tramp-maybe-open-connection): Use tramp-wait-for-output when
waiting for the "are you awake" command.  Use a different string
for the "are you awake" command.
----------------------------
revision 2.169
date: 2002-08-07 04:58:10 -0700;  author: kai;  state: Exp;  lines: +7 -2;
(tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Comment out
possibly obsolete "echo hello" commands.
(tramp-run-real-handler): If operation is
`ange-ftp-hook-function', use first arg as the real operation.
(tramp-check-ls-commands): Use / instead of \ as directory
separator.  (Relevant for XEmacs on Windows.)
----------------------------
revision 2.168
date: 2002-08-06 03:32:27 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-run-real-handler): If operation is
`ange-ftp-hook-function', use first arg as the real operation.
----------------------------
revision 2.167
date: 2002-08-05 07:53:47 -0700;  author: kai;  state: Exp;  lines: +2 -0;
Version 2.0.11.

* tramp.el (tramp-invoke-ange-ftp): Avoid infloop by Ange-FTP
calling Tramp again: use tramp-run-real-handler to invoke
Ange-FTP.
(tramp-post-connection): Erase buffer after finding a remote
shell.
(tramp-find-file-exists-command): Try "test -e" and its variants
before "ls -d".

* Makefile (xemacs): Adjust to new directory names after moving
from SourceForge to Savannah.
(VERSION): Bump.
----------------------------
revision 2.166
date: 2002-08-05 07:41:17 -0700;  author: kai;  state: Exp;  lines: +12 -0;
* tramp.el (tramp-invoke-ange-ftp): Avoid infloop by Ange-FTP
calling Tramp again: use tramp-run-real-handler to invoke
Ange-FTP.
(tramp-post-connection): Erase buffer after finding a remote
shell.
(tramp-find-file-exists-command): Try "test -e" and its variants
before "ls -d".

* Makefile (xemacs): Adjust to new directory names after moving
from SourceForge to Savannah.
----------------------------
revision 2.165
date: 2002-08-04 06:53:24 -0700;  author: kai;  state: Exp;  lines: +2 -0;
* tramp.el (tramp-perl-encode-with-module,
tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode): Doc fix.  From Andreas
Schwab.
(tramp-bug): New variables to report.
(tramp-post-connection): After finding shell, wait a bit.  I have
no idea why it is necessary, but Daniel also thinks it's
necessary.
(tramp-uudecode): New variable.  Shell function `tramp_uudecode'
for decoding to standard output for those Unices that don't have
it.
(tramp-post-connection): Install the function on the remote host.
(tramp-coding-commands): Add an alternative for using the
`tramp_uudecode' shell function.

* Makefile (VERSION): Bump.
----------------------------
revision 2.164
date: 2002-08-04 06:47:42 -0700;  author: kai;  state: Exp;  lines: +9 -0;
(tramp-uudecode): New variable.  Shell function `tramp_uudecode'
for decoding to standard output for those Unices that don't have
it.
(tramp-post-connection): Install the function on the remote host.
(tramp-coding-commands): Add an alternative for using the
`tramp_uudecode' shell function.
----------------------------
revision 2.163
date: 2002-08-04 05:22:40 -0700;  author: kai;  state: Exp;  lines: +10 -2;
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode): Doc fix.  From Andreas
Schwab.
(tramp-bug): New variables to report.
----------------------------
revision 2.162
date: 2002-08-04 04:37:01 -0700;  author: kai;  state: Exp;  lines: +2 -0;
Version 2.0.9 released.
----------------------------
revision 2.161
date: 2002-08-04 04:31:44 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-find-inline-encoding): When checking the decoding command,
some commands fail when reading from /dev/null.  So we pass a
known string through the encoding command and pass that through
the decoding command.  So we know whether the decoding command
can deal with some real input.
----------------------------
revision 2.160
date: 2002-08-04 01:44:50 -0700;  author: kai;  state: Exp;  lines: +10 -0;
* tramp.el (tramp-bug): Add wording about additional info to
include in bug report.
(tramp-find-shell): Set $PS1 for invocation of second shell (for
tilde expansion).
(tramp-find-shell): Shell prompt must match at end of buffer.  Do
this also for fallback shell prompt.
(tramp-find-shell): More debugging output.

* Makefile (VERSION): Bump.
----------------------------
revision 2.159
date: 2002-08-03 13:52:41 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-perl-encode, tramp-perl-encode): Double the
backslashes in the string.
----------------------------
revision 2.158
date: 2002-08-03 08:45:12 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-encode): Strings are passwd
through `format', so double all percent characters and document.
----------------------------
revision 2.157
date: 2002-08-03 02:25:07 -0700;  author: kai;  state: Exp;  lines: +2 -0;
Version 2.0.6 released.
----------------------------
revision 2.156
date: 2002-08-03 02:10:51 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-perl-encode, tramp-perl-decode): New (faster) versions.  From
Juanma Barranquero <lektu@terra.es>.
----------------------------
revision 2.155
date: 2002-08-03 02:03:37 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-make-directory): save-excursion.
(tramp-default-method): Change to "ssh".
----------------------------
revision 2.154
date: 2002-07-31 08:25:09 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(tramp-handle-file-truename): Invoke Ange-FTP properly.
(tramp-handle-expand-many-files): Don't try to invoke Ange-FTP
twice.
----------------------------
revision 2.153
date: 2002-07-31 05:34:46 -0700;  author: kai;  state: Exp;  lines: +12 -0;
(tramp-wrong-passwd-regexp): Restructure.  Add
additional alternative.
(tramp-action-permission-denied): Show *tramp/foo* buffer so that
the user knows why.
(tramp-su-program): Add defvar for this method parameter.  From
Juanma Barranquero <lektu@terra.es>.
(tramp-perl-encode-with-module): Rename from tramp-perl-encode.
(tramp-perl-decode-with-module): Rename from tramp-perl-decode.
(tramp-perl-encode, tramp-perl-decode): New implementations that
do not use any Perl modules.  From Juanma Barranquero
<lektu@terra.es>.
(tramp-post-connection): Create shell functions tramp_encode,
tramp_decode, tramp_encode_with_module, tramp_decode_with_module
for the new Perl snippets.
(tramp-coding-commands): Add entries for the two
implementations (one with module, one without module).
----------------------------
revision 2.152
date: 2002-07-31 02:59:03 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-wrong-passwd-regexp): Restructure.  Add
additional alternative.
(tramp-action-permission-denied): Show *tramp/foo* buffer so that
the user knows why.
----------------------------
revision 2.151
date: 2002-07-30 08:33:58 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-coding-commands): Provide base64 encoding with recode.
----------------------------
revision 2.150
date: 2002-07-29 10:41:16 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(tramp-action-yesno): New function.
(tramp-yesno-prompt-regexp): New variable.
(tramp-actions-before-shell): Use them.
----------------------------
revision 2.149
date: 2002-07-29 07:09:49 -0700;  author: kai;  state: Exp;  lines: +11 -0;
* Makefile (prepversion): Edit tramp.el instead of creating new
file tramp-version.el.
(clean): Don't remove tramp-version.el, the file doesn't exist
anymore.

* tramp.el (tramp-perl-encode, tramp-perl-decode): Very simple
implementations requiring the Perl module MIME::Base64.
(tramp-coding-commands): Use them.
(tramp-version): Move back here from tramp-version.el.  The
variable is automatically edited from the Makefile.
(tramp-login-prompt-regexp, tramp-password-prompt-regexp)
(tramp-wrong-passwd-regexp): Remove "$" from regexp, it must match
at end of buffer anyway.
(tramp-action-login, tramp-action-succeed)
(tramp-action-permission-denied, tramp-multi-action-login)
(tramp-multi-action-succeed)
(tramp-multi-action-permission-denied): Erase buffer when
finished.
(tramp-process-one-action, tramp-process-one-multi-action):
Always search from point-min.
(tramp-enter-password): Erase buffer.
----------------------------
revision 2.148
date: 2002-07-29 01:22:47 -0700;  author: kai;  state: Exp;  lines: +7 -0;
* Makefile (prepversion): Edit tramp.texi for version number
instead of creating new file tramp-version.texi.

* tramp.texi: Define macro @trampver here instead of in
tramp-version.texi.  The value is edited from Makefile.

* Makefile (prepversion): Edit tramp.el instead of creating new
file tramp-version.el.
(clean): Don't remove tramp-version.el, the file doesn't exist
anymore.

* tramp.el (tramp-perl-encode, tramp-perl-decode): Very simple
implementations requiring the Perl module MIME::Base64.
(tramp-coding-commands): Use them.
(tramp-version): Move back here from tramp-version.el.  The
variable is automatically edited from the Makefile.
----------------------------
revision 2.147
date: 2002-07-29 00:32:04 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-perl-encode, tramp-perl-decode): Very simple
implementations requiring the Perl module MIME::Base64.
(tramp-coding-commands): Use them.
----------------------------
revision 2.146
date: 2002-07-28 04:37:44 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-multi-actions): New variable, like
tramp-actions-before-shell, but for multi-hop connections.
(tramp-perl-encode, tramp-perl-decode): New variables.  Contain
Perl code for uuencode, uudecode.
(tramp-post-connection): Use new Perl encode/decode implementation.
(tramp-coding-commands): Ditto.
(tramp-perl-mime-encode, tramp-perl-mime-decode): Remove.  This
code does not work.
(tramp-invoke-ange-ftp): Require ange-ftp to avoid binding
ange-ftp-name-format when it is unbound.
(tramp-coding-commands): Remove Perl alternative.  Fix doc.
----------------------------
revision 2.145
date: 2002-07-28 03:00:59 -0700;  author: kai;  state: Exp;  lines: +9 -0;
(tramp-multi-actions): New variable, like
tramp-actions-before-shell, but for multi-hop connections.
(tramp-perl-encode, tramp-perl-decode): New variables.  Contain
Perl code for uuencode, uudecode.
(tramp-post-connection): Use new Perl encode/decode implementation.
(tramp-coding-commands): Ditto.
----------------------------
revision 2.144
date: 2002-07-27 09:34:01 -0700;  author: kai;  state: Exp;  lines: +6 -3;
(tramp-handle-file-attributes): Make sure to call Ange-FTP in all
cases, not only for existing files.  Make sure not to call
tramp-handle-file-exists-p on an Ange-FTP filename.
----------------------------
revision 2.143
date: 2002-07-27 09:24:47 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-maybe-open-connection): Look to see if process is really
still alive.
----------------------------
revision 2.142
date: 2002-07-27 08:26:42 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(tramp-handle-insert-directory): Expand file name.
(tramp-actions-before-shell): New variable of actions to perform
before we get a shell prompt.
(tramp-action-login, tramp-action-password, tramp-action-succeed)
(tramp-action-permission-denied): New functions, used in above
variable.
(tramp-process-one-action, tramp-process-actions): Process the
actions.
(tramp-open-connection-telnet, tramp-open-connection-rsh): Use new
action mechanism, call tramp-process-actions.
(tramp-methods): Replace a lot of methods because of
autodetection of mimencode/uuencode.  The new names are a bit
longer but more mnemonic.
----------------------------
revision 2.141
date: 2002-07-27 05:21:55 -0700;  author: kai;  state: Exp;  lines: +13 -0;
(tramp-handle-insert-directory): Expand file name.
(tramp-actions-before-shell): New variable of actions to perform
before we get a shell prompt.
(tramp-action-login, tramp-action-password, tramp-action-succeed)
(tramp-action-permission-denied): New functions, used in above
variable.
(tramp-process-one-action, tramp-process-actions): Process the
actions.
(tramp-open-connection-telnet, tramp-open-connection-rsh): Use new
action mechanism, call tramp-process-actions.
----------------------------
revision 2.140
date: 2002-07-26 13:26:21 -0700;  author: kai;  state: Exp;  lines: +11 -0;
(tramp-handle-file-local-copy)
(tramp-handle-write-region): Call
`tramp-get-{de,en}coding-{function,command}' with four args.
(tramp-post-connection): Always send Perl implementation of
mimencode and mimedecode when Perl is available.
(tramp-get-encoding-command, tramp-get-decoding-command)
(tramp-get-encoding-function, tramp-get-decoding-function): New
implementation, uses auto-detected connection properties.
----------------------------
revision 2.139
date: 2002-07-26 10:12:36 -0700;  author: kai;  state: Exp;  lines: +7 -0;
* tramp.texi (Top): Add copying.
(Overview, Obtaining @tramp{}, Installation, Multi-hop Methods)
(Remote Programs, Multi-hop filename syntax)
(Frequently Asked Questions): Reformat.

* Makefile (clean): Delete more.

* tramp.el (tramp-coding-commands): New variable.
(tramp-find-inline-encoding): New function.
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file): Do expand-file-name on arg.

* Makefile: Bump version, preparing for next release.  (But that
release is not soon.)
----------------------------
revision 2.138
date: 2002-07-23 09:52:12 -0700;  author: youngs;  state: Exp;  lines: +1 -1;
Fix a teeny-weeny typo.
----------------------------
revision 2.137
date: 2002-07-23 09:46:30 -0700;  author: youngs;  state: Exp;  lines: +9 -0;

2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (all): Export $VERSION to the subdirectories.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target to create tramp-version.el.
	(all): Use it.
	(clean): Add tramp-version.elc.

	* tramp.el (tramp-version): Removed, we create it on the fly from
	the Makefile.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target.  Creates
	tramp-version.texi.
	(all): Use it.
	(clean): Add tramp-version.texi.

	* tramp.texi: Include tramp-version.texi.
	(Top): Use macro defined in tramp-version.texi.
	(copying): Ditto.
----------------------------
revision 2.136
date: 2002-07-23 02:59:47 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(tramp-version): Bump version to 2.0.3.

* Makefile (VERSION): New version 2.0.3.
----------------------------
revision 2.135
date: 2002-07-23 02:51:25 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-handle-directory-files): Handle fifth, XEmacs-specific,
arg FILES-ONLY.
----------------------------
revision 2.134
date: 2002-07-23 02:38:24 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-open-connection-su, tramp-multi-connect-telnet)
(tramp-multi-connect-rlogin, tramp-multi-connect-su)
(tramp-make-tramp-file-name, tramp-make-tramp-multi-file-name):
Correct alist for `format-spec', use (a . b) instead of (a b).
----------------------------
revision 2.133
date: 2002-07-21 01:44:54 -0700;  author: kai;  state: Exp;  lines: +8 -0;
(tramp-open-connection-su, tramp-multi-connect-telnet)
(tramp-multi-connect-rlogin, tramp-multi-connect-su)
(tramp-make-tramp-file-name, tramp-make-tramp-multi-file-name):
Use backticks in format-spec for brevity and to avoid
character/number confusion in XEmacs.
----------------------------
revision 2.132
date: 2002-07-20 03:10:37 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-do-copy-or-rename-via-buffer): New function.
(tramp-do-copy-or-rename-file): Use it.  Change and simplify
logic.  Omit special case of invoking rcp directly to copy the
files.
----------------------------
revision 2.131
date: 2002-07-19 07:31:16 -0700;  author: kai;  state: Exp;  lines: +1 -0;
* tramp.el (tramp-multi-sh-program): New variable.
(tramp-open-connection-multi): Use it.
Bump version to 2.0.2.

* Makefile (VERSION): New version 2.0.2.
----------------------------
revision 2.130
date: 2002-07-19 06:29:01 -0700;  author: youngs;  state: Exp;  lines: +6 -0;

2002-07-19  Steve Youngs  <youngs@xemacs.org>

	* tramp.el: Revert my previous patch.  It's better to work around
	the colour prompt problem outside of Tramp, eg in ~/.bashrc or
	similar.
----------------------------
revision 2.129
date: 2002-07-19 00:51:47 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-multi-sh-program): New variable.
(tramp-open-connection-multi): Use it.
----------------------------
revision 2.128
date: 2002-07-18 15:35:45 -0700;  author: youngs;  state: Exp;  lines: +20 -0;

2002-07-19  Steve Youngs  <youngs@xemacs.org>

	* tramp.el (tramp-find-shell): Remove "\\'" from regexp so we can
	deal with shell prompts that have colour control characters in
	them.
	(tramp-open-connection-telnet): Ditto.
	(tramp-open-connection-rsh): Ditto.
	(tramp-open-connection-su): Ditto.
	(tramp-open-connection-multi): Ditto.
	(tramp-multi-connect-telnet): Ditto.
	(tramp-multi-connect-rlogin): Ditto.
	(tramp-multi-connect-su): Ditto.
	(tramp-open-connection-setup-interactive-shell): Ditto.

2002-07-18  Steve Youngs  <youngs@xemacs.org>

	* tramp.el (tramp-multi-file-name-structure-separate): Typo, it's
	name was set to 'tramp-file-name-structure-separate'.
----------------------------
revision 2.127
date: 2002-07-18 12:43:52 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-methods): Rename methods invoking "ssh1" or
"ssh2" to longer names.  Use old names sm1, sm2, su1, su2 and so
on for methods invoking "ssh -1" or "ssh -2".
----------------------------
revision 2.126
date: 2002-07-13 10:38:18 -0700;  author: kai;  state: Exp;  lines: +9 -0;
(tramp-multi-file-name-structure-unified): Add missing
initial slash.  Colon is moved from start to end of hop regexp,
adjust this regexp accordingly.
(tramp-file-name-structure-separate): Bug fix.
(tramp-multi-file-name-hop-structure-unified): Move colon from
beginning to end.
----------------------------
revision 2.125
date: 2002-07-11 13:22:43 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(tramp-handle-make-symbolic-link): Complete implementation.
----------------------------
revision 2.124
date: 2002-07-10 05:34:55 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(tramp-default-method): New default value "sm" for all Emacsen.
(tramp-default-method-alist): Invoke Ange-FTP for some user/host
combinations on Emacs.
----------------------------
revision 2.123
date: 2002-07-10 02:08:02 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-file-name-structure): Add missing paren.
(tramp-file-name-regexp-unified, tramp-file-name-regexp-separate):
Add autoload cookies.
----------------------------
revision 2.122
date: 2002-07-10 01:30:27 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(tramp-file-name-structure): Add missing paren.
----------------------------
revision 2.121
date: 2002-07-09 13:10:57 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-default-method): New default value "ftp" on Emacs, "sm" on
XEmacs.
----------------------------
revision 2.120
date: 2002-07-09 13:06:21 -0700;  author: kai;  state: Exp;  lines: +30 -0;
(tramp-file-name-structure-unified)
(tramp-file-name-structure-separate)
(tramp-file-name-regexp-unified)
(tramp-make-tramp-file-format-unified)
(tramp-make-tramp-file-format-separate)
(tramp-make-tramp-file-user-nil-format-unified)
(tramp-make-tramp-file-user-nil-format-separate)
(tramp-multi-file-name-structure-unified)
(tramp-multi-file-name-structure-separate)
(tramp-file-name-structure-unified)
(tramp-file-name-structure-separate)
(tramp-multi-file-name-hop-structure-unified)
(tramp-multi-file-name-hop-structure-separate)
(tramp-make-multi-tramp-file-format-unified)
(tramp-make-multi-tramp-file-format-separate): New constants.
(tramp-file-name-structure, tramp-file-name-regexp)
(tramp-make-tramp-file-format)
(tramp-make-tramp-file-user-nil-format)
(tramp-multi-file-name-structure)
(tramp-file-name-structure)
(tramp-multi-file-name-hop-structure)
(tramp-make-multi-tramp-file-format): Use them as default values.
On Emacs, use the *-unified variants, on XEmacs, use the
*-separate variants.  Tramp and Ange-FTP share a common filename
syntax on Emacs, but Tramp and EFS use separate filename syntaxes
on XEmacs.
(tramp-handle-ange-ftp): Removed.
(tramp-disable-ange-ftp): New function to disable Ange-FTP if
enabled.  Unconditionally call it at top level when file is
loaded.  This should be safe since XEmacs uses EFS.
----------------------------
revision 2.119
date: 2002-07-09 10:10:24 -0700;  author: kai;  state: Exp;  lines: +10 -0;
(tramp-handle-file-name-directory): Don't return "/"
for the root directory on a remote host.
----------------------------
revision 2.118
date: 2002-07-03 04:17:17 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(tramp-send-eof): Doc string typo.
(tramp-kill-process): Likewise.
From Juanma Barranquero <lektu@terra.es>.
----------------------------
revision 2.117
date: 2002-07-02 02:29:23 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-ange-ftp): Add todo items for handling
EFS, too.
----------------------------
revision 2.116
date: 2002-06-27 08:42:30 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-handle-ange-ftp): New function to set up Tramp
configuration suitable for replacing Ange-FTP.
(tramp-repair-jka-compr): Factor out some previously top-level
code into an extra function.  Also call it at top-level.
----------------------------
revision 2.115
date: 2002-06-26 06:22:20 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-wait-for-regexp, tramp-wait-for-output): Convert int to
string before passing it to `insert'.
----------------------------
revision 2.114
date: 2002-06-26 03:56:26 -0700;  author: kai;  state: Exp;  lines: +15 -0;
*** empty log message ***
----------------------------
revision 2.113
date: 2002-06-25 13:03:54 -0700;  author: kai;  state: Exp;  lines: +3 -0;
* tramp.texi (External transfer methods, Inline methods):
Document the "-p" hack for ssh.

* lisp/tramp.el (tramp-version): New version 2.0.1.
----------------------------
revision 2.112
date: 2002-06-25 11:01:21 -0700;  author: kai;  state: Exp;  lines: +6 -0;
2.0.1 release note.
----------------------------
revision 2.111
date: 2002-06-24 07:43:45 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-handle-file-truename): Don't invoke Ange-FTP.
(tramp-invoke-ange-ftp): Remove superfluous IDX-LIST argument.
Callers changed.
----------------------------
revision 2.110
date: 2002-06-24 07:38:54 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(tramp-handle-file-truename): Don't invoke Ange-FTP.
----------------------------
revision 2.109
date: 2002-06-24 06:51:14 -0700;  author: kai;  state: Exp;  lines: +18 -0;
(tramp-ftp-method): New user option.
(with-parsed-tramp-file-name): New macro for the usual big `let'
statement to dissect a file-name.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-truename, tramp-handle-file-directory-p)
(tramp-handle-file-regular-p, tramp-handle-file-symlink-p)
(tramp-handle-file-writable-p, tramp-handle-file-writable-p): Use
the new macro and forward call to Ange-FTP if applicable.
(tramp-make-ange-ftp-file-name): New helper function to convert a
file name into an Ange-FTP file name, used by
`tramp-invoke-ange-ftp'.
(tramp-invoke-ange-ftp): New function to forward calls to
Ange-FTP.
----------------------------
revision 2.108
date: 2002-06-20 09:38:00 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-default-method-alist): New user option.
(tramp-find-default-method): Use it.
----------------------------
revision 2.107
date: 2002-06-19 04:40:22 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-sh-extra-args): New variable.
(tramp-find-shell): Use it.
----------------------------
revision 2.106
date: 2002-06-16 09:20:22 -0700;  author: kai;  state: Exp;  lines: +4 -0;
New todo item.
----------------------------
revision 2.105
date: 2002-06-15 10:44:15 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* Makefile (savannah): Don't echo the echo commands.

* tramp.texi (Obtaining @tramp{}): Use `@@' for a literal at sign.

* tramp.el (tramp-handle-file-truename): Lower numchase-limit
(max number of symlink traversals) from 30 to 20.
----------------------------
revision 2.104
date: 2002-06-14 06:31:53 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-bug-report-address): Change bug reporting
address to Savannah.
----------------------------
revision 2.103
date: 2002-06-10 08:17:29 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-methods): New method "fcp".  Suggested by
graydon@redhat.com.
----------------------------
revision 2.102
date: 2002-06-05 01:57:08 -0700;  author: kai;  state: Exp;  lines: +7 -0;
Sync with latest SourceForge changes.
----------------------------
revision 2.101
date: 2002-05-22 02:23:36 -0700;  author: kaig;  state: Exp;  lines: +9 -0;
(tramp-find-shell, tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-multi, tramp-multi-connect-telnet)
(tramp-multi-connect-rlogin)
(tramp-open-connection-setup-interactive-shell): Shell prompt
must match at end of buffer.
----------------------------
revision 2.100
date: 2002-05-21 03:48:43 -0700;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-send-linewise): Use sleep-for instead of sit-for
to wait 0.1s.  sit-for does not wait if the user types ahead.
----------------------------
revision 2.99
date: 2002-05-20 03:16:41 -0700;  author: kaig;  state: Exp;  lines: +4 -0;
* tramp.el (tramp-send-linewise): Wait 0.1s instead of 0.001s.
----------------------------
revision 2.98
date: 2002-05-19 14:30:15 -0700;  author: kaig;  state: Exp;  lines: +10 -0;
* tramp.el (tramp-send-linewise): New function.
(tramp-post-connection): Use it for sending long strings.
----------------------------
revision 2.97
date: 2002-04-14 08:52:38 -0700;  author: kaig;  state: Exp;  lines: +5 -0;
* tramp.texi (External transfer methods): Document the `pscp'
method.

* tramp.el (tramp-methods): New method "pscp".  Suggestion from
lawrence mitchell.
----------------------------
revision 2.96
date: 2002-04-14 05:30:35 -0700;  author: kaig;  state: Exp;  lines: +6 -0;
* tramp.texi (Inline methods): Document the `km', `plinku' and
`plinkm' methods.

* tramp.el (file-expand-wildcards): Advise it even on Emacs 21.
(tramp-methods): New methods "plinku" and "plinkm".
"plinku" was suggested by Adam Przepiórkowski.
----------------------------
revision 2.95
date: 2002-04-10 10:16:25 -0700;  author: kaig;  state: Exp;  lines: +7 -0;
(tramp-shell-quote-argument): When calling
shell-quote-argument internally, make sure it uses Unix-like
behavior, not Windows-like behavior.  (This is done by binding
system-type, which is certainly not the right way to do it!)
----------------------------
revision 2.94
date: 2002-03-25 08:32:36 -0800;  author: kaig;  state: Exp;  lines: +4 -3;
*** empty log message ***
----------------------------
revision 2.93
date: 2002-03-25 08:30:02 -0800;  author: kaig;  state: Exp;  lines: +1 -0;
(tramp-handle-expand-file-name): Erase buffer after expanding tilde.
----------------------------
revision 2.92
date: 2002-03-25 01:29:39 -0800;  author: kaig;  state: Exp;  lines: +7 -0;
(tramp-handle-add-name-to-file): Use "ln" connection
property instead of literal "ln" in command.
(tramp-post-connection): Only set "ln" connection property if
that program could be found.  Erase buffer when done.
----------------------------
revision 2.91
date: 2002-03-12 02:07:47 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-post-connection): Make sure to leave an empty
connection buffer on exit.
----------------------------
revision 2.90
date: 2002-03-06 03:54:26 -0800;  author: kaig;  state: Exp;  lines: +17 -0;
(tramp-handle-make-symbolic-link)
(tramp-handle-directory-files)
(tramp-handle-file-name-all-completions)
(tramp-handle-dired-call-process, tramp-handle-insert-directory)
(tramp-handle-expand-file-name, tramp-handle-shell-command): Make
sure to "cd" back to the home dir.  Otherwise, previous commands
could affect future commands because of the wrong cwd.
(tramp-shell-quote-argument): Don't invoke substring on short
strings.
----------------------------
revision 2.89
date: 2002-03-03 08:47:28 -0800;  author: kaig;  state: Exp;  lines: +6 -0;
(top-level): Require cl when compiling.  This
fixes problems with byte-compiling under Emacs 20.  Reported by
Yoichi NAKAYAMA <yoichi@eken.phys.nagoya-u.ac.jp>.
----------------------------
revision 2.88
date: 2002-03-01 03:30:54 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-post-connection): Issue message when checking
encoding/decoding commands is finished.
----------------------------
revision 2.87
date: 2002-02-18 07:17:19 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(file-expand-wildcards): Make sure that the return
value is always a list.
----------------------------
revision 2.86
date: 2002-02-11 17:49:50 -0800;  author: youngs;  state: Exp;  lines: +9 -0;
2002-02-12  Steve Youngs  <youngs@xemacs.org>

	* tramp.el (tramp-handle-insert-directory): Change "#'identity" to
	"'identity" it was causing a invalid read syntax error that edebug
	brought to the surface.
	Add a "." after directory name so that symlinked directories
	display properly on platforms that have breakage on symlinks like
	Solaris.
----------------------------
revision 2.85
date: 2002-02-08 00:29:59 -0800;  author: kaig;  state: Exp;  lines: +7 -0;
(file-expand-wildcards): Improve the kludge by looking
if the path name part of the filename contains wildcard
characters at all.  If this is not the case, we avoid calling the
original function at all.
----------------------------
revision 2.84
date: 2002-02-01 04:25:08 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-handle-verify-visited-file-modtime): When the
file does not exist, it is not modified.
----------------------------
revision 2.83
date: 2002-01-31 09:37:08 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-handle-verify-visited-file-modtime): Don't use
modtime from `file-attributes' if it is nil.
----------------------------
revision 2.82
date: 2002-01-25 01:06:26 -0800;  author: kaig;  state: Exp;  lines: +6 -0;
Define a flag USE_CONTRIB which adds the local contrib
directory to the load-path if set.  Use suffix rules.  From
Norbert Koch <nk@LF.net>.
----------------------------
revision 2.81
date: 2002-01-22 09:24:23 -0800;  author: kaig;  state: Exp;  lines: +3 -0;
(tramp-kill-process): New function.
(tramp-post-connection): Kill connection process if something
goes wrong.
----------------------------
revision 2.80
date: 2002-01-22 04:43:31 -0800;  author: kaig;  state: Exp;  lines: +4 -0;
(tramp-handle-insert-file-contents): Remove debug message
referring to `last-coding-system-used' -- it does not exist on
all Emacsen.
(toplevel): New todo item.
----------------------------
revision 2.79
date: 2002-01-22 04:39:05 -0800;  author: kaig;  state: Exp;  lines: +2 -0;
(tramp-handle-file-local-copy): Use tramp-message-for-buffer, not
tramp-message.
----------------------------
revision 2.78
date: 2002-01-21 23:39:06 -0800;  author: kaig;  state: Exp;  lines: +3 -0;
(tramp-handle-insert-file-contents): Use
tramp-message-for-buffer, not tramp-message.
(tramp-message): Prefix all messages with "tramp:".
----------------------------
revision 2.77
date: 2002-01-21 23:34:03 -0800;  author: kaig;  state: Exp;  lines: +6 -0;
* tramp.el (tramp-handle-set-visited-file-modtime): Save
`last-coding-system-used' in a way that works even if the
variable is not defined.

* Makefile (xemacs): New target: copy stuff to the XEmacs package
source directory.
----------------------------
revision 2.76
date: 2002-01-21 02:54:42 -0800;  author: kaig;  state: Exp;  lines: +7 -0;
(top-level, tramp-run-real-handler, efs-ftp-path):
Disable special handling for ange-ftp and EFS.  This was only
needed when Tramp names also matched the ange-ftp filename regexp.
This experimental change only comments out the relevant sections.
----------------------------
revision 2.75
date: 2002-01-20 08:39:39 -0800;  author: kaig;  state: Exp;  lines: +2 -0;
* tramp.texi (External transfer methods): Document double use of
`-t' for the `scpx' method.  Explain why it is useful for Windows
users.
(Inline methods): Ditto for the `smx' method.

* tramp.el: Remove some todo items which are done.
(tramp-methods): Use doubled `-t -t' for `scpx' and `smx'
methods.
----------------------------
revision 2.74
date: 2002-01-20 02:57:31 -0800;  author: kaig;  state: Exp;  lines: +4 -0;
Remove some todo items which are done.
----------------------------
revision 2.73
date: 2002-01-20 02:42:05 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-handle-set-visited-file-modtime): Take care to not clobber
`last-coding-system-used' -- it would confuse jka-compr.
----------------------------
revision 2.72
date: 2002-01-20 00:30:00 -0800;  author: kaig;  state: Exp;  lines: +10 -0;
(tramp-handle-write-region): When calling
`write-region' to write the temp file, pass `no-message' for
VISIT.  If our own VISIT arg is true, we explicitly call
`set-visited-file-modtime' later on.  If we pass VISIT=t when
writing the temp file, the visited-file-modtime information of
the buffer is clobbered by a local time, which will bite us when
the local and remote times are out of sync.
----------------------------
revision 2.71
date: 2002-01-19 11:22:12 -0800;  author: kaig;  state: Exp;  lines: +3 -1;
*** empty log message ***
----------------------------
revision 2.70
date: 2002-01-19 11:21:11 -0800;  author: kaig;  state: Exp;  lines: +3 -0;
(tramp-time-diff): `itimer-time-difference' expects three-element
lists; pad short lists when calling that function.  Reported by
Skip Montanaro <skip@pobox.com>.
----------------------------
revision 2.69
date: 2002-01-19 04:13:34 -0800;  author: kaig;  state: Exp;  lines: +2 -0;
(tramp-handle-verify-visited-file-modtime): Allow 1 sec
difference between times.
----------------------------
revision 2.68
date: 2002-01-19 04:00:21 -0800;  author: kaig;  state: Exp;  lines: +2 -0;
(tramp-handle-set-visited-file-modtime): If time-list is
provided, call real handler with that data.
----------------------------
revision 2.67
date: 2002-01-19 03:38:54 -0800;  author: kaig;  state: Exp;  lines: +6 -0;
(clear-visited-file-modtime): Advise this function; it
does not support filename handlers.  Set the Lisp variable that
we use for emulating modtime back to nil.
----------------------------
revision 2.66
date: 2002-01-10 02:30:29 -0800;  author: kaig;  state: Exp;  lines: +8 -0;
(tramp-handle-expand-file-name): Bind
directory-sep-char to "/" so that XEmacs on Windows does the
right thing.
(tramp-handle-file-truename): Return trailing "/" if input had
trailing "/".
----------------------------
revision 2.65
date: 2002-01-06 06:02:38 -0800;  author: kaig;  state: Exp;  lines: +6 -0;
(tramp-handle-file-truename): Use
`tramp-method-for-buffer' to make sure that log messages end up
in the right buffer.  Correct braino in symlink handling.
----------------------------
revision 2.64
date: 2002-01-05 04:27:57 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-split-string): New compat function.
(tramp-handle-file-truename): Use it.
----------------------------
revision 2.63
date: 2002-01-04 09:55:12 -0800;  author: kaig;  state: Exp;  lines: +2 -0;
(tramp-find-shell): If starting bash for tilde
expansion, provide `--norc' argument.
(tramp-handle-file-truename): More debugging output.  More Obiwan
errors.
----------------------------
revision 2.62
date: 2002-01-04 09:28:52 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-find-shell): If starting bash for tilde
expansion, provide `--norc' argument.
----------------------------
revision 2.61
date: 2002-01-02 08:51:08 -0800;  author: youngs;  state: Exp;  lines: +5 -0;
2002-01-03  Steve Youngs  <youngs@xemacs.org>

	* tramp.el (tramp-find-shell): Change order for choice of shell,
	put bash first.
----------------------------
revision 2.60
date: 2002-01-02 06:14:28 -0800;  author: kaig;  state: Exp;  lines: +6 -0;
(tramp-handle-file-truename): Another Obiwan error.
For relative symlinks "/a/b" pointing to "c/d", the "b" part
should not be part of the truename.
----------------------------
revision 2.59
date: 2002-01-01 11:51:18 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-handle-file-truename): Obiwan error.
(tramp-process-actions): New function.  Doesn't do anything yet.
----------------------------
revision 2.58
date: 2001-12-30 12:06:06 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
*** empty log message ***
----------------------------
revision 2.57
date: 2001-12-30 08:57:23 -0800;  author: kaig;  state: Exp;  lines: +2 -0;
(tramp-remote-path): Add /usr/contrib/bin.
Reported by Jason Mastaler.
----------------------------
revision 2.56
date: 2001-12-30 08:53:34 -0800;  author: kaig;  state: Exp;  lines: +7 -0;
(tramp-post-connection): Use parens around "test / -nt
/" command to find out if `test' supports the `-nt' switch.
Without the parens, /bin/sh as of BSD/OS 4.x crashes.
Reported by Jason Mastaler.
----------------------------
revision 2.55
date: 2001-12-29 14:06:29 -0800;  author: kaig;  state: Exp;  lines: +7 -0;
* Makefile (tramp.elc): Remove superfluous dependencies.

* tramp-vc.el (tramp-vc-workfile-unchanged-p): Supply two args to
vc-default-workfile-unchanged-p.

* tramp-util.el (tramp): Require tramp.
----------------------------
revision 2.54
date: 2001-12-29 13:21:57 -0800;  author: kaig;  state: Exp;  lines: +2 -0;
(tramp-find-ls-command): Look for `gls' in addition to `ls' and
`gnuls' binaries.
----------------------------
revision 2.53
date: 2001-12-29 13:13:39 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-check-ls-command): Return status of command to
check if ls supports the `-n' option should be zero, not non-nil.
----------------------------
revision 2.52
date: 2001-12-28 13:52:46 -0800;  author: kaig;  state: Exp;  lines: +6 -0;
(tramp-post-connection): Move comment.  Check to see if
decoding and encoding commands work, if given in method
definition.
----------------------------
revision 2.51
date: 2001-12-27 23:07:46 -0800;  author: kaig;  state: Exp;  lines: +6 -0;
(tramp-file-name-handler-alist): New entry for
`file-truename'.
(tramp-handle-file-truename): New function.
----------------------------
revision 2.50
date: 2001-12-27 09:28:08 -0800;  author: kaig;  state: Exp;  lines: +16 -0;
(tramp-handle-set-visited-file-modtime): More error checking.  If
`file-attributes' returns modtime (0 0), then assume modtime isn't
known and revert to using `ls -ild'.  Previously, we checked if
Perl was available.
(tramp-handle-verify-visited-file-modtime): Check for modtime
being (0 0), rather than Perl being available.
(tramp-handle-write-region): Some sanity checking: make sure that
current buffer isn't changed while the function runs.  (Maybe this
is not necessary now?)  Only set-visited-file-modtime if VISIT is
t (used to check for non-nil).
(tramp-make-auto-save-file-name): Construct a local filename, then
run `make-auto-save-file-name' on it.  This makes sure that no
filename handlers will be run on that file.  (Specifically, this
avoids jka-compr -- we want auto-save files to be saved quickly.
This fixes the change from 2001-12-07 which aimed at doing the
same thing, but failed.)
----------------------------
revision 2.49
date: 2001-12-27 08:21:26 -0800;  author: kaig;  state: Exp;  lines: +6 -0;
(toplevel): Don't barf if jka-compr is already loaded.
Instead, make sure that jka-compr comes first in
file-name-handler-alist.
----------------------------
revision 2.48
date: 2001-12-26 11:35:13 -0800;  author: kaig;  state: Exp;  lines: +19 -0;
(tramp-buffer-file-attributes): Doc string fix.
(tramp-handle-set-visited-file-modtime): Don't barf if called
without arguments.  Use output of "ls -ild", not return value of
file-attributes, for tramp-buffer-file-attributes.
(tramp-handle-verify-visited-file-modtime): Use output of "ls
-ild", not return value of file-attributes, for
tramp-buffer-file-attributes.
(tramp-handle-insert-file-contents): Call set-visited-file-modtime
without args.
(tramp-handle-insert-file-contents): Ditto.
(tramp-handle-write-region): Pass VISIT arg on to call of real
handler.  (The old code of passing the `no-message' symbol instead
was a little strange -- an XEmacsism?)
(tramp-handle-write-region): Call set-visited-file-modtime, if
VISIT.
Remove some todo items.
----------------------------
revision 2.47
date: 2001-12-25 13:38:53 -0800;  author: kaig;  state: Exp;  lines: +7 -0;
(tramp-buffer-file-attributes): New variable.
(tramp-handle-set-visited-file-modtime): Use it in case the
remote end does not give us the right modtime.
(tramp-handle-verify-visited-file-modtime): Implementation.
----------------------------
revision 2.46
date: 2001-12-07 04:00:39 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-make-auto-save-file-name): Append "~" to
auto-save file name; this avoids jka-compr when auto-saving.
----------------------------
revision 2.45
date: 2001-11-30 00:59:41 -0800;  author: kaig;  state: Exp;  lines: +7 -0;
(tramp-handle-file-name-all-completions): Return nil
if filename contains a slash.
(tramp-handle-directory-file-name): New implementation.  From
Philippe Troin <phil@fifi.org>.
----------------------------
revision 2.44
date: 2001-11-20 09:58:54 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(toplevel): Emit an error message if jka-compr is
already loaded.
----------------------------
revision 2.43
date: 2001-11-08 08:46:57 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-compile): Use
`tramp-handle-shell-command', not `shell-command'.
----------------------------
revision 2.42
date: 2001-11-07 06:38:28 -0800;  author: kaig;  state: Exp;  lines: +8 -0;
* tramp-util.el (tramp-compile): Make sure default-directory is
set correctly.

* tramp.el (tramp-post-connection): Don't send Perl `mime-encode'
and `mime-decode' implementations unless really needed.
----------------------------
revision 2.41
date: 2001-11-02 08:58:28 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
(file-expand-wildcards): Advise this function to work
around a problem in Emacs 20.x.  This is just a kludge!
----------------------------
revision 2.40
date: 2001-10-16 02:56:58 -0700;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-open-connection-su): Make sure that user name is
given.
----------------------------
revision 2.39
date: 2001-10-10 04:56:16 -0700;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-handle-file-name-directory): Return "/" if
`path' component is empty.
----------------------------
revision 2.38
date: 2001-10-01 08:21:52 -0700;  author: kaig;  state: Exp;  lines: +4 -0;
(tramp-file-name-structure): Allow dot in host names.
----------------------------
revision 2.37
date: 2001-09-29 13:01:01 -0700;  author: kaig;  state: Exp;  lines: +5 -0;
(tramp-file-name-structure): Make regexp less
restrictive to allow multi-hop filenames.
----------------------------
revision 2.36
date: 2001-09-27 09:44:05 -0700;  author: kaig;  state: Exp;  lines: +4 -0;
(tramp-bug): Report more info about multi-hop methods.
----------------------------
revision 2.35
date: 2001-09-24 10:42:38 -0700;  author: kaig;  state: Exp;  lines: +4 -0;
(tramp-compile): require compile.
----------------------------
revision 2.34
date: 2001-09-20 06:29:07 -0700;  author: kaig;  state: Exp;  lines: +5 -0;
* tramp.texi (Module): New filenames.  Moved to SourceForge.

* tramp.el (tramp-bug-report-address): Update to reflect move to
SourceForge.
----------------------------
revision 2.33
date: 2001-09-08 15:24:27 -0700;  author: kaig;  state: Exp;  lines: +4 -0;
(Module): Add a todo item.
----------------------------
revision 2.32
date: 2001-08-31 10:22:19 -0700;  author: grossjoh;  state: Exp;  lines: +8 -0;
(tramp2-setup-coding-system): Find a good coding
system in extra function so it can be customized via
tramp2-setup-functions.
(tramp2-execute-local): Set TERM to dumb, just to be on the safe
side.
----------------------------
revision 2.31
date: 2001-08-11 15:02:36 -0700;  author: grossjoh;  state: Exp;  lines: +7 -0;
Default file name format changed again.  This time,
it's like /[method/user@host]/path/to/file.  The user@ part is
optional.  Multihop files are like
/[multiu/telnet:user@host/ssh:user2@host2]/path/to/file.
----------------------------
revision 2.30
date: 2001-08-05 13:39:54 -0700;  author: grossjoh;  state: Exp;  lines: +9 -0;
* tramp.el: Default file name format changed!  File names with
default method have changed from /r:user@host:/path/to/file to
/./user@host:/path/to/file.  Files with explicitly specified
method have changed from /r@meth:user@host:/path/to/file to
/./@meth:user@host:/path/to/file.  (Note one more colon for method
spec!)

* tramp.texi: New default file name format.
* tramp_ja.texi: Ditto.
----------------------------
revision 2.29
date: 2001-07-31 06:12:23 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-barf-unless-okay): Add new arg `signal' and
signal that signal rather than calling `error'.
----------------------------
revision 2.28
date: 2001-07-13 02:34:13 -0700;  author: grossjoh;  state: Exp;  lines: +13 -0;
(Multi-hop Methods): Say how to customize multi-hop
connection methods.  Provide example.
----------------------------
revision 2.27
date: 2001-06-03 11:41:29 -0700;  author: grossjoh;  state: Exp;  lines: +7 -0;
(tramp-handle-write-region): Use "<<EOF" style of sending file
contents on standard input.  It seems the old way of omitting
"<<EOF" from the command, then using process-send-eof to indicate
end of file, sent an `exit' command to the shell.  This also
happens when sending an explicit Ctrl-D character.  This appears
to be needed for the `suu' method (while it is not needed for the
`sm' method).  Go figure.
----------------------------
revision 2.26
date: 2001-06-03 06:29:42 -0700;  author: grossjoh;  state: Exp;  lines: +4 -0;
(tramp-handle-delete-file): Signal file error if deletion failed.
This depends on `rm -f' on the remote end to set the exit status
correctly.  This does not provide a meaningful message.  How do we
extract the error message from `rm -f' from the buffer?
----------------------------
revision 2.25
date: 2001-06-03 06:14:44 -0700;  author: grossjoh;  state: Exp;  lines: +2 -0;
(tramp-handle-write-region): Remove superfluous `echo hello'
command which clobbers the exit status.
----------------------------
revision 2.24
date: 2001-06-03 05:57:09 -0700;  author: grossjoh;  state: Exp;  lines: +1 -0;
(tramp-find-executable): Remove superfluous newline.
----------------------------
revision 2.23
date: 2001-06-03 05:43:34 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-send-eof): Always send a literal Ctrl-D, even if
client is Windows.
----------------------------
revision 2.22
date: 2001-05-28 13:11:25 -0700;  author: grossjoh;  state: Exp;  lines: +7 -0;
*** empty log message ***
----------------------------
revision 2.21
date: 2001-05-28 13:07:54 -0700;  author: grossjoh;  state: Exp;  lines: +4 -0;
*** empty log message ***
----------------------------
revision 2.20
date: 2001-05-28 08:00:38 -0700;  author: yyamano;  state: Exp;  lines: +8 -1;
Add new `smp' method by Mark A. Hershberger <mah@everybody.org>.
----------------------------
revision 2.19
date: 2001-05-28 02:54:48 -0700;  author: grossjoh;  state: Exp;  lines: +6 -0;
(tramp-open-connection-setup-interactive-shell): Do
`stty kill ^U' in case some system sets it to `@'.  Remove the
`stty erase ^?' from yesterday.
----------------------------
revision 2.18
date: 2001-05-27 06:35:26 -0700;  author: grossjoh;  state: Exp;  lines: +7 -0;
(tramp-open-connection-setup-interactive-shell): Do
`stty erase ^?' in case some system sets it to `@'.  Suggested by
Stefan Monnier.
----------------------------
revision 2.17
date: 2001-05-25 02:46:39 -0700;  author: grossjoh;  state: Exp;  lines: +6 -0;
(tramp-send-command-and-check): Add a space in the
shell command.  Suggested by Yuji Yamao.  (I don't really
understand this.)
----------------------------
revision 2.16
date: 2001-05-02 15:15:31 -0700;  author: grossjoh;  state: Exp;  lines: +2 -0;
(tramp-file-name-structure): Allow uppercase characters in file
names.  [Would it have been better to bind case-fold-search?]
----------------------------
revision 2.15
date: 2001-05-02 15:12:36 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-bug): Typo in variables list.  Only include
backup-by-copying-when-privileged-mismatch if bound.
----------------------------
revision 2.14
date: 2001-04-24 08:38:12 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-do-copy-or-rename-file): When moving, be sure to
delete the old file in all cases.
----------------------------
revision 2.13
date: 2001-04-23 13:15:19 -0700;  author: grossjoh;  state: Exp;  lines: +6 -0;
(tramp-send-command-and-check): `2>/dev/null'
(tramp-check-ls-command): Don't `2>/dev/null', this is done in
tramp-send-command-and-check.
----------------------------
revision 2.12
date: 2001-04-13 09:35:10 -0700;  author: grossjoh;  state: Exp;  lines: +2 -0;
(tramp-find-executable): Be extra careful when searching for
executables, include sentinel string to search for.
----------------------------
revision 2.11
date: 2001-04-12 16:45:27 -0700;  author: grossjoh;  state: Exp;  lines: +7 -0;
(tramp-open-connection-setup-interactive-shell): Posix
shells don't allow you to turn off the history, so we redirect it
to an innocuous file and limits that file's size as much as
possible.
----------------------------
revision 2.10
date: 2001-04-12 04:23:07 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-handle-write-region): Don't use here document,
just send encoded file on stdin.  Suggested by Stefan Monnier.
----------------------------
revision 2.9
date: 2001-03-16 01:24:46 -0800;  author: grossjoh;  state: Exp;  lines: +4 -0;
(tramp-multi-connect-su): Don't clobber `found'.
----------------------------
revision 2.8
date: 2001-03-14 13:46:43 -0800;  author: grossjoh;  state: Exp;  lines: +7 -0;
(tramp-methods, tramp-telnet-args): New method
parameter `tramp-telnet-args'.
(tramp-get-telnet-args): New function.
(tramp-open-connection-telnet): Use it.
----------------------------
revision 2.7
date: 2001-03-07 10:08:36 -0800;  author: grossjoh;  state: Exp;  lines: +17 -0;
(tramp-line-end-position): New implementation, moved to
beginning of file.
(tramp-multi-connect-rlogin): Unused variable `pw' deleted.
(tramp-discard-garbage-erase-buffer): More args.
(tramp-open-connection-setup-interactive-shell): Pass more args.
(tramp-wait-for-output): Unused variable `result' deleted.
(tramp-wait-for-output): Wrong variable.
(tramp-octal-to-decimal): Use `x'.
(tramp-get-rcp-args): Error message typo.
(tramp-temporary-file-directory): Pacify byte-compiler, use funcall.
----------------------------
revision 2.6
date: 2001-03-04 03:16:18 -0800;  author: grossjoh;  state: Exp;  lines: +6 -0;
* tramp.el (tramp-handle-file-directory-p): Use `test -d' rather
than `cd' to check if a file is a directory.  Suggested by Stefan
Monnier.
----------------------------
revision 2.5
date: 2001-03-03 10:59:47 -0800;  author: grossjoh;  state: Exp;  lines: +3 -0;
(tramp-verbose): New default value `10', it seems most people need
to set it to this value, anyway, to see what's happening.
Suggested by Michael Kifer.
----------------------------
revision 2.4
date: 2001-03-03 10:56:47 -0800;  author: grossjoh;  state: Exp;  lines: +3 -0;
(tramp-methods): New method `smx' which is like `sm' but
unconditionally starts /bin/sh on the remote end.  This might
avoid shell startup overhead.  Patch by Michael Kifer.
----------------------------
revision 2.3
date: 2001-03-03 03:32:48 -0800;  author: grossjoh;  state: Exp;  lines: +1 -0;
(tramp-methods): Expand documentation for `tramp-methods'.
----------------------------
revision 2.2
date: 2001-03-02 15:59:01 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-find-shell): Allow `$ ' as shell prompt after
starting a shell for tilde expansion.
----------------------------
revision 2.1
date: 2001-02-28 10:09:42 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-open-connection-rsh): Doc bug.  Reported by Tom
Roche.
----------------------------
revision 2.0
date: 2001-02-28 02:39:26 -0800;  author: grossjoh;  state: Exp;  lines: +0 -0;
branches:  2.0.2;
Going stable?
----------------------------
revision 1.50
date: 2001-02-28 02:33:30 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
*** empty log message ***
----------------------------
revision 1.49
date: 2001-02-23 14:20:09 -0800;  author: grossjoh;  state: Exp;  lines: +3 -0;
(tramp-find-executable): Avoid mentioning all directories on the
command line, instead send directory names on stdin.  Reported by
Paul Stevenson.
----------------------------
revision 1.48
date: 2001-02-23 13:13:36 -0800;  author: grossjoh;  state: Exp;  lines: +3 -1;
Patch by Francesco Potortì, slightly modified.
(tramp-discard-garbage): New variable.  When non-nil,
expect that remote shell sends some garbage on startup, and delete
it.
(tramp-discard-garbage-erase-buffer): New function.
(tramp-open-connection-setup-interactive-shell): Use it.
(tramp-methods): New method for Kerberos and mimencode.
----------------------------
revision 1.47
date: 2001-02-23 13:08:22 -0800;  author: grossjoh;  state: Exp;  lines: +8 -0;
(tramp-discard-garbage): New variable.  When non-nil,
expect that remote shell sends some garbage on startup, and delete
it.
(tramp-discard-garbage-erase-buffer): New function.
(tramp-open-connection-setup-interactive-shell): Use it.
----------------------------
revision 1.46
date: 2001-02-21 07:25:10 -0800;  author: grossjoh;  state: Exp;  lines: +6 -0;
(tramp-open-connection-setup-interactive-shell): Wait a
bit at the very beginning, in case the remote end feels like
sending some junk.  Reported by Francesco Potortì.
----------------------------
revision 1.45
date: 2001-02-20 02:02:33 -0800;  author: grossjoh;  state: Exp;  lines: +12 -0;
(tramp-open-connection-setup-interactive-shell): Also
`unset CDPATH' for the ksh users.  Reported by Jim Greer.
----------------------------
revision 1.44
date: 2001-02-18 02:37:39 -0800;  author: grossjoh;  state: Exp;  lines: +6 -0;
(tramp-find-executable): Use "test -x $f -a -f $f" to
find out whether it's an executable.  Suggestion from Francesco
Potortì.
----------------------------
revision 1.43
date: 2001-02-17 08:32:17 -0800;  author: grossjoh;  state: Exp;  lines: +4 -0;
* tramp-vc.el: Require vc-rcs for `vc-rcs-release' if necessary.
(tramp-vc-workfile-unchanged-p): Compatibility with old and new VC.
(vc-checkout): Avoid byte-compiler warning.

* tramp.el (tramp-open-connection-telnet): Remote login default to local
login, but only when actually sending the login name.  The other
functions (for buffer name and stuff) continue to pass `nil' for
the user.
----------------------------
revision 1.42
date: 2001-02-17 08:00:48 -0800;  author: grossjoh;  state: Exp;  lines: +4 -0;
(tramp-open-connection-telnet): Remote login default to local
login, but only when actually sending the login name.  The other
functions (for buffer name and stuff) continue to pass `nil' for
the user.
----------------------------
revision 1.41
date: 2001-02-16 16:43:05 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-find-executable): Make sure that file is not a
directory.  Reported by Ed Sabol.
----------------------------
revision 1.40
date: 2001-02-16 14:07:01 -0800;  author: grossjoh;  state: Exp;  lines: +5 -1;
New todo item.
(tramp-buffer-name, tramp-buffer-name-multi-method,
tramp-debug-buffer-name): Better buffer name format for omitted
user names.
----------------------------
revision 1.39
date: 2001-02-16 10:20:55 -0800;  author: grossjoh;  state: Exp;  lines: +2 -0;
(tramp-find-executable): Use a shell-based implementation for
tramp-find-executable.  Suggestion from Francesco Potortì.
----------------------------
revision 1.38
date: 2001-02-16 09:41:04 -0800;  author: grossjoh;  state: Exp;  lines: +6 -0;
(tramp-terminal-type): Don't hardwire $TERM value when
opening a connection to the remote host.  Suggestion from rand at
meridian-enviro dot com.
----------------------------
revision 1.37
date: 2001-01-18 15:21:00 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-handle-load): Call `load' on local copy with
fewer args for XEmacs compatibility.
----------------------------
revision 1.36
date: 2001-01-18 10:32:50 -0800;  author: grossjoh;  state: Exp;  lines: +7 -0;
(tramp-open-connection-telnet,
tramp-open-connection-rsh, tramp-open-connection-su,
tramp-open-connection-multi): Locally bind TERM env var to "dumb"
before starting the login on the remote host.
----------------------------
revision 1.35
date: 2001-01-13 04:32:17 -0800;  author: grossjoh;  state: Exp;  lines: +6 -0;
(tramp-handle-file-name-all-completions): Local
variable `dirs' not necessary anymore.  Kudos to Bruce Ingalls for
pointing this out.
----------------------------
revision 1.34
date: 2001-01-10 04:54:38 -0800;  author: grossjoh;  state: Exp;  lines: +9 -0;
(tramp-open-connection-setup-interactive-shell): `unset
HISTFILE' rather than `set -o history' to turn off the history.
Pete Forman says this works on bash1 and bash2, but not for ksh or
a Posix sh.  He also says there's no way to turn history off for
ksh and Posix shells, except by invoking non-interactively.  I
won't do that, though, because I need the prompts.
----------------------------
revision 1.33
date: 2001-01-03 06:32:26 -0800;  author: grossjoh;  state: Exp;  lines: +4 -0;
New version from Oort Gnus as of today.
----------------------------
revision 1.32
date: 2000-12-15 15:36:44 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-post-connection): Search for a shell before
finding a command to check if a file exists.
----------------------------
revision 1.31
date: 2000-11-17 19:28:17 -0800;  author: daniel;  state: Exp;  lines: +5 -0;
Commit my change to `tramp-handle-vc-user-login-name'; it should now work when
the user does not specify a login name.
----------------------------
revision 1.30
date: 2000-11-17 14:13:39 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-send-command-and-check): Send command and "echo
$?" as two separate commands.
----------------------------
revision 1.29
date: 2000-11-15 09:07:40 -0800;  author: grossjoh;  state: Exp;  lines: +3 -0;
(vc-user-login-name): Protect against `file' unbound.  (Assumes
local call in this case!)  Kudos to Hannu Koivisto for reporting
this.
----------------------------
revision 1.28
date: 2000-11-15 02:48:53 -0800;  author: grossjoh;  state: Exp;  lines: +10 -0;
* tramp.el (tramp-handle-shell-command): Return exit status.

* tramp-vc.el (tramp-vc-do-command): Return exit status.
(tramp-vc-do-command-new): For the new VC that comes with Emacs
21.
(tramp-handle-vc-user-login-name): User part of a Tramp file name
structure might be empty.
----------------------------
revision 1.27
date: 2000-11-09 08:51:37 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-methods): Change tramp-remote-sh to "/bin/sh"
from "" for the sudu and sudm methods.
----------------------------
revision 1.26
date: 2000-11-01 04:35:08 -0800;  author: grossjoh;  state: Exp;  lines: +2 -0;
(tramp-coding-system-change-eol-conversion): New compat function.
(tramp-open-connection-setup-interactive-shell): Use it.
----------------------------
revision 1.25
date: 2000-11-01 04:04:32 -0800;  author: grossjoh;  state: Exp;  lines: +6 -0;
(tramp-dos-coding-system): New variable.
(tramp-open-connection-telnet, tramp-open-connection-rsh,
tramp-open-connection-su, tramp-open-connection-multi): Use it.
----------------------------
revision 1.24
date: 2000-10-20 11:21:33 -0700;  author: grossjoh;  state: Exp;  lines: +10 -0;
(tramp-open-connection-telnet): Missed occurrences of
match-string.
(tramp-open-connection-rsh): Dito.
(tramp-open-connection-su): Dito.
(tramp-multi-connect-telnet): Dito.
(tramp-multi-connect-rlogin): Dito.
(tramp-multi-connect-su): Dito.
----------------------------
revision 1.23
date: 2000-10-20 06:17:56 -0700;  author: grossjoh;  state: Exp;  lines: +8 -0;
(tramp-open-connection-telnet): Don't bind
`coding-system-for-read' on Emacs 21.
(tramp-open-connection-rsh): Dito.
(tramp-open-connection-su): Dito.
(tramp-open-connection-multi): Dito.
----------------------------
revision 1.22
date: 2000-10-20 06:06:17 -0700;  author: grossjoh;  state: Exp;  lines: +13 -0;
(tramp-wait-for-regexp): Return list of match-strings.
This way, communication with callers isn't done via global state.
(tramp-open-connection-telnet): Use it.
(tramp-open-connection-rsh): Dito.
(tramp-open-connection-su): Dito.
(tramp-multi-connect-telnet): Dito.
(tramp-multi-connect-rlogin): Dito.
(tramp-multi-connect-su): Dito.
(tramp-wait-for-output): From match data, compute list of
match-strings.  Used by tramp-wait-for-regexp.
----------------------------
revision 1.21
date: 2000-10-06 14:36:23 -0700;  author: grossjoh;  state: Exp;  lines: +4 -0;
(tramp-handle-load): Tentative first implementation.
----------------------------
revision 1.20
date: 2000-09-26 08:33:41 -0700;  author: grossjoh;  state: Exp;  lines: +18 -0;
(tramp-make-tramp-file-user-nil-format): New variable.
(tramp-open-connection-telnet): Work when USER is nil.
(tramp-open-connection-rsh): dito.
(tramp-open-connection-su): dito.
(tramp-multi-connect-telnet): dito.
(tramp-multi-connect-rlogin): dito.
(tramp-multi-connect-su): dito.
(tramp-make-rcp-program-file-name): dito.
(tramp-open-connection-multi): Don't grok default USER.
(tramp-pre-connection): Not changed.  tramp-current-user will be
set to nil when no user is given in the file name.
(tramp-dissect-multi-file-name): dito.
(tramp-dissect-file-name): Return nil when no user is given in
file name.
----------------------------
revision 1.19
date: 2000-09-25 04:28:01 -0700;  author: grossjoh;  state: Exp;  lines: +4 -0;
`An rcp file' --> `a tramp file', in various places.
----------------------------
revision 1.18
date: 2000-09-17 06:05:00 -0700;  author: grossjoh;  state: Exp;  lines: +10 -0;
(tramp-file-exists-command): New Variable.
(tramp-handle-file-exists-p): Use it.
(tramp-find-file-exists-command): New function to initialize new
variable.
(tramp-post-connection): Use it.
(tramp-get-file-exists-command): Access variable.
(tramp-bug): Report a few more variable settings.
----------------------------
revision 1.17
date: 2000-09-15 17:14:49 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-open-connection-setup-interactive-shell): Set
TERM=dumb as suggested by V. Balaji <vb@gfdl.gov>.
----------------------------
revision 1.16
date: 2000-09-14 08:11:20 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-methods): Method `scpx' was missing a setting
for `tramp-remote-sh'.
----------------------------
revision 1.15
date: 2000-09-09 12:48:21 -0700;  author: grossjoh;  state: Exp;  lines: +6 -0;
(tramp-handle-insert-directory): Try to improve the
logic as to what exactly is displayed.  The `/.' idea was snarfed
from the standard `insert-directory'.
----------------------------
revision 1.14
date: 2000-09-01 03:07:40 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
* tramp.el (tramp-file-name-structure): Move `-' to beginning of
[...].  Is this really necessary?  Well, it won't hurt.
----------------------------
revision 1.13
date: 2000-08-31 08:24:05 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
Hilko Bengen: (tramp-file-name-structure): Allow `-' in user names.
----------------------------
revision 1.12
date: 2000-08-29 09:46:20 -0700;  author: grossjoh;  state: Exp;  lines: +2 -0;
*** empty log message ***
----------------------------
revision 1.11
date: 2000-08-29 09:35:10 -0700;  author: grossjoh;  state: Exp;  lines: +13 -0;
*** empty log message ***
----------------------------
revision 1.10
date: 2000-08-24 10:20:36 -0700;  author: yyamano;  state: Exp;  lines: +6 -0;
Fix the following minor bug of tramp-perl-file-attributes.

> Also, this seems to have a (minor) bug WRT block devices and sockets. On my
> box, they report 'file' in the first value with the internal function, but
> as directories with this code. I still need to dig out why that is.
----------------------------
revision 1.9
date: 2000-08-24 10:18:39 -0700;  author: yyamano;  state: Exp;  lines: +5 -0;
Add "/usr/pkg/bin" to tramp-remote-path for NetBSD packages.
`packages' is the same as `ports' on FreeBSD and it is
installed in /usr/pkg by default.
----------------------------
revision 1.8
date: 2000-08-19 08:23:42 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
* tramp.el (tramp-multi-connect-su): Defer (erase-buffer) until
after the buffer contents are used.
----------------------------
revision 1.7
date: 2000-08-18 11:44:40 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
* tramp.el (tramp-pre-connection): Locally (to the connection
buffer) set inhibit-eol-conversion to nil.
----------------------------
revision 1.6
date: 2000-08-18 11:39:13 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
2000-08-18  KOIE Hidetaka  <hide@koie.org>

	* tramp.el (tramp-handle-insert-file-contents): Don't use
	`no-conversion' coding system on the local copy.
----------------------------
revision 1.5
date: 2000-08-18 11:33:06 -0700;  author: grossjoh;  state: Exp;  lines: +1 -0;
* tramp.el (tramp-handle-insert-directory): Make it work with
  wildcards, too.
----------------------------
revision 1.4
date: 2000-08-18 11:13:07 -0700;  author: grossjoh;  state: Exp;  lines: +3 -0;
* tramp.el (tramp-handle-make-directory): Correct order of arguments
for tramp-barf-unless-okay.  Maybe I should be using keyword arguments
in this case...
----------------------------
revision 1.3
date: 2000-08-18 10:57:03 -0700;  author: grossjoh;  state: Exp;  lines: +10 -2;
* tramp.el (tramp-handle-file-exists-p): Use `test -e', not `ls
-d'.
(tramp-open-connection-setup-interactive-shell),
(tramp-open-connection-telnet),
(tramp-open-connection-rsh),
(tramp-open-connection-su),
(tramp-open-connection-multi),
(tramp-multi-connect-telnet),
(tramp-multi-connect-telnet),
(tramp-multi-connect-rlogin),
(tramp-multi-connect-su): Erase buffer before sending next
command.
----------------------------
revision 1.2
date: 2000-08-18 10:45:29 -0700;  author: grossjoh;  state: Exp;  lines: +2 -0;
* tramp.el (tramp-open-connection-setup-interactive-shell): Erase buffer
before sending next command.
----------------------------
revision 1.1
date: 2000-08-18 10:35:20 -0700;  author: grossjoh;  state: Exp;
* tramp.el (tramp-handle-file-exists-p): Use `test -e', not `ls
-d'.
----------------------------
revision 2.0.2.6
date: 2001-07-16 02:54:51 -0700;  author: grossjoh;  state: Exp;  lines: +8 -0;
Merge with head as of 2001-07-15.
----------------------------
revision 2.0.2.5
date: 2001-06-15 04:45:16 -0700;  author: grossjoh;  state: Exp;  lines: +24 -0;
Merge from head.
----------------------------
revision 2.0.2.4
date: 2001-06-03 05:13:06 -0700;  author: grossjoh;  state: Exp;  lines: +111 -6;
Sync with head.
----------------------------
revision 2.0.2.3
date: 2001-03-28 13:44:35 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-handle-file-directory-p): Use `test -d', not
`cd', to find out if it's a directory.
----------------------------
revision 2.0.2.2
date: 2001-03-02 16:06:39 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-find-shell): Allow `$ ' as remote shell prompt,
too.  Reported by Tom Roche.
----------------------------
revision 2.0.2.1
date: 2001-02-28 10:10:36 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-open-connection-rsh): Doc bug.  Reported by Tom
Roche.
----------------------------
revision 2.172.2.5
date: 2002-09-05 13:14:32 -0700;  author: albinus;  state: Exp;  lines: +16 -2;

2002-09-05  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-postfix-single-method-format),
	(tramp-postfix-multi-method-format),
	(tramp-postfix-multi-hop-format),
	(tramp-postfix-user-format): New format strings.
	(tramp-postfix-single-method-regexp),
	(tramp-postfix-multi-method-regexp),
	(tramp-postfix-multi-hop-regexp),
	(tramp-postfix-user-regexp),
	(tramp-make-multi-tramp-file-format),
	(tramp-make-tramp-file-name): Apply them.
	(tramp-completion-handle-file-name-all-completions): Fix for
	invoking ange-ftp in case of "/ftp:xxx" file names.
----------------------------
revision 2.172.2.4
date: 2002-09-04 13:49:51 -0700;  author: albinus;  state: Exp;  lines: +49 -0;

2002-09-04  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-prefix-format),
	(tramp-postfix-host-format): New format strings. No need for other
	ones because the `*-regexp' can be used.
	(tramp-prefix-regexp),
	(tramp-method-regexp),
	(tramp-postfix-single-method-regexp),
	(tramp-postfix-multi-method-regexp),
	(tramp-postfix-multi-hop-regexp),
	(tramp-user-regexp),
	(tramp-postfix-user-regexp),
	(tramp-host-regexp),
	(tramp-postfix-host-regexp),
	(tramp-path-regexp): New atomar regular expressions. If
	corresponding format strings exist, derived from them.
	(tramp-file-name-structure),
	(tramp-multi-file-name-structure),
	(tramp-multi-file-name-hop-structure),
	(tramp-make-multi-tramp-file-format),
	(tramp-completion-mode),
	(tramp-completion-dissect-file-name),
	(tramp-parse-rhosts-group),
	(tramp-parse-shosts-group),
	(tramp-parse-hosts-group),
	(tramp-parse-passwd-group): Apply these expressions.
	(tramp-file-name-structure-unified),
	(tramp-file-name-structure-separate),
	(tramp-make-tramp-file-format-unified),
	(tramp-make-tramp-file-format-separate),
	(tramp-make-tramp-file-format),
	(tramp-make-tramp-file-user-nil-format-unified),
	(tramp-make-tramp-file-user-nil-format-separate),
	(tramp-make-tramp-file-user-nil-format),
	(tramp-multi-file-name-structure-unified),
	(tramp-multi-file-name-structure-separate),
	(tramp-multi-file-name-hop-structure-unified),
	(tramp-multi-file-name-hop-structure-separate),
	(tramp-make-multi-tramp-file-format-unified),
	(tramp-make-multi-tramp-file-format-separate): Removed.
	(tramp-make-tramp-file-name): Allow partial tramp file
	names. Generate tramp file format on-the-fly depending on
	parameters. Apply atomar format strings resp expressions.
	(tramp-get-completion-methods),
	(tramp-get-completion-user-host): Apply `tramp-make-tramp-file-name'.
	(tramp-parse-hosts-group): Take all host names and IP addresses
	into account.
	(tramp-bug): Remove `tramp-make-tramp-file-format'.
----------------------------
revision 2.172.2.3
date: 2002-09-01 12:17:59 -0700;  author: albinus;  state: Exp;  lines: +31 -0;

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-methods): Add `tramp-completion-function' for
	"su" and "sudo".
	(tramp-get-completion-telnet): Implement it.
	(tramp-parse-hosts),
	(tramp-parse-hosts-group),
	(tramp-get-completion-su),
	(tramp-parse-passwd),
	(tramp-parse-passwd-group): New functions.
	* tramp.texi (Dired): Mention method, user name and machine name
	completion.

2002-08-31  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): Check for `last-input-char'.
	(tramp-completion-file-name-handler-alist): Add handler
	for `file-exists-p.
	(tramp-completion-handle-file-exists-p): New function.
	(tramp-completion-handle-file-name-completion): Simplified.
	(tramp-completion-dissect-file-name): Regexp's reorganised.
	(tramp-completion-handle-file-name-all-completions): Call
	completion-function only if `user' or `host' is given.
	(tramp-get-completion-user-host): New function.
	(tramp-get-completion-rsh),
	(tramp-get-completion-ssh): Apply it.

2002-08-29  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-handler-alist): Add handler
	for `expand-file-name'.
	(tramp-completion-handle-expand-file-name): New function.
----------------------------
revision 2.172.2.2
date: 2002-08-26 14:18:38 -0700;  author: albinus;  state: Exp;  lines: +47 -0;

2002-08-26  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): New function.
	(tramp-completion-handle-file-name-directory),
	(tramp-completion-handle-file-name-all-completions): Apply it.
	(tramp-methods): Remove double definition of `ssh1-old' and
	`ssh2-old'.
	(tramp-point-at-eol): New defalias.
	(tramp-parse-rhosts-group),
	(tramp-parse-shosts-group):: Apply it.

2002-08-25  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-get-completion-methods),
	(tramp-get-completion-rsh),
	(tramp-get-completion-ssh): Add "[" for Xemacs.
	(tramp-completion-file-name-regexp-separate): Expression adapted.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-directory' and `file-name-nondirectory'.
	(tramp-completion-handle-file-name-directory),
	(tramp-completion-handle-file-name-nondirectory),
	(tramp-completion-run-real-handler): New functions.
	(tramp-completion-file-name-handler),
	(tramp-completion-handle-file-name-all-completions): Apply
	`tramp-completion-run-real-handler'.
	(tramp-parse-rhosts),
	(tramp-parse-shosts): Use `with-temp-buffer'. `result´ renamed to
	`res' (otherwise side effects in XEmacs).

2002-08-24  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-regexp),
	(tramp-completion-file-name-handler-alist),
	(tramp-flatten-list),
	(tramp-completion-dissect-file-name),
	(tramp-get-completion-rsh),
	(tramp-parse-rhosts),
	(tramp-parse-rhosts-group),
	(tramp-get-completion-ssh): Doc string tuned.
	(tramp-methods): Doc string and custom type extended for
	`tramp-completion-function'.
	(tramp-completion-function): Variable added. Is it really used?
	Other variables like `tramp-completion-function' aren't used.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-completion'.
	(tramp-completion-handle-file-name-completion): New function.
----------------------------
revision 2.172.2.1
date: 2002-08-20 12:33:49 -0700;  author: albinus;  state: Exp;  lines: +64 -0;
*** empty log message ***
----------------------------
revision 2.382.2.145
date: 2008-07-27 20:41:42 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: kfwNFwM1ZRM2owct;
*** empty log message ***
----------------------------
revision 2.382.2.144
date: 2008-06-11 10:26:22 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: DzhdwBWrOZ5Csy6t;
*** empty log message ***
----------------------------
revision 2.382.2.143
date: 2008-04-28 12:28:35 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: 3yrK8qpOLK4eyU0t;
*** empty log message ***
----------------------------
revision 2.382.2.142
date: 2008-04-27 02:39:23 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: x8hAARKns7Y5kJ0t;
*** empty log message ***
----------------------------
revision 2.382.2.141
date: 2008-04-09 12:53:26 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: 2rEYQ4nIo7zCitYs;
*** empty log message ***
----------------------------
revision 2.382.2.140
date: 2008-02-02 02:30:13 -0800;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: CFRWUqYa40KVkOPs;
*** empty log message ***
----------------------------
revision 2.382.2.139
date: 2008-02-02 02:27:31 -0800;  author: albinus;  state: Exp;  lines: +16 -0;  commitid: ikbjsSQNIk80kOPs;
*** empty log message ***
----------------------------
revision 2.382.2.138
date: 2007-10-31 13:41:53 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: eQbRU3AyiiKSJMDs;

* lisp/tramp.el (tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-multi): Set $LC_ALL to "C".
----------------------------
revision 2.382.2.137
date: 2007-10-06 08:13:26 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: 9UzcauBOw6L0JxAs;

* lisp/tramp.el (tramp-completion-mode): Extend doc-string.
(tramp-completion-mode-p): Revert change from 2007-09-24.
Checking for `return' etc as last character is not sufficient, for
example in dired-mode when entering <g> (revert-buffer) or
<s> (dired-sort).
----------------------------
revision 2.382.2.136
date: 2007-09-23 22:46:33 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: VEpQqnnraJNnYWys;

Replace `iff' in doc-strings and comments.
----------------------------
revision 2.382.2.135
date: 2007-09-23 22:24:39 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: iQqxIsTWbJOSQWys;

* lisp/tramp.el (tramp-completion-mode-p): Rename from
`tramp-completion-mode'. Revert logic, check `return', `newline'
and such alike. Packages like Icicles tend to use other completion
characters but `tab' and `space' only.
----------------------------
revision 2.382.2.134
date: 2007-09-06 14:21:15 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: xydKsrMMwKVYIIws;

* lisp/tramp-vc.el (tramp-vc-user-login-name): Use `vc-find-version'
instead of `process-file' to check whether we have a new enough vc
that doesn't need the defadvice.
----------------------------
revision 2.382.2.133
date: 2007-08-21 11:07:31 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: oEP1LQdxPuNtaEus;

* lisp/tramp-vc.el (tramp-vc-user-login-name): Get argument by
`ad-get-arg'.
----------------------------
revision 2.382.2.132
date: 2007-08-14 12:04:40 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: Y7AVB4MKIhlRHKts;

* lisp/tramp.el (top): Require cl.el, when `copy-tree' is not available
otherwise.
----------------------------
revision 2.382.2.131
date: 2007-08-07 12:52:03 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: oKChXHP6TTRjcRss;

* lisp/trampver.el.in: Fix the `coding' cookie.
----------------------------
revision 2.382.2.130
date: 2007-08-07 12:45:29 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: scZ29p6nNoaV9Rss;

* lisp/tramp.el (tramp-handle-file-remote-p): Handle optional parameter
IDENTIFICATION.
(tramp-file-name-handler): No special handling for
`expand-file-name'.  But for `file-name-as-directory'.
----------------------------
revision 2.382.2.129
date: 2007-07-25 12:37:30 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.382.2.128
date: 2007-07-16 13:08:35 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: RVCo01n1wQqGZ1qs;

* lisp/tramp.el (tramp-handle-file-remote-p): Handle optional parameter
CONNECTED.
----------------------------
revision 2.382.2.127
date: 2007-07-15 01:41:01 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: aM3x77bQBIEHdQps;

* configure.ac: Bump version (to 2.0.57-pre).  Update merge
version to 2.0.56.

* lisp/tramp.el (tramp-find-shell, tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-multi)
(tramp-open-connection-setup-interactive-shell): Guard against
$PROMPT_COMMAND shell var.  Reported by Steve Youngs
<steve@sxemacs.org>.
----------------------------
revision 2.382.2.126
date: 2007-06-16 00:55:56 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: YIf7F6AuY148U6ms;

* lisp/tramp.el (tramp-append-tramp-buffers): Replace "sensible" by
"sensitive" in the hint.
----------------------------
revision 2.382.2.125
date: 2007-06-10 13:54:42 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: pTNOe5lnTN1ippls;

* lisp/tramp.el (tramp-handle-insert-file-contents): VISIT must be
handled after insertion of the local copy.  Reported by Peter
Gordon <peter@pg-consultants.com>.
----------------------------
revision 2.382.2.124
date: 2007-05-28 01:49:42 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: 3AYYXUpQ30DuOFjs;

Version 2.0.56 released.
----------------------------
revision 2.382.2.123
date: 2007-05-27 08:43:52 -0700;  author: albinus;  state: Exp;  lines: +20 -1;  commitid: wsslTl4EbLwp8Ajs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-multi-method)
(tramp-file-name-method, tramp-file-name-user)
(tramp-file-name-host, tramp-file-name-localname): New defuns,
replacing defstruct `tramp-file-name'.
(tramp-handle-file-remote-p, tramp-completion-dissect-file-name1)
(tramp-dissect-file-name, tramp-dissect-multi-file-name): Apply
`vector' instead of `make-tramp-file-name'.
----------------------------
revision 2.382.2.122
date: 2007-04-16 13:27:02 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* tramp.el (top): Make `set-buffer-multibyte' an alias if it
doesn't exist.
----------------------------
revision 2.382.2.121
date: 2007-04-08 03:37:36 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-completion-mode): `last-input-event' is nil when
XEmacs is started.
----------------------------
revision 2.382.2.120
date: 2007-03-31 12:09:17 -0700;  author: albinus;  state: Exp;  lines: +13 -0;

* lisp/tramp.el (tramp-register-file-name-handler)
(tramp-register-completion-file-name-handler): New defsubst,
derived from `tramp-register-file-name-handlers'.  The split is
necessary because Tramp's file name handlers must be registered at
different startup places.
(tramp-completion-mode): `last-input-event' may have no
character approximation.
----------------------------
revision 2.382.2.119
date: 2007-03-21 14:44:24 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-handle-make-auto-save-file-name): Apply
`tramp-temporary-file-directory' for compatibility reasons.
----------------------------
revision 2.382.2.118
date: 2007-03-07 12:38:34 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-handle-insert-directory): Check (featurep 'ls-lisp).
----------------------------
revision 2.382.2.117
date: 2007-03-04 22:46:02 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-make-temp-file): New parameter FILENAME.  Append
its extension to the resulting temporary file name.
(tramp-handle-file-local-copy, tramp-handle-write-region): Apply
it.

* lisp/tramp-smb.el (tramp-smb-handle-file-local-copy)
(tramp-smb-handle-write-region): Apply it.
----------------------------
revision 2.382.2.116
date: 2007-02-11 22:12:57 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-get-ls-command, tramp-get-file-exists-command)
(tramp-get-remote-ln): Handle error case.  Reported by Chris Moore
<dooglus@gmail.com>.
----------------------------
revision 2.382.2.115
date: 2007-01-27 06:59:27 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-do-copy-or-rename-file-out-of-band): Set
default-directory to a sane value when calling start-process.
(tramp-perl-encode, tramp-perl-decode):	Update copyrights.
----------------------------
revision 2.382.2.114
date: 2007-01-18 12:33:19 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* tramp.el (with-parsed-tramp-file-name): Protect debug spec
during compilation.
----------------------------
revision 2.382.2.113
date: 2007-01-11 12:11:19 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-handle-file-local-copy): Set
`enable-multibyte-characters' to nil.  Reported by Chris Moore
<christopher.ian.moore@gmail.com>.
----------------------------
revision 2.382.2.112
date: 2007-01-08 20:59:44 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el: (tramp-process-one-action): Remove `with-timeout'.
(tramp-process-actions): Add optional parameter TIMEOUT.
(tramp-open-connection-telnet, tramp-open-connection-rsh)
(tramp-open-connection-su): Add timeout of 60".
----------------------------
revision 2.382.2.111
date: 2006-12-31 11:04:48 -0800;  author: albinus;  state: Exp;  lines: +6 -2;

* lisp/tramp.el (tramp-completion-mode): Use `natnump' instead of
`wholenump' because of XEmacs.
----------------------------
revision 2.382.2.110
date: 2006-12-31 06:37:22 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

Version 2.0.55 repackaged.
----------------------------
revision 2.382.2.109
date: 2006-12-30 07:15:39 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.0.55 released.
----------------------------
revision 2.382.2.108
date: 2006-12-21 12:09:14 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-completion-mode): Use `wholenump' instead of
`integerp'.  `char-equal' could fail else in case of negative
numbers.  Reported by Toby Speight <T.M.Speight.90@cantab.net>.
----------------------------
revision 2.382.2.107
date: 2006-12-20 13:20:14 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp.el (tramp-default-method): We still need to check for
`executable-find', because it is not bound under Emacs 20.
(tramp-handle-file-name-completion)
(tramp-completion-handle-file-name-completion): PREDICATE must be
applied on the expanded car's in `try-completion'.
----------------------------
revision 2.382.2.106
date: 2006-12-19 21:49:53 -0800;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.382.2.105
date: 2006-12-19 21:41:57 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-handle-file-name-completion)
(tramp-completion-handle-file-name-completion): Handle optional
parameter PREDICATE.
(tramp-find-default-method): Add code for default values.
----------------------------
revision 2.382.2.104
date: 2006-12-18 23:09:49 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (tramp-methods): Introduce new method `scpc'.  Remove
"ControlMaster" option from the other `scp*' methods.
(tramp-default-method): Check for ssh-agent before setting to
`scp'.
(top): Check for `font-lock-add-keywords' before calling; it
doesn't exist under XEmacs.

* texi/tramp.texi (External transfer methods): Describe new method
`scpc'.
----------------------------
revision 2.382.2.103
date: 2006-12-17 05:24:56 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-default-method): Before setting to "pscp", check
whether package password.el is loaded, or Pageant is running.
----------------------------
revision 2.382.2.102
date: 2006-12-03 22:57:03 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (tramp-methods): Add "ControlPath" and "ControlMaster"
to scp, scp1 and scp2 methods.  Suggested by Andreas Schwab
<schwab@suse.de>.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-open-connection-rsh): Compute format spec for ?t.
(tramp-process-actions): Trace command parameters.
----------------------------
revision 2.382.2.101
date: 2006-11-26 03:40:01 -0800;  author: albinus;  state: Exp;  lines: +16 -0;

* lisp/tramp.el (tramp-default-method): Under Windows, change from
plink to pscp.
(tramp-copy-failed-regexp, tramp-action-copy-failed): Add.
(tramp-yn-prompt-regexp): Fix regexp.
(tramp-actions-copy-out-of-band):
Add pair (tramp-copy-failed-regexp tramp-action-copy-failed).
(tramp-action-out-of-band): Move "Permission denied" handling to
tramp-action-copy-failed.
(tramp-do-copy-or-rename-file-out-of-band): unwind-protect killing of
process buffer.
----------------------------
revision 2.382.2.100
date: 2006-11-18 09:39:30 -0800;  author: albinus;  state: Exp;  lines: +12 -0;

* lisp/tramp.el (top): cl and custom are always required.
(tramp-unified-filenames): Doc fix.
----------------------------
revision 2.382.2.99
date: 2006-11-07 03:06:09 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-default-method): scp is the default method.

* texi/tramp.texi (Configuration): scp is the default method.
(Default Method): Use ssh as example for another method.
----------------------------
revision 2.382.2.98
date: 2006-11-05 11:49:45 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* tramp.el (with-parsed-tramp-file-name): Correct debug spec.
Highlight as keyword.
(tramp-do-copy-or-rename-file): Correct data for
'file-already-exists.  Don't call tramp-method-out-of-band-p for
local files.
(tramp-touch): Quote file name.
----------------------------
revision 2.382.2.97
date: 2006-10-21 06:40:49 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

* configure.ac: Bump version (to 2.0.55-pre).  Update merge
version to 2.0.54.

* lisp/tramp.el (tramp-yn-prompt-regexp): Add question from plink.
(tramp-completion-mode): Remove clause (not
tramp-unified-filenames), because the function is called in other
context too, where this check results in wrong results in the
XEmacs case on Windows.
(tramp-touch): UTC handling is not possible for XEmacs.
----------------------------
revision 2.382.2.96
date: 2006-08-28 22:21:38 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

Version 2.0.54 released.
----------------------------
revision 2.382.2.95
date: 2006-07-02 13:35:00 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-handle-shell-command): Preserve current-buffer.
----------------------------
revision 2.382.2.94
date: 2006-06-25 14:08:17 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-unload-tramp): Provide a doc string.
----------------------------
revision 2.382.2.93
date: 2006-06-15 15:01:28 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-touch): Use UTC to express time.
----------------------------
revision 2.382.2.92
date: 2006-05-28 11:35:07 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-register-file-name-handlers):
`partial-completion-mode' is unknown to XEmacs.
(tramp-time-diff): Don't use `floor', it might fail for large
differences.
----------------------------
revision 2.382.2.91
date: 2006-05-08 21:30:43 -0700;  author: albinus;  state: Exp;  lines: +7 -2;

* lisp/tramp.el (tramp-register-file-name-handlers): Enable Tramp
completion also when ido is loaded.
----------------------------
revision 2.382.2.90
date: 2006-05-06 15:08:04 -0700;  author: albinus;  state: Exp;  lines: +30 -0;

* configure.ac: Bump version (to 2.0.54-pre).  Update merge
version to 2.0.53.

* lisp/tramp.el (tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): That's a defsubst now.  Code
from `tramp-repair-jka-compr' moved here.  Register
`tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-repair-jka-compr): Remove.
(tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name): Remove them.
(tramp-completion-handle-file-name-all-completions):
Delete directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-completion-file-name-handler-alist): Delete
expand-file-name and other operations that can cause spurious loading.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
----------------------------
revision 2.382.2.89
date: 2006-04-23 14:53:53 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-handle-make-auto-save-file-name): For Emacs 21,
set `tramp-auto-save-directory' if unset in order to guarantee
unique auto-save file names.
(tramp-register-file-name-handlers): New defun.  Added with
autoload cookie.
(tramp-unload-file-name-handlers): Renamed from
`tramp-unload-file-name-handler-alist'.
----------------------------
revision 2.382.2.88
date: 2006-04-17 05:07:58 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.0.53 released.
----------------------------
revision 2.382.2.87
date: 2006-04-16 02:50:11 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-completion-mode): ?\t has event-modifier
'control.  Reported by Matthias Förste
<slashdevslashnull@gmx.net>.
----------------------------
revision 2.382.2.86
date: 2006-04-13 12:56:43 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-display-shell-command-buffer): New defvar.
(tramp-handle-shell-command): Display output buffer only when
`tramp-display-shell-command-buffer' is true.
(tramp-handle-process-file): Set `tramp-display-shell-command-buffer'.
----------------------------
revision 2.382.2.85
date: 2006-03-14 13:15:57 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

DESTDIR support
----------------------------
revision 2.382.2.84
date: 2006-02-12 12:18:06 -0800;  author: albinus;  state: Exp;  lines: +14 -0;

* tramp.el (tramp-remote-path): Add "/usr/xpg4/bin" on top,
because on Solaris a POSIX compatible "id" is needed.  Reported by
Magnus Henoch <mange@freemail.hu>.
(tramp-perl-encode, tramp-perl-decode): Adapt copyright years.
(tramp-maybe-open-connection): Do not wait for
output from a dead connection.

* tramp-uu.el, trampver.el.in: Adapt copyright years.
----------------------------
revision 2.382.2.83
date: 2006-02-01 14:23:21 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-convert-file-attributes): Set file's gid change
bit only when id-format is 'integer.  Reported by Matt Hodges
<M.P.Hodges@rl.ac.uk>.
----------------------------
revision 2.382.2.82
date: 2006-01-30 12:56:56 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp-smb.el (tramp-smb-wait-for-output): Wait always for the
prompt.  If it returns earlier (when detecting an error message),
the rest of the output will merge accidently with the output of
the next command.  Reported by M Jared Finder <jared@hpalace.com>.
----------------------------
revision 2.382.2.81
date: 2006-01-27 13:55:22 -0800;  author: albinus;  state: Exp;  lines: +3 -0;

* configure.ac: Bump version (to 2.0.53-pre).  Update merge
version to 2.0.52.

* lisp/tramp.el: Add autoload for adding
`tramp-completion-file-name-handler' to `file-name-handler-alist'.
----------------------------
revision 2.382.2.80
date: 2006-01-27 12:26:51 -0800;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.382.2.79
date: 2006-01-27 12:25:27 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp-vc.el (vc-user-login-name): Wrap defadvice with a test for
`process-file', in order to let it work for older Emacsen too.
----------------------------
revision 2.382.2.78
date: 2006-01-22 10:38:31 -0800;  author: albinus;  state: Exp;  lines: +19 -0;


Version 2.0.52 released.

* configure.ac: Bump version.

* lisp/tramp.el, lisp/tramp-ftp.el, lisp/tramp-util.el,
lisp/tramp-vc.el: Add code for unloading Tramp.  See comment before
`tramp-unload-tramp' for checklist.

* lisp/tramp.el (tramp-unload-file-name-handler-alist)
(tramp-unload-tramp): New defuns.
(tramp-advice-PC-expand-many-files): New defadvice.
(tramp-save-PC-expand-many-files, tramp-setup-complete) Defuns
removed.

* lisp/tramp-ftp.el (tramp-ftp-enable-ange-ftp): New defun.

* lisp/tramp-util.el (top): Apply `ignore' instead of `identity' for
byte-compiler pacification.

* texi/tramp.texi (Frequently Asked Questions): Remove Ange-FTP item.
Add Tramp disabling item.
----------------------------
revision 2.382.2.77
date: 2005-12-18 03:03:59 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-handle-expand-file-name): Remove double slash.
----------------------------
revision 2.382.2.76
date: 2005-11-13 14:33:44 -0800;  author: albinus;  state: Exp;  lines: +5 -1;

* lisp/tramp-util.el (top): Fix compilation warning.
----------------------------
revision 2.382.2.75
date: 2005-11-12 14:50:13 -0800;  author: albinus;  state: Exp;  lines: +11 -0;

* lisp/tramp.el (tramp-handle-file-attributes-with-ls): Return t as
9. attribute.  It doesn't matter, because it will be converted
later on.
(tramp-handle-file-ownership-preserved-p): Rewritten.  The old
implementation was just heuristic.
(tramp-post-connection): Set uid and gid properties.
(tramp-convert-file-attributes): Set file's gid change bit.
(tramp-get-remote-uid, tramp-get-remote-gid): New defuns.
----------------------------
revision 2.382.2.74
date: 2005-11-08 23:00:00 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-handle-expand-file-name): Use "~root" for tilde
expansion in case of su(do)? methods.  The home directory of the
local user will be taken else.
----------------------------
revision 2.382.2.73
date: 2005-11-05 12:56:43 -0800;  author: albinus;  state: Exp;  lines: +17 -0;

* lisp/tramp.el (tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-multi): Set PS1 to "$ ".  Otherwise, a
local shell prompt could hurt.  Reported by Romain Francoise
<romain@orebokech.com>.
(tramp-action-out-of-band): Handle scp message
"Permission denied".
----------------------------
revision 2.382.2.72
date: 2005-10-30 12:23:56 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-chunksize): Escape parentheses in docstring
starting at beginning of line.  Fontification is messed up when
`open-paren-in-column-0-is-defun-start' set to t.  Reported by
John Paul Wallington <jpw@pobox.com>.
----------------------------
revision 2.382.2.71
date: 2005-10-23 03:54:23 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-let-maybe): Add `edebug-form-spec' property.
(tramp-handle-expand-file-name): Bind `default-directory' locally
to "/" in order to avoid problems with UNC shares or Cygwin
mounts.
----------------------------
revision 2.382.2.70
date: 2005-10-17 12:43:36 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

* tramp.el (tramp-completion-mode): New defvar.  Used in
`tramp-completion-mode' for checking if we are in completion mode.
(tramp-completion-handle-file-name-all-completions): Reorder code
in order to complete for file names only in case there are no
method/user/host completions.  This is necessary for cooperation
with ido.  Reported by Kim F. Storm <storm@cua.dk>.
----------------------------
revision 2.382.2.69
date: 2005-10-16 04:53:00 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-perl-directory-files-and-attributes): Add error
handling.
(tramp-handle-directory-files-and-attributes): Handle perl error
msg.
----------------------------
revision 2.382.2.68
date: 2005-10-11 14:40:00 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* configure.ac: Bump version (to 2.0.52-pre).  Update merge
version to 2.0.51.

* Makefile.XEmacs (REQUIRES): Remove fsf-compat, add
sh-script (for executable-find).

* lisp/tramp.el: Require `timer-funcs' instead of `timer' if in
XEmacs.
----------------------------
revision 2.382.2.67
date: 2005-10-09 12:46:59 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-md5-function): Fix typo in error message.
----------------------------
revision 2.382.2.66
date: 2005-10-08 06:55:37 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.0.51 released.
----------------------------
revision 2.382.2.65
date: 2005-10-05 14:21:19 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el: Pacify byte compiler warnings in pacification code.
(tramp-handle-file-local-copy): Use insert-buffer-substring.
----------------------------
revision 2.382.2.64
date: 2005-09-18 13:07:22 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* tramp.el (tramp-login-prompt-regexp): Expand regexp in order to
cover prompts like "login as:".  Reported by Slawomir Nowaczyk
<slawomir.nowaczyk.847@student.lu.se>.
----------------------------
revision 2.382.2.63
date: 2005-09-07 14:28:47 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

* tramp.el (tramp-action-password, tramp-multi-action-password):
Compile the password prompt from `method', `user' and `host'.
Sometimes it isn't obvious which password to enter, for example
with remote files offered by recentf.el, or with multiple steps.
Suggested by Robert Marshall <robert@chezmarshall.freeserve.co.uk>.
----------------------------
revision 2.382.2.62
date: 2005-09-03 14:48:13 -0700;  author: albinus;  state: Exp;  lines: +10 -1;

* lisp/tramp.el (tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): Insert special handling for
`last-coding-system-used' again, it still seems to be
necessary (unlike stated before).  Reported by Toshinori Sugita
<sugita@d-pad.co.jp>
----------------------------
revision 2.382.2.61
date: 2005-08-31 13:37:32 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-file-name-handler-alist)
(tramp-file-name-for-operation): Add `make-auto-save-file-name'.
(tramp-handle-make-auto-save-file-name): Rename from
`tramp-make-auto-save-file-name'.
(tramp-exists-file-name-handler): New defun.
(tramp-advice-make-auto-save-file-name): Make defadvice only when
`make-auto-save-file-name' is not a magic file name operation.
----------------------------
revision 2.382.2.60
date: 2005-08-25 14:21:46 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-password-prompt-regexp): There might be other
words before trailing ":".  Reported by Kurt Steinkraus
<kurt@steinkraus.us>.
(tramp-chunksize): Improve docstring.
(tramp-set-auto-save-file-modes): Octal integer code #o600 breaks
Emacs 20.  Use `tramp-octal-to-decimal' therefore.  Reported by
Christian Joergensen <bugs@razor.dk>.
----------------------------
revision 2.382.2.59
date: 2005-08-23 14:12:45 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-chunksize): Improve docstring.
----------------------------
revision 2.382.2.58
date: 2005-08-07 08:06:53 -0700;  author: albinus;  state: Exp;  lines: +28 -1;

Version 2.0.50 released.

* configure.ac: Bump version.

* lisp/tramp.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-accept-process-output): New defun.
(tramp-process-one-action, tramp-process-one-multi-action)
(tramp-wait-for-regexp, tramp-wait-for-output)
(tramp-discard-garbage-erase-buffer): Call it.  Reported by David
Howells <dhowells@redhat.com>.
(clear-visited-file-modtime): Defadvice removed.  The check for
unset buffer's modtime does not need to be based on
`tramp-buffer-file-attributes'.  Suggested by RMS.

* lisp/tramp-smb.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-smb-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-smb-wait-for-output): Call `tramp-accept-process-output'.
----------------------------
revision 2.382.2.57
date: 2005-08-01 13:48:26 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

Update years in copyright notice.
----------------------------
revision 2.382.2.56
date: 2005-07-31 14:21:53 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-message): Insert "\n" if not being at beginning
of line.
(tramp-find-shell): Use `tramp-barf-if-no-shell-prompt' for code
sequence with same logic.
----------------------------
revision 2.382.2.55
date: 2005-07-26 13:04:13 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-user-regexp): Allow "@" as part of user name.
----------------------------
revision 2.382.2.54
date: 2005-07-21 14:35:08 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-handle-load): Fix typo in error message.
----------------------------
revision 2.382.2.53
date: 2005-07-20 11:51:48 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp.el (tramp-completion-handle-expand-file-name): Discard call
of `tramp-drop-volume-letter'.  It is not necessary, and there
have been problems with (expand-file-name "~/.netrc" "/") in
ange-ftp.  Reported by Richard G. Bielawski
<Richard.G.Bielawski@wellsfargo.com>.
----------------------------
revision 2.382.2.52
date: 2005-07-17 09:22:25 -0700;  author: albinus;  state: Exp;  lines: +15 -0;

* lisp/tramp.el (tramp-do-copy-or-rename-file-out-of-band): Transfer
message should always be visible.
(tramp-handle-insert-directory, tramp-setup-complete)
(tramp-set-process-query-on-exit-flag)
(tramp-append-tramp-buffers): Pacify byte-compiler.
(tramp-bug): Delete non-existing variables from list.  Apply
`tramp-load-report-modules' as pre-hook.  Mask
`tramp-password-prompt-regexp', `tramp-shell-prompt-pattern' and
`shell-prompt-pattern' because of non-7bit characters.  Reported
by Sebastian Luque <sluque@mun.ca>.
(tramp-reporter-dump-variable, tramp-load-report-modules): New
defuns.
----------------------------
revision 2.382.2.51
date: 2005-07-10 14:36:47 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.382.2.50
date: 2005-06-26 12:23:35 -0700;  author: albinus;  state: Exp;  lines: +25 -2;


* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fifth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in:
----------------------------
revision 2.382.2.49
date: 2005-05-14 08:21:27 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


Version 2.0.49 released.

* configure.ac: Bump version.
----------------------------
revision 2.382.2.48
date: 2005-05-01 00:30:34 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (tramp-handle-dired-call-process)
(tramp-handle-insert-directory):`insert-buffer' cannot be used
because the contents of the Tramp buffer is changed before
insertion (`expand-file' and alike).
(tramp-handle-insert-directory): If `localname' has an empty
nondirectory name, it must not be quoted.
----------------------------
revision 2.382.2.47
date: 2005-04-29 13:43:06 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set file modes of
`buffer-auto-save-file-name' to ?\600 as fallback solution.
Reported by Ferenc Wagner <wferi@tba.elte.hu>.
----------------------------
revision 2.382.2.46
date: 2005-04-16 08:38:54 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (tramp-pre-connection): Add parameter CHUNKSIZE.  Make
local variable `tramp-chunksize'.  Change callees.
(tramp-open-connection-setup-interactive-shell): Check remote host
for buggy `send-process-string' implementation.  Set
`tramp-chunksize' if found.  Reported by Michael Kifer
<kifer@cs.sunysb.edu> (and a lot of other people all the years).
----------------------------
revision 2.382.2.45
date: 2005-04-13 13:02:15 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-handle-shell-command): `insert-buffer' cannot be
used because the contents of the Tramp buffer is changed before
insertion (`expand-file' and alike).  Reported by Frédéric Bothamy
<frederic.bothamy@free.fr>.
----------------------------
revision 2.382.2.44
date: 2005-04-03 09:48:45 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* configure.ac: Bump version (to 2.0.49-pre).  Update merge
version to 2.0.48.

* lisp/tramp.el (tramp-set-auto-save): Actions should be done for Tramp
file name handler only.  Ange-FTP has its own auto-save mechanism.
Reported by Richard G. Bielawski <Richard.G.Bielawski@wellsfargo.com>.
(tramp-bug): Remove obsolete variable.
(tramp-append-tramp-buffers): Rewrite partly.  More suitable check
for presence of `mml-mode'.  Make it running for older Emacsen as
well.
----------------------------
revision 2.382.2.43
date: 2005-03-20 11:41:42 -0800;  author: albinus;  state: Exp;  lines: +4 -0;
*** empty log message ***
----------------------------
revision 2.382.2.42
date: 2005-02-27 06:28:50 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-append-tramp-buffers): New defun.
(tramp-bug): Apply `tramp-append-tramp-buffers' as post-hook.
Catch `dont-send' signal.
----------------------------
revision 2.382.2.41
date: 2005-02-20 08:20:22 -0800;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.382.2.40
date: 2005-02-20 08:09:23 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set always
permissions, because there might be an old auto-saved file
belonging to another original file.  This could be a security
threat.

* lisp/tramp-smb.el (tramp-smb-open-connection): `executable-find'
doesn't exist in older Emacsen.  To be checked before applied.

* lisp/trampver.texi.in: Replace "Emacs" by "GNU Emacs".

* lisp/tramp.texi: Replace "Emacs" by "GNU Emacs".
(Default Method): Offer shortened syntax for "su" and "sudo"
methods.
----------------------------
revision 2.382.2.39
date: 2005-02-16 13:29:02 -0800;  author: albinus;  state: Exp;  lines: +11 -0;

* lisp/tramp-smb.el (all): Remove debug construct for
`with-parsed-tramp-file-name'.
(tramp-smb-prompt): Prompt can contain spaces inside directory
names.
(tramp-smb-handle-delete-directory, tramp-smb-handle-delete-file):
No error message if DIRECTORY or FILENAME doesn't exist.
(tramp-smb-open-connection): Check existence of
`tramp-smb-program'.
----------------------------
revision 2.382.2.38
date: 2005-02-12 03:34:28 -0800;  author: albinus;  state: Exp;  lines: +86 -75;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.382.2.37
date: 2005-02-05 15:00:04 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* INSTALL: Change bug report address to [tramp-devel@gnu.org].

* lisp/tramp.el (all): Change all addresses to .gnu.org.
----------------------------
revision 2.382.2.36
date: 2005-02-02 14:08:21 -0800;  author: albinus;  state: Exp;  lines: +9 -3;

* configure.ac: Bump version (to 2.0.48-pre).  Update merge
version to 2.0.47.  Change bug report address to
[tramp-devel@gnu.org].

* lisp/tramp.el (tramp-file-name-for-operation) Use 'shell-command but
'shell.  Cut'n'waste error.  Reported by Vincent Bernat
<bernat@free.fr>.

* texi/tramp.texi (all): Change all addresses to .gnu.org.
----------------------------
revision 2.382.2.35
date: 2005-01-16 03:36:04 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.0.47 released.
----------------------------
revision 2.382.2.34
date: 2005-01-15 14:27:38 -0800;  author: albinus;  state: Exp;  lines: +16 -0;

* lisp/tramp.el (tramp-operation-not-permitted-regexp) New defcustom,
catching keep-date problems in cp/scp operations.
(tramp-handle-copy-file): Don't call `set-file-modes'
unconditionally.  Specialized functions should know better what is
necessary.  This improves performance a little bit, and the
functions could catch errors with `cp -p' and `scp -p'.
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-out-of-band): Call `set-file-modes'
when appropriate.
(tramp-do-copy-or-rename-file-directly): Mask `cp -p' error.  Call
`set-file-modes' when appropriate.
(tramp-action-out-of-band): Mask `scp -p' error.
Reported by Isak Johnsson <isak@hypergene.com>
----------------------------
revision 2.382.2.33
date: 2005-01-09 11:22:49 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp-util.el (tramp-remap-command): New defun.
(top): Remove `define-key' calls.  They are replaced by respective
`tramp-remap-command' and `add-menu-button' calls.  Add
`tramp-minor-mode' to `dired-mode-hook'.
(tramp-compile, tramp-recompile): Call the commands
asynchronously.  Add `compilation-mode' to *Compilation* buffer.

* lisp/tramp.texi: (Compilation): Make reference to (X)Emacs manual
flavor specific.  Remove mentioned restrictions for Emacs < 21.4
and for XEmacs.
----------------------------
revision 2.382.2.32
date: 2005-01-05 13:32:35 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp-util.el: Fix copyright years.  Adapt author address.
(tramp-minor-mode): Mode must toggle.

* texi/tramp.texi: Fix copyright years.
----------------------------
revision 2.382.2.31
date: 2005-01-04 15:25:04 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp-util.el (tramp-compile, tramp-recompile): Enable
`tramp-minor-mode' in buffer "*Compilation*".

* texi/tramp.texi (Compilation): Give a note that remote compilation is
performed synchronously only, for the time being.
----------------------------
revision 2.382.2.30
date: 2004-12-29 13:27:49 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp-util.el (tramp-minor-mode): New minor mode.  Add it to
`find-file-hooks'.
(tramp-minor-mode-map): Respective map.  Add remapping for
`compile' and `recompile'.
(tramp-recompile): New defun.

* texi/tramp.texi (Compilation): New section, describing compilation of
remote files.
----------------------------
revision 2.382.2.29
date: 2004-12-27 14:31:57 -0800;  author: kai;  state: Exp;  lines: +4 -0;
2004-12-19    <kgrossjo@eu.uu.net>

	* tramp.el (tramp-wait-for-output): Fix typo in echo processing.
----------------------------
revision 2.382.2.28
date: 2004-12-25 13:19:39 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-get-buffer, tramp-get-debug-buffer): Discard the
undo list of both Tramp buffer and debug buffer.  Reported by
Joakim Verona <joakim@verona.se>
----------------------------
revision 2.382.2.27
date: 2004-12-23 16:00:48 -0800;  author: albinus;  state: Exp;  lines: +12 -0;

* configure.ac: Bump version (to 2.0.47-pre).  Update merge
version to 2.0.46.

* lisp/tramp.el (tramp-file-name-for-operation): Mark `shell-command'
as magic for Emacs only.
(tramp-wait-for-output): Fix error in deleting region.  From Kai
Grossjohann <kai.grossjohann@gmx.net>.

* lisp/tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
(tramp-vc-simple-command): Call `tramp-handle-shell-command' but
`shell-command', because it isn't magic in XEmacs.  Reported by
Adrian Aichner <adrian@xemacs.org>.
----------------------------
revision 2.382.2.26
date: 2004-12-23 02:58:23 -0800;  author: albinus;  state: Exp;  lines: +15 -1;

* configure.ac: Bump version (to 2.0.47-pre).

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`substitute-in-file-name.
(tramp-smb-handle-substitute-in-file-name): New defun.
(tramp-smb-advice-PC-do-completion): Delete advice.

Sync with trunk (Michael Albinus <michael.albinus@gmx.de>).

* lisp/tramp.el (tramp-handle-file-newer-than-file-p): Reverse logic.
From Andrew J. Korty <ajk@iu.edu>.
----------------------------
revision 2.382.2.25
date: 2004-12-16 06:11:07 -0800;  author: albinus;  state: Exp;  lines: +4 -0;


Version 2.0.46 released.
----------------------------
revision 2.382.2.24
date: 2004-12-05 08:54:00 -0800;  author: albinus;  state: Exp;  lines: +7 -0;


* lisp/tramp.el (tramp-maybe-send-perl-script): Change order of
parameters wrt Tramp convention.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-directory-files-and-attributes): Apply it.
----------------------------
revision 2.382.2.23
date: 2004-12-05 04:53:37 -0800;  author: albinus;  state: Exp;  lines: +22 -0;

Sync with Emacs CVS

* lisp/tramp.el (tramp-handle-directory-files-and-attributes): New function.
(tramp-perl-directory-files-and-attributes): New constant.
(tramp-file-name-handler-alist): Delete file-directory-files, add
directory-files-and-attributes.
(tramp-perl-file-attributes): Surround uid and gid by double
quotes. Change parameter id-format from nonnumeric.
(tramp-convert-file-attributes): New function.
(tramp-handle-file-attributes): Use it.
(tramp-maybe-send-perl-script): New function.
(tramp-handle-file-attributes-with-perl): Use it. Don't convert
file mode. Change parameter id-format from nonnumeric.
(tramp-handle-file-attributes-with-ls): Change parameter id-format
from nonnumeric.
(tramp-post-connection): Don't send tramp-perl-file-attributes
script. Reset connection property "perl-scripts".
(tramp-handle-insert-directory): Run real handler when ls-lisp is
in use.
----------------------------
revision 2.382.2.22
date: 2004-12-04 09:53:01 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* lisp/tramp.el (tramp-do-copy-or-rename-file-out-of-band): Check for
existence of `copy-program'.  Reported by Zack Weinberg
<zack@codesourcery.com>.
(tramp group): Add :version.
----------------------------
revision 2.382.2.21
date: 2004-11-06 12:33:02 -0800;  author: kai;  state: Exp;  lines: +1 -0;
(tramp-uudecode): Mention `uudecode -o /dev/stdout'.
----------------------------
revision 2.382.2.20
date: 2004-11-06 11:36:15 -0800;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.el (tramp-coding-commands): Additionally try "uudecode -o
/dev/stdout" before trying "uudecode -o -".  Suggested by Han
Boetes.
----------------------------
revision 2.382.2.19
date: 2004-10-23 12:53:26 -0700;  author: kai;  state: Exp;  lines: +12 -0;
* tramp-vc.el (vc-do-command): Do not advise it if
process-file is fboundp.
* tramp.el (tramp-file-name-handler-alist): Add entry for
process-file.
(tramp-handle-process-file): New function.
(tramp-file-name-for-operation): Support process-file.
----------------------------
revision 2.382.2.18
date: 2004-10-17 09:03:17 -0700;  author: albinus;  state: Exp;  lines: +12 -0;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.382.2.17
date: 2004-10-12 13:37:18 -0700;  author: albinus;  state: Exp;  lines: +9 -0;


Version 2.0.45 released.

* configure.ac: Bump version.

* lisp/tramp-smb.el
(tramp-smb-advice-PC-do-completion): Don't activate
advice during definition.  This is done later on, depending on
test result of `substitute-in-file-name'.  Suggested by Stefan
Monnier <monnier@iro.umontreal.ca>.
----------------------------
revision 2.382.2.16
date: 2004-10-10 09:54:27 -0700;  author: albinus;  state: Exp;  lines: +10 -0;


* Makefile.in (savannah): Don't call make for texi.  Only the
trunk should place its files there.

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.382.2.15
date: 2004-09-08 14:59:58 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* lisp/tramp.el (tramp-perl-decode): Fixed an error in Perl
implementation.  $pending must be cleared every loop.  Reported by
Benjamin Place <benjaminplace@sprintmail.com>
----------------------------
revision 2.382.2.14
date: 2004-08-10 13:25:06 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


Version 2.0.44 released.

* configure.ac: Bump version.
----------------------------
revision 2.382.2.13
date: 2004-08-06 13:14:08 -0700;  author: albinus;  state: Exp;  lines: +7 -0;


* lisp/tramp.el (tramp-post-connection): Quote $1 and $2 of shell
function "tramp_file_attributes".  Otherwise, file names
containing spaces are misinterpreted.  Reported by Magnus Henoch
<mange@freemail.hu>.
----------------------------
revision 2.382.2.12
date: 2004-08-05 13:02:29 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* lisp/tramp.el (tramp-handle-file-truename): FILENAME must be expanded
first.  Otherwise, parameters like "/ssh:deego@gnufans.net:~" will
return obscure results.  Reported by D. Goel <deego@gnufans.org>.
----------------------------
revision 2.382.2.11
date: 2004-07-25 03:52:39 -0700;  author: albinus;  state: Exp;  lines: +11 -1;


* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): If file
does not exist, say it is not modified if and only if that agrees
with the buffer's record.
(tramp-handle-write-region): Pass modtime explicitely to
`set-visited-file-modtime', because filename can be different
from (buffer-file-name) if `file-precious-flag' is set.
All changes suggested by Luc Teirlinck <teirllm@auburn.edu>.
----------------------------
revision 2.382.2.10
date: 2004-07-24 11:42:32 -0700;  author: albinus;  state: Exp;  lines: +20 -0;


* lisp/tramp.el (tramp-handle-set-visited-file-modtime): If `time-list'
is not nil, don't apply the whole body.  If the file doesn't
exists, set modtime to '(-1 65535).
(tramp-handle-verify-visited-file-modtime): Check whether a file
is visiting the buffer, or the buffer has no recorded last
modification time.  Return t in case the visiting file doesn't
exists.
(tramp-handle-write-region): `set-visited-file-modtime' must be
called always when `visit' is t or a string.
All changes suggested by Luc Teirlinck <teirllm@auburn.edu>.
----------------------------
revision 2.382.2.9
date: 2004-07-17 10:19:48 -0700;  author: kai;  state: Exp;  lines: +2 -0;
Missed to add a release changelog entry.

* Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.

* configure.ac: Bump version (to 2.0.44-pre).  Update merge
version to 2.0.43.
----------------------------
revision 2.382.2.8
date: 2004-07-17 08:37:26 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-verify-visited-file-modtime): Remove
outdated comment.
----------------------------
revision 2.382.2.7
date: 2004-07-17 08:34:47 -0700;  author: kai;  state: Exp;  lines: +6 -0;
2004-07-14  Luc Teirlinck  <teirllm@auburn.edu>

	* tramp.el (tramp-handle-verify-visited-file-modtime):
	`visited-file-modtime' now returns a list of two integers, instead
	of a cons.
----------------------------
revision 2.382.2.6
date: 2004-07-13 12:29:52 -0700;  author: albinus;  state: Exp;  lines: +43 -2;


Sync with trunk.
----------------------------
revision 2.382.2.5
date: 2004-06-26 08:02:08 -0700;  author: kai;  state: Exp;  lines: +6 -0;
Merge from trunk.

(tramp-handle-file-remote-p): New implementation to
agree with new return value of `file-remote-p'.
----------------------------
revision 2.382.2.4
date: 2004-05-30 13:55:59 -0700;  author: kai;  state: Exp;  lines: +8 -0;
Sync with trunk.

(tramp-let-maybe): ReportReverse args of `get'.
(tramp-let-maybe): Move to an earlier spot in the file.  Patch by
Andreas Schwab.
----------------------------
revision 2.382.2.3
date: 2004-05-29 14:40:49 -0700;  author: albinus;  state: Exp;  lines: +51 -0;


Version 2.0.41 released.

Sync with trunk
----------------------------
revision 2.382.2.2
date: 2004-05-26 13:08:03 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* lisp/tramp.el (tramp-completion-file-name-regexp-unified): Fix
cut'n'waste error.
----------------------------
revision 2.382.2.1
date: 2004-05-16 04:48:14 -0700;  author: kai;  state: Exp;  lines: +7 -0;
Merge from trunk:

(tramp-completion-file-name-regexp-unified): Avoid
matching filenames starting with "/:" -- those are reserved for
file-name-non-special.
----------------------------
revision 2.923.2.12
date: 2011-01-10 12:41:47 -0800;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: dPCZWsJ2iF0eeL3v;
* tramp.el (tramp-find-inline-compress, tramp-get-inline-coding): Quote
command after pipe symbol for local calls under W32.  (Bug#6784)
----------------------------
revision 2.923.2.11
date: 2011-01-10 11:34:04 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: Dd3sYgHEsxVZQK3v;
* tramp.el (tramp-default-method): Initialize with pscp/plink only
when running under W32.
----------------------------
revision 2.923.2.10
date: 2010-12-31 12:10:32 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: XcNS9U0WTBhqnt2v;
* tramp.el (tramp-methods): Add recursive options to "scpc",
"scpx", "pscp" and "psftp".
----------------------------
revision 2.923.2.9
date: 2010-12-31 12:01:25 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: edlI4dFvALCikt2v;
* tramp.el (tramp-methods): Add recursive options to "scpc" and
"scpx".
----------------------------
revision 2.923.2.8
date: 2010-12-10 05:25:44 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: BU41OIYVwd0pOJZu;
* tramp.el (tramp-action-password, tramp-process-actions): Revert
patch from 2010-12-08.  Use `save-restriction'.
----------------------------
revision 2.923.2.7
date: 2010-12-08 12:02:02 -0800;  author: albinus;  state: Exp;  lines: +13 -0;  commitid: 6QChK6fqJWdm4wZu;
* tramp.el (tramp-handle-start-file-process): Protect
buffer-modified value.  (Bug#7557)
(tramp-action-password): Delete region, do not narrow.
(tramp-process-actions): Do not widen.
----------------------------
revision 2.923.2.6
date: 2010-11-13 01:54:01 -0800;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: HP5PPVF5oAQAvfWu;
* tramp.el (tramp-remote-coding-commands): Add an alternative
using "base64 -d -i".  This is needed for older base64 versions
from GNU coreutils.  Reported by Klaus Reichl
<Klaus.Reichl@thalesgroup.com>.
----------------------------
revision 2.923.2.5
date: 2010-11-06 07:09:32 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: i0R0my5dDovc9nVu;
* tramp.el (tramp-handle-insert-file-contents): Do not set
`permanent-local' property for `backup-by-copying-when-mismatch'.
----------------------------
revision 2.923.2.4
date: 2010-10-30 09:35:45 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: d2kTlq36gGhibuUu;
* tramp.el (tramp-handle-insert-file-contents): For root, preserve
owner and group when editing files.  (Bug#7289)

* tramp-fish.el: Update URL in comment (viewcvs -> viewvc).
----------------------------
revision 2.923.2.3
date: 2010-10-20 23:21:08 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: y60Te0T44Qcy4hTu;
* tramp.el (tramp-get-inline-coding): Return `nil' in case of
errors.
----------------------------
revision 2.923.2.2
date: 2010-10-19 02:04:16 -0700;  author: albinus;  state: Exp;  lines: +9 -1;  commitid: k6G4bwL643hv22Tu;
* tramp.el (tramp-do-file-attributes-with-stat)
(tramp-do-directory-files-and-attributes-with-stat): Use "e0" in
order to make stat results a float.  Patch by Andreas Schwab
<schwab@linux-m68k.org>.
----------------------------
revision 2.923.2.1
date: 2010-10-15 02:57:40 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: GaU6Ec91ZVBMswSu;
* tramp.el (tramp-open-connection-setup-interactive-shell):
Suppress expansion of tabs to spaces.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/Makefile,v
Working file: lisp/Makefile
head: 2.9
branch:
locks: strict
access list:
symbolic names:
	V-2-0-30: 2.8
	V-2-0-29: 2.8
	V-2-0-28: 2.8
	V-2-0-27: 2.8
	V-2-0-26: 2.8
	V-2-0-25: 2.6
	V-2-0-24: 2.6
	V-2-0-23: 2.6
	V-2-0-22: 2.6
	V-2-0-21: 2.6
	V-2-0-20: 2.6
	V-2-0-19: 2.6
	V-2-0-18: 2.6
	V-2-0-17: 2.6
	V-2-0-16: 2.6
	V-2-0-15: 2.6
	V-2-0-14: 2.6
	V-2-0-13: 2.6
	completion: 2.6.0.2
	V-2-0-12: 2.6
	V-2-0-11: 2.6
	V-2-0-10: 2.6
	V-2-0-9: 2.6
	V-2-0-8: 2.6
	V-2-0-7: 2.6
	V-2-0-6: 2.6
	V-2-0-5: 2.6
	V-2-0-4: 2.6
	V-2-0-3: 2.4
	V-2-0-1: 2.4
	EMACS-21: 2.4
	V-2-0-0: 2.4
	tramp-xemacs-pkg: 2.2.0.2
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 19;	selected revisions: 19
description:
----------------------------
revision 2.9
date: 2003-03-22 08:53:30 -0800;  author: albinus;  state: dead;  lines: +0 -0;
*** empty log message ***
----------------------------
revision 2.8
date: 2002-10-27 12:53:49 -0800;  author: albinus;  state: Exp;  lines: +2 -1;

* tramp.el (top-level): Load tramp-smb.el.  Remove autoload of
`tramp-ftp-file-name-p'; not needed anymore.
(tramp-foreign-file-name-handler-alist): New variable.  Foreign
methods shall plug in.
(tramp-file-name-for-operation): Relative file names are checked
via `expand-file-name'.  If no absolute file name is given,
default directory of current-buffer is used.
(tramp-find-foreign-file-name-handler): New function.  Parses
`tramp-foreign-file-name-handler-alist' in order to find foreign
file name handlers.
(tramp-file-name-handler): Apply
`tramp-find-foreign-file-name-handler' instead of simply looking
for FTP foreign method.

* tramp-ftp.el (top-level): Plug into
`tramp-foreign-file-name-handler-alist'.

* tramp-smb.el: New file.  Functionality disabled by
`tramp-use-smb' during development.

* Makefile (tramp): Add tramp-smb.elc.
----------------------------
revision 2.7
date: 2002-10-13 13:27:29 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

2002-10-13  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-advice-find-file-name-handler): Remove defadvice
	because it might be not a good idea to hook into Emacs built-in
	subroutiones. Suggested by RMS.
	(tramp-primitive-file-name): Handle all primitives now.
	(tramp-file-name-handler): Allow call of
	`tramp-ftp-file-name-handler' for functions only defined in
	`tramp-file-name-handler-alist'.  Strange.

2002-10-12  Michael Albinus  <Michael.Albinus@alcatel.de>

	* Makefile (tramp): Add tramp-uu.elc and tramp-ftp.elc.

	* tramp.el (main): Require `tramp-ftp' after load in order to
	avoid infloop. Autoload `tramp-ftp-file-name-p' for compiler
	satisfaction.
	(tramp-primitive-file-name): Add handling of `expand-file-name'
	and `file-newer-than-file-p'.
	(tramp-file-name-handler): Call `tramp-primitive-file-name' via
	`apply'.

	* tramp-ftp.el (main): Require `tramp'.


2002-10-11  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp-ftp.el: New file.

	* tramp.el (tramp-default-method): Adapt doc string.
	(tramp-ftp-method, tramp-completion-function-alist-ftp)
	(tramp-disable-ange-ftp, tramp-invoke-ange-ftp)
	(tramp-ange-ftp-file-name-p, tramp-make-ange-ftp-file-name): Moved
	to tramp-ftp.el or removed (if not needed any longer).  Callees
	adapted.
	(tramp-completion-function-alist): "ftp" entry removed.  Will be
	added from within tramp-ftp.el.
	(tramp-set-completion-function ): Allow setting of methods not
	defined yet.
	(tramp-run-real-handler, tramp-completion-run-real-handler):
	Remove `ange-ftp-hook-function' handling.  Make
	`inhibit-file-name-handlers' a cons but a list.
	(tramp-advice-find-file-name-handler): Advice for
	`find-file-name-handler'.  Check for Ange-FTP file names,
	applicable for NON built-in primitives only.
	(tramp-primitive-file-name): New function.  Returns filename for
	some built-in primitives.
	(tramp-file-name-handler): Check for Ange-FTP file names (built-in
	primitives only).  Forward to Ange-FTP in case of.
	(tramp-completion-file-name-handler): Remove catch for
	`tramp-forward-to-ange-ftp'.  Not necessary any longer.
	(tramp-flatten-list): Remove function.  Never used.
	(tramp-completion-mode, tramp-get-completion-methods): Special
	handling of `tramp-ftp-method' removed.  It's part of
	`tramp-methods' now (as foreign method).

2002-10-13  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Windows setup hints): Fix typo (missing {} after
	@dots).
	(Inline methods, External transfer methods)
	(Remote shell setup, Windows setup hints)
	(Frequently Asked Questions, Issues): Replace "Tramp" by
	"@tramp{}".
----------------------------
revision 2.6
date: 2002-07-29 01:22:47 -0700;  author: kai;  state: Exp;  lines: +7 -10;
* Makefile (prepversion): Edit tramp.texi for version number
instead of creating new file tramp-version.texi.

* tramp.texi: Define macro @trampver here instead of in
tramp-version.texi.  The value is edited from Makefile.

* Makefile (prepversion): Edit tramp.el instead of creating new
file tramp-version.el.
(clean): Don't remove tramp-version.el, the file doesn't exist
anymore.

* tramp.el (tramp-perl-encode, tramp-perl-decode): Very simple
implementations requiring the Perl module MIME::Base64.
(tramp-coding-commands): Use them.
(tramp-version): Move back here from tramp-version.el.  The
variable is automatically edited from the Makefile.
----------------------------
revision 2.5
date: 2002-07-23 09:46:30 -0700;  author: youngs;  state: Exp;  lines: +13 -2;

2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (all): Export $VERSION to the subdirectories.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target to create tramp-version.el.
	(all): Use it.
	(clean): Add tramp-version.elc.

	* tramp.el (tramp-version): Removed, we create it on the fly from
	the Makefile.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target.  Creates
	tramp-version.texi.
	(all): Use it.
	(clean): Add tramp-version.texi.

	* tramp.texi: Include tramp-version.texi.
	(Top): Use macro defined in tramp-version.texi.
	(copying): Ditto.
----------------------------
revision 2.4
date: 2002-01-25 01:06:26 -0800;  author: kaig;  state: Exp;  lines: +15 -12;
Define a flag USE_CONTRIB which adds the local contrib
directory to the load-path if set.  Use suffix rules.  From
Norbert Koch <nk@LF.net>.
----------------------------
revision 2.3
date: 2001-12-29 14:06:29 -0800;  author: kaig;  state: Exp;  lines: +1 -1;
* Makefile (tramp.elc): Remove superfluous dependencies.

* tramp-vc.el (tramp-vc-workfile-unchanged-p): Supply two args to
vc-default-workfile-unchanged-p.

* tramp-util.el (tramp): Require tramp.
----------------------------
revision 2.2
date: 2001-12-06 04:34:38 -0800;  author: kaig;  state: Exp;  lines: +0 -6;
Make it work inside XEmacs, too.  From Stephen
J. Turnbull <stephen@xemacs.org>.
(MANIFEST): New directory layout.
----------------------------
revision 2.1
date: 2001-03-09 13:42:54 -0800;  author: grossjoh;  state: Exp;  lines: +5 -1;
New file tramp-util.el.
----------------------------
revision 2.0
date: 2001-02-28 02:39:26 -0800;  author: grossjoh;  state: Exp;  lines: +0 -0;
branches:  2.0.2;
Going stable?
----------------------------
revision 1.8
date: 2000-08-29 09:30:45 -0700;  author: grossjoh;  state: Exp;  lines: +4 -2;
* Makefile (tramp.elc): Wrap long line.
(tramp-vc.elc): Frob load-path for byte-compilation because of
required libraries.

* tramp-vc.el: Move `provide' to end of file.
Require some needed libraries to avoid byte-compiler errors.

* tramp.el (tramp-handle-file-name-all-completions): Expand
DIRECTORY so that this also works with abbreviated file names.
(tramp-handle-file-newer-than-file-p): Bug with `signal'.
----------------------------
revision 1.7
date: 2000-05-31 15:08:42 -0700;  author: grossjoh;  state: Exp;  lines: +9 -9;
Name change.
----------------------------
revision 1.6
date: 2000-05-31 12:15:19 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Didn't byte-compile all the files.
----------------------------
revision 1.5
date: 2000-05-28 13:16:53 -0700;  author: grossjoh;  state: Exp;  lines: +8 -2;
Snarf base64.el from Gnus 5.8.
----------------------------
revision 1.4
date: 2000-05-06 04:07:06 -0700;  author: grossjoh;  state: Exp;  lines: +5 -2;
Use format-spec.el from Gnus 5.8.
----------------------------
revision 1.3
date: 2000-05-05 08:36:53 -0700;  author: grossjoh;  state: Exp;  lines: +1 -1;
Use value of $(EMACS) rather than hard-wired `emacs'.
----------------------------
revision 1.2
date: 2000-01-28 15:53:01 -0800;  author: grossjoh;  state: Exp;  lines: +2 -2;
Ted Stern <stern@tera.com>: Suggestions for Makefile; missing subdir
Makefiles
----------------------------
revision 1.1
date: 2000-01-28 15:44:47 -0800;  author: grossjoh;  state: Exp;
*** empty log message ***
----------------------------
revision 2.0.2.1
date: 2001-06-03 05:13:06 -0700;  author: grossjoh;  state: Exp;  lines: +5 -1;
Sync with head.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Makefile.in,v
Working file: lisp/Makefile.in
head: 2.44
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.42
	branch-2-1-stable: 2.34.0.2
	branchpoint-2-1-stable: 2.34
	V-2-1-19: 2.34
	V-2-1-18: 2.34
	V-2-1-17: 2.34
	V-2-1-16: 2.33
	V-2-1-15: 2.32
	V-2-1-14: 2.32
	V-2-1-13: 2.31
	V-2-0-57: 2.10.2.6
	V-2-1-12: 2.28
	V-2-1-11: 2.27
	V-2-1-10: 2.24
	V-2-0-56: 2.10.2.4
	V-2-1-9: 2.20
	V-2-1-8: 2.18
	V-2-0-55: 2.10.2.4
	V-2-1-7: 2.16
	V-2-0-54: 2.10.2.4
	V-2-1-6: 2.16
	V-2-0-53: 2.10.2.4
	V-2-0-52: 2.10.2.3
	V-2-1-5: 2.15
	V-2-1-4: 2.15
	V-2-0-51: 2.10.2.3
	V-2-0-50: 2.10.2.3
	V-2-0-49: 2.10.2.1
	V-2-0-48: 2.10.2.1
	V-2-1-3: 2.12
	V-2-0-47: 2.10.2.1
	V-2-0-46: 2.10
	V-2-0-45: 2.10
	V-2-1-2: 2.12
	V-2-0-44: 2.10
	V-2-1-1: 2.11
	V-2-0-43: 2.10
	V-2-0-42: 2.10
	V-2-0-41: 2.10
	V-2-1-0: 2.10
	branch-2-0-stable: 2.10.0.2
	branchpoint-2-0-stable: 2.10
	V-2-0-40: 2.10
	V-2-0-39: 2.7
	V-2-0-38: 2.7
	V-2-0-37: 2.7
	V-2-0-36: 2.5
	V-2-0-35: 2.2
	V-2-0-34: 2.1
	V-2-0-33: 2.1
	V-2-0-32: 2.1
keyword substitution: kv
total revisions: 50;	selected revisions: 50
description:
----------------------------
revision 2.44
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.43
date: 2010-12-27 02:53:36 -0800;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: ItfUDI8BtGbnqU1v;
* Makefile.in (tramp-loaddefs.el): Hnadle case on systems on which
the format of absolute pathes are different between its shell and
in emacsen, like MSYS.  Reported by Yosuke YAMADA
<sunasaji@gmail.com>.

* tramp.el (tramp-default-user-alist): Do not add "ssh" based
methods, otherwise ~/.ssh/config would be ignored.
----------------------------
revision 2.42
date: 2010-10-27 22:45:41 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: 2FYAAcs4BjmlEaUu;
* Makefile.in (autoloads): Use $(builddir) prefix.
----------------------------
revision 2.41
date: 2010-10-21 03:16:40 -0700;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: 7umnTHoXaOOlniTu;
*** empty log message ***
----------------------------
revision 2.40
date: 2010-10-21 03:06:51 -0700;  author: albinus;  state: Exp;  lines: +7 -7;  commitid: TdhAcKUkWkdZjiTu;
* Makefile.in (builddir): New variable, used instead of srcdir.
(INSTALL_FILES, xemacs): Add tramp-loaddefs.el.
(autoloads): Do not use $(srcdir) prefix.
----------------------------
revision 2.39
date: 2010-10-20 04:59:13 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: JwxdUsG93nWwYaTu;
* tramp-sh.el (tramp-send-command): Simplify last patch, and
restrict it to here documents.
----------------------------
revision 2.38
date: 2010-09-16 08:36:06 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: ZaWo7b7BbuAHgPOu;
* Makefile.in (autoloads): Renamed from tramp-autoloads.
(tramp-loaddefs.el): Revert check for XEmacs.

* tramp-cmds.el (tramp-cleanup-connection): Set tramp-autoload cookie.
----------------------------
revision 2.37
date: 2010-09-15 13:14:11 -0700;  author: albinus;  state: Exp;  lines: +12 -3;  commitid: cEIrA9vZbWCTPIOu;
Ensure XEmacs compatibility.

* Makefile.in (tramp-loaddefs.el): Adapt `autoload-trim-file-name'
and feature name.
(distclean): Remove trampver.el, it is handled in the upper Makefile.

* tramp-compat.el (tramp-compat-with-temp-message)
(tramp-compat-font-lock-add-keywords, tramp-compat-process-get)
(tramp-compat-process-put): New defuns.

* tramp.el (top):
* tramp-gvfs.el (top):
* tramp-cache.el (top): Use `tramp-compat-font-lock-add-keywords'.

* tramp.el (tramp-progress-reporter-update): Use `tramp-compat-funcall.

* tramp.el (tramp-process-actions):
* tramp-gvfs.el (tramp-handle-vc-registered):
* tramp-sh.el (tramp-gvfs-handler-askquestion)
(tramp-get-remote-stat, tramp-get-remote-readlink): Use
`tramp-compat-with-temp-message'.

* tramp-sh.el (top): Require 'cl.
(tramp-handle-start-file-process): Use `tramp-compat-process-get'.
(tramp-open-connection-setup-interactive-shell): Use
`tramp-compat-process-put'.

* tramp-util.el (top): Require 'tramp-sh.
----------------------------
revision 2.36
date: 2010-09-13 06:18:45 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: hctSFHPfw5XxBqOu;
Major code cleanup.  Split tramp.el into tramp.el and tramp-sh.el.

* Makefile.in (LISP_FILES): Remove tramp-fish.el.  Add tramp-sh.el.

* tramp.el (top): Don't show loading message.  Require just
'tramp-compat, everything else is required there.  Use
`ignore-errors' where appropriate.
(tramp-inline-compress-start-size, tramp-copy-size-limit)
(tramp-terminal-type, tramp-end-of-output)
(tramp-initial-end-of-output, tramp-completion-function-alist-rsh)
(tramp-completion-function-alist-ssh)
(tramp-completion-function-alist-telnet)
(tramp-completion-function-alist-su)
(tramp-completion-function-alist-putty, tramp-remote-path)
(tramp-remote-process-environment, tramp-sh-extra-args)
(tramp-actions-before-shell, tramp-uudecode)
(tramp-perl-file-truename, tramp-perl-file-name-all-completions)
(tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode)
(tramp-vc-registered-read-file-names, tramp-file-mode-type-map)
(tramp-file-name-handler-alist, tramp-make-tramp-temp-file)
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-as-directory)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-exists-p, tramp-handle-file-attributes)
(tramp-do-file-attributes-with-ls)
(tramp-do-file-attributes-with-perl)
(tramp-do-file-attributes-with-stat)
(tramp-handle-set-visited-file-modtime)
(tramp-handle-verify-visited-file-modtime)
(tramp-handle-set-file-modes, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-remote-selinux-p)
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-newer-than-file-p, tramp-handle-file-modes)
(tramp-handle-file-directory-p, tramp-handle-file-regular-p)
(tramp-handle-file-symlink-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p)
(tramp-handle-directory-file-name, tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-do-directory-files-and-attributes-with-perl)
(tramp-do-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions)
(tramp-handle-file-name-completion, tramp-handle-add-name-to-file)
(tramp-handle-copy-file, tramp-handle-copy-directory)
(tramp-handle-rename-file, tramp-do-copy-or-rename-file)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-dired-compress-file, tramp-handle-dired-uncache)
(tramp-handle-insert-directory)
(tramp-handle-unhandled-file-name-directory)
(tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-executable-find, tramp-process-sentinel)
(tramp-handle-start-file-process, tramp-handle-process-file)
(tramp-handle-call-process-region, tramp-handle-shell-command)
(tramp-handle-file-local-copy, tramp-handle-file-remote-p)
(tramp-handle-insert-file-contents)
(tramp-handle-insert-file-contents-literally)
(tramp-handle-find-backup-file-name)
(tramp-handle-make-auto-save-file-name, tramp-handle-write-region)
(tramp-vc-registered-file-names, tramp-handle-vc-registered)
(tramp-sh-file-name-handler, tramp-vc-file-name-handler)
(tramp-maybe-send-script, tramp-set-auto-save, tramp-run-test)
(tramp-run-test2, tramp-find-executable, tramp-set-remote-path)
(tramp-find-file-exists-command, tramp-open-shell)
(tramp-find-shell, tramp-barf-if-no-shell-prompt)
(tramp-open-connection-setup-interactive-shell)
(tramp-local-coding-commands, tramp-remote-coding-commands)
(tramp-find-inline-encoding, tramp-call-local-coding-command)
(tramp-inline-compress-commands, tramp-find-inline-compress)
(tramp-compute-multi-hops, tramp-maybe-open-connection)
(tramp-send-command , tramp-wait-for-output)
(tramp-send-command-and-check, tramp-barf-unless-okay)
(tramp-send-command-and-read, tramp-mode-string-to-int)
(tramp-convert-file-attributes, tramp-check-cached-permissions)
(tramp-file-mode-from-int, tramp-file-mode-permissions)
(tramp-shell-case-fold, tramp-make-copy-program-file-name)
(tramp-method-out-of-band-p, tramp-local-host-p)
(tramp-get-remote-path, tramp-get-remote-tmpdir)
(tramp-get-ls-command, tramp-get-ls-command-with-dired)
(tramp-get-test-command, tramp-get-test-nt-command)
(tramp-get-file-exists-command, tramp-get-remote-ln)
(tramp-get-remote-perl, tramp-get-remote-stat)
(tramp-get-remote-readlink, tramp-get-remote-trash)
(tramp-get-remote-id, tramp-get-remote-uid, tramp-get-remote-gid)
(tramp-get-local-uid, tramp-get-local-gid)
(tramp-get-inline-compress, tramp-get-inline-coding, ): Move to
tramp-sh.el.
(tramp-methods, tramp-default-method-alist)
(tramp-default-user-alist, tramp-foreign-file-name-handler-alist):
Move initialization to tramp-sh.el.
(tramp-temp-name-prefix): Make it a defconst.
(tramp-dissect-file-name): Don't check anymore for multi-hop
methods.
(tramp-debug-outline-regexp): Add a docstring.
(tramp-debug-outline-level): Renamed from `tramp-outline-level'.
(tramp-get-debug-buffer): Use it.

* tramp-cache.el (top): Set tramp-autoload cookie for
initialization forms.
(tramp-set-connection-property): Don't protect `tramp-message'
call, it isn't necessary any longer.
(tramp-dump-connection-properties): Use `ignore-errors'.

* tramp-compat.el (top): Require 'advice, 'format-spec,
'password-cache and 'auth-source.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Require 'tramp-sh.

* tramp-gw.el (tramp-gw-open-network-stream): Use `ignore-errors'.

* tramp-sh.el: New file, derived from tramp.el.
(top): Initialize `tramp-methods', `tramp-default-method-alist',
`tramp-default-user-alist', tramp-foreign-file-name-handler-alist.
Remove "scp1_old", "scp2_old", "ssh1_old", "ssh2_old".  Use
`ignore-errors' where appropriate.
(tramp-sh-file-name-handler-alist): Renamed from
`tramp-file-name-handler-alist'.
(tramp-send-command-and-check): Return t or nil.  Remove all
`zerop' checks, where called.
(tramp-handle-set-file-modes)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-delete-directory, tramp-handle-delete-file)
(tramp-maybe-send-script, ): Use `tramp-barf-unless-okay'.
(tramp-sh-file-name-handler, tramp-send-command-and-check)
(tramp-get-remote-ln): Set tramp-autoload cookie.
----------------------------
revision 2.35
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +18 -7;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.34
date: 2009-09-24 01:32:36 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: a61onwPHMfaToU4u;
* Makefile.in: Add tramp-imap.el
----------------------------
revision 2.33
date: 2009-02-06 08:13:49 -0800;  author: albinus;  state: Exp;  lines: +7 -1;  commitid: eySQZ9ew2L2qloBt;

* Makefile.in: Add tramp-gvfs.el
----------------------------
revision 2.32
date: 2008-05-13 14:14:42 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: GZfSFoYWQ9CMEQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.31
date: 2008-03-21 09:39:28 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: N4h5zT2DVhdZP0Ws;
Fix up encoding.
----------------------------
revision 2.30
date: 2008-02-03 03:10:31 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: RuRWJM1Uq3ONwWPs;
*** empty log message ***
----------------------------
revision 2.29
date: 2008-01-12 03:04:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.28
date: 2007-10-17 15:09:51 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: gM2uQ3KaIjZIFZBs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-cmds.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-cmds.el.

* lisp/tramp.el (top): Put load of all tramp-* files into a dolist.
Require tramp-cmds.el.
(tramp-clear-passwd): Add parameter VEC.  Adapt all callees.
(tramp-append-tramp-buffers): Apply `tramp-list-tramp-buffers'.

* lisp/tramp-cmds.el: New file.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Apply VEC to
`tramp-clear-passwd'.
----------------------------
revision 2.27
date: 2007-09-30 09:32:29 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 2.26
date: 2007-09-28 08:52:02 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 2.25
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +6 -5;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.24
date: 2007-07-07 13:36:57 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: PGItjXt3pJxzrSos;
*** empty log message ***
----------------------------
revision 2.23
date: 2007-07-07 13:35:31 -0700;  author: albinus;  state: Exp;  lines: +9 -3;  commitid: R05FbXfuLJwRqSos;

* aclocal.m4 (AC_EMACS_INFO): Check whether tramp-util.el and
tramp-vc.el are still needed.

* Makefile.in (EMACS_EL_FILES): Remove tramp-util.el and
tramp-vc.el.

* lisp/Makefile.in (EMACS_UTILS): New variable.
(LISP_FILES): Add tramp-util.el and tramp-vc.el depending on
$EMACS_UTILS.
----------------------------
revision 2.22
date: 2007-07-01 22:09:51 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.21
date: 2007-07-01 11:31:34 -0700;  author: albinus;  state: Exp;  lines: +4 -6;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.20
date: 2007-03-25 11:39:27 -0700;  author: albinus;  state: Exp;  lines: +10 -5;

* aclocal.m4 (AC_EMACS_INFO): Add gateway support.
(AC_EMACS_CHECK_LIB): Remove.

* configure.ac: Add gateway support.

* lisp/Makefile.in: Add gateway support.

* lisp/tramp.el (top): Require tramp-gw conditionally only.
(tramp-methods): Add port spec to "plink", "plink1" and "pscp"
methods.

* texi/Makefile.in: Add gateway support.

* texi/tramp.texi (all): Make gateway text conditional.
----------------------------
revision 2.19
date: 2007-02-13 23:14:45 -0800;  author: albinus;  state: Exp;  lines: +3 -2;

* Makefile.in: Add tramp-gw.el

* lisp/Makefile.in: Add tramp-gw.el

* lisp/tramp-gw.el: New package.

* lisp/tramp.el (top): Require tramp-gw.
(tramp-methods): Add `tramp-gw-args' and `tramp-default-port' for
ssh and telnet methods.
(tramp-message): Catch errors.
(tramp-action-yesno, tramp-action-yn): Trace messages.
(tramp-maybe-open-connection): Handle gateways.
(tramp-read-passwd): New parameter PROC. Used in order to improve
password prompt. Adapt callees.
----------------------------
revision 2.18
date: 2007-01-10 14:04:37 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el (tramp-maybe-open-connection): The sent command must
ensure that the process terminates, finally.  Write the command
compatible for shells and w32 COMSPEC.
----------------------------
revision 2.17
date: 2006-12-27 14:12:29 -0800;  author: albinus;  state: Exp;  lines: +4 -3;

* Makefile.in: Add tramp-fish.el

* lisp/tramp-fish.el: New package.

* lisp/tramp.el (top): Require tramp-fish.
(tramp-inodes): New defvar.
(tramp-handle-expand-file-name): Cache "home-directory".
(tramp-get-inode): New defun.

* lisp/tramp-smb.el (tramp-smb-no-stat, tramp-smb-inodes)
(tramp-smb-get-inode): Removed.  Apply new names.

* lisp/tramp-util.el (tramp-advice-executable-find): Add check for
`tramp-fish-file-name-handler'.

* texi/tramp.texi (Inline methods): Add `fish' method.
----------------------------
revision 2.16
date: 2006-03-14 13:40:09 -0800;  author: albinus;  state: Exp;  lines: +4 -3;

DESTDIR support
----------------------------
revision 2.15
date: 2005-08-28 11:56:37 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/trampcache.el: Removed.  Replaced by tramp-cache.el.

* lisp/tramp-cache.el: New file.  Implementation inspired by work of
Daniel Pittman <daniel@rimspace.net>.

* lisp/tramp.el: Introduce filename caching.  Require `tramp-cache'.
(tramp-syntax): Correct doc string.
(tramp-handle-file-truename, tramp-handle-file-exists-p)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-accessible-directory-p)
(tramp-handle-file-directory-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p): Add `with-cache-data'.
(tramp-handle-file-attributes): Add `with-cache-data'.  Check also
for existence of applicable stat(1) command, which is preferred
over the Perl script.
(tramp-handle-file-attributes-with-stat, tramp-get-remote-stat):
New defuns.
(tramp-handle-set-file-modes, tramp-handle-add-name-to-file)
(tramp-do-copy-or-rename-file, tramp-handle-delete-directory)
(tramp-handle-delete-file, tramp-handle-dired-compress-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-write-region): Flush cashed data.
(tramp-pre-connection): Initialise cache.
(tramp-post-connection): Check for stat(1) command.
(tramp-maybe-open-connection): Optimize code.
(tramp-convert-file-attributes): Handle also attributes returned
by stat.

* test/tramp-time.el: New file.
----------------------------
revision 2.14
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.13
date: 2005-06-26 12:45:08 -0700;  author: albinus;  state: Exp;  lines: +6 -6;

* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fourth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in: Adapt email addresses.
----------------------------
revision 2.12
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 2.11
date: 2004-05-16 14:09:01 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


* tramp-uu.el (tramp-uuencode-region): Padding characters aren't
counted for (last) line.

* Makefile.in (TODO): New item, inspired by Kais change.
----------------------------
revision 2.10
date: 2004-03-14 12:59:18 -0800;  author: albinus;  state: Exp;  lines: +7 -6;
branches:  2.10.2;


* INSTALL: Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.

* Makefile.in: Don't check for $(USE_CONTRIB) any longer.
(xemacs): Use ""$(MAKE)" instead of "make".
(emacs): Use "--with-emacs" configure option.
(savannah): Use "ftp-upload" instead of "scp".  Hope it works for
Kai.

* aclocal.m4 (AC_EMACS_LISP): Use "-vanilla" in case of XEmacs.
(AC_CONTRIB_FILES): New function.  Checks for the need of
provisioning of a contributed package.

* configure.ac: Apply `AC_CONTRIB_FILES' for all Lisp files of
contrib directory.

* contrib/README: Clarify run-at-time.el.

* lisp/Makefile.in: New environment variables $(CONTRIB_FILES) and
$(INSTALL_FILES).  Don't check for $(USE_CONTRIB) any longer.
(all): Depends on $(CONTRIB_FILES), too.
(install): Copy $(INSTALL_FILES) but $?.
(distclean): Remove also $(CONTRIB_FILES).

* texi/Makefile.in (savannah): Simplify copy command.

* texi/trampinst.texi (Installation, Installation parameters)
(Load paths): Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.
----------------------------
revision 2.9
date: 2004-03-05 12:47:50 -0800;  author: albinus;  state: Exp;  lines: +3 -3;


* configure.ac: Write "${MAKE}" if appropriate (but "make").

* Makefile.in: (.PHONY): Remove unused targets.
(distclean): Remove also *.tar.gz*
(tar): Call gpg.

* lisp/Makefile.in (.PHONY): Remove unused targets.
(install): Depends on "all".

* lisp/tramp-vc.el (tramp-vc-workfile-unchanged-p): Correct typo
("file" -> "filename").  Reported by Kim F. Storm <storm@cua.dk>.

* texi/Makefile.in (SINFO): Removed.
(.PHONY): New Target.
----------------------------
revision 2.8
date: 2004-02-29 10:06:49 -0800;  author: kai;  state: Exp;  lines: +0 -10;
* Makefile.in (dist, install-html): Remove unused targets.

* Makefile.in (install-ftp, site-lisp): Remove unused targets.

* Makefile.in (site-info, install-html): Remove unused targets.
----------------------------
revision 2.7
date: 2003-07-26 12:46:54 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


	* configure.ac: Add "-s" option for make version check.  Kai's
	kludge not needed anymore.
	* lisp/Makefile.in (.PHONY): Add `xemacs'.
----------------------------
revision 2.6
date: 2003-07-26 05:42:40 -0700;  author: kai;  state: Exp;  lines: +3 -0;
* Makefile.in (xemacs): Use new `xemacs' target in lisp subdir,
instead of copying *.el files manually.

* Makefile.in (xemacs): New target to copy files to XEmacs
working dir.  (For use by Kai only.)
----------------------------
revision 2.5
date: 2003-07-15 14:00:32 -0700;  author: albinus;  state: Exp;  lines: +7 -4;


* INSTALL: List required GNU software for installation.

* lisp/Makefile.in (LISP_FILES): tramp-ftp.el is conditional, too.
(install): Install only files belonging to the respective Emacs
flavour.
----------------------------
revision 2.4
date: 2003-07-14 14:38:14 -0700;  author: albinus;  state: Exp;  lines: +14 -3;

* aclocal.m4 (AC_EMACS_INFO): Fix typo.

* configure.ac: Add a check for suitable make version.
Reported by Sven Utcke <utcke@informatik.uni-hamburg.de>.

* test.makefile: New file.  Used for checking proper "make"
version.

* lisp/Makefile.in (LISP_FILES): New variable.  Used to distinguish
collection of *.el files for Emacs and XEmacs.
Reported by Sven Utcke <utcke@informatik.uni-hamburg.de>.
(EM): Use `-vanilla' option for XEmacs call.
(all): depend on $(LISP_FILES).
----------------------------
revision 2.3
date: 2003-07-14 00:55:40 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(MKDIR): New variable.
(install): Create installation directory, if necessary.
----------------------------
revision 2.2
date: 2003-05-24 15:41:01 -0700;  author: albinus;  state: Exp;  lines: +7 -4;

* Makefile.in (configure): It depends on "aclocal.m4", too.

* aclocal.m4, lisp/Makefile.in, contrib/Makefile.in: Use
`--no-site-file' option for Emacs call, in order to avoid loading of
Tramp in site specific init files.  Reported by Harry Putnam
<reader@newsguy.com>.

* lisp/Makefile.in (.PHONY): New target.
(all): "trampver.el" and "tramp.el" must be handled first due to
dependencies.

* lisp/tramp.el (tramp-completion-function-alist): Add completion
function for "remcp", "remsh" and "plink1".

* texi/tramp.texi (Inline methods): Add methods `remsh' and `plink1'.
(External transfer methods): Add method `remcp'.
(Multi-hop Methods): Add method `remsh'.
----------------------------
revision 2.1
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.10.2.6
date: 2008-02-02 02:28:02 -0800;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: LfKT9oXJL43ekOPs;
* Makefile.in (LISP_FILES): Remove trampcache.el.
----------------------------
revision 2.10.2.5
date: 2007-07-25 12:37:30 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.10.2.4
date: 2006-03-14 13:15:57 -0800;  author: albinus;  state: Exp;  lines: +4 -3;

DESTDIR support
----------------------------
revision 2.10.2.3
date: 2005-07-10 14:36:48 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.10.2.2
date: 2005-06-26 12:23:35 -0700;  author: albinus;  state: Exp;  lines: +6 -6;


* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fifth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in:
----------------------------
revision 2.10.2.1
date: 2004-12-29 13:27:49 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp-util.el (tramp-minor-mode): New minor mode.  Add it to
`find-file-hooks'.
(tramp-minor-mode-map): Respective map.  Add remapping for
`compile' and `recompile'.
(tramp-recompile): New defun.

* texi/tramp.texi (Compilation): New section, describing compilation of
remote files.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/base64.el,v
Working file: lisp/base64.el
head: 2.1
branch:
locks: strict
access list:
symbolic names:
	tramp-xemacs-pkg: 2.0.0.4
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 5;	selected revisions: 5
description:
snarfed from Gnus 5.8
----------------------------
revision 2.1
date: 2001-12-30 12:06:06 -0800;  author: kaig;  state: dead;  lines: +0 -0;
*** empty log message ***
----------------------------
revision 2.0
date: 2001-02-28 02:39:27 -0800;  author: grossjoh;  state: Exp;  lines: +0 -0;
branches:  2.0.4;
Going stable?
----------------------------
revision 1.2
date: 2001-01-03 06:32:26 -0800;  author: grossjoh;  state: Exp;  lines: +10 -10;
New version from Oort Gnus as of today.
----------------------------
revision 1.1
date: 2000-05-28 13:16:55 -0700;  author: grossjoh;  state: Exp;
Snarf base64.el from Gnus 5.8.
----------------------------
revision 2.0.4.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +0 -0;
Removing files not needed for XEmacs package
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/format-spec.el,v
Working file: lisp/format-spec.el
head: 2.1
branch:
locks: strict
access list:
symbolic names:
	tramp-xemacs-pkg: 2.0.0.4
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 4;	selected revisions: 4
description:
Snarfed from Gnus 5.8
----------------------------
revision 2.1
date: 2001-12-30 12:06:06 -0800;  author: kaig;  state: dead;  lines: +0 -0;
*** empty log message ***
----------------------------
revision 2.0
date: 2001-02-28 02:39:27 -0800;  author: grossjoh;  state: Exp;  lines: +0 -0;
branches:  2.0.4;
Going stable?
----------------------------
revision 1.1
date: 2000-05-06 04:07:08 -0700;  author: grossjoh;  state: Exp;
Use format-spec.el from Gnus 5.8.
----------------------------
revision 2.0.4.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +0 -0;
Removing files not needed for XEmacs package
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-cache.el,v
Working file: lisp/tramp-cache.el
head: 2.66
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.63
	branch-2-1-stable: 2.57.0.2
	branchpoint-2-1-stable: 2.57
	V-2-1-19: 2.57
	V-2-1-18: 2.57
	V-2-1-17: 2.55
	V-2-1-16: 2.50
	V-2-1-15: 2.49
	V-2-1-14: 2.44
	V-2-1-13: 2.42
	V-2-1-12: 2.40
	V-2-1-11: 2.37
	V-2-1-10: 2.32
	V-2-1-9: 2.26
	V-2-1-8: 2.24
	V-2-1-7: 2.20
	V-2-1-6: 2.17
	V-2-1-5: 2.8
	V-2-1-4: 2.6
keyword substitution: kv
total revisions: 67;	selected revisions: 67
description:
----------------------------
revision 2.66
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.65
date: 2011-01-19 03:08:59 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 2.64
date: 2010-12-14 12:26:20 -0800;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: aYRPhr9xEY3N0i0v;
* tramp-cache.el (tramp-persistency-file-name): Use
`locate-user-emacs-file' if fboundp.
----------------------------
revision 2.63
date: 2010-11-13 02:52:22 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 2.62
date: 2010-10-02 04:51:46 -0700;  author: albinus;  state: Exp;  lines: +16 -13;  commitid: VuxAzfL6W3iEvRQu;
* tramp.el (tramp-completion-reread-directory-timeout): Fix
docstring.

* tramp-cache.el (tramp-cache-inhibit-cache): Remove.
(tramp-get-file-property): Replace `tramp-cache-inhibit-cache' by
`remote-file-name-inhibit-cache'.  Check also for an integer
value.  Add/increase counter when `tramp-verbose' >= 10.
(tramp-set-file-property): Add/increase counter when
`tramp-verbose' >= 10.

* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-cleanup-all-buffers): Set tramp-autoload cookie.
(tramp-bug): Set tramp-autoload cookie.  Report all interned
tramp-* variables.  Report also `remote-file-name-inhibit-cache'.
(tramp-reporter-dump-variable): Fix docstring.  Mask non-7bit
characters only in strings.

* tramp-compat.el (remote-file-name-inhibit-cache): Define due to
backward compatibility.

* tramp-sh.el (tramp-handle-verify-visited-file-modtime)
(tramp-handle-file-name-all-completions)
(tramp-handle-vc-registered): Use
`remote-file-name-inhibit-cache'.
(tramp-open-connection-setup-interactive-shell): Call
`tramp-cleanup-connection' directly.
----------------------------
revision 2.61
date: 2010-09-15 13:14:11 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: cEIrA9vZbWCTPIOu;
Ensure XEmacs compatibility.

* Makefile.in (tramp-loaddefs.el): Adapt `autoload-trim-file-name'
and feature name.
(distclean): Remove trampver.el, it is handled in the upper Makefile.

* tramp-compat.el (tramp-compat-with-temp-message)
(tramp-compat-font-lock-add-keywords, tramp-compat-process-get)
(tramp-compat-process-put): New defuns.

* tramp.el (top):
* tramp-gvfs.el (top):
* tramp-cache.el (top): Use `tramp-compat-font-lock-add-keywords'.

* tramp.el (tramp-progress-reporter-update): Use `tramp-compat-funcall.

* tramp.el (tramp-process-actions):
* tramp-gvfs.el (tramp-handle-vc-registered):
* tramp-sh.el (tramp-gvfs-handler-askquestion)
(tramp-get-remote-stat, tramp-get-remote-readlink): Use
`tramp-compat-with-temp-message'.

* tramp-sh.el (top): Require 'cl.
(tramp-handle-start-file-process): Use `tramp-compat-process-get'.
(tramp-open-connection-setup-interactive-shell): Use
`tramp-compat-process-put'.

* tramp-util.el (top): Require 'tramp-sh.
----------------------------
revision 2.60
date: 2010-09-13 06:18:45 -0700;  author: albinus;  state: Exp;  lines: +39 -41;  commitid: hctSFHPfw5XxBqOu;
Major code cleanup.  Split tramp.el into tramp.el and tramp-sh.el.

* Makefile.in (LISP_FILES): Remove tramp-fish.el.  Add tramp-sh.el.

* tramp.el (top): Don't show loading message.  Require just
'tramp-compat, everything else is required there.  Use
`ignore-errors' where appropriate.
(tramp-inline-compress-start-size, tramp-copy-size-limit)
(tramp-terminal-type, tramp-end-of-output)
(tramp-initial-end-of-output, tramp-completion-function-alist-rsh)
(tramp-completion-function-alist-ssh)
(tramp-completion-function-alist-telnet)
(tramp-completion-function-alist-su)
(tramp-completion-function-alist-putty, tramp-remote-path)
(tramp-remote-process-environment, tramp-sh-extra-args)
(tramp-actions-before-shell, tramp-uudecode)
(tramp-perl-file-truename, tramp-perl-file-name-all-completions)
(tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode)
(tramp-vc-registered-read-file-names, tramp-file-mode-type-map)
(tramp-file-name-handler-alist, tramp-make-tramp-temp-file)
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-as-directory)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-exists-p, tramp-handle-file-attributes)
(tramp-do-file-attributes-with-ls)
(tramp-do-file-attributes-with-perl)
(tramp-do-file-attributes-with-stat)
(tramp-handle-set-visited-file-modtime)
(tramp-handle-verify-visited-file-modtime)
(tramp-handle-set-file-modes, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-remote-selinux-p)
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-newer-than-file-p, tramp-handle-file-modes)
(tramp-handle-file-directory-p, tramp-handle-file-regular-p)
(tramp-handle-file-symlink-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p)
(tramp-handle-directory-file-name, tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-do-directory-files-and-attributes-with-perl)
(tramp-do-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions)
(tramp-handle-file-name-completion, tramp-handle-add-name-to-file)
(tramp-handle-copy-file, tramp-handle-copy-directory)
(tramp-handle-rename-file, tramp-do-copy-or-rename-file)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-dired-compress-file, tramp-handle-dired-uncache)
(tramp-handle-insert-directory)
(tramp-handle-unhandled-file-name-directory)
(tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-executable-find, tramp-process-sentinel)
(tramp-handle-start-file-process, tramp-handle-process-file)
(tramp-handle-call-process-region, tramp-handle-shell-command)
(tramp-handle-file-local-copy, tramp-handle-file-remote-p)
(tramp-handle-insert-file-contents)
(tramp-handle-insert-file-contents-literally)
(tramp-handle-find-backup-file-name)
(tramp-handle-make-auto-save-file-name, tramp-handle-write-region)
(tramp-vc-registered-file-names, tramp-handle-vc-registered)
(tramp-sh-file-name-handler, tramp-vc-file-name-handler)
(tramp-maybe-send-script, tramp-set-auto-save, tramp-run-test)
(tramp-run-test2, tramp-find-executable, tramp-set-remote-path)
(tramp-find-file-exists-command, tramp-open-shell)
(tramp-find-shell, tramp-barf-if-no-shell-prompt)
(tramp-open-connection-setup-interactive-shell)
(tramp-local-coding-commands, tramp-remote-coding-commands)
(tramp-find-inline-encoding, tramp-call-local-coding-command)
(tramp-inline-compress-commands, tramp-find-inline-compress)
(tramp-compute-multi-hops, tramp-maybe-open-connection)
(tramp-send-command , tramp-wait-for-output)
(tramp-send-command-and-check, tramp-barf-unless-okay)
(tramp-send-command-and-read, tramp-mode-string-to-int)
(tramp-convert-file-attributes, tramp-check-cached-permissions)
(tramp-file-mode-from-int, tramp-file-mode-permissions)
(tramp-shell-case-fold, tramp-make-copy-program-file-name)
(tramp-method-out-of-band-p, tramp-local-host-p)
(tramp-get-remote-path, tramp-get-remote-tmpdir)
(tramp-get-ls-command, tramp-get-ls-command-with-dired)
(tramp-get-test-command, tramp-get-test-nt-command)
(tramp-get-file-exists-command, tramp-get-remote-ln)
(tramp-get-remote-perl, tramp-get-remote-stat)
(tramp-get-remote-readlink, tramp-get-remote-trash)
(tramp-get-remote-id, tramp-get-remote-uid, tramp-get-remote-gid)
(tramp-get-local-uid, tramp-get-local-gid)
(tramp-get-inline-compress, tramp-get-inline-coding, ): Move to
tramp-sh.el.
(tramp-methods, tramp-default-method-alist)
(tramp-default-user-alist, tramp-foreign-file-name-handler-alist):
Move initialization to tramp-sh.el.
(tramp-temp-name-prefix): Make it a defconst.
(tramp-dissect-file-name): Don't check anymore for multi-hop
methods.
(tramp-debug-outline-regexp): Add a docstring.
(tramp-debug-outline-level): Renamed from `tramp-outline-level'.
(tramp-get-debug-buffer): Use it.

* tramp-cache.el (top): Set tramp-autoload cookie for
initialization forms.
(tramp-set-connection-property): Don't protect `tramp-message'
call, it isn't necessary any longer.
(tramp-dump-connection-properties): Use `ignore-errors'.

* tramp-compat.el (top): Require 'advice, 'format-spec,
'password-cache and 'auth-source.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Require 'tramp-sh.

* tramp-gw.el (tramp-gw-open-network-stream): Use `ignore-errors'.

* tramp-sh.el: New file, derived from tramp.el.
(top): Initialize `tramp-methods', `tramp-default-method-alist',
`tramp-default-user-alist', tramp-foreign-file-name-handler-alist.
Remove "scp1_old", "scp2_old", "ssh1_old", "ssh2_old".  Use
`ignore-errors' where appropriate.
(tramp-sh-file-name-handler-alist): Renamed from
`tramp-file-name-handler-alist'.
(tramp-send-command-and-check): Return t or nil.  Remove all
`zerop' checks, where called.
(tramp-handle-set-file-modes)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-delete-directory, tramp-handle-delete-file)
(tramp-maybe-send-script, ): Use `tramp-barf-unless-okay'.
(tramp-sh-file-name-handler, tramp-send-command-and-check)
(tramp-get-remote-ln): Set tramp-autoload cookie.
----------------------------
revision 2.59
date: 2010-09-09 06:21:11 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: YV9TD6OpPJ8hKUNu;
* tramp-cache.el (tramp-parse-connection-properties): Set tramp-autoload cookie.
----------------------------
revision 2.58
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +53 -17;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.57
date: 2010-02-15 06:56:16 -0800;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: zC9KezLCr9DlTrnu;
branches:  2.57.2;
* tramp.el (tramp-process-actions, tramp-read-passwd):
* tramp-gvfs.el (tramp-gvfs-maybe-open-connection): Use VEC
instead of PROC for caching "first-password-request".  Otherwise,
new processes would not profit from passwords already entered.

* tramp-cache.el (tramp-dump-connection-properties): Don't save
"first-password-request" property.
----------------------------
revision 2.56
date: 2010-01-14 20:52:28 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: zweSrHgxjm35ypju;
Add 2010 to copyright years.
----------------------------
revision 2.55
date: 2009-10-11 06:31:32 -0700;  author: albinus;  state: Exp;  lines: +6 -4;  commitid: zEupd7rjbvgyv77u;
* tramp-cache.el (tramp-flush-connection-property): The hash can
be empty.
----------------------------
revision 2.54
date: 2009-10-07 04:05:39 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: 6qRI3AgHleDtPA6u;
* tramp-cache.el (tramp-flush-connection-property): Add trace message.
----------------------------
revision 2.53
date: 2009-08-16 08:16:59 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: LrL1mxNKxSMkTVZt;
* tramp-cache.el (top): Autoload `tramp-time-less-p'.
----------------------------
revision 2.52
date: 2009-08-05 14:19:38 -0700;  author: albinus;  state: Exp;  lines: +22 -5;  commitid: fR8omMyN0JUEfyYt;
* tramp-cache.el (tramp-cache-inhibit-cache): Extend doc string.
It allows also timestamps.
(tramp-get-file-property): Check for timestamps in
`tramp-cache-inhibit-cache'.
(tramp-set-file-property): Write timestamp.
----------------------------
revision 2.51
date: 2009-08-02 10:05:50 -0700;  author: albinus;  state: Exp;  lines: +6 -3;  commitid: N09YlNY0deLzW8Yt;
* tramp-cache.el (tramp-cache-inhibit-cache ): New defvar.
(tramp-get-file-property): Use it.
----------------------------
revision 2.50
date: 2009-04-12 12:21:57 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: vc9Rsom6oFytiLJt;
* tramp-cache.el (tramp-flush-directory-property): Use the
localname of KEY for check.
----------------------------
revision 2.49
date: 2009-02-01 02:14:36 -0800;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: H1URx2dfr8ecwIAt;
* tramp-cache.el (top): Autoload `tramp-run-real-handler'.
----------------------------
revision 2.48
date: 2009-01-05 11:53:13 -0800;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: 2UsLlPfllvOvAixt;
Update copyrights for 2009.
----------------------------
revision 2.47
date: 2008-12-04 12:40:30 -0800;  author: albinus;  state: Exp;  lines: +34 -34;  commitid: HuFTmZgaRKrvSbtt;
* tramp-cache.el (tramp-dump-connection-properties): Polish the
check, whether to dump the data.
----------------------------
revision 2.46
date: 2008-11-30 22:31:33 -0800;  author: albinus;  state: Exp;  lines: +41 -34;  commitid: lELXaHok9mSehJst;
* tramp-cache.el (tramp-cache-data-changed): New defvar.
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-dump-connection-properties): Use it.
----------------------------
revision 2.45
date: 2008-09-07 04:09:53 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: pdVbRCbtq7U7yPht;
* tramp-cache.el (tramp-flush-file-function): Fix typo in docstring.
(tramp-parse-connection-properties): Reflow docstring.
----------------------------
revision 2.44
date: 2008-05-13 14:15:01 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: CJTbR2TMcH7TEQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.43
date: 2008-04-27 09:30:07 -0700;  author: albinus;  state: Exp;  lines: +5 -4;  commitid: 4fr9ne3hUQs2BL0t;
* tramp.el (tramp-handle-make-symbolic-link)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-insert-directory, tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-insert-file-contents, tramp-handle-write-region, )
* tramp-cache.el (tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property)
* tramp-cpmpat.el (tramp-compat-make-temp-file)
* tramp-fish.el (tramp-fish-handle-expand-file-name): Disable
`file-name-handler-alist' when handling localname.  It could have
a remote file syntax, like a VMS file name.
----------------------------
revision 2.42
date: 2008-02-03 03:38:53 -0800;  author: albinus;  state: Exp;  lines: +2 -5;  commitid: 7Yy8SvdBlO9xGWPs;
* tramp-cache.el (tramp-flush-connection-property): Remove EVENT.
----------------------------
revision 2.41
date: 2008-01-12 03:04:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.40
date: 2007-11-07 12:34:52 -0800;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: 6QaEdkjJBQXZsGEs;

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Don't expand
the remote connection identification.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Set also $PS2 and $PS3 when setting $PS1.  Check for shell echoing
before calling stty.

* lisp/tramp-cache.el (tramp-cache-print)
(tramp-dump-connection-properties): Fix docstring.
(tramp-list-connections): Renamed from
`tramp-cache-list-connections'.

* lisp/tramp-cmds.el (tramp-cleanup-connection): Apply it.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Don't expand the
remote connection identification when setting connection property.

* lisp/tramp-smb.el (tramp-smb-handle-substitute-in-file-name): "//"
substitutes only in the local filename part.

* texi/tramp.texi (Overview): Mention also the PuTTY integration under
Win32.  Remove paragraphs about Tramp's experimental status.
(Frequently Asked Questions): Add code example for highlighting
the mode line.
----------------------------
revision 2.39
date: 2007-11-06 13:11:38 -0800;  author: albinus;  state: Exp;  lines: +30 -20;  commitid: 94tJSiGFLfU2IyEs;

* lisp/tramp.el (top): Don't autoload `tramp-cache-print'.

* lisp/tramp-cache (tramp-cache-print): Move down.
(tramp-cache-list-connections): New defun.

* lisp/tramp-cmds.el (tramp-cleanup-connection): Use it.
----------------------------
revision 2.38
date: 2007-10-30 13:21:43 -0700;  author: albinus;  state: Exp;  lines: +10 -3;  commitid: WH2b3jFqSDeVEEDs;

* lisp/tramp.el (tramp-maybe-open-connection): Set $LC_ALL to "C".

* lisp/tramp-cache.el (tramp-flush-file-function): Check also
`default-directory' if `buffer-file-name' does not return a
string.  Added to `eshell-pre-command-hook'.
----------------------------
revision 2.37
date: 2007-09-28 08:52:02 -0700;  author: albinus;  state: Exp;  lines: +12 -12;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 2.36
date: 2007-09-04 12:22:31 -0700;  author: albinus;  state: Exp;  lines: +4 -2;  commitid: qNUmKLq98MHc8sws;

* lisp/tramp-cache.el (top): Improve error message when
`tramp-persistency-file-name' is corrupted.
----------------------------
revision 2.35
date: 2007-08-07 13:20:28 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: hUSC79nhK79MlRss;

* lisp/tramp.el (tramp-handle-shell-command): Handle OUTPUT-BUFFER and
ERROR-BUFFER more robust.  Display output.
(tramp-handle-process-file): Fix bug inserting resulting output.

* lisp/tramp-cache.el (top): Read persistent connection history when
cache is empty.
----------------------------
revision 2.34
date: 2007-07-29 08:39:39 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: 6Mig8uNEFEeF5Grs;
*** empty log message ***
----------------------------
revision 2.33
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +3 -4;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.32
date: 2007-07-12 14:09:35 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: 07w8tRE3nh6Pswps;
*** empty log message ***
----------------------------
revision 2.31
date: 2007-07-01 22:09:51 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.30
date: 2007-07-01 11:31:34 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.29
date: 2007-06-20 13:26:39 -0700;  author: albinus;  state: Exp;  lines: +2 -4;  commitid: 6Fqxls1tJZzgVGms;

* lisp/tramp.el:
* lisp/tramp-cache.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el: Use `expand-file-name' instead of `concat' where
appropriate.

* lisp/tramp.el (tramp-action-yesno, tramp-action-yn): Protect
`pop-to-buffer' by `save-match-data'.

* texi/tramp.texi (Filename completion): Rework examples for local
filename completion.
----------------------------
revision 2.28
date: 2007-05-31 13:15:43 -0700;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: ST0w65uyFLXNv7ks;

* lisp/tramp-cache.el (tramp-persistency-file-name): Check also for
`user-emacs-directory' and `user-init-directory'.

* lisp/tramp-gw.el (tramp-gw-open-connection): Apply `vector' instead
of `make-tramp-file-name'.

* lisp/tramp-util.el (all): Quote the function names in
`tramp-util-unload-hook' if they aren't symbols yet.
(tramp-advice-before-ediff-exec-process): New defadvice.
----------------------------
revision 2.27
date: 2007-05-27 12:54:43 -0700;  author: albinus;  state: Exp;  lines: +6 -6;  commitid: 7PsnkV1mXPbnwBjs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-method,
(tramp-file-name-user, tramp-file-name-host)
(tramp-file-name-localname): New defuns, replacing defstruct
`tramp-file-name'.
(tramp-completion-dissect-file-name1, tramp-compute-multi-hops)
(tramp-dissect-file-name): Apply `vector' instead of
`make-tramp-file-name'.
(tramp-do-copy-or-rename-file-out-of-band): Aset 3rd index instead
of 4th, when setting localname.
(tramp-compute-multi-hops): Aset 2nd index instead of 3rd, when
setting host.

* lisp/tramp-cache.el (all): Aset 3rd index instead of 4th, when
unifying localname.
----------------------------
revision 2.26
date: 2007-03-31 13:52:15 -0700;  author: albinus;  state: Exp;  lines: +0 -31;

* lisp/tramp.el (top): Don't require 'tramp-cache, it results in an
endless loop.  Autoload needed functions instead of.  Declare
needed gateway symbols, when tramp-gw cannot be loaded.
(with-parsed-tramp-file-name): Simplify `edebug-form-spec'.
(with-file-property, with-connection-property): New defmacros,
moved from tramp-cache.  This was necessary, because macros cannot
be autoloaded.
(tramp-register-file-name-handler)
(tramp-register-completion-file-name-handler): New defsubst,
derived from `tramp-register-file-name-handlers'.  The split is
necessary because Tramp's file name handlers must be registered at
different startup places.

* lisp/tramp-cache.el (with-file-property, with-connection-property):
Move them to tramp.el.

* texi/tramp.texi (Frequently Asked Questions): Add recentf to
approaches shortening Tramp file names to be typed.
(Traces and Profiles): Describe call traces; text moved from Bug
Reports.
----------------------------
revision 2.25
date: 2007-02-01 14:46:31 -0800;  author: albinus;  state: Exp;  lines: +10 -7;

* lisp/tramp-cache.el (tramp-flush-file-function): Renamed from
`tramp-cache-before-revert-function'.  Added to
`kill-buffer-hook'.
----------------------------
revision 2.24
date: 2006-12-03 03:55:27 -0800;  author: albinus;  state: Exp;  lines: +7 -3;

* tramp-cache.el (tramp-flush-directory-property): Check whether
KEY is a string.
(tramp-flush-connection-property): Work with a copy of the key in
order to avoid side effects.

* tramp-smb.el (tramp-smb-handle-insert-directory): Handle
WILDCARD and FULL-DIRECTORY-P.
(tramp-smb-handle-make-directory-internal): Flush also directory,
because `file-attributes' is computed from its entries.
(tramp-smb-get-file-entries): Parameter is a DIRECTORY.
----------------------------
revision 2.23
date: 2006-11-30 14:20:39 -0800;  author: albinus;  state: Exp;  lines: +3 -0;

* lisp/tramp-cache.el (tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property): Work with a
copy of the vector in order to avoid side effects.

* lisp/tramp-smb.el (tramp-smb-errors): Add error message from Windows
Server 2003.
(tramp-smb-not-handled): Removed, replaced by `ignore'.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-directory)
(tramp-smb-handle-delete-file, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Flush also directory, because
`file-attributes' is computed from its entries.
(tramp-smb-file-name-handler, tramp-smb-handle-file-attributes)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-name-all-completions)
(tramp-smb-handle-file-writable-p)
(tramp-smb-handle-insert-directory, tramp-smb-get-file-entries)
(tramp-smb-get-inode): Simplify implementation.
(tramp-smb-open-connection): Add parameter "-s /dev/null".
----------------------------
revision 2.22
date: 2006-11-19 22:30:04 -0800;  author: albinus;  state: Exp;  lines: +10 -4;

* lisp/tramp-cache.el (tramp-get-connection-property)
(tramp-set-connection-property): Work with a copy of the vector in
order to avoid side effects.

* lisp/tramp-smb.el (tramp-smb-maybe-open-connection): Erase the buffer
when the process is killed, because it is reused.
----------------------------
revision 2.21
date: 2006-10-24 22:47:09 -0700;  author: albinus;  state: Exp;  lines: +8 -6;

* configure.ac: Bump version (to 2.1.8-pre).

* lisp/tramp.el (tramp-yn-prompt-regexp): Add question from plink.
(tramp-message): Reduce messages in minibuffer.
(tramp-handle-call-process): Fix error in error handling.
(tramp-touch): UTC handling is not possible for XEmacs.

* lisp/tramp-cache.el (top): Don't autoload macro
`with-parsed-tramp-file-name' but function
`tramp-dissect-file-name'.
(tramp-cache-before-revert-function): Change implementation
accordingly.  Reported by Jonathan Hankins
<jonathan-hankins@mindspring.com>.

* lisp/tramp-util.el (tramp-advice-executable-find): Check for
`load-in-progress)'.
(tramp-advice-call-process): Add check for
`tramp-fish-file-name-handler'.
(tramp-grep-setup, tramp-gud-setup, tramp-ediff-setup): Remove
functions, and call defadvices directly. There is no need for
`eval-after-load'.
(top): Add defadvices for `gnus-1', `jka-compr-call-process' and
`jka-compr-partial-uncompress'.
----------------------------
revision 2.20
date: 2006-08-12 09:56:28 -0700;  author: albinus;  state: Exp;  lines: +15 -7;

* tramp.el (tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-stat): Add
quotes to the user and group elements.
(tramp-handle-file-attributes-with-ls): Goto buffer
head before reading.  Add also quotes to user and group entries
when not in integer format.

* tramp-cache.el: Tune autoloading of functions from tramp.el.
Wrap it with `eval-when-compile', because this is needed for
compiler pacification only.
(tramp-set-connection-property): Trap error from missing function
`tramp-message´ during startup, where we don't miss the debug
messages.
----------------------------
revision 2.19
date: 2006-06-04 08:36:16 -0700;  author: albinus;  state: Exp;  lines: +32 -18;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Expand
`datarootdir´.  Perform all expansions with "eval".

* configure.ac: Add "-o /dev/null" to texi2dvi call.

* lisp/tramp.el (tramp-process-actions): Pop connection buffer in case
of error.  Modify error message depending on `tramp-action'.

* lisp/tramp-cache.el (tramp-persistency-file-name): Default value is
"~/.emacs.d/tramp" or "~/.xemacs/tramp", respectively.  Suggested
by Romain Francoise <romain@orebokech.com>.
(tramp-dump-connection-properties): Suppress error when
`tramp-persistency-file-name´ cannot be written.

* texi/tramp.texi (Connection caching): Change default file name.
----------------------------
revision 2.18
date: 2006-05-31 14:27:02 -0700;  author: albinus;  state: Exp;  lines: +19 -16;

* configure.ac: Bump version (to 2.1.7-pre).

* lisp/tramp.el (tramp-get-debug-buffer): `outline-mode' must be
protected with a local `default-directory'.

* lisp/tramp-cache.el (top): When reading
`tramp-persistency-file-name', discard error messages for
'file-error.
----------------------------
revision 2.17
date: 2006-05-24 13:12:23 -0700;  author: albinus;  state: Exp;  lines: +17 -0;

* lisp/tramp.el (tramp-message): Write into debug buffer only if
`tramp-verbose-level' is greater than or equal to 4.
(tramp-get-completion-function): Add
`tramp-parse-connection-properties´.
(tramp-process-initial-commands, tramp-post-connection): Removed,
also their respective calls..
(tramp-open-connection-setup-interactive-shell) Add code from
`tramp-process-initial-commands' and `tramp-post-connection'.

* lisp/tramp-cache.el (tramp-parse-connection-properties): New defun.

* lisp/tramp-util.el (tramp-ediff-setup): New defun.

* texi/tramp.texi (Traces and Profiles): Tramp debug buffer is written
with verbosity level 4 onwards.
----------------------------
revision 2.16
date: 2006-05-22 14:34:30 -0700;  author: albinus;  state: Exp;  lines: +11 -4;

* lisp/tramp.el (tramp-error): Don't kill the process.  There are
several cases it doesn't make sense.
(tramp-do-copy-or-rename-file): Flush NEWNAMEs file property.
(tramp-do-copy-or-rename-file-out-of-band): Apply `tramp-error'
when possible.  Make the temporary process more robust.  Use
"process-name" and "process-buffer" properties.
(tramp-handle-start-process): Return the process.
(tramp-completion-handle-file-name-all-completions): Use
`tramp-find-method'.  It was lost some day, don't know how.
(tramp-action-permission-denied, tramp-action-yesno)
(tramp-action-yn, tramp-find-inline-encoding): Apply `kill-process'.
(tramp-append-tramp-buffers): Add a remark about attached buffers.

* lisp/tramp-cache.el (tramp-cache-print): Make sure processes and
buffers are dumped as strings.
(tramp-flush-connection-property): Don't send a debug message.
Process and/or buffer might have been killed already.
(tramp-dump-connection-properties): Don't save "process-name" and
"process-buffer" properties.
----------------------------
revision 2.15
date: 2006-05-21 09:15:06 -0700;  author: albinus;  state: Exp;  lines: +139 -165;

Major rewrite.  Parameter lists changed from METHOD USER HOST to VEC.
----------------------------
revision 2.14
date: 2006-05-10 22:57:33 -0700;  author: albinus;  state: Exp;  lines: +102 -91;

* lisp/tramp.el (all): Apply renamings from tramp-cache.el.
(tramp-handle-start-process, tramp-get-connection-buffer)
(tramp-get-connection-process, tramp-maybe-open-connection):
"process-name" and "process-buffer" are handled as file property,
because they shouldn't be saved in Tramp connection history.
(tramp-maybe-send-script): Dito for "scripts".
(tramp-check-for-regexp, tramp-send-command)
(tramp-send-command-internal): Dito for "check-remote-echo".
(tramp-open-connection-setup-interactive-shell): Move test for
`tramp-chunksize)' down.
(tramp-bug): Add `tramp-file-properties'.
(tramp-append-tramp-buffers): Remove test for cache data.

* lisp/tramp-cache.el (tramp-file-properties): Renamed from
`tramp-cache-data'.  It's not buffer local anymore.
(tramp-cache-setup): Reimplementation.
(tramp-get-file-property): Renamed from
`tramp-cache-get-file-property'.  Reimplementation.
(tramp-set-file-property): Renamed from
`tramp-cache-set-file-property'.  Reimplementation.
(tramp-flush-file-property): Renamed from
`tramp-cache-flush-file'.  Reimplementation.
(tramp-flush-directory-property): Renamed from
`tramp-cache-directory-file'.  Reimplementation.
(with-file-property ): Renamed from `with-cache-data'.
Reimplementation.
(tramp-set-connection-property): Remove parameter TRANSIENT.
(tramp-dump-connection-properties): Pretty printing shall work for
other Emacsen too.

* lisp/tramp-smb.el (all): Apply renamings from tramp-cache.el.
----------------------------
revision 2.13
date: 2006-05-09 22:30:16 -0700;  author: albinus;  state: Exp;  lines: +42 -22;

* lisp/tramp.el (all):
* lisp/tramp-util.el (all): Adapt all occurencies of
`tramp-set-connection-property' and
`tramp-get-connection-property' according to changed parameter
list.

* lisp/tramp-cache.el (tramp-get-connection-property): Reorder
parameter list.
(tramp-set-connection-property): Reorder parameter list.  Add new
parameter TRANSIENT which suppresses saving that property in
persistent connection history.
(with-connection-property): Apply reordered parameter lists.
(tramp-dump-connection-properties): Remove transient entries.
----------------------------
revision 2.12
date: 2006-05-08 22:37:27 -0700;  author: albinus;  state: Exp;  lines: +10 -3;

* lisp/tramp.el (top): Eval expression for adding tramp-(ftp|efs) to
`tramp-unload-hook'.
(tramp-handle-file-name-all-completions)
(tramp-handle-insert-directory): Remove final "cd".
(tramp-register-file-name-handlers): Enable Tramp completion also
when ido is loaded.
(tramp-post-connection): Don't check for (en|de)coding.  It will
be done on-the-fly.
(tramp-find-inline-encoding): Remove tramp-get-* checks.
(tramp-get-remote-encoding, tramp-get-remote-decoding)
(tramp-get-local-encoding, tramp-get-local-decoding): Add
`tramp-find-inline-encoding'.

* lisp/tramp-cahe.el (top): Add unload code to
`tramp-cache-unload-hook'.  Remove also
`tramp-dump-connection-properties' from `kill-emacs-hook'.  Remove
"scripts" properties from connection history, they are not
persistent information.

* texi/tramp.texi (Filename completion): Improve wording.
----------------------------
revision 2.11
date: 2006-05-08 14:26:48 -0700;  author: albinus;  state: Exp;  lines: +23 -23;

* lisp/tramp.el (tramp-buffer-name, tramp-debug-buffer-name): Handle
the case when USER is NIL.  This was lost yesterday.
(tramp-set-remote-path): Save `tramp-default-remote-path' as
connection property.
(all): Remove `save-excursion' inside `with-connection-property'.
Will be handled there.

* lisp/tramp-cache.el (tramp-cache-print): Apply `prin1-to-string'.
(with-connection-property): Apply `save-excursion'.
(tramp-dump-connection-properties): Check for empty hash
table. Prettyprint.
(top): Simplify reading from connection history.
----------------------------
revision 2.10
date: 2006-05-07 14:33:48 -0700;  author: albinus;  state: Exp;  lines: +79 -31;

* lisp/tramp.el (top): cl and custom are always required.
(tramp-verbose): Change description of levels.
(tramp-encoding-reads-stdin, tramp-repair-jka-compr)
(tramp-discard-garbage, tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name)
(tramp-find-default-method, tramp-find-default-user)
(tramp-find-default-host): Remove them.
(tramp-methods): Change defcustom into defvar.
(tramp-actions-before-shell, tramp-actions-copy-out-of-band):
Change defcustom into defconst.
(tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-make-temp-file, tramp-make-tramp-temp-file): Move them up.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-handle-make-auto-save-file-name): For Emacs 21, set
`tramp-auto-save-directory' if unset in order to guarantee unique
auto-save file names.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): New defsubst.  Added with
autoload cookie.  Code from `tramp-repair-jka-compr' moved here.
Register `tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-unload-file-name-handlers): Renamed from
`tramp-unload-file-name-handler-alist'.
(tramp-completion-handle-file-name-all-completions): Delete
directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-process-actions, tramp-wait-for-regexp)
(tramp-maybe-open-connection, tramp-send-command)
(tramp-send-command-internal): Trace sent command with level 6.
(tramp-check-for-regexp): Trace echo with level 5.
(tramp-dissect-file-name): Expand method, user, host.
(tramp-find-method, tramp-find-user, tramp-find-host): Add code
for default values.  Remove all calls but the one in
`tramp-dissect-file-name'.
(tramp-bug, tramp-reporter-dump-variable)
(tramp-append-tramp-buffers): Dump also hash variables.

* lisp/tramp-cache.el: Trace cache commands with level 7.  Trace
connection commands with level 8.
(tramp-cache-print): Dump strings as such.
(tramp-persistency-file-name): New defcustom.
(tramp-connection-properties): New defvar.
(tramp-dump-connection-properties): New defun.
(tramp-get-connection-property, tramp-set-connection-property):
Rewritten.
(top): Dump connection history when leaving Emacs.  Read it during
initialization.

* lisp/tramp-efs.el (tramp-efs-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-ftp.el (tramp-ftp-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-smb.el: Trace sent commands with level 6.
(tramp-smb-file-name-p): Don't use tramp-find-* functions.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
(Bug Reports): Level 6 results already in file contents.
(Traces and Profiles): Describe new levels.
----------------------------
revision 2.9
date: 2006-01-27 14:29:02 -0800;  author: albinus;  state: Exp;  lines: +5 -1;

Add code for unloading Tramp.

* lisp/tramp-vc.el (vc-user-login-name): Wrap defadvice with a test for
`process-file', in order to let it work for older Emacsen too.
----------------------------
revision 2.8
date: 2005-11-20 14:16:40 -0800;  author: albinus;  state: Exp;  lines: +39 -0;

* lisp/tramp.el (tramp-send-command-and-read): New defun.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-perl)
(tramp-handle-directory-files-and-attributes-with-stat)
(tramp-get-remote-stat, tramp-get-remote-uid)
(tramp-get-remote-gid): Apply it.
(tramp-handle-insert-directory): Remove unnecessary comments.
(tramp-point-at-eol): Removed. All callees replaced by
`tramp-line-end-position'.
(tramp-barf-unless-okay): Don't pop up Tramp buffer in case of
error.
(tramp-get-ls-command, tramp-get-test-command)
(tramp-get-test-nt-command, tramp-get-file-exists-command)
(tramp-get-remote-ln, tramp-get-remote-perl)
(tramp-get-remote-stat)
(tramp-get-remote-uid, tramp-get-remote-gid): Apply
`with-connection-property'.
(tramp-get-connection-property, tramp-set-connection-property):
Move to tramp-cache.el.

* lisp/tramp-cache.el:
(tramp-get-connection-property, tramp-set-connection-property):
Moved from tramp.el.  Tramp messages added.
(with-connection-property): New macro.

* lisp/tramp-smb.el (tramp-smb-read-file-entry): `tramp-point-at-eol'
replaced by `tramp-line-end-position'.

* lisp/tramp-vc.el (tramp-handle-vc-user-login-name): Removed.
(tramp-vc-user-login-name): Rewritten.

* texi/tramp.texi (Remote File Ownership): Replace `user-full-name' by
`user-login-name'.
(Traces and Profiles): Add trace level 7.
----------------------------
revision 2.7
date: 2005-10-30 14:34:55 -0800;  author: albinus;  state: Exp;  lines: +3 -2;

* lisp/tramp.el: Global change to make access to connection buffer more
robust.  Don't trust that it is always current buffer; don't
expect it is writable.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add `start-process' and `call-process'.  Remove
`dired-call-process'.
(tramp-handle-start-process, tramp-handle-call-process)
(tramp-get-connection-buffer, tramp-get-connection-process): New
defuns.
(tramp-handle-dired-call-process, tramp-async-proc): Removed.
(tramp-handle-shell-command, tramp-handle-process-file): Rewritten
completely.
(tramp-wait-for-output): New arg PROC.
(tramp-get-connection-property, tramp-set-connection-property):
Don't call `tramp-maybe-open-connection'.  There might be
recursions otherwise.
(tramp-handle-expand-file-name): Use
`tramp-temporary-file-directory' instead of "/".
(tramp-maybe-open-connection): Set PS1 to "$ ".  Otherwise, a
local shell prompt could hurt.  Reported by Romain Francoise
<romain@orebokech.com>.
(tramp-chunksize): Escape parentheses in docstring starting at
beginning of line.  Fontification is messed up when
`open-paren-in-column-0-is-defun-start' set to t.  Reported by
John Paul Wallington <jpw@pobox.com>.

* lisp/tramp-cache.el (tramp-cache-setup): Reset `tramp-cache-data'
only when it doesn't exist yet.  Otherwise, it would be cleaned
every new asynchronous process.

* lisp/tramp-util.el: Deactivate key mappings for `tramp-minor-mode'.
(tramp-advice-start-process, tramp-advice-call-process): New
defadvices.
(tramp-compile, tramp-recompile): Removed.
----------------------------
revision 2.6
date: 2005-10-12 13:49:29 -0700;  author: albinus;  state: Exp;  lines: +5 -4;

* lisp/tramp.el (top): Try to simplify XEmacs byte-compiler
pacification.
(tramp-verbose): Finish doc string.  New default value is 3.
(all): Apply new verbosity levels.
(tramp-get-debug-buffer): Remove definition of outline faces.  The
default values are good enough.
(tramp-bug): Explain setting of `tramp-verbose'.

* lisp/tramp-cache.el (all): Apply new verbosity levels.

* lisp/tramp-smb.el (top): Try to simplify XEmacs byte-compiler
pacification.
(all): Apply new verbosity levels.

* lisp/tramp-vc.el (top): Try to simplify XEmacs byte-compiler
pacification.

* texi/tramp.texi (Bug Reports, Traces and Profiles): Explain setting
of `tramp-verbose'.

* texi/trampinst.texi (Installation parameters): Try it now with @w{}.
----------------------------
revision 2.5
date: 2005-10-10 14:07:47 -0700;  author: albinus;  state: Exp;  lines: +42 -18;

* lisp/tramp.el (tramp-handle-delete-directory)
(tramp-handle-dired-recursive-delete-directory): Apply
`tramp-cache-flush-directory'.
(tramp-handle-insert-directory): Apply `tramp-cache-flush-file'.

* lisp/tramp-cache.el: Autoload the needed functions from tramp.el.
(tramp-cache-flush-directory, tramp-cache-before-revert-function):
New defuns.
(top): Add `tramp-cache-before-revert-function' to
`before-revert-hook'.  Deactivate all Tramp messages for
performance reasons.

* lisp/tramp-smb.el (tramp-smb-handle-delete-directory): Apply
`tramp-cache-flush-directory'.
(tramp-smb-handle-insert-directory): Apply
`tramp-cache-flush-file'.
(tramp-smb-handle-directory-files): Local file must be handled as
directory, otherwise the listing is senseless.

* texi/trampinst.texi (Installation parameters): Don't use @tie{}, it
isn't defined in older texinfo versions.
----------------------------
revision 2.4
date: 2005-10-09 12:43:34 -0700;  author: albinus;  state: Exp;  lines: +2 -1;

* INSTALL: Provide working options for installing on MS Windows.

* lisp/tramp.el (tramp-completion-without-shell-p): Removed.  Not
needed anymore.
(tramp-md5-function): Fix typo in error message.
(tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-handle-file-name-all-completions): Rewritten in order to
profit from caching results.
(tramp-handle-file-name-completion): Removed unnecessary code.

* lisp/tramp-cache.el (with-cache-data): ,@body must be wrapped by
`progn'.  Add `edebug-form-spec' property.

* lisp/tramp-smb.el (tramp-smb-handle-file-name-all-completions):
Rewritten in order to profit from caching results.

* texi/tramp.texi (Dired): Node removed.  There are no limitations on
directory listings anymore.
(Default Method): Fix typo in variable name.
(Filename completion): Remove limitations on directory listings.

* texi/trampinst.texi (Installation parameters): Provide working
options for installing on MS Windows.
----------------------------
revision 2.3
date: 2005-09-11 14:17:32 -0700;  author: albinus;  state: Exp;  lines: +2 -13;

* tramp.el (top): Reduce compiler warnings.
(tramp-current-hop-method, tramp-current-hop-user)
(tramp-current-hop-host): New defvars.
(tramp-handle-file-attributes-with-stat): Return floating point
numbers.  Integers did run out of 2**28.
(tramp-do-copy-or-rename-file-out-of-band, tramp-pre-connection)
(tramp-maybe-open-connection): Initialize new defvars.
(tramp-handle-shell-command): Send "tramp_set_exit_status", it
isn't sent any longer during initialization.
(tramp-handle-write-region): Remote decoding command is sent in
one bunch.
(tramp-find-executable): Check first in $PATH with "which"
command.  Directory scan command is sent in one bunch.
(tramp-check-ls-command, tramp-find-ls-command): Debug messages
did go to a wrong debug buffer.
(tramp-action-password, tramp-process-actions): Call
`tramp-enter-password' and `tramp-clear-passwd' with changed
parameters.
(tramp-enter-password, tramp-read-passwd, tramp-clear-passwd):
Change parameter set.  Rewrite.
(tramp-post-connection): Remove unnecessary commands.
(tramp-send-command, tramp-send-string): Move setting of
`tramp-last-cmd-time'.
(tramp-wait-for-output): Correct wrong variable names.
(tramp-get-ls-command): Simplify code.

* tramp-cache.el (tramp-enable-cache): Removed.  Works stable now.
(with-cache-data): Change accordingly.

* tramp-smb.el (top): Require `tramp-cache'.  Reduce compiler
warnings.
(tramp-smb-handle-file-attributes)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-writable-p): Add `with-cache-data'.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-directory)
(tramp-smb-handle-delete-file, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Flush cached data.
(tramp-smb-open-connection) Call `tramp-enter-password' and
`tramp-clear-passwd' with changed parameters.

* tramp-vc.el (top): Reduce compiler warnings.
----------------------------
revision 2.2
date: 2005-09-03 15:37:07 -0700;  author: albinus;  state: Exp;  lines: +24 -17;

* lisp/tramp.el (top): Rewrite compiler wrapping for `warnings'.
(tramp-ls-command, tramp-test-groks-nt)
(tramp-test-groks-nt): Remove variables.
(tramp-handle-file-accessible-directory-p): Remove function.
(tramp-file-name-handler-alist): Remove entry for
`file-accessible-directory-p'.  Due to caching it doesn't make
sense to call the test commands explicitely.
(tramp-handle-file-exists-p): Format-string must be given now.
(tramp-handle-file-attributes-with-stat): Don't use hard-coded
"stat" command.
(tramp-handle-file-newer-than-file-p): Simplify call of
`tramp-run-test2' by using `tramp-get-test-nt-command'.
(tramp-handle-file-directory-p): `tramp-run-test' should be
sufficient.
(tramp-handle-file-name-all-completions): Don't use hard-coded
"test" command.
(tramp-handle-make-auto-save-file-name):
`tramp-subst-strs-in-string' should be applied all cases.
(tramp-run-test): Use `with-parsed-tramp-file-name'.
(tramp-run-test2): PROGRAM is replaced by FORMAT-STRING.  SWITCH
not needed anymore.
(tramp-find-file-exists-command): Don't use hard-coded "test" and
"ls" commands.  Work with local file names but remote file names.
(tramp-post-connection): Remove settings for
`tramp-file-exists-command', `tramp-ls-command',
`tramp-test-groks-nt', `tramp-connection-property' "perl",
tramp-connection-property "perl-scripts",
`tramp-connection-property' "ln" and `tramp-connection-property'
"stat".  They are set on-the-fly.
(tramp-convert-file-attributes): Rewrite setting directory
indication bit.
(tramp-get-ls-command, tramp-get-file-exists-command)
(tramp-get-remote-perl, tramp-get-remote-stat):
(tramp-get-remote-ln):  Rewrite.
(tramp-bug): Remove deleted variables.
(tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): Insert special handling for
`last-coding-system-used' again, it still seems to be
necessary (unlike stated before).  Reported by Toshinori Sugita
<sugita@d-pad.co.jp>.

* lisp/tramp-cache.el (top): Rewrite compiler wrapping for
`with-no-warnings.
(tramp-cache-get-file-property): Add new parameter DEFAULT.
(tramp-cache-flush-file): Don't use the message.
(with-cache-data): Applicable for absolute file names only.
----------------------------
revision 2.1
date: 2005-08-28 11:56:37 -0700;  author: albinus;  state: Exp;

* Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/trampcache.el: Removed.  Replaced by tramp-cache.el.

* lisp/tramp-cache.el: New file.  Implementation inspired by work of
Daniel Pittman <daniel@rimspace.net>.

* lisp/tramp.el: Introduce filename caching.  Require `tramp-cache'.
(tramp-syntax): Correct doc string.
(tramp-handle-file-truename, tramp-handle-file-exists-p)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-accessible-directory-p)
(tramp-handle-file-directory-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p): Add `with-cache-data'.
(tramp-handle-file-attributes): Add `with-cache-data'.  Check also
for existence of applicable stat(1) command, which is preferred
over the Perl script.
(tramp-handle-file-attributes-with-stat, tramp-get-remote-stat):
New defuns.
(tramp-handle-set-file-modes, tramp-handle-add-name-to-file)
(tramp-do-copy-or-rename-file, tramp-handle-delete-directory)
(tramp-handle-delete-file, tramp-handle-dired-compress-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-write-region): Flush cashed data.
(tramp-pre-connection): Initialise cache.
(tramp-post-connection): Check for stat(1) command.
(tramp-maybe-open-connection): Optimize code.
(tramp-convert-file-attributes): Handle also attributes returned
by stat.

* test/tramp-time.el: New file.
----------------------------
revision 2.57.2.1
date: 2011-01-24 02:09:40 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-cmds.el,v
Working file: lisp/tramp-cmds.el
head: 2.23
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.20
	branch-2-1-stable: 2.15.0.2
	branchpoint-2-1-stable: 2.15
	V-2-1-19: 2.15
	V-2-1-18: 2.13
	V-2-1-17: 2.12
	V-2-1-16: 2.12
	V-2-1-15: 2.10
	V-2-1-14: 2.9
	V-2-1-13: 2.7
	V-2-1-12: 2.5
keyword substitution: kv
total revisions: 24;	selected revisions: 24
description:
----------------------------
revision 2.23
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.22
date: 2011-01-19 03:09:00 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 2.21
date: 2010-12-01 09:42:17 -0800;  author: albinus;  state: Exp;  lines: +0 -7;  commitid: Uh2KDiGC5DnnwBYu;
* tramp.el (tramp-debug-message): Extend function exclude list.

* tramp-sh.el (tramp-methods): Add recursive options to "pscp" and
"psftp".  Exchange "%k" marker with options.
(tramp-do-copy-or-rename-file, tramp-sh-handle-file-local-copy):
Compute size of link target.
(tramp-do-copy-or-rename-file-out-of-band). Move setting of
`tramp-current-*' up due to gateway methods.  Optimze computing of
copy arguments.  Use `tramp-get-connection-name' and
`tramp-get-connection-buffer'.  Improve debug messages.

* tramp.el (tramp-default-method-alist)
(tramp-default-user-alist, tramp-default-proxies-alist): Adapt
custom options type.  (Bug#7445)
(tramp-local-host-regexp): Add "localhost6".
(tramp-file-name-port): Check also for `tramp-default-port'.
(tramp-get-connection-name): New defun.
(tramp-get-connection-process): Use it.
(tramp-drop-volume-letter): Fix doc string.

* tramp-cmds.el: Remove solved todo item.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-smb.el: Fix regexps added to `tramp-default-method-alist'
and `tramp-default-user-alist', respectively.

* tramp-gw.el (tramp-gw-open-connection): Use
`tramp-get-connection-name' and `tramp-get-connection-buffer'.

* tramp-imap.el (tramp-imap-make-iht): Use just
`tramp-file-name-port'.

* tramp-sh.el (tramp-compute-multi-hops): Remove port
determination.
(tramp-maybe-open-connection): Use `tramp-get-connection-name'.
----------------------------
revision 2.20
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 2.19
date: 2010-11-13 02:27:32 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: JAP0ddpM79e3HfWu;
* tramp-compat.el (tramp-compat-line-beginning-position)
(tramp-compat-line-end-position): Remove them.

* tramp.el (tramp-parse-rhosts-group, tramp-parse-shosts-group)
(tramp-parse-sconfig-group, tramp-parse-passwd-group)
(tramp-parse-netrc-group, tramp-parse-putty-group):
* tramp-cmds.el (tramp-append-tramp-buffers):
* tramp-sh.el (tramp-do-file-attributes-with-ls)
(tramp-sh-handle-file-selinux-context)
(tramp-sh-handle-file-name-all-completions)
(tramp-sh-handle-insert-directory)
(tramp-sh-handle-expand-file-name, tramp-find-executable)
(tramp-wait-for-output, tramp-send-command-and-read)
* tramp-smb.el (tramp-smb-read-file-entry)
(tramp-smb-get-cifs-capabilities)
* tramp-util.el (tramp-PC-expand-many-files): Use `point-at-eol'.

* tramp-sh.el (tramp-sh-handle-insert-directory) Use `point-at-bol'.
(tramp-remote-coding-commands): Add an alternative using "base64
-d -i".  This is needed for older base64 versions from GNU
coreutils.  Reported by Klaus Reichl
<Klaus.Reichl@thalesgroup.com>.
----------------------------
revision 2.18
date: 2010-10-02 04:51:46 -0700;  author: albinus;  state: Exp;  lines: +27 -66;  commitid: VuxAzfL6W3iEvRQu;
* tramp.el (tramp-completion-reread-directory-timeout): Fix
docstring.

* tramp-cache.el (tramp-cache-inhibit-cache): Remove.
(tramp-get-file-property): Replace `tramp-cache-inhibit-cache' by
`remote-file-name-inhibit-cache'.  Check also for an integer
value.  Add/increase counter when `tramp-verbose' >= 10.
(tramp-set-file-property): Add/increase counter when
`tramp-verbose' >= 10.

* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-cleanup-all-buffers): Set tramp-autoload cookie.
(tramp-bug): Set tramp-autoload cookie.  Report all interned
tramp-* variables.  Report also `remote-file-name-inhibit-cache'.
(tramp-reporter-dump-variable): Fix docstring.  Mask non-7bit
characters only in strings.

* tramp-compat.el (remote-file-name-inhibit-cache): Define due to
backward compatibility.

* tramp-sh.el (tramp-handle-verify-visited-file-modtime)
(tramp-handle-file-name-all-completions)
(tramp-handle-vc-registered): Use
`remote-file-name-inhibit-cache'.
(tramp-open-connection-setup-interactive-shell): Call
`tramp-cleanup-connection' directly.
----------------------------
revision 2.17
date: 2010-09-16 08:36:06 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: ZaWo7b7BbuAHgPOu;
* Makefile.in (autoloads): Renamed from tramp-autoloads.
(tramp-loaddefs.el): Revert check for XEmacs.

* tramp-cmds.el (tramp-cleanup-connection): Set tramp-autoload cookie.
----------------------------
revision 2.16
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +7 -2;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.15
date: 2010-07-28 02:57:06 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: cMk21qq3P9j20nIu;
branches:  2.15.2;
* tramp.el (tramp-methods): Move hostname to the end in all ssh
`tramp-login-args'.
(tramp-verbose): Describe verbose level 9.
(tramp-open-shell): Check for tty if `tramp-verbose' >= 9.
(tramp-open-connection-setup-interactive-shell): Trace stty
settings if `tramp-verbose' >= 9.
(tramp-handle-start-file-process): Implement tty setting.
(Bug#4604, Bug#6360)

* tramp-cmds.el (tramp-bug): Recommend setting of `tramp-verbose'
to 9.
----------------------------
revision 2.14
date: 2010-05-09 12:45:05 -0700;  author: albinus;  state: Exp;  lines: +13 -17;  commitid: mYjXXOy50YSYO8yu;
* tramp-compat.el (byte-compile-not-obsolete-vars): Define if not
bound.
(tramp-compat-copy-file): Add PRESERVE-SELINUX-CONTEXT.
(tramp-compat-funcall): New defmacro.
(tramp-compat-line-beginning-position)
(tramp-compat-line-end-position)
(tramp-compat-temporary-file-directory)
(tramp-compat-make-temp-file, tramp-compat-file-attributes)
(tramp-compat-copy-file, tramp-compat-copy-directory)
(tramp-compat-delete-file, tramp-compat-delete-directory)
(tramp-compat-number-sequence, tramp-compat-process-running-p)
* tramp.el (top, with-progress-reporter)
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-handle-dired-compress-file, tramp-handle-shell-command)
(tramp-completion-mode-p, tramp-check-for-regexp)
(tramp-open-connection-setup-interactive-shell)
(tramp-compute-multi-hops, tramp-read-passwd, tramp-clear-passwd)
(tramp-time-diff, tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag, tramp-unload-tramp)
* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-reporter-dump-variable, tramp-load-report-modules)
(tramp-append-tramp-buffers)
* tramp-gvfs.el (tramp-gvfs-handle-file-selinux-context)
* tramp-util.el (tramp-gud-file-name): Use it.

* tramp-imap.el (top): Autoload `epg-make-context'.
----------------------------
revision 2.13
date: 2010-01-14 20:52:28 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: zweSrHgxjm35ypju;
Add 2010 to copyright years.
----------------------------
revision 2.12
date: 2009-06-07 09:07:29 -0700;  author: albinus;  state: Exp;  lines: +6 -1;  commitid: KQWM3f915vO9qWQt;
* tramp-cmds.el (tramp-bug): Recommend
`tramp-cleanup-all-connections' in the bug mail.
----------------------------
revision 2.11
date: 2009-04-14 07:47:22 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: pfj7zILBpVAiIZJt;
* tramp-cmds.el (tramp-cleanup-connection): Flush cache data of
directory "".
----------------------------
revision 2.10
date: 2009-01-05 11:54:21 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: EsdKlglMWIDTAixt;
Update copyrights for 2009.
----------------------------
revision 2.9
date: 2008-06-15 06:32:43 -0700;  author: albinus;  state: Exp;  lines: +3 -0;  commitid: 84cObX3INc0x237t;
* tramp-cmds.el (tramp-cleanup-all-connections): Reset `tramp-locked'.
----------------------------
revision 2.8
date: 2008-05-13 14:15:18 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: jgy0nbzWqUWYEQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.7
date: 2008-02-05 13:21:11 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: hbSvwgqCvjfjQfQs;
* tramp-cmds.el (tramp-cleanup-connection): Update calls to
tramp-flush-connection-property for removed 2nd argument.
----------------------------
revision 2.6
date: 2008-01-12 03:04:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.5
date: 2007-11-07 12:34:52 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 6QaEdkjJBQXZsGEs;

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Don't expand
the remote connection identification.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Set also $PS2 and $PS3 when setting $PS1.  Check for shell echoing
before calling stty.

* lisp/tramp-cache.el (tramp-cache-print)
(tramp-dump-connection-properties): Fix docstring.
(tramp-list-connections): Renamed from
`tramp-cache-list-connections'.

* lisp/tramp-cmds.el (tramp-cleanup-connection): Apply it.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Don't expand the
remote connection identification when setting connection property.

* lisp/tramp-smb.el (tramp-smb-handle-substitute-in-file-name): "//"
substitutes only in the local filename part.

* texi/tramp.texi (Overview): Mention also the PuTTY integration under
Win32.  Remove paragraphs about Tramp's experimental status.
(Frequently Asked Questions): Add code example for highlighting
the mode line.
----------------------------
revision 2.4
date: 2007-11-06 13:11:38 -0800;  author: albinus;  state: Exp;  lines: +6 -6;  commitid: 94tJSiGFLfU2IyEs;

* lisp/tramp.el (top): Don't autoload `tramp-cache-print'.

* lisp/tramp-cache (tramp-cache-print): Move down.
(tramp-cache-list-connections): New defun.

* lisp/tramp-cmds.el (tramp-cleanup-connection): Use it.
----------------------------
revision 2.3
date: 2007-10-27 06:50:43 -0700;  author: albinus;  state: Exp;  lines: +259 -1;  commitid: h3wsKiYvXLWtAeDs;

* lisp/tramp.el (tramp-wrong-passwd-regexp): Tune regexp.
(tramp-get-remote-tmpdir): New defun.
(tramp-make-tramp-temp-file): Use it.
(tramp-local-call-process): New defun.  Replace all calls of
`call-process' by this when appropriate.
(tramp-handle-write-region): Replace calls of `file-attributes' by
`tramp-compat-file-attributes'.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Make the first command a `tramp-send-command' call, with let-bind
of `tramp-end-of-output'.
(tramp-version, tramp-bug, tramp-reporter-dump-variable)
(tramp-load-report-modules, tramp-append-tramp-buffers): Move to
tramp-cmds.el.

* lisp/tramp-fish.el (tramp-fish-handle-copy-file)
(tramp-fish-do-copy-or-rename-file)
(tramp-fish-do-copy-or-rename-file-directly):
* lisp/tramp-smb.el (tramp-smb-handle-copy-file):
Add parameter PRESERVE-UID-GID.
----------------------------
revision 2.2
date: 2007-10-22 12:06:20 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: u424SqaGvkwRuCCs;

* lisp/tramp.el (tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Improve sending
initial commands.
(tramp-action-terminal): Send debug message.
(tramp-wait-for-shell-prompt, tramp-send-command-internal): Removed.
(tramp-barf-if-no-shell-prompt): Insert code of
`tramp-wait-for-shell-prompt'.

* lisp/tramp-util.el (tramp-PC-expand-many-files): New defun.
(tramp-advice-PC-expand-many-files): Defadvice moved from tramp.el.
----------------------------
revision 2.1
date: 2007-10-17 15:09:51 -0700;  author: albinus;  state: Exp;  commitid: gM2uQ3KaIjZIFZBs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-cmds.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-cmds.el.

* lisp/tramp.el (top): Put load of all tramp-* files into a dolist.
Require tramp-cmds.el.
(tramp-clear-passwd): Add parameter VEC.  Adapt all callees.
(tramp-append-tramp-buffers): Apply `tramp-list-tramp-buffers'.

* lisp/tramp-cmds.el: New file.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Apply VEC to
`tramp-clear-passwd'.
----------------------------
revision 2.15.2.1
date: 2011-01-24 02:09:41 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-compat.el,v
Working file: lisp/tramp-compat.el
head: 2.39
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.37
	branch-2-1-stable: 2.28.0.2
	branchpoint-2-1-stable: 2.28
	V-2-1-19: 2.28
	V-2-1-18: 2.20
	V-2-1-17: 2.17
	V-2-1-16: 2.11
	V-2-1-15: 2.10
	V-2-1-14: 2.9
	V-2-1-13: 2.7
	V-2-1-12: 2.5
	V-2-1-11: 2.4
keyword substitution: kv
total revisions: 40;	selected revisions: 40
description:
----------------------------
revision 2.39
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.38
date: 2011-01-19 03:09:00 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 2.37
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 2.36
date: 2010-11-13 02:27:32 -0800;  author: albinus;  state: Exp;  lines: +0 -19;  commitid: JAP0ddpM79e3HfWu;
* tramp-compat.el (tramp-compat-line-beginning-position)
(tramp-compat-line-end-position): Remove them.

* tramp.el (tramp-parse-rhosts-group, tramp-parse-shosts-group)
(tramp-parse-sconfig-group, tramp-parse-passwd-group)
(tramp-parse-netrc-group, tramp-parse-putty-group):
* tramp-cmds.el (tramp-append-tramp-buffers):
* tramp-sh.el (tramp-do-file-attributes-with-ls)
(tramp-sh-handle-file-selinux-context)
(tramp-sh-handle-file-name-all-completions)
(tramp-sh-handle-insert-directory)
(tramp-sh-handle-expand-file-name, tramp-find-executable)
(tramp-wait-for-output, tramp-send-command-and-read)
* tramp-smb.el (tramp-smb-read-file-entry)
(tramp-smb-get-cifs-capabilities)
* tramp-util.el (tramp-PC-expand-many-files): Use `point-at-eol'.

* tramp-sh.el (tramp-sh-handle-insert-directory) Use `point-at-bol'.
(tramp-remote-coding-commands): Add an alternative using "base64
-d -i".  This is needed for older base64 versions from GNU
coreutils.  Reported by Klaus Reichl
<Klaus.Reichl@thalesgroup.com>.
----------------------------
revision 2.35
date: 2010-10-05 07:06:01 -0700;  author: albinus;  state: Exp;  lines: +28 -4;  commitid: Yfgg9L8idLcN9gRu;
* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-handle-file-exists-p, tramp-handle-file-newer-than-file-p):
New defuns, taken from tramp-smb.el.
(tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag): Removed.

* tramp-compat.el (top): Do not check for byte-compiler objects.
(tramp-compat-coding-system-change-eol-conversion)
(tramp-compat-set-process-query-on-exit-flag): New defuns, taken
from tramp.el.

* tramp-gvfs.el:
* tramp-gw.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.

* tramp-imap.el (tramp-imap-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-imap-handle-file-exists-p)
(tramp-imap-handle-file-executable-p)
(tramp-imap-handle-file-readable-p)
(tramp-imap-handle-directory-files-and-attributes)
(tramp-imap-handle-file-newer-than-file-p): Removed.

* tramp-sh.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag' and
`tramp-coding-system-change-eol-conversion' by
`tramp-compat-coding-system-change-eol-conversion'.

* tramp-smb.el (tramp-smb-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-newer-than-file-p): Removed.
(tramp-smb-maybe-open-connection): Replace
`tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.
----------------------------
revision 2.34
date: 2010-10-04 12:49:01 -0700;  author: albinus;  state: Exp;  lines: +9 -7;  commitid: wskfsGIn9xlv5aRu;
* tramp-compat.el: Don't mess about with the byte-compiler unless
it is "necessary".
----------------------------
revision 2.33
date: 2010-10-02 04:51:46 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: VuxAzfL6W3iEvRQu;
* tramp.el (tramp-completion-reread-directory-timeout): Fix
docstring.

* tramp-cache.el (tramp-cache-inhibit-cache): Remove.
(tramp-get-file-property): Replace `tramp-cache-inhibit-cache' by
`remote-file-name-inhibit-cache'.  Check also for an integer
value.  Add/increase counter when `tramp-verbose' >= 10.
(tramp-set-file-property): Add/increase counter when
`tramp-verbose' >= 10.

* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-cleanup-all-buffers): Set tramp-autoload cookie.
(tramp-bug): Set tramp-autoload cookie.  Report all interned
tramp-* variables.  Report also `remote-file-name-inhibit-cache'.
(tramp-reporter-dump-variable): Fix docstring.  Mask non-7bit
characters only in strings.

* tramp-compat.el (remote-file-name-inhibit-cache): Define due to
backward compatibility.

* tramp-sh.el (tramp-handle-verify-visited-file-modtime)
(tramp-handle-file-name-all-completions)
(tramp-handle-vc-registered): Use
`remote-file-name-inhibit-cache'.
(tramp-open-connection-setup-interactive-shell): Call
`tramp-cleanup-connection' directly.
----------------------------
revision 2.32
date: 2010-09-17 00:47:07 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: OhmgC0YIVnyODUOu;
* configure.ac: Regenerate autoloads.

* tramp-compat.el (tramp-compat-with-temp-message): Make it a defmacro.
----------------------------
revision 2.31
date: 2010-09-15 13:14:11 -0700;  author: albinus;  state: Exp;  lines: +25 -9;  commitid: cEIrA9vZbWCTPIOu;
Ensure XEmacs compatibility.

* Makefile.in (tramp-loaddefs.el): Adapt `autoload-trim-file-name'
and feature name.
(distclean): Remove trampver.el, it is handled in the upper Makefile.

* tramp-compat.el (tramp-compat-with-temp-message)
(tramp-compat-font-lock-add-keywords, tramp-compat-process-get)
(tramp-compat-process-put): New defuns.

* tramp.el (top):
* tramp-gvfs.el (top):
* tramp-cache.el (top): Use `tramp-compat-font-lock-add-keywords'.

* tramp.el (tramp-progress-reporter-update): Use `tramp-compat-funcall.

* tramp.el (tramp-process-actions):
* tramp-gvfs.el (tramp-handle-vc-registered):
* tramp-sh.el (tramp-gvfs-handler-askquestion)
(tramp-get-remote-stat, tramp-get-remote-readlink): Use
`tramp-compat-with-temp-message'.

* tramp-sh.el (top): Require 'cl.
(tramp-handle-start-file-process): Use `tramp-compat-process-get'.
(tramp-open-connection-setup-interactive-shell): Use
`tramp-compat-process-put'.

* tramp-util.el (top): Require 'tramp-sh.
----------------------------
revision 2.30
date: 2010-09-13 06:18:45 -0700;  author: albinus;  state: Exp;  lines: +14 -0;  commitid: hctSFHPfw5XxBqOu;
Major code cleanup.  Split tramp.el into tramp.el and tramp-sh.el.

* Makefile.in (LISP_FILES): Remove tramp-fish.el.  Add tramp-sh.el.

* tramp.el (top): Don't show loading message.  Require just
'tramp-compat, everything else is required there.  Use
`ignore-errors' where appropriate.
(tramp-inline-compress-start-size, tramp-copy-size-limit)
(tramp-terminal-type, tramp-end-of-output)
(tramp-initial-end-of-output, tramp-completion-function-alist-rsh)
(tramp-completion-function-alist-ssh)
(tramp-completion-function-alist-telnet)
(tramp-completion-function-alist-su)
(tramp-completion-function-alist-putty, tramp-remote-path)
(tramp-remote-process-environment, tramp-sh-extra-args)
(tramp-actions-before-shell, tramp-uudecode)
(tramp-perl-file-truename, tramp-perl-file-name-all-completions)
(tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode)
(tramp-vc-registered-read-file-names, tramp-file-mode-type-map)
(tramp-file-name-handler-alist, tramp-make-tramp-temp-file)
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-as-directory)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-exists-p, tramp-handle-file-attributes)
(tramp-do-file-attributes-with-ls)
(tramp-do-file-attributes-with-perl)
(tramp-do-file-attributes-with-stat)
(tramp-handle-set-visited-file-modtime)
(tramp-handle-verify-visited-file-modtime)
(tramp-handle-set-file-modes, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-remote-selinux-p)
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-newer-than-file-p, tramp-handle-file-modes)
(tramp-handle-file-directory-p, tramp-handle-file-regular-p)
(tramp-handle-file-symlink-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p)
(tramp-handle-directory-file-name, tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-do-directory-files-and-attributes-with-perl)
(tramp-do-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions)
(tramp-handle-file-name-completion, tramp-handle-add-name-to-file)
(tramp-handle-copy-file, tramp-handle-copy-directory)
(tramp-handle-rename-file, tramp-do-copy-or-rename-file)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-dired-compress-file, tramp-handle-dired-uncache)
(tramp-handle-insert-directory)
(tramp-handle-unhandled-file-name-directory)
(tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-executable-find, tramp-process-sentinel)
(tramp-handle-start-file-process, tramp-handle-process-file)
(tramp-handle-call-process-region, tramp-handle-shell-command)
(tramp-handle-file-local-copy, tramp-handle-file-remote-p)
(tramp-handle-insert-file-contents)
(tramp-handle-insert-file-contents-literally)
(tramp-handle-find-backup-file-name)
(tramp-handle-make-auto-save-file-name, tramp-handle-write-region)
(tramp-vc-registered-file-names, tramp-handle-vc-registered)
(tramp-sh-file-name-handler, tramp-vc-file-name-handler)
(tramp-maybe-send-script, tramp-set-auto-save, tramp-run-test)
(tramp-run-test2, tramp-find-executable, tramp-set-remote-path)
(tramp-find-file-exists-command, tramp-open-shell)
(tramp-find-shell, tramp-barf-if-no-shell-prompt)
(tramp-open-connection-setup-interactive-shell)
(tramp-local-coding-commands, tramp-remote-coding-commands)
(tramp-find-inline-encoding, tramp-call-local-coding-command)
(tramp-inline-compress-commands, tramp-find-inline-compress)
(tramp-compute-multi-hops, tramp-maybe-open-connection)
(tramp-send-command , tramp-wait-for-output)
(tramp-send-command-and-check, tramp-barf-unless-okay)
(tramp-send-command-and-read, tramp-mode-string-to-int)
(tramp-convert-file-attributes, tramp-check-cached-permissions)
(tramp-file-mode-from-int, tramp-file-mode-permissions)
(tramp-shell-case-fold, tramp-make-copy-program-file-name)
(tramp-method-out-of-band-p, tramp-local-host-p)
(tramp-get-remote-path, tramp-get-remote-tmpdir)
(tramp-get-ls-command, tramp-get-ls-command-with-dired)
(tramp-get-test-command, tramp-get-test-nt-command)
(tramp-get-file-exists-command, tramp-get-remote-ln)
(tramp-get-remote-perl, tramp-get-remote-stat)
(tramp-get-remote-readlink, tramp-get-remote-trash)
(tramp-get-remote-id, tramp-get-remote-uid, tramp-get-remote-gid)
(tramp-get-local-uid, tramp-get-local-gid)
(tramp-get-inline-compress, tramp-get-inline-coding, ): Move to
tramp-sh.el.
(tramp-methods, tramp-default-method-alist)
(tramp-default-user-alist, tramp-foreign-file-name-handler-alist):
Move initialization to tramp-sh.el.
(tramp-temp-name-prefix): Make it a defconst.
(tramp-dissect-file-name): Don't check anymore for multi-hop
methods.
(tramp-debug-outline-regexp): Add a docstring.
(tramp-debug-outline-level): Renamed from `tramp-outline-level'.
(tramp-get-debug-buffer): Use it.

* tramp-cache.el (top): Set tramp-autoload cookie for
initialization forms.
(tramp-set-connection-property): Don't protect `tramp-message'
call, it isn't necessary any longer.
(tramp-dump-connection-properties): Use `ignore-errors'.

* tramp-compat.el (top): Require 'advice, 'format-spec,
'password-cache and 'auth-source.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Require 'tramp-sh.

* tramp-gw.el (tramp-gw-open-network-stream): Use `ignore-errors'.

* tramp-sh.el: New file, derived from tramp.el.
(top): Initialize `tramp-methods', `tramp-default-method-alist',
`tramp-default-user-alist', tramp-foreign-file-name-handler-alist.
Remove "scp1_old", "scp2_old", "ssh1_old", "ssh2_old".  Use
`ignore-errors' where appropriate.
(tramp-sh-file-name-handler-alist): Renamed from
`tramp-file-name-handler-alist'.
(tramp-send-command-and-check): Return t or nil.  Remove all
`zerop' checks, where called.
(tramp-handle-set-file-modes)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-delete-directory, tramp-handle-delete-file)
(tramp-maybe-send-script, ): Use `tramp-barf-unless-okay'.
(tramp-sh-file-name-handler, tramp-send-command-and-check)
(tramp-get-remote-ln): Set tramp-autoload cookie.
----------------------------
revision 2.29
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +41 -15;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.28
date: 2010-06-12 01:54:22 -0700;  author: albinus;  state: Exp;  lines: +38 -38;  commitid: FPHoi5NWl1x08sCu;
branches:  2.28.2;
* tramp.el (tramp-remote-process-environment): Protect version
string by apostroph.
(tramp-shell-prompt-pattern): Do not use a shy group in case of
XEmacs.
(tramp-file-name-for-operation): Add `call-process-region'.
(tramp-set-process-query-on-exit-flag): Fix wrong parentheses.

* tramp-compat.el (top): Do not autoload
`tramp-handle-file-remote-p'.  Load tramp-util.el and tramp-vc.el
only when `start-file-process' is not bound.
(tramp-advice-file-expand-wildcards): Do not use
`tramp-handle-file-remote-p'.
(tramp-compat-make-temp-file): Handle the case, that
`make-temp-file' has no third argument EXTENSION.

* tramp-util.el (top): Apply advices only when there are no file
name handlers for `start-file-process' and `process-file'.
----------------------------
revision 2.27
date: 2010-05-28 06:13:25 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 2CLK9YLsWaoW2yAu;
* tramp-compat.el (tramp-compat-delete-file): Use `symbol-value'
for backward compatibility.

* tramp.el (tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use `delete-file'
instead of `tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-do-copy-or-rename-file): Use
`delete-file' instead of `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.
(tramp-smb-handle-delete-directory): Use 'trash as arg.

* tramp-vc.el (tramp-vc-user-login-name): Use `delete-file'
instead of `tramp-compat-delete-file'.
----------------------------
revision 2.26
date: 2010-05-28 03:31:50 -0700;  author: albinus;  state: Exp;  lines: +11 -16;  commitid: 8f88ImmlFUbw9xAu;
* tramp-compat.el (tramp-compat-delete-file): Rewrite to handle
new TRASH arg of `delete-file'.

* tramp.el (tramp-handle-delete-file): Change FORCE arg to TRASH.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use null TRASH arg in
tramp-compat-delete-file call.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-delete-file)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use null TRASH arg
in `tramp-compat-delete-file' call.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-imap.el (tramp-imap-handle-delete-file): Rename arg.
(tramp-imap-do-copy-or-rename-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use null TRASH arg in
tramp-compat-delete-file call.
(tramp-smb-handle-delete-directory): Use tramp-compat-delete-file.
(tramp-smb-handle-delete-file): Rename arg.
----------------------------
revision 2.25
date: 2010-05-09 12:45:05 -0700;  author: albinus;  state: Exp;  lines: +41 -26;  commitid: mYjXXOy50YSYO8yu;
* tramp-compat.el (byte-compile-not-obsolete-vars): Define if not
bound.
(tramp-compat-copy-file): Add PRESERVE-SELINUX-CONTEXT.
(tramp-compat-funcall): New defmacro.
(tramp-compat-line-beginning-position)
(tramp-compat-line-end-position)
(tramp-compat-temporary-file-directory)
(tramp-compat-make-temp-file, tramp-compat-file-attributes)
(tramp-compat-copy-file, tramp-compat-copy-directory)
(tramp-compat-delete-file, tramp-compat-delete-directory)
(tramp-compat-number-sequence, tramp-compat-process-running-p)
* tramp.el (top, with-progress-reporter)
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-handle-dired-compress-file, tramp-handle-shell-command)
(tramp-completion-mode-p, tramp-check-for-regexp)
(tramp-open-connection-setup-interactive-shell)
(tramp-compute-multi-hops, tramp-read-passwd, tramp-clear-passwd)
(tramp-time-diff, tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag, tramp-unload-tramp)
* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-reporter-dump-variable, tramp-load-report-modules)
(tramp-append-tramp-buffers)
* tramp-gvfs.el (tramp-gvfs-handle-file-selinux-context)
* tramp-util.el (tramp-gud-file-name): Use it.

* tramp-imap.el (top): Autoload `epg-make-context'.
----------------------------
revision 2.24
date: 2010-05-06 01:28:23 -0700;  author: albinus;  state: Exp;  lines: +16 -9;  commitid: gZma8ggIUvl1bHxu;
* tramp.el (top, with-progress-reporter): Use `symbol-function'
inside `funcall'.

* tramp-compat.el (tramp-compat-file-attributes)
(tramp-compat-delete-file, tramp-compat-delete-directory): Handle
only `wrong-number-of-arguments' error.

* tramp-gvfs.el (tramp-gvfs-handle-copy-file): Fix typo.
(tramp-gvfs-handle-file-selinux-context): Use `symbol-function'
inside `funcall'.
----------------------------
revision 2.23
date: 2010-05-05 02:57:35 -0700;  author: albinus;  state: Exp;  lines: +11 -0;  commitid: 7vDVEtI34jXBHzxu;
Add FORCE argument to `delete-file'.

* tramp-compat.el (tramp-compat-delete-file): New defun.

* tramp.el (tramp-handle-delete-file): Add FORCE arg.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-file): Add FORCE arg.
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use
`tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Add FORCE arg.
(tramp-gvfs-handle-write-region): Use `tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-handle-delete-file): Add FORCE arg.
(tramp-imap-do-copy-or-rename-file): Use `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-delete-file): Add FORCE arg.
(tramp-smb-handle-copy-file, tramp-smb-handle-file-local-copy)
(tramp-smb-handle-rename-file, tramp-smb-handle-write-region): Use
`tramp-compat-delete-file'.

* tramp-vc.el (tramp-vc-user-login-name): Use
`tramp-compat-delete-file'.
----------------------------
revision 2.22
date: 2010-03-19 07:12:20 -0700;  author: albinus;  state: Exp;  lines: +28 -56;  commitid: vPLrSNK85jZuCyru;
Discard GNU Emacs 21 compatibility.

* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-get-remote-path): Use `copy-tree'.
(tramp-set-auto-save-file-modes): Adapt version check.

* tramp-compat.el (tramp-advice-file-expand-wildcards): No need to
protect `featurep' call anymore.
(tramp-compat-make-temp-file): Simplify fallback implementation.
(tramp-compat-copy-tree): Remove function.

* tramp-fish.el (tramp-fish-handle-directory-files-and-attributes):
Use `tramp-compat-file-attributes'.

* tramp-util.el (tramp-advice-dired-insert-directory): Remove advice.
----------------------------
revision 2.21
date: 2010-03-15 16:38:22 -0700;  author: albinus;  state: Exp;  lines: +18 -5;  commitid: jOAvuJj0cAcFS5ru;
* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Use
`tramp-compat-delete-directory'.

* tramp-compat.el (tramp-compat-delete-directory): Provide
implementation for older Emacsen.
----------------------------
revision 2.20
date: 2010-03-02 01:00:51 -0800;  author: albinus;  state: Exp;  lines: +13 -10;  commitid: sqObKjE4Vfcxrlpu;
* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Fix an
error when FILENAME and NEWNAME are existing remote directories.

* tramp-compat.el (tramp-compat-make-temp-file): Add optional
parameter DIR-FLAG.
----------------------------
revision 2.19
date: 2010-01-12 14:33:45 -0800;  author: albinus;  state: Exp;  lines: +5 -2;  commitid: S6PpbWbHJlF3w7ju;
* tramp.el (tramp-perl-encode, tramp-perl-decode):
Update copyrights for 2010.
(tramp-handle-insert-directory): Simplify handling of SWITCHES.
(tramp-wait-for-output): Check, whether PROC is available.

* tramp-compat.el (tramp-advice-file-expand-wildcards): Wrap call
of `featurep' for 2nd argument.
----------------------------
revision 2.18
date: 2009-12-17 05:04:21 -0800;  author: albinus;  state: Exp;  lines: +30 -1;  commitid: Cvmh8LFqA5fxcJfu;
* tramp.el (tramp-handle-file-remote-p): Expand file name only if
there is already an established connection.
(tramp-advice-file-expand-wildcards): Remove it.

* tramp-compat.el (top): Autoload `tramp-handle-file-remote-p'.
(tramp-advice-file-expand-wildcards): Moved from tramp.el.
Activate advice for older GNU Emacs versions.  (Bug#5237)
----------------------------
revision 2.17
date: 2009-11-07 14:22:38 -0800;  author: albinus;  state: Exp;  lines: +49 -0;  commitid: COtTttUn8QjWzDau;
* tramp-compat.el (tramp-compat-copy-directory)
(tramp-compat-delete-directory): New defuns.
----------------------------
revision 2.16
date: 2009-10-07 00:00:35 -0700;  author: albinus;  state: Exp;  lines: +9 -9;  commitid: vLheTilQC0cptz6u;
* tramp-compat.el (tramp-compat-process-running-p): Check that the
comm attribute is present before calling regexp-quote.
----------------------------
revision 2.15
date: 2009-09-19 12:50:10 -0700;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: wsLYTvhoz4Uhjk4u;
* tramp-compat.el (byte-compile-not-obsolete-vars): Set if bound.
----------------------------
revision 2.14
date: 2009-09-04 01:10:31 -0700;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: mOnZNLifmsiaVk2u;
* tramp-compat.el (tramp-compat-line-beginning-position): New defun.
----------------------------
revision 2.13
date: 2009-09-02 02:59:19 -0700;  author: albinus;  state: Exp;  lines: +23 -1;  commitid: fgYyfBnLpaGtA52u;
* tramp-compat.el (tramp-compat-number-sequence): New defun.
----------------------------
revision 2.12
date: 2009-09-01 14:08:18 -0700;  author: albinus;  state: Exp;  lines: +31 -8;  commitid: Ca6R9mpRmkLXj12u;
* tramp-compat.el (top): Autoload used functions from tramp.el.
(file-remote-p, process-file, start-file-process, set-file-times)
(tramp-compat-file-attributes): Compatibility functions shall not
call directly `tramp-handle-*', because this would bypass the
locking mechanism.
----------------------------
revision 2.11
date: 2009-06-06 16:09:55 -0700;  author: albinus;  state: Exp;  lines: +51 -0;  commitid: 6s9Wf66ToD94NQQt;
* tramp-compat.el (tramp-compat-split-string)
(tramp-compat-process-running-p): New defuns.
----------------------------
revision 2.10
date: 2009-01-05 11:55:00 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: TcAK7lfhtIP7Bixt;
Update copyrights for 2009.
----------------------------
revision 2.9
date: 2008-05-13 14:15:31 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: 5gGZIfOlSH74FQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.8
date: 2008-04-27 09:29:23 -0700;  author: albinus;  state: Exp;  lines: +6 -5;  commitid: EmeoyAkBiM3NAL0t;
* tramp.el (tramp-handle-make-symbolic-link)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-insert-directory, tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-insert-file-contents, tramp-handle-write-region, )
* tramp-cache.el (tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property)
* tramp-cpmpat.el (tramp-compat-make-temp-file)
* tramp-fish.el (tramp-fish-handle-expand-file-name): Disable
`file-name-handler-alist' when handling localname.  It could have
a remote file syntax, like a VMS file name.
----------------------------
revision 2.7
date: 2008-03-15 14:44:00 -0700;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: 6cPImwFVlK3qIgVs;
*** empty log message ***
----------------------------
revision 2.6
date: 2008-01-12 03:04:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.5
date: 2007-12-18 12:56:22 -0800;  author: albinus;  state: Exp;  lines: +5 -2;  commitid: u4YIGu3nyaNihXJs;

* tramp-compat.el (top): Require cl only when compiling.
Reported by Glenn Morris <rgm@gnu.org>.
----------------------------
revision 2.4
date: 2007-10-06 04:52:24 -0700;  author: albinus;  state: Exp;  lines: +26 -0;  commitid: rLyecNwMxsQHBwAs;

* lisp/tramp.el (top): Move loading of tramp-util.el and tramp-vc.el to
tramp-compat.el.
(tramp-make-tramp-temp-file): Complete rewrite.  Create remote
temporary file if possible, in order to avoid a security hole.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): Call `tramp-make-tramp-temp-file'
with DONT-CREATE, because the connection is not setup yet.
(tramp-handle-process-file): Rewrite temporary file handling.
(tramp-completion-mode): New defvar.
(tramp-completion-mode-p): Use it.

* lisp/tramp-compat.el (top):  Load tramp-util.el and tramp-vc.el.

* lisp/tramp-fish.el (tramp-fish-handle-process-file): Rewrite
temporary file handling.

* texi/tramp.texi (External packages): New section.
----------------------------
revision 2.3
date: 2007-10-04 13:04:37 -0700;  author: albinus;  state: Exp;  lines: +36 -0;  commitid: CaRN4HuMV0iBojAs;

* lisp/tramp.el (tramp-make-temp-file): Move to tramp-compat.el.
(tramp-do-copy-or-rename-file-directly): Handle tmpfile only in
the cond clauses where needed.
(tramp-handle-write-region): Rearrange code for proper handling of
tmpfile.

* lisp/tramp-compat.el (tramp-compat-make-temp-file): New defsubst.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el: Rename `tramp-make-temp-file' to
`tramp-compat-make-temp-file'.
----------------------------
revision 2.2
date: 2007-10-03 03:45:47 -0700;  author: albinus;  state: Exp;  lines: +61 -50;  commitid: T0jhSlYBL14Nk8As;

* lisp/tramp.el (top): Add tramp-compat to `tramp-unload-hook'.
(tramp-file-name-handler-alist): Add
`tramp-handle-insert-file-contents-literally'.  Neded for XEmacs.
(tramp-make-temp-file): Use `make-temp-name'. `make-temp-file',
used before, creates the file already, which is not desired.
(tramp-do-copy-or-rename-file-directly): Simplify handling of
temporary file.
(tramp-handle-insert-file-contents): Assign the result in the
short track case.
(tramp-handle-insert-file-contents-literally): New defun.
(tramp-completion-mode-p): Revert change from 2007-09-24.
Checking for `return' etc as last character is not sufficient, for
example in dired-mode when entering <g> (revert-buffer) or
<s> (dired-sort).

* lisp/tramp-compat.el (top): Add also compatibility code for loading
appropriate timer package.
(tramp-compat-copy-tree): Check for `subrp' and `symbol-file' in
order to avoid autoloading problems.

* lisp/tramp-efs-el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Move further compatibility code to
tramp-compat.el.

	* tramp-ftp.el (tramp-ftp-file-name-handler): Handle the case
	where the second parameter of `copy-file' or `rename-file' is a
	remote file but not via ftp.

	* tramp-util.el: Remove `tramp-minor-mode' and its declarations.
----------------------------
revision 2.1
date: 2007-09-30 09:32:29 -0700;  author: albinus;  state: Exp;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 2.28.2.1
date: 2011-01-24 02:09:41 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-efs.el,v
Working file: lisp/tramp-efs.el
head: 2.26
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.22
	branch-2-1-stable: 2.21.0.2
	branchpoint-2-1-stable: 2.21
	V-2-1-19: 2.21
	V-2-1-18: 2.21
	V-2-1-17: 2.21
	V-2-1-16: 2.21
	V-2-1-15: 2.21
	V-2-1-14: 2.20
	V-2-1-13: 2.19
	V-2-0-57: 2.4.2.2
	V-2-1-12: 2.16
	V-2-1-11: 2.16
	V-2-1-10: 2.12
	V-2-0-56: 2.4.2.1
	V-2-1-9: 2.10
	V-2-1-8: 2.10
	V-2-0-55: 2.4.2.1
	V-2-1-7: 2.10
	V-2-0-54: 2.4.2.1
	V-2-1-6: 2.10
	V-2-0-53: 2.4.2.1
	V-2-0-52: 2.4.2.1
	V-2-1-5: 2.8
	V-2-1-4: 2.8
	V-2-0-51: 2.4.2.1
	V-2-0-50: 2.4.2.1
	V-2-0-49: 2.4
	V-2-0-48: 2.4
	V-2-1-3: 2.7
	V-2-0-47: 2.4
	V-2-0-46: 2.4
	V-2-0-45: 2.4
	V-2-1-2: 2.7
	V-2-0-44: 2.4
	V-2-1-1: 2.5
	V-2-0-43: 2.4
	V-2-0-42: 2.4
	V-2-0-41: 2.4
	V-2-1-0: 2.4
	branch-2-0-stable: 2.4.0.2
	branchpoint-2-0-stable: 2.4
	V-2-0-40: 2.4
	V-2-0-39: 2.3
	V-2-0-38: 2.2
	V-2-0-37: 2.2
	V-2-0-36: 2.2
	V-2-0-35: 2.2
	V-2-0-34: 2.1
keyword substitution: kv
total revisions: 28;	selected revisions: 28
description:
----------------------------
revision 2.26
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.25
date: 2011-01-19 03:09:00 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 2.24
date: 2010-12-30 00:57:35 -0800;  author: albinus;  state: Exp;  lines: +19 -18;  commitid: sJi0TOvcI16wGh2v;
* tramp.el (tramp-default-method-alist, tramp-default-user-alist)
(tramp-local-host-regexp, tramp-prefix-domain-format)
(tramp-prefix-domain-regexp): Set tramp-autoload cookie.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-sh.el:
* tramp-smb.el: Add tramp-autoload cookie for initialisation code
of `tramp-default-method-alist' and `tramp-default-user-alist'.
----------------------------
revision 2.23
date: 2010-12-01 09:42:17 -0800;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: Uh2KDiGC5DnnwBYu;
* tramp.el (tramp-debug-message): Extend function exclude list.

* tramp-sh.el (tramp-methods): Add recursive options to "pscp" and
"psftp".  Exchange "%k" marker with options.
(tramp-do-copy-or-rename-file, tramp-sh-handle-file-local-copy):
Compute size of link target.
(tramp-do-copy-or-rename-file-out-of-band). Move setting of
`tramp-current-*' up due to gateway methods.  Optimze computing of
copy arguments.  Use `tramp-get-connection-name' and
`tramp-get-connection-buffer'.  Improve debug messages.

* tramp.el (tramp-default-method-alist)
(tramp-default-user-alist, tramp-default-proxies-alist): Adapt
custom options type.  (Bug#7445)
(tramp-local-host-regexp): Add "localhost6".
(tramp-file-name-port): Check also for `tramp-default-port'.
(tramp-get-connection-name): New defun.
(tramp-get-connection-process): Use it.
(tramp-drop-volume-letter): Fix doc string.

* tramp-cmds.el: Remove solved todo item.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-smb.el: Fix regexps added to `tramp-default-method-alist'
and `tramp-default-user-alist', respectively.

* tramp-gw.el (tramp-gw-open-connection): Use
`tramp-get-connection-name' and `tramp-get-connection-buffer'.

* tramp-imap.el (tramp-imap-make-iht): Use just
`tramp-file-name-port'.

* tramp-sh.el (tramp-compute-multi-hops): Remove port
determination.
(tramp-maybe-open-connection): Use `tramp-get-connection-name'.
----------------------------
revision 2.22
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +17 -5;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.21
date: 2008-09-14 03:52:32 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: t5VIkTFEpFRdeJit;
*** empty log message ***
----------------------------
revision 2.20
date: 2008-05-13 14:15:53 -0700;  author: albinus;  state: Exp;  lines: +5 -6;  commitid: YykWMdZRZPKbFQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.19
date: 2008-03-21 09:40:18 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 6o0rqNDYgC1hQ0Ws;
Fix up encoding.
----------------------------
revision 2.18
date: 2008-03-17 15:42:50 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: D1p7n7oRJRNBYwVs;
* tramp-efs.el (top): Move coding cookie at the end.
----------------------------
revision 2.17
date: 2008-01-12 03:04:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.16
date: 2007-10-03 03:45:47 -0700;  author: albinus;  state: Exp;  lines: +0 -4;  commitid: T0jhSlYBL14Nk8As;

* lisp/tramp.el (top): Add tramp-compat to `tramp-unload-hook'.
(tramp-file-name-handler-alist): Add
`tramp-handle-insert-file-contents-literally'.  Neded for XEmacs.
(tramp-make-temp-file): Use `make-temp-name'. `make-temp-file',
used before, creates the file already, which is not desired.
(tramp-do-copy-or-rename-file-directly): Simplify handling of
temporary file.
(tramp-handle-insert-file-contents): Assign the result in the
short track case.
(tramp-handle-insert-file-contents-literally): New defun.
(tramp-completion-mode-p): Revert change from 2007-09-24.
Checking for `return' etc as last character is not sufficient, for
example in dired-mode when entering <g> (revert-buffer) or
<s> (dired-sort).

* lisp/tramp-compat.el (top): Add also compatibility code for loading
appropriate timer package.
(tramp-compat-copy-tree): Check for `subrp' and `symbol-file' in
order to avoid autoloading problems.

* lisp/tramp-efs-el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Move further compatibility code to
tramp-compat.el.

	* tramp-ftp.el (tramp-ftp-file-name-handler): Handle the case
	where the second parameter of `copy-file' or `rename-file' is a
	remote file but not via ftp.

	* tramp-util.el: Remove `tramp-minor-mode' and its declarations.
----------------------------
revision 2.15
date: 2007-09-30 09:32:29 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 2.14
date: 2007-07-29 08:39:39 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: 6Mig8uNEFEeF5Grs;
*** empty log message ***
----------------------------
revision 2.13
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +5 -5;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.12
date: 2007-07-01 22:09:51 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.11
date: 2007-07-01 11:31:34 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.10
date: 2006-05-28 11:47:01 -0700;  author: albinus;  state: Exp;  lines: +3 -4;

Version 2.1.6 released.
----------------------------
revision 2.9
date: 2006-05-07 14:33:48 -0700;  author: albinus;  state: Exp;  lines: +1 -6;

* lisp/tramp.el (top): cl and custom are always required.
(tramp-verbose): Change description of levels.
(tramp-encoding-reads-stdin, tramp-repair-jka-compr)
(tramp-discard-garbage, tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name)
(tramp-find-default-method, tramp-find-default-user)
(tramp-find-default-host): Remove them.
(tramp-methods): Change defcustom into defvar.
(tramp-actions-before-shell, tramp-actions-copy-out-of-band):
Change defcustom into defconst.
(tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-make-temp-file, tramp-make-tramp-temp-file): Move them up.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-handle-make-auto-save-file-name): For Emacs 21, set
`tramp-auto-save-directory' if unset in order to guarantee unique
auto-save file names.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): New defsubst.  Added with
autoload cookie.  Code from `tramp-repair-jka-compr' moved here.
Register `tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-unload-file-name-handlers): Renamed from
`tramp-unload-file-name-handler-alist'.
(tramp-completion-handle-file-name-all-completions): Delete
directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-process-actions, tramp-wait-for-regexp)
(tramp-maybe-open-connection, tramp-send-command)
(tramp-send-command-internal): Trace sent command with level 6.
(tramp-check-for-regexp): Trace echo with level 5.
(tramp-dissect-file-name): Expand method, user, host.
(tramp-find-method, tramp-find-user, tramp-find-host): Add code
for default values.  Remove all calls but the one in
`tramp-dissect-file-name'.
(tramp-bug, tramp-reporter-dump-variable)
(tramp-append-tramp-buffers): Dump also hash variables.

* lisp/tramp-cache.el: Trace cache commands with level 7.  Trace
connection commands with level 8.
(tramp-cache-print): Dump strings as such.
(tramp-persistency-file-name): New defcustom.
(tramp-connection-properties): New defvar.
(tramp-dump-connection-properties): New defun.
(tramp-get-connection-property, tramp-set-connection-property):
Rewritten.
(top): Dump connection history when leaving Emacs.  Read it during
initialization.

* lisp/tramp-efs.el (tramp-efs-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-ftp.el (tramp-ftp-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-smb.el: Trace sent commands with level 6.
(tramp-smb-file-name-p): Don't use tramp-find-* functions.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
(Bug Reports): Level 6 results already in file contents.
(Traces and Profiles): Describe new levels.
----------------------------
revision 2.8
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +3 -3;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.7
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 2.6
date: 2004-09-04 07:52:00 -0700;  author: albinus;  state: Exp;  lines: +5 -5;


* lisp/tramp-efs.el (all): Rename `tramp-postfix-single-method-*' to
`tramp-postfix-method-*'.

* texi/tramp.texi (Frequently Asked Questions): Add two examples of
using abbreviations to shortening Tramp file names.
----------------------------
revision 2.5
date: 2004-07-26 12:36:34 -0700;  author: albinus;  state: Exp;  lines: +0 -1;


Removing multi-hop methods.  Incorporating proxies.
----------------------------
revision 2.4
date: 2004-05-01 13:04:22 -0700;  author: albinus;  state: Exp;  lines: +5 -1;
branches:  2.4.2;


Suppress byte-compiler warnings were possible.

* lisp/tramp.el (toplevel): Call of `byte-compiler-options' pacified.
`directory-sep-char' set to not obsolete (we need it for XEmacs).
Define `last-coding-system-used' in XEmacs case.  Pacify
declarations of `backup-directory-alist',
`bkup-backup-directory-info' and
`tramp-save-PC-expand-many-files'.
(tramp-feature-write-region-fix): Pacify funcall of
`find-operation-coding-system'.
(tramp-line-end-position): Pacify funcall of `line-end-position'
and `point-at-eol'.
(tramp-handle-dired-compress-file): Pacify funcall of
`dired-remove-file'.
(tramp-handle-find-backup-file-name): Pacify access to
`tramp-backup-directory-alist' and
`tramp-bkup-backup-directory-info'.
(tramp-touch): `error' needs just one parameter if there is no
string substitution.
(tramp-bug): `tramp-backup-directory-alist',
`tramp-bkup-backup-directory-info', `backup-directory-alist' and
`bkup-backup-directory-info' must be quoted as symbols.

* lisp/tramp-efs.el (toplevel): Suppress byte-compiler warnings.

* lisp/tramp-smb.el (toplevel): Suppress byte-compiler warnings.
Define `last-coding-system-used' in XEmacs case.

* lisp/tramp-vc.el (toplevel): Suppress byte-compiler warnings.
(tramp-vc-do-command-new): Pacify funcall of `vc-setup-buffer' and
`vc-exec-after'.
(tramp-vc-workfile-unchanged-p): Pacify funcall of
`vc-default-workfile-unchanged-p'.
(tramp-handle-vc-user-login-name): Pacify funcall of
`subr-arity'. `let' must be `let*' because of `file'.
----------------------------
revision 2.3
date: 2003-12-27 13:23:48 -0800;  author: uid67418;  state: Exp;  lines: +78 -37;


* lisp/tramp.el (tramp-completion-mode): Add XEmacs input
events. Until now it was not necessary, because they are
evaluated in case of unified filenames only.

* lisp/tramp-efs.el (top): Add all XEmacs download sites to
`tramp-default-method-alist'.  The existing settings should be
sufficient already, but it's better to make it explicitely.
(tramp-efs-method-given, tramp-efs-method-regexp): New variables.
(tramp-efs-path-regexp, tramp-efs-path-format-string)
(tramp-efs-path-format-without-user)
(tramp-efs-path-user-at-host-format)
(tramp-efs-path-host-format, tramp-efs-path-root-regexp): Changed
to a function.  Their values depend on the existence of the method
tag in filename.
(tramp-efs-file-name-handler): Check first whether the method tag
is given in a filename.
(tramp-efs-file-name-p): A syntax check must be performed first,
otherwise `tramp-dissect-file-name' returns with an error.

* lisp/tramp-ftp.el (Commentary): Removing pointer to EFS.  It has its
own module.

* lisp/tramp-smb.el (top): Setting default value in
`tramp-default-method-alist' corrected.  Order of USER and HOST
have been wrong.  Nobody claimed for months ...

* texi/tramp.texi (Issues): Describe how to use unified filenames with
XEmacs.
----------------------------
revision 2.2
date: 2003-06-16 08:45:32 -0700;  author: kai;  state: Exp;  lines: +2 -1;
* tramp.el (tramp-shell-prompt-pattern): Allow multiple escape
sequences.

* tramp-uu.el:
* tramp-util.el:
* tramp-efs.el: Use iso-2022-7bit encoding with coding cookie for
XEmacs compatibility.
----------------------------
revision 2.1
date: 2003-04-18 07:59:18 -0700;  author: kai;  state: Exp;
* tramp-efs.el: New file.

* tramp.el (tramp-handle-expand-file-name): Make default method
explicit in file name.
(tramp-unified-filenames): Move to an earlier spot in the file.
(top-level): If tramp-unified-filenames is set and we're running
on XEmacs, load tramp-efs.
----------------------------
revision 2.4.2.2
date: 2007-07-25 12:37:30 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.4.2.1
date: 2005-07-10 14:36:48 -0700;  author: albinus;  state: Exp;  lines: +3 -3;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/tramp-fish.el,v
Working file: lisp/tramp-fish.el
head: 2.45
branch:
locks: strict
access list:
symbolic names:
	branch-2-1-stable: 2.43.0.2
	branchpoint-2-1-stable: 2.43
	V-2-1-19: 2.43
	V-2-1-18: 2.35
	V-2-1-17: 2.32
	V-2-1-16: 2.30
	V-2-1-15: 2.28
	V-2-1-14: 2.26
	V-2-1-13: 2.23
	V-2-1-12: 2.20
	V-2-1-11: 2.19
	V-2-1-10: 2.12
	V-2-1-9: 2.5
	V-2-1-8: 2.4
keyword substitution: kv
total revisions: 47;	selected revisions: 47
description:
----------------------------
revision 2.45
date: 2010-09-13 06:59:37 -0700;  author: albinus;  state: dead;  lines: +0 -0;  commitid: b1nL8wRcHHoyPqOu;
* tramp-fish.el: Remove file.
----------------------------
revision 2.44
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +14 -8;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.43
date: 2010-05-28 07:44:34 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 9Psmv9pA2R09yyAu;
branches:  2.43.2;
* tramp.el (tramp-debug-message ): Add `tramp-compat-funcall' to
ignored backtrace functions.
(with-progress-reporter): Expand docstring.
(tramp-handle-delete-file): Implement TRASH argument.
(tramp-get-remote-trash): New defun.
----------------------------
revision 2.42
date: 2010-05-28 06:13:25 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: 2CLK9YLsWaoW2yAu;
* tramp-compat.el (tramp-compat-delete-file): Use `symbol-value'
for backward compatibility.

* tramp.el (tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use `delete-file'
instead of `tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-do-copy-or-rename-file): Use
`delete-file' instead of `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.
(tramp-smb-handle-delete-directory): Use 'trash as arg.

* tramp-vc.el (tramp-vc-user-login-name): Use `delete-file'
instead of `tramp-compat-delete-file'.
----------------------------
revision 2.41
date: 2010-05-28 03:31:50 -0700;  author: albinus;  state: Exp;  lines: +5 -5;  commitid: 8f88ImmlFUbw9xAu;
* tramp-compat.el (tramp-compat-delete-file): Rewrite to handle
new TRASH arg of `delete-file'.

* tramp.el (tramp-handle-delete-file): Change FORCE arg to TRASH.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use null TRASH arg in
tramp-compat-delete-file call.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-delete-file)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use null TRASH arg
in `tramp-compat-delete-file' call.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-imap.el (tramp-imap-handle-delete-file): Rename arg.
(tramp-imap-do-copy-or-rename-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use null TRASH arg in
tramp-compat-delete-file call.
(tramp-smb-handle-delete-directory): Use tramp-compat-delete-file.
(tramp-smb-handle-delete-file): Rename arg.
----------------------------
revision 2.40
date: 2010-05-21 07:07:31 -0700;  author: albinus;  state: Exp;  lines: +4 -1;  commitid: IQ0J8LXDEMmtzEzu;
*** empty log message ***
----------------------------
revision 2.39
date: 2010-05-21 06:46:38 -0700;  author: albinus;  state: Exp;  lines: +47 -46;  commitid: RZ9vsTHEycGisEzu;
* tramp.el (tramp-do-copy-or-rename-file)
(tramp-handle-file-local-copy, tramp-maybe-open-connection): Tune
`with-progress-reporter' messages.
(tramp-handle-vc-registered):
* tramp-fish.el (tramp-fish-handle-file-local-copy)
(tramp-fish-handle-insert-file-contents)
(tramp-fish-maybe-open-connection):
* tramp-gvfs.el (tramp-gvfs-maybe-open-connection):
* tramp-imap.el (tramp-imap-do-copy-or-rename-file)
(tramp-imap-handle-insert-file-contents)
(tramp-imap-handle-file-local-copy): Use `with-progress-reporter'.
----------------------------
revision 2.38
date: 2010-05-05 02:57:36 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: 7vDVEtI34jXBHzxu;
Add FORCE argument to `delete-file'.

* tramp-compat.el (tramp-compat-delete-file): New defun.

* tramp.el (tramp-handle-delete-file): Add FORCE arg.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-file): Add FORCE arg.
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use
`tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Add FORCE arg.
(tramp-gvfs-handle-write-region): Use `tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-handle-delete-file): Add FORCE arg.
(tramp-imap-do-copy-or-rename-file): Use `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-delete-file): Add FORCE arg.
(tramp-smb-handle-copy-file, tramp-smb-handle-file-local-copy)
(tramp-smb-handle-rename-file, tramp-smb-handle-write-region): Use
`tramp-compat-delete-file'.

* tramp-vc.el (tramp-vc-user-login-name): Use
`tramp-compat-delete-file'.
----------------------------
revision 2.37
date: 2010-04-23 06:58:43 -0700;  author: albinus;  state: Exp;  lines: +5 -2;  commitid: jjKGKL8Sxss2q3wu;
Implement SELINUX backends.

* tramp.el (tramp-file-name-handler-alist): Add
`file-selinux-context' and `set-file-selinux-context'.
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context): New defuns.
(tramp-handle-copy-file, tramp-do-copy-or-rename-file): Handle
PRESERVE-SELINUX-CONTEXT.

* tramp-gvfs.el (tramp-gvfs-file-name-handler-alist): Add
`file-selinux-context' and `set-file-selinux-context'.
(tramp-gvfs-handle-file-selinux-context)
(tramp-gvfs-handle-set-file-selinux-context): New defuns.
(tramp-gvfs-handle-copy-file): Handle
PRESERVE-SELINUX-CONTEXT.

* tramp-fish.el (tramp-fish-handle-copy-file):
* tramp-imap.el (tramp-imap-handle-copy-file):
* tramp-smb.el (tramp-smb-handle-copy-file): Add
PRESERVE-SELINUX-CONTEXT.
----------------------------
revision 2.36
date: 2010-03-19 07:12:20 -0700;  author: albinus;  state: Exp;  lines: +4 -7;  commitid: vPLrSNK85jZuCyru;
Discard GNU Emacs 21 compatibility.

* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-get-remote-path): Use `copy-tree'.
(tramp-set-auto-save-file-modes): Adapt version check.

* tramp-compat.el (tramp-advice-file-expand-wildcards): No need to
protect `featurep' call anymore.
(tramp-compat-make-temp-file): Simplify fallback implementation.
(tramp-compat-copy-tree): Remove function.

* tramp-fish.el (tramp-fish-handle-directory-files-and-attributes):
Use `tramp-compat-file-attributes'.

* tramp-util.el (tramp-advice-dired-insert-directory): Remove advice.
----------------------------
revision 2.35
date: 2010-01-23 02:53:31 -0800;  author: albinus;  state: Exp;  lines: +5 -2;  commitid: r6lhKUCOypTThtku;
* tramp.el (tramp-completion-function-alist)
(tramp-file-name-regexp, tramp-chunksize)
(tramp-local-coding-commands, tramp-remote-coding-commands):
Fix docstring.
(tramp-do-copy-or-rename-file-directly): Do not use
`tramp-handle-file-remote-p'.
(tramp-find-foreign-file-name-handler)
(tramp-advice-make-auto-save-file-name)
(tramp-set-auto-save-file-modes): Remove superfluous check for
`stringp'.  This is done inside `tramp-tramp-file-p'.

* tramp-fish.el (tramp-fish-handle-directory-files-and-attributes):
Do not use `tramp-fish-handle-file-attributes.

* tramp-smb.conf (tramp-smb-conf): New defcustom.
(tramp-smb-maybe-open-connection): Use it.
----------------------------
revision 2.34
date: 2010-01-14 20:52:28 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: zweSrHgxjm35ypju;
Add 2010 to copyright years.
----------------------------
revision 2.33
date: 2009-12-06 22:21:29 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: hy5RcicI2B1pipeu;
* tramp-fish.el (tramp-fish-maybe-open-connection): Use
`tramp-initial-end-of-output'.
----------------------------
revision 2.32
date: 2009-11-07 14:26:49 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: bqjG4B9bRSJmBDau;
* tramp-fish.el (tramp-fish-handle-delete-directory): Use
`tramp-compat-delete-directory'.
----------------------------
revision 2.31
date: 2009-10-01 08:22:11 -0700;  author: albinus;  state: Exp;  lines: +11 -2;  commitid: Le2apSB3u8mrrQ5u;
* tramp-fish.el (tramp-fish-handle-delete-directory): Handle
optional parameter RECURSIVE.
----------------------------
revision 2.30
date: 2009-06-06 16:11:26 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: Mo6jE5yKEC4ANQQt;
* tramp-fish.el (tramp-fish-file-name-handler-alist): Add handler
for `dired-uncache'.
----------------------------
revision 2.29
date: 2009-04-05 08:25:37 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: fTTZPE80tWeldQIt;
* tramp-fish.el (tramp-fish-do-copy-or-rename-file-directly): Use
`tramp-default-file-modes'.
----------------------------
revision 2.28
date: 2009-01-05 11:56:10 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: cJrYGTnG4fpwBixt;
Update copyrights for 2009.
----------------------------
revision 2.27
date: 2008-11-16 06:10:19 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: hQ0kogC3EbmviQqt;
* tramp-fish.el (tramp-fish-file-name-handler-alist): Handle `file-name-as-directory'.
----------------------------
revision 2.26
date: 2008-07-26 11:07:26 -0700;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: 5Zcp9UhN51R3flct;
* tramp-fish.el (tramp-fish-maybe-open-connection): Don't call
`tramp-process-sentinel'.
----------------------------
revision 2.25
date: 2008-05-13 14:16:41 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: JrCtbTRui6AsFQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.24
date: 2008-04-27 09:29:47 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: eo5sB1JtCeIUAL0t;
*** empty log message ***
----------------------------
revision 2.23
date: 2008-03-19 14:08:46 -0700;  author: albinus;  state: Exp;  lines: +7 -7;  commitid: WRggsAp8hqwloMVs;
* tramp-fish.el (tramp-fish-handle-expand-file-name): Let-bind
`directory-sep-char'.
----------------------------
revision 2.22
date: 2008-02-03 03:41:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: k0qeDxzdCZInHWPs;
* tramp-fish.el (tramp-fish-maybe-open-connection): Use
`tramp-process-sentinel' as process sentinel.
----------------------------
revision 2.21
date: 2008-01-12 03:04:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.20
date: 2007-10-27 06:50:43 -0700;  author: albinus;  state: Exp;  lines: +8 -7;  commitid: h3wsKiYvXLWtAeDs;

* lisp/tramp.el (tramp-wrong-passwd-regexp): Tune regexp.
(tramp-get-remote-tmpdir): New defun.
(tramp-make-tramp-temp-file): Use it.
(tramp-local-call-process): New defun.  Replace all calls of
`call-process' by this when appropriate.
(tramp-handle-write-region): Replace calls of `file-attributes' by
`tramp-compat-file-attributes'.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Make the first command a `tramp-send-command' call, with let-bind
of `tramp-end-of-output'.
(tramp-version, tramp-bug, tramp-reporter-dump-variable)
(tramp-load-report-modules, tramp-append-tramp-buffers): Move to
tramp-cmds.el.

* lisp/tramp-fish.el (tramp-fish-handle-copy-file)
(tramp-fish-do-copy-or-rename-file)
(tramp-fish-do-copy-or-rename-file-directly):
* lisp/tramp-smb.el (tramp-smb-handle-copy-file):
Add parameter PRESERVE-UID-GID.
----------------------------
revision 2.19
date: 2007-10-06 04:52:25 -0700;  author: albinus;  state: Exp;  lines: +17 -20;  commitid: rLyecNwMxsQHBwAs;

* lisp/tramp.el (top): Move loading of tramp-util.el and tramp-vc.el to
tramp-compat.el.
(tramp-make-tramp-temp-file): Complete rewrite.  Create remote
temporary file if possible, in order to avoid a security hole.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): Call `tramp-make-tramp-temp-file'
with DONT-CREATE, because the connection is not setup yet.
(tramp-handle-process-file): Rewrite temporary file handling.
(tramp-completion-mode): New defvar.
(tramp-completion-mode-p): Use it.

* lisp/tramp-compat.el (top):  Load tramp-util.el and tramp-vc.el.

* lisp/tramp-fish.el (tramp-fish-handle-process-file): Rewrite
temporary file handling.

* texi/tramp.texi (External packages): New section.
----------------------------
revision 2.18
date: 2007-10-04 13:04:37 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: CaRN4HuMV0iBojAs;

* lisp/tramp.el (tramp-make-temp-file): Move to tramp-compat.el.
(tramp-do-copy-or-rename-file-directly): Handle tmpfile only in
the cond clauses where needed.
(tramp-handle-write-region): Rearrange code for proper handling of
tmpfile.

* lisp/tramp-compat.el (tramp-compat-make-temp-file): New defsubst.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el: Rename `tramp-make-temp-file' to
`tramp-compat-make-temp-file'.
----------------------------
revision 2.17
date: 2007-10-03 03:45:47 -0700;  author: albinus;  state: Exp;  lines: +12 -22;  commitid: T0jhSlYBL14Nk8As;

* lisp/tramp.el (top): Add tramp-compat to `tramp-unload-hook'.
(tramp-file-name-handler-alist): Add
`tramp-handle-insert-file-contents-literally'.  Neded for XEmacs.
(tramp-make-temp-file): Use `make-temp-name'. `make-temp-file',
used before, creates the file already, which is not desired.
(tramp-do-copy-or-rename-file-directly): Simplify handling of
temporary file.
(tramp-handle-insert-file-contents): Assign the result in the
short track case.
(tramp-handle-insert-file-contents-literally): New defun.
(tramp-completion-mode-p): Revert change from 2007-09-24.
Checking for `return' etc as last character is not sufficient, for
example in dired-mode when entering <g> (revert-buffer) or
<s> (dired-sort).

* lisp/tramp-compat.el (top): Add also compatibility code for loading
appropriate timer package.
(tramp-compat-copy-tree): Check for `subrp' and `symbol-file' in
order to avoid autoloading problems.

* lisp/tramp-efs-el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Move further compatibility code to
tramp-compat.el.

	* tramp-ftp.el (tramp-ftp-file-name-handler): Handle the case
	where the second parameter of `copy-file' or `rename-file' is a
	remote file but not via ftp.

	* tramp-util.el: Remove `tramp-minor-mode' and its declarations.
----------------------------
revision 2.16
date: 2007-09-30 09:32:29 -0700;  author: albinus;  state: Exp;  lines: +17 -24;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 2.15
date: 2007-09-28 08:52:02 -0700;  author: albinus;  state: Exp;  lines: +14 -13;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 2.14
date: 2007-07-29 08:39:39 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: 6Mig8uNEFEeF5Grs;
*** empty log message ***
----------------------------
revision 2.13
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +3 -4;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.12
date: 2007-07-16 14:33:01 -0700;  author: albinus;  state: Exp;  lines: +20 -13;  commitid: hlv4JiwKkWs8s2qs;

* lisp/tramp.el (tramp-handle-set-file-times): New defun.  Replaces
`tramp-touch'.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add entry for `set-file-times'.
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-out-of-band): Use `set-file-times'.
(tramp-handle-unhandled-file-name-directory): Rewrite.
(tramp-convert-file-attributes): Add error handling when inode is
extraordinary big.
(tramp-get-inode): Change parameter from FILE to VEC.

* lisp/tramp-fish.el (tramp-fish-file-name-handler-alist): Add entry
for `set-file-times'.  Rename `start-process' into
`start-file-process'.  Remove `call-process' entry.
(tramp-fish-handle-set-file-times): New defun.
(tramp-fish-handle-executable-find): Use `process-file'.
(tramp-fish-handle-process-file): New defun.  Replaces
`tramp-fish-handle-call-process'.
(tramp-fish-do-copy-or-rename-file-directly): Use
`set-file-times'.
(tramp-fish-get-file-entries): Change `tramp-get-inode' parameter.

* lisp/tramp-smb.el (tramp-smb-handle-file-attributes): Change
`tramp-get-inode' parameter.

* lisp/tramp-util.el (all): Change all checks to (fboundp
'start-file-process).
(set-file-times): Add a defalias if function does not exist.

* texi/tramp.texi (Frequently Asked Questions): Simplify recentf
example.
----------------------------
revision 2.11
date: 2007-07-12 14:09:36 -0700;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: 07w8tRE3nh6Pswps;
*** empty log message ***
----------------------------
revision 2.10
date: 2007-07-01 22:09:51 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.9
date: 2007-07-01 11:31:34 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.8
date: 2007-06-20 13:26:39 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: 6Fqxls1tJZzgVGms;

* lisp/tramp.el:
* lisp/tramp-cache.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el: Use `expand-file-name' instead of `concat' where
appropriate.

* lisp/tramp.el (tramp-action-yesno, tramp-action-yn): Protect
`pop-to-buffer' by `save-match-data'.

* texi/tramp.texi (Filename completion): Rework examples for local
filename completion.
----------------------------
revision 2.7
date: 2007-06-17 04:12:31 -0700;  author: albinus;  state: Exp;  lines: +23 -23;  commitid: IQTI2NEf6N68Xfms;

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Unify "Tramp" in strings.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): "//" and "/~"
substitute only in the local filename part.  Suggested by Peter
Gordon <peter@pg-consultants.com>.
(tramp-advice-minibuffer-electric-separator)
(tramp-advice-minibuffer-electric-tilde): New defadvices.
(tramp-append-tramp-buffers): Replace "sensible" by "sensitive" in
the hint.

* texi/tramp.texi (Filename completion): "//" substitutes in local
filename only.
----------------------------
revision 2.6
date: 2007-05-22 13:21:44 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: DjFy5iQMKvGUPXis;

* lisp/tramp.el (tramp-handle-expand-file-name):
* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name):
Key for home directory cache entry must distinguish different
users.  Reported by Gilles Pion <gpion@lfdj.com>.
----------------------------
revision 2.5
date: 2007-03-05 13:57:51 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-methods): Add gateway parameter to "scp",
"scp1", "scp2", "scpc", "scpx", "sshx".
(tramp-do-copy-or-rename-file-out-of-band): Start implementation
for gateways.  It is not finished yet.
(tramp-make-copy-program-file-name): Change parameter to VEC.
(tramp-make-temp-file): New parameter FILENAME.  Append its
extension to the resulting temporary file name.
(tramp-handle-file-local-copy, tramp-handle-write-region): Apply
it.

* lisp/tramp-smb.el (tramp-smb-handle-file-local-copy)
(tramp-smb-handle-write-region): Apply it.

* lisp/tramp-fish.el (tramp-fish-handle-file-local-copy): Apply it.

* texi/tramp.texi (trampfn, trampfnmhl, trampfnuhl, trampfnhl): New
macros.  Apply them wherever possible, improving readability.
(Multi-hops): Add some words in the footnote regarding ethical
issues of passing firewalls.
(Remote processes): New subsection discussing integration into
eshell.
----------------------------
revision 2.4
date: 2007-01-02 13:18:17 -0800;  author: albinus;  state: Exp;  lines: +99 -15;

* lisp/tramp-fish.el (tramp-fish-handle-write-region): Implement APPEND.
(tramp-fish-handle-rename-file)
(tramp-fish-handle-copy-file): Error handling is not necessary here,
will be done centrally.  Apply `tramp-fish-do-copy-or-rename-file'.
(tramp-fish-do-copy-or-rename-file)
(tramp-fish-do-copy-or-rename-file-directly): New defuns.
----------------------------
revision 2.3
date: 2006-12-30 14:31:18 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-file-name-handler-alist): Add handler for
`shell-command'.
(tramp-handle-shell-command): New defun.
(tramp-touch): Don't bind `shell-file-name' locally.

* lisp/tramp-fish.el (tramp-fish-file-name-handler-alist): Add handler
for `shell-command'.

* lisp/tramp-util.el (start-process-shell-command)
(call-process-shell-command): Bind `shell-command-switch' locally.
----------------------------
revision 2.2
date: 2006-12-29 15:41:25 -0800;  author: albinus;  state: Exp;  lines: +7 -4;

* lisp/tramp.el (tramp-handle-call-process-region): New defun.
(tramp-touch): Use `shell-command' instead of `call-process', in
order to make it usable also for the `fish' method.

* lisp/tramp-fish.el (tramp-fish-handle-insert-file-contents): Move
point to the initial place after insertion.
(tramp-fish-handle-write-region): Don't send zero length data.

* lisp/tramp-util.el (tramp-advice-call-process-region): New defadvice.
----------------------------
revision 2.1
date: 2006-12-27 14:12:29 -0800;  author: albinus;  state: Exp;

* Makefile.in: Add tramp-fish.el

* lisp/tramp-fish.el: New package.

* lisp/tramp.el (top): Require tramp-fish.
(tramp-inodes): New defvar.
(tramp-handle-expand-file-name): Cache "home-directory".
(tramp-get-inode): New defun.

* lisp/tramp-smb.el (tramp-smb-no-stat, tramp-smb-inodes)
(tramp-smb-get-inode): Removed.  Apply new names.

* lisp/tramp-util.el (tramp-advice-executable-find): Add check for
`tramp-fish-file-name-handler'.

* texi/tramp.texi (Inline methods): Add `fish' method.
----------------------------
revision 2.43.2.2
date: 2011-01-24 02:09:41 -0800;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
----------------------------
revision 2.43.2.1
date: 2010-10-30 09:35:46 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: d2kTlq36gGhibuUu;
* tramp.el (tramp-handle-insert-file-contents): For root, preserve
owner and group when editing files.  (Bug#7289)

* tramp-fish.el: Update URL in comment (viewcvs -> viewvc).
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-ftp.el,v
Working file: lisp/tramp-ftp.el
head: 2.52
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.48
	branch-2-1-stable: 2.45.0.2
	branchpoint-2-1-stable: 2.45
	V-2-1-19: 2.45
	V-2-1-18: 2.42
	V-2-1-17: 2.41
	V-2-1-16: 2.40
	V-2-1-15: 2.40
	V-2-1-14: 2.39
	V-2-1-13: 2.34
	V-2-0-57: 2.13.2.7
	V-2-1-12: 2.31
	V-2-1-11: 2.29
	V-2-1-10: 2.25
	V-2-0-56: 2.13.2.4
	V-2-1-9: 2.21
	V-2-1-8: 2.21
	V-2-0-55: 2.13.2.3
	V-2-1-7: 2.21
	V-2-0-54: 2.13.2.3
	V-2-1-6: 2.21
	V-2-0-53: 2.13.2.3
	V-2-0-52: 2.13.2.3
	V-2-1-5: 2.18
	V-2-1-4: 2.18
	V-2-0-51: 2.13.2.2
	V-2-0-50: 2.13.2.2
	V-2-0-49: 2.13
	V-2-0-48: 2.13
	V-2-1-3: 2.16
	V-2-0-47: 2.13
	V-2-0-46: 2.13
	V-2-0-45: 2.13
	V-2-1-2: 2.16
	V-2-0-44: 2.13
	V-2-1-1: 2.15
	V-2-0-43: 2.13
	V-2-0-42: 2.13
	V-2-0-41: 2.13
	V-2-1-0: 2.13
	branch-2-0-stable: 2.13.0.2
	branchpoint-2-0-stable: 2.13
	V-2-0-40: 2.13
	V-2-0-39: 2.13
	V-2-0-38: 2.11
	V-2-0-37: 2.10
	V-2-0-36: 2.9
	V-2-0-35: 2.9
	V-2-0-34: 2.9
	V-2-0-33: 2.8
	V-2-0-32: 2.8
	V-2-0-30: 2.6
	V-2-0-29: 2.6
	V-2-0-28: 2.4
	V-2-0-27: 2.3
	V-2-0-26: 2.3
keyword substitution: kv
total revisions: 60;	selected revisions: 60
description:
----------------------------
revision 2.52
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.51
date: 2011-01-19 03:09:00 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 2.50
date: 2010-12-30 00:57:35 -0800;  author: albinus;  state: Exp;  lines: +6 -6;  commitid: sJi0TOvcI16wGh2v;
* tramp.el (tramp-default-method-alist, tramp-default-user-alist)
(tramp-local-host-regexp, tramp-prefix-domain-format)
(tramp-prefix-domain-regexp): Set tramp-autoload cookie.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-sh.el:
* tramp-smb.el: Add tramp-autoload cookie for initialisation code
of `tramp-default-method-alist' and `tramp-default-user-alist'.
----------------------------
revision 2.49
date: 2010-12-01 09:42:17 -0800;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: Uh2KDiGC5DnnwBYu;
* tramp.el (tramp-debug-message): Extend function exclude list.

* tramp-sh.el (tramp-methods): Add recursive options to "pscp" and
"psftp".  Exchange "%k" marker with options.
(tramp-do-copy-or-rename-file, tramp-sh-handle-file-local-copy):
Compute size of link target.
(tramp-do-copy-or-rename-file-out-of-band). Move setting of
`tramp-current-*' up due to gateway methods.  Optimze computing of
copy arguments.  Use `tramp-get-connection-name' and
`tramp-get-connection-buffer'.  Improve debug messages.

* tramp.el (tramp-default-method-alist)
(tramp-default-user-alist, tramp-default-proxies-alist): Adapt
custom options type.  (Bug#7445)
(tramp-local-host-regexp): Add "localhost6".
(tramp-file-name-port): Check also for `tramp-default-port'.
(tramp-get-connection-name): New defun.
(tramp-get-connection-process): Use it.
(tramp-drop-volume-letter): Fix doc string.

* tramp-cmds.el: Remove solved todo item.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-smb.el: Fix regexps added to `tramp-default-method-alist'
and `tramp-default-user-alist', respectively.

* tramp-gw.el (tramp-gw-open-connection): Use
`tramp-get-connection-name' and `tramp-get-connection-buffer'.

* tramp-imap.el (tramp-imap-make-iht): Use just
`tramp-file-name-port'.

* tramp-sh.el (tramp-compute-multi-hops): Remove port
determination.
(tramp-maybe-open-connection): Use `tramp-get-connection-name'.
----------------------------
revision 2.48
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 2.47
date: 2010-09-13 06:18:45 -0700;  author: albinus;  state: Exp;  lines: +1 -5;  commitid: hctSFHPfw5XxBqOu;
Major code cleanup.  Split tramp.el into tramp.el and tramp-sh.el.

* Makefile.in (LISP_FILES): Remove tramp-fish.el.  Add tramp-sh.el.

* tramp.el (top): Don't show loading message.  Require just
'tramp-compat, everything else is required there.  Use
`ignore-errors' where appropriate.
(tramp-inline-compress-start-size, tramp-copy-size-limit)
(tramp-terminal-type, tramp-end-of-output)
(tramp-initial-end-of-output, tramp-completion-function-alist-rsh)
(tramp-completion-function-alist-ssh)
(tramp-completion-function-alist-telnet)
(tramp-completion-function-alist-su)
(tramp-completion-function-alist-putty, tramp-remote-path)
(tramp-remote-process-environment, tramp-sh-extra-args)
(tramp-actions-before-shell, tramp-uudecode)
(tramp-perl-file-truename, tramp-perl-file-name-all-completions)
(tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode)
(tramp-vc-registered-read-file-names, tramp-file-mode-type-map)
(tramp-file-name-handler-alist, tramp-make-tramp-temp-file)
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-as-directory)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-exists-p, tramp-handle-file-attributes)
(tramp-do-file-attributes-with-ls)
(tramp-do-file-attributes-with-perl)
(tramp-do-file-attributes-with-stat)
(tramp-handle-set-visited-file-modtime)
(tramp-handle-verify-visited-file-modtime)
(tramp-handle-set-file-modes, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-remote-selinux-p)
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-newer-than-file-p, tramp-handle-file-modes)
(tramp-handle-file-directory-p, tramp-handle-file-regular-p)
(tramp-handle-file-symlink-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p)
(tramp-handle-directory-file-name, tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-do-directory-files-and-attributes-with-perl)
(tramp-do-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions)
(tramp-handle-file-name-completion, tramp-handle-add-name-to-file)
(tramp-handle-copy-file, tramp-handle-copy-directory)
(tramp-handle-rename-file, tramp-do-copy-or-rename-file)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-dired-compress-file, tramp-handle-dired-uncache)
(tramp-handle-insert-directory)
(tramp-handle-unhandled-file-name-directory)
(tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-executable-find, tramp-process-sentinel)
(tramp-handle-start-file-process, tramp-handle-process-file)
(tramp-handle-call-process-region, tramp-handle-shell-command)
(tramp-handle-file-local-copy, tramp-handle-file-remote-p)
(tramp-handle-insert-file-contents)
(tramp-handle-insert-file-contents-literally)
(tramp-handle-find-backup-file-name)
(tramp-handle-make-auto-save-file-name, tramp-handle-write-region)
(tramp-vc-registered-file-names, tramp-handle-vc-registered)
(tramp-sh-file-name-handler, tramp-vc-file-name-handler)
(tramp-maybe-send-script, tramp-set-auto-save, tramp-run-test)
(tramp-run-test2, tramp-find-executable, tramp-set-remote-path)
(tramp-find-file-exists-command, tramp-open-shell)
(tramp-find-shell, tramp-barf-if-no-shell-prompt)
(tramp-open-connection-setup-interactive-shell)
(tramp-local-coding-commands, tramp-remote-coding-commands)
(tramp-find-inline-encoding, tramp-call-local-coding-command)
(tramp-inline-compress-commands, tramp-find-inline-compress)
(tramp-compute-multi-hops, tramp-maybe-open-connection)
(tramp-send-command , tramp-wait-for-output)
(tramp-send-command-and-check, tramp-barf-unless-okay)
(tramp-send-command-and-read, tramp-mode-string-to-int)
(tramp-convert-file-attributes, tramp-check-cached-permissions)
(tramp-file-mode-from-int, tramp-file-mode-permissions)
(tramp-shell-case-fold, tramp-make-copy-program-file-name)
(tramp-method-out-of-band-p, tramp-local-host-p)
(tramp-get-remote-path, tramp-get-remote-tmpdir)
(tramp-get-ls-command, tramp-get-ls-command-with-dired)
(tramp-get-test-command, tramp-get-test-nt-command)
(tramp-get-file-exists-command, tramp-get-remote-ln)
(tramp-get-remote-perl, tramp-get-remote-stat)
(tramp-get-remote-readlink, tramp-get-remote-trash)
(tramp-get-remote-id, tramp-get-remote-uid, tramp-get-remote-gid)
(tramp-get-local-uid, tramp-get-local-gid)
(tramp-get-inline-compress, tramp-get-inline-coding, ): Move to
tramp-sh.el.
(tramp-methods, tramp-default-method-alist)
(tramp-default-user-alist, tramp-foreign-file-name-handler-alist):
Move initialization to tramp-sh.el.
(tramp-temp-name-prefix): Make it a defconst.
(tramp-dissect-file-name): Don't check anymore for multi-hop
methods.
(tramp-debug-outline-regexp): Add a docstring.
(tramp-debug-outline-level): Renamed from `tramp-outline-level'.
(tramp-get-debug-buffer): Use it.

* tramp-cache.el (top): Set tramp-autoload cookie for
initialization forms.
(tramp-set-connection-property): Don't protect `tramp-message'
call, it isn't necessary any longer.
(tramp-dump-connection-properties): Use `ignore-errors'.

* tramp-compat.el (top): Require 'advice, 'format-spec,
'password-cache and 'auth-source.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Require 'tramp-sh.

* tramp-gw.el (tramp-gw-open-network-stream): Use `ignore-errors'.

* tramp-sh.el: New file, derived from tramp.el.
(top): Initialize `tramp-methods', `tramp-default-method-alist',
`tramp-default-user-alist', tramp-foreign-file-name-handler-alist.
Remove "scp1_old", "scp2_old", "ssh1_old", "ssh2_old".  Use
`ignore-errors' where appropriate.
(tramp-sh-file-name-handler-alist): Renamed from
`tramp-file-name-handler-alist'.
(tramp-send-command-and-check): Return t or nil.  Remove all
`zerop' checks, where called.
(tramp-handle-set-file-modes)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-delete-directory, tramp-handle-delete-file)
(tramp-maybe-send-script, ): Use `tramp-barf-unless-okay'.
(tramp-sh-file-name-handler, tramp-send-command-and-check)
(tramp-get-remote-ln): Set tramp-autoload cookie.
----------------------------
revision 2.46
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +18 -9;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.45
date: 2010-05-28 06:13:25 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 2CLK9YLsWaoW2yAu;
branches:  2.45.2;
* tramp-compat.el (tramp-compat-delete-file): Use `symbol-value'
for backward compatibility.

* tramp.el (tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use `delete-file'
instead of `tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-do-copy-or-rename-file): Use
`delete-file' instead of `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.
(tramp-smb-handle-delete-directory): Use 'trash as arg.

* tramp-vc.el (tramp-vc-user-login-name): Use `delete-file'
instead of `tramp-compat-delete-file'.
----------------------------
revision 2.44
date: 2010-05-28 03:31:50 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 8f88ImmlFUbw9xAu;
* tramp-compat.el (tramp-compat-delete-file): Rewrite to handle
new TRASH arg of `delete-file'.

* tramp.el (tramp-handle-delete-file): Change FORCE arg to TRASH.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use null TRASH arg in
tramp-compat-delete-file call.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-delete-file)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use null TRASH arg
in `tramp-compat-delete-file' call.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-imap.el (tramp-imap-handle-delete-file): Rename arg.
(tramp-imap-do-copy-or-rename-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use null TRASH arg in
tramp-compat-delete-file call.
(tramp-smb-handle-delete-directory): Use tramp-compat-delete-file.
(tramp-smb-handle-delete-file): Rename arg.
----------------------------
revision 2.43
date: 2010-05-05 02:57:36 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 7vDVEtI34jXBHzxu;
Add FORCE argument to `delete-file'.

* tramp-compat.el (tramp-compat-delete-file): New defun.

* tramp.el (tramp-handle-delete-file): Add FORCE arg.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-file): Add FORCE arg.
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use
`tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Add FORCE arg.
(tramp-gvfs-handle-write-region): Use `tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-handle-delete-file): Add FORCE arg.
(tramp-imap-do-copy-or-rename-file): Use `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-delete-file): Add FORCE arg.
(tramp-smb-handle-copy-file, tramp-smb-handle-file-local-copy)
(tramp-smb-handle-rename-file, tramp-smb-handle-write-region): Use
`tramp-compat-delete-file'.

* tramp-vc.el (tramp-vc-user-login-name): Use
`tramp-compat-delete-file'.
----------------------------
revision 2.42
date: 2010-01-14 20:52:28 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: zweSrHgxjm35ypju;
Add 2010 to copyright years.
----------------------------
revision 2.41
date: 2009-10-03 05:40:06 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: KrrzblSDciYPt56u;
* tramp-ftp.el (tramp-ftp-file-name-handler): Disable
`file-name-handler-alist' when loading 'ange-ftp.  Otherwise,
there could be recursive loading when `default-directory' is a
remote file name.  (Bug#4614)
----------------------------
revision 2.40
date: 2009-01-05 11:56:37 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: skuvqVIPebfGBixt;
Update copyrights for 2009.
----------------------------
revision 2.39
date: 2008-06-29 09:57:45 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: Bj1S9xZI63YXIR8t;
* tramp-ftp.el (tramp-ftp-file-name-handler): Revert patch from
2008-06-28.  It does not work on W32.
----------------------------
revision 2.38
date: 2008-06-28 03:11:11 -0700;  author: albinus;  state: Exp;  lines: +13 -1;  commitid: OhOUTVsHy24uvH8t;
* tramp-ftp.el (top): Delete 'ange-ftp property from
`substitute-in-file-name' when unloading.
(tramp-ftp-file-name-handler): Set `tramp-mode' to nil.
----------------------------
revision 2.37
date: 2008-05-13 14:17:00 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: IzC1PbnithrzFQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.36
date: 2008-04-10 13:24:36 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: dX4v4GScMh2mrBYs;
Fix up comment convention on the arch-tag lines.
----------------------------
revision 2.35
date: 2008-03-29 13:20:11 -0700;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: wNa8fW3vI7mLN3Xs;
*** empty log message ***
----------------------------
revision 2.34
date: 2008-03-29 12:57:41 -0700;  author: albinus;  state: Exp;  lines: +6 -1;  commitid: 4VpxzWDux4L2G3Xs;
* tramp-ftp.el: Require 'cl when byte-compiling.
----------------------------
revision 2.33
date: 2008-02-03 03:42:04 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: XR9ORQRVuFWCHWPs;
*** empty log message ***
----------------------------
revision 2.32
date: 2008-01-12 03:04:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.31
date: 2007-11-18 02:11:38 -0800;  author: albinus;  state: Exp;  lines: +11 -2;  commitid: RBxaXmIdsa2tF2Gs;

* lisp/tramp.el (tramp-completion-reread-directory-timeout): New
defcustom.
(tramp-handle-file-name-all-completions): Flush directory contents
from cache regularly.
(tramp-set-auto-save-file-modes): Check also for
`buffer-modified-p'.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Temp file is already
created when copying.

* texi/tramp.texi (Filename completion): Simplify explanation of
double-slash behaviour.  Explain directory contents flushing.
----------------------------
revision 2.30
date: 2007-11-07 12:34:52 -0800;  author: albinus;  state: Exp;  lines: +5 -2;  commitid: 6QaEdkjJBQXZsGEs;

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Don't expand
the remote connection identification.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Set also $PS2 and $PS3 when setting $PS1.  Check for shell echoing
before calling stty.

* lisp/tramp-cache.el (tramp-cache-print)
(tramp-dump-connection-properties): Fix docstring.
(tramp-list-connections): Renamed from
`tramp-cache-list-connections'.

* lisp/tramp-cmds.el (tramp-cleanup-connection): Apply it.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Don't expand the
remote connection identification when setting connection property.

* lisp/tramp-smb.el (tramp-smb-handle-substitute-in-file-name): "//"
substitutes only in the local filename part.

* texi/tramp.texi (Overview): Mention also the PuTTY integration under
Win32.  Remove paragraphs about Tramp's experimental status.
(Frequently Asked Questions): Add code example for highlighting
the mode line.
----------------------------
revision 2.29
date: 2007-10-04 13:04:37 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: CaRN4HuMV0iBojAs;

* lisp/tramp.el (tramp-make-temp-file): Move to tramp-compat.el.
(tramp-do-copy-or-rename-file-directly): Handle tmpfile only in
the cond clauses where needed.
(tramp-handle-write-region): Rearrange code for proper handling of
tmpfile.

* lisp/tramp-compat.el (tramp-compat-make-temp-file): New defsubst.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el: Rename `tramp-make-temp-file' to
`tramp-compat-make-temp-file'.
----------------------------
revision 2.28
date: 2007-10-03 03:45:47 -0700;  author: albinus;  state: Exp;  lines: +13 -0;  commitid: T0jhSlYBL14Nk8As;

* lisp/tramp.el (top): Add tramp-compat to `tramp-unload-hook'.
(tramp-file-name-handler-alist): Add
`tramp-handle-insert-file-contents-literally'.  Neded for XEmacs.
(tramp-make-temp-file): Use `make-temp-name'. `make-temp-file',
used before, creates the file already, which is not desired.
(tramp-do-copy-or-rename-file-directly): Simplify handling of
temporary file.
(tramp-handle-insert-file-contents): Assign the result in the
short track case.
(tramp-handle-insert-file-contents-literally): New defun.
(tramp-completion-mode-p): Revert change from 2007-09-24.
Checking for `return' etc as last character is not sufficient, for
example in dired-mode when entering <g> (revert-buffer) or
<s> (dired-sort).

* lisp/tramp-compat.el (top): Add also compatibility code for loading
appropriate timer package.
(tramp-compat-copy-tree): Check for `subrp' and `symbol-file' in
order to avoid autoloading problems.

* lisp/tramp-efs-el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Move further compatibility code to
tramp-compat.el.

	* tramp-ftp.el (tramp-ftp-file-name-handler): Handle the case
	where the second parameter of `copy-file' or `rename-file' is a
	remote file but not via ftp.

	* tramp-util.el: Remove `tramp-minor-mode' and its declarations.
----------------------------
revision 2.27
date: 2007-08-23 22:19:29 -0700;  author: albinus;  state: Exp;  lines: +19 -12;  commitid: cVxmejaz6llQOXus;

* lisp/tramp.el (tramp-local-host-p): New defun.
(tramp-handle-file-local-copy, tramp-handle-write-region):
Implement fast track when being on the local host.
(tramp-file-name-handler): Don't set "started" property.  It shall
be reserved for the "ftp" method.
(tramp-make-copy-program-file-name): Use `tramp-file-name-real-host'.

* lisp/tramp-ftp.el (top): Autoload `tramp-set-connection-property'.
(tramp-ftp-file-name-handler):  Set "started" property.
----------------------------
revision 2.26
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.25
date: 2007-07-01 22:09:51 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.24
date: 2007-07-01 11:31:34 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.23
date: 2007-05-28 06:20:38 -0700;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: Ma8UwuYWkhiejHjs;

* Makefile.in (XEMACS_FILES) Add texi/doclicense.texi.

* texi/doclicense.texi: New file.

* texi/Makefile.in (TEXI_FILES): Add doclicense.texi.
----------------------------
revision 2.22
date: 2007-05-27 12:54:43 -0700;  author: albinus;  state: Exp;  lines: +1 -3;  commitid: 7PsnkV1mXPbnwBjs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-method,
(tramp-file-name-user, tramp-file-name-host)
(tramp-file-name-localname): New defuns, replacing defstruct
`tramp-file-name'.
(tramp-completion-dissect-file-name1, tramp-compute-multi-hops)
(tramp-dissect-file-name): Apply `vector' instead of
`make-tramp-file-name'.
(tramp-do-copy-or-rename-file-out-of-band): Aset 3rd index instead
of 4th, when setting localname.
(tramp-compute-multi-hops): Aset 2nd index instead of 3rd, when
setting host.

* lisp/tramp-cache.el (all): Aset 3rd index instead of 4th, when
unifying localname.
----------------------------
revision 2.21
date: 2006-05-28 11:47:01 -0700;  author: albinus;  state: Exp;  lines: +3 -4;

Version 2.1.6 released.
----------------------------
revision 2.20
date: 2006-05-07 14:33:48 -0700;  author: albinus;  state: Exp;  lines: +1 -6;

* lisp/tramp.el (top): cl and custom are always required.
(tramp-verbose): Change description of levels.
(tramp-encoding-reads-stdin, tramp-repair-jka-compr)
(tramp-discard-garbage, tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name)
(tramp-find-default-method, tramp-find-default-user)
(tramp-find-default-host): Remove them.
(tramp-methods): Change defcustom into defvar.
(tramp-actions-before-shell, tramp-actions-copy-out-of-band):
Change defcustom into defconst.
(tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-make-temp-file, tramp-make-tramp-temp-file): Move them up.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-handle-make-auto-save-file-name): For Emacs 21, set
`tramp-auto-save-directory' if unset in order to guarantee unique
auto-save file names.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): New defsubst.  Added with
autoload cookie.  Code from `tramp-repair-jka-compr' moved here.
Register `tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-unload-file-name-handlers): Renamed from
`tramp-unload-file-name-handler-alist'.
(tramp-completion-handle-file-name-all-completions): Delete
directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-process-actions, tramp-wait-for-regexp)
(tramp-maybe-open-connection, tramp-send-command)
(tramp-send-command-internal): Trace sent command with level 6.
(tramp-check-for-regexp): Trace echo with level 5.
(tramp-dissect-file-name): Expand method, user, host.
(tramp-find-method, tramp-find-user, tramp-find-host): Add code
for default values.  Remove all calls but the one in
`tramp-dissect-file-name'.
(tramp-bug, tramp-reporter-dump-variable)
(tramp-append-tramp-buffers): Dump also hash variables.

* lisp/tramp-cache.el: Trace cache commands with level 7.  Trace
connection commands with level 8.
(tramp-cache-print): Dump strings as such.
(tramp-persistency-file-name): New defcustom.
(tramp-connection-properties): New defvar.
(tramp-dump-connection-properties): New defun.
(tramp-get-connection-property, tramp-set-connection-property):
Rewritten.
(top): Dump connection history when leaving Emacs.  Read it during
initialization.

* lisp/tramp-efs.el (tramp-efs-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-ftp.el (tramp-ftp-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-smb.el: Trace sent commands with level 6.
(tramp-smb-file-name-p): Don't use tramp-find-* functions.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
(Bug Reports): Level 6 results already in file contents.
(Traces and Profiles): Describe new levels.
----------------------------
revision 2.19
date: 2006-01-27 14:29:02 -0800;  author: albinus;  state: Exp;  lines: +35 -3;

Add code for unloading Tramp.

* lisp/tramp-vc.el (vc-user-login-name): Wrap defadvice with a test for
`process-file', in order to let it work for older Emacsen too.
----------------------------
revision 2.18
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.17
date: 2005-06-26 12:45:08 -0700;  author: albinus;  state: Exp;  lines: +3 -3;

* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fourth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in: Adapt email addresses.
----------------------------
revision 2.16
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 2.15
date: 2004-07-27 23:01:13 -0700;  author: albinus;  state: Exp;  lines: +1 -4;


* lisp/tramp.el (tramp-maybe-open-connection): Set
`coding-system-for-read'.  It was lost last patch.

* lisp/tramp-smb.el (all): Don't load "cl-seq", Emacs 19 is out of
scope.  Remove `with-parsed-tramp-file-name' kludge.  Debugging
spec set in tramp.el is sufficient.  Remove multi-method parameter
from `tramp-message-for-buffer' calls.
(tramp-smb-open-connection): Set `coding-system-for-read' to nil.
Check for Emacs 20 is not necessary any longer.

* lisp/tramp-ftp.el (top): Don't load "cl-seq", Emacs 19 is out of
scope.
----------------------------
revision 2.14
date: 2004-07-26 12:36:34 -0700;  author: albinus;  state: Exp;  lines: +0 -3;


Removing multi-hop methods.  Incorporating proxies.
----------------------------
revision 2.13
date: 2004-01-24 12:17:28 -0800;  author: albinus;  state: Exp;  lines: +10 -3;
branches:  2.13.2;


* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Unset
`ange-ftp-ftp-name-arg' and `ange-ftp-ftp-name-res'.  There could
be incorrect values from previous calls in case the "ftp" method
is used in the Tramp file name.  Reported by Katsumi Yamaoka
<yamaoka@jpl.org>.
----------------------------
revision 2.12
date: 2003-12-27 13:23:48 -0800;  author: uid67418;  state: Exp;  lines: +2 -2;


* lisp/tramp.el (tramp-completion-mode): Add XEmacs input
events. Until now it was not necessary, because they are
evaluated in case of unified filenames only.

* lisp/tramp-efs.el (top): Add all XEmacs download sites to
`tramp-default-method-alist'.  The existing settings should be
sufficient already, but it's better to make it explicitely.
(tramp-efs-method-given, tramp-efs-method-regexp): New variables.
(tramp-efs-path-regexp, tramp-efs-path-format-string)
(tramp-efs-path-format-without-user)
(tramp-efs-path-user-at-host-format)
(tramp-efs-path-host-format, tramp-efs-path-root-regexp): Changed
to a function.  Their values depend on the existence of the method
tag in filename.
(tramp-efs-file-name-handler): Check first whether the method tag
is given in a filename.
(tramp-efs-file-name-p): A syntax check must be performed first,
otherwise `tramp-dissect-file-name' returns with an error.

* lisp/tramp-ftp.el (Commentary): Removing pointer to EFS.  It has its
own module.

* lisp/tramp-smb.el (top): Setting default value in
`tramp-default-method-alist' corrected.  Order of USER and HOST
have been wrong.  Nobody claimed for months ...

* texi/tramp.texi (Issues): Describe how to use unified filenames with
XEmacs.
----------------------------
revision 2.11
date: 2003-11-30 09:48:03 -0800;  author: kai;  state: Exp;  lines: +1 -0;
* tramp-ftp.el, tramp-smb.el, tramp-util.el, tramp-uu.el:
* tramp-vc.el, tramp.el, trampver.el.in: Add arch tagline.
----------------------------
revision 2.10
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +2 -0;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 2.9
date: 2003-04-24 14:16:14 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

	* Makefile.in (.PHONY): Add `tags'.
	(distclean) Remove also "autom4te.cache".

	* lisp/tramp.el (tramp-real-rsh-program): New constant.  On
	HP-UX, the "rsh" program is called "remsh".
	(tramp-methods, tramp-multi-connection-function-alist): Apply
	`tramp-real-rsh-program'.  Use "-p Password:\ " for "sudo"
	method, because password prompt might be changed by either passprompt
	option in /etc/sudoers, or SUDO_PROMPT environment variable.
	Suggested by Peter Oliver <peter.oliver@aquila-networks.co.uk>.
----------------------------
revision 2.8
date: 2003-04-04 13:43:58 -0800;  author: albinus;  state: Exp;  lines: +6 -9;

* tramp-ftp.el (tramp-ftp-file-name-handler):
'ange-ftp-file-directory-p` calls 'file-directory-p` as
well.  Disabling of file-name-handler not appropriate, too.
----------------------------
revision 2.7
date: 2003-03-30 10:47:14 -0800;  author: albinus;  state: Exp;  lines: +20 -12;

* tramp-ftp.el (tramp-ftp-file-name-handler): In
'ange-ftp-file-exists-p`, 'file-exists-p` is called in case of
symlinks.  So we cannot disable the file-name-handler this case.
----------------------------
revision 2.6
date: 2003-02-04 14:37:29 -0800;  author: albinus;  state: Exp;  lines: +4 -4;


* tramp.el (tramp-handle-directory-file-name): Handle the case
PATH is "".
(tramp-completion-handle-file-name-all-completions): Define
`tramp-current-user' locally.  See `tramp-parse-passwd'.
(tramp-parse-passwd): For su-alike methods it would be desirable
to return "root@localhost" as default.  Unfortunately, we have no
information whether any user name has been typed already.  So we
(mis-)use tramp-current-user as indication, assuming it is set in
`tramp-completion-handle-file-name-all-completions'.
(tramp-send-region): Handle the case `tramp-chunksize' is equal
0.  I did it accidently.  Infinite loop ...

* tramp-ftp.el (top-level): eval-after-load "ange-ftp"
'(tramp-disable-ange-ftp).  Suggested by Kai.
(tramp-ftp-file-name-handler): `tramp-disable-ange-ftp' not needed
any longer.

* tramp-smb.el (tramp-smb-file-name-handler-alist): Apply
`tramp-handle-directory-file-name' in order to profit from Kai's
yesterday changes.
----------------------------
revision 2.5
date: 2003-01-02 14:21:03 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* tramp-ftp.el (top-level): Defaults for
`tramp-default-method-alist' must be a list.

* tramp-smb.el (top-level): Defaults for
`tramp-default-method-alist' must be a list.
----------------------------
revision 2.4
date: 2002-12-21 13:32:59 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* tramp.el (tramp-default-method-alist): Defaults setting for FTP
method has moved to tramp-smb.el. The remaining default for the SU
method is available for both Emacs and XEmacs now.

* tramp-ftp.el (top-level): Set defaults for
`tramp-default-method-alist'. Taken over from tramp.el.

* tramp-smb.el (top-level): Set default for
`tramp-default-method-alist'. If the user name contains a domain
(visible via the "%" char), it must be the SMB method.
(tramp-smb-wait-for-output): Use `tramp-smb-process-running' where
appropriate. Last time I've changed this function I forgot one
place.
----------------------------
revision 2.3
date: 2002-10-27 13:35:08 -0800;  author: albinus;  state: Exp;  lines: +7 -0;


tramp-ftp.el (top-level): Require some basic packages in order
to pacify byte-compiler.

tramp-smb.el (top-level): Ditto.
----------------------------
revision 2.2
date: 2002-10-27 12:53:49 -0800;  author: albinus;  state: Exp;  lines: +3 -0;

* tramp.el (top-level): Load tramp-smb.el.  Remove autoload of
`tramp-ftp-file-name-p'; not needed anymore.
(tramp-foreign-file-name-handler-alist): New variable.  Foreign
methods shall plug in.
(tramp-file-name-for-operation): Relative file names are checked
via `expand-file-name'.  If no absolute file name is given,
default directory of current-buffer is used.
(tramp-find-foreign-file-name-handler): New function.  Parses
`tramp-foreign-file-name-handler-alist' in order to find foreign
file name handlers.
(tramp-file-name-handler): Apply
`tramp-find-foreign-file-name-handler' instead of simply looking
for FTP foreign method.

* tramp-ftp.el (top-level): Plug into
`tramp-foreign-file-name-handler-alist'.

* tramp-smb.el: New file.  Functionality disabled by
`tramp-use-smb' during development.

* Makefile (tramp): Add tramp-smb.elc.
----------------------------
revision 2.1
date: 2002-10-13 13:27:29 -0700;  author: albinus;  state: Exp;

2002-10-13  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-advice-find-file-name-handler): Remove defadvice
	because it might be not a good idea to hook into Emacs built-in
	subroutiones. Suggested by RMS.
	(tramp-primitive-file-name): Handle all primitives now.
	(tramp-file-name-handler): Allow call of
	`tramp-ftp-file-name-handler' for functions only defined in
	`tramp-file-name-handler-alist'.  Strange.

2002-10-12  Michael Albinus  <Michael.Albinus@alcatel.de>

	* Makefile (tramp): Add tramp-uu.elc and tramp-ftp.elc.

	* tramp.el (main): Require `tramp-ftp' after load in order to
	avoid infloop. Autoload `tramp-ftp-file-name-p' for compiler
	satisfaction.
	(tramp-primitive-file-name): Add handling of `expand-file-name'
	and `file-newer-than-file-p'.
	(tramp-file-name-handler): Call `tramp-primitive-file-name' via
	`apply'.

	* tramp-ftp.el (main): Require `tramp'.


2002-10-11  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp-ftp.el: New file.

	* tramp.el (tramp-default-method): Adapt doc string.
	(tramp-ftp-method, tramp-completion-function-alist-ftp)
	(tramp-disable-ange-ftp, tramp-invoke-ange-ftp)
	(tramp-ange-ftp-file-name-p, tramp-make-ange-ftp-file-name): Moved
	to tramp-ftp.el or removed (if not needed any longer).  Callees
	adapted.
	(tramp-completion-function-alist): "ftp" entry removed.  Will be
	added from within tramp-ftp.el.
	(tramp-set-completion-function ): Allow setting of methods not
	defined yet.
	(tramp-run-real-handler, tramp-completion-run-real-handler):
	Remove `ange-ftp-hook-function' handling.  Make
	`inhibit-file-name-handlers' a cons but a list.
	(tramp-advice-find-file-name-handler): Advice for
	`find-file-name-handler'.  Check for Ange-FTP file names,
	applicable for NON built-in primitives only.
	(tramp-primitive-file-name): New function.  Returns filename for
	some built-in primitives.
	(tramp-file-name-handler): Check for Ange-FTP file names (built-in
	primitives only).  Forward to Ange-FTP in case of.
	(tramp-completion-file-name-handler): Remove catch for
	`tramp-forward-to-ange-ftp'.  Not necessary any longer.
	(tramp-flatten-list): Remove function.  Never used.
	(tramp-completion-mode, tramp-get-completion-methods): Special
	handling of `tramp-ftp-method' removed.  It's part of
	`tramp-methods' now (as foreign method).

2002-10-13  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Windows setup hints): Fix typo (missing {} after
	@dots).
	(Inline methods, External transfer methods)
	(Remote shell setup, Windows setup hints)
	(Frequently Asked Questions, Issues): Replace "Tramp" by
	"@tramp{}".
----------------------------
revision 2.13.2.7
date: 2008-02-02 02:28:27 -0800;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: fouG7D11Dh7mkOPs;
*** empty log message ***
----------------------------
revision 2.13.2.6
date: 2007-07-25 12:37:30 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.13.2.5
date: 2007-05-28 03:11:23 -0700;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: 1phYrakvGyMHgGjs;
*** empty log message ***
----------------------------
revision 2.13.2.4
date: 2007-05-27 08:43:53 -0700;  author: albinus;  state: Exp;  lines: +1 -6;  commitid: wsslTl4EbLwp8Ajs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-multi-method)
(tramp-file-name-method, tramp-file-name-user)
(tramp-file-name-host, tramp-file-name-localname): New defuns,
replacing defstruct `tramp-file-name'.
(tramp-handle-file-remote-p, tramp-completion-dissect-file-name1)
(tramp-dissect-file-name, tramp-dissect-multi-file-name): Apply
`vector' instead of `make-tramp-file-name'.
----------------------------
revision 2.13.2.3
date: 2006-01-22 10:38:31 -0800;  author: albinus;  state: Exp;  lines: +35 -3;


Version 2.0.52 released.

* configure.ac: Bump version.

* lisp/tramp.el, lisp/tramp-ftp.el, lisp/tramp-util.el,
lisp/tramp-vc.el: Add code for unloading Tramp.  See comment before
`tramp-unload-tramp' for checklist.

* lisp/tramp.el (tramp-unload-file-name-handler-alist)
(tramp-unload-tramp): New defuns.
(tramp-advice-PC-expand-many-files): New defadvice.
(tramp-save-PC-expand-many-files, tramp-setup-complete) Defuns
removed.

* lisp/tramp-ftp.el (tramp-ftp-enable-ange-ftp): New defun.

* lisp/tramp-util.el (top): Apply `ignore' instead of `identity' for
byte-compiler pacification.

* texi/tramp.texi (Frequently Asked Questions): Remove Ange-FTP item.
Add Tramp disabling item.
----------------------------
revision 2.13.2.2
date: 2005-07-10 14:36:48 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.13.2.1
date: 2005-06-26 12:23:35 -0700;  author: albinus;  state: Exp;  lines: +3 -3;


* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fifth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in:
----------------------------
revision 2.45.2.1
date: 2011-01-24 02:09:41 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-gvfs.el,v
Working file: lisp/tramp-gvfs.el
head: 1.48
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.44
	branch-2-1-stable: 1.37.0.2
	branchpoint-2-1-stable: 1.37
	V-2-1-19: 1.37
	V-2-1-18: 1.25
	V-2-1-17: 1.21
	V-2-1-16: 1.10
keyword substitution: kv
total revisions: 49;	selected revisions: 49
description:
----------------------------
revision 1.48
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 1.47
date: 2011-01-19 03:09:00 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 1.46
date: 2010-12-30 00:57:35 -0800;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: sJi0TOvcI16wGh2v;
* tramp.el (tramp-default-method-alist, tramp-default-user-alist)
(tramp-local-host-regexp, tramp-prefix-domain-format)
(tramp-prefix-domain-regexp): Set tramp-autoload cookie.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-sh.el:
* tramp-smb.el: Add tramp-autoload cookie for initialisation code
of `tramp-default-method-alist' and `tramp-default-user-alist'.
----------------------------
revision 1.45
date: 2010-12-01 09:42:17 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: Uh2KDiGC5DnnwBYu;
* tramp.el (tramp-debug-message): Extend function exclude list.

* tramp-sh.el (tramp-methods): Add recursive options to "pscp" and
"psftp".  Exchange "%k" marker with options.
(tramp-do-copy-or-rename-file, tramp-sh-handle-file-local-copy):
Compute size of link target.
(tramp-do-copy-or-rename-file-out-of-band). Move setting of
`tramp-current-*' up due to gateway methods.  Optimze computing of
copy arguments.  Use `tramp-get-connection-name' and
`tramp-get-connection-buffer'.  Improve debug messages.

* tramp.el (tramp-default-method-alist)
(tramp-default-user-alist, tramp-default-proxies-alist): Adapt
custom options type.  (Bug#7445)
(tramp-local-host-regexp): Add "localhost6".
(tramp-file-name-port): Check also for `tramp-default-port'.
(tramp-get-connection-name): New defun.
(tramp-get-connection-process): Use it.
(tramp-drop-volume-letter): Fix doc string.

* tramp-cmds.el: Remove solved todo item.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-smb.el: Fix regexps added to `tramp-default-method-alist'
and `tramp-default-user-alist', respectively.

* tramp-gw.el (tramp-gw-open-connection): Use
`tramp-get-connection-name' and `tramp-get-connection-buffer'.

* tramp-imap.el (tramp-imap-make-iht): Use just
`tramp-file-name-port'.

* tramp-sh.el (tramp-compute-multi-hops): Remove port
determination.
(tramp-maybe-open-connection): Use `tramp-get-connection-name'.
----------------------------
revision 1.44
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 1.43
date: 2010-10-05 07:06:01 -0700;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: Yfgg9L8idLcN9gRu;
* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-handle-file-exists-p, tramp-handle-file-newer-than-file-p):
New defuns, taken from tramp-smb.el.
(tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag): Removed.

* tramp-compat.el (top): Do not check for byte-compiler objects.
(tramp-compat-coding-system-change-eol-conversion)
(tramp-compat-set-process-query-on-exit-flag): New defuns, taken
from tramp.el.

* tramp-gvfs.el:
* tramp-gw.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.

* tramp-imap.el (tramp-imap-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-imap-handle-file-exists-p)
(tramp-imap-handle-file-executable-p)
(tramp-imap-handle-file-readable-p)
(tramp-imap-handle-directory-files-and-attributes)
(tramp-imap-handle-file-newer-than-file-p): Removed.

* tramp-sh.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag' and
`tramp-coding-system-change-eol-conversion' by
`tramp-compat-coding-system-change-eol-conversion'.

* tramp-smb.el (tramp-smb-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-newer-than-file-p): Removed.
(tramp-smb-maybe-open-connection): Replace
`tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.
----------------------------
revision 1.42
date: 2010-10-04 12:34:57 -0700;  author: albinus;  state: Exp;  lines: +1 -4;  commitid: n7rp0IAxnvWy0aRu;
Continue reorganization of load dependencies.  (Bug#7156)

* tramp.el (tramp-handle-file-local-copy-hook)
(tramp-delete-temp-file-function): Move down.
(tramp-exists-file-name-handler): Move up.
(tramp-register-file-name-handlers): Simplify autoload.
(tramp-handle-write-region-hook, tramp-handle-directory-file-name)
(tramp-handle-directory-files, tramp-handle-dired-uncache)
(tramp-handle-file-modes, tramp-handle-file-name-as-directory)
(tramp-handle-file-name-completion)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-regular-p)
(tramp-handle-file-remote-p, tramp-handle-file-symlink-p)
(tramp-handle-find-backup-file-name)
(tramp-handle-insert-file-contents, tramp-handle-load)
(tramp-handle-substitute-in-file-name)
(tramp-handle-unhandled-file-name-directory)
(tramp-mode-string-to-int, tramp-local-host-p)
(tramp-make-tramp-temp-file): Moved from tramp-sh.el.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Do not require 'tramp-sh.

* tramp-sh.el (all): Move several objects to tramp.el, see there.
Rename `tramp-handle-*' to `tramp-sh-handle-*'.

* tramp-vc.el (tramp-vc-user-login-name, tramp-vc-file-owner): Use
`file-attributes'.
----------------------------
revision 1.41
date: 2010-10-02 04:51:46 -0700;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: VuxAzfL6W3iEvRQu;
* tramp.el (tramp-completion-reread-directory-timeout): Fix
docstring.

* tramp-cache.el (tramp-cache-inhibit-cache): Remove.
(tramp-get-file-property): Replace `tramp-cache-inhibit-cache' by
`remote-file-name-inhibit-cache'.  Check also for an integer
value.  Add/increase counter when `tramp-verbose' >= 10.
(tramp-set-file-property): Add/increase counter when
`tramp-verbose' >= 10.

* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-cleanup-all-buffers): Set tramp-autoload cookie.
(tramp-bug): Set tramp-autoload cookie.  Report all interned
tramp-* variables.  Report also `remote-file-name-inhibit-cache'.
(tramp-reporter-dump-variable): Fix docstring.  Mask non-7bit
characters only in strings.

* tramp-compat.el (remote-file-name-inhibit-cache): Define due to
backward compatibility.

* tramp-sh.el (tramp-handle-verify-visited-file-modtime)
(tramp-handle-file-name-all-completions)
(tramp-handle-vc-registered): Use
`remote-file-name-inhibit-cache'.
(tramp-open-connection-setup-interactive-shell): Call
`tramp-cleanup-connection' directly.
----------------------------
revision 1.40
date: 2010-09-15 13:14:11 -0700;  author: albinus;  state: Exp;  lines: +5 -3;  commitid: cEIrA9vZbWCTPIOu;
Ensure XEmacs compatibility.

* Makefile.in (tramp-loaddefs.el): Adapt `autoload-trim-file-name'
and feature name.
(distclean): Remove trampver.el, it is handled in the upper Makefile.

* tramp-compat.el (tramp-compat-with-temp-message)
(tramp-compat-font-lock-add-keywords, tramp-compat-process-get)
(tramp-compat-process-put): New defuns.

* tramp.el (top):
* tramp-gvfs.el (top):
* tramp-cache.el (top): Use `tramp-compat-font-lock-add-keywords'.

* tramp.el (tramp-progress-reporter-update): Use `tramp-compat-funcall.

* tramp.el (tramp-process-actions):
* tramp-gvfs.el (tramp-handle-vc-registered):
* tramp-sh.el (tramp-gvfs-handler-askquestion)
(tramp-get-remote-stat, tramp-get-remote-readlink): Use
`tramp-compat-with-temp-message'.

* tramp-sh.el (top): Require 'cl.
(tramp-handle-start-file-process): Use `tramp-compat-process-get'.
(tramp-open-connection-setup-interactive-shell): Use
`tramp-compat-process-put'.

* tramp-util.el (top): Require 'tramp-sh.
----------------------------
revision 1.39
date: 2010-09-13 06:18:45 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: hctSFHPfw5XxBqOu;
Major code cleanup.  Split tramp.el into tramp.el and tramp-sh.el.

* Makefile.in (LISP_FILES): Remove tramp-fish.el.  Add tramp-sh.el.

* tramp.el (top): Don't show loading message.  Require just
'tramp-compat, everything else is required there.  Use
`ignore-errors' where appropriate.
(tramp-inline-compress-start-size, tramp-copy-size-limit)
(tramp-terminal-type, tramp-end-of-output)
(tramp-initial-end-of-output, tramp-completion-function-alist-rsh)
(tramp-completion-function-alist-ssh)
(tramp-completion-function-alist-telnet)
(tramp-completion-function-alist-su)
(tramp-completion-function-alist-putty, tramp-remote-path)
(tramp-remote-process-environment, tramp-sh-extra-args)
(tramp-actions-before-shell, tramp-uudecode)
(tramp-perl-file-truename, tramp-perl-file-name-all-completions)
(tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode)
(tramp-vc-registered-read-file-names, tramp-file-mode-type-map)
(tramp-file-name-handler-alist, tramp-make-tramp-temp-file)
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-as-directory)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-exists-p, tramp-handle-file-attributes)
(tramp-do-file-attributes-with-ls)
(tramp-do-file-attributes-with-perl)
(tramp-do-file-attributes-with-stat)
(tramp-handle-set-visited-file-modtime)
(tramp-handle-verify-visited-file-modtime)
(tramp-handle-set-file-modes, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-remote-selinux-p)
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-newer-than-file-p, tramp-handle-file-modes)
(tramp-handle-file-directory-p, tramp-handle-file-regular-p)
(tramp-handle-file-symlink-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p)
(tramp-handle-directory-file-name, tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-do-directory-files-and-attributes-with-perl)
(tramp-do-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions)
(tramp-handle-file-name-completion, tramp-handle-add-name-to-file)
(tramp-handle-copy-file, tramp-handle-copy-directory)
(tramp-handle-rename-file, tramp-do-copy-or-rename-file)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-dired-compress-file, tramp-handle-dired-uncache)
(tramp-handle-insert-directory)
(tramp-handle-unhandled-file-name-directory)
(tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-executable-find, tramp-process-sentinel)
(tramp-handle-start-file-process, tramp-handle-process-file)
(tramp-handle-call-process-region, tramp-handle-shell-command)
(tramp-handle-file-local-copy, tramp-handle-file-remote-p)
(tramp-handle-insert-file-contents)
(tramp-handle-insert-file-contents-literally)
(tramp-handle-find-backup-file-name)
(tramp-handle-make-auto-save-file-name, tramp-handle-write-region)
(tramp-vc-registered-file-names, tramp-handle-vc-registered)
(tramp-sh-file-name-handler, tramp-vc-file-name-handler)
(tramp-maybe-send-script, tramp-set-auto-save, tramp-run-test)
(tramp-run-test2, tramp-find-executable, tramp-set-remote-path)
(tramp-find-file-exists-command, tramp-open-shell)
(tramp-find-shell, tramp-barf-if-no-shell-prompt)
(tramp-open-connection-setup-interactive-shell)
(tramp-local-coding-commands, tramp-remote-coding-commands)
(tramp-find-inline-encoding, tramp-call-local-coding-command)
(tramp-inline-compress-commands, tramp-find-inline-compress)
(tramp-compute-multi-hops, tramp-maybe-open-connection)
(tramp-send-command , tramp-wait-for-output)
(tramp-send-command-and-check, tramp-barf-unless-okay)
(tramp-send-command-and-read, tramp-mode-string-to-int)
(tramp-convert-file-attributes, tramp-check-cached-permissions)
(tramp-file-mode-from-int, tramp-file-mode-permissions)
(tramp-shell-case-fold, tramp-make-copy-program-file-name)
(tramp-method-out-of-band-p, tramp-local-host-p)
(tramp-get-remote-path, tramp-get-remote-tmpdir)
(tramp-get-ls-command, tramp-get-ls-command-with-dired)
(tramp-get-test-command, tramp-get-test-nt-command)
(tramp-get-file-exists-command, tramp-get-remote-ln)
(tramp-get-remote-perl, tramp-get-remote-stat)
(tramp-get-remote-readlink, tramp-get-remote-trash)
(tramp-get-remote-id, tramp-get-remote-uid, tramp-get-remote-gid)
(tramp-get-local-uid, tramp-get-local-gid)
(tramp-get-inline-compress, tramp-get-inline-coding, ): Move to
tramp-sh.el.
(tramp-methods, tramp-default-method-alist)
(tramp-default-user-alist, tramp-foreign-file-name-handler-alist):
Move initialization to tramp-sh.el.
(tramp-temp-name-prefix): Make it a defconst.
(tramp-dissect-file-name): Don't check anymore for multi-hop
methods.
(tramp-debug-outline-regexp): Add a docstring.
(tramp-debug-outline-level): Renamed from `tramp-outline-level'.
(tramp-get-debug-buffer): Use it.

* tramp-cache.el (top): Set tramp-autoload cookie for
initialization forms.
(tramp-set-connection-property): Don't protect `tramp-message'
call, it isn't necessary any longer.
(tramp-dump-connection-properties): Use `ignore-errors'.

* tramp-compat.el (top): Require 'advice, 'format-spec,
'password-cache and 'auth-source.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Require 'tramp-sh.

* tramp-gw.el (tramp-gw-open-network-stream): Use `ignore-errors'.

* tramp-sh.el: New file, derived from tramp.el.
(top): Initialize `tramp-methods', `tramp-default-method-alist',
`tramp-default-user-alist', tramp-foreign-file-name-handler-alist.
Remove "scp1_old", "scp2_old", "ssh1_old", "ssh2_old".  Use
`ignore-errors' where appropriate.
(tramp-sh-file-name-handler-alist): Renamed from
`tramp-file-name-handler-alist'.
(tramp-send-command-and-check): Return t or nil.  Remove all
`zerop' checks, where called.
(tramp-handle-set-file-modes)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-delete-directory, tramp-handle-delete-file)
(tramp-maybe-send-script, ): Use `tramp-barf-unless-okay'.
(tramp-sh-file-name-handler, tramp-send-command-and-check)
(tramp-get-remote-ln): Set tramp-autoload cookie.
----------------------------
revision 1.38
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +30 -13;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 1.37
date: 2010-07-11 01:19:16 -0700;  author: albinus;  state: Exp;  lines: +8 -5;  commitid: 66eW6k3uokdh0bGu;
branches:  1.37.2;
* tramp-gvfs.el (tramp-gvfs-handle-copy-file): Do not pass empty
argument to gvfs-copy.
----------------------------
revision 1.36
date: 2010-06-04 04:09:30 -0700;  author: albinus;  state: Exp;  lines: +81 -62;  commitid: 6aP3cpHZc3Lu8rBu;
* tramp-gvfs.el (tramp-gvfs-handle-expand-file-name): Expand "~/".
(tramp-gvfs-handler-mounted-unmounted)
(tramp-gvfs-connection-mounted-p): Handle default-location.

* tramp-smb.el (tramp-smb-handle-delete-directory): Don't try to
move files to trash.
----------------------------
revision 1.35
date: 2010-06-02 02:56:48 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 2GRbDtKSEIzxNaBu;
*** empty log message ***
----------------------------
revision 1.34
date: 2010-06-02 02:30:08 -0700;  author: albinus;  state: Exp;  lines: +227 -115;  commitid: xqOQ91Cl0TYmEaBu;
* tramp-gvfs.el (top): Require url-util.
(tramp-gvfs-mount-point): Removed.
(tramp-gvfs-stringify-dbus-message, tramp-gvfs-send-command): New
defuns.
(with-tramp-dbus-call-method): Format trace message.
(tramp-gvfs-handle-copy-file, tramp-gvfs-handle-rename-file):
Implement backup call, when operation on local files fails.  Use
progress reporter.  Flush properties of changed files.
(tramp-gvfs-handle-make-directory): Make more traces.
(tramp-gvfs-url-file-name): Hexify file name in url.
(tramp-gvfs-fuse-file-name): Take also prefix (like dav shares)
into account for the resulting file name.
(tramp-gvfs-handler-askquestion): Return dummy mountpoint, when
the answer is "no".  See `tramp-gvfs-maybe-open-connection'.
(tramp-gvfs-handler-mounted-unmounted)
(tramp-gvfs-connection-mounted-p): Test also for new mountspec
attribute "default_location".  Set "prefix" property.
(tramp-gvfs-mount-spec): Return both prefix and mountspec.
(tramp-gvfs-maybe-open-connection): Test, whether mountpoint
exists.  Raise an error, if not (due to a corresponding answer
"no" in interactive questions, for example).
----------------------------
revision 1.33
date: 2010-05-28 06:13:25 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: 2CLK9YLsWaoW2yAu;
* tramp-compat.el (tramp-compat-delete-file): Use `symbol-value'
for backward compatibility.

* tramp.el (tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use `delete-file'
instead of `tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-do-copy-or-rename-file): Use
`delete-file' instead of `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.
(tramp-smb-handle-delete-directory): Use 'trash as arg.

* tramp-vc.el (tramp-vc-user-login-name): Use `delete-file'
instead of `tramp-compat-delete-file'.
----------------------------
revision 1.32
date: 2010-05-28 03:31:50 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: 8f88ImmlFUbw9xAu;
* tramp-compat.el (tramp-compat-delete-file): Rewrite to handle
new TRASH arg of `delete-file'.

* tramp.el (tramp-handle-delete-file): Change FORCE arg to TRASH.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use null TRASH arg in
tramp-compat-delete-file call.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-delete-file)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use null TRASH arg
in `tramp-compat-delete-file' call.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-imap.el (tramp-imap-handle-delete-file): Rename arg.
(tramp-imap-do-copy-or-rename-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use null TRASH arg in
tramp-compat-delete-file call.
(tramp-smb-handle-delete-directory): Use tramp-compat-delete-file.
(tramp-smb-handle-delete-file): Rename arg.
----------------------------
revision 1.31
date: 2010-05-25 01:39:27 -0700;  author: albinus;  state: Exp;  lines: +8 -6;  commitid: n5aSqPkqy3PVC8Au;
* tramp.el (tramp-progress-reporter-update): New defun.
(with-progress-reporter): Use it.
(tramp-process-one-action):
* tramp-gvfs.el (tramp-gvfs-handler-askquestion): Preserve current
message, in order to let progress reporter continue
afterwards.  (Bug#6257)
----------------------------
revision 1.30
date: 2010-05-21 06:46:38 -0700;  author: albinus;  state: Exp;  lines: +50 -57;  commitid: RZ9vsTHEycGisEzu;
* tramp.el (tramp-do-copy-or-rename-file)
(tramp-handle-file-local-copy, tramp-maybe-open-connection): Tune
`with-progress-reporter' messages.
(tramp-handle-vc-registered):
* tramp-fish.el (tramp-fish-handle-file-local-copy)
(tramp-fish-handle-insert-file-contents)
(tramp-fish-maybe-open-connection):
* tramp-gvfs.el (tramp-gvfs-maybe-open-connection):
* tramp-imap.el (tramp-imap-do-copy-or-rename-file)
(tramp-imap-handle-insert-file-contents)
(tramp-imap-handle-file-local-copy): Use `with-progress-reporter'.
----------------------------
revision 1.29
date: 2010-05-09 12:45:05 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: mYjXXOy50YSYO8yu;
* tramp-compat.el (byte-compile-not-obsolete-vars): Define if not
bound.
(tramp-compat-copy-file): Add PRESERVE-SELINUX-CONTEXT.
(tramp-compat-funcall): New defmacro.
(tramp-compat-line-beginning-position)
(tramp-compat-line-end-position)
(tramp-compat-temporary-file-directory)
(tramp-compat-make-temp-file, tramp-compat-file-attributes)
(tramp-compat-copy-file, tramp-compat-copy-directory)
(tramp-compat-delete-file, tramp-compat-delete-directory)
(tramp-compat-number-sequence, tramp-compat-process-running-p)
* tramp.el (top, with-progress-reporter)
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-handle-dired-compress-file, tramp-handle-shell-command)
(tramp-completion-mode-p, tramp-check-for-regexp)
(tramp-open-connection-setup-interactive-shell)
(tramp-compute-multi-hops, tramp-read-passwd, tramp-clear-passwd)
(tramp-time-diff, tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag, tramp-unload-tramp)
* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-reporter-dump-variable, tramp-load-report-modules)
(tramp-append-tramp-buffers)
* tramp-gvfs.el (tramp-gvfs-handle-file-selinux-context)
* tramp-util.el (tramp-gud-file-name): Use it.

* tramp-imap.el (top): Autoload `epg-make-context'.
----------------------------
revision 1.28
date: 2010-05-06 01:28:23 -0700;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: gZma8ggIUvl1bHxu;
* tramp.el (top, with-progress-reporter): Use `symbol-function'
inside `funcall'.

* tramp-compat.el (tramp-compat-file-attributes)
(tramp-compat-delete-file, tramp-compat-delete-directory): Handle
only `wrong-number-of-arguments' error.

* tramp-gvfs.el (tramp-gvfs-handle-copy-file): Fix typo.
(tramp-gvfs-handle-file-selinux-context): Use `symbol-function'
inside `funcall'.
----------------------------
revision 1.27
date: 2010-05-05 02:57:36 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: 7vDVEtI34jXBHzxu;
Add FORCE argument to `delete-file'.

* tramp-compat.el (tramp-compat-delete-file): New defun.

* tramp.el (tramp-handle-delete-file): Add FORCE arg.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-file): Add FORCE arg.
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use
`tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Add FORCE arg.
(tramp-gvfs-handle-write-region): Use `tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-handle-delete-file): Add FORCE arg.
(tramp-imap-do-copy-or-rename-file): Use `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-delete-file): Add FORCE arg.
(tramp-smb-handle-copy-file, tramp-smb-handle-file-local-copy)
(tramp-smb-handle-rename-file, tramp-smb-handle-write-region): Use
`tramp-compat-delete-file'.

* tramp-vc.el (tramp-vc-user-login-name): Use
`tramp-compat-delete-file'.
----------------------------
revision 1.26
date: 2010-04-23 06:58:43 -0700;  author: albinus;  state: Exp;  lines: +26 -10;  commitid: jjKGKL8Sxss2q3wu;
Implement SELINUX backends.

* tramp.el (tramp-file-name-handler-alist): Add
`file-selinux-context' and `set-file-selinux-context'.
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context): New defuns.
(tramp-handle-copy-file, tramp-do-copy-or-rename-file): Handle
PRESERVE-SELINUX-CONTEXT.

* tramp-gvfs.el (tramp-gvfs-file-name-handler-alist): Add
`file-selinux-context' and `set-file-selinux-context'.
(tramp-gvfs-handle-file-selinux-context)
(tramp-gvfs-handle-set-file-selinux-context): New defuns.
(tramp-gvfs-handle-copy-file): Handle
PRESERVE-SELINUX-CONTEXT.

* tramp-fish.el (tramp-fish-handle-copy-file):
* tramp-imap.el (tramp-imap-handle-copy-file):
* tramp-smb.el (tramp-smb-handle-copy-file): Add
PRESERVE-SELINUX-CONTEXT.
----------------------------
revision 1.25
date: 2010-02-15 06:56:16 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: zC9KezLCr9DlTrnu;
* tramp.el (tramp-process-actions, tramp-read-passwd):
* tramp-gvfs.el (tramp-gvfs-maybe-open-connection): Use VEC
instead of PROC for caching "first-password-request".  Otherwise,
new processes would not profit from passwords already entered.

* tramp-cache.el (tramp-dump-connection-properties): Don't save
"first-password-request" property.
----------------------------
revision 1.24
date: 2010-01-14 20:52:28 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: zweSrHgxjm35ypju;
Add 2010 to copyright years.
----------------------------
revision 1.23
date: 2009-11-17 06:45:59 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: EXgpuCh9uPzlJSbu;
* tramp-gvfs.el (tramp-gvfs-handle-write-region): Set file
modification time.
----------------------------
revision 1.22
date: 2009-11-16 05:35:12 -0800;  author: albinus;  state: Exp;  lines: +6 -5;  commitid: xtZIykGFyAk4nKbu;
* tramp-gvfs.el (tramp-gvfs-dbus-event-error): Raise only an error
when `tramp-gvfs-dbus-event-vector' is set.
(tramp-gvfs-maybe-open-connection): Loop over `read-event'.
----------------------------
revision 1.21
date: 2009-11-07 14:28:11 -0800;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: 7Cp23uPPG0CPBDau;
* tramp-gvfs.el (tramp-gvfs-handle-delete-directory): Use
`tramp-compat-delete-directory'.
----------------------------
revision 1.20
date: 2009-10-01 08:23:17 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: qW3YewDFepcPrQ5u;
* tramp-gvfs.el (tramp-gvfs-handle-delete-directory): Handle
optional parameter RECURSIVE.
----------------------------
revision 1.19
date: 2009-08-27 05:48:23 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: 10WyUUtFUiRqIk1u;
* tramp-gvfs.el (top): Replace ping by checking for running
service for bluez and zeroconf.  (Bug#4239)
----------------------------
revision 1.18
date: 2009-08-03 20:26:46 -0700;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: VQijhScRVeMAlkYt;
* tramp-gvfs.el (top): Remove superfluous message when loading
fails.
----------------------------
revision 1.17
date: 2009-07-03 07:45:53 -0700;  author: albinus;  state: Exp;  lines: +13 -13;  commitid: 1U8ij6jhBuKl8hUt;
* tramp-gvfs.el (tramp-gvfs-methods,tramp-gvfs-zeroconf-domain)
(tramp-bluez-discover-devices-timeout): Add version flag.
(tramp-gvfs-handler-mounted-unmounted)
(tramp-gvfs-connection-mounted-p): Polish handling of
incompatibilities between GVFS 0.2 and 1.0.
----------------------------
revision 1.16
date: 2009-07-02 08:30:11 -0700;  author: albinus;  state: Exp;  lines: +11 -4;  commitid: bvRPI20vC8Ixp9Ut;
* tramp-gvfs.el (tramp-gvfs-handler-mounted-unmounted)
(tramp-gvfs-connection-mounted-p): Handle changed mount-info
interface.
----------------------------
revision 1.15
date: 2009-07-01 08:18:13 -0700;  author: albinus;  state: Exp;  lines: +34 -19;  commitid: 8FdMwfp6cvBqn1Ut;
* tramp-gvfs.el (tramp-gvfs-file-name-handler-alist): Add handler
for `process-file', `shell-command' and `start-file-process'.
(tramp-gvfs-handle-shell-command)
(tramp-gvfs-handle-start-file-process)
(tramp-gvfs-handle-process-file): New defuns.
(tramp-synce-list-devices): Symplify check for existence of
property.
----------------------------
revision 1.14
date: 2009-06-30 14:05:50 -0700;  author: albinus;  state: Exp;  lines: +41 -20;  commitid: 5Txn8aHNNsiFkVTt;
* tramp-gvfs.el (tramp-gvfs-methods): Add "synce" method.
(top): Add a default for "synce" in `tramp-default-user-alist'.
Add completion function for "synce" method.
(tramp-hal-service, tramp-hal-path-manager)
(tramp-hal-interface-manager, tramp-hal-interface-device): New
defconst.
(tramp-gvfs-connection-mounted-p): Handle empty user name for
synce.
(tramp-synce-list-devices, tramp-synce-parse-device-names): New
defuns.
----------------------------
revision 1.13
date: 2009-06-30 07:44:14 -0700;  author: albinus;  state: Exp;  lines: +38 -2;  commitid: SY1s8yQd8ikLdTTt;
* tramp-gvfs.el (tramp-gvfs-methods): Add "synce" method.
(tramp-gvfs-connection-mounted-p): Handle empty user name for
synce.
(tramp-synce-list-devices, tramp-synce-parse-device-names): New
defuns.
(top): Add completion function for "synce" method.
----------------------------
revision 1.12
date: 2009-06-23 22:05:47 -0700;  author: albinus;  state: Exp;  lines: +8 -5;  commitid: Ho4NIyN0t4sgd4Tt;
*** empty log message ***
----------------------------
revision 1.11
date: 2009-06-23 22:03:37 -0700;  author: albinus;  state: Exp;  lines: +16 -4;  commitid: 4aIPc0drSKTwc4Tt;
* tramp-gvfs.el (top): Declare used Lisp symbols from `dbusbind'.
Require 'cl and 'custom when byte-compiling.
(tramp-gvfs-handle-make-directory): Use `dir' but `filename'.
Reported by Glenn Morris <rgm@gnu.org>.
----------------------------
revision 1.10
date: 2009-06-15 08:38:15 -0700;  author: albinus;  state: Exp;  lines: +7 -7;  commitid: s3UmycQGxGPb0YRt;
* tramp-gvfs.el (tramp-gvfs-handler-askpassword): Handle USER
correctly.
----------------------------
revision 1.9
date: 2009-06-06 16:12:50 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: XakYV0b94Xk4OQQt;
* tramp-gvfs.el (tramp-gvfs-file-name-handler-alist): Add handler
for `dired-uncache'.
----------------------------
revision 1.8
date: 2009-03-22 04:26:49 -0700;  author: albinus;  state: Exp;  lines: +7 -4;  commitid: C6PImMV6gRvjl1Ht;
* tramp-gvfs.el (top): Add methods to `tramp-methods' after
loading only.  Throw `tramp-loading', when GVFS daemon does not run.
----------------------------
revision 1.7
date: 2009-02-26 06:45:12 -0800;  author: albinus;  state: Exp;  lines: +0 -8;  commitid: D6IBvMOGXrf7dXDt;

Remove unnecessary comments.
----------------------------
revision 1.6
date: 2009-02-22 07:31:09 -0800;  author: albinus;  state: Exp;  lines: +13 -13;  commitid: oZhFQ1VKDwSWArDt;
* tramp-gvfs.el (tramp-gvfs-handle-write-region): Fix scoping error.
----------------------------
revision 1.5
date: 2009-02-17 08:21:27 -0800;  author: albinus;  state: Exp;  lines: +40 -12;  commitid: vJFSgYa4fnP32OCt;

* tramp-gvfs.el (tramp-gvfs-zeroconf-domain): New defcustom.
(top): Use it for zeroconf initialization.
(tramp-gvfs-handle-make-directory): Use GVFS utilities in error
case.
(tramp-gvfs-handle-set-file-modes): Surround with
`with-tramp-gvfs-error-message filename'.
(tramp-gvfs-handle-write-region): Add trace messages.
----------------------------
revision 1.4
date: 2009-02-15 13:04:44 -0800;  author: albinus;  state: Exp;  lines: +138 -43;  commitid: VL8ixXg4VkclFzCt;
* tramp-gvfs.el (top): Require also 'url-parse and 'zeroconf.  Add
completion function for "dav" and "davs" methods.
(tramp-gvfs-url-file-name)
(tramp-zeroconf-parse-workstation-device-names)
(tramp-zeroconf-parse-webdav-device-names): New defuns.
(with-tramp-gvfs-error-message): New defmacro.
(tramp-gvfs-handle-make-directory): Use it.
(tramp-gvfs-handle-insert-file-contents): Protect setting
`buffer-file-name' with `unwind-protect'.
(tramp-gvfs-handle-write-region): Use GVFS utilities in error
case.
(tramp-gvfs-handler-mounted-unmounted): Ignore errors.
----------------------------
revision 1.3
date: 2009-02-11 12:09:57 -0800;  author: albinus;  state: Exp;  lines: +9 -7;  commitid: TwDhisBdTFCvu3Ct;
* tramp-gvfs.el (top): Don't raise an error, when "org.bluez" is
not answering.  Add completion function only when "org.bluez" is
reachable.
(tramp-gvfs-maybe-open-connection): Set "started" property.
----------------------------
revision 1.2
date: 2009-02-06 08:18:21 -0800;  author: albinus;  state: Exp;  lines: +0 -37;  commitid: d2vbbnhj9vlVmoBt;

Remove unused comments.
----------------------------
revision 1.1
date: 2009-02-06 08:15:00 -0800;  author: albinus;  state: Exp;  commitid: 5QqmG88oyZFOloBt;

* tramp-gvfs.el: New package.
----------------------------
revision 1.37.2.1
date: 2011-01-24 02:09:41 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-gw.el,v
Working file: lisp/tramp-gw.el
head: 2.26
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.22
	branch-2-1-stable: 2.18.0.2
	branchpoint-2-1-stable: 2.18
	V-2-1-19: 2.18
	V-2-1-18: 2.18
	V-2-1-17: 2.17
	V-2-1-16: 2.17
	V-2-1-15: 2.17
	V-2-1-14: 2.16
	V-2-1-13: 2.15
	V-2-1-12: 2.14
	V-2-1-11: 2.13
	V-2-1-10: 2.10
	V-2-1-9: 2.6
keyword substitution: kv
total revisions: 27;	selected revisions: 27
description:
----------------------------
revision 2.26
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.25
date: 2011-01-19 03:09:00 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 2.24
date: 2010-12-30 00:57:35 -0800;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: sJi0TOvcI16wGh2v;
* tramp.el (tramp-default-method-alist, tramp-default-user-alist)
(tramp-local-host-regexp, tramp-prefix-domain-format)
(tramp-prefix-domain-regexp): Set tramp-autoload cookie.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-sh.el:
* tramp-smb.el: Add tramp-autoload cookie for initialisation code
of `tramp-default-method-alist' and `tramp-default-user-alist'.
----------------------------
revision 2.23
date: 2010-12-01 09:42:17 -0800;  author: albinus;  state: Exp;  lines: +11 -6;  commitid: Uh2KDiGC5DnnwBYu;
* tramp.el (tramp-debug-message): Extend function exclude list.

* tramp-sh.el (tramp-methods): Add recursive options to "pscp" and
"psftp".  Exchange "%k" marker with options.
(tramp-do-copy-or-rename-file, tramp-sh-handle-file-local-copy):
Compute size of link target.
(tramp-do-copy-or-rename-file-out-of-band). Move setting of
`tramp-current-*' up due to gateway methods.  Optimze computing of
copy arguments.  Use `tramp-get-connection-name' and
`tramp-get-connection-buffer'.  Improve debug messages.

* tramp.el (tramp-default-method-alist)
(tramp-default-user-alist, tramp-default-proxies-alist): Adapt
custom options type.  (Bug#7445)
(tramp-local-host-regexp): Add "localhost6".
(tramp-file-name-port): Check also for `tramp-default-port'.
(tramp-get-connection-name): New defun.
(tramp-get-connection-process): Use it.
(tramp-drop-volume-letter): Fix doc string.

* tramp-cmds.el: Remove solved todo item.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-smb.el: Fix regexps added to `tramp-default-method-alist'
and `tramp-default-user-alist', respectively.

* tramp-gw.el (tramp-gw-open-connection): Use
`tramp-get-connection-name' and `tramp-get-connection-buffer'.

* tramp-imap.el (tramp-imap-make-iht): Use just
`tramp-file-name-port'.

* tramp-sh.el (tramp-compute-multi-hops): Remove port
determination.
(tramp-maybe-open-connection): Use `tramp-get-connection-name'.
----------------------------
revision 2.22
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 2.21
date: 2010-10-05 07:06:01 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: Yfgg9L8idLcN9gRu;
* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-handle-file-exists-p, tramp-handle-file-newer-than-file-p):
New defuns, taken from tramp-smb.el.
(tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag): Removed.

* tramp-compat.el (top): Do not check for byte-compiler objects.
(tramp-compat-coding-system-change-eol-conversion)
(tramp-compat-set-process-query-on-exit-flag): New defuns, taken
from tramp.el.

* tramp-gvfs.el:
* tramp-gw.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.

* tramp-imap.el (tramp-imap-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-imap-handle-file-exists-p)
(tramp-imap-handle-file-executable-p)
(tramp-imap-handle-file-readable-p)
(tramp-imap-handle-directory-files-and-attributes)
(tramp-imap-handle-file-newer-than-file-p): Removed.

* tramp-sh.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag' and
`tramp-coding-system-change-eol-conversion' by
`tramp-compat-coding-system-change-eol-conversion'.

* tramp-smb.el (tramp-smb-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-newer-than-file-p): Removed.
(tramp-smb-maybe-open-connection): Replace
`tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.
----------------------------
revision 2.20
date: 2010-09-13 06:18:45 -0700;  author: albinus;  state: Exp;  lines: +3 -4;  commitid: hctSFHPfw5XxBqOu;
Major code cleanup.  Split tramp.el into tramp.el and tramp-sh.el.

* Makefile.in (LISP_FILES): Remove tramp-fish.el.  Add tramp-sh.el.

* tramp.el (top): Don't show loading message.  Require just
'tramp-compat, everything else is required there.  Use
`ignore-errors' where appropriate.
(tramp-inline-compress-start-size, tramp-copy-size-limit)
(tramp-terminal-type, tramp-end-of-output)
(tramp-initial-end-of-output, tramp-completion-function-alist-rsh)
(tramp-completion-function-alist-ssh)
(tramp-completion-function-alist-telnet)
(tramp-completion-function-alist-su)
(tramp-completion-function-alist-putty, tramp-remote-path)
(tramp-remote-process-environment, tramp-sh-extra-args)
(tramp-actions-before-shell, tramp-uudecode)
(tramp-perl-file-truename, tramp-perl-file-name-all-completions)
(tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode)
(tramp-vc-registered-read-file-names, tramp-file-mode-type-map)
(tramp-file-name-handler-alist, tramp-make-tramp-temp-file)
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-as-directory)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-exists-p, tramp-handle-file-attributes)
(tramp-do-file-attributes-with-ls)
(tramp-do-file-attributes-with-perl)
(tramp-do-file-attributes-with-stat)
(tramp-handle-set-visited-file-modtime)
(tramp-handle-verify-visited-file-modtime)
(tramp-handle-set-file-modes, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-remote-selinux-p)
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-newer-than-file-p, tramp-handle-file-modes)
(tramp-handle-file-directory-p, tramp-handle-file-regular-p)
(tramp-handle-file-symlink-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p)
(tramp-handle-directory-file-name, tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-do-directory-files-and-attributes-with-perl)
(tramp-do-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions)
(tramp-handle-file-name-completion, tramp-handle-add-name-to-file)
(tramp-handle-copy-file, tramp-handle-copy-directory)
(tramp-handle-rename-file, tramp-do-copy-or-rename-file)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-dired-compress-file, tramp-handle-dired-uncache)
(tramp-handle-insert-directory)
(tramp-handle-unhandled-file-name-directory)
(tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-executable-find, tramp-process-sentinel)
(tramp-handle-start-file-process, tramp-handle-process-file)
(tramp-handle-call-process-region, tramp-handle-shell-command)
(tramp-handle-file-local-copy, tramp-handle-file-remote-p)
(tramp-handle-insert-file-contents)
(tramp-handle-insert-file-contents-literally)
(tramp-handle-find-backup-file-name)
(tramp-handle-make-auto-save-file-name, tramp-handle-write-region)
(tramp-vc-registered-file-names, tramp-handle-vc-registered)
(tramp-sh-file-name-handler, tramp-vc-file-name-handler)
(tramp-maybe-send-script, tramp-set-auto-save, tramp-run-test)
(tramp-run-test2, tramp-find-executable, tramp-set-remote-path)
(tramp-find-file-exists-command, tramp-open-shell)
(tramp-find-shell, tramp-barf-if-no-shell-prompt)
(tramp-open-connection-setup-interactive-shell)
(tramp-local-coding-commands, tramp-remote-coding-commands)
(tramp-find-inline-encoding, tramp-call-local-coding-command)
(tramp-inline-compress-commands, tramp-find-inline-compress)
(tramp-compute-multi-hops, tramp-maybe-open-connection)
(tramp-send-command , tramp-wait-for-output)
(tramp-send-command-and-check, tramp-barf-unless-okay)
(tramp-send-command-and-read, tramp-mode-string-to-int)
(tramp-convert-file-attributes, tramp-check-cached-permissions)
(tramp-file-mode-from-int, tramp-file-mode-permissions)
(tramp-shell-case-fold, tramp-make-copy-program-file-name)
(tramp-method-out-of-band-p, tramp-local-host-p)
(tramp-get-remote-path, tramp-get-remote-tmpdir)
(tramp-get-ls-command, tramp-get-ls-command-with-dired)
(tramp-get-test-command, tramp-get-test-nt-command)
(tramp-get-file-exists-command, tramp-get-remote-ln)
(tramp-get-remote-perl, tramp-get-remote-stat)
(tramp-get-remote-readlink, tramp-get-remote-trash)
(tramp-get-remote-id, tramp-get-remote-uid, tramp-get-remote-gid)
(tramp-get-local-uid, tramp-get-local-gid)
(tramp-get-inline-compress, tramp-get-inline-coding, ): Move to
tramp-sh.el.
(tramp-methods, tramp-default-method-alist)
(tramp-default-user-alist, tramp-foreign-file-name-handler-alist):
Move initialization to tramp-sh.el.
(tramp-temp-name-prefix): Make it a defconst.
(tramp-dissect-file-name): Don't check anymore for multi-hop
methods.
(tramp-debug-outline-regexp): Add a docstring.
(tramp-debug-outline-level): Renamed from `tramp-outline-level'.
(tramp-get-debug-buffer): Use it.

* tramp-cache.el (top): Set tramp-autoload cookie for
initialization forms.
(tramp-set-connection-property): Don't protect `tramp-message'
call, it isn't necessary any longer.
(tramp-dump-connection-properties): Use `ignore-errors'.

* tramp-compat.el (top): Require 'advice, 'format-spec,
'password-cache and 'auth-source.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Require 'tramp-sh.

* tramp-gw.el (tramp-gw-open-network-stream): Use `ignore-errors'.

* tramp-sh.el: New file, derived from tramp.el.
(top): Initialize `tramp-methods', `tramp-default-method-alist',
`tramp-default-user-alist', tramp-foreign-file-name-handler-alist.
Remove "scp1_old", "scp2_old", "ssh1_old", "ssh2_old".  Use
`ignore-errors' where appropriate.
(tramp-sh-file-name-handler-alist): Renamed from
`tramp-file-name-handler-alist'.
(tramp-send-command-and-check): Return t or nil.  Remove all
`zerop' checks, where called.
(tramp-handle-set-file-modes)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-delete-directory, tramp-handle-delete-file)
(tramp-maybe-send-script, ): Use `tramp-barf-unless-okay'.
(tramp-sh-file-name-handler, tramp-send-command-and-check)
(tramp-get-remote-ln): Set tramp-autoload cookie.
----------------------------
revision 2.19
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +17 -9;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.18
date: 2010-01-14 20:52:28 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: zweSrHgxjm35ypju;
branches:  2.18.2;
Add 2010 to copyright years.
----------------------------
revision 2.17
date: 2009-01-05 11:57:11 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: AIssWfELPV8SBixt;
Update copyrights for 2009.
----------------------------
revision 2.16
date: 2008-05-13 14:17:22 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: mj2UIAxPVMxHFQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.15
date: 2008-01-12 03:04:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.14
date: 2007-10-17 15:09:51 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: gM2uQ3KaIjZIFZBs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-cmds.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-cmds.el.

* lisp/tramp.el (top): Put load of all tramp-* files into a dolist.
Require tramp-cmds.el.
(tramp-clear-passwd): Add parameter VEC.  Adapt all callees.
(tramp-append-tramp-buffers): Apply `tramp-list-tramp-buffers'.

* lisp/tramp-cmds.el: New file.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Apply VEC to
`tramp-clear-passwd'.
----------------------------
revision 2.13
date: 2007-09-28 08:52:02 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 2.12
date: 2007-07-29 08:39:39 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: 6Mig8uNEFEeF5Grs;
*** empty log message ***
----------------------------
revision 2.11
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +3 -4;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.10
date: 2007-07-12 14:09:36 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 07w8tRE3nh6Pswps;
*** empty log message ***
----------------------------
revision 2.9
date: 2007-07-01 22:09:51 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.8
date: 2007-07-01 11:31:35 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.7
date: 2007-05-31 13:15:43 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: ST0w65uyFLXNv7ks;

* lisp/tramp-cache.el (tramp-persistency-file-name): Check also for
`user-emacs-directory' and `user-init-directory'.

* lisp/tramp-gw.el (tramp-gw-open-connection): Apply `vector' instead
of `make-tramp-file-name'.

* lisp/tramp-util.el (all): Quote the function names in
`tramp-util-unload-hook' if they aren't symbols yet.
(tramp-advice-before-ediff-exec-process): New defadvice.
----------------------------
revision 2.6
date: 2007-03-07 13:24:30 -0800;  author: albinus;  state: Exp;  lines: +13 -9;

* lisp/tramp.el (tramp-methods): Add port spec to "telnet" method.
(tramp-do-copy-or-rename-file-out-of-band): Complete gateway
implementation.
(tramp-handle-insert-directory): Check (featurep 'ls-lisp).
(tramp-make-tramp-temp-file): Use `emacs-pid' if there is no
running process yet.
(tramp-compute-multi-hops): New defun.  Code extracted from
`tramp-maybe-open-connection'.
(tramp-maybe-open-connection): Code adapted accordingly.

* lisp/tramp-gw.el (tramp-gw-gw-proc-sentinel): Companion process might
not exist.
(tramp-gw-open-network-stream, tramp-gw-basic-authentication):
Clean password cache in error case only.

* texi/tramp.texi (Remote processes): Improve eshell example.
----------------------------
revision 2.5
date: 2007-02-28 14:56:41 -0800;  author: albinus;  state: Exp;  lines: +52 -39;

* lisp/tramp.el (tramp-error-with-buffer): Use `sit-for'.

* lisp/tramp-gw.el (tramp-gw-vector, tramp-gw-gw-proc): Renamed from
`tramp-gw-current-vector' and `tramp-gw-current-gw-proc'.
(tramp-gw-gw-vector): New defvar.
(tramp-gw-gw-proc-sentinel): New defun.
(tramp-gw-open-connection): Use an independent buffer name for
auxiliary process.  Set process sentinel for `tramp-gw-gw-proc'.
----------------------------
revision 2.4
date: 2007-02-27 14:09:44 -0800;  author: albinus;  state: Exp;  lines: +64 -41;

* lisp/tramp.el (tramp-error-with-buffer): New defsubst.  Apply it
wherever there is `pop-to-buffer', followed by `tramp-error'.
(tramp-maybe-open-connection): Rename `tramp-gw-http-method' to
`tramp-gw-tunnel-method'.

* lisp/tramp-gw.el (tramp-gw-tunnel-method)
(tramp-gw-default-tunnel-port): Renamed from
`tramp-gw-http-method' and `tramp-gw-default-http-port',
respectively.  Apply it everywhere.
(tramp-gw-open-connection): Improve doc-string.  Use only type 5
for `socks-server', we have our own 'http implementation.
(tramp-gw-open-network-stream): Improve error handling.
(tramp-gw-basic-authentication): Bind `tramp-current-*' locally
because of password cache key.

* texi/tramp.texi (History): Add gateway methods as well as relation to
GNU Emacs, XEmacs and GNU/Linux Debian.
(Gateway methods): Minor wording improvements.
(Multi-hops): Explain HTTP tunnel example in more detail.
----------------------------
revision 2.3
date: 2007-02-26 13:56:03 -0800;  author: albinus;  state: Exp;  lines: +192 -178;

* lisp/tramp.el (tramp-methods): Add "StrictHostKeyChecking=no" to
`tramp-gw-args' of ssh, ssh1 and ssh2 methods.
(tramp-maybe-open-connection): Implement changed interface of
`tramp-gw-open-connection'.
(tramp-send-eof): Removed.
(tramp-file-name-real-host, tramp-file-name-port): New defsubst.
(tramp-read-passwd): New parameter PROMPT.

* lisp/tramp-gw.el: Complete rewrite.  Use socks.el for SOCKS server;
implement HTTP tunnels on its own.

* texi/tramp.texi (Gateway methods): New section.
(Multi-hops): Describe useage of gateway methods.
----------------------------
revision 2.2
date: 2007-02-14 21:09:07 -0800;  author: albinus;  state: Exp;  lines: +84 -52;

* lisp/tramp-gw.el (tramp-gw-current-gw-vector)
(tramp-gw-current-http-buffer): New defvars.
(tramp-advice-url-http-parse-response)
(tramp-advice-url-http-create-request, tramp-gw-aux-proc-sentinel)
(tramp-gw-open-connection): Make them fit for proxy authentication.
----------------------------
revision 2.1
date: 2007-02-13 23:14:45 -0800;  author: albinus;  state: Exp;

* Makefile.in: Add tramp-gw.el

* lisp/Makefile.in: Add tramp-gw.el

* lisp/tramp-gw.el: New package.

* lisp/tramp.el (top): Require tramp-gw.
(tramp-methods): Add `tramp-gw-args' and `tramp-default-port' for
ssh and telnet methods.
(tramp-message): Catch errors.
(tramp-action-yesno, tramp-action-yn): Trace messages.
(tramp-maybe-open-connection): Handle gateways.
(tramp-read-passwd): New parameter PROC. Used in order to improve
password prompt. Adapt callees.
----------------------------
revision 2.18.2.1
date: 2011-01-24 02:09:41 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-imap.el,v
Working file: lisp/tramp-imap.el
head: 1.25
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.21
	branch-2-1-stable: 1.18.0.2
	branchpoint-2-1-stable: 1.18
	V-2-1-19: 1.18
	V-2-1-18: 1.11
	V-2-1-17: 1.6
keyword substitution: kv
total revisions: 26;	selected revisions: 26
description:
----------------------------
revision 1.25
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 1.24
date: 2011-01-19 03:09:00 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 1.23
date: 2010-12-30 00:57:35 -0800;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: sJi0TOvcI16wGh2v;
* tramp.el (tramp-default-method-alist, tramp-default-user-alist)
(tramp-local-host-regexp, tramp-prefix-domain-format)
(tramp-prefix-domain-regexp): Set tramp-autoload cookie.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-sh.el:
* tramp-smb.el: Add tramp-autoload cookie for initialisation code
of `tramp-default-method-alist' and `tramp-default-user-alist'.
----------------------------
revision 1.22
date: 2010-12-01 09:42:17 -0800;  author: albinus;  state: Exp;  lines: +7 -8;  commitid: Uh2KDiGC5DnnwBYu;
* tramp.el (tramp-debug-message): Extend function exclude list.

* tramp-sh.el (tramp-methods): Add recursive options to "pscp" and
"psftp".  Exchange "%k" marker with options.
(tramp-do-copy-or-rename-file, tramp-sh-handle-file-local-copy):
Compute size of link target.
(tramp-do-copy-or-rename-file-out-of-band). Move setting of
`tramp-current-*' up due to gateway methods.  Optimze computing of
copy arguments.  Use `tramp-get-connection-name' and
`tramp-get-connection-buffer'.  Improve debug messages.

* tramp.el (tramp-default-method-alist)
(tramp-default-user-alist, tramp-default-proxies-alist): Adapt
custom options type.  (Bug#7445)
(tramp-local-host-regexp): Add "localhost6".
(tramp-file-name-port): Check also for `tramp-default-port'.
(tramp-get-connection-name): New defun.
(tramp-get-connection-process): Use it.
(tramp-drop-volume-letter): Fix doc string.

* tramp-cmds.el: Remove solved todo item.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-smb.el: Fix regexps added to `tramp-default-method-alist'
and `tramp-default-user-alist', respectively.

* tramp-gw.el (tramp-gw-open-connection): Use
`tramp-get-connection-name' and `tramp-get-connection-buffer'.

* tramp-imap.el (tramp-imap-make-iht): Use just
`tramp-file-name-port'.

* tramp-sh.el (tramp-compute-multi-hops): Remove port
determination.
(tramp-maybe-open-connection): Use `tramp-get-connection-name'.
----------------------------
revision 1.21
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -2;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 1.20
date: 2010-10-05 07:06:01 -0700;  author: albinus;  state: Exp;  lines: +5 -35;  commitid: Yfgg9L8idLcN9gRu;
* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-handle-file-exists-p, tramp-handle-file-newer-than-file-p):
New defuns, taken from tramp-smb.el.
(tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag): Removed.

* tramp-compat.el (top): Do not check for byte-compiler objects.
(tramp-compat-coding-system-change-eol-conversion)
(tramp-compat-set-process-query-on-exit-flag): New defuns, taken
from tramp.el.

* tramp-gvfs.el:
* tramp-gw.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.

* tramp-imap.el (tramp-imap-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-imap-handle-file-exists-p)
(tramp-imap-handle-file-executable-p)
(tramp-imap-handle-file-readable-p)
(tramp-imap-handle-directory-files-and-attributes)
(tramp-imap-handle-file-newer-than-file-p): Removed.

* tramp-sh.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag' and
`tramp-coding-system-change-eol-conversion' by
`tramp-compat-coding-system-change-eol-conversion'.

* tramp-smb.el (tramp-smb-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-newer-than-file-p): Removed.
(tramp-smb-maybe-open-connection): Replace
`tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.
----------------------------
revision 1.19
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +22 -6;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 1.18
date: 2010-05-28 06:13:25 -0700;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: 2CLK9YLsWaoW2yAu;
branches:  1.18.2;
* tramp-compat.el (tramp-compat-delete-file): Use `symbol-value'
for backward compatibility.

* tramp.el (tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use `delete-file'
instead of `tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-do-copy-or-rename-file): Use
`delete-file' instead of `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.
(tramp-smb-handle-delete-directory): Use 'trash as arg.

* tramp-vc.el (tramp-vc-user-login-name): Use `delete-file'
instead of `tramp-compat-delete-file'.
----------------------------
revision 1.17
date: 2010-05-28 03:31:50 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: 8f88ImmlFUbw9xAu;
* tramp-compat.el (tramp-compat-delete-file): Rewrite to handle
new TRASH arg of `delete-file'.

* tramp.el (tramp-handle-delete-file): Change FORCE arg to TRASH.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use null TRASH arg in
tramp-compat-delete-file call.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-delete-file)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use null TRASH arg
in `tramp-compat-delete-file' call.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-imap.el (tramp-imap-handle-delete-file): Rename arg.
(tramp-imap-do-copy-or-rename-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use null TRASH arg in
tramp-compat-delete-file call.
(tramp-smb-handle-delete-directory): Use tramp-compat-delete-file.
(tramp-smb-handle-delete-file): Rename arg.
----------------------------
revision 1.16
date: 2010-05-21 06:46:38 -0700;  author: albinus;  state: Exp;  lines: +34 -36;  commitid: RZ9vsTHEycGisEzu;
* tramp.el (tramp-do-copy-or-rename-file)
(tramp-handle-file-local-copy, tramp-maybe-open-connection): Tune
`with-progress-reporter' messages.
(tramp-handle-vc-registered):
* tramp-fish.el (tramp-fish-handle-file-local-copy)
(tramp-fish-handle-insert-file-contents)
(tramp-fish-maybe-open-connection):
* tramp-gvfs.el (tramp-gvfs-maybe-open-connection):
* tramp-imap.el (tramp-imap-do-copy-or-rename-file)
(tramp-imap-handle-insert-file-contents)
(tramp-imap-handle-file-local-copy): Use `with-progress-reporter'.
----------------------------
revision 1.15
date: 2010-05-09 12:45:05 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: mYjXXOy50YSYO8yu;
* tramp-compat.el (byte-compile-not-obsolete-vars): Define if not
bound.
(tramp-compat-copy-file): Add PRESERVE-SELINUX-CONTEXT.
(tramp-compat-funcall): New defmacro.
(tramp-compat-line-beginning-position)
(tramp-compat-line-end-position)
(tramp-compat-temporary-file-directory)
(tramp-compat-make-temp-file, tramp-compat-file-attributes)
(tramp-compat-copy-file, tramp-compat-copy-directory)
(tramp-compat-delete-file, tramp-compat-delete-directory)
(tramp-compat-number-sequence, tramp-compat-process-running-p)
* tramp.el (top, with-progress-reporter)
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-handle-dired-compress-file, tramp-handle-shell-command)
(tramp-completion-mode-p, tramp-check-for-regexp)
(tramp-open-connection-setup-interactive-shell)
(tramp-compute-multi-hops, tramp-read-passwd, tramp-clear-passwd)
(tramp-time-diff, tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag, tramp-unload-tramp)
* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-reporter-dump-variable, tramp-load-report-modules)
(tramp-append-tramp-buffers)
* tramp-gvfs.el (tramp-gvfs-handle-file-selinux-context)
* tramp-util.el (tramp-gud-file-name): Use it.

* tramp-imap.el (top): Autoload `epg-make-context'.
----------------------------
revision 1.14
date: 2010-05-05 02:57:36 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: 7vDVEtI34jXBHzxu;
Add FORCE argument to `delete-file'.

* tramp-compat.el (tramp-compat-delete-file): New defun.

* tramp.el (tramp-handle-delete-file): Add FORCE arg.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-file): Add FORCE arg.
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use
`tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Add FORCE arg.
(tramp-gvfs-handle-write-region): Use `tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-handle-delete-file): Add FORCE arg.
(tramp-imap-do-copy-or-rename-file): Use `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-delete-file): Add FORCE arg.
(tramp-smb-handle-copy-file, tramp-smb-handle-file-local-copy)
(tramp-smb-handle-rename-file, tramp-smb-handle-write-region): Use
`tramp-compat-delete-file'.

* tramp-vc.el (tramp-vc-user-login-name): Use
`tramp-compat-delete-file'.
----------------------------
revision 1.13
date: 2010-04-23 06:58:43 -0700;  author: albinus;  state: Exp;  lines: +5 -2;  commitid: jjKGKL8Sxss2q3wu;
Implement SELINUX backends.

* tramp.el (tramp-file-name-handler-alist): Add
`file-selinux-context' and `set-file-selinux-context'.
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context): New defuns.
(tramp-handle-copy-file, tramp-do-copy-or-rename-file): Handle
PRESERVE-SELINUX-CONTEXT.

* tramp-gvfs.el (tramp-gvfs-file-name-handler-alist): Add
`file-selinux-context' and `set-file-selinux-context'.
(tramp-gvfs-handle-file-selinux-context)
(tramp-gvfs-handle-set-file-selinux-context): New defuns.
(tramp-gvfs-handle-copy-file): Handle
PRESERVE-SELINUX-CONTEXT.

* tramp-fish.el (tramp-fish-handle-copy-file):
* tramp-imap.el (tramp-imap-handle-copy-file):
* tramp-smb.el (tramp-smb-handle-copy-file): Add
PRESERVE-SELINUX-CONTEXT.
----------------------------
revision 1.12
date: 2010-03-14 04:11:57 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: ewiPIlGpMfsAMTqu;
* tramp.el (tramp): Put in comm group.
* tramp-imap.el (tramp-imap): Put in tramp group.
----------------------------
revision 1.11
date: 2010-02-05 03:08:55 -0800;  author: albinus;  state: Exp;  lines: +6 -4;  commitid: O8Ov7vj9pqmmX8mu;
* tramp-imap.el (tramp-imap-handle-insert-directory):
* tramp-smb.el (tramp-smb-handle-insert-directory):
Handle also directories.  (Bug#5478)
----------------------------
revision 1.10
date: 2010-02-04 08:02:02 -0800;  author: albinus;  state: Exp;  lines: +9 -5;  commitid: MoSIFmVTXc10C2mu;
* tramp.el (tramp-handle-dired-uncache): When DIR is not a
directory, handle its directory component.
(tramp-handle-file-remote-p): Let-bind `tramp-verbose' to 3; this
function is called permanently and creates noise, otherwise.

* tramp-imap.el (tramp-imap-handle-insert-directory):
* tramp-smb.el (tramp-smb-handle-insert-directory):
Handle the case, FILENAME is not in `default-directory'.  (Bug#5478)
----------------------------
revision 1.9
date: 2010-01-22 13:21:53 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: hbDFc2yve1JDNoku;
* tramp-imap.el (top): Autoload needed packages.
----------------------------
revision 1.8
date: 2010-01-22 13:13:57 -0800;  author: albinus;  state: Exp;  lines: +17 -5;  commitid: Pfp1A8yJSIjKKoku;
* tramp-imap.el (top): Autoload needed packages.
----------------------------
revision 1.7
date: 2010-01-14 20:52:28 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: zweSrHgxjm35ypju;
Add 2010 to copyright years.
----------------------------
revision 1.6
date: 2009-10-27 03:50:26 -0700;  author: albinus;  state: Exp;  lines: +44 -19;  commitid: bwGnpubnh8Io6a9u;
* tramp-imap.el (top): Add `X-Size' to `imap-hash-headers'.
(tramp-imap-do-copy-or-rename-file): Don't use the inode, when
calling `tramp-imap-put-file'.  Add file size to the call.
(tramp-imap-get-file-entries): Compute also user name, file size,
and date.
(tramp-imap-handle-insert-directory): Insert uid and gid.
(tramp-imap-handle-file-attributes): Transform uid and gid
according to `id-format'.
(tramp-imap-put-file): New optional parameter SIZE.  Encode file
size in header X-Size.
----------------------------
revision 1.5
date: 2009-10-26 01:56:46 -0700;  author: albinus;  state: Exp;  lines: +27 -11;  commitid: EQJ2OkiimqTov19u;
* tramp-imap.el (tramp-imap-file-name-handler-alist): Ignore
`dired-call-process'.
(tramp-imap-make-iht): Use `user' and `ssl' with `imap-hash-make'.
----------------------------
revision 1.4
date: 2009-09-28 04:42:15 -0700;  author: albinus;  state: Exp;  lines: +49 -18;  commitid: 0bHNsiWPKMjYjr5u;
* tramp-imap.el (tramp-imap-file-name-handler-alist): Add handlers
for `directory-files-and-attributes' and `file-local-copy'.
(tramp-imap-handle-directory-files-and-attributes)
(tramp-imap-handle-file-local-copy): New defuns.
----------------------------
revision 1.3
date: 2009-09-27 12:15:37 -0700;  author: albinus;  state: Exp;  lines: +187 -20;  commitid: 472lgdzPLnsuRl5u;
*** empty log message ***
----------------------------
revision 1.2
date: 2009-09-27 08:50:11 -0700;  author: tzz;  state: Exp;  lines: +14 -14;  commitid: Hyj6khcNYC71Jk5u;
(tramp-imap-file-name-handler-alist): Remove
file-local-copy handler.
----------------------------
revision 1.1
date: 2009-09-24 01:28:47 -0700;  author: albinus;  state: Exp;  commitid: U36D9K6Qb2kznU4u;
* tramp-imap.el: New package.
----------------------------
revision 1.18.2.1
date: 2011-01-24 02:09:41 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-sh.el,v
Working file: lisp/tramp-sh.el
head: 2.21
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.13
keyword substitution: kv
total revisions: 21;	selected revisions: 21
description:
----------------------------
revision 2.21
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +3 -6;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.20
date: 2011-01-10 12:49:37 -0800;  author: albinus;  state: Exp;  lines: +35 -11;  commitid: ryuo6RZcxcEWgL3v;
* tramp-sh.el (tramp-find-inline-compress)
(tramp-get-inline-coding): Quote command after pipe symbol for
local calls under W32.  (Bug#6784)
----------------------------
revision 2.19
date: 2010-12-31 11:52:57 -0800;  author: albinus;  state: Exp;  lines: +4 -2;  commitid: qIe661QsRJjrht2v;
* tramp-sh.el (tramp-methods): Add recursive options to "scpc" and
"scpx".
----------------------------
revision 2.18
date: 2010-12-30 00:57:35 -0800;  author: albinus;  state: Exp;  lines: +3 -0;  commitid: sJi0TOvcI16wGh2v;
* tramp.el (tramp-default-method-alist, tramp-default-user-alist)
(tramp-local-host-regexp, tramp-prefix-domain-format)
(tramp-prefix-domain-regexp): Set tramp-autoload cookie.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-sh.el:
* tramp-smb.el: Add tramp-autoload cookie for initialisation code
of `tramp-default-method-alist' and `tramp-default-user-alist'.
----------------------------
revision 2.17
date: 2010-12-27 02:53:36 -0800;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: ItfUDI8BtGbnqU1v;
* Makefile.in (tramp-loaddefs.el): Hnadle case on systems on which
the format of absolute pathes are different between its shell and
in emacsen, like MSYS.  Reported by Yosuke YAMADA
<sunasaji@gmail.com>.

* tramp.el (tramp-default-user-alist): Do not add "ssh" based
methods, otherwise ~/.ssh/config would be ignored.
----------------------------
revision 2.16
date: 2010-12-08 12:16:47 -0800;  author: albinus;  state: Exp;  lines: +59 -55;  commitid: 0k4sZ6GR3P5p9wZu;
* tramp.el (tramp-temp-buffer-file-name): Make it permanent-local.
(tramp-handle-insert-file-contents): Do not set permanent-local
property.
(tramp-action-password): Delete region, do not narrow.
(tramp-process-actions): Do not widen.

* tramp-sh.el (tramp-handle-start-file-process): Protect
buffer-modified value.  (Bug#7557)
----------------------------
revision 2.15
date: 2010-12-03 07:43:55 -0800;  author: albinus;  state: Exp;  lines: +16 -2;  commitid: gi6hxSRo3KONNQYu;
* tramp-sh.el (tramp-methods): Add "ksu".
(tramp-default-user-alist): Add "ksu".  Use `regexp-opt' for
method list.
----------------------------
revision 2.14
date: 2010-12-01 09:42:17 -0800;  author: albinus;  state: Exp;  lines: +62 -64;  commitid: Uh2KDiGC5DnnwBYu;
* tramp.el (tramp-debug-message): Extend function exclude list.

* tramp-sh.el (tramp-methods): Add recursive options to "pscp" and
"psftp".  Exchange "%k" marker with options.
(tramp-do-copy-or-rename-file, tramp-sh-handle-file-local-copy):
Compute size of link target.
(tramp-do-copy-or-rename-file-out-of-band). Move setting of
`tramp-current-*' up due to gateway methods.  Optimze computing of
copy arguments.  Use `tramp-get-connection-name' and
`tramp-get-connection-buffer'.  Improve debug messages.

* tramp.el (tramp-default-method-alist)
(tramp-default-user-alist, tramp-default-proxies-alist): Adapt
custom options type.  (Bug#7445)
(tramp-local-host-regexp): Add "localhost6".
(tramp-file-name-port): Check also for `tramp-default-port'.
(tramp-get-connection-name): New defun.
(tramp-get-connection-process): Use it.
(tramp-drop-volume-letter): Fix doc string.

* tramp-cmds.el: Remove solved todo item.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-smb.el: Fix regexps added to `tramp-default-method-alist'
and `tramp-default-user-alist', respectively.

* tramp-gw.el (tramp-gw-open-connection): Use
`tramp-get-connection-name' and `tramp-get-connection-buffer'.

* tramp-imap.el (tramp-imap-make-iht): Use just
`tramp-file-name-port'.

* tramp-sh.el (tramp-compute-multi-hops): Remove port
determination.
(tramp-maybe-open-connection): Use `tramp-get-connection-name'.
----------------------------
revision 2.13
date: 2010-11-20 03:09:57 -0800;  author: albinus;  state: Exp;  lines: +10 -14;  commitid: OEjCifFu53ZGH9Xu;
*** empty log message ***
----------------------------
revision 2.12
date: 2010-11-13 02:27:32 -0800;  author: albinus;  state: Exp;  lines: +19 -21;  commitid: JAP0ddpM79e3HfWu;
* tramp-compat.el (tramp-compat-line-beginning-position)
(tramp-compat-line-end-position): Remove them.

* tramp.el (tramp-parse-rhosts-group, tramp-parse-shosts-group)
(tramp-parse-sconfig-group, tramp-parse-passwd-group)
(tramp-parse-netrc-group, tramp-parse-putty-group):
* tramp-cmds.el (tramp-append-tramp-buffers):
* tramp-sh.el (tramp-do-file-attributes-with-ls)
(tramp-sh-handle-file-selinux-context)
(tramp-sh-handle-file-name-all-completions)
(tramp-sh-handle-insert-directory)
(tramp-sh-handle-expand-file-name, tramp-find-executable)
(tramp-wait-for-output, tramp-send-command-and-read)
* tramp-smb.el (tramp-smb-read-file-entry)
(tramp-smb-get-cifs-capabilities)
* tramp-util.el (tramp-PC-expand-many-files): Use `point-at-eol'.

* tramp-sh.el (tramp-sh-handle-insert-directory) Use `point-at-bol'.
(tramp-remote-coding-commands): Add an alternative using "base64
-d -i".  This is needed for older base64 versions from GNU
coreutils.  Reported by Klaus Reichl
<Klaus.Reichl@thalesgroup.com>.
----------------------------
revision 2.11
date: 2010-10-21 00:55:10 -0700;  author: albinus;  state: Exp;  lines: +46 -43;  commitid: i0pDrGvHdPkOAhTu;
* tramp-sh.el (tramp-get-inline-coding): Return `nil' in case of
errors.
----------------------------
revision 2.10
date: 2010-10-20 04:59:13 -0700;  author: albinus;  state: Exp;  lines: +4 -11;  commitid: JwxdUsG93nWwYaTu;
* tramp-sh.el (tramp-send-command): Simplify last patch, and
restrict it to here documents.
----------------------------
revision 2.9
date: 2010-10-19 08:36:03 -0700;  author: albinus;  state: Exp;  lines: +14 -2;  commitid: EO46b7cha4XOc4Tu;
* tramp-sh.el (tramp-send-command): Unset $PS1 in a subshell, in order not to
get several prompts when there are commands separated by ";".
----------------------------
revision 2.8
date: 2010-10-19 02:43:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: RFxKW3Ci3a4Rf2Tu;
* tramp-sh.el (tramp-do-file-attributes-with-stat)
(tramp-do-directory-files-and-attributes-with-stat): Use "e0" in
order to make stat results a float.  Patch by Andreas Schwab
<schwab@linux-m68k.org>.
----------------------------
revision 2.7
date: 2010-10-15 05:04:41 -0700;  author: albinus;  state: Exp;  lines: +10 -3;  commitid: d6iHSioI7vGmaxSu;
* tramp-sh.el (tramp-open-connection-setup-interactive-shell):
Suppress expansion of tabs to spaces.
----------------------------
revision 2.6
date: 2010-10-06 05:13:39 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: Kj518gRSVI5nvnRu;
* tramp-sh.el (tramp-sh-file-name-handler-alist): Use
`tramp-handle-find-backup-file-name'.
----------------------------
revision 2.5
date: 2010-10-05 07:06:01 -0700;  author: albinus;  state: Exp;  lines: +5 -5;  commitid: Yfgg9L8idLcN9gRu;
* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-handle-file-exists-p, tramp-handle-file-newer-than-file-p):
New defuns, taken from tramp-smb.el.
(tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag): Removed.

* tramp-compat.el (top): Do not check for byte-compiler objects.
(tramp-compat-coding-system-change-eol-conversion)
(tramp-compat-set-process-query-on-exit-flag): New defuns, taken
from tramp.el.

* tramp-gvfs.el:
* tramp-gw.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.

* tramp-imap.el (tramp-imap-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-imap-handle-file-exists-p)
(tramp-imap-handle-file-executable-p)
(tramp-imap-handle-file-readable-p)
(tramp-imap-handle-directory-files-and-attributes)
(tramp-imap-handle-file-newer-than-file-p): Removed.

* tramp-sh.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag' and
`tramp-coding-system-change-eol-conversion' by
`tramp-compat-coding-system-change-eol-conversion'.

* tramp-smb.el (tramp-smb-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-newer-than-file-p): Removed.
(tramp-smb-maybe-open-connection): Replace
`tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.
----------------------------
revision 2.4
date: 2010-10-04 12:34:57 -0700;  author: albinus;  state: Exp;  lines: +89 -557;  commitid: n7rp0IAxnvWy0aRu;
Continue reorganization of load dependencies.  (Bug#7156)

* tramp.el (tramp-handle-file-local-copy-hook)
(tramp-delete-temp-file-function): Move down.
(tramp-exists-file-name-handler): Move up.
(tramp-register-file-name-handlers): Simplify autoload.
(tramp-handle-write-region-hook, tramp-handle-directory-file-name)
(tramp-handle-directory-files, tramp-handle-dired-uncache)
(tramp-handle-file-modes, tramp-handle-file-name-as-directory)
(tramp-handle-file-name-completion)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-regular-p)
(tramp-handle-file-remote-p, tramp-handle-file-symlink-p)
(tramp-handle-find-backup-file-name)
(tramp-handle-insert-file-contents, tramp-handle-load)
(tramp-handle-substitute-in-file-name)
(tramp-handle-unhandled-file-name-directory)
(tramp-mode-string-to-int, tramp-local-host-p)
(tramp-make-tramp-temp-file): Moved from tramp-sh.el.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Do not require 'tramp-sh.

* tramp-sh.el (all): Move several objects to tramp.el, see there.
Rename `tramp-handle-*' to `tramp-sh-handle-*'.

* tramp-vc.el (tramp-vc-user-login-name, tramp-vc-file-owner): Use
`file-attributes'.
----------------------------
revision 2.3
date: 2010-10-02 04:51:46 -0700;  author: albinus;  state: Exp;  lines: +29 -39;  commitid: VuxAzfL6W3iEvRQu;
* tramp.el (tramp-completion-reread-directory-timeout): Fix
docstring.

* tramp-cache.el (tramp-cache-inhibit-cache): Remove.
(tramp-get-file-property): Replace `tramp-cache-inhibit-cache' by
`remote-file-name-inhibit-cache'.  Check also for an integer
value.  Add/increase counter when `tramp-verbose' >= 10.
(tramp-set-file-property): Add/increase counter when
`tramp-verbose' >= 10.

* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-cleanup-all-buffers): Set tramp-autoload cookie.
(tramp-bug): Set tramp-autoload cookie.  Report all interned
tramp-* variables.  Report also `remote-file-name-inhibit-cache'.
(tramp-reporter-dump-variable): Fix docstring.  Mask non-7bit
characters only in strings.

* tramp-compat.el (remote-file-name-inhibit-cache): Define due to
backward compatibility.

* tramp-sh.el (tramp-handle-verify-visited-file-modtime)
(tramp-handle-file-name-all-completions)
(tramp-handle-vc-registered): Use
`remote-file-name-inhibit-cache'.
(tramp-open-connection-setup-interactive-shell): Call
`tramp-cleanup-connection' directly.
----------------------------
revision 2.2
date: 2010-09-15 13:14:11 -0700;  author: albinus;  state: Exp;  lines: +8 -5;  commitid: cEIrA9vZbWCTPIOu;
Ensure XEmacs compatibility.

* Makefile.in (tramp-loaddefs.el): Adapt `autoload-trim-file-name'
and feature name.
(distclean): Remove trampver.el, it is handled in the upper Makefile.

* tramp-compat.el (tramp-compat-with-temp-message)
(tramp-compat-font-lock-add-keywords, tramp-compat-process-get)
(tramp-compat-process-put): New defuns.

* tramp.el (top):
* tramp-gvfs.el (top):
* tramp-cache.el (top): Use `tramp-compat-font-lock-add-keywords'.

* tramp.el (tramp-progress-reporter-update): Use `tramp-compat-funcall.

* tramp.el (tramp-process-actions):
* tramp-gvfs.el (tramp-handle-vc-registered):
* tramp-sh.el (tramp-gvfs-handler-askquestion)
(tramp-get-remote-stat, tramp-get-remote-readlink): Use
`tramp-compat-with-temp-message'.

* tramp-sh.el (top): Require 'cl.
(tramp-handle-start-file-process): Use `tramp-compat-process-get'.
(tramp-open-connection-setup-interactive-shell): Use
`tramp-compat-process-put'.

* tramp-util.el (top): Require 'tramp-sh.
----------------------------
revision 2.1
date: 2010-09-13 06:18:45 -0700;  author: albinus;  state: Exp;  commitid: hctSFHPfw5XxBqOu;
Major code cleanup.  Split tramp.el into tramp.el and tramp-sh.el.

* Makefile.in (LISP_FILES): Remove tramp-fish.el.  Add tramp-sh.el.

* tramp.el (top): Don't show loading message.  Require just
'tramp-compat, everything else is required there.  Use
`ignore-errors' where appropriate.
(tramp-inline-compress-start-size, tramp-copy-size-limit)
(tramp-terminal-type, tramp-end-of-output)
(tramp-initial-end-of-output, tramp-completion-function-alist-rsh)
(tramp-completion-function-alist-ssh)
(tramp-completion-function-alist-telnet)
(tramp-completion-function-alist-su)
(tramp-completion-function-alist-putty, tramp-remote-path)
(tramp-remote-process-environment, tramp-sh-extra-args)
(tramp-actions-before-shell, tramp-uudecode)
(tramp-perl-file-truename, tramp-perl-file-name-all-completions)
(tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode)
(tramp-vc-registered-read-file-names, tramp-file-mode-type-map)
(tramp-file-name-handler-alist, tramp-make-tramp-temp-file)
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-as-directory)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-exists-p, tramp-handle-file-attributes)
(tramp-do-file-attributes-with-ls)
(tramp-do-file-attributes-with-perl)
(tramp-do-file-attributes-with-stat)
(tramp-handle-set-visited-file-modtime)
(tramp-handle-verify-visited-file-modtime)
(tramp-handle-set-file-modes, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-remote-selinux-p)
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-newer-than-file-p, tramp-handle-file-modes)
(tramp-handle-file-directory-p, tramp-handle-file-regular-p)
(tramp-handle-file-symlink-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p)
(tramp-handle-directory-file-name, tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-do-directory-files-and-attributes-with-perl)
(tramp-do-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions)
(tramp-handle-file-name-completion, tramp-handle-add-name-to-file)
(tramp-handle-copy-file, tramp-handle-copy-directory)
(tramp-handle-rename-file, tramp-do-copy-or-rename-file)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-dired-compress-file, tramp-handle-dired-uncache)
(tramp-handle-insert-directory)
(tramp-handle-unhandled-file-name-directory)
(tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-executable-find, tramp-process-sentinel)
(tramp-handle-start-file-process, tramp-handle-process-file)
(tramp-handle-call-process-region, tramp-handle-shell-command)
(tramp-handle-file-local-copy, tramp-handle-file-remote-p)
(tramp-handle-insert-file-contents)
(tramp-handle-insert-file-contents-literally)
(tramp-handle-find-backup-file-name)
(tramp-handle-make-auto-save-file-name, tramp-handle-write-region)
(tramp-vc-registered-file-names, tramp-handle-vc-registered)
(tramp-sh-file-name-handler, tramp-vc-file-name-handler)
(tramp-maybe-send-script, tramp-set-auto-save, tramp-run-test)
(tramp-run-test2, tramp-find-executable, tramp-set-remote-path)
(tramp-find-file-exists-command, tramp-open-shell)
(tramp-find-shell, tramp-barf-if-no-shell-prompt)
(tramp-open-connection-setup-interactive-shell)
(tramp-local-coding-commands, tramp-remote-coding-commands)
(tramp-find-inline-encoding, tramp-call-local-coding-command)
(tramp-inline-compress-commands, tramp-find-inline-compress)
(tramp-compute-multi-hops, tramp-maybe-open-connection)
(tramp-send-command , tramp-wait-for-output)
(tramp-send-command-and-check, tramp-barf-unless-okay)
(tramp-send-command-and-read, tramp-mode-string-to-int)
(tramp-convert-file-attributes, tramp-check-cached-permissions)
(tramp-file-mode-from-int, tramp-file-mode-permissions)
(tramp-shell-case-fold, tramp-make-copy-program-file-name)
(tramp-method-out-of-band-p, tramp-local-host-p)
(tramp-get-remote-path, tramp-get-remote-tmpdir)
(tramp-get-ls-command, tramp-get-ls-command-with-dired)
(tramp-get-test-command, tramp-get-test-nt-command)
(tramp-get-file-exists-command, tramp-get-remote-ln)
(tramp-get-remote-perl, tramp-get-remote-stat)
(tramp-get-remote-readlink, tramp-get-remote-trash)
(tramp-get-remote-id, tramp-get-remote-uid, tramp-get-remote-gid)
(tramp-get-local-uid, tramp-get-local-gid)
(tramp-get-inline-compress, tramp-get-inline-coding, ): Move to
tramp-sh.el.
(tramp-methods, tramp-default-method-alist)
(tramp-default-user-alist, tramp-foreign-file-name-handler-alist):
Move initialization to tramp-sh.el.
(tramp-temp-name-prefix): Make it a defconst.
(tramp-dissect-file-name): Don't check anymore for multi-hop
methods.
(tramp-debug-outline-regexp): Add a docstring.
(tramp-debug-outline-level): Renamed from `tramp-outline-level'.
(tramp-get-debug-buffer): Use it.

* tramp-cache.el (top): Set tramp-autoload cookie for
initialization forms.
(tramp-set-connection-property): Don't protect `tramp-message'
call, it isn't necessary any longer.
(tramp-dump-connection-properties): Use `ignore-errors'.

* tramp-compat.el (top): Require 'advice, 'format-spec,
'password-cache and 'auth-source.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Require 'tramp-sh.

* tramp-gw.el (tramp-gw-open-network-stream): Use `ignore-errors'.

* tramp-sh.el: New file, derived from tramp.el.
(top): Initialize `tramp-methods', `tramp-default-method-alist',
`tramp-default-user-alist', tramp-foreign-file-name-handler-alist.
Remove "scp1_old", "scp2_old", "ssh1_old", "ssh2_old".  Use
`ignore-errors' where appropriate.
(tramp-sh-file-name-handler-alist): Renamed from
`tramp-file-name-handler-alist'.
(tramp-send-command-and-check): Return t or nil.  Remove all
`zerop' checks, where called.
(tramp-handle-set-file-modes)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-delete-directory, tramp-handle-delete-file)
(tramp-maybe-send-script, ): Use `tramp-barf-unless-okay'.
(tramp-sh-file-name-handler, tramp-send-command-and-check)
(tramp-get-remote-ln): Set tramp-autoload cookie.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-smb.el,v
Working file: lisp/tramp-smb.el
head: 2.136
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.132
	branch-2-1-stable: 2.126.0.2
	branchpoint-2-1-stable: 2.126
	V-2-1-19: 2.126
	V-2-1-18: 2.120
	V-2-1-17: 2.116
	V-2-1-16: 2.103
	V-2-1-15: 2.101
	V-2-1-14: 2.97
	V-2-1-13: 2.93
	V-2-0-57: 2.29.2.16
	V-2-1-12: 2.91
	V-2-1-11: 2.88
	V-2-1-10: 2.83
	V-2-0-56: 2.29.2.14
	V-2-1-9: 2.77
	V-2-1-8: 2.75
	V-2-0-55: 2.29.2.12
	V-2-1-7: 2.60
	V-2-0-54: 2.29.2.12
	V-2-1-6: 2.60
	V-2-0-53: 2.29.2.12
	V-2-0-52: 2.29.2.11
	V-2-1-5: 2.55
	V-2-1-4: 2.53
	V-2-0-51: 2.29.2.11
	V-2-0-50: 2.29.2.11
	V-2-0-49: 2.29.2.8
	V-2-0-48: 2.29.2.8
	V-2-1-3: 2.42
	V-2-0-47: 2.29.2.5
	V-2-0-46: 2.29.2.4
	V-2-0-45: 2.29.2.3
	V-2-1-2: 2.36
	V-2-0-44: 2.29.2.2
	V-2-1-1: 2.35
	V-2-0-43: 2.29.2.2
	V-2-0-42: 2.29.2.1
	V-2-0-41: 2.29.2.1
	V-2-1-0: 2.29
	branch-2-0-stable: 2.29.0.2
	branchpoint-2-0-stable: 2.29
	V-2-0-40: 2.29
	V-2-0-39: 2.27
	V-2-0-38: 2.22
	V-2-0-37: 2.21
	V-2-0-36: 2.20
	V-2-0-35: 2.20
	V-2-0-34: 2.20
	V-2-0-33: 2.20
	V-2-0-32: 2.20
	V-2-0-30: 2.19
	V-2-0-29: 2.18
	V-2-0-28: 2.14
	V-2-0-27: 2.12
	V-2-0-26: 2.11
keyword substitution: kv
total revisions: 153;	selected revisions: 153
description:
----------------------------
revision 2.136
date: 2011-01-26 01:43:33 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.135
date: 2011-01-19 03:09:00 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 2.134
date: 2010-12-30 00:57:35 -0800;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: sJi0TOvcI16wGh2v;
* tramp.el (tramp-default-method-alist, tramp-default-user-alist)
(tramp-local-host-regexp, tramp-prefix-domain-format)
(tramp-prefix-domain-regexp): Set tramp-autoload cookie.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-sh.el:
* tramp-smb.el: Add tramp-autoload cookie for initialisation code
of `tramp-default-method-alist' and `tramp-default-user-alist'.
----------------------------
revision 2.133
date: 2010-12-01 09:42:17 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: Uh2KDiGC5DnnwBYu;
* tramp.el (tramp-debug-message): Extend function exclude list.

* tramp-sh.el (tramp-methods): Add recursive options to "pscp" and
"psftp".  Exchange "%k" marker with options.
(tramp-do-copy-or-rename-file, tramp-sh-handle-file-local-copy):
Compute size of link target.
(tramp-do-copy-or-rename-file-out-of-band). Move setting of
`tramp-current-*' up due to gateway methods.  Optimze computing of
copy arguments.  Use `tramp-get-connection-name' and
`tramp-get-connection-buffer'.  Improve debug messages.

* tramp.el (tramp-default-method-alist)
(tramp-default-user-alist, tramp-default-proxies-alist): Adapt
custom options type.  (Bug#7445)
(tramp-local-host-regexp): Add "localhost6".
(tramp-file-name-port): Check also for `tramp-default-port'.
(tramp-get-connection-name): New defun.
(tramp-get-connection-process): Use it.
(tramp-drop-volume-letter): Fix doc string.

* tramp-cmds.el: Remove solved todo item.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-smb.el: Fix regexps added to `tramp-default-method-alist'
and `tramp-default-user-alist', respectively.

* tramp-gw.el (tramp-gw-open-connection): Use
`tramp-get-connection-name' and `tramp-get-connection-buffer'.

* tramp-imap.el (tramp-imap-make-iht): Use just
`tramp-file-name-port'.

* tramp-sh.el (tramp-compute-multi-hops): Remove port
determination.
(tramp-maybe-open-connection): Use `tramp-get-connection-name'.
----------------------------
revision 2.132
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 2.131
date: 2010-11-13 02:27:32 -0800;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: JAP0ddpM79e3HfWu;
* tramp-compat.el (tramp-compat-line-beginning-position)
(tramp-compat-line-end-position): Remove them.

* tramp.el (tramp-parse-rhosts-group, tramp-parse-shosts-group)
(tramp-parse-sconfig-group, tramp-parse-passwd-group)
(tramp-parse-netrc-group, tramp-parse-putty-group):
* tramp-cmds.el (tramp-append-tramp-buffers):
* tramp-sh.el (tramp-do-file-attributes-with-ls)
(tramp-sh-handle-file-selinux-context)
(tramp-sh-handle-file-name-all-completions)
(tramp-sh-handle-insert-directory)
(tramp-sh-handle-expand-file-name, tramp-find-executable)
(tramp-wait-for-output, tramp-send-command-and-read)
* tramp-smb.el (tramp-smb-read-file-entry)
(tramp-smb-get-cifs-capabilities)
* tramp-util.el (tramp-PC-expand-many-files): Use `point-at-eol'.

* tramp-sh.el (tramp-sh-handle-insert-directory) Use `point-at-bol'.
(tramp-remote-coding-commands): Add an alternative using "base64
-d -i".  This is needed for older base64 versions from GNU
coreutils.  Reported by Klaus Reichl
<Klaus.Reichl@thalesgroup.com>.
----------------------------
revision 2.130
date: 2010-10-05 07:06:01 -0700;  author: albinus;  state: Exp;  lines: +6 -27;  commitid: Yfgg9L8idLcN9gRu;
* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-handle-file-exists-p, tramp-handle-file-newer-than-file-p):
New defuns, taken from tramp-smb.el.
(tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag): Removed.

* tramp-compat.el (top): Do not check for byte-compiler objects.
(tramp-compat-coding-system-change-eol-conversion)
(tramp-compat-set-process-query-on-exit-flag): New defuns, taken
from tramp.el.

* tramp-gvfs.el:
* tramp-gw.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.

* tramp-imap.el (tramp-imap-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-imap-handle-file-exists-p)
(tramp-imap-handle-file-executable-p)
(tramp-imap-handle-file-readable-p)
(tramp-imap-handle-directory-files-and-attributes)
(tramp-imap-handle-file-newer-than-file-p): Removed.

* tramp-sh.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag' and
`tramp-coding-system-change-eol-conversion' by
`tramp-compat-coding-system-change-eol-conversion'.

* tramp-smb.el (tramp-smb-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-newer-than-file-p): Removed.
(tramp-smb-maybe-open-connection): Replace
`tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.
----------------------------
revision 2.129
date: 2010-10-04 12:34:57 -0700;  author: albinus;  state: Exp;  lines: +0 -4;  commitid: n7rp0IAxnvWy0aRu;
Continue reorganization of load dependencies.  (Bug#7156)

* tramp.el (tramp-handle-file-local-copy-hook)
(tramp-delete-temp-file-function): Move down.
(tramp-exists-file-name-handler): Move up.
(tramp-register-file-name-handlers): Simplify autoload.
(tramp-handle-write-region-hook, tramp-handle-directory-file-name)
(tramp-handle-directory-files, tramp-handle-dired-uncache)
(tramp-handle-file-modes, tramp-handle-file-name-as-directory)
(tramp-handle-file-name-completion)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-regular-p)
(tramp-handle-file-remote-p, tramp-handle-file-symlink-p)
(tramp-handle-find-backup-file-name)
(tramp-handle-insert-file-contents, tramp-handle-load)
(tramp-handle-substitute-in-file-name)
(tramp-handle-unhandled-file-name-directory)
(tramp-mode-string-to-int, tramp-local-host-p)
(tramp-make-tramp-temp-file): Moved from tramp-sh.el.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Do not require 'tramp-sh.

* tramp-sh.el (all): Move several objects to tramp.el, see there.
Rename `tramp-handle-*' to `tramp-sh-handle-*'.

* tramp-vc.el (tramp-vc-user-login-name, tramp-vc-file-owner): Use
`file-attributes'.
----------------------------
revision 2.128
date: 2010-09-13 06:18:45 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: hctSFHPfw5XxBqOu;
Major code cleanup.  Split tramp.el into tramp.el and tramp-sh.el.

* Makefile.in (LISP_FILES): Remove tramp-fish.el.  Add tramp-sh.el.

* tramp.el (top): Don't show loading message.  Require just
'tramp-compat, everything else is required there.  Use
`ignore-errors' where appropriate.
(tramp-inline-compress-start-size, tramp-copy-size-limit)
(tramp-terminal-type, tramp-end-of-output)
(tramp-initial-end-of-output, tramp-completion-function-alist-rsh)
(tramp-completion-function-alist-ssh)
(tramp-completion-function-alist-telnet)
(tramp-completion-function-alist-su)
(tramp-completion-function-alist-putty, tramp-remote-path)
(tramp-remote-process-environment, tramp-sh-extra-args)
(tramp-actions-before-shell, tramp-uudecode)
(tramp-perl-file-truename, tramp-perl-file-name-all-completions)
(tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode)
(tramp-vc-registered-read-file-names, tramp-file-mode-type-map)
(tramp-file-name-handler-alist, tramp-make-tramp-temp-file)
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-as-directory)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-exists-p, tramp-handle-file-attributes)
(tramp-do-file-attributes-with-ls)
(tramp-do-file-attributes-with-perl)
(tramp-do-file-attributes-with-stat)
(tramp-handle-set-visited-file-modtime)
(tramp-handle-verify-visited-file-modtime)
(tramp-handle-set-file-modes, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-remote-selinux-p)
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-newer-than-file-p, tramp-handle-file-modes)
(tramp-handle-file-directory-p, tramp-handle-file-regular-p)
(tramp-handle-file-symlink-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p)
(tramp-handle-directory-file-name, tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-do-directory-files-and-attributes-with-perl)
(tramp-do-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions)
(tramp-handle-file-name-completion, tramp-handle-add-name-to-file)
(tramp-handle-copy-file, tramp-handle-copy-directory)
(tramp-handle-rename-file, tramp-do-copy-or-rename-file)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-dired-compress-file, tramp-handle-dired-uncache)
(tramp-handle-insert-directory)
(tramp-handle-unhandled-file-name-directory)
(tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-executable-find, tramp-process-sentinel)
(tramp-handle-start-file-process, tramp-handle-process-file)
(tramp-handle-call-process-region, tramp-handle-shell-command)
(tramp-handle-file-local-copy, tramp-handle-file-remote-p)
(tramp-handle-insert-file-contents)
(tramp-handle-insert-file-contents-literally)
(tramp-handle-find-backup-file-name)
(tramp-handle-make-auto-save-file-name, tramp-handle-write-region)
(tramp-vc-registered-file-names, tramp-handle-vc-registered)
(tramp-sh-file-name-handler, tramp-vc-file-name-handler)
(tramp-maybe-send-script, tramp-set-auto-save, tramp-run-test)
(tramp-run-test2, tramp-find-executable, tramp-set-remote-path)
(tramp-find-file-exists-command, tramp-open-shell)
(tramp-find-shell, tramp-barf-if-no-shell-prompt)
(tramp-open-connection-setup-interactive-shell)
(tramp-local-coding-commands, tramp-remote-coding-commands)
(tramp-find-inline-encoding, tramp-call-local-coding-command)
(tramp-inline-compress-commands, tramp-find-inline-compress)
(tramp-compute-multi-hops, tramp-maybe-open-connection)
(tramp-send-command , tramp-wait-for-output)
(tramp-send-command-and-check, tramp-barf-unless-okay)
(tramp-send-command-and-read, tramp-mode-string-to-int)
(tramp-convert-file-attributes, tramp-check-cached-permissions)
(tramp-file-mode-from-int, tramp-file-mode-permissions)
(tramp-shell-case-fold, tramp-make-copy-program-file-name)
(tramp-method-out-of-band-p, tramp-local-host-p)
(tramp-get-remote-path, tramp-get-remote-tmpdir)
(tramp-get-ls-command, tramp-get-ls-command-with-dired)
(tramp-get-test-command, tramp-get-test-nt-command)
(tramp-get-file-exists-command, tramp-get-remote-ln)
(tramp-get-remote-perl, tramp-get-remote-stat)
(tramp-get-remote-readlink, tramp-get-remote-trash)
(tramp-get-remote-id, tramp-get-remote-uid, tramp-get-remote-gid)
(tramp-get-local-uid, tramp-get-local-gid)
(tramp-get-inline-compress, tramp-get-inline-coding, ): Move to
tramp-sh.el.
(tramp-methods, tramp-default-method-alist)
(tramp-default-user-alist, tramp-foreign-file-name-handler-alist):
Move initialization to tramp-sh.el.
(tramp-temp-name-prefix): Make it a defconst.
(tramp-dissect-file-name): Don't check anymore for multi-hop
methods.
(tramp-debug-outline-regexp): Add a docstring.
(tramp-debug-outline-level): Renamed from `tramp-outline-level'.
(tramp-get-debug-buffer): Use it.

* tramp-cache.el (top): Set tramp-autoload cookie for
initialization forms.
(tramp-set-connection-property): Don't protect `tramp-message'
call, it isn't necessary any longer.
(tramp-dump-connection-properties): Use `ignore-errors'.

* tramp-compat.el (top): Require 'advice, 'format-spec,
'password-cache and 'auth-source.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Require 'tramp-sh.

* tramp-gw.el (tramp-gw-open-network-stream): Use `ignore-errors'.

* tramp-sh.el: New file, derived from tramp.el.
(top): Initialize `tramp-methods', `tramp-default-method-alist',
`tramp-default-user-alist', tramp-foreign-file-name-handler-alist.
Remove "scp1_old", "scp2_old", "ssh1_old", "ssh2_old".  Use
`ignore-errors' where appropriate.
(tramp-sh-file-name-handler-alist): Renamed from
`tramp-file-name-handler-alist'.
(tramp-send-command-and-check): Return t or nil.  Remove all
`zerop' checks, where called.
(tramp-handle-set-file-modes)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-delete-directory, tramp-handle-delete-file)
(tramp-maybe-send-script, ): Use `tramp-barf-unless-okay'.
(tramp-sh-file-name-handler, tramp-send-command-and-check)
(tramp-get-remote-ln): Set tramp-autoload cookie.
----------------------------
revision 2.127
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +19 -12;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.126
date: 2010-06-04 04:09:30 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 6aP3cpHZc3Lu8rBu;
branches:  2.126.2;
* tramp-gvfs.el (tramp-gvfs-handle-expand-file-name): Expand "~/".
(tramp-gvfs-handler-mounted-unmounted)
(tramp-gvfs-connection-mounted-p): Handle default-location.

* tramp-smb.el (tramp-smb-handle-delete-directory): Don't try to
move files to trash.
----------------------------
revision 2.125
date: 2010-05-28 06:13:25 -0700;  author: albinus;  state: Exp;  lines: +6 -6;  commitid: 2CLK9YLsWaoW2yAu;
* tramp-compat.el (tramp-compat-delete-file): Use `symbol-value'
for backward compatibility.

* tramp.el (tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use `delete-file'
instead of `tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-do-copy-or-rename-file): Use
`delete-file' instead of `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.
(tramp-smb-handle-delete-directory): Use 'trash as arg.

* tramp-vc.el (tramp-vc-user-login-name): Use `delete-file'
instead of `tramp-compat-delete-file'.
----------------------------
revision 2.124
date: 2010-05-28 03:31:51 -0700;  author: albinus;  state: Exp;  lines: +7 -7;  commitid: 8f88ImmlFUbw9xAu;
* tramp-compat.el (tramp-compat-delete-file): Rewrite to handle
new TRASH arg of `delete-file'.

* tramp.el (tramp-handle-delete-file): Change FORCE arg to TRASH.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use null TRASH arg in
tramp-compat-delete-file call.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-delete-file)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use null TRASH arg
in `tramp-compat-delete-file' call.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-imap.el (tramp-imap-handle-delete-file): Rename arg.
(tramp-imap-do-copy-or-rename-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use null TRASH arg in
tramp-compat-delete-file call.
(tramp-smb-handle-delete-directory): Use tramp-compat-delete-file.
(tramp-smb-handle-delete-file): Rename arg.
----------------------------
revision 2.123
date: 2010-05-13 13:38:53 -0700;  author: albinus;  state: Exp;  lines: +133 -135;  commitid: IdwA2HqyQHCuZEyu;
* tramp.el (with-progress-reporter): Create reporter object only
when the message would be displayed.  Handled nested calls.
(tramp-handle-load, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-maybe-send-script, tramp-find-shell): Use
`with-progress-reporter'.
(tramp-handle-dired-compress-file, tramp-maybe-open-connection):
Fix message text.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region, tramp-smb-maybe-open-connection):
Use `with-progress-reporter'.
----------------------------
revision 2.122
date: 2010-05-05 02:57:36 -0700;  author: albinus;  state: Exp;  lines: +6 -6;  commitid: 7vDVEtI34jXBHzxu;
Add FORCE argument to `delete-file'.

* tramp-compat.el (tramp-compat-delete-file): New defun.

* tramp.el (tramp-handle-delete-file): Add FORCE arg.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-file): Add FORCE arg.
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use
`tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Add FORCE arg.
(tramp-gvfs-handle-write-region): Use `tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-handle-delete-file): Add FORCE arg.
(tramp-imap-do-copy-or-rename-file): Use `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-delete-file): Add FORCE arg.
(tramp-smb-handle-copy-file, tramp-smb-handle-file-local-copy)
(tramp-smb-handle-rename-file, tramp-smb-handle-write-region): Use
`tramp-compat-delete-file'.

* tramp-vc.el (tramp-vc-user-login-name): Use
`tramp-compat-delete-file'.
----------------------------
revision 2.121
date: 2010-04-23 06:58:44 -0700;  author: albinus;  state: Exp;  lines: +5 -2;  commitid: jjKGKL8Sxss2q3wu;
Implement SELINUX backends.

* tramp.el (tramp-file-name-handler-alist): Add
`file-selinux-context' and `set-file-selinux-context'.
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context): New defuns.
(tramp-handle-copy-file, tramp-do-copy-or-rename-file): Handle
PRESERVE-SELINUX-CONTEXT.

* tramp-gvfs.el (tramp-gvfs-file-name-handler-alist): Add
`file-selinux-context' and `set-file-selinux-context'.
(tramp-gvfs-handle-file-selinux-context)
(tramp-gvfs-handle-set-file-selinux-context): New defuns.
(tramp-gvfs-handle-copy-file): Handle
PRESERVE-SELINUX-CONTEXT.

* tramp-fish.el (tramp-fish-handle-copy-file):
* tramp-imap.el (tramp-imap-handle-copy-file):
* tramp-smb.el (tramp-smb-handle-copy-file): Add
PRESERVE-SELINUX-CONTEXT.
----------------------------
revision 2.120
date: 2010-02-05 03:08:55 -0800;  author: albinus;  state: Exp;  lines: +8 -6;  commitid: O8Ov7vj9pqmmX8mu;
* tramp-imap.el (tramp-imap-handle-insert-directory):
* tramp-smb.el (tramp-smb-handle-insert-directory):
Handle also directories.  (Bug#5478)
----------------------------
revision 2.119
date: 2010-02-04 08:02:02 -0800;  author: albinus;  state: Exp;  lines: +8 -3;  commitid: MoSIFmVTXc10C2mu;
* tramp.el (tramp-handle-dired-uncache): When DIR is not a
directory, handle its directory component.
(tramp-handle-file-remote-p): Let-bind `tramp-verbose' to 3; this
function is called permanently and creates noise, otherwise.

* tramp-imap.el (tramp-imap-handle-insert-directory):
* tramp-smb.el (tramp-smb-handle-insert-directory):
Handle the case, FILENAME is not in `default-directory'.  (Bug#5478)
----------------------------
revision 2.118
date: 2010-01-23 02:53:31 -0800;  author: albinus;  state: Exp;  lines: +9 -1;  commitid: r6lhKUCOypTThtku;
* tramp.el (tramp-completion-function-alist)
(tramp-file-name-regexp, tramp-chunksize)
(tramp-local-coding-commands, tramp-remote-coding-commands):
Fix docstring.
(tramp-do-copy-or-rename-file-directly): Do not use
`tramp-handle-file-remote-p'.
(tramp-find-foreign-file-name-handler)
(tramp-advice-make-auto-save-file-name)
(tramp-set-auto-save-file-modes): Remove superfluous check for
`stringp'.  This is done inside `tramp-tramp-file-p'.

* tramp-fish.el (tramp-fish-handle-directory-files-and-attributes):
Do not use `tramp-fish-handle-file-attributes.

* tramp-smb.conf (tramp-smb-conf): New defcustom.
(tramp-smb-maybe-open-connection): Use it.
----------------------------
revision 2.117
date: 2010-01-14 20:52:28 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: zweSrHgxjm35ypju;
Add 2010 to copyright years.
----------------------------
revision 2.116
date: 2009-11-07 14:30:54 -0800;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: 3d7MnAEH2kTKCDau;
* tramp-smb.el (tramp-smb-handle-copy-directory)
(tramp-smb-handle-delete-directory ): Use
`tramp-compat-copy-directory' and `tramp-compat-delete-directory'.
----------------------------
revision 2.115
date: 2009-10-21 04:22:14 -0700;  author: albinus;  state: Exp;  lines: +109 -105;  commitid: sgFpdMhVzhsgto8u;
* tramp-smb.el (tramp-smb-get-stat-capability): New defun.
(tramp-smb-handle-file-attributes): Use it.
(tramp-smb-do-file-attributes-with-stat): Don't raise an error.
(tramp-smb-handle-insert-directory): Use `mapc' rather than
`mapcar'.  Use `tramp-smb-get-stat-capability'.  Add
`dired-filename' text properties.
(tramp-smb-get-cifs-capabilities): Apply `save-match-data'.
(tramp-smb-maybe-open-connection): Simplify check for smbclient
version.
----------------------------
revision 2.114
date: 2009-10-16 07:32:52 -0700;  author: albinus;  state: Exp;  lines: +15 -9;  commitid: wn6YgbIATv7DGL7u;
* tramp-smb.el (tramp-smb-version): New defvar.
(tramp-smb-maybe-open-connection): Use it, in order to avoid
repeated checks.
----------------------------
revision 2.113
date: 2009-10-15 06:06:26 -0700;  author: albinus;  state: Exp;  lines: +171 -164;  commitid: YP8ds6YK48mYeD7u;
* tramp-smb.el (tramp-smb-errors): Add error messages.
(tramp-smb-get-share, tramp-smb-get-localname): Use only VEC as
parameter.
(tramp-smb-handle-add-name-to-file)
(tramp-smb-handle-copy-directory, tramp-smb-handle-copy-file)
(tramp-smb-handle-delete-directory, tramp-smb-handle-delete-file)
(tramp-smb-handle-file-attributes)
(tramp-smb-do-file-attributes-with-stat)
(tramp-smb-handle-file-local-copy)
(tramp-smb-handle-insert-directory)
(tramp-smb-handle-make-directory)
(tramp-smb-handle-make-directory-internal)
(tramp-smb-handle-make-symbolic-link)
(tramp-smb-handle-rename-file, tramp-smb-handle-set-file-modes)
(tramp-smb-handle-write-region, tramp-smb-get-file-entries)
(tramp-smb-maybe-open-connection): Apply the changed parameters.
(tramp-smb-read-file-entry): Read Disk names in compressed format.
Handle long file names.
(tramp-smb-get-cifs-capabilities): Check, whether the connection
process is running.
(tramp-smb-maybe-open-connection): Trace "smbclient -V" command.
Read share names with "-g" option.
----------------------------
revision 2.112
date: 2009-10-13 13:09:28 -0700;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: PH9YhNcBxxt4Ep7u;
* tramp-smb.el (tramp-smb-do-file-attributes-with-stat): Let-bind `size'.
----------------------------
revision 2.111
date: 2009-10-11 08:03:42 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: Pn3ytvN97Si9187u;
Fix last change.
----------------------------
revision 2.110
date: 2009-10-11 06:48:21 -0700;  author: albinus;  state: Exp;  lines: +299 -102;  commitid: Key1f9mS8GLhB77u;
* tramp-smb.el (tramp-smb-errors): Add error messages.
(tramp-smb-file-name-handler-alist): Add handlers for
`add-name-to-file', `make-symbolic-link'.
(tramp-smb-handle-add-name-to-file)
(tramp-do-file-attributes-with-stat)
(tramp-smb-handle-make-symbolic-link)
(tramp-smb-get-cifs-capabilities): New defuns.
(tramp-smb-handle-copy-directory, tramp-smb-handle-copy-file)
(tramp-smb-handle-delete-directory, tramp-smb-handle-delete-file)
(tramp-smb-handle-file-local-copy)
(tramp-smb-handle-make-directory-internal)
(tramp-smb-handle-rename-file, tramp-smb-handle-write-region): The
file name syntax depends on cifs capabilities.
(tramp-smb-handle-file-attributes); Call
`tramp-do-file-attributes-with-stat' if possible.
(tramp-smb-handle-insert-directory): Use posix attributes if
possible.
(tramp-smb-handle-set-file-modes): It is applicable for posix
only.
----------------------------
revision 2.109
date: 2009-10-08 08:09:08 -0700;  author: albinus;  state: Exp;  lines: +65 -48;  commitid: PPXRCGM2jG719K6u;
* tramp-smb.el (tramp-smb-handle-copy-directory): Handle the case
both directories are remote.
(tramp-smb-handle-expand-file-name): Implement "~" expansion.
(tramp-smb-maybe-open-connection): Flush the cache only if
necessary.
----------------------------
revision 2.108
date: 2009-10-07 04:22:20 -0700;  author: albinus;  state: Exp;  lines: +183 -61;  commitid: A6bpUtL3BkGcVA6u;
* tramp-smb.el (tramp-smb-errors): Add error messages.
(tramp-smb-file-name-handler-alist): Add handler for
`copy-directory', `expand-file-name', `set-file-modes'.
(tramp-smb-handle-copy-directory)
(tramp-smb-handle-expand-file-name)
(tramp-smb-handle-set-file-modes): New defuns.
(tramp-smb-handle-copy-file): Handle KEPP-DATE.
(tramp-smb-handle-file-attributes): Simplify check for retrieving
entry.
(tramp-smb-handle-insert-directory): Don't flush the cache.
(tramp-smb-maybe-open-connection): Check for samba client and
server versions.
----------------------------
revision 2.107
date: 2009-10-02 05:35:29 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: OY4cVSS5IvrguX5u;
* tramp-smb.el (tramp-smb-handle-make-directory-internal): Flush
file properties of created directory.
----------------------------
revision 2.106
date: 2009-10-01 08:20:19 -0700;  author: albinus;  state: Exp;  lines: +11 -1;  commitid: Rt8RIEDgueUNqQ5u;
* tramp-smb.el (tramp-smb-errors): Add error message for
connection timeout.
(tramp-smb-handle-delete-directory): Handle optional parameter
RECURSIVE.
----------------------------
revision 2.105
date: 2009-09-28 23:55:11 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: WwDHsJ0BV9XuHx5u;
* tramp-smb.el (tramp-smb-handle-directory-files-and-attributes):
Use tramp-compat-file-attributes rather than nonexistent
tramp-compat-handle-file-attributes.
----------------------------
revision 2.104
date: 2009-09-28 04:43:51 -0700;  author: albinus;  state: Exp;  lines: +2 -4;  commitid: OmQT1ZqZZcmwkr5u;
* tramp-smb.el (tramp-smb-handle-directory-files-and-attributes):
Use `tramp-compat-handle-file-attributes'.
----------------------------
revision 2.103
date: 2009-06-17 07:52:19 -0700;  author: albinus;  state: Exp;  lines: +6 -4;  commitid: 0wm6yrdc2x3sGdSt;
* tramp-smb.el (tramp-smb-handle-file-local-copy): Cleanup in case
of error.
----------------------------
revision 2.102
date: 2009-06-06 16:13:58 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: eWiJf5vIJzrsOQQt;
* tramp-smb.el (tramp-smb-file-name-handler-alist): Add handler
for `dired-uncache'.
----------------------------
revision 2.101
date: 2009-01-05 23:45:15 -0800;  author: albinus;  state: Exp;  lines: +6 -4;  commitid: KKuM5d9alopMwmxt;
* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-rename-file): Delete temporary file in case of
quit.
----------------------------
revision 2.100
date: 2009-01-05 11:45:46 -0800;  author: albinus;  state: Exp;  lines: +16 -9;  commitid: lSVfMlIpWzGWxixt;
* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-rename-file, tramp-smb-handle-write-region):
Delete temporary file in case of error.
----------------------------
revision 2.99
date: 2009-01-03 06:32:49 -0800;  author: albinus;  state: Exp;  lines: +10 -17;  commitid: 7FQNNYJe3B0zS0xt;
* tramp-smb.el (top): Use `tramp-prefix-domain-regexp'.
(tramp-smb-maybe-open-connection): Use `tramp-file-name-*'
methods.
----------------------------
revision 2.98
date: 2008-11-16 06:11:12 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: AckKomGWWlROiQqt;
* tramp-smb.el (tramp-smb-file-name-handler-alist): Handle `file-name-as-directory'.
----------------------------
revision 2.97
date: 2008-07-26 11:07:49 -0700;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: B8hZzoaNhl7cflct;
* tramp-smb.el (tramp-smb-maybe-open-connection): Don't call
`tramp-process-sentinel'.
----------------------------
revision 2.96
date: 2008-06-22 01:25:25 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: lurFnbo4JDj97V7t;
* tramp-smb.el: Require 'cl when compiling.
----------------------------
revision 2.95
date: 2008-05-13 14:17:47 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: xrIWptY7ynYPFQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.94
date: 2008-04-10 13:25:03 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: PeglWHSeJhAvrBYs;
Fix up comment convention on the arch-tag lines.
----------------------------
revision 2.93
date: 2008-02-03 03:43:59 -0800;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: eJEKtNGhscSgIWPs;
* tramp-smb.el (tramp-smb-maybe-open-connection): Use
`tramp-process-sentinel' as process sentinel.
----------------------------
revision 2.92
date: 2008-01-04 14:32:30 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: gTXvBQYlNbReg9Ms;

* lisp/tramp.el (tramp-remote-process-environment): Add "LC_CTYPE=C".
Reported by Pete Forman <pete.forman@westerngeco.com>.
(tramp-perl-encode, tramp-perl-decode): Update copyrights.
----------------------------
revision 2.91
date: 2007-12-23 04:02:44 -0800;  author: albinus;  state: Exp;  lines: +13 -1;  commitid: dXm8BQWGRHrW9yKs;

Version 2.1.12 released.

* configure.ac: Bump version.

* lisp/tramp.el: New todo item.

* lisp/tramp-smb.el (tramp-smb-handle-insert-directory): Handle "-F"
switch.  Reported by Mark T. Kennedy <mkennedy@diamondbackcap.com>.
----------------------------
revision 2.90
date: 2007-11-07 12:34:52 -0800;  author: albinus;  state: Exp;  lines: +9 -4;  commitid: 6QaEdkjJBQXZsGEs;

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Don't expand
the remote connection identification.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Set also $PS2 and $PS3 when setting $PS1.  Check for shell echoing
before calling stty.

* lisp/tramp-cache.el (tramp-cache-print)
(tramp-dump-connection-properties): Fix docstring.
(tramp-list-connections): Renamed from
`tramp-cache-list-connections'.

* lisp/tramp-cmds.el (tramp-cleanup-connection): Apply it.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Don't expand the
remote connection identification when setting connection property.

* lisp/tramp-smb.el (tramp-smb-handle-substitute-in-file-name): "//"
substitutes only in the local filename part.

* texi/tramp.texi (Overview): Mention also the PuTTY integration under
Win32.  Remove paragraphs about Tramp's experimental status.
(Frequently Asked Questions): Add code example for highlighting
the mode line.
----------------------------
revision 2.89
date: 2007-10-27 06:50:43 -0700;  author: albinus;  state: Exp;  lines: +4 -3;  commitid: h3wsKiYvXLWtAeDs;

* lisp/tramp.el (tramp-wrong-passwd-regexp): Tune regexp.
(tramp-get-remote-tmpdir): New defun.
(tramp-make-tramp-temp-file): Use it.
(tramp-local-call-process): New defun.  Replace all calls of
`call-process' by this when appropriate.
(tramp-handle-write-region): Replace calls of `file-attributes' by
`tramp-compat-file-attributes'.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Make the first command a `tramp-send-command' call, with let-bind
of `tramp-end-of-output'.
(tramp-version, tramp-bug, tramp-reporter-dump-variable)
(tramp-load-report-modules, tramp-append-tramp-buffers): Move to
tramp-cmds.el.

* lisp/tramp-fish.el (tramp-fish-handle-copy-file)
(tramp-fish-do-copy-or-rename-file)
(tramp-fish-do-copy-or-rename-file-directly):
* lisp/tramp-smb.el (tramp-smb-handle-copy-file):
Add parameter PRESERVE-UID-GID.
----------------------------
revision 2.88
date: 2007-10-04 13:04:37 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: CaRN4HuMV0iBojAs;

* lisp/tramp.el (tramp-make-temp-file): Move to tramp-compat.el.
(tramp-do-copy-or-rename-file-directly): Handle tmpfile only in
the cond clauses where needed.
(tramp-handle-write-region): Rearrange code for proper handling of
tmpfile.

* lisp/tramp-compat.el (tramp-compat-make-temp-file): New defsubst.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el: Rename `tramp-make-temp-file' to
`tramp-compat-make-temp-file'.
----------------------------
revision 2.87
date: 2007-10-03 03:45:47 -0700;  author: albinus;  state: Exp;  lines: +13 -20;  commitid: T0jhSlYBL14Nk8As;

* lisp/tramp.el (top): Add tramp-compat to `tramp-unload-hook'.
(tramp-file-name-handler-alist): Add
`tramp-handle-insert-file-contents-literally'.  Neded for XEmacs.
(tramp-make-temp-file): Use `make-temp-name'. `make-temp-file',
used before, creates the file already, which is not desired.
(tramp-do-copy-or-rename-file-directly): Simplify handling of
temporary file.
(tramp-handle-insert-file-contents): Assign the result in the
short track case.
(tramp-handle-insert-file-contents-literally): New defun.
(tramp-completion-mode-p): Revert change from 2007-09-24.
Checking for `return' etc as last character is not sufficient, for
example in dired-mode when entering <g> (revert-buffer) or
<s> (dired-sort).

* lisp/tramp-compat.el (top): Add also compatibility code for loading
appropriate timer package.
(tramp-compat-copy-tree): Check for `subrp' and `symbol-file' in
order to avoid autoloading problems.

* lisp/tramp-efs-el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Move further compatibility code to
tramp-compat.el.

	* tramp-ftp.el (tramp-ftp-file-name-handler): Handle the case
	where the second parameter of `copy-file' or `rename-file' is a
	remote file but not via ftp.

	* tramp-util.el: Remove `tramp-minor-mode' and its declarations.
----------------------------
revision 2.86
date: 2007-09-30 09:32:29 -0700;  author: albinus;  state: Exp;  lines: +7 -9;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 2.85
date: 2007-09-20 22:11:04 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: xfwhuF69r0qaSyys;

* lisp/tramp.el (tramp-rfn-eshadow-overlay): New defvar.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay): New defuns.

* lisp/tramp-smb.el (tramp-smb-errors): Add error message for call
timeout.
----------------------------
revision 2.84
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.83
date: 2007-07-16 14:33:01 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: hlv4JiwKkWs8s2qs;

* lisp/tramp.el (tramp-handle-set-file-times): New defun.  Replaces
`tramp-touch'.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add entry for `set-file-times'.
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-out-of-band): Use `set-file-times'.
(tramp-handle-unhandled-file-name-directory): Rewrite.
(tramp-convert-file-attributes): Add error handling when inode is
extraordinary big.
(tramp-get-inode): Change parameter from FILE to VEC.

* lisp/tramp-fish.el (tramp-fish-file-name-handler-alist): Add entry
for `set-file-times'.  Rename `start-process' into
`start-file-process'.  Remove `call-process' entry.
(tramp-fish-handle-set-file-times): New defun.
(tramp-fish-handle-executable-find): Use `process-file'.
(tramp-fish-handle-process-file): New defun.  Replaces
`tramp-fish-handle-call-process'.
(tramp-fish-do-copy-or-rename-file-directly): Use
`set-file-times'.
(tramp-fish-get-file-entries): Change `tramp-get-inode' parameter.

* lisp/tramp-smb.el (tramp-smb-handle-file-attributes): Change
`tramp-get-inode' parameter.

* lisp/tramp-util.el (all): Change all checks to (fboundp
'start-file-process).
(set-file-times): Add a defalias if function does not exist.

* texi/tramp.texi (Frequently Asked Questions): Simplify recentf
example.
----------------------------
revision 2.82
date: 2007-07-01 22:09:51 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.81
date: 2007-07-01 11:31:35 -0700;  author: albinus;  state: Exp;  lines: +20 -4;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.80
date: 2007-06-20 13:26:39 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: 6Fqxls1tJZzgVGms;

* lisp/tramp.el:
* lisp/tramp-cache.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el: Use `expand-file-name' instead of `concat' where
appropriate.

* lisp/tramp.el (tramp-action-yesno, tramp-action-yn): Protect
`pop-to-buffer' by `save-match-data'.

* texi/tramp.texi (Filename completion): Rework examples for local
filename completion.
----------------------------
revision 2.79
date: 2007-06-17 04:12:31 -0700;  author: albinus;  state: Exp;  lines: +18 -18;  commitid: IQTI2NEf6N68Xfms;

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Unify "Tramp" in strings.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): "//" and "/~"
substitute only in the local filename part.  Suggested by Peter
Gordon <peter@pg-consultants.com>.
(tramp-advice-minibuffer-electric-separator)
(tramp-advice-minibuffer-electric-tilde): New defadvices.
(tramp-append-tramp-buffers): Replace "sensible" by "sensitive" in
the hint.

* texi/tramp.texi (Filename completion): "//" substitutes in local
filename only.
----------------------------
revision 2.78
date: 2007-05-27 12:54:43 -0700;  author: albinus;  state: Exp;  lines: +1 -3;  commitid: 7PsnkV1mXPbnwBjs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-method,
(tramp-file-name-user, tramp-file-name-host)
(tramp-file-name-localname): New defuns, replacing defstruct
`tramp-file-name'.
(tramp-completion-dissect-file-name1, tramp-compute-multi-hops)
(tramp-dissect-file-name): Apply `vector' instead of
`make-tramp-file-name'.
(tramp-do-copy-or-rename-file-out-of-band): Aset 3rd index instead
of 4th, when setting localname.
(tramp-compute-multi-hops): Aset 2nd index instead of 3rd, when
setting host.

* lisp/tramp-cache.el (all): Aset 3rd index instead of 4th, when
unifying localname.
----------------------------
revision 2.77
date: 2007-03-05 13:57:51 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el (tramp-methods): Add gateway parameter to "scp",
"scp1", "scp2", "scpc", "scpx", "sshx".
(tramp-do-copy-or-rename-file-out-of-band): Start implementation
for gateways.  It is not finished yet.
(tramp-make-copy-program-file-name): Change parameter to VEC.
(tramp-make-temp-file): New parameter FILENAME.  Append its
extension to the resulting temporary file name.
(tramp-handle-file-local-copy, tramp-handle-write-region): Apply
it.

* lisp/tramp-smb.el (tramp-smb-handle-file-local-copy)
(tramp-smb-handle-write-region): Apply it.

* lisp/tramp-fish.el (tramp-fish-handle-file-local-copy): Apply it.

* texi/tramp.texi (trampfn, trampfnmhl, trampfnuhl, trampfnhl): New
macros.  Apply them wherever possible, improving readability.
(Multi-hops): Add some words in the footnote regarding ethical
issues of passing firewalls.
(Remote processes): New subsection discussing integration into
eshell.
----------------------------
revision 2.76
date: 2007-01-31 14:35:38 -0800;  author: albinus;  state: Exp;  lines: +9 -1;

* lisp/tramp-smb.el (tramp-smb-handle-insert-directory)
* lisp/tramp.el (tramp-handle-insert-directory): Fix wildcard case.

* texi/tramp.texi (Frequently Asked Questions): New item for
performance considerations.
----------------------------
revision 2.75
date: 2007-01-13 11:59:33 -0800;  author: albinus;  state: Exp;  lines: +99 -83;

* lisp/tramp.el (top): Change declaration of `with-temp-message' if it
doesn't exist.
(tramp-buffer-name, tramp-debug-buffer-name)
(tramp-make-tramp-file-name, tramp-make-copy-program-file-name):
Check also for empty USER.

* lisp/tramp-smb.el (tramp-smb-actions-with-share):
(tramp-smb-actions-without-share): New defconst.
(tramp-smb-open-connection): Removed.  Code merged into
`tramp-smb-maybe-open-connection'.  Use new defconst.

* lisp/tramp.texi (Multi-hops): Change last example to `sudo'.
----------------------------
revision 2.74
date: 2006-12-27 14:12:29 -0800;  author: albinus;  state: Exp;  lines: +1 -22;

* Makefile.in: Add tramp-fish.el

* lisp/tramp-fish.el: New package.

* lisp/tramp.el (top): Require tramp-fish.
(tramp-inodes): New defvar.
(tramp-handle-expand-file-name): Cache "home-directory".
(tramp-get-inode): New defun.

* lisp/tramp-smb.el (tramp-smb-no-stat, tramp-smb-inodes)
(tramp-smb-get-inode): Removed.  Apply new names.

* lisp/tramp-util.el (tramp-advice-executable-find): Add check for
`tramp-fish-file-name-handler'.

* texi/tramp.texi (Inline methods): Add `fish' method.
----------------------------
revision 2.73
date: 2006-12-26 13:42:55 -0800;  author: albinus;  state: Exp;  lines: +7 -37;

* lisp/tramp.el (tramp-action-process-alive)
(tramp-wait-for-regexp): Pop connection buffer in case of error.
(tramp-exists-file-name-handler): Handle also `default-directory'.
(tramp-half-a-year, tramp-parse-time-months): New defconst.
Transferred from tramp-smb.el.
(tramp-time-less-p, tramp-time-subtract): New defuns.  Transferred
from tramp-smb.el.
(tramp-time-diff): Use them.

* lisp/tramp-smb.el (tramp-smb-half-a-year)
(tramp-smb-parse-time-months, tramp-smb-time-less-p)
(tramp-smb-time-subtract): Removed.  Apply new names.

* lisp/tramp-util.el (top): Don't check for file name handlers of
`start-process-shell-command' and `call-process-shell-command'.

* texi/tramp.texi (Connection types): Mention `scpc' method.
(Default Method): Offer `scpc' for editing large files.
----------------------------
revision 2.72
date: 2006-12-17 22:00:08 -0800;  author: albinus;  state: Exp;  lines: +1 -0;

* lisp/tramp.el (tramp-default-method): Before setting to "pscp", check
whether package password.el is loaded, or Pageant is running.

* lisp/tramp-smb.el (tramp-smb-errors): Add error messages.
----------------------------
revision 2.71
date: 2006-12-14 13:31:14 -0800;  author: albinus;  state: Exp;  lines: +24 -17;

* lisp/tramp-smb.el (tramp-smb-handle-delete-directory)
(tramp-smb-handle-delete-file): Write a more comprehensive error
message.  Suggested by Tom Wurgler <twurgl@goodyear.com>.
----------------------------
revision 2.70
date: 2006-12-13 13:37:36 -0800;  author: albinus;  state: Exp;  lines: +9 -6;

* lisp/tramp-smb.el (tramp-smb-errors): Add error messages.
(tramp-smb-handle-directory-files): Fix check for MATCH.
----------------------------
revision 2.69
date: 2006-12-11 14:11:48 -0800;  author: albinus;  state: Exp;  lines: +4 -2;

* lisp/tramp-smb.el (tramp-smb-get-file-entries):
`tramp-smb-maybe-open-connection' must still be called when share
is nil.
----------------------------
revision 2.68
date: 2006-12-10 08:43:07 -0800;  author: albinus;  state: Exp;  lines: +11 -22;

* lisp/tramp.el (tramp-password-prompt-regexp): "Passphrase" is used
with capital first letter by PuTTY.
(tramp-message): Add message to debug buffer only when process
buffer is not killed.  Otherwise, debug buffer name cannot be
determined.
(tramp-accept-process-output): Under Win32,
`accept-process-output' doesn't return sometimes.  So we add an
additional timeout around.

* lisp/tramp-smb.el (tramp-smb-send-command ): This is the only place
to call `tramp-smb-maybe-open-connection'.  Remove all other
calls.
(tramp-smb-maybe-open-connection): SHARE isn't needed as
parameter.  We compute it ourselves.
(tramp-smb-open-connection): Set `process-connection-type', which
was done in `tramp-smb-maybe-open-connection' before.  Pop up
connection buffer when there are problems.
----------------------------
revision 2.67
date: 2006-12-09 13:10:08 -0800;  author: albinus;  state: Exp;  lines: +2 -1;

* tramp.el (tramp-enter-password): Inhibit function call traces in
order to avoid passwords to be included there.

* tramp-smb.el (tramp-smb-errors): Add error messages.
(tramp-smb-handle-make-directory-internal): Local file names shall
carry "\\" instead of "/".  Reported by Tom Wurgler
<twurgl@goodyear.com>.

* tramp.texi (Bug Reports): Add code to retrieve function call
traces.
----------------------------
revision 2.66
date: 2006-12-03 03:55:27 -0800;  author: albinus;  state: Exp;  lines: +52 -45;

* tramp-cache.el (tramp-flush-directory-property): Check whether
KEY is a string.
(tramp-flush-connection-property): Work with a copy of the key in
order to avoid side effects.

* tramp-smb.el (tramp-smb-handle-insert-directory): Handle
WILDCARD and FULL-DIRECTORY-P.
(tramp-smb-handle-make-directory-internal): Flush also directory,
because `file-attributes' is computed from its entries.
(tramp-smb-get-file-entries): Parameter is a DIRECTORY.
----------------------------
revision 2.65
date: 2006-11-30 14:20:39 -0800;  author: albinus;  state: Exp;  lines: +98 -111;

* lisp/tramp-cache.el (tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property): Work with a
copy of the vector in order to avoid side effects.

* lisp/tramp-smb.el (tramp-smb-errors): Add error message from Windows
Server 2003.
(tramp-smb-not-handled): Removed, replaced by `ignore'.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-directory)
(tramp-smb-handle-delete-file, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Flush also directory, because
`file-attributes' is computed from its entries.
(tramp-smb-file-name-handler, tramp-smb-handle-file-attributes)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-name-all-completions)
(tramp-smb-handle-file-writable-p)
(tramp-smb-handle-insert-directory, tramp-smb-get-file-entries)
(tramp-smb-get-inode): Simplify implementation.
(tramp-smb-open-connection): Add parameter "-s /dev/null".
----------------------------
revision 2.64
date: 2006-11-27 22:00:14 -0800;  author: albinus;  state: Exp;  lines: +19 -3;

* lisp/tramp-smb.el (tramp-smb-errors): Add error message from Windows
Server 2003.
(tramp-smb-no-stat): New constant.  Will be used later on for
implementation of the stat command.
(tramp-smb-open-connection): Revert change from 2006-11-23.
Quoting arguments is not needed, moreover it even breaks the
command.
(tramp-smb-wait-for-output): Read pending output.
----------------------------
revision 2.63
date: 2006-11-26 22:04:14 -0800;  author: albinus;  state: Exp;  lines: +6 -5;

* lisp/tramp-smb.el: (tramp-smb-maybe-open-connection): Erase always
the connection buffer.
----------------------------
revision 2.62
date: 2006-11-22 22:42:01 -0800;  author: albinus;  state: Exp;  lines: +4 -3;

* lisp/tramp-smb.el (tramp-smb-read-file-entry): Share names can
contain spaces.
(tramp-smb-open-connection): Quote arguments.
----------------------------
revision 2.61
date: 2006-11-19 22:30:04 -0800;  author: albinus;  state: Exp;  lines: +1 -0;

* lisp/tramp-cache.el (tramp-get-connection-property)
(tramp-set-connection-property): Work with a copy of the vector in
order to avoid side effects.

* lisp/tramp-smb.el (tramp-smb-maybe-open-connection): Erase the buffer
when the process is killed, because it is reused.
----------------------------
revision 2.60
date: 2006-05-27 11:43:31 -0700;  author: albinus;  state: Exp;  lines: +3 -1;

* lisp/tramp.el (tramp-initial-commands): Removed.
(tramp-remote-process-environment): Add the settings from
`tramp-initial-commands' here.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add `executable-find' entry.
(tramp-message): Apply `save-match-data'.
(tramp-do-copy-or-rename-file-out-of-band): `executable-find' must
be called locally.
(tramp-handle-executable-find): New defun.
(tramp-process-one-action)
(tramp-open-connection-setup-interactive-shell): Remove some
messages.  Send the "unset" commands as one bunch for
optimization.
(defun tramp-send-command-internal): Remove the MSG parameter.

* lisp/tramp-smb.el (tramp-smb-open-connection): `executable-find' must
be called locally.

* lisp/tramp-util.el (tramp-advice-executable-find)
(start-process-shell-command)
(tramp-advice-call-process-shell-command): New defadvices.
(tramp-advice-start-process, tramp-advice-call-process): Don't
apply parameter lists explicitely.
----------------------------
revision 2.59
date: 2006-05-21 09:15:06 -0700;  author: albinus;  state: Exp;  lines: +176 -219;

Major rewrite.  Parameter lists changed from METHOD USER HOST to VEC.
----------------------------
revision 2.58
date: 2006-05-10 22:57:33 -0700;  author: albinus;  state: Exp;  lines: +11 -11;

* lisp/tramp.el (all): Apply renamings from tramp-cache.el.
(tramp-handle-start-process, tramp-get-connection-buffer)
(tramp-get-connection-process, tramp-maybe-open-connection):
"process-name" and "process-buffer" are handled as file property,
because they shouldn't be saved in Tramp connection history.
(tramp-maybe-send-script): Dito for "scripts".
(tramp-check-for-regexp, tramp-send-command)
(tramp-send-command-internal): Dito for "check-remote-echo".
(tramp-open-connection-setup-interactive-shell): Move test for
`tramp-chunksize)' down.
(tramp-bug): Add `tramp-file-properties'.
(tramp-append-tramp-buffers): Remove test for cache data.

* lisp/tramp-cache.el (tramp-file-properties): Renamed from
`tramp-cache-data'.  It's not buffer local anymore.
(tramp-cache-setup): Reimplementation.
(tramp-get-file-property): Renamed from
`tramp-cache-get-file-property'.  Reimplementation.
(tramp-set-file-property): Renamed from
`tramp-cache-set-file-property'.  Reimplementation.
(tramp-flush-file-property): Renamed from
`tramp-cache-flush-file'.  Reimplementation.
(tramp-flush-directory-property): Renamed from
`tramp-cache-directory-file'.  Reimplementation.
(with-file-property ): Renamed from `with-cache-data'.
Reimplementation.
(tramp-set-connection-property): Remove parameter TRANSIENT.
(tramp-dump-connection-properties): Pretty printing shall work for
other Emacsen too.

* lisp/tramp-smb.el (all): Apply renamings from tramp-cache.el.
----------------------------
revision 2.57
date: 2006-05-07 14:33:48 -0700;  author: albinus;  state: Exp;  lines: +4 -9;

* lisp/tramp.el (top): cl and custom are always required.
(tramp-verbose): Change description of levels.
(tramp-encoding-reads-stdin, tramp-repair-jka-compr)
(tramp-discard-garbage, tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name)
(tramp-find-default-method, tramp-find-default-user)
(tramp-find-default-host): Remove them.
(tramp-methods): Change defcustom into defvar.
(tramp-actions-before-shell, tramp-actions-copy-out-of-band):
Change defcustom into defconst.
(tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-make-temp-file, tramp-make-tramp-temp-file): Move them up.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-handle-make-auto-save-file-name): For Emacs 21, set
`tramp-auto-save-directory' if unset in order to guarantee unique
auto-save file names.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): New defsubst.  Added with
autoload cookie.  Code from `tramp-repair-jka-compr' moved here.
Register `tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-unload-file-name-handlers): Renamed from
`tramp-unload-file-name-handler-alist'.
(tramp-completion-handle-file-name-all-completions): Delete
directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-process-actions, tramp-wait-for-regexp)
(tramp-maybe-open-connection, tramp-send-command)
(tramp-send-command-internal): Trace sent command with level 6.
(tramp-check-for-regexp): Trace echo with level 5.
(tramp-dissect-file-name): Expand method, user, host.
(tramp-find-method, tramp-find-user, tramp-find-host): Add code
for default values.  Remove all calls but the one in
`tramp-dissect-file-name'.
(tramp-bug, tramp-reporter-dump-variable)
(tramp-append-tramp-buffers): Dump also hash variables.

* lisp/tramp-cache.el: Trace cache commands with level 7.  Trace
connection commands with level 8.
(tramp-cache-print): Dump strings as such.
(tramp-persistency-file-name): New defcustom.
(tramp-connection-properties): New defvar.
(tramp-dump-connection-properties): New defun.
(tramp-get-connection-property, tramp-set-connection-property):
Rewritten.
(top): Dump connection history when leaving Emacs.  Read it during
initialization.

* lisp/tramp-efs.el (tramp-efs-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-ftp.el (tramp-ftp-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-smb.el: Trace sent commands with level 6.
(tramp-smb-file-name-p): Don't use tramp-find-* functions.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
(Bug Reports): Level 6 results already in file contents.
(Traces and Profiles): Describe new levels.
----------------------------
revision 2.56
date: 2006-01-30 13:06:49 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el (tramp-unload-tramp): Don't try to unload tramp-util.

* lisp/tramp-smb.el (tramp-smb-wait-for-output): Wait always for the
prompt.  If it returns earlier (when detecting an error message),
the rest of the output will merge accidently with the output of
the next command.  Reported by M Jared Finder <jared@hpalace.com>.
----------------------------
revision 2.55
date: 2005-11-20 14:16:40 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-send-command-and-read): New defun.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-perl)
(tramp-handle-directory-files-and-attributes-with-stat)
(tramp-get-remote-stat, tramp-get-remote-uid)
(tramp-get-remote-gid): Apply it.
(tramp-handle-insert-directory): Remove unnecessary comments.
(tramp-point-at-eol): Removed. All callees replaced by
`tramp-line-end-position'.
(tramp-barf-unless-okay): Don't pop up Tramp buffer in case of
error.
(tramp-get-ls-command, tramp-get-test-command)
(tramp-get-test-nt-command, tramp-get-file-exists-command)
(tramp-get-remote-ln, tramp-get-remote-perl)
(tramp-get-remote-stat)
(tramp-get-remote-uid, tramp-get-remote-gid): Apply
`with-connection-property'.
(tramp-get-connection-property, tramp-set-connection-property):
Move to tramp-cache.el.

* lisp/tramp-cache.el:
(tramp-get-connection-property, tramp-set-connection-property):
Moved from tramp.el.  Tramp messages added.
(with-connection-property): New macro.

* lisp/tramp-smb.el (tramp-smb-read-file-entry): `tramp-point-at-eol'
replaced by `tramp-line-end-position'.

* lisp/tramp-vc.el (tramp-handle-vc-user-login-name): Removed.
(tramp-vc-user-login-name): Rewritten.

* texi/tramp.texi (Remote File Ownership): Replace `user-full-name' by
`user-login-name'.
(Traces and Profiles): Add trace level 7.
----------------------------
revision 2.54
date: 2005-11-09 15:01:22 -0800;  author: albinus;  state: Exp;  lines: +59 -32;

* lisp/tramp.el (tramp-remote-process-environment): New defcustom.
(tramp-file-name-handler-alist): Add `dired-call-process'.
(tramp-handle-dired-call-process ): New defun.
(tramp-debug-message): Extend regexp for backtrace.
(tramp-message): Apply level specific prefixes.
(tramp-error): New defsubst.  Replace all calls of `message',
`signal' and `error' with corresponding Tramp message functions.
(tramp-handle-file-truename): Apply `tramp-equal-remote'.
(tramp-handle-expand-file-name): Use "~root" for tilde expansion
in case of su(do)? methods.  The home directory of the local user
will be taken else.
(tramp-handle-start-process): Use narrowing for protecting buffer
contents.
(tramp-file-name-handler): Remove signal handling.  Not necessary,
because `tramp-error' handles it now.
(tramp-buffer-name, tramp-debug-buffer-name): Handle the case USER
is nil.
(tramp-outline-level): Change formula in order to handle level 0.
(tramp-set-remote-path): Add debug message.
(tramp-enter-password): Don't erase the buffer, not necessary.
(tramp-open-connection-setup-interactive-shell): Don't (un)set
explicitely "TERM", "HISTFILE", "HISTSIZE" "MAIL" "MAILCHECK"
"MAILPATH" "CDPATH" "LC_TIME".  Set
`tramp-remote-process-environment' instead of.
(tramp-barf-unless-okay): Remove SUBSHELL (always nil) and SIGNAL
(always 'file-error).  Change all callees.
(tramp-send-string): Apply `delete-region' instead of
`erase-buffer'.  Necessary because of narrowing.

* lisp/tramp-smb.el (all) Replace all calls of `message', `signal' and
`error' with corresponding Tramp message functions.

* lisp/tramp-util.el (tramp-advice-gud-perldb-massage-args): New
defadvice.

* texi/tramp.texi (Remote processes): Improve doc.
----------------------------
revision 2.53
date: 2005-10-12 13:49:29 -0700;  author: albinus;  state: Exp;  lines: +14 -14;

* lisp/tramp.el (top): Try to simplify XEmacs byte-compiler
pacification.
(tramp-verbose): Finish doc string.  New default value is 3.
(all): Apply new verbosity levels.
(tramp-get-debug-buffer): Remove definition of outline faces.  The
default values are good enough.
(tramp-bug): Explain setting of `tramp-verbose'.

* lisp/tramp-cache.el (all): Apply new verbosity levels.

* lisp/tramp-smb.el (top): Try to simplify XEmacs byte-compiler
pacification.
(all): Apply new verbosity levels.

* lisp/tramp-vc.el (top): Try to simplify XEmacs byte-compiler
pacification.

* texi/tramp.texi (Bug Reports, Traces and Profiles): Explain setting
of `tramp-verbose'.

* texi/trampinst.texi (Installation parameters): Try it now with @w{}.
----------------------------
revision 2.52
date: 2005-10-11 14:58:47 -0700;  author: albinus;  state: Exp;  lines: +18 -25;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rearrange
substitutions that they are accepted with older shell versions.

* Makefile.XEmacs (REQUIRES): Remove fsf-compat, add
sh-script (for executable-find).

* lisp/tramp.el: Require `timer-funcs' instead of `timer' if in
XEmacs.
(tramp-verbose): Start rewriting the doc string.  Not
finished yet.
(tramp-handle-delete-file, tramp-handle-insert-file-contents)
(tramp-sh-file-name-handler): Signals expect a list as last
parameter.
(tramp-file-name-handler): Handle signals in order to trace them
in the debug buffer.

* lisp/tramp-smb.el (tramp-smb-handle-directory-files): Rewritten in
order to profit from caching results.
(tramp-smb-handle-file-name-all-completions): `localname' must be
expanded by `file-name-as-directory'.
----------------------------
revision 2.51
date: 2005-10-10 14:07:48 -0700;  author: albinus;  state: Exp;  lines: +4 -2;

* lisp/tramp.el (tramp-handle-delete-directory)
(tramp-handle-dired-recursive-delete-directory): Apply
`tramp-cache-flush-directory'.
(tramp-handle-insert-directory): Apply `tramp-cache-flush-file'.

* lisp/tramp-cache.el: Autoload the needed functions from tramp.el.
(tramp-cache-flush-directory, tramp-cache-before-revert-function):
New defuns.
(top): Add `tramp-cache-before-revert-function' to
`before-revert-hook'.  Deactivate all Tramp messages for
performance reasons.

* lisp/tramp-smb.el (tramp-smb-handle-delete-directory): Apply
`tramp-cache-flush-directory'.
(tramp-smb-handle-insert-directory): Apply
`tramp-cache-flush-file'.
(tramp-smb-handle-directory-files): Local file must be handled as
directory, otherwise the listing is senseless.

* texi/trampinst.texi (Installation parameters): Don't use @tie{}, it
isn't defined in older texinfo versions.
----------------------------
revision 2.50
date: 2005-10-09 12:43:34 -0700;  author: albinus;  state: Exp;  lines: +16 -15;

* INSTALL: Provide working options for installing on MS Windows.

* lisp/tramp.el (tramp-completion-without-shell-p): Removed.  Not
needed anymore.
(tramp-md5-function): Fix typo in error message.
(tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-handle-file-name-all-completions): Rewritten in order to
profit from caching results.
(tramp-handle-file-name-completion): Removed unnecessary code.

* lisp/tramp-cache.el (with-cache-data): ,@body must be wrapped by
`progn'.  Add `edebug-form-spec' property.

* lisp/tramp-smb.el (tramp-smb-handle-file-name-all-completions):
Rewritten in order to profit from caching results.

* texi/tramp.texi (Dired): Node removed.  There are no limitations on
directory listings anymore.
(Default Method): Fix typo in variable name.
(Filename completion): Remove limitations on directory listings.

* texi/trampinst.texi (Installation parameters): Provide working
options for installing on MS Windows.
----------------------------
revision 2.49
date: 2005-09-11 14:17:32 -0700;  author: albinus;  state: Exp;  lines: +64 -53;

* tramp.el (top): Reduce compiler warnings.
(tramp-current-hop-method, tramp-current-hop-user)
(tramp-current-hop-host): New defvars.
(tramp-handle-file-attributes-with-stat): Return floating point
numbers.  Integers did run out of 2**28.
(tramp-do-copy-or-rename-file-out-of-band, tramp-pre-connection)
(tramp-maybe-open-connection): Initialize new defvars.
(tramp-handle-shell-command): Send "tramp_set_exit_status", it
isn't sent any longer during initialization.
(tramp-handle-write-region): Remote decoding command is sent in
one bunch.
(tramp-find-executable): Check first in $PATH with "which"
command.  Directory scan command is sent in one bunch.
(tramp-check-ls-command, tramp-find-ls-command): Debug messages
did go to a wrong debug buffer.
(tramp-action-password, tramp-process-actions): Call
`tramp-enter-password' and `tramp-clear-passwd' with changed
parameters.
(tramp-enter-password, tramp-read-passwd, tramp-clear-passwd):
Change parameter set.  Rewrite.
(tramp-post-connection): Remove unnecessary commands.
(tramp-send-command, tramp-send-string): Move setting of
`tramp-last-cmd-time'.
(tramp-wait-for-output): Correct wrong variable names.
(tramp-get-ls-command): Simplify code.

* tramp-cache.el (tramp-enable-cache): Removed.  Works stable now.
(with-cache-data): Change accordingly.

* tramp-smb.el (top): Require `tramp-cache'.  Reduce compiler
warnings.
(tramp-smb-handle-file-attributes)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-writable-p): Add `with-cache-data'.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-directory)
(tramp-smb-handle-delete-file, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Flush cached data.
(tramp-smb-open-connection) Call `tramp-enter-password' and
`tramp-clear-passwd' with changed parameters.

* tramp-vc.el (top): Reduce compiler warnings.
----------------------------
revision 2.48
date: 2005-08-21 14:27:35 -0700;  author: albinus;  state: Exp;  lines: +224 -231;

Rewrite communication functions in order to apply them more transparent.
----------------------------
revision 2.47
date: 2005-08-07 14:33:41 -0700;  author: albinus;  state: Exp;  lines: +3 -24;

* lisp/tramp.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-accept-process-output): New defun.
(tramp-process-one-action, tramp-wait-for-regexp)
(tramp-wait-for-output, tramp-discard-garbage-erase-buffer): Call
it.  Reported by David Howells <dhowells@redhat.com>.
(clear-visited-file-modtime): Defadvice removed.  The check for
unset buffer's modtime does not need to be based on
`tramp-buffer-file-attributes'.  Suggested by RMS.
(tramp-send-command): Simplify.
(tramp-make-tramp-file-name): At least method and host delimeter
must exist.

* lisp/tramp-smb.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-smb-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-smb-wait-for-output): Call `tramp-accept-process-output'.
Simplify trace message.
----------------------------
revision 2.46
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.45
date: 2005-06-26 12:45:08 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fourth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in: Adapt email addresses.
----------------------------
revision 2.44
date: 2005-02-16 13:33:51 -0800;  author: albinus;  state: Exp;  lines: +29 -33;

* lisp/tramp-smb.el (tramp-smb-prompt): Prompt can contain spaces
inside directory names.
(tramp-smb-handle-delete-directory, tramp-smb-handle-delete-file):
No error message if DIRECTORY or FILENAME doesn't exist.
----------------------------
revision 2.43
date: 2005-02-12 03:19:00 -0800;  author: albinus;  state: Exp;  lines: +3 -3;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.42
date: 2005-01-05 13:20:52 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el: Fix copyright years.

* lisp/tramp-smb.el: Fix copyright years.  Adapt author address.

* lisp/tramp-util.el: Fix copyright years.  Adapt author address.
(tramp-minor-mode): Mode must toggle.

* texi/tramp.texi: Fix copyright years.
----------------------------
revision 2.41
date: 2005-01-04 15:19:03 -0800;  author: albinus;  state: Exp;  lines: +3 -0;

* lisp/tramp.el (tramp-maybe-open-connection): If the local host does
not run a UNIX derivate, the local shell cannot handle command
sequences separated with ";".  Reported by Takashi Tsunakawa
<tuna@is.s.u-tokyo.ac.jp>.

* lisp/tramp-smb.el (tramp-smb-open-connection): Check existence of
`tramp-smb-program'.

* lisp/tramp-util.el (tramp-compile, tramp-recompile): Enable
`tramp-minor-mode' in buffer "*Compilation*".

* texi/tramp.texi (Compilation): Give a note that remote compilation is
performed synchronously only, for the time being.
----------------------------
revision 2.40
date: 2004-12-29 13:15:27 -0800;  author: albinus;  state: Exp;  lines: +1 -0;

* lisp/tramp-smb.el: Add new Todo item.

* lisp/tramp-util.el (tramp-minor-mode): New minor mode.  Add it to
`find-file-hooks'.
(tramp-minor-mode-map): Respective map.  Add remapping for
`compile' and `recompile'.
(tramp-recompile): New defun.

* texi/tramp.texi (Compilation): New section, describing compilation of
remote files.
----------------------------
revision 2.39
date: 2004-12-23 03:00:00 -0800;  author: albinus;  state: Exp;  lines: +8 -49;

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`substitute-in-file-name.
(tramp-smb-handle-substitute-in-file-name): New defun.
(tramp-smb-advice-PC-do-completion): Delete advice.
----------------------------
revision 2.38
date: 2004-10-17 09:33:30 -0700;  author: albinus;  state: Exp;  lines: +5 -3;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.37
date: 2004-10-12 14:31:26 -0700;  author: albinus;  state: Exp;  lines: +8 -1;


* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Don't activate
advice during definition.  This is done later on, depending on
test result of `substitute-in-file-name'.  Suggested by Stefan
Monnier <monnier@iro.umontreal.ca>.
----------------------------
revision 2.36
date: 2004-08-29 07:07:33 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


Adding URL syntax.  Open problems:
- Masking "/~".
- Masking "://" in XEmacs.
- FTP/EFS changes.
- Documentation.
----------------------------
revision 2.35
date: 2004-08-01 07:36:24 -0700;  author: albinus;  state: Exp;  lines: +6 -1;


* lisp/tramp.el (tramp-default-method-alist)
(tramp-default-proxies-alist): Correcting doc string.
(tramp-default-user, tramp-default-user-alist)
(tramp-default-host): New defcustom.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-expand-file-name, tramp-action-login)
(tramp-buffer-name, tramp-debug-buffer-name)
(tramp-maybe-open-connection)
(tramp-read-passwd, tramp-clear-passwd): Apply `tramp-find-user'
and `tramp-find-host'.
(tramp-find-default-method): Allow nil regexps.
(tramp-find-default-user, tramp-find-user)
(tramp-find-default-host, tramp-find-host): New defun.

* lisp/tramp-smb.el (top): Add empty (anonymous) user to
`tramp-default-user-alist' for smb method.

* texi/tramp.texi (Default User, Default Host): New chapters.
----------------------------
revision 2.34
date: 2004-07-27 23:01:13 -0700;  author: albinus;  state: Exp;  lines: +27 -85;


* lisp/tramp.el (tramp-maybe-open-connection): Set
`coding-system-for-read'.  It was lost last patch.

* lisp/tramp-smb.el (all): Don't load "cl-seq", Emacs 19 is out of
scope.  Remove `with-parsed-tramp-file-name' kludge.  Debugging
spec set in tramp.el is sufficient.  Remove multi-method parameter
from `tramp-message-for-buffer' calls.
(tramp-smb-open-connection): Set `coding-system-for-read' to nil.
Check for Emacs 20 is not necessary any longer.

* lisp/tramp-ftp.el (top): Don't load "cl-seq", Emacs 19 is out of
scope.
----------------------------
revision 2.33
date: 2004-07-26 12:36:34 -0700;  author: albinus;  state: Exp;  lines: +9 -10;


Removing multi-hop methods.  Incorporating proxies.
----------------------------
revision 2.32
date: 2004-06-06 03:07:53 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


* tramp.el (tramp-enter-password, tramp-read-passwd): New
arguments USER and HOST.
(tramp-action-password, tramp-multi-action-password): Apply it.

* tramp-smb.el (tramp-smb-open-connection): Apply USER and HOST to
`tramp-enter-passwd'.
----------------------------
revision 2.31
date: 2004-05-29 13:52:55 -0700;  author: albinus;  state: Exp;  lines: +1 -0;


* Makefile.in (.SILENT, .PHONY): Add lisp target.
(info): Depends on $(CONFIG_FILES).

* lisp/tramp.el (tramp-file-name-handler-alist)
(tramp-file-name-for-operation): Add entry for `file-remote-p'.
(tramp-handle-file-remote-p): New defun.
(top): Remove setting of `file-remote-p'.  Don't set
`inhibit-file-name-handlers' and `inhibit-file-name-operation'.

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`file-remote-p'.
----------------------------
revision 2.30
date: 2004-05-28 08:29:03 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp-smb.el (tramp-smb-open-connection): Use
tramp-set-process-query-on-exit-flag compat function.

* tramp.el (tramp-set-process-query-on-exit-flag): New compat function.
(tramp-open-connection-multi, tramp-open-connection-su)
(tramp-open-connection-rsh, tramp-open-connection-telnet)
(tramp-do-copy-or-rename-file-out-of-band): Use it.
(tramp-let-maybe): New macro, let-binds a variable only if it
isn't obsolete.
(tramp-check-ls-commands, tramp-handle-expand-file-name)
(tramp-handle-file-truename): Use it.
----------------------------
revision 2.29
date: 2004-05-01 13:04:22 -0700;  author: albinus;  state: Exp;  lines: +13 -0;
branches:  2.29.2;


Suppress byte-compiler warnings were possible.

* lisp/tramp.el (toplevel): Call of `byte-compiler-options' pacified.
`directory-sep-char' set to not obsolete (we need it for XEmacs).
Define `last-coding-system-used' in XEmacs case.  Pacify
declarations of `backup-directory-alist',
`bkup-backup-directory-info' and
`tramp-save-PC-expand-many-files'.
(tramp-feature-write-region-fix): Pacify funcall of
`find-operation-coding-system'.
(tramp-line-end-position): Pacify funcall of `line-end-position'
and `point-at-eol'.
(tramp-handle-dired-compress-file): Pacify funcall of
`dired-remove-file'.
(tramp-handle-find-backup-file-name): Pacify access to
`tramp-backup-directory-alist' and
`tramp-bkup-backup-directory-info'.
(tramp-touch): `error' needs just one parameter if there is no
string substitution.
(tramp-bug): `tramp-backup-directory-alist',
`tramp-bkup-backup-directory-info', `backup-directory-alist' and
`bkup-backup-directory-info' must be quoted as symbols.

* lisp/tramp-efs.el (toplevel): Suppress byte-compiler warnings.

* lisp/tramp-smb.el (toplevel): Suppress byte-compiler warnings.
Define `last-coding-system-used' in XEmacs case.

* lisp/tramp-vc.el (toplevel): Suppress byte-compiler warnings.
(tramp-vc-do-command-new): Pacify funcall of `vc-setup-buffer' and
`vc-exec-after'.
(tramp-vc-workfile-unchanged-p): Pacify funcall of
`vc-default-workfile-unchanged-p'.
(tramp-handle-vc-user-login-name): Pacify funcall of
`subr-arity'. `let' must be `let*' because of `file'.
----------------------------
revision 2.28
date: 2004-04-25 08:41:10 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


* lisp/tramp.el (tramp-backup-directory-alist)
(tramp-bkup-backup-directory-info): New defcustoms.
(tramp-file-name-handler-alist): Add entry for
`find-backup-file-name'.
(tramp-handle-find-backup-file-name): New function.  Implements
Tramp's find-backup-file-name.

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`find-backup-file-name'.

* texi/tramp.el (Auto-save and Backup): Explain exploitation of new
variables `tramp-backup-directory-alist' and
`tramp-bkup-backup-directory-info'.
----------------------------
revision 2.27
date: 2004-02-29 05:29:08 -0800;  author: albinus;  state: Exp;  lines: +1 -2;


* lisp/tramp.el (top-level): Require password.el if visible.  Should be
mandatory once No Gnus has found its way into (X)Emacs.
(tramp-read-passwd): Invoke `password-read' if available,
`read-passwd' otherwise. `ange-ftp-read-passwd' isn't used as
fallback any longer.
(tramp-clear-passwd): New function.
(tramp-process-actions, tramp-process-multi-actions): Clear
password cache if login has failed.

* lisp/tramp-smb.el (tramp-smb-open-connection): Clear password cache
if login has failed.

* texi/tramp.texi (all): Use "@value{emacs-name}" everywhere where it
is intended (some accidents of last fix corrected).
(Password caching): New node.
(External transfer methods): Refer to password caching for "smb"
method.

* contrib/password.el: New file.  Taken from No Gnus.
----------------------------
revision 2.26
date: 2004-01-10 14:09:39 -0800;  author: albinus;  state: Exp;  lines: +5 -2;


* lisp/tramp-smb.el (tramp-smb-get-file-entries): In case of XEmacs,
apply a short sleep-for.  Otherwise it returns an empty list.
No idea what happens.
----------------------------
revision 2.25
date: 2004-01-05 14:30:37 -0800;  author: albinus;  state: Exp;  lines: +1 -1;


* lisp/tramp-smb.el (tramp-smb-maybe-open-connection): Use
`tramp-process-connection-type'.

* texi/tramp.texi (Issues): Explain disabling "auto-autoloads.el*" for
unified filenames with XEmacs.
----------------------------
revision 2.24
date: 2003-12-27 13:23:48 -0800;  author: uid67418;  state: Exp;  lines: +1 -1;


* lisp/tramp.el (tramp-completion-mode): Add XEmacs input
events. Until now it was not necessary, because they are
evaluated in case of unified filenames only.

* lisp/tramp-efs.el (top): Add all XEmacs download sites to
`tramp-default-method-alist'.  The existing settings should be
sufficient already, but it's better to make it explicitely.
(tramp-efs-method-given, tramp-efs-method-regexp): New variables.
(tramp-efs-path-regexp, tramp-efs-path-format-string)
(tramp-efs-path-format-without-user)
(tramp-efs-path-user-at-host-format)
(tramp-efs-path-host-format, tramp-efs-path-root-regexp): Changed
to a function.  Their values depend on the existence of the method
tag in filename.
(tramp-efs-file-name-handler): Check first whether the method tag
is given in a filename.
(tramp-efs-file-name-p): A syntax check must be performed first,
otherwise `tramp-dissect-file-name' returns with an error.

* lisp/tramp-ftp.el (Commentary): Removing pointer to EFS.  It has its
own module.

* lisp/tramp-smb.el (top): Setting default value in
`tramp-default-method-alist' corrected.  Order of USER and HOST
have been wrong.  Nobody claimed for months ...

* texi/tramp.texi (Issues): Describe how to use unified filenames with
XEmacs.
----------------------------
revision 2.23
date: 2003-12-25 08:18:29 -0800;  author: uid67418;  state: Exp;  lines: +56 -69;


	* lisp/tramp.el (tramp-completion-mode) Don't check for 'xemacs
but
	`tramp-unified-filenames'.

	* lisp/tramp-smb.el (tramp-smb-errors): Add
NT_STATUS_WRONG_PASSWORD"
	and "NT_STATUS_NETWORK_ACCESS_DENIED".
	(tramp-smb-maybe-open-connection): Set `process-connection-type'
	to 'pty.  Suggested by Piet van Oostrum <piet@cs.uu.nl>.

	* lisp/tramp-smb.el (tramp-smb-process-running): Removed.  Since
we
	acknowledge the virtual prompt for shares, there's no need for
	distinction of reading shares (process ends afterwards) and
	interactive mode of smblient.
	(tramp-smb-open-connection): Setting process sentinel removed.
	(tramp-smb-wait-for-output): Algorithm simplified, again.  Hope
it
	is more robust, too.

	* lisp/tramp-smb.el (tramp-smb-prompt): Add virtual prompt from
	listing shares, too.
	(tramp-smb-errors): Add "NT_STATUS_ACCOUNT_LOCKED_OUT".
	(tramp-smb-wait-for-output): Optimize algorithm getting pending
	output.  If it was received chunkwise, there have been problems.
	Remove the "prompt not found" error message; it is obvious.

	* lisp/tramp-smb.el (tramp-smb-handle-file-writable-p): Handle
the
case
	of non-existing filename, too.  Reported by Christoph Bauer
	<c_bauer@informatik.uni-kl.de>.
	(tramp-smb-get-file-entries): The directory in question should
	have permissions "drwxrwxrwx".  Just virtual, because we don't
	know the real permissions.  Don't we know?

	* lisp/tramp.texi (Obtaining TRAMP): Change Tramp CVS directory
to
	"-d:ext:anoncvs@savannah.nongnu.org:/cvsroot/tramp" as advised
on
	the Savannah page.
----------------------------
revision 2.22
date: 2003-11-30 09:48:03 -0800;  author: kai;  state: Exp;  lines: +1 -0;
* tramp-ftp.el, tramp-smb.el, tramp-util.el, tramp-uu.el:
* tramp-vc.el, tramp.el, trampver.el.in: Add arch tagline.
----------------------------
revision 2.21
date: 2003-11-25 13:57:49 -0800;  author: albinus;  state: Exp;  lines: +13 -11;

* lisp/tramp.el: Add new optional parameter ID-FORMAT to
`file-attributes'.  Calls of `file-attributes' won't use this
parameter for backward compatibility reasons.
(tramp-perl-file-attributes): Add a new parameter to Perl script
in order to handle uid/gid as strings, if desired.
(tramp-handle-file-truename, tramp-handle-file-symlink-p): Apply
`file-attributes' instead of `tramp-handle-file-attributes' in
order to make the function more general.
(tramp-handle-file-attributes): Replace proprietary optional
parameter NONNUMERIC by the recently (Emacs 21.4) introduced
ID-FORMAT.
(tramp-handle-file-attributes-with-perl): Handle parameter
NONNUMERIC if set. This wasn't done in the past.
(tramp-post-connection): Apply second parameter "$2" if
`tramp-remote-perl' is called.

* lisp/tramp-smb.el (tramp-smb-handle-delete-file): Correct cut'n'waste
error (`filename' instead of `directory').
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-attributes): Add recently (Emacs 21.4)
introduced parameter ID-FORMAT.
(tramp-smb-handle-make-directory-internal): Correct cut'n'waste
error (`directory' instead of `ldir').

* lisp/tramp-vc.el (tramp-handle-vc-user-login-name): Check if
`file-attributes' has a second parameter.  If yes, apply it with
value "'integer".  Otherwise, don't use that parameter (default
is integer format).
----------------------------
revision 2.20
date: 2003-03-06 14:10:18 -0800;  author: albinus;  state: Exp;  lines: +32 -14;

* tramp-smb.el (tramp-smb-read-file-entry): Make reading size of a
listing entry more robust.  Ranges from 10 chars (Samba 1) to 7-9
chars (Samba 2).
----------------------------
revision 2.19
date: 2003-02-15 16:18:43 -0800;  author: albinus;  state: Exp;  lines: +82 -82;


* tramp-smb.el: Replace term `path' with `localname' unless it is
used for a search path.  In GNU, the word `path' is reserved for
search paths.

* tramp.el (tramp-send-string, tramp-send-region): Removed.
(tramp-send-string): New function.  Takes over the role of the
functions above, in order to have a unique place handling
`tramp-chunksize'.  Same implementation as `tramp-send-region'.
----------------------------
revision 2.18
date: 2003-02-04 14:37:29 -0800;  author: albinus;  state: Exp;  lines: +1 -1;


* tramp.el (tramp-handle-directory-file-name): Handle the case
PATH is "".
(tramp-completion-handle-file-name-all-completions): Define
`tramp-current-user' locally.  See `tramp-parse-passwd'.
(tramp-parse-passwd): For su-alike methods it would be desirable
to return "root@localhost" as default.  Unfortunately, we have no
information whether any user name has been typed already.  So we
(mis-)use tramp-current-user as indication, assuming it is set in
`tramp-completion-handle-file-name-all-completions'.
(tramp-send-region): Handle the case `tramp-chunksize' is equal
0.  I did it accidently.  Infinite loop ...

* tramp-ftp.el (top-level): eval-after-load "ange-ftp"
'(tramp-disable-ange-ftp).  Suggested by Kai.
(tramp-ftp-file-name-handler): `tramp-disable-ange-ftp' not needed
any longer.

* tramp-smb.el (tramp-smb-file-name-handler-alist): Apply
`tramp-handle-directory-file-name' in order to profit from Kai's
yesterday changes.
----------------------------
revision 2.17
date: 2003-01-25 14:32:25 -0800;  author: albinus;  state: Exp;  lines: +10 -20;


* tramp.el (tramp-devices): New variable.  Keeps virtual device
numbers.  Devices must distinguish physical file systems.  The
device numbers provided by "lstat" aren't unique, because we
operate on different hosts.  So we use virtual device numbers,
generated by `tramp-get-device'.  Both Ange-FTP and EFS use device
number -1.  In order to be different, we use device number (-1 x),
whereby "x" is unique for a given (multi-method method user
host).  Suggested by Kai.
(tramp-perl-file-attributes): Always return device number -1.
There will be a virtual device number set in
`tramp-handle-file-attributes', which replaces this one.
(tramp-handle-file-attributes): Set virtual device number.
(tramp-get-device): New function.  Returns the virtual device
number.  If it doesn't exist, generate a new one.
(tramp-handle-file-regular-p): Use Emacs file name primitives
instead of calling tramp-handle-* equivalents directly.  Needed
for tramp-smb.

* tramp-smb.el (tramp-smb-devices, tramp-smb-get-device): Removed.
Functionality moved to tramp.el.
(tramp-smb-handle-file-attributes): Apply
`tramp-get-device'. ATIME and CTIME are (0 0) now (= "don't
know"), which is more honest.
(tramp-smb-handle-make-directory): Use Emacs file name primitives
instead of calling tramp-smb-handle-* equivalents directly.
(tramp-smb-read-file-entry): Return size as a number but a string.
----------------------------
revision 2.16
date: 2003-01-20 15:22:04 -0800;  author: albinus;  state: Exp;  lines: +36 -4;


* tramp-smb.el (tramp-smb-get-device, tramp-smb-get-inode): New
functions.  Device number and inode number don't exist for SMB
files.  Therefore we must generate virtual ones.
(tramp-smb-devices, tramp-smb-inodes): New variables.  Keep
generated virtual device numbers and inodes numbers for SMB files.
(tramp-smb-handle-file-attributes): Apply them.
----------------------------
revision 2.15
date: 2003-01-02 14:21:03 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* tramp-ftp.el (top-level): Defaults for
`tramp-default-method-alist' must be a list.

* tramp-smb.el (top-level): Defaults for
`tramp-default-method-alist' must be a list.
----------------------------
revision 2.14
date: 2002-12-22 14:28:30 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* tramp.el (top-level): Discard tramp-smb.el also for Cygwin.  No
"smbclient" available there.
(tramp-completion-dissect-file-name):
`tramp-completion-file-name-structure1',
`tramp-completion-file-name-structure2',
`tramp-completion-file-name-structure3' and
`tramp-completion-file-name-structure4' changed from "defconst" to
"let*", because they are function local (but nevertheless
constants).  Suggested by David Kastrup
<David.Kastrup@t-online.de> and Kai Großjohann
<kai.grossjohann@uni-duisburg.de>.  The value "9" has changed to
"nil" (meaning there's nothing to match), because Emacs 21.3 seems
to be more sensible on `match-string'.
(tramp-completion-dissect-file-name1): In case of a "nil" position
don't call `match-string'.

* tramp-smb.el (tramp-smb-file-name-handler-alist):
`add-name-to-file' is handled by `tramp-smb-handle-copy-file',
because there are no hardlinks under Windows.
----------------------------
revision 2.13
date: 2002-12-21 13:32:59 -0800;  author: albinus;  state: Exp;  lines: +7 -4;

* tramp.el (tramp-default-method-alist): Defaults setting for FTP
method has moved to tramp-smb.el. The remaining default for the SU
method is available for both Emacs and XEmacs now.

* tramp-ftp.el (top-level): Set defaults for
`tramp-default-method-alist'. Taken over from tramp.el.

* tramp-smb.el (top-level): Set default for
`tramp-default-method-alist'. If the user name contains a domain
(visible via the "%" char), it must be the SMB method.
(tramp-smb-wait-for-output): Use `tramp-smb-process-running' where
appropriate. Last time I've changed this function I forgot one
place.
----------------------------
revision 2.12
date: 2002-12-05 12:06:09 -0800;  author: albinus;  state: Exp;  lines: +22 -15;

* tramp-smb.el (tramp-smb-process-running) New buffer local
variable.  Flag whether a corresponding process is still running.
(tramp-smb-open-connection): Set a process sentinel.  It disables
`tramp-smb-process-running'.
(tramp-smb-wait-for-output): Use `tramp-smb-process-running' for
several checks.
----------------------------
revision 2.11
date: 2002-11-28 13:03:34 -0800;  author: albinus;  state: Exp;  lines: +242 -106;


* tramp.el (top-level): Require tramp-smb.el only if local
Operating System is not MS Windows.  There's no need for the SMB
method there, because those Emacsen support UNC file names.
(tramp-handle-file-modes): Use Emacs file name primitives instead
of calling tramp-handle-* equivalents directly.  Needed for
tramp-smb.

* tramp-smb.el (tramp-smb-errors): List of error strings extended.
(tramp-smb-not-handled-yet): Function removed.  All I/O primitives
are handled now.  All places where used updated accordingly.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region, tramp-smb-open-connection): Error
handling improved.
(tramp-smb-handle-delete-directory)
(tramp-smb-handle-directory-files)
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-make-directory)
(tramp-smb-handle-make-directory-internal): New file name
primitive functions implemented.
(tramp-smb-handle-insert-directory): In case parameter is not a
directory, the result of "dir filename*" will return too many
results.  They are filtered out now.
(tramp-smb-send-command): Returns nil if there has been an error
message from smbclient.  Used for improved error handling
mentioned above.
(tramp-smb-wait-for-output): Timeouts removed.  Too much trouble
with.
(tramp-smb-time-less-p, tramp-smb-time-subtract): Handle the case
when T1 or T2 is nil.  It shouldn't happen ever, but it did once.

* tramp.texi (External transfer methods): Note added for `smb'
method that's not implemented for Emacsen running locally under MS
Windows.  UNC file names shall be used instead of.
----------------------------
revision 2.10
date: 2002-11-22 14:51:36 -0800;  author: albinus;  state: Exp;  lines: +45 -17;


* tramp-smb.el (tramp-smb-handle-substitute-in-file-name):
Removed.  The default handler is good enough for us now.
(tramp-smb-advice-PC-do-completion): Advice for
`PC-do-completion'.  Corrects a the inconvenient usage of
`substitute-in-file-name' there.

* tramp.texi (External transfer methods): Remind the application
of "$$" in share names of the `smb' method.
----------------------------
revision 2.9
date: 2002-11-21 14:04:25 -0800;  author: albinus;  state: Exp;  lines: +59 -75;

* tramp-smb.el (tramp-use-smb): Remove variable.  "smb" method is
active now; beta test can start.
(tramp-smb-handle-file-newer-than-file-p): Apply
`tramp-smb-time-less-p' but `tramp-time-diff'.  Seems to be more
general.
(tramp-smb-handle-insert-directory): Use SWITCHES in order to
decide how to sort (but obscure dired variables).  Don't apply
`save-excursion'; the cursor must be at the end of the buffer
after insertion.  I should have it done from the beginning ...
(tramp-smb-handle-write-region): Remove unused variable
`trampbuf'.  Thanx to XEmacs compiler warning.
(tramp-smb-read-file-entry): Simplify handling of the dont-know
mtime value.
(tramp-smb-maybe-open-connection): Remove unused variable
`last-cmd-time'.  Thanx to XEmacs compiler warning.

* tramp.texi (External transfer methods): Add description of `smb'
method.
----------------------------
revision 2.8
date: 2002-11-20 14:53:03 -0800;  author: albinus;  state: Exp;  lines: +64 -37;

* tramp-smb.el (top-level): Autoload of "time-date" removed.
Needed functions snarfed from there.
(tramp-smb-handle-insert-directory): Dummy user renamed to
"nobody".
(tramp-smb-read-file-entry): Return list shortened; just MTIME is
used for all time strings and calculations.
(tramp-smb-open-connection): Test of anonymous USER introduced.
Also an empty HOST is tested, but does it makes sense?
(tramp-smb-half-a-year): New constant, in order to decide whether
to display time or year in dired buffers.
(tramp-smb-parse-time-months ): Snarfed from "time-date".  Alist
mapping month names to integers.
(tramp-smb-time-less-p): Snarfed from "time-date".  Replaces
`time-less-p'.
(tramp-smb-time-subtract): Snarfed from "time-date".  Replaces
`tramp-time-diff', which returns just an integer only.
----------------------------
revision 2.7
date: 2002-11-19 08:57:39 -0800;  author: albinus;  state: Exp;  lines: +311 -255;

* tramp-smb.el (top-level): Autoload "time-date".  Just a
work-around, until I have replaced the corresponding functions by
own implementation.
(tramp-smb-errors): List of error strings extended.
(tramp-smb-share-cache): New buffer local variable.  Holds the
share names of the respective host.
(tramp-smb-file-name-handler-alist): `vc-registered' changed to be
not-handled.  If default handler is used, there are problems with
version control files of shares themselves ...
(tramp-smb-handle-copy-file): Error handling improved, check for
shares is performed.
(tramp-smb-handle-file-attributes)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-name-all-completions)
(tramp-smb-handle-file-writable-p)
(tramp-smb-handle-insert-directory): `tramp-smb-get-file-entries'
used instead of own scenario.
(tramp-smb-get-share): Replace nil in case the share name isn't
completed.
(tramp-smb-get-path): Handling for "$" and "$$" added.  But I
still have the feeling it isn't trustworthy yet.  Too complex.
(tramp-smb-get-file-entries): New function.  Replaces
`tramp-smb-get-file-entry'.
(tramp-smb-read-file-entry): Reads share names as well now.
(tramp-smb-send-command): Erases always buffer.
(tramp-smb-maybe-open-connection): Check for being alive is
removed. Instead of, `process-status' is applied. Erasing the
buffer is removed, because it disturbs exited processes if just
the share names should be retrieved.
(tramp-open-connection-smb): Renamed to
`tramp-smb-open-connection' for uniqueness. Acknowledges now
domains in user names ("USER%DOMAIN"), and port numbers in host
names ("HOST#PORT").  Erasing the buffer is removed, because it
disturbs exited processes if just the share names should be
retrieved.
(tramp-smb-wait-for-output): Handling for exited processes
incorporated.
(tramp-smb-check-shares): Removed. Functionality moved to
`tramp-smb-open-connection' and `tramp-smb-get-file-entries',
respectively.
----------------------------
revision 2.6
date: 2002-11-10 11:43:57 -0800;  author: albinus;  state: Exp;  lines: +309 -56;

* tramp.el (tramp-handle-file-name-completion): Use Emacs file
name primitives instead of calling tramp-handle-* equivalents
directly.  Needed for tramp-smb.

* tramp-smb.el (tramp-smb-errors): List of error strings extended.
(tramp-smb-not-handled, tramp-smb-not-handled-yet):
`tramp-smb-not-handled' renamed to `tramp-smb-not-handled-yet'.
The new `tramp-smb-not-handled' returns nil for als primitives
which don't make sense for SMB servers.  All callers adapted.
(tramp-smb-handle-copy-file)
(tramp-smb-handle-file-name-all-completions)
(tramp-smb-handle-file-newer-than-file-p)
(tramp-smb-handle-rename-file)
(tramp-smb-handle-substitute-in-file-name)
(tramp-smb-handle-write-region): New file name primitive functions
implemented.
(tramp-smb-handle-delete-file): In the `let' clause, `path' must
be declared but `share'.  Found during compilation.
(tramp-smb-handle-file-symlink-p)
(tramp-smb-handle-set-visited-file-modtime)
(tramp-smb-handle-verify-visited-file-modtime): Replaced by
`tramp-smb-not-handled'.
(tramp-smb-handle-insert-directory): Handling of copyied files
added.
(tramp-smb-maybe-open-connection): Are-you-alive command changed
from "help" to "dir .".
(tramp-smb-wait-for-output): In case of finished process return
immediately.
(tramp-smb-check-shares): New function.  Reads share names.
----------------------------
revision 2.5
date: 2002-11-05 14:32:44 -0800;  author: albinus;  state: Exp;  lines: +196 -124;

* tramp-smb.el (tramp-smb-errors): List of error strings extended.
(tramp-smb-share): New buffer local variable.  Holds the share
name associated with the buffer process.
(tramp-smb-handle-delete-file, tramp-smb-handle-file-attributes)
(tramp-smb-handle-set-visited-file-modtime)
(tramp-smb-handle-verify-visited-file-modtime):
New file name primitive functions implemented.  The latter two do
nothing (yet).
(tramp-smb-handle-file-local-copy): `save-excursion' added.  I'm
not fully sure if it's needed here, but it is better in case of.
(tramp-smb-handle-insert-directory): Mode string adapted.
(tramp-smb-read-file-entry): Block introduced for better return
handling.  Return list values changed.  Callers	adapted.
----------------------------
revision 2.4
date: 2002-11-04 14:37:00 -0800;  author: albinus;  state: Exp;  lines: +103 -42;

* tramp-smb.el (tramp-smb-line): Defconst deleted.  Useless due to
nature of smbclient output.  More sophisticated handling in
`tramp-smb-read-file-entry'.
(tramp-smb-errors): List of error strings extended.
(tramp-smb-get-path): Additional parameter CONVERT for conversion
of "/" path separator into "\\".
(tramp-smb-get-file-entry): Top directory handling included.
(tramp-smb-read-file-entry): Reimplemented.  No chance to handle
smbclient output lines by a single regexp.
(tramp-smb-send-command): Parameters of commands enclosed in
\"...\".
----------------------------
revision 2.3
date: 2002-11-03 14:34:54 -0800;  author: albinus;  state: Exp;  lines: +309 -148;

tramp.el (tramp-handle-insert-file-contents): Use Emacs file
name primitives instead of calling tramp-handle-* equivalents
directly.  Needed for tramp-smb.

tramp-smb.el: First usefull version.  Directory traversing and
file displaying work.
----------------------------
revision 2.2
date: 2002-10-27 13:35:08 -0800;  author: albinus;  state: Exp;  lines: +7 -0;


tramp-ftp.el (top-level): Require some basic packages in order
to pacify byte-compiler.

tramp-smb.el (top-level): Ditto.
----------------------------
revision 2.1
date: 2002-10-27 12:53:49 -0800;  author: albinus;  state: Exp;

* tramp.el (top-level): Load tramp-smb.el.  Remove autoload of
`tramp-ftp-file-name-p'; not needed anymore.
(tramp-foreign-file-name-handler-alist): New variable.  Foreign
methods shall plug in.
(tramp-file-name-for-operation): Relative file names are checked
via `expand-file-name'.  If no absolute file name is given,
default directory of current-buffer is used.
(tramp-find-foreign-file-name-handler): New function.  Parses
`tramp-foreign-file-name-handler-alist' in order to find foreign
file name handlers.
(tramp-file-name-handler): Apply
`tramp-find-foreign-file-name-handler' instead of simply looking
for FTP foreign method.

* tramp-ftp.el (top-level): Plug into
`tramp-foreign-file-name-handler-alist'.

* tramp-smb.el: New file.  Functionality disabled by
`tramp-use-smb' during development.

* Makefile (tramp): Add tramp-smb.elc.
----------------------------
revision 2.29.2.16
date: 2008-02-02 02:28:50 -0800;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: OLLpc6RiCvyukOPs;
*** empty log message ***
----------------------------
revision 2.29.2.15
date: 2007-07-25 12:37:30 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.29.2.14
date: 2007-05-27 08:43:53 -0700;  author: albinus;  state: Exp;  lines: +1 -6;  commitid: wsslTl4EbLwp8Ajs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-multi-method)
(tramp-file-name-method, tramp-file-name-user)
(tramp-file-name-host, tramp-file-name-localname): New defuns,
replacing defstruct `tramp-file-name'.
(tramp-handle-file-remote-p, tramp-completion-dissect-file-name1)
(tramp-dissect-file-name, tramp-dissect-multi-file-name): Apply
`vector' instead of `make-tramp-file-name'.
----------------------------
revision 2.29.2.13
date: 2007-03-04 22:46:02 -0800;  author: albinus;  state: Exp;  lines: +3 -3;

* lisp/tramp.el (tramp-make-temp-file): New parameter FILENAME.  Append
its extension to the resulting temporary file name.
(tramp-handle-file-local-copy, tramp-handle-write-region): Apply
it.

* lisp/tramp-smb.el (tramp-smb-handle-file-local-copy)
(tramp-smb-handle-write-region): Apply it.
----------------------------
revision 2.29.2.12
date: 2006-01-30 12:56:56 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp-smb.el (tramp-smb-wait-for-output): Wait always for the
prompt.  If it returns earlier (when detecting an error message),
the rest of the output will merge accidently with the output of
the next command.  Reported by M Jared Finder <jared@hpalace.com>.
----------------------------
revision 2.29.2.11
date: 2005-08-07 08:06:53 -0700;  author: albinus;  state: Exp;  lines: +2 -20;

Version 2.0.50 released.

* configure.ac: Bump version.

* lisp/tramp.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-accept-process-output): New defun.
(tramp-process-one-action, tramp-process-one-multi-action)
(tramp-wait-for-regexp, tramp-wait-for-output)
(tramp-discard-garbage-erase-buffer): Call it.  Reported by David
Howells <dhowells@redhat.com>.
(clear-visited-file-modtime): Defadvice removed.  The check for
unset buffer's modtime does not need to be based on
`tramp-buffer-file-attributes'.  Suggested by RMS.

* lisp/tramp-smb.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-smb-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-smb-wait-for-output): Call `tramp-accept-process-output'.
----------------------------
revision 2.29.2.10
date: 2005-07-10 14:36:48 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.29.2.9
date: 2005-06-26 12:23:35 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fifth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in:
----------------------------
revision 2.29.2.8
date: 2005-02-20 08:09:23 -0800;  author: albinus;  state: Exp;  lines: +2 -1;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set always
permissions, because there might be an old auto-saved file
belonging to another original file.  This could be a security
threat.

* lisp/tramp-smb.el (tramp-smb-open-connection): `executable-find'
doesn't exist in older Emacsen.  To be checked before applied.

* lisp/trampver.texi.in: Replace "Emacs" by "GNU Emacs".

* lisp/tramp.texi: Replace "Emacs" by "GNU Emacs".
(Default Method): Offer shortened syntax for "su" and "sudo"
methods.
----------------------------
revision 2.29.2.7
date: 2005-02-16 13:29:02 -0800;  author: albinus;  state: Exp;  lines: +45 -88;

* lisp/tramp-smb.el (all): Remove debug construct for
`with-parsed-tramp-file-name'.
(tramp-smb-prompt): Prompt can contain spaces inside directory
names.
(tramp-smb-handle-delete-directory, tramp-smb-handle-delete-file):
No error message if DIRECTORY or FILENAME doesn't exist.
(tramp-smb-open-connection): Check existence of
`tramp-smb-program'.
----------------------------
revision 2.29.2.6
date: 2005-02-12 03:34:28 -0800;  author: albinus;  state: Exp;  lines: +4 -4;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.29.2.5
date: 2004-12-23 02:58:23 -0800;  author: albinus;  state: Exp;  lines: +8 -49;

* configure.ac: Bump version (to 2.0.47-pre).

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`substitute-in-file-name.
(tramp-smb-handle-substitute-in-file-name): New defun.
(tramp-smb-advice-PC-do-completion): Delete advice.

Sync with trunk (Michael Albinus <michael.albinus@gmx.de>).

* lisp/tramp.el (tramp-handle-file-newer-than-file-p): Reverse logic.
From Andrew J. Korty <ajk@iu.edu>.
----------------------------
revision 2.29.2.4
date: 2004-10-17 09:03:17 -0700;  author: albinus;  state: Exp;  lines: +5 -3;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.29.2.3
date: 2004-10-12 13:37:18 -0700;  author: albinus;  state: Exp;  lines: +8 -1;


Version 2.0.45 released.

* configure.ac: Bump version.

* lisp/tramp-smb.el
(tramp-smb-advice-PC-do-completion): Don't activate
advice during definition.  This is done later on, depending on
test result of `substitute-in-file-name'.  Suggested by Stefan
Monnier <monnier@iro.umontreal.ca>.
----------------------------
revision 2.29.2.2
date: 2004-07-13 12:29:52 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


Sync with trunk.
----------------------------
revision 2.29.2.1
date: 2004-05-29 14:40:49 -0700;  author: albinus;  state: Exp;  lines: +2 -1;


Version 2.0.41 released.

Sync with trunk
----------------------------
revision 2.126.2.1
date: 2011-01-24 02:09:41 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-util.el,v
Working file: lisp/tramp-util.el
head: 2.70
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.69
	branch-2-1-stable: 2.64.0.2
	branchpoint-2-1-stable: 2.64
	V-2-1-19: 2.64
	V-2-1-18: 2.61
	V-2-1-17: 2.61
	V-2-1-16: 2.61
	V-2-1-15: 2.61
	V-2-1-14: 2.61
	V-2-1-13: 2.60
	V-2-0-57: 2.8.2.12
	V-2-1-12: 2.55
	V-2-1-11: 2.52
	V-2-1-10: 2.46
	V-2-0-56: 2.8.2.9
	V-2-1-9: 2.37
	V-2-1-8: 2.35
	V-2-0-55: 2.8.2.8
	V-2-1-7: 2.30
	V-2-0-54: 2.8.2.8
	V-2-1-6: 2.30
	V-2-0-53: 2.8.2.8
	V-2-0-52: 2.8.2.8
	V-2-1-5: 2.21
	V-2-1-4: 2.14
	V-2-0-51: 2.8.2.6
	V-2-0-50: 2.8.2.6
	V-2-0-49: 2.8.2.5
	V-2-0-48: 2.8.2.5
	V-2-1-3: 2.12
	V-2-0-47: 2.8.2.4
	V-2-0-46: 2.8
	V-2-0-45: 2.8
	V-2-1-2: 2.8
	V-2-0-44: 2.8
	V-2-1-1: 2.8
	V-2-0-43: 2.8
	V-2-0-42: 2.8
	V-2-0-41: 2.8
	V-2-1-0: 2.8
	branch-2-0-stable: 2.8.0.2
	branchpoint-2-0-stable: 2.8
	V-2-0-40: 2.8
	V-2-0-39: 2.8
	V-2-0-38: 2.8
	V-2-0-37: 2.7
	V-2-0-36: 2.7
	V-2-0-35: 2.7
	V-2-0-34: 2.6
	V-2-0-33: 2.6
	V-2-0-32: 2.6
	V-2-0-30: 2.6
	V-2-0-29: 2.6
	V-2-0-28: 2.6
	V-2-0-27: 2.6
	V-2-0-26: 2.6
	V-2-0-25: 2.6
	V-2-0-24: 2.6
	V-2-0-23: 2.6
	V-2-0-22: 2.6
	V-2-0-21: 2.6
	V-2-0-20: 2.6
	V-2-0-19: 2.6
	V-2-0-18: 2.6
	V-2-0-17: 2.6
	V-2-0-16: 2.6
	V-2-0-15: 2.6
	V-2-0-14: 2.6
	V-2-0-13: 2.6
	completion: 2.6.0.2
	V-2-0-12: 2.6
	V-2-0-11: 2.6
	V-2-0-10: 2.6
	V-2-0-9: 2.6
	V-2-0-8: 2.6
	V-2-0-7: 2.6
	V-2-0-6: 2.6
	V-2-0-5: 2.6
	V-2-0-4: 2.6
	V-2-0-3: 2.6
	V-2-0-1: 2.6
	EMACS-21: 2.6
	V-2-0-0: 2.6
	tramp-xemacs-pkg: 2.4.0.2
	stable: 2.1.0.2
keyword substitution: kv
total revisions: 83;	selected revisions: 83
description:
----------------------------
revision 2.70
date: 2011-01-26 01:43:34 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.69
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 2.68
date: 2010-11-13 02:27:32 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: JAP0ddpM79e3HfWu;
* tramp-compat.el (tramp-compat-line-beginning-position)
(tramp-compat-line-end-position): Remove them.

* tramp.el (tramp-parse-rhosts-group, tramp-parse-shosts-group)
(tramp-parse-sconfig-group, tramp-parse-passwd-group)
(tramp-parse-netrc-group, tramp-parse-putty-group):
* tramp-cmds.el (tramp-append-tramp-buffers):
* tramp-sh.el (tramp-do-file-attributes-with-ls)
(tramp-sh-handle-file-selinux-context)
(tramp-sh-handle-file-name-all-completions)
(tramp-sh-handle-insert-directory)
(tramp-sh-handle-expand-file-name, tramp-find-executable)
(tramp-wait-for-output, tramp-send-command-and-read)
* tramp-smb.el (tramp-smb-read-file-entry)
(tramp-smb-get-cifs-capabilities)
* tramp-util.el (tramp-PC-expand-many-files): Use `point-at-eol'.

* tramp-sh.el (tramp-sh-handle-insert-directory) Use `point-at-bol'.
(tramp-remote-coding-commands): Add an alternative using "base64
-d -i".  This is needed for older base64 versions from GNU
coreutils.  Reported by Klaus Reichl
<Klaus.Reichl@thalesgroup.com>.
----------------------------
revision 2.67
date: 2010-10-19 13:13:45 -0700;  author: albinus;  state: Exp;  lines: +15 -22;  commitid: rL0aBeDCMHZ5K5Tu;
* tramp-util.el (tramp-advice-executable-find): Do not check for
`tramp-fish-file-name-handler'.  Use
`tramp-sh-handle-executable-find'.
(tramp-advice-process-file): Do
not check for `tramp-fish-file-name-handler'.
(tramp-advice-call-process-region): Do not check for
`tramp-fish-file-name-handler'.  Use
`tramp-sh-handle-call-process-region.
----------------------------
revision 2.66
date: 2010-09-15 13:14:11 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: cEIrA9vZbWCTPIOu;
Ensure XEmacs compatibility.

* Makefile.in (tramp-loaddefs.el): Adapt `autoload-trim-file-name'
and feature name.
(distclean): Remove trampver.el, it is handled in the upper Makefile.

* tramp-compat.el (tramp-compat-with-temp-message)
(tramp-compat-font-lock-add-keywords, tramp-compat-process-get)
(tramp-compat-process-put): New defuns.

* tramp.el (top):
* tramp-gvfs.el (top):
* tramp-cache.el (top): Use `tramp-compat-font-lock-add-keywords'.

* tramp.el (tramp-progress-reporter-update): Use `tramp-compat-funcall.

* tramp.el (tramp-process-actions):
* tramp-gvfs.el (tramp-handle-vc-registered):
* tramp-sh.el (tramp-gvfs-handler-askquestion)
(tramp-get-remote-stat, tramp-get-remote-readlink): Use
`tramp-compat-with-temp-message'.

* tramp-sh.el (top): Require 'cl.
(tramp-handle-start-file-process): Use `tramp-compat-process-get'.
(tramp-open-connection-setup-interactive-shell): Use
`tramp-compat-process-put'.

* tramp-util.el (top): Require 'tramp-sh.
----------------------------
revision 2.65
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +5 -2;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.64
date: 2010-06-12 01:54:22 -0700;  author: albinus;  state: Exp;  lines: +5 -4;  commitid: FPHoi5NWl1x08sCu;
* tramp.el (tramp-remote-process-environment): Protect version
string by apostroph.
(tramp-shell-prompt-pattern): Do not use a shy group in case of
XEmacs.
(tramp-file-name-for-operation): Add `call-process-region'.
(tramp-set-process-query-on-exit-flag): Fix wrong parentheses.

* tramp-compat.el (top): Do not autoload
`tramp-handle-file-remote-p'.  Load tramp-util.el and tramp-vc.el
only when `start-file-process' is not bound.
(tramp-advice-file-expand-wildcards): Do not use
`tramp-handle-file-remote-p'.
(tramp-compat-make-temp-file): Handle the case, that
`make-temp-file' has no third argument EXTENSION.

* tramp-util.el (top): Apply advices only when there are no file
name handlers for `start-file-process' and `process-file'.
----------------------------
revision 2.63
date: 2010-05-09 12:45:05 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: mYjXXOy50YSYO8yu;
* tramp-compat.el (byte-compile-not-obsolete-vars): Define if not
bound.
(tramp-compat-copy-file): Add PRESERVE-SELINUX-CONTEXT.
(tramp-compat-funcall): New defmacro.
(tramp-compat-line-beginning-position)
(tramp-compat-line-end-position)
(tramp-compat-temporary-file-directory)
(tramp-compat-make-temp-file, tramp-compat-file-attributes)
(tramp-compat-copy-file, tramp-compat-copy-directory)
(tramp-compat-delete-file, tramp-compat-delete-directory)
(tramp-compat-number-sequence, tramp-compat-process-running-p)
* tramp.el (top, with-progress-reporter)
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-handle-dired-compress-file, tramp-handle-shell-command)
(tramp-completion-mode-p, tramp-check-for-regexp)
(tramp-open-connection-setup-interactive-shell)
(tramp-compute-multi-hops, tramp-read-passwd, tramp-clear-passwd)
(tramp-time-diff, tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag, tramp-unload-tramp)
* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-reporter-dump-variable, tramp-load-report-modules)
(tramp-append-tramp-buffers)
* tramp-gvfs.el (tramp-gvfs-handle-file-selinux-context)
* tramp-util.el (tramp-gud-file-name): Use it.

* tramp-imap.el (top): Autoload `epg-make-context'.
----------------------------
revision 2.62
date: 2010-03-19 07:12:20 -0700;  author: albinus;  state: Exp;  lines: +2 -26;  commitid: vPLrSNK85jZuCyru;
Discard GNU Emacs 21 compatibility.

* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-get-remote-path): Use `copy-tree'.
(tramp-set-auto-save-file-modes): Adapt version check.

* tramp-compat.el (tramp-advice-file-expand-wildcards): No need to
protect `featurep' call anymore.
(tramp-compat-make-temp-file): Simplify fallback implementation.
(tramp-compat-copy-tree): Remove function.

* tramp-fish.el (tramp-fish-handle-directory-files-and-attributes):
Use `tramp-compat-file-attributes'.

* tramp-util.el (tramp-advice-dired-insert-directory): Remove advice.
----------------------------
revision 2.61
date: 2008-05-13 14:18:09 -0700;  author: albinus;  state: Exp;  lines: +5 -6;  commitid: FHbqZ9Nyl5JXFQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.60
date: 2008-03-21 09:41:13 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: OqRaMUSG9BqAQ0Ws;
Fix up encoding.
----------------------------
revision 2.59
date: 2008-03-17 15:43:31 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: Hy3RFLIM1poQYwVs;
* tramp-util.el (top): Move coding cookie at the end.
----------------------------
revision 2.58
date: 2008-03-15 14:45:44 -0700;  author: albinus;  state: Exp;  lines: +7 -5;  commitid: sBJiDWz27kN0JgVs;
* tramp-util.el (tramp-advice-file-remote-p): Protect by
`save-match-data'.
----------------------------
revision 2.57
date: 2008-02-03 03:44:55 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: IcM3oS8JZv8BIWPs;
*** empty log message ***
----------------------------
revision 2.56
date: 2008-01-12 03:04:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.55
date: 2007-10-27 06:50:43 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: h3wsKiYvXLWtAeDs;

* lisp/tramp.el (tramp-wrong-passwd-regexp): Tune regexp.
(tramp-get-remote-tmpdir): New defun.
(tramp-make-tramp-temp-file): Use it.
(tramp-local-call-process): New defun.  Replace all calls of
`call-process' by this when appropriate.
(tramp-handle-write-region): Replace calls of `file-attributes' by
`tramp-compat-file-attributes'.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Make the first command a `tramp-send-command' call, with let-bind
of `tramp-end-of-output'.
(tramp-version, tramp-bug, tramp-reporter-dump-variable)
(tramp-load-report-modules, tramp-append-tramp-buffers): Move to
tramp-cmds.el.

* lisp/tramp-fish.el (tramp-fish-handle-copy-file)
(tramp-fish-do-copy-or-rename-file)
(tramp-fish-do-copy-or-rename-file-directly):
* lisp/tramp-smb.el (tramp-smb-handle-copy-file):
Add parameter PRESERVE-UID-GID.
----------------------------
revision 2.54
date: 2007-10-22 12:06:20 -0700;  author: albinus;  state: Exp;  lines: +57 -0;  commitid: u424SqaGvkwRuCCs;

* lisp/tramp.el (tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Improve sending
initial commands.
(tramp-action-terminal): Send debug message.
(tramp-wait-for-shell-prompt, tramp-send-command-internal): Removed.
(tramp-barf-if-no-shell-prompt): Insert code of
`tramp-wait-for-shell-prompt'.

* lisp/tramp-util.el (tramp-PC-expand-many-files): New defun.
(tramp-advice-PC-expand-many-files): Defadvice moved from tramp.el.
----------------------------
revision 2.53
date: 2007-10-14 11:51:28 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: t0mwalxwQ9YHFABs;

* lisp/tramp.el (tramp-make-tramp-temp-file): We can get rid of
DONT-CREATE.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): Use `make-temp-name'.  This is
possible, because we don't need to create the temporary file, but
we need a prefix for ssh, which has its own temporary file
handling.
(tramp-handle-delete-directory): Add "-f" to rmdir.

* lisp/tramp-util.el (top): Check for `tramp-handle-start-file-process',
not its symbol-function.
----------------------------
revision 2.52
date: 2007-10-03 03:45:48 -0700;  author: albinus;  state: Exp;  lines: +0 -41;  commitid: T0jhSlYBL14Nk8As;

* lisp/tramp.el (top): Add tramp-compat to `tramp-unload-hook'.
(tramp-file-name-handler-alist): Add
`tramp-handle-insert-file-contents-literally'.  Neded for XEmacs.
(tramp-make-temp-file): Use `make-temp-name'. `make-temp-file',
used before, creates the file already, which is not desired.
(tramp-do-copy-or-rename-file-directly): Simplify handling of
temporary file.
(tramp-handle-insert-file-contents): Assign the result in the
short track case.
(tramp-handle-insert-file-contents-literally): New defun.
(tramp-completion-mode-p): Revert change from 2007-09-24.
Checking for `return' etc as last character is not sufficient, for
example in dired-mode when entering <g> (revert-buffer) or
<s> (dired-sort).

* lisp/tramp-compat.el (top): Add also compatibility code for loading
appropriate timer package.
(tramp-compat-copy-tree): Check for `subrp' and `symbol-file' in
order to avoid autoloading problems.

* lisp/tramp-efs-el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Move further compatibility code to
tramp-compat.el.

	* tramp-ftp.el (tramp-ftp-file-name-handler): Handle the case
	where the second parameter of `copy-file' or `rename-file' is a
	remote file but not via ftp.

	* tramp-util.el: Remove `tramp-minor-mode' and its declarations.
----------------------------
revision 2.51
date: 2007-09-30 09:32:29 -0700;  author: albinus;  state: Exp;  lines: +27 -38;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 2.50
date: 2007-09-28 08:52:02 -0700;  author: albinus;  state: Exp;  lines: +6 -2;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 2.49
date: 2007-08-28 13:05:52 -0700;  author: albinus;  state: Exp;  lines: +5 -5;  commitid: HaYV2zcWsD8QAyvs;

cvs update: Updating admin/unidata
cvs update: Updating etc
P etc/ChangeLog
P etc/NEWS
cvs update: Updating etc/charsets
cvs update: Updating etc/e
cvs update: Updating etc/images
cvs update: Updating etc/images/ezimage
cvs update: Updating etc/images/gnus
cvs update: Updating etc/images/gud
cvs update: Updating etc/images/icons
cvs update: Updating etc/images/lc
cvs update: Updating etc/images/low-color
cvs update: Updating etc/images/mail
cvs update: Updating etc/images/smilies
cvs update: Updating etc/images/tree-widget
cvs update: Updating etc/images/tree-widget/default
cvs update: Updating etc/images/tree-widget/folder
cvs update: Updating etc/refcards
U etc/refcards/de-refcard.pdf
P etc/refcards/de-refcard.tex
cvs update: Updating etc/tree-widget
cvs update: Updating etc/tree-widget/default
cvs update: Updating etc/tree-widget/folder
cvs update: Updating etc/tutorials
cvs update: Updating gc
cvs update: Updating gc/Mac_files
cvs update: Updating gc/doc
cvs update: Updating gc/include
cvs update: Updating gc/include/private
cvs update: Updating info
cvs update: Updating leim
cvs update: Updating leim/CXTERM-DIC
cvs update: Updating leim/MISC-DIC
cvs update: Updating leim/SKK-DIC
cvs update: Updating leim/ja-dic
cvs update: Updating leim/quail
cvs update: Updating leim/skk
cvs update: Updating lib-src
cvs update: Updating lisp
P lisp/ChangeLog
P lisp/info.el
P lisp/time.el
cvs update: Updating lisp/calc
cvs update: Updating lisp/calendar
cvs update: Updating lisp/emacs-lisp
cvs update: Updating lisp/emulation
cvs update: Updating lisp/erc
cvs update: Updating lisp/eshell
cvs update: Updating lisp/gnus
cvs update: Updating lisp/international
cvs update: Updating lisp/language
cvs update: Updating lisp/mail
cvs update: Updating lisp/mh-e
cvs update: Updating lisp/net
cvs update: Updating lisp/obsolete
cvs update: Updating lisp/play
P lisp/play/bubbles.el
P lisp/play/gamegrid.el
cvs update: Updating lisp/progmodes
P lisp/progmodes/cc-langs.el
cvs update: Updating lisp/term
P lisp/term/x-win.el
cvs update: Updating lisp/textmodes
cvs update: Updating lisp/toolbar
cvs update: Updating lisp/url
cvs update: Updating lispintro
cvs update: Updating lispref
cvs update: Updating lock
cvs update: Updating lwlib
cvs update: Updating m4
cvs update: Updating mac
cvs update: Updating mac/Emacs.app
cvs update: Updating mac/Emacs.app/Contents
cvs update: Updating mac/Emacs.app/Contents/MacOS
cvs update: Updating mac/Emacs.app/Contents/Resources
cvs update: Updating mac/Emacs.app/Contents/Resources/English.lproj
cvs update: Updating mac/bin
cvs update: Updating mac/inc
cvs update: Updating mac/inc/sys
cvs update: Updating mac/src
cvs update: Updating man
cvs update: Updating msdos
cvs update: Updating notes
cvs update: Updating nt
cvs update: Updating nt/icons
cvs update: Updating nt/inc
cvs update: Updating nt/inc/arpa
cvs update: Updating nt/inc/netinet
cvs update: Updating nt/inc/sys
cvs update: Updating oldXMenu
cvs update: Updating site-lisp
cvs update: Updating src
P src/ChangeLog
P src/dispextern.h
P src/gtkutil.c
P src/keyboard.c
cvs update: Updating src/bitmaps
cvs update: Updating src/m
cvs update: Updating src/s
cvs update: Updating vms
magdalene:~/src/emacs> ssh ford
The authenticity of host 'ford (192.168.0.50)' can't be established.
RSA key fingerprint is 4f:06:e0:46:f9:13:3e:ac:ae:41:eb:9a:e2:1f:88:a6.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'ford,192.168.0.50' (RSA) to the list of
known hosts.
Linux LKG29808F 2.6.18-4-ixp4xx #1 Sun Apr 22 08:34:11 UTC 2007 armv5tel

The programs included with the Debian GNU/Linux system are free
software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

  GNU nano 2.0.2            File: /tmp/cvsfT5uaA


----------------------------------------------------------------------
----------------------------------------------------------------------
* lisp/tramp.el (tramp-handle-set-file-times): Flush the file
properties.
(tramp-set-file-uid-gid, tramp-get-local-uid)
(tramp-get-local-gid): New defuns.
(tramp-handle-copy-file): Handle new parameter PRESERVE-UID-GID.
(tramp-do-copy-or-rename-file): New parameter PRESERVE-UID-GID.
Improve fast track.
(tramp-do-copy-or-rename-file-directly): Sync parameter list with
the other tramp-do-copy-or-rename-file-* functions.  Major
rewrite.
(tramp-handle-file-local-copy, tramp-handle-insert-file-contents)
(tramp-handle-write-region): Improve fast track.
(tramp-handle-file-remote-p): IDENTIFICATION can also be
'localname.
(tramp-maybe-open-connection): Let `process-adaptive-read-buffering'
be nil.

* lisp/tramp-util.el (tramp-advice-process-file): Rename from
`tramp-advice-call-process'.
(tramp-advice-call-process-shell-command): Correct doc string.
----------------------------
revision 2.48
date: 2007-07-29 08:39:39 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: 6Mig8uNEFEeF5Grs;
*** empty log message ***
----------------------------
revision 2.47
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +5 -5;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.46
date: 2007-07-17 13:49:43 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: WDcBCTK3JXbObaqs;

* lisp/tramp.el (tramp-handle-file-remote-p): Handle optional parameter
IDENTIFICATION.

* lisp/tramp-util.el (tramp-advice-file-remote-p): Handle optional
parameter IDENTIFICATION.
----------------------------
revision 2.45
date: 2007-07-16 14:33:02 -0700;  author: albinus;  state: Exp;  lines: +11 -6;  commitid: hlv4JiwKkWs8s2qs;

* lisp/tramp.el (tramp-handle-set-file-times): New defun.  Replaces
`tramp-touch'.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add entry for `set-file-times'.
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-out-of-band): Use `set-file-times'.
(tramp-handle-unhandled-file-name-directory): Rewrite.
(tramp-convert-file-attributes): Add error handling when inode is
extraordinary big.
(tramp-get-inode): Change parameter from FILE to VEC.

* lisp/tramp-fish.el (tramp-fish-file-name-handler-alist): Add entry
for `set-file-times'.  Rename `start-process' into
`start-file-process'.  Remove `call-process' entry.
(tramp-fish-handle-set-file-times): New defun.
(tramp-fish-handle-executable-find): Use `process-file'.
(tramp-fish-handle-process-file): New defun.  Replaces
`tramp-fish-handle-call-process'.
(tramp-fish-do-copy-or-rename-file-directly): Use
`set-file-times'.
(tramp-fish-get-file-entries): Change `tramp-get-inode' parameter.

* lisp/tramp-smb.el (tramp-smb-handle-file-attributes): Change
`tramp-get-inode' parameter.

* lisp/tramp-util.el (all): Change all checks to (fboundp
'start-file-process).
(set-file-times): Add a defalias if function does not exist.

* texi/tramp.texi (Frequently Asked Questions): Simplify recentf
example.
----------------------------
revision 2.44
date: 2007-07-08 14:03:48 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: 74pqOgnR9kgIy0ps;
*** empty log message ***
----------------------------
revision 2.43
date: 2007-07-08 02:36:29 -0700;  author: albinus;  state: Exp;  lines: +5 -6;  commitid: uObdz1vQQBwFKWos;

* lisp/tramp.el (tramp-handle-file-remote-p): Handle optional parameter
CONNECTED.

* lisp/tramp-util.el (tramp-advice-file-remote-p): Handle optional
parameter CONNECTED.
(all): Use `unhandled-file-name-directory' where appropriate.
----------------------------
revision 2.42
date: 2007-07-01 22:09:52 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.41
date: 2007-07-01 11:31:35 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.40
date: 2007-06-20 13:26:39 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 6Fqxls1tJZzgVGms;

* lisp/tramp.el:
* lisp/tramp-cache.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el: Use `expand-file-name' instead of `concat' where
appropriate.

* lisp/tramp.el (tramp-action-yesno, tramp-action-yn): Protect
`pop-to-buffer' by `save-match-data'.

* texi/tramp.texi (Filename completion): Rework examples for local
filename completion.
----------------------------
revision 2.39
date: 2007-05-31 13:15:43 -0700;  author: albinus;  state: Exp;  lines: +23 -6;  commitid: ST0w65uyFLXNv7ks;

* lisp/tramp-cache.el (tramp-persistency-file-name): Check also for
`user-emacs-directory' and `user-init-directory'.

* lisp/tramp-gw.el (tramp-gw-open-connection): Apply `vector' instead
of `make-tramp-file-name'.

* lisp/tramp-util.el (all): Quote the function names in
`tramp-util-unload-hook' if they aren't symbols yet.
(tramp-advice-before-ediff-exec-process): New defadvice.
----------------------------
revision 2.38
date: 2007-05-27 12:54:44 -0700;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: 7PsnkV1mXPbnwBjs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-method,
(tramp-file-name-user, tramp-file-name-host)
(tramp-file-name-localname): New defuns, replacing defstruct
`tramp-file-name'.
(tramp-completion-dissect-file-name1, tramp-compute-multi-hops)
(tramp-dissect-file-name): Apply `vector' instead of
`make-tramp-file-name'.
(tramp-do-copy-or-rename-file-out-of-band): Aset 3rd index instead
of 4th, when setting localname.
(tramp-compute-multi-hops): Aset 2nd index instead of 3rd, when
setting host.

* lisp/tramp-cache.el (all): Aset 3rd index instead of 4th, when
unifying localname.
----------------------------
revision 2.37
date: 2007-01-28 12:08:55 -0800;  author: albinus;  state: Exp;  lines: +9 -1;

* lisp/tramp-util.el (top): Add defadvices for `browse-url-*'.
----------------------------
revision 2.36
date: 2007-01-15 13:34:17 -0800;  author: albinus;  state: Exp;  lines: +3 -2;

* tramp.el (tramp-handle-start-process): BUFFER can be nil

* tramp-util.el (top): Add defadvice for `ispell-start-process'.
----------------------------
revision 2.35
date: 2006-12-30 14:31:18 -0800;  author: albinus;  state: Exp;  lines: +4 -2;

* lisp/tramp.el (tramp-file-name-handler-alist): Add handler for
`shell-command'.
(tramp-handle-shell-command): New defun.
(tramp-touch): Don't bind `shell-file-name' locally.

* lisp/tramp-fish.el (tramp-fish-file-name-handler-alist): Add handler
for `shell-command'.

* lisp/tramp-util.el (start-process-shell-command)
(call-process-shell-command): Bind `shell-command-switch' locally.
----------------------------
revision 2.34
date: 2006-12-29 15:41:25 -0800;  author: albinus;  state: Exp;  lines: +17 -5;

* lisp/tramp.el (tramp-handle-call-process-region): New defun.
(tramp-touch): Use `shell-command' instead of `call-process', in
order to make it usable also for the `fish' method.

* lisp/tramp-fish.el (tramp-fish-handle-insert-file-contents): Move
point to the initial place after insertion.
(tramp-fish-handle-write-region): Don't send zero length data.

* lisp/tramp-util.el (tramp-advice-call-process-region): New defadvice.
----------------------------
revision 2.33
date: 2006-12-27 14:12:29 -0800;  author: albinus;  state: Exp;  lines: +10 -5;

* Makefile.in: Add tramp-fish.el

* lisp/tramp-fish.el: New package.

* lisp/tramp.el (top): Require tramp-fish.
(tramp-inodes): New defvar.
(tramp-handle-expand-file-name): Cache "home-directory".
(tramp-get-inode): New defun.

* lisp/tramp-smb.el (tramp-smb-no-stat, tramp-smb-inodes)
(tramp-smb-get-inode): Removed.  Apply new names.

* lisp/tramp-util.el (tramp-advice-executable-find): Add check for
`tramp-fish-file-name-handler'.

* texi/tramp.texi (Inline methods): Add `fish' method.
----------------------------
revision 2.32
date: 2006-12-26 13:42:55 -0800;  author: albinus;  state: Exp;  lines: +6 -9;

* lisp/tramp.el (tramp-action-process-alive)
(tramp-wait-for-regexp): Pop connection buffer in case of error.
(tramp-exists-file-name-handler): Handle also `default-directory'.
(tramp-half-a-year, tramp-parse-time-months): New defconst.
Transferred from tramp-smb.el.
(tramp-time-less-p, tramp-time-subtract): New defuns.  Transferred
from tramp-smb.el.
(tramp-time-diff): Use them.

* lisp/tramp-smb.el (tramp-smb-half-a-year)
(tramp-smb-parse-time-months, tramp-smb-time-less-p)
(tramp-smb-time-subtract): Removed.  Apply new names.

* lisp/tramp-util.el (top): Don't check for file name handlers of
`start-process-shell-command' and `call-process-shell-command'.

* texi/tramp.texi (Connection types): Mention `scpc' method.
(Default Method): Offer `scpc' for editing large files.
----------------------------
revision 2.31
date: 2006-10-24 22:47:09 -0700;  author: albinus;  state: Exp;  lines: +173 -163;

* configure.ac: Bump version (to 2.1.8-pre).

* lisp/tramp.el (tramp-yn-prompt-regexp): Add question from plink.
(tramp-message): Reduce messages in minibuffer.
(tramp-handle-call-process): Fix error in error handling.
(tramp-touch): UTC handling is not possible for XEmacs.

* lisp/tramp-cache.el (top): Don't autoload macro
`with-parsed-tramp-file-name' but function
`tramp-dissect-file-name'.
(tramp-cache-before-revert-function): Change implementation
accordingly.  Reported by Jonathan Hankins
<jonathan-hankins@mindspring.com>.

* lisp/tramp-util.el (tramp-advice-executable-find): Check for
`load-in-progress)'.
(tramp-advice-call-process): Add check for
`tramp-fish-file-name-handler'.
(tramp-grep-setup, tramp-gud-setup, tramp-ediff-setup): Remove
functions, and call defadvices directly. There is no need for
`eval-after-load'.
(top): Add defadvices for `gnus-1', `jka-compr-call-process' and
`jka-compr-partial-uncompress'.
----------------------------
revision 2.30
date: 2006-05-27 11:43:31 -0700;  author: albinus;  state: Exp;  lines: +64 -17;

* lisp/tramp.el (tramp-initial-commands): Removed.
(tramp-remote-process-environment): Add the settings from
`tramp-initial-commands' here.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add `executable-find' entry.
(tramp-message): Apply `save-match-data'.
(tramp-do-copy-or-rename-file-out-of-band): `executable-find' must
be called locally.
(tramp-handle-executable-find): New defun.
(tramp-process-one-action)
(tramp-open-connection-setup-interactive-shell): Remove some
messages.  Send the "unset" commands as one bunch for
optimization.
(defun tramp-send-command-internal): Remove the MSG parameter.

* lisp/tramp-smb.el (tramp-smb-open-connection): `executable-find' must
be called locally.

* lisp/tramp-util.el (tramp-advice-executable-find)
(start-process-shell-command)
(tramp-advice-call-process-shell-command): New defadvices.
(tramp-advice-start-process, tramp-advice-call-process): Don't
apply parameter lists explicitely.
----------------------------
revision 2.29
date: 2006-05-24 13:12:23 -0700;  author: albinus;  state: Exp;  lines: +15 -0;

* lisp/tramp.el (tramp-message): Write into debug buffer only if
`tramp-verbose-level' is greater than or equal to 4.
(tramp-get-completion-function): Add
`tramp-parse-connection-properties´.
(tramp-process-initial-commands, tramp-post-connection): Removed,
also their respective calls..
(tramp-open-connection-setup-interactive-shell) Add code from
`tramp-process-initial-commands' and `tramp-post-connection'.

* lisp/tramp-cache.el (tramp-parse-connection-properties): New defun.

* lisp/tramp-util.el (tramp-ediff-setup): New defun.

* texi/tramp.texi (Traces and Profiles): Tramp debug buffer is written
with verbosity level 4 onwards.
----------------------------
revision 2.28
date: 2006-05-21 09:15:06 -0700;  author: albinus;  state: Exp;  lines: +12 -24;

Major rewrite.  Parameter lists changed from METHOD USER HOST to VEC.
----------------------------
revision 2.27
date: 2006-05-09 22:30:16 -0700;  author: albinus;  state: Exp;  lines: +25 -24;

* lisp/tramp.el (all):
* lisp/tramp-util.el (all): Adapt all occurencies of
`tramp-set-connection-property' and
`tramp-get-connection-property' according to changed parameter
list.

* lisp/tramp-cache.el (tramp-get-connection-property): Reorder
parameter list.
(tramp-set-connection-property): Reorder parameter list.  Add new
parameter TRANSIENT which suppresses saving that property in
persistent connection history.
(with-connection-property): Apply reordered parameter lists.
(tramp-dump-connection-properties): Remove transient entries.
----------------------------
revision 2.26
date: 2006-03-19 12:39:12 -0800;  author: albinus;  state: Exp;  lines: +60 -39;
*** empty log message ***
----------------------------
revision 2.25
date: 2006-03-19 10:53:05 -0800;  author: albinus;  state: Exp;  lines: +114 -0;

* lisp/tramp.el (tramp-remote-path): Add `tramp-default-remote-path' as
first item.  Remove items which are usually returned by "getconf
PATH".  Extend custom parameters accordingly.
(tramp-set-remote-path): Apply "getconf PATH" in order to get
default directories.  Suggested by Kevin Rodgers <ihs_4664@yahoo.com>.
Remove patameters VAR and DIRLIST.
(tramp-post-connection): Set remote PATH variable as first action.
(tramp-handle-call-process): Add "</dev/null" when INFILE is nil.

* lisp/tramp-util.el (tramp-grep-setup): New defun.

* texi/tramp.texi (Remote Programs): Introduce `tramp-default-remote-path'.
----------------------------
revision 2.24
date: 2006-03-12 14:06:23 -0800;  author: albinus;  state: Exp;  lines: +5 -4;

* lisp/tramp-util.el (tramp-advice-dired-insert-directory): Ensure it
isn't used with Emacs 22.
----------------------------
revision 2.23
date: 2006-03-10 13:08:45 -0800;  author: albinus;  state: Exp;  lines: +19 -0;

* lisp/tramp-util.el (tramp-advice-dired-insert-directory): New
defadvice.
----------------------------
revision 2.22
date: 2006-01-27 14:29:02 -0800;  author: albinus;  state: Exp;  lines: +28 -5;

Add code for unloading Tramp.

* lisp/tramp-vc.el (vc-user-login-name): Wrap defadvice with a test for
`process-file', in order to let it work for older Emacsen too.
----------------------------
revision 2.21
date: 2005-11-27 12:32:41 -0800;  author: albinus;  state: Exp;  lines: +95 -77;

* lisp/tramp.el (tramp-file-name-handler-alist): Remove
`dired-call-process' again.  Not necessary, now that `tramp-util'
is required.
(tramp-handle-dired-call-process): Removed.
(tramp-handle-process-file): Call just `call-process'.

* lisp/tramp-util.el (file-remote-p): Make it available (Emacs 21), or
advice it (XEmacs 21).
(compilation-mode-hook, tramp-gud-file-name): Use `file-remote-p'.
(tramp-gud-file-name-handler): Removed.  It was a wrong approach.
(tramp-gud-massage-args): New defun.
(tramp-gud-setup): Rewritten.  It is called now after loading
gud.el.
(tramp-gud-perldb-massage-args): Removed. Replaced by a more
general approach in `tramp-gud-setup'.
----------------------------
revision 2.20
date: 2005-11-23 13:48:53 -0800;  author: albinus;  state: Exp;  lines: +51 -14;

* lisp/tramp.el (top): Require `tramp-util'.
(tramp-make-tramp-temp-file): New defsubst.
(tramp-handle-call-process): Call it.
(tramp-find-foreign-file-name-handler): Test also for stringp.
(tramp-set-auto-save): Simplify test.  It is done in
`tramp-find-foreign-file-name-handler'.
(tramp-exists-file-name-handler): Protect it with
`condition-case'.

* lisp/tramp-util.el (tramp-advice-start-process)
(tramp-advice-call-process, gud-perldb-massage-args): Replace test
with `tramp-tramp-file-p' by `tramp-sh-file-name-handler'.  It
does not work with other file name handlers.
(tramp-gud-file-name-handler, tramp-gud-setup): New defuns.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Rewritten.
(tramp-vc-file-owner): Replace test with `tramp-tramp-file-p' by
`tramp-sh-file-name-handler'.  It does not work with other file
name handlers.
----------------------------
revision 2.19
date: 2005-11-09 15:01:22 -0800;  author: albinus;  state: Exp;  lines: +21 -2;

* lisp/tramp.el (tramp-remote-process-environment): New defcustom.
(tramp-file-name-handler-alist): Add `dired-call-process'.
(tramp-handle-dired-call-process ): New defun.
(tramp-debug-message): Extend regexp for backtrace.
(tramp-message): Apply level specific prefixes.
(tramp-error): New defsubst.  Replace all calls of `message',
`signal' and `error' with corresponding Tramp message functions.
(tramp-handle-file-truename): Apply `tramp-equal-remote'.
(tramp-handle-expand-file-name): Use "~root" for tilde expansion
in case of su(do)? methods.  The home directory of the local user
will be taken else.
(tramp-handle-start-process): Use narrowing for protecting buffer
contents.
(tramp-file-name-handler): Remove signal handling.  Not necessary,
because `tramp-error' handles it now.
(tramp-buffer-name, tramp-debug-buffer-name): Handle the case USER
is nil.
(tramp-outline-level): Change formula in order to handle level 0.
(tramp-set-remote-path): Add debug message.
(tramp-enter-password): Don't erase the buffer, not necessary.
(tramp-open-connection-setup-interactive-shell): Don't (un)set
explicitely "TERM", "HISTFILE", "HISTSIZE" "MAIL" "MAILCHECK"
"MAILPATH" "CDPATH" "LC_TIME".  Set
`tramp-remote-process-environment' instead of.
(tramp-barf-unless-okay): Remove SUBSHELL (always nil) and SIGNAL
(always 'file-error).  Change all callees.
(tramp-send-string): Apply `delete-region' instead of
`erase-buffer'.  Necessary because of narrowing.

* lisp/tramp-smb.el (all) Replace all calls of `message', `signal' and
`error' with corresponding Tramp message functions.

* lisp/tramp-util.el (tramp-advice-gud-perldb-massage-args): New
defadvice.

* texi/tramp.texi (Remote processes): Improve doc.
----------------------------
revision 2.18
date: 2005-11-06 12:40:18 -0800;  author: albinus;  state: Exp;  lines: +30 -12;

* lisp/tramp.el (tramp-file-name-handler-alist): Remove `shell-command.
(tramp-handle-start-process, tramp-handle-call-process): Apply
`save-excursion'.
(tramp-handle-shell-command): Removed.
(tramp-file-name-for-operation): Add `dired-call-process'. It IS a
file name handler primitive.
(tramp-wait-for-regexp): Take the message string from right
buffer.
(tramp-post-connection): Remove code for checking encoding
commands.  It is also in `tramp-find-inline-encoding'.
(tramp-find-inline-encoding): Check for connection properties.  By
this, the commands won't be executed again for new connection
buffers.
(tramp-maybe-open-connection): Apply `tramp-send-command' instead
of `tramp-send-string'.  No changed functionality, but better
traces.

* lisp/tramp-util.el (top): Don't require "compile".  Add handlers for
`compilation-mode-hook' and `gud-mode-hook'.
(tramp-advice-start-process, tramp-advice-call-process): Call the
handlers with `apply'.
(tramp-gud-file-name): New defun.
(tramp-compilation-parse-errors-filename-function): Removed.  It
wasn't such a good idea.

* texi/tramp.texi (Remote processes): New section.  Replaces
`Compilation'.
----------------------------
revision 2.17
date: 2005-11-05 13:11:35 -0800;  author: albinus;  state: Exp;  lines: +14 -18;

* lisp/tramp.el (tramp-action-out-of-band): Handle scp message
"Permission denied".

* lisp/tramp-util.el (tramp-compilation-parse-errors-filename-function):
New defun.  Assigned to `compilation-parse-errors-filename-function'.
----------------------------
revision 2.16
date: 2005-11-04 13:18:01 -0800;  author: albinus;  state: Exp;  lines: +4 -4;

* lisp/tramp.el (tramp-default-user): Set to nil.  Otherwise, it would
overwrite setttings for ssh.  Reported by Richard Edgar
<rge21@pas.rochester.edu>.
(tramp-default-user-alist): Add value for rsh and telnet and
alike.
(tramp-handle-file-newer-than-file-p)
(tramp-handle-add-name-to-file, tramp-do-copy-or-rename-file)
(tramp-run-test2 ): Apply `tramp-equal-remote'.
(tramp-equal-remote): Improve docstring.
(tramp-handle-call-process): Continue implementation.

* lisp/tramp-util.el (tramp-advice-start-process)
(tramp-advice-call-process): Check whether to apply.
----------------------------
revision 2.15
date: 2005-10-30 14:34:55 -0800;  author: albinus;  state: Exp;  lines: +36 -49;

* lisp/tramp.el: Global change to make access to connection buffer more
robust.  Don't trust that it is always current buffer; don't
expect it is writable.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add `start-process' and `call-process'.  Remove
`dired-call-process'.
(tramp-handle-start-process, tramp-handle-call-process)
(tramp-get-connection-buffer, tramp-get-connection-process): New
defuns.
(tramp-handle-dired-call-process, tramp-async-proc): Removed.
(tramp-handle-shell-command, tramp-handle-process-file): Rewritten
completely.
(tramp-wait-for-output): New arg PROC.
(tramp-get-connection-property, tramp-set-connection-property):
Don't call `tramp-maybe-open-connection'.  There might be
recursions otherwise.
(tramp-handle-expand-file-name): Use
`tramp-temporary-file-directory' instead of "/".
(tramp-maybe-open-connection): Set PS1 to "$ ".  Otherwise, a
local shell prompt could hurt.  Reported by Romain Francoise
<romain@orebokech.com>.
(tramp-chunksize): Escape parentheses in docstring starting at
beginning of line.  Fontification is messed up when
`open-paren-in-column-0-is-defun-start' set to t.  Reported by
John Paul Wallington <jpw@pobox.com>.

* lisp/tramp-cache.el (tramp-cache-setup): Reset `tramp-cache-data'
only when it doesn't exist yet.  Otherwise, it would be cleaned
every new asynchronous process.

* lisp/tramp-util.el: Deactivate key mappings for `tramp-minor-mode'.
(tramp-advice-start-process, tramp-advice-call-process): New
defadvices.
(tramp-compile, tramp-recompile): Removed.
----------------------------
revision 2.14
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.13
date: 2005-02-12 03:19:00 -0800;  author: albinus;  state: Exp;  lines: +3 -3;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.12
date: 2005-01-09 11:10:39 -0800;  author: albinus;  state: Exp;  lines: +46 -9;

* lisp/tramp-util.el (tramp-remap-command): New defun.
(top): Remove `define-key' calls.  They are replaced by respective
`tramp-remap-command' and `add-menu-button' calls.  Add
`tramp-minor-mode' to `dired-mode-hook'.
(tramp-compile, tramp-recompile): Call the commands
asynchronously.  Add `compilation-mode' to *Compilation* buffer.

* texi/tramp.texi: (Compilation): Make reference to (X)Emacs manual
flavor specific.  Remove mentioned restrictions for Emacs < 21.4
and for XEmacs.
----------------------------
revision 2.11
date: 2005-01-05 13:20:52 -0800;  author: albinus;  state: Exp;  lines: +4 -3;

* lisp/tramp.el: Fix copyright years.

* lisp/tramp-smb.el: Fix copyright years.  Adapt author address.

* lisp/tramp-util.el: Fix copyright years.  Adapt author address.
(tramp-minor-mode): Mode must toggle.

* texi/tramp.texi: Fix copyright years.
----------------------------
revision 2.10
date: 2005-01-04 15:19:03 -0800;  author: albinus;  state: Exp;  lines: +2 -0;

* lisp/tramp.el (tramp-maybe-open-connection): If the local host does
not run a UNIX derivate, the local shell cannot handle command
sequences separated with ";".  Reported by Takashi Tsunakawa
<tuna@is.s.u-tokyo.ac.jp>.

* lisp/tramp-smb.el (tramp-smb-open-connection): Check existence of
`tramp-smb-program'.

* lisp/tramp-util.el (tramp-compile, tramp-recompile): Enable
`tramp-minor-mode' in buffer "*Compilation*".

* texi/tramp.texi (Compilation): Give a note that remote compilation is
performed synchronously only, for the time being.
----------------------------
revision 2.9
date: 2004-12-29 13:15:27 -0800;  author: albinus;  state: Exp;  lines: +29 -0;

* lisp/tramp-smb.el: Add new Todo item.

* lisp/tramp-util.el (tramp-minor-mode): New minor mode.  Add it to
`find-file-hooks'.
(tramp-minor-mode-map): Respective map.  Add remapping for
`compile' and `recompile'.
(tramp-recompile): New defun.

* texi/tramp.texi (Compilation): New section, describing compilation of
remote files.
----------------------------
revision 2.8
date: 2003-11-30 09:48:03 -0800;  author: kai;  state: Exp;  lines: +2 -0;
branches:  2.8.2;
* tramp-ftp.el, tramp-smb.el, tramp-util.el, tramp-uu.el:
* tramp-vc.el, tramp.el, trampver.el.in: Add arch tagline.
----------------------------
revision 2.7
date: 2003-06-16 08:45:32 -0700;  author: kai;  state: Exp;  lines: +2 -1;
* tramp.el (tramp-shell-prompt-pattern): Allow multiple escape
sequences.

* tramp-uu.el:
* tramp-util.el:
* tramp-efs.el: Use iso-2022-7bit encoding with coding cookie for
XEmacs compatibility.
----------------------------
revision 2.6
date: 2002-03-03 08:47:28 -0800;  author: kaig;  state: Exp;  lines: +1 -0;
(top-level): Require cl when compiling.  This
fixes problems with byte-compiling under Emacs 20.  Reported by
Yoichi NAKAYAMA <yoichi@eken.phys.nagoya-u.ac.jp>.
----------------------------
revision 2.5
date: 2001-12-29 14:06:29 -0800;  author: kaig;  state: Exp;  lines: +1 -0;
* Makefile (tramp.elc): Remove superfluous dependencies.

* tramp-vc.el (tramp-vc-workfile-unchanged-p): Supply two args to
vc-default-workfile-unchanged-p.

* tramp-util.el (tramp): Require tramp.
----------------------------
revision 2.4
date: 2001-11-08 08:46:57 -0800;  author: kaig;  state: Exp;  lines: +1 -1;
(tramp-compile): Use
`tramp-handle-shell-command', not `shell-command'.
----------------------------
revision 2.3
date: 2001-11-07 06:38:28 -0800;  author: kaig;  state: Exp;  lines: +5 -3;
* tramp-util.el (tramp-compile): Make sure default-directory is
set correctly.

* tramp.el (tramp-post-connection): Don't send Perl `mime-encode'
and `mime-decode' implementations unless really needed.
----------------------------
revision 2.2
date: 2001-09-24 10:42:38 -0700;  author: kaig;  state: Exp;  lines: +2 -0;
(tramp-compile): require compile.
----------------------------
revision 2.1
date: 2001-03-09 13:40:37 -0800;  author: grossjoh;  state: Exp;
branches:  2.1.2;
*** empty log message ***
----------------------------
revision 2.1.2.1
date: 2001-06-03 05:13:07 -0700;  author: grossjoh;  state: Exp;  lines: +0 -0;
Sync with head.
----------------------------
revision 2.8.2.12
date: 2008-02-02 02:29:30 -0800;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: qK3ZFykkhD5JkOPs;
*** empty log message ***
----------------------------
revision 2.8.2.11
date: 2007-07-25 12:37:30 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.8.2.10
date: 2007-05-28 03:11:24 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 1phYrakvGyMHgGjs;
*** empty log message ***
----------------------------
revision 2.8.2.9
date: 2007-05-27 08:43:53 -0700;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: wsslTl4EbLwp8Ajs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-multi-method)
(tramp-file-name-method, tramp-file-name-user)
(tramp-file-name-host, tramp-file-name-localname): New defuns,
replacing defstruct `tramp-file-name'.
(tramp-handle-file-remote-p, tramp-completion-dissect-file-name1)
(tramp-dissect-file-name, tramp-dissect-multi-file-name): Apply
`vector' instead of `make-tramp-file-name'.
----------------------------
revision 2.8.2.8
date: 2006-01-22 10:38:31 -0800;  author: albinus;  state: Exp;  lines: +14 -2;


Version 2.0.52 released.

* configure.ac: Bump version.

* lisp/tramp.el, lisp/tramp-ftp.el, lisp/tramp-util.el,
lisp/tramp-vc.el: Add code for unloading Tramp.  See comment before
`tramp-unload-tramp' for checklist.

* lisp/tramp.el (tramp-unload-file-name-handler-alist)
(tramp-unload-tramp): New defuns.
(tramp-advice-PC-expand-many-files): New defadvice.
(tramp-save-PC-expand-many-files, tramp-setup-complete) Defuns
removed.

* lisp/tramp-ftp.el (tramp-ftp-enable-ange-ftp): New defun.

* lisp/tramp-util.el (top): Apply `ignore' instead of `identity' for
byte-compiler pacification.

* texi/tramp.texi (Frequently Asked Questions): Remove Ange-FTP item.
Add Tramp disabling item.
----------------------------
revision 2.8.2.7
date: 2005-11-13 14:33:44 -0800;  author: albinus;  state: Exp;  lines: +48 -42;

* lisp/tramp-util.el (top): Fix compilation warning.
----------------------------
revision 2.8.2.6
date: 2005-07-10 14:36:48 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.8.2.5
date: 2005-02-12 03:34:28 -0800;  author: albinus;  state: Exp;  lines: +3 -3;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.8.2.4
date: 2005-01-09 11:22:49 -0800;  author: albinus;  state: Exp;  lines: +33 -3;

* lisp/tramp-util.el (tramp-remap-command): New defun.
(top): Remove `define-key' calls.  They are replaced by respective
`tramp-remap-command' and `add-menu-button' calls.  Add
`tramp-minor-mode' to `dired-mode-hook'.
(tramp-compile, tramp-recompile): Call the commands
asynchronously.  Add `compilation-mode' to *Compilation* buffer.

* lisp/tramp.texi: (Compilation): Make reference to (X)Emacs manual
flavor specific.  Remove mentioned restrictions for Emacs < 21.4
and for XEmacs.
----------------------------
revision 2.8.2.3
date: 2005-01-05 13:32:35 -0800;  author: albinus;  state: Exp;  lines: +4 -3;

* lisp/tramp-util.el: Fix copyright years.  Adapt author address.
(tramp-minor-mode): Mode must toggle.

* texi/tramp.texi: Fix copyright years.
----------------------------
revision 2.8.2.2
date: 2005-01-04 15:25:04 -0800;  author: albinus;  state: Exp;  lines: +2 -0;

* lisp/tramp-util.el (tramp-compile, tramp-recompile): Enable
`tramp-minor-mode' in buffer "*Compilation*".

* texi/tramp.texi (Compilation): Give a note that remote compilation is
performed synchronously only, for the time being.
----------------------------
revision 2.8.2.1
date: 2004-12-29 13:27:49 -0800;  author: albinus;  state: Exp;  lines: +31 -0;

* lisp/tramp-util.el (tramp-minor-mode): New minor mode.  Add it to
`find-file-hooks'.
(tramp-minor-mode-map): Respective map.  Add remapping for
`compile' and `recompile'.
(tramp-recompile): New defun.

* texi/tramp.texi (Compilation): New section, describing compilation of
remote files.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-uu.el,v
Working file: lisp/tramp-uu.el
head: 2.26
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.24
	branch-2-1-stable: 2.22.0.2
	branchpoint-2-1-stable: 2.22
	V-2-1-19: 2.22
	V-2-1-18: 2.22
	V-2-1-17: 2.21
	V-2-1-16: 2.21
	V-2-1-15: 2.21
	V-2-1-14: 2.20
	V-2-1-13: 2.18
	V-2-0-57: 2.4.2.8
	V-2-1-12: 2.14
	V-2-1-11: 2.14
	V-2-1-10: 2.12
	V-2-0-56: 2.4.2.5
	V-2-1-9: 2.9
	V-2-1-8: 2.9
	V-2-0-55: 2.4.2.5
	V-2-1-7: 2.9
	V-2-0-54: 2.4.2.5
	V-2-1-6: 2.9
	V-2-0-53: 2.4.2.5
	V-2-0-52: 2.4.2.4
	V-2-1-5: 2.9
	V-2-1-4: 2.9
	V-2-0-51: 2.4.2.4
	V-2-0-50: 2.4.2.4
	V-2-0-49: 2.4.2.1
	V-2-0-48: 2.4.2.1
	V-2-1-3: 2.6
	V-2-0-47: 2.4.2.1
	V-2-0-46: 2.4.2.1
	V-2-0-45: 2.4.2.1
	V-2-1-2: 2.6
	V-2-0-44: 2.4.2.1
	V-2-1-1: 2.6
	V-2-0-43: 2.4.2.1
	V-2-0-42: 2.4.2.1
	V-2-0-41: 2.4.2.1
	V-2-1-0: 2.4
	branch-2-0-stable: 2.4.0.2
	branchpoint-2-0-stable: 2.4
	V-2-0-40: 2.4
	V-2-0-39: 2.4
	V-2-0-38: 2.4
	V-2-0-37: 2.3
	V-2-0-36: 2.3
	V-2-0-35: 2.3
	V-2-0-34: 2.2
	V-2-0-33: 2.2
	V-2-0-32: 2.2
	V-2-0-30: 2.2
	V-2-0-29: 2.2
	V-2-0-28: 2.2
	V-2-0-27: 2.2
	V-2-0-26: 2.2
	V-2-0-25: 2.1
	V-2-0-24: 2.1
	V-2-0-23: 2.1
	V-2-0-22: 2.1
	V-2-0-21: 2.1
	V-2-0-20: 2.1
	V-2-0-19: 2.1
keyword substitution: kv
total revisions: 35;	selected revisions: 35
description:
----------------------------
revision 2.26
date: 2011-01-26 01:43:34 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.25
date: 2011-01-19 03:09:00 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 2.24
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 2.23
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.22
date: 2010-01-14 20:52:28 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: zweSrHgxjm35ypju;
branches:  2.22.2;
Add 2010 to copyright years.
----------------------------
revision 2.21
date: 2009-01-05 11:57:36 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: XPlJ7dwhFdc1Cixt;
Update copyrights for 2009.
----------------------------
revision 2.20
date: 2008-05-13 14:18:30 -0700;  author: albinus;  state: Exp;  lines: +7 -6;  commitid: rRnFrT6E39q5GQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.19
date: 2008-04-27 09:27:49 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: vv6ojTG56MQfAL0t;
*** empty log message ***
----------------------------
revision 2.18
date: 2008-03-21 09:41:56 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: BNWrD82q8axPQ0Ws;
Fix up encoding.
----------------------------
revision 2.17
date: 2008-03-17 15:44:06 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: Ruvxr3LYV1h3ZwVs;
* tramp-uu.el (top): Move coding cookie at the end.
----------------------------
revision 2.16
date: 2008-02-03 03:45:33 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: d9qUgc4VV80PIWPs;
*** empty log message ***
----------------------------
revision 2.15
date: 2008-01-12 03:04:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.14
date: 2007-09-30 09:32:29 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 2.13
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.12
date: 2007-07-01 22:09:52 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.11
date: 2007-07-01 11:31:35 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.10
date: 2007-05-28 06:20:38 -0700;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: Ma8UwuYWkhiejHjs;

* Makefile.in (XEMACS_FILES) Add texi/doclicense.texi.

* texi/doclicense.texi: New file.

* texi/Makefile.in (TEXI_FILES): Add doclicense.texi.
----------------------------
revision 2.9
date: 2005-08-01 13:58:34 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

Update years in copyright notice.

* lisp/tramp.el (tramp-debug-message): Handle the case, that
`backtrace-frame' returns a lambda expression, or nil.
(tramp-message): Don't use ARGS as format string, it
could contain "%".
(tramp-wait-for-regexp, tramp-wait-for-output): Add a format
string to the call of `tramp-trace'.
(tramp-discard-garbage-erase-buffer): Beautify trace.
----------------------------
revision 2.8
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.7
date: 2005-06-26 12:45:08 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fourth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in: Adapt email addresses.
----------------------------
revision 2.6
date: 2004-05-17 12:59:21 -0700;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.5
date: 2004-05-16 14:09:02 -0700;  author: albinus;  state: Exp;  lines: +4 -4;


* tramp-uu.el (tramp-uuencode-region): Padding characters aren't
counted for (last) line.

* Makefile.in (TODO): New item, inspired by Kais change.
----------------------------
revision 2.4
date: 2003-11-30 09:48:03 -0800;  author: kai;  state: Exp;  lines: +2 -0;
branches:  2.4.2;
* tramp-ftp.el, tramp-smb.el, tramp-util.el, tramp-uu.el:
* tramp-vc.el, tramp.el, trampver.el.in: Add arch tagline.
----------------------------
revision 2.3
date: 2003-06-16 08:45:32 -0700;  author: kai;  state: Exp;  lines: +2 -1;
* tramp.el (tramp-shell-prompt-pattern): Allow multiple escape
sequences.

* tramp-uu.el:
* tramp-util.el:
* tramp-efs.el: Use iso-2022-7bit encoding with coding cookie for
XEmacs compatibility.
----------------------------
revision 2.2
date: 2002-11-27 01:36:39 -0800;  author: kai;  state: Exp;  lines: +2 -2;
(tramp-uu-b64-char-to-byte, tramp-uuencode-region):  Abstain from
`incf'.
----------------------------
revision 2.1
date: 2002-09-13 14:19:48 -0700;  author: kai;  state: Exp;
Version 2.0.19 released.

* tramp-uu.el: New file.

* tramp.el (tramp-coding-commands): Use `tramp-uuencode-region'
as local encoder for the uuencode based entries.

* tramp.texi: Define macro for printing a Tramp filename.
----------------------------
revision 2.4.2.8
date: 2008-02-02 02:30:34 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: TUvf5VLFnvL5lOPs;
*** empty log message ***
----------------------------
revision 2.4.2.7
date: 2007-07-25 12:37:31 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.4.2.6
date: 2007-05-28 03:11:24 -0700;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: 1phYrakvGyMHgGjs;
*** empty log message ***
----------------------------
revision 2.4.2.5
date: 2006-02-12 12:18:06 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* tramp.el (tramp-remote-path): Add "/usr/xpg4/bin" on top,
because on Solaris a POSIX compatible "id" is needed.  Reported by
Magnus Henoch <mange@freemail.hu>.
(tramp-perl-encode, tramp-perl-decode): Adapt copyright years.
(tramp-maybe-open-connection): Do not wait for
output from a dead connection.

* tramp-uu.el, trampver.el.in: Adapt copyright years.
----------------------------
revision 2.4.2.4
date: 2005-08-01 13:48:26 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

Update years in copyright notice.
----------------------------
revision 2.4.2.3
date: 2005-07-10 14:36:48 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.4.2.2
date: 2005-06-26 12:23:35 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fifth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in:
----------------------------
revision 2.4.2.1
date: 2004-05-29 14:40:49 -0700;  author: albinus;  state: Exp;  lines: +5 -5;


Version 2.0.41 released.

Sync with trunk
----------------------------
revision 2.22.2.1
date: 2011-01-24 02:09:41 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp-vc.el,v
Working file: lisp/tramp-vc.el
head: 2.44
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.43
	branch-2-1-stable: 2.40.0.2
	branchpoint-2-1-stable: 2.40
	V-2-1-19: 2.40
	V-2-1-18: 2.38
	V-2-1-17: 2.38
	V-2-1-16: 2.38
	V-2-1-15: 2.38
	V-2-1-14: 2.38
	V-2-1-13: 2.37
	V-2-0-57: 2.11.2.14
	V-2-1-12: 2.35
	V-2-1-11: 2.35
	V-2-1-10: 2.29
	V-2-0-56: 2.11.2.9
	V-2-1-9: 2.25
	V-2-1-8: 2.25
	V-2-0-55: 2.11.2.8
	V-2-1-7: 2.25
	V-2-0-54: 2.11.2.8
	V-2-1-6: 2.25
	V-2-0-53: 2.11.2.8
	V-2-0-52: 2.11.2.7
	V-2-1-5: 2.23
	V-2-1-4: 2.20
	V-2-0-51: 2.11.2.6
	V-2-0-50: 2.11.2.6
	V-2-0-49: 2.11.2.4
	V-2-0-48: 2.11.2.4
	V-2-1-3: 2.15
	V-2-0-47: 2.11.2.3
	V-2-0-46: 2.11.2.2
	V-2-0-45: 2.11.2.1
	V-2-1-2: 2.13
	V-2-0-44: 2.11.2.1
	V-2-1-1: 2.13
	V-2-0-43: 2.11.2.1
	V-2-0-42: 2.11
	V-2-0-41: 2.11
	V-2-1-0: 2.11
	branch-2-0-stable: 2.11.0.2
	branchpoint-2-0-stable: 2.11
	V-2-0-40: 2.11
	V-2-0-39: 2.9
	V-2-0-38: 2.9
	V-2-0-37: 2.8
	V-2-0-36: 2.7
	V-2-0-35: 2.6
	V-2-0-34: 2.6
	V-2-0-33: 2.6
	V-2-0-32: 2.6
	V-2-0-30: 2.6
	V-2-0-29: 2.5
	V-2-0-28: 2.5
	V-2-0-27: 2.5
	V-2-0-26: 2.2
	V-2-0-25: 2.2
	V-2-0-24: 2.2
	V-2-0-23: 2.2
	V-2-0-22: 2.2
	V-2-0-21: 2.2
	V-2-0-20: 2.2
	V-2-0-19: 2.2
	V-2-0-18: 2.2
	V-2-0-17: 2.2
	V-2-0-16: 2.2
	V-2-0-15: 2.2
	V-2-0-14: 2.2
	V-2-0-13: 2.2
	completion: 2.2.0.2
	V-2-0-12: 2.2
	V-2-0-11: 2.2
	V-2-0-10: 2.2
	V-2-0-9: 2.2
	V-2-0-8: 2.2
	V-2-0-7: 2.2
	V-2-0-6: 2.2
	V-2-0-5: 2.2
	V-2-0-4: 2.2
	V-2-0-3: 2.2
	V-2-0-1: 2.2
	EMACS-21: 2.2
	V-2-0-0: 2.2
	tramp-xemacs-pkg: 2.0.0.4
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 72;	selected revisions: 72
description:
----------------------------
revision 2.44
date: 2011-01-26 01:43:34 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.43
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 2.42
date: 2010-10-04 12:34:57 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: n7rp0IAxnvWy0aRu;
Continue reorganization of load dependencies.  (Bug#7156)

* tramp.el (tramp-handle-file-local-copy-hook)
(tramp-delete-temp-file-function): Move down.
(tramp-exists-file-name-handler): Move up.
(tramp-register-file-name-handlers): Simplify autoload.
(tramp-handle-write-region-hook, tramp-handle-directory-file-name)
(tramp-handle-directory-files, tramp-handle-dired-uncache)
(tramp-handle-file-modes, tramp-handle-file-name-as-directory)
(tramp-handle-file-name-completion)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-regular-p)
(tramp-handle-file-remote-p, tramp-handle-file-symlink-p)
(tramp-handle-find-backup-file-name)
(tramp-handle-insert-file-contents, tramp-handle-load)
(tramp-handle-substitute-in-file-name)
(tramp-handle-unhandled-file-name-directory)
(tramp-mode-string-to-int, tramp-local-host-p)
(tramp-make-tramp-temp-file): Moved from tramp-sh.el.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Do not require 'tramp-sh.

* tramp-sh.el (all): Move several objects to tramp.el, see there.
Rename `tramp-handle-*' to `tramp-sh-handle-*'.

* tramp-vc.el (tramp-vc-user-login-name, tramp-vc-file-owner): Use
`file-attributes'.
----------------------------
revision 2.41
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +6 -2;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.40
date: 2010-05-28 06:13:25 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 2CLK9YLsWaoW2yAu;
* tramp-compat.el (tramp-compat-delete-file): Use `symbol-value'
for backward compatibility.

* tramp.el (tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use `delete-file'
instead of `tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-do-copy-or-rename-file): Use
`delete-file' instead of `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.
(tramp-smb-handle-delete-directory): Use 'trash as arg.

* tramp-vc.el (tramp-vc-user-login-name): Use `delete-file'
instead of `tramp-compat-delete-file'.
----------------------------
revision 2.39
date: 2010-05-05 02:57:36 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 7vDVEtI34jXBHzxu;
Add FORCE argument to `delete-file'.

* tramp-compat.el (tramp-compat-delete-file): New defun.

* tramp.el (tramp-handle-delete-file): Add FORCE arg.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-file): Add FORCE arg.
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use
`tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Add FORCE arg.
(tramp-gvfs-handle-write-region): Use `tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-handle-delete-file): Add FORCE arg.
(tramp-imap-do-copy-or-rename-file): Use `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-delete-file): Add FORCE arg.
(tramp-smb-handle-copy-file, tramp-smb-handle-file-local-copy)
(tramp-smb-handle-rename-file, tramp-smb-handle-write-region): Use
`tramp-compat-delete-file'.

* tramp-vc.el (tramp-vc-user-login-name): Use
`tramp-compat-delete-file'.
----------------------------
revision 2.38
date: 2008-05-13 14:18:46 -0700;  author: albinus;  state: Exp;  lines: +4 -7;  commitid: PUSSdlfNal3bGQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.37
date: 2008-02-03 03:46:33 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: wi5Ncu5IRJkaJWPs;
*** empty log message ***
----------------------------
revision 2.36
date: 2008-01-12 03:04:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.35
date: 2007-10-03 03:45:48 -0700;  author: albinus;  state: Exp;  lines: +5 -8;  commitid: T0jhSlYBL14Nk8As;

* lisp/tramp.el (top): Add tramp-compat to `tramp-unload-hook'.
(tramp-file-name-handler-alist): Add
`tramp-handle-insert-file-contents-literally'.  Neded for XEmacs.
(tramp-make-temp-file): Use `make-temp-name'. `make-temp-file',
used before, creates the file already, which is not desired.
(tramp-do-copy-or-rename-file-directly): Simplify handling of
temporary file.
(tramp-handle-insert-file-contents): Assign the result in the
short track case.
(tramp-handle-insert-file-contents-literally): New defun.
(tramp-completion-mode-p): Revert change from 2007-09-24.
Checking for `return' etc as last character is not sufficient, for
example in dired-mode when entering <g> (revert-buffer) or
<s> (dired-sort).

* lisp/tramp-compat.el (top): Add also compatibility code for loading
appropriate timer package.
(tramp-compat-copy-tree): Check for `subrp' and `symbol-file' in
order to avoid autoloading problems.

* lisp/tramp-efs-el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Move further compatibility code to
tramp-compat.el.

	* tramp-ftp.el (tramp-ftp-file-name-handler): Handle the case
	where the second parameter of `copy-file' or `rename-file' is a
	remote file but not via ftp.

	* tramp-util.el: Remove `tramp-minor-mode' and its declarations.
----------------------------
revision 2.34
date: 2007-09-30 09:32:29 -0700;  author: albinus;  state: Exp;  lines: +5 -6;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 2.33
date: 2007-09-28 08:52:02 -0700;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 2.32
date: 2007-09-06 14:22:31 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: CR6IaFnGC5LsJIws;

* lisp/tramp-vc.el (tramp-vc-user-login-name): Use `vc-find-version'
instead of `process-file' to check whether we have a new enough vc
that doesn't need the defadvice.
----------------------------
revision 2.31
date: 2007-07-29 08:39:39 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: 6Mig8uNEFEeF5Grs;
*** empty log message ***
----------------------------
revision 2.30
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.29
date: 2007-07-01 22:09:52 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.28
date: 2007-07-01 11:31:35 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.27
date: 2007-05-28 06:20:38 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: Ma8UwuYWkhiejHjs;

* Makefile.in (XEMACS_FILES) Add texi/doclicense.texi.

* texi/doclicense.texi: New file.

* texi/Makefile.in (TEXI_FILES): Add doclicense.texi.
----------------------------
revision 2.26
date: 2007-05-27 12:54:44 -0700;  author: albinus;  state: Exp;  lines: +0 -2;  commitid: 7PsnkV1mXPbnwBjs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-method,
(tramp-file-name-user, tramp-file-name-host)
(tramp-file-name-localname): New defuns, replacing defstruct
`tramp-file-name'.
(tramp-completion-dissect-file-name1, tramp-compute-multi-hops)
(tramp-dissect-file-name): Apply `vector' instead of
`make-tramp-file-name'.
(tramp-do-copy-or-rename-file-out-of-band): Aset 3rd index instead
of 4th, when setting localname.
(tramp-compute-multi-hops): Aset 2nd index instead of 3rd, when
setting host.

* lisp/tramp-cache.el (all): Aset 3rd index instead of 4th, when
unifying localname.
----------------------------
revision 2.25
date: 2006-05-21 09:15:06 -0700;  author: albinus;  state: Exp;  lines: +3 -4;

Major rewrite.  Parameter lists changed from METHOD USER HOST to VEC.
----------------------------
revision 2.24
date: 2006-01-27 14:29:02 -0800;  author: albinus;  state: Exp;  lines: +16 -6;

Add code for unloading Tramp.

* lisp/tramp-vc.el (vc-user-login-name): Wrap defadvice with a test for
`process-file', in order to let it work for older Emacsen too.
----------------------------
revision 2.23
date: 2005-11-23 13:48:53 -0800;  author: albinus;  state: Exp;  lines: +25 -13;

* lisp/tramp.el (top): Require `tramp-util'.
(tramp-make-tramp-temp-file): New defsubst.
(tramp-handle-call-process): Call it.
(tramp-find-foreign-file-name-handler): Test also for stringp.
(tramp-set-auto-save): Simplify test.  It is done in
`tramp-find-foreign-file-name-handler'.
(tramp-exists-file-name-handler): Protect it with
`condition-case'.

* lisp/tramp-util.el (tramp-advice-start-process)
(tramp-advice-call-process, gud-perldb-massage-args): Replace test
with `tramp-tramp-file-p' by `tramp-sh-file-name-handler'.  It
does not work with other file name handlers.
(tramp-gud-file-name-handler, tramp-gud-setup): New defuns.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Rewritten.
(tramp-vc-file-owner): Replace test with `tramp-tramp-file-p' by
`tramp-sh-file-name-handler'.  It does not work with other file
name handlers.
----------------------------
revision 2.22
date: 2005-11-20 14:16:40 -0800;  author: albinus;  state: Exp;  lines: +39 -94;

* lisp/tramp.el (tramp-send-command-and-read): New defun.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-perl)
(tramp-handle-directory-files-and-attributes-with-stat)
(tramp-get-remote-stat, tramp-get-remote-uid)
(tramp-get-remote-gid): Apply it.
(tramp-handle-insert-directory): Remove unnecessary comments.
(tramp-point-at-eol): Removed. All callees replaced by
`tramp-line-end-position'.
(tramp-barf-unless-okay): Don't pop up Tramp buffer in case of
error.
(tramp-get-ls-command, tramp-get-test-command)
(tramp-get-test-nt-command, tramp-get-file-exists-command)
(tramp-get-remote-ln, tramp-get-remote-perl)
(tramp-get-remote-stat)
(tramp-get-remote-uid, tramp-get-remote-gid): Apply
`with-connection-property'.
(tramp-get-connection-property, tramp-set-connection-property):
Move to tramp-cache.el.

* lisp/tramp-cache.el:
(tramp-get-connection-property, tramp-set-connection-property):
Moved from tramp.el.  Tramp messages added.
(with-connection-property): New macro.

* lisp/tramp-smb.el (tramp-smb-read-file-entry): `tramp-point-at-eol'
replaced by `tramp-line-end-position'.

* lisp/tramp-vc.el (tramp-handle-vc-user-login-name): Removed.
(tramp-vc-user-login-name): Rewritten.

* texi/tramp.texi (Remote File Ownership): Replace `user-full-name' by
`user-login-name'.
(Traces and Profiles): Add trace level 7.
----------------------------
revision 2.21
date: 2005-11-16 15:09:56 -0800;  author: albinus;  state: Exp;  lines: +3 -342;

* lisp/tramp.el (tramp-default-user-alist): Simplify default value.
(tramp-handle-file-attributes): Apply `expand-file-name'.
(tramp-handle-file-newer-than-file-p)
(tramp-handle-add-name-to-file, tramp-do-copy-or-rename-file):
Call of `tramp-error' must be more robust.
(tramp-touch): When there is no Tramp file, we cannot call
`tramp-error'.
(tramp-wait-for-regexp, tramp-wait-for-output): Remove unnecessary
parameter in `tramp-error' call.
(tramp-get-remote-uid, tramp-get-remote-gid): New parameter
ID-FORMAT.  Adapt callees.

* lisp/tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
(tramp-vc-simple-command, tramp-vc-workfile-unchanged-p)
(vc-checkout): Removed, including corresponding defadvices.
(tramp-file-owner): Removed.  Defadvice `vc-file-owner' changed
with code left.
----------------------------
revision 2.20
date: 2005-10-12 13:49:29 -0700;  author: albinus;  state: Exp;  lines: +2 -4;

* lisp/tramp.el (top): Try to simplify XEmacs byte-compiler
pacification.
(tramp-verbose): Finish doc string.  New default value is 3.
(all): Apply new verbosity levels.
(tramp-get-debug-buffer): Remove definition of outline faces.  The
default values are good enough.
(tramp-bug): Explain setting of `tramp-verbose'.

* lisp/tramp-cache.el (all): Apply new verbosity levels.

* lisp/tramp-smb.el (top): Try to simplify XEmacs byte-compiler
pacification.
(all): Apply new verbosity levels.

* lisp/tramp-vc.el (top): Try to simplify XEmacs byte-compiler
pacification.

* texi/tramp.texi (Bug Reports, Traces and Profiles): Explain setting
of `tramp-verbose'.

* texi/trampinst.texi (Installation parameters): Try it now with @w{}.
----------------------------
revision 2.19
date: 2005-09-11 14:17:32 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* tramp.el (top): Reduce compiler warnings.
(tramp-current-hop-method, tramp-current-hop-user)
(tramp-current-hop-host): New defvars.
(tramp-handle-file-attributes-with-stat): Return floating point
numbers.  Integers did run out of 2**28.
(tramp-do-copy-or-rename-file-out-of-band, tramp-pre-connection)
(tramp-maybe-open-connection): Initialize new defvars.
(tramp-handle-shell-command): Send "tramp_set_exit_status", it
isn't sent any longer during initialization.
(tramp-handle-write-region): Remote decoding command is sent in
one bunch.
(tramp-find-executable): Check first in $PATH with "which"
command.  Directory scan command is sent in one bunch.
(tramp-check-ls-command, tramp-find-ls-command): Debug messages
did go to a wrong debug buffer.
(tramp-action-password, tramp-process-actions): Call
`tramp-enter-password' and `tramp-clear-passwd' with changed
parameters.
(tramp-enter-password, tramp-read-passwd, tramp-clear-passwd):
Change parameter set.  Rewrite.
(tramp-post-connection): Remove unnecessary commands.
(tramp-send-command, tramp-send-string): Move setting of
`tramp-last-cmd-time'.
(tramp-wait-for-output): Correct wrong variable names.
(tramp-get-ls-command): Simplify code.

* tramp-cache.el (tramp-enable-cache): Removed.  Works stable now.
(with-cache-data): Change accordingly.

* tramp-smb.el (top): Require `tramp-cache'.  Reduce compiler
warnings.
(tramp-smb-handle-file-attributes)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-writable-p): Add `with-cache-data'.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-directory)
(tramp-smb-handle-delete-file, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Flush cached data.
(tramp-smb-open-connection) Call `tramp-enter-password' and
`tramp-clear-passwd' with changed parameters.

* tramp-vc.el (top): Reduce compiler warnings.
----------------------------
revision 2.18
date: 2005-08-01 13:58:34 -0700;  author: albinus;  state: Exp;  lines: +2 -1;

Update years in copyright notice.

* lisp/tramp.el (tramp-debug-message): Handle the case, that
`backtrace-frame' returns a lambda expression, or nil.
(tramp-message): Don't use ARGS as format string, it
could contain "%".
(tramp-wait-for-regexp, tramp-wait-for-output): Add a format
string to the call of `tramp-trace'.
(tramp-discard-garbage-erase-buffer): Beautify trace.
----------------------------
revision 2.17
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.16
date: 2005-02-12 03:19:00 -0800;  author: albinus;  state: Exp;  lines: +14 -14;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.15
date: 2004-12-23 16:31:48 -0800;  author: albinus;  state: Exp;  lines: +6 -3;

* lisp/tramp.el (tramp-file-name-for-operation): Mark `shell-command'
as magic for Emacs only.
(tramp-wait-for-output): Fix error in deleting region.  From Kai
Grossjohann <kai.grossjohann@gmx.net>.

* lisp/tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
(tramp-vc-simple-command): Call `tramp-handle-shell-command' but
`shell-command', because it isn't magic in XEmacs.  Reported by
Adrian Aichner <adrian@xemacs.org>.
----------------------------
revision 2.14
date: 2004-10-23 12:53:38 -0700;  author: kai;  state: Exp;  lines: +2 -1;
* tramp-vc.el (vc-do-command): Do not advise it if
process-file is fboundp.
* tramp.el (tramp-file-name-handler-alist): Add entry for
process-file.
(tramp-handle-process-file): New function.
(tramp-file-name-for-operation): Support process-file.
----------------------------
revision 2.13
date: 2004-07-26 12:36:34 -0700;  author: albinus;  state: Exp;  lines: +11 -14;


Removing multi-hop methods.  Incorporating proxies.
----------------------------
revision 2.12
date: 2004-06-03 14:21:49 -0700;  author: albinus;  state: Exp;  lines: +9 -9;


* configure.ac (FTP_UPLOAD): New variable, indicating which ftp
upload program to savannah has to be used.  Kai and Michael differ
in their preferences ...

* Makefile.in (FTP_UPLOAD): New variable.  Value depending on
@FTP_UPLOAD@.
(savannah): Use it.

* lisp/tramp.el (all): Code cleanup.  Change all `tramp-handle-xxx'
calls to respective `xxx` calls.

* lisp/tramp-vc.el (all): Code cleanup.  Change all `tramp-handle-xxx'
calls to respective `xxx` calls.
----------------------------
revision 2.11
date: 2004-05-01 13:04:22 -0700;  author: albinus;  state: Exp;  lines: +27 -14;
branches:  2.11.2;


Suppress byte-compiler warnings were possible.

* lisp/tramp.el (toplevel): Call of `byte-compiler-options' pacified.
`directory-sep-char' set to not obsolete (we need it for XEmacs).
Define `last-coding-system-used' in XEmacs case.  Pacify
declarations of `backup-directory-alist',
`bkup-backup-directory-info' and
`tramp-save-PC-expand-many-files'.
(tramp-feature-write-region-fix): Pacify funcall of
`find-operation-coding-system'.
(tramp-line-end-position): Pacify funcall of `line-end-position'
and `point-at-eol'.
(tramp-handle-dired-compress-file): Pacify funcall of
`dired-remove-file'.
(tramp-handle-find-backup-file-name): Pacify access to
`tramp-backup-directory-alist' and
`tramp-bkup-backup-directory-info'.
(tramp-touch): `error' needs just one parameter if there is no
string substitution.
(tramp-bug): `tramp-backup-directory-alist',
`tramp-bkup-backup-directory-info', `backup-directory-alist' and
`bkup-backup-directory-info' must be quoted as symbols.

* lisp/tramp-efs.el (toplevel): Suppress byte-compiler warnings.

* lisp/tramp-smb.el (toplevel): Suppress byte-compiler warnings.
Define `last-coding-system-used' in XEmacs case.

* lisp/tramp-vc.el (toplevel): Suppress byte-compiler warnings.
(tramp-vc-do-command-new): Pacify funcall of `vc-setup-buffer' and
`vc-exec-after'.
(tramp-vc-workfile-unchanged-p): Pacify funcall of
`vc-default-workfile-unchanged-p'.
(tramp-handle-vc-user-login-name): Pacify funcall of
`subr-arity'. `let' must be `let*' because of `file'.
----------------------------
revision 2.10
date: 2004-03-05 12:47:50 -0800;  author: albinus;  state: Exp;  lines: +1 -1;


* configure.ac: Write "${MAKE}" if appropriate (but "make").

* Makefile.in: (.PHONY): Remove unused targets.
(distclean): Remove also *.tar.gz*
(tar): Call gpg.

* lisp/Makefile.in (.PHONY): Remove unused targets.
(install): Depends on "all".

* lisp/tramp-vc.el (tramp-vc-workfile-unchanged-p): Correct typo
("file" -> "filename").  Reported by Kim F. Storm <storm@cua.dk>.

* texi/Makefile.in (SINFO): Removed.
(.PHONY): New Target.
----------------------------
revision 2.9
date: 2003-11-30 09:48:03 -0800;  author: kai;  state: Exp;  lines: +1 -0;
* tramp-ftp.el, tramp-smb.el, tramp-util.el, tramp-uu.el:
* tramp-vc.el, tramp.el, trampver.el.in: Add arch tagline.
----------------------------
revision 2.8
date: 2003-11-25 13:57:50 -0800;  author: albinus;  state: Exp;  lines: +9 -2;

* lisp/tramp.el: Add new optional parameter ID-FORMAT to
`file-attributes'.  Calls of `file-attributes' won't use this
parameter for backward compatibility reasons.
(tramp-perl-file-attributes): Add a new parameter to Perl script
in order to handle uid/gid as strings, if desired.
(tramp-handle-file-truename, tramp-handle-file-symlink-p): Apply
`file-attributes' instead of `tramp-handle-file-attributes' in
order to make the function more general.
(tramp-handle-file-attributes): Replace proprietary optional
parameter NONNUMERIC by the recently (Emacs 21.4) introduced
ID-FORMAT.
(tramp-handle-file-attributes-with-perl): Handle parameter
NONNUMERIC if set. This wasn't done in the past.
(tramp-post-connection): Apply second parameter "$2" if
`tramp-remote-perl' is called.

* lisp/tramp-smb.el (tramp-smb-handle-delete-file): Correct cut'n'waste
error (`filename' instead of `directory').
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-attributes): Add recently (Emacs 21.4)
introduced parameter ID-FORMAT.
(tramp-smb-handle-make-directory-internal): Correct cut'n'waste
error (`directory' instead of `ldir').

* lisp/tramp-vc.el (tramp-handle-vc-user-login-name): Check if
`file-attributes' has a second parameter.  If yes, apply it with
value "'integer".  Otherwise, don't use that parameter (default
is integer format).
----------------------------
revision 2.7
date: 2003-07-03 04:51:54 -0700;  author: kai;  state: Exp;  lines: +3 -0;
* tramp.el (tramp-handle-insert-file-contents): Do not
unconditionally inhibit the file operation file-local-copy, only
do that when the inhibit-file-name-operation is currently
insert-file-contents.  This fixes finding remote CVS-controlled
files.  (It would barf on inserting the CVS/Entries file
literally, because the file-local-copy handler wasn't called.)
(tramp-handle-shell-command): Support optional third arg
ERROR-BUFFER.

* tramp-vc.el (vc-workfile-unchanged-p): Add comment.
----------------------------
revision 2.6
date: 2003-02-15 10:37:30 -0800;  author: kai;  state: Exp;  lines: +7 -7;
* tramp.texi: Replace word `path' with `localname' where used as
a component of a Tramp file name.  In GNU, the word `path' is
used only for search paths, ie lists of directories.

* tramp-vc.el, tramp.el: Replace term `path' with `localname'
unless it is used for a search path.  In GNU, the word `path' is
reserved for search paths.

* tramp.el (tramp-do-copy-or-rename-file-one-local): New
function.  Not implemented.  Not used.  Should invoke rcp or scp
directly to keep the time.
----------------------------
revision 2.5
date: 2002-12-05 01:21:05 -0800;  author: kai;  state: Exp;  lines: +2 -1;
(tramp-vc-do-command): Ensure that `okstatus' is an
integer before using `<' on it.
(tramp-vc-do-command-new): Pass relative filename as arg to remote
process.  This helps with CVS.  Suggested by Francis Litterio.
----------------------------
revision 2.4
date: 2002-12-02 11:51:39 -0800;  author: kai;  state: Exp;  lines: +2 -1;
(tramp-vc-do-command): Ensure that `okstatus' is an integer before
using `<' on it.
----------------------------
revision 2.3
date: 2002-11-30 14:33:34 -0800;  author: kai;  state: Exp;  lines: +5 -1;
* tramp.el (tramp-end-of-output): Do not use directory listing as
input to `md5' function.  The current time is deemed to be good
enough.

* tramp-vc.el (tramp-vc-do-command-new): `okstatus' can be async.
From Francis Litterio <franl@world.std.com>.
(tramp-vc-simple-command): Comment on potential `okstatus'
problem with it being `async'.  No code change.
----------------------------
revision 2.2
date: 2002-06-17 03:57:20 -0700;  author: kai;  state: Exp;  lines: +0 -1;
Include version number.
(MANIFEST): Don't include directory name "tramp/" in the entries.
(tar): Create a tramp-$(VERSION).tar.gz file.
(dist, savannah): tramp.tar.gz renamed to tramp-$(VERSION).tar.gz.
----------------------------
revision 2.1
date: 2001-12-29 14:06:29 -0800;  author: kaig;  state: Exp;  lines: +2 -2;
* Makefile (tramp.elc): Remove superfluous dependencies.

* tramp-vc.el (tramp-vc-workfile-unchanged-p): Supply two args to
vc-default-workfile-unchanged-p.

* tramp-util.el (tramp): Require tramp.
----------------------------
revision 2.0
date: 2001-02-28 02:39:27 -0800;  author: grossjoh;  state: Exp;  lines: +1 -1;
Going stable?
----------------------------
revision 1.13
date: 2001-02-17 08:32:17 -0800;  author: grossjoh;  state: Exp;  lines: +15 -9;
* tramp-vc.el: Require vc-rcs for `vc-rcs-release' if necessary.
(tramp-vc-workfile-unchanged-p): Compatibility with old and new VC.
(vc-checkout): Avoid byte-compiler warning.

* tramp.el (tramp-open-connection-telnet): Remote login default to local
login, but only when actually sending the login name.  The other
functions (for buffer name and stuff) continue to pass `nil' for
the user.
----------------------------
revision 1.12
date: 2000-11-19 16:12:54 -0800;  author: daniel;  state: Exp;  lines: +1 -2;
Fix TRAMP-VC to not cause an infloop on load. Again.
----------------------------
revision 1.11
date: 2000-11-17 19:27:03 -0800;  author: daniel;  state: Exp;  lines: +5 -5;
Commit my change to `tramp-handle-vc-user-login-name'; it should now work when
the user does not specify a login name.
----------------------------
revision 1.10
date: 2000-11-15 09:07:40 -0800;  author: grossjoh;  state: Exp;  lines: +4 -2;
(vc-user-login-name): Protect against `file' unbound.  (Assumes
local call in this case!)  Kudos to Hannu Koivisto for reporting
this.
----------------------------
revision 1.9
date: 2000-11-15 02:48:53 -0800;  author: grossjoh;  state: Exp;  lines: +88 -22;
* tramp.el (tramp-handle-shell-command): Return exit status.

* tramp-vc.el (tramp-vc-do-command): Return exit status.
(tramp-vc-do-command-new): For the new VC that comes with Emacs
21.
(tramp-handle-vc-user-login-name): User part of a Tramp file name
structure might be empty.
----------------------------
revision 1.8
date: 2000-09-20 04:36:46 -0700;  author: daniel;  state: Exp;  lines: +1 -2;
Fix an infinite recursion from a bad 'require' statement. Also, update my
email address in CONTRIBUTORS.
----------------------------
revision 1.7
date: 2000-08-29 09:30:45 -0700;  author: grossjoh;  state: Exp;  lines: +8 -4;
* Makefile (tramp.elc): Wrap long line.
(tramp-vc.elc): Frob load-path for byte-compilation because of
required libraries.

* tramp-vc.el: Move `provide' to end of file.
Require some needed libraries to avoid byte-compiler errors.

* tramp.el (tramp-handle-file-name-all-completions): Expand
DIRECTORY so that this also works with abbreviated file names.
(tramp-handle-file-newer-than-file-p): Bug with `signal'.
----------------------------
revision 1.6
date: 2000-07-19 22:52:24 -0700;  author: daniel;  state: Exp;  lines: +139 -134;
Do (save-match-data) at a higher level to try and avoid screwing up anyone
else who depends on their match data. This should fix the VC-to-CVS-file bug
that has been reported a few times, plus misc other bugs from the same source.

Also, drop some redundant code in places.
----------------------------
revision 1.5
date: 2000-05-31 15:09:02 -0700;  author: grossjoh;  state: Exp;  lines: +1 -5;
Removed empty lines.
----------------------------
revision 1.4
date: 2000-05-31 15:00:07 -0700;  author: grossjoh;  state: Exp;  lines: +93 -93;
Name change.
----------------------------
revision 1.3
date: 2000-05-30 20:29:47 -0700;  author: daniel;  state: Exp;  lines: +9 -2;
When we have a remote Perl, let the original 'vc-workfile-unchanged-p'
function run, as it will work correctly.

This should improve performance WRT remote VC.
----------------------------
revision 1.2
date: 2000-05-28 19:46:21 -0700;  author: daniel;  state: Exp;  lines: +1 -5;
Don't require 'rcp' in this file, it can cause issues.
----------------------------
revision 1.1
date: 2000-05-26 04:03:31 -0700;  author: daniel;  state: Exp;
Moved the VC integration code into a separate file.
----------------------------
revision 2.11.2.14
date: 2008-02-02 02:31:03 -0800;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: TWaoNOr4tjVflOPs;
* tramp-vc.el (tramp-vc-do-command): Use `mapc' instead of `mapcar'.
----------------------------
revision 2.11.2.13
date: 2007-09-06 14:21:15 -0700;  author: albinus;  state: Exp;  lines: +4 -1;  commitid: xydKsrMMwKVYIIws;

* lisp/tramp-vc.el (tramp-vc-user-login-name): Use `vc-find-version'
instead of `process-file' to check whether we have a new enough vc
that doesn't need the defadvice.
----------------------------
revision 2.11.2.12
date: 2007-08-21 11:07:31 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: oEP1LQdxPuNtaEus;

* lisp/tramp-vc.el (tramp-vc-user-login-name): Get argument by
`ad-get-arg'.
----------------------------
revision 2.11.2.11
date: 2007-07-25 12:37:31 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.11.2.10
date: 2007-05-28 03:11:24 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 1phYrakvGyMHgGjs;
*** empty log message ***
----------------------------
revision 2.11.2.9
date: 2007-05-27 08:43:53 -0700;  author: albinus;  state: Exp;  lines: +0 -2;  commitid: wsslTl4EbLwp8Ajs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-multi-method)
(tramp-file-name-method, tramp-file-name-user)
(tramp-file-name-host, tramp-file-name-localname): New defuns,
replacing defstruct `tramp-file-name'.
(tramp-handle-file-remote-p, tramp-completion-dissect-file-name1)
(tramp-dissect-file-name, tramp-dissect-multi-file-name): Apply
`vector' instead of `make-tramp-file-name'.
----------------------------
revision 2.11.2.8
date: 2006-01-27 12:25:27 -0800;  author: albinus;  state: Exp;  lines: +23 -19;

* lisp/tramp-vc.el (vc-user-login-name): Wrap defadvice with a test for
`process-file', in order to let it work for older Emacsen too.
----------------------------
revision 2.11.2.7
date: 2006-01-22 10:38:31 -0800;  author: albinus;  state: Exp;  lines: +44 -25;


Version 2.0.52 released.

* configure.ac: Bump version.

* lisp/tramp.el, lisp/tramp-ftp.el, lisp/tramp-util.el,
lisp/tramp-vc.el: Add code for unloading Tramp.  See comment before
`tramp-unload-tramp' for checklist.

* lisp/tramp.el (tramp-unload-file-name-handler-alist)
(tramp-unload-tramp): New defuns.
(tramp-advice-PC-expand-many-files): New defadvice.
(tramp-save-PC-expand-many-files, tramp-setup-complete) Defuns
removed.

* lisp/tramp-ftp.el (tramp-ftp-enable-ange-ftp): New defun.

* lisp/tramp-util.el (top): Apply `ignore' instead of `identity' for
byte-compiler pacification.

* texi/tramp.texi (Frequently Asked Questions): Remove Ange-FTP item.
Add Tramp disabling item.
----------------------------
revision 2.11.2.6
date: 2005-08-01 13:48:26 -0700;  author: albinus;  state: Exp;  lines: +2 -1;

Update years in copyright notice.
----------------------------
revision 2.11.2.5
date: 2005-07-10 14:36:48 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.11.2.4
date: 2005-02-12 03:34:28 -0800;  author: albinus;  state: Exp;  lines: +14 -14;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.11.2.3
date: 2004-12-23 16:00:48 -0800;  author: albinus;  state: Exp;  lines: +6 -3;

* configure.ac: Bump version (to 2.0.47-pre).  Update merge
version to 2.0.46.

* lisp/tramp.el (tramp-file-name-for-operation): Mark `shell-command'
as magic for Emacs only.
(tramp-wait-for-output): Fix error in deleting region.  From Kai
Grossjohann <kai.grossjohann@gmx.net>.

* lisp/tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
(tramp-vc-simple-command): Call `tramp-handle-shell-command' but
`shell-command', because it isn't magic in XEmacs.  Reported by
Adrian Aichner <adrian@xemacs.org>.
----------------------------
revision 2.11.2.2
date: 2004-10-23 12:53:26 -0700;  author: kai;  state: Exp;  lines: +2 -1;
* tramp-vc.el (vc-do-command): Do not advise it if
process-file is fboundp.
* tramp.el (tramp-file-name-handler-alist): Add entry for
process-file.
(tramp-handle-process-file): New function.
(tramp-file-name-for-operation): Support process-file.
----------------------------
revision 2.11.2.1
date: 2004-07-13 12:29:53 -0700;  author: albinus;  state: Exp;  lines: +9 -9;


Sync with trunk.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/tramp.el,v
Working file: lisp/tramp.el
head: 2.831
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.824
	branch-2-1-stable: 2.814.0.2
	branchpoint-2-1-stable: 2.814
	V-2-1-19: 2.814
	V-2-1-18: 2.777
	V-2-1-17: 2.746
	V-2-1-16: 2.697
	V-2-1-15: 2.674
	V-2-1-14: 2.659
	V-2-1-13: 2.633
	V-2-0-57: 2.359.2.117
	V-2-1-12: 2.616
	V-2-1-11: 2.593
	V-2-1-10: 2.569
	V-2-0-56: 2.359.2.105
	V-2-1-9: 2.551
	V-2-1-8: 2.531
	V-2-0-55: 2.359.2.91
	V-2-1-7: 2.505
	V-2-0-54: 2.359.2.78
	V-2-1-6: 2.491
	V-2-0-53: 2.359.2.70
	V-2-0-52: 2.359.2.65
	V-2-1-5: 2.469
	V-2-1-4: 2.450
	V-2-0-51: 2.359.2.53
	V-2-0-50: 2.359.2.46
	V-2-0-49: 2.359.2.37
	V-2-0-48: 2.359.2.31
	V-2-1-3: 2.414
	V-2-0-47: 2.359.2.26
	V-2-0-46: 2.359.2.21
	V-2-0-45: 2.359.2.14
	V-2-1-2: 2.399
	V-2-0-44: 2.359.2.12
	V-2-1-1: 2.391
	V-2-0-43: 2.359.2.8
	V-2-0-42: 2.359.2.5
	V-2-0-41: 2.359.2.3
	V-2-1-0: 2.359
	branch-2-0-stable: 2.359.0.2
	branchpoint-2-0-stable: 2.359
	V-2-0-40: 2.359
	V-2-0-39: 2.344
	V-2-0-38: 2.330
	V-2-0-37: 2.329
	V-2-0-36: 2.324
	V-2-0-35: 2.316
	V-2-0-34: 2.304
	V-2-0-33: 2.291
	V-2-0-32: 2.291
	V-2-0-30: 2.284
	V-2-0-29: 2.276
	V-2-0-28: 2.263
	V-2-0-27: 2.260
	V-2-0-26: 2.257
	V-2-0-25: 2.240
	V-2-0-24: 2.234
	V-2-0-23: 2.230
	V-2-0-22: 2.224
	V-2-0-21: 2.222
	V-2-0-20: 2.220
	V-2-0-19: 2.212
	V-2-0-18: 2.211
	V-2-0-17: 2.208
	V-2-0-16: 2.205
	V-2-0-15: 2.189
	V-2-0-14: 2.184
	V-2-0-13: 2.182
	completion: 2.179.0.2
	V-2-0-12: 2.179
	V-2-0-11: 2.174
	V-2-0-10: 2.172
	V-2-0-9: 2.169
	V-2-0-8: 2.167
	V-2-0-7: 2.166
	V-2-0-6: 2.164
	V-2-0-5: 2.158
	V-2-0-4: 2.154
	V-2-0-3: 2.141
	V-2-0-1: 2.115
	EMACS-21: 2.138
	V-2-0-0: 2.107
	tramp-xemacs-pkg: 2.48.0.2
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 1431;	selected revisions: 1431
description:
----------------------------
revision 2.831
date: 2011-01-26 01:43:34 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.830
date: 2011-01-10 11:38:27 -0800;  author: albinus;  state: Exp;  lines: +26 -9;  commitid: y8jnAyeuYI5ySK3v;
* tramp.el (tramp-default-method): Initialize with pscp/plink only
when running under W32.
(tramp-debug-message): Extend function exclude list.  Use `regexp-opt'.
----------------------------
revision 2.829
date: 2010-12-30 00:57:35 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: sJi0TOvcI16wGh2v;
* tramp.el (tramp-default-method-alist, tramp-default-user-alist)
(tramp-local-host-regexp, tramp-prefix-domain-format)
(tramp-prefix-domain-regexp): Set tramp-autoload cookie.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-sh.el:
* tramp-smb.el: Add tramp-autoload cookie for initialisation code
of `tramp-default-method-alist' and `tramp-default-user-alist'.
----------------------------
revision 2.828
date: 2010-12-10 05:43:53 -0800;  author: albinus;  state: Exp;  lines: +23 -22;  commitid: cTWXAQeJEEFGUJZu;
* tramp.el (tramp-action-password, tramp-process-actions): Revert
patch from 2010-12-08.  Use `save-restriction'.
----------------------------
revision 2.827
date: 2010-12-08 12:16:47 -0800;  author: albinus;  state: Exp;  lines: +7 -7;  commitid: 0k4sZ6GR3P5p9wZu;
* tramp.el (tramp-temp-buffer-file-name): Make it permanent-local.
(tramp-handle-insert-file-contents): Do not set permanent-local
property.
(tramp-action-password): Delete region, do not narrow.
(tramp-process-actions): Do not widen.

* tramp-sh.el (tramp-handle-start-file-process): Protect
buffer-modified value.  (Bug#7557)
----------------------------
revision 2.826
date: 2010-12-01 09:42:17 -0800;  author: albinus;  state: Exp;  lines: +27 -17;  commitid: Uh2KDiGC5DnnwBYu;
* tramp.el (tramp-debug-message): Extend function exclude list.

* tramp-sh.el (tramp-methods): Add recursive options to "pscp" and
"psftp".  Exchange "%k" marker with options.
(tramp-do-copy-or-rename-file, tramp-sh-handle-file-local-copy):
Compute size of link target.
(tramp-do-copy-or-rename-file-out-of-band). Move setting of
`tramp-current-*' up due to gateway methods.  Optimze computing of
copy arguments.  Use `tramp-get-connection-name' and
`tramp-get-connection-buffer'.  Improve debug messages.

* tramp.el (tramp-default-method-alist)
(tramp-default-user-alist, tramp-default-proxies-alist): Adapt
custom options type.  (Bug#7445)
(tramp-local-host-regexp): Add "localhost6".
(tramp-file-name-port): Check also for `tramp-default-port'.
(tramp-get-connection-name): New defun.
(tramp-get-connection-process): Use it.
(tramp-drop-volume-letter): Fix doc string.

* tramp-cmds.el: Remove solved todo item.

* tramp-efs.el:
* tramp-ftp.el:
* tramp-gvfs.el:
* tramp-gw.el:
* tramp-imap.el:
* tramp-smb.el: Fix regexps added to `tramp-default-method-alist'
and `tramp-default-user-alist', respectively.

* tramp-gw.el (tramp-gw-open-connection): Use
`tramp-get-connection-name' and `tramp-get-connection-buffer'.

* tramp-imap.el (tramp-imap-make-iht): Use just
`tramp-file-name-port'.

* tramp-sh.el (tramp-compute-multi-hops): Remove port
determination.
(tramp-maybe-open-connection): Use `tramp-get-connection-name'.
----------------------------
revision 2.825
date: 2010-11-21 11:43:09 -0800;  author: albinus;  state: Exp;  lines: +1 -6;  commitid: 9jRqh1SjMaUNvkXu;
* tramp.el (tramp-handle-insert-file-contents): Do not set
`backup-by-copying-when-mismatch'.
----------------------------
revision 2.824
date: 2010-11-20 03:37:43 -0800;  author: albinus;  state: Exp;  lines: +3 -1;  commitid: LGBHFIdo5VHlR9Xu;
* tramp.el (tramp-handle-insert-file-contents): Don't use
`file-remote-p' (due to compatibility).
----------------------------
revision 2.823
date: 2010-11-13 02:27:32 -0800;  author: albinus;  state: Exp;  lines: +7 -7;  commitid: JAP0ddpM79e3HfWu;
* tramp-compat.el (tramp-compat-line-beginning-position)
(tramp-compat-line-end-position): Remove them.

* tramp.el (tramp-parse-rhosts-group, tramp-parse-shosts-group)
(tramp-parse-sconfig-group, tramp-parse-passwd-group)
(tramp-parse-netrc-group, tramp-parse-putty-group):
* tramp-cmds.el (tramp-append-tramp-buffers):
* tramp-sh.el (tramp-do-file-attributes-with-ls)
(tramp-sh-handle-file-selinux-context)
(tramp-sh-handle-file-name-all-completions)
(tramp-sh-handle-insert-directory)
(tramp-sh-handle-expand-file-name, tramp-find-executable)
(tramp-wait-for-output, tramp-send-command-and-read)
* tramp-smb.el (tramp-smb-read-file-entry)
(tramp-smb-get-cifs-capabilities)
* tramp-util.el (tramp-PC-expand-many-files): Use `point-at-eol'.

* tramp-sh.el (tramp-sh-handle-insert-directory) Use `point-at-bol'.
(tramp-remote-coding-commands): Add an alternative using "base64
-d -i".  This is needed for older base64 versions from GNU
coreutils.  Reported by Klaus Reichl
<Klaus.Reichl@thalesgroup.com>.
----------------------------
revision 2.822
date: 2010-11-10 01:56:32 -0800;  author: albinus;  state: Exp;  lines: +1 -4;  commitid: fkCkCjktNvDACRVu;
* tramp.el (tramp-handle-insert-file-contents): Do not set
`permanent-local' property for `backup-by-copying-when-mismatch'.
----------------------------
revision 2.821
date: 2010-10-30 09:43:26 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: aU02fWQLwRIQduUu;
* tramp.el (tramp-handle-insert-file-contents): For root, preserve
owner and group when editing files.  (Bug#7289)
----------------------------
revision 2.820
date: 2010-10-05 07:06:01 -0700;  author: albinus;  state: Exp;  lines: +21 -26;  commitid: Yfgg9L8idLcN9gRu;
* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-handle-file-exists-p, tramp-handle-file-newer-than-file-p):
New defuns, taken from tramp-smb.el.
(tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag): Removed.

* tramp-compat.el (top): Do not check for byte-compiler objects.
(tramp-compat-coding-system-change-eol-conversion)
(tramp-compat-set-process-query-on-exit-flag): New defuns, taken
from tramp.el.

* tramp-gvfs.el:
* tramp-gw.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.

* tramp-imap.el (tramp-imap-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-imap-handle-file-exists-p)
(tramp-imap-handle-file-executable-p)
(tramp-imap-handle-file-readable-p)
(tramp-imap-handle-directory-files-and-attributes)
(tramp-imap-handle-file-newer-than-file-p): Removed.

* tramp-sh.el: Replace `tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag' and
`tramp-coding-system-change-eol-conversion' by
`tramp-compat-coding-system-change-eol-conversion'.

* tramp-smb.el (tramp-smb-file-name-handler-alist): Use
`tramp-handle-directory-files-and-attributes',
`tramp-handle-file-exists-p' and
`tramp-handle-file-newer-than-file-p'.
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-newer-than-file-p): Removed.
(tramp-smb-maybe-open-connection): Replace
`tramp-set-process-query-on-exit-flag' by
`tramp-compat-set-process-query-on-exit-flag'.
----------------------------
revision 2.819
date: 2010-10-04 12:34:57 -0700;  author: albinus;  state: Exp;  lines: +515 -51;  commitid: n7rp0IAxnvWy0aRu;
Continue reorganization of load dependencies.  (Bug#7156)

* tramp.el (tramp-handle-file-local-copy-hook)
(tramp-delete-temp-file-function): Move down.
(tramp-exists-file-name-handler): Move up.
(tramp-register-file-name-handlers): Simplify autoload.
(tramp-handle-write-region-hook, tramp-handle-directory-file-name)
(tramp-handle-directory-files, tramp-handle-dired-uncache)
(tramp-handle-file-modes, tramp-handle-file-name-as-directory)
(tramp-handle-file-name-completion)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-regular-p)
(tramp-handle-file-remote-p, tramp-handle-file-symlink-p)
(tramp-handle-find-backup-file-name)
(tramp-handle-insert-file-contents, tramp-handle-load)
(tramp-handle-substitute-in-file-name)
(tramp-handle-unhandled-file-name-directory)
(tramp-mode-string-to-int, tramp-local-host-p)
(tramp-make-tramp-temp-file): Moved from tramp-sh.el.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Do not require 'tramp-sh.

* tramp-sh.el (all): Move several objects to tramp.el, see there.
Rename `tramp-handle-*' to `tramp-sh-handle-*'.

* tramp-vc.el (tramp-vc-user-login-name, tramp-vc-file-owner): Use
`file-attributes'.
----------------------------
revision 2.818
date: 2010-10-02 04:51:46 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: VuxAzfL6W3iEvRQu;
* tramp.el (tramp-completion-reread-directory-timeout): Fix
docstring.

* tramp-cache.el (tramp-cache-inhibit-cache): Remove.
(tramp-get-file-property): Replace `tramp-cache-inhibit-cache' by
`remote-file-name-inhibit-cache'.  Check also for an integer
value.  Add/increase counter when `tramp-verbose' >= 10.
(tramp-set-file-property): Add/increase counter when
`tramp-verbose' >= 10.

* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-cleanup-all-buffers): Set tramp-autoload cookie.
(tramp-bug): Set tramp-autoload cookie.  Report all interned
tramp-* variables.  Report also `remote-file-name-inhibit-cache'.
(tramp-reporter-dump-variable): Fix docstring.  Mask non-7bit
characters only in strings.

* tramp-compat.el (remote-file-name-inhibit-cache): Define due to
backward compatibility.

* tramp-sh.el (tramp-handle-verify-visited-file-modtime)
(tramp-handle-file-name-all-completions)
(tramp-handle-vc-registered): Use
`remote-file-name-inhibit-cache'.
(tramp-open-connection-setup-interactive-shell): Call
`tramp-cleanup-connection' directly.
----------------------------
revision 2.817
date: 2010-09-15 13:14:11 -0700;  author: albinus;  state: Exp;  lines: +6 -4;  commitid: cEIrA9vZbWCTPIOu;
Ensure XEmacs compatibility.

* Makefile.in (tramp-loaddefs.el): Adapt `autoload-trim-file-name'
and feature name.
(distclean): Remove trampver.el, it is handled in the upper Makefile.

* tramp-compat.el (tramp-compat-with-temp-message)
(tramp-compat-font-lock-add-keywords, tramp-compat-process-get)
(tramp-compat-process-put): New defuns.

* tramp.el (top):
* tramp-gvfs.el (top):
* tramp-cache.el (top): Use `tramp-compat-font-lock-add-keywords'.

* tramp.el (tramp-progress-reporter-update): Use `tramp-compat-funcall.

* tramp.el (tramp-process-actions):
* tramp-gvfs.el (tramp-handle-vc-registered):
* tramp-sh.el (tramp-gvfs-handler-askquestion)
(tramp-get-remote-stat, tramp-get-remote-readlink): Use
`tramp-compat-with-temp-message'.

* tramp-sh.el (top): Require 'cl.
(tramp-handle-start-file-process): Use `tramp-compat-process-get'.
(tramp-open-connection-setup-interactive-shell): Use
`tramp-compat-process-put'.

* tramp-util.el (top): Require 'tramp-sh.
----------------------------
revision 2.816
date: 2010-09-13 06:18:45 -0700;  author: albinus;  state: Exp;  lines: +87 -5743;  commitid: hctSFHPfw5XxBqOu;
Major code cleanup.  Split tramp.el into tramp.el and tramp-sh.el.

* Makefile.in (LISP_FILES): Remove tramp-fish.el.  Add tramp-sh.el.

* tramp.el (top): Don't show loading message.  Require just
'tramp-compat, everything else is required there.  Use
`ignore-errors' where appropriate.
(tramp-inline-compress-start-size, tramp-copy-size-limit)
(tramp-terminal-type, tramp-end-of-output)
(tramp-initial-end-of-output, tramp-completion-function-alist-rsh)
(tramp-completion-function-alist-ssh)
(tramp-completion-function-alist-telnet)
(tramp-completion-function-alist-su)
(tramp-completion-function-alist-putty, tramp-remote-path)
(tramp-remote-process-environment, tramp-sh-extra-args)
(tramp-actions-before-shell, tramp-uudecode)
(tramp-perl-file-truename, tramp-perl-file-name-all-completions)
(tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode)
(tramp-vc-registered-read-file-names, tramp-file-mode-type-map)
(tramp-file-name-handler-alist, tramp-make-tramp-temp-file)
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-as-directory)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-exists-p, tramp-handle-file-attributes)
(tramp-do-file-attributes-with-ls)
(tramp-do-file-attributes-with-perl)
(tramp-do-file-attributes-with-stat)
(tramp-handle-set-visited-file-modtime)
(tramp-handle-verify-visited-file-modtime)
(tramp-handle-set-file-modes, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-remote-selinux-p)
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-newer-than-file-p, tramp-handle-file-modes)
(tramp-handle-file-directory-p, tramp-handle-file-regular-p)
(tramp-handle-file-symlink-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p)
(tramp-handle-directory-file-name, tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-do-directory-files-and-attributes-with-perl)
(tramp-do-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions)
(tramp-handle-file-name-completion, tramp-handle-add-name-to-file)
(tramp-handle-copy-file, tramp-handle-copy-directory)
(tramp-handle-rename-file, tramp-do-copy-or-rename-file)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-dired-compress-file, tramp-handle-dired-uncache)
(tramp-handle-insert-directory)
(tramp-handle-unhandled-file-name-directory)
(tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-executable-find, tramp-process-sentinel)
(tramp-handle-start-file-process, tramp-handle-process-file)
(tramp-handle-call-process-region, tramp-handle-shell-command)
(tramp-handle-file-local-copy, tramp-handle-file-remote-p)
(tramp-handle-insert-file-contents)
(tramp-handle-insert-file-contents-literally)
(tramp-handle-find-backup-file-name)
(tramp-handle-make-auto-save-file-name, tramp-handle-write-region)
(tramp-vc-registered-file-names, tramp-handle-vc-registered)
(tramp-sh-file-name-handler, tramp-vc-file-name-handler)
(tramp-maybe-send-script, tramp-set-auto-save, tramp-run-test)
(tramp-run-test2, tramp-find-executable, tramp-set-remote-path)
(tramp-find-file-exists-command, tramp-open-shell)
(tramp-find-shell, tramp-barf-if-no-shell-prompt)
(tramp-open-connection-setup-interactive-shell)
(tramp-local-coding-commands, tramp-remote-coding-commands)
(tramp-find-inline-encoding, tramp-call-local-coding-command)
(tramp-inline-compress-commands, tramp-find-inline-compress)
(tramp-compute-multi-hops, tramp-maybe-open-connection)
(tramp-send-command , tramp-wait-for-output)
(tramp-send-command-and-check, tramp-barf-unless-okay)
(tramp-send-command-and-read, tramp-mode-string-to-int)
(tramp-convert-file-attributes, tramp-check-cached-permissions)
(tramp-file-mode-from-int, tramp-file-mode-permissions)
(tramp-shell-case-fold, tramp-make-copy-program-file-name)
(tramp-method-out-of-band-p, tramp-local-host-p)
(tramp-get-remote-path, tramp-get-remote-tmpdir)
(tramp-get-ls-command, tramp-get-ls-command-with-dired)
(tramp-get-test-command, tramp-get-test-nt-command)
(tramp-get-file-exists-command, tramp-get-remote-ln)
(tramp-get-remote-perl, tramp-get-remote-stat)
(tramp-get-remote-readlink, tramp-get-remote-trash)
(tramp-get-remote-id, tramp-get-remote-uid, tramp-get-remote-gid)
(tramp-get-local-uid, tramp-get-local-gid)
(tramp-get-inline-compress, tramp-get-inline-coding, ): Move to
tramp-sh.el.
(tramp-methods, tramp-default-method-alist)
(tramp-default-user-alist, tramp-foreign-file-name-handler-alist):
Move initialization to tramp-sh.el.
(tramp-temp-name-prefix): Make it a defconst.
(tramp-dissect-file-name): Don't check anymore for multi-hop
methods.
(tramp-debug-outline-regexp): Add a docstring.
(tramp-debug-outline-level): Renamed from `tramp-outline-level'.
(tramp-get-debug-buffer): Use it.

* tramp-cache.el (top): Set tramp-autoload cookie for
initialization forms.
(tramp-set-connection-property): Don't protect `tramp-message'
call, it isn't necessary any longer.
(tramp-dump-connection-properties): Use `ignore-errors'.

* tramp-compat.el (top): Require 'advice, 'format-spec,
'password-cache and 'auth-source.

* tramp-gvfs.el (top):
* tramp-smb.el (top): Require 'tramp-sh.

* tramp-gw.el (tramp-gw-open-network-stream): Use `ignore-errors'.

* tramp-sh.el: New file, derived from tramp.el.
(top): Initialize `tramp-methods', `tramp-default-method-alist',
`tramp-default-user-alist', tramp-foreign-file-name-handler-alist.
Remove "scp1_old", "scp2_old", "ssh1_old", "ssh2_old".  Use
`ignore-errors' where appropriate.
(tramp-sh-file-name-handler-alist): Renamed from
`tramp-file-name-handler-alist'.
(tramp-send-command-and-check): Return t or nil.  Remove all
`zerop' checks, where called.
(tramp-handle-set-file-modes)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-delete-directory, tramp-handle-delete-file)
(tramp-maybe-send-script, ): Use `tramp-barf-unless-okay'.
(tramp-sh-file-name-handler, tramp-send-command-and-check)
(tramp-get-remote-ln): Set tramp-autoload cookie.
----------------------------
revision 2.815
date: 2010-09-08 06:48:40 -0700;  author: albinus;  state: Exp;  lines: +302 -442;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.814
date: 2010-08-23 11:23:06 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: tiSTp0DWhbgDXKLu;
branches:  2.814.2;
Version 2.1.19 released.

* configure.ac: Bump version.
----------------------------
revision 2.813
date: 2010-08-16 21:49:15 -0700;  author: albinus;  state: Exp;  lines: +13 -5;  commitid: UqVVdbDwpkXoEUKu;
* tramp.el (tramp-handle-make-symbolic-link): Flush file
properties.
(tramp-handle-process-file): Call the program in a subshell, in
order to preserve working directory.
(tramp-action-password): Hide password prompt before next run.
(tramp-process-actions): Widen connection buffer for the trace.
----------------------------
revision 2.812
date: 2010-08-10 02:55:44 -0700;  author: albinus;  state: Exp;  lines: +8 -8;  commitid: VDqMOSNrAw0Fz2Ku;
* tramp.el (tramp-vc-registered-read-file-names): Read input as
here-document, otherwise the command could exceed maximum length
of command line.
(tramp-handle-vc-registered): Call script accordingly.  Reported
by Toru TSUNEYOSHI <t_tuneyosi@hotmail.com>.
----------------------------
revision 2.811
date: 2010-08-06 07:28:36 -0700;  author: albinus;  state: Exp;  lines: +5 -4;  commitid: 4fu9aBbB5kL9dyJu;
* tramp.el (tramp-handle-start-file-process ): Set connection
property "vec".
(tramp-process-sentinel): Use it for flushing the cache.  We
cannot do it via the process buffer, the buffer could be deleted
already when running the sentinel.
----------------------------
revision 2.810
date: 2010-08-05 01:09:08 -0700;  author: albinus;  state: Exp;  lines: +15 -6;  commitid: 3Vb1XTzcyIp39oJu;
* tramp.el (tramp-handle-dired-uncache): Flush directory cache,
not only file cache.
(tramp-process-sentinel): New defun.
(tramp-handle-start-file-process): Use it, in order to invalidate
file caches.
----------------------------
revision 2.809
date: 2010-07-29 06:06:22 -0700;  author: albinus;  state: Exp;  lines: +11 -14;  commitid: p0aVFhNttzEY0wIu;
* tramp.el (tramp-handle-start-file-process): Check only for
`remote-tty' process property.
(tramp-open-shell): Don't check for tty.
(tramp-open-connection-setup-interactive-shell): Set `remote-tty'
process property.
----------------------------
revision 2.808
date: 2010-07-28 02:57:06 -0700;  author: albinus;  state: Exp;  lines: +54 -37;  commitid: cMk21qq3P9j20nIu;
* tramp.el (tramp-methods): Move hostname to the end in all ssh
`tramp-login-args'.
(tramp-verbose): Describe verbose level 9.
(tramp-open-shell): Check for tty if `tramp-verbose' >= 9.
(tramp-open-connection-setup-interactive-shell): Trace stty
settings if `tramp-verbose' >= 9.
(tramp-handle-start-file-process): Implement tty setting.
(Bug#4604, Bug#6360)

* tramp-cmds.el (tramp-bug): Recommend setting of `tramp-verbose'
to 9.
----------------------------
revision 2.807
date: 2010-07-23 06:57:23 -0700;  author: albinus;  state: Exp;  lines: +8 -8;  commitid: 2pVeXbM4DaQquKHu;
* tramp.el (tramp-methods): Move hostname to the end in all plink
`tramp-login-args'.
----------------------------
revision 2.806
date: 2010-07-23 06:26:53 -0700;  author: albinus;  state: Exp;  lines: +39 -36;  commitid: rgUENcGkADwMjKHu;
* tramp.el (tramp-file-name-regexp-unified)
(tramp-completion-file-name-regexp-unified): On W32 systems, do
not regard the volume letter as remote filename.  (Bug#5447)
(tramp-open-shell): New defun.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Use it.
----------------------------
revision 2.805
date: 2010-07-20 21:38:40 -0700;  author: albinus;  state: Exp;  lines: +4 -2;  commitid: TsBevGCXfv6AsrHu;
* tramp.el (tramp-get-ls-command)
(tramp-get-ls-command-with-dired): Run tests on "/dev/null"
instead of "/".
----------------------------
revision 2.804
date: 2010-07-20 12:03:59 -0700;  author: albinus;  state: Exp;  lines: +23 -5;  commitid: P8cuXMMgcx6qhoHu;
* tramp.el (tramp-file-name-handler): Trace 'quit.
(tramp-open-connection-setup-interactive-shell): Apply
workaround for IRIX64 bug.  Move argument of last
`tramp-send-command' where it belongs to.
----------------------------
revision 2.803
date: 2010-07-20 03:21:47 -0700;  author: albinus;  state: Exp;  lines: +4 -6;  commitid: TTP8FvQc87tmolHu;
* tramp.el (tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes): Don't pass "$3".
(tramp-maybe-open-connection): Use `async-args' and `gw-args' in
front of `login-args'.
----------------------------
revision 2.802
date: 2010-07-17 01:40:47 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: rlZd7tLu9OVzVWGu;
* tramp.el (tramp-get-ls-command-with-dired): Make test for
"--dired" stronger.
----------------------------
revision 2.801
date: 2010-07-16 05:07:02 -0700;  author: albinus;  state: Exp;  lines: +14 -8;  commitid: 5xAFxYqIfgem6QGu;
* tramp.el (tramp-handle-shell-command): Don't use hard-wired
"/bin/sh" but `tramp-remote-sh' from `tramp-methods'.
(tramp-find-shell): Simplify setting connection property.
(tramp-get-ls-command): Make test for "--color=never" stronger.
----------------------------
revision 2.800
date: 2010-06-12 01:54:22 -0700;  author: albinus;  state: Exp;  lines: +9 -6;  commitid: FPHoi5NWl1x08sCu;
* tramp.el (tramp-remote-process-environment): Protect version
string by apostroph.
(tramp-shell-prompt-pattern): Do not use a shy group in case of
XEmacs.
(tramp-file-name-for-operation): Add `call-process-region'.
(tramp-set-process-query-on-exit-flag): Fix wrong parentheses.

* tramp-compat.el (top): Do not autoload
`tramp-handle-file-remote-p'.  Load tramp-util.el and tramp-vc.el
only when `start-file-process' is not bound.
(tramp-advice-file-expand-wildcards): Do not use
`tramp-handle-file-remote-p'.
(tramp-compat-make-temp-file): Handle the case, that
`make-temp-file' has no third argument EXTENSION.

* tramp-util.el (top): Apply advices only when there are no file
name handlers for `start-file-process' and `process-file'.
----------------------------
revision 2.799
date: 2010-05-28 07:44:34 -0700;  author: albinus;  state: Exp;  lines: +19 -8;  commitid: 9Psmv9pA2R09yyAu;
* tramp.el (tramp-debug-message ): Add `tramp-compat-funcall' to
ignored backtrace functions.
(with-progress-reporter): Expand docstring.
(tramp-handle-delete-file): Implement TRASH argument.
(tramp-get-remote-trash): New defun.
----------------------------
revision 2.798
date: 2010-05-28 06:13:25 -0700;  author: albinus;  state: Exp;  lines: +19 -18;  commitid: 2CLK9YLsWaoW2yAu;
* tramp-compat.el (tramp-compat-delete-file): Use `symbol-value'
for backward compatibility.

* tramp.el (tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `delete-file' instead
of `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use `delete-file'
instead of `tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-do-copy-or-rename-file): Use
`delete-file' instead of `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use `delete-file' instead of
`tramp-compat-delete-file'.
(tramp-smb-handle-delete-directory): Use 'trash as arg.

* tramp-vc.el (tramp-vc-user-login-name): Use `delete-file'
instead of `tramp-compat-delete-file'.
----------------------------
revision 2.797
date: 2010-05-28 03:31:51 -0700;  author: albinus;  state: Exp;  lines: +19 -20;  commitid: 8f88ImmlFUbw9xAu;
* tramp-compat.el (tramp-compat-delete-file): Rewrite to handle
new TRASH arg of `delete-file'.

* tramp.el (tramp-handle-delete-file): Change FORCE arg to TRASH.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use null TRASH arg in
tramp-compat-delete-file call.

* tramp-fish.el (tramp-fish-handle-delete-directory)
(tramp-fish-handle-delete-file)
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use null TRASH arg
in `tramp-compat-delete-file' call.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Rename arg.
(tramp-gvfs-handle-write-region): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-imap.el (tramp-imap-handle-delete-file): Rename arg.
(tramp-imap-do-copy-or-rename-file): Use null TRASH arg in
`tramp-compat-delete-file' call.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Use null TRASH arg in
tramp-compat-delete-file call.
(tramp-smb-handle-delete-directory): Use tramp-compat-delete-file.
(tramp-smb-handle-delete-file): Rename arg.
----------------------------
revision 2.796
date: 2010-05-25 06:25:14 -0700;  author: albinus;  state: Exp;  lines: +4 -6;  commitid: Nc5TB3qqPPTYcaAu;
* tramp.el (tramp-handle-insert-directory): Don't use
`forward-word', it's default syntax could be changed.
----------------------------
revision 2.795
date: 2010-05-25 01:39:27 -0700;  author: albinus;  state: Exp;  lines: +31 -22;  commitid: n5aSqPkqy3PVC8Au;
* tramp.el (tramp-progress-reporter-update): New defun.
(with-progress-reporter): Use it.
(tramp-process-one-action):
* tramp-gvfs.el (tramp-gvfs-handler-askquestion): Preserve current
message, in order to let progress reporter continue
afterwards.  (Bug#6257)
----------------------------
revision 2.794
date: 2010-05-21 06:46:38 -0700;  author: albinus;  state: Exp;  lines: +240 -231;  commitid: RZ9vsTHEycGisEzu;
* tramp.el (tramp-do-copy-or-rename-file)
(tramp-handle-file-local-copy, tramp-maybe-open-connection): Tune
`with-progress-reporter' messages.
(tramp-handle-vc-registered):
* tramp-fish.el (tramp-fish-handle-file-local-copy)
(tramp-fish-handle-insert-file-contents)
(tramp-fish-maybe-open-connection):
* tramp-gvfs.el (tramp-gvfs-maybe-open-connection):
* tramp-imap.el (tramp-imap-do-copy-or-rename-file)
(tramp-imap-handle-insert-file-contents)
(tramp-imap-handle-file-local-copy): Use `with-progress-reporter'.
----------------------------
revision 2.793
date: 2010-05-19 11:52:35 -0700;  author: albinus;  state: Exp;  lines: +26 -2;  commitid: QV1obrXnz4e5dqzu;
* tramp.el (tramp-methods): Add `tramp-async-args' attribute where
appropriate.
(tramp-maybe-open-connection): Use it.
----------------------------
revision 2.792
date: 2010-05-13 13:38:53 -0700;  author: albinus;  state: Exp;  lines: +117 -125;  commitid: IdwA2HqyQHCuZEyu;
* tramp.el (with-progress-reporter): Create reporter object only
when the message would be displayed.  Handled nested calls.
(tramp-handle-load, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-maybe-send-script, tramp-find-shell): Use
`with-progress-reporter'.
(tramp-handle-dired-compress-file, tramp-maybe-open-connection):
Fix message text.

* tramp-smb.el (tramp-smb-handle-copy-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region, tramp-smb-maybe-open-connection):
Use `with-progress-reporter'.
----------------------------
revision 2.791
date: 2010-05-10 08:38:48 -0700;  author: albinus;  state: Exp;  lines: +16 -17;  commitid: sed1jmcgk0UHqfyu;
* tramp.el (tramp-do-file-attributes-with-stat): Add space in
format string, in order to work around a bug in pdksh.  Reported
by Gilles Pion <gpion@lfdj.com>.
(tramp-handle-verify-visited-file-modtime): Do not send a command
when the connection is not established.
(tramp-handle-set-file-times): Simplify the check for utc.
----------------------------
revision 2.790
date: 2010-05-09 12:45:06 -0700;  author: albinus;  state: Exp;  lines: +80 -78;  commitid: mYjXXOy50YSYO8yu;
* tramp-compat.el (byte-compile-not-obsolete-vars): Define if not
bound.
(tramp-compat-copy-file): Add PRESERVE-SELINUX-CONTEXT.
(tramp-compat-funcall): New defmacro.
(tramp-compat-line-beginning-position)
(tramp-compat-line-end-position)
(tramp-compat-temporary-file-directory)
(tramp-compat-make-temp-file, tramp-compat-file-attributes)
(tramp-compat-copy-file, tramp-compat-copy-directory)
(tramp-compat-delete-file, tramp-compat-delete-directory)
(tramp-compat-number-sequence, tramp-compat-process-running-p)
* tramp.el (top, with-progress-reporter)
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-handle-dired-compress-file, tramp-handle-shell-command)
(tramp-completion-mode-p, tramp-check-for-regexp)
(tramp-open-connection-setup-interactive-shell)
(tramp-compute-multi-hops, tramp-read-passwd, tramp-clear-passwd)
(tramp-time-diff, tramp-coding-system-change-eol-conversion)
(tramp-set-process-query-on-exit-flag, tramp-unload-tramp)
* tramp-cmds.el (tramp-cleanup-all-connections)
(tramp-reporter-dump-variable, tramp-load-report-modules)
(tramp-append-tramp-buffers)
* tramp-gvfs.el (tramp-gvfs-handle-file-selinux-context)
* tramp-util.el (tramp-gud-file-name): Use it.

* tramp-imap.el (top): Autoload `epg-make-context'.
----------------------------
revision 2.789
date: 2010-05-06 01:28:23 -0700;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: gZma8ggIUvl1bHxu;
* tramp.el (top, with-progress-reporter): Use `symbol-function'
inside `funcall'.

* tramp-compat.el (tramp-compat-file-attributes)
(tramp-compat-delete-file, tramp-compat-delete-directory): Handle
only `wrong-number-of-arguments' error.

* tramp-gvfs.el (tramp-gvfs-handle-copy-file): Fix typo.
(tramp-gvfs-handle-file-selinux-context): Use `symbol-function'
inside `funcall'.
----------------------------
revision 2.788
date: 2010-05-05 02:57:36 -0700;  author: albinus;  state: Exp;  lines: +21 -20;  commitid: 7vDVEtI34jXBHzxu;
Add FORCE argument to `delete-file'.

* tramp-compat.el (tramp-compat-delete-file): New defun.

* tramp.el (tramp-handle-delete-file): Add FORCE arg.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-process-file, tramp-handle-call-process-region)
(tramp-handle-shell-command, tramp-handle-file-local-copy)
(tramp-handle-insert-file-contents, tramp-handle-write-region)
(tramp-delete-temp-file-function): Use `tramp-compat-delete-file'.

* tramp-fish.el (tramp-fish-handle-delete-file): Add FORCE arg.
(tramp-fish-handle-make-symbolic-link)
(tramp-fish-handle-process-file): Use `tramp-compat-delete-file'.

* tramp-ftp.el (tramp-ftp-file-name-handler): Use
`tramp-compat-delete-file'.

* tramp-gvfs.el (tramp-gvfs-handle-delete-file): Add FORCE arg.
(tramp-gvfs-handle-write-region): Use `tramp-compat-delete-file'.

* tramp-imap.el (tramp-imap-handle-delete-file): Add FORCE arg.
(tramp-imap-do-copy-or-rename-file): Use `tramp-compat-delete-file'.

* tramp-smb.el (tramp-smb-handle-delete-file): Add FORCE arg.
(tramp-smb-handle-copy-file, tramp-smb-handle-file-local-copy)
(tramp-smb-handle-rename-file, tramp-smb-handle-write-region): Use
`tramp-compat-delete-file'.

* tramp-vc.el (tramp-vc-user-login-name): Use
`tramp-compat-delete-file'.
----------------------------
revision 2.787
date: 2010-05-04 01:38:20 -0700;  author: albinus;  state: Exp;  lines: +9 -9;  commitid: XifZ46LAiNUpirxu;
* tramp.el (tramp-methods): Remove "-q" from `tramp-login-args' in
order to see error messages for failed logins.
----------------------------
revision 2.786
date: 2010-05-01 02:27:14 -0700;  author: albinus;  state: Exp;  lines: +269 -151;  commitid: YCDwnEUDndF0F3xu;
Implement compression for inline methods.

* tramp.el (tramp-inline-compress-start-size): New defcustom.
(tramp-copy-size-limit): Allow also nil.
(tramp-inline-compress-commands): New defconst.
(tramp-find-inline-compress, tramp-get-inline-compress)
(tramp-get-inline-coding): New defuns.
(tramp-get-remote-coding, tramp-get-local-coding): Removed,
replaced by `tramp-get-inline-coding'.
(tramp-handle-file-local-copy, tramp-handle-write-region)
(tramp-method-out-of-band-p): Use `tramp-get-inline-coding'.
----------------------------
revision 2.785
date: 2010-04-28 11:37:54 -0700;  author: albinus;  state: Exp;  lines: +19 -7;  commitid: UwezdYURkmFTNIwu;
* tramp.el (tramp-remote-selinux-p): New defun.
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context): Use it.
----------------------------
revision 2.784
date: 2010-04-23 06:58:44 -0700;  author: albinus;  state: Exp;  lines: +57 -4;  commitid: jjKGKL8Sxss2q3wu;
Implement SELINUX backends.

* tramp.el (tramp-file-name-handler-alist): Add
`file-selinux-context' and `set-file-selinux-context'.
(tramp-handle-file-selinux-context)
(tramp-handle-set-file-selinux-context): New defuns.
(tramp-handle-copy-file, tramp-do-copy-or-rename-file): Handle
PRESERVE-SELINUX-CONTEXT.

* tramp-gvfs.el (tramp-gvfs-file-name-handler-alist): Add
`file-selinux-context' and `set-file-selinux-context'.
(tramp-gvfs-handle-file-selinux-context)
(tramp-gvfs-handle-set-file-selinux-context): New defuns.
(tramp-gvfs-handle-copy-file): Handle
PRESERVE-SELINUX-CONTEXT.

* tramp-fish.el (tramp-fish-handle-copy-file):
* tramp-imap.el (tramp-imap-handle-copy-file):
* tramp-smb.el (tramp-smb-handle-copy-file): Add
PRESERVE-SELINUX-CONTEXT.
----------------------------
revision 2.783
date: 2010-04-22 04:59:19 -0700;  author: albinus;  state: Exp;  lines: +196 -147;  commitid: bNgFjZfjw3AhNUvu;
* tramp.el (tramp-detect-ssh-controlmaster): New defun.
(tramp-default-method): Use it.

* tramp.el (tramp-error-with-buffer): Don't show the connection
buffer when we are in completion mode.
(with-connection-property, tramp-completion-mode-p)
(tramp-action-process-alive, tramp-action-out-of-band)
(tramp-check-for-regexp, tramp-file-name-p, tramp-equal-remote)
(tramp-exists-file-name-handler): Fix docstring.
(with-progress-reporter): New defmacro.
(tramp-do-copy-or-rename-file, tramp-handle-dired-compress-file)
(tramp-maybe-open-connection): Use it.
(tramp-handle-copy-file): Add new optional parameter
`preserve-selinux-context'.
(tramp-file-name-for-operation): Add `set-file-selinux-context'.
(tramp-connectable-p): New defun.
(tramp-handle-expand-file-name)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Use it.
(tramp-file-name-handler): Catch the error for some operations
when we are in completion mode.  This gives the user the chance to
correct the file name in the minibuffer.
(tramp-completion-mode-p): Use `non-essential'.

* tramp.el (tramp-file-name-for-operation):
Add file-selinux-context.
----------------------------
revision 2.782
date: 2010-04-10 08:48:44 -0700;  author: albinus;  state: Exp;  lines: +32 -21;  commitid: Lb4WYKS8yFbKrouu;
* tramp.el (tramp-do-copy-or-rename-file): Add progress reporter.
----------------------------
revision 2.781
date: 2010-03-19 07:12:20 -0700;  author: albinus;  state: Exp;  lines: +23 -25;  commitid: vPLrSNK85jZuCyru;
Discard GNU Emacs 21 compatibility.

* tramp.el (tramp-handle-directory-files-and-attributes)
(tramp-get-remote-path): Use `copy-tree'.
(tramp-set-auto-save-file-modes): Adapt version check.

* tramp-compat.el (tramp-advice-file-expand-wildcards): No need to
protect `featurep' call anymore.
(tramp-compat-make-temp-file): Simplify fallback implementation.
(tramp-compat-copy-tree): Remove function.

* tramp-fish.el (tramp-fish-handle-directory-files-and-attributes):
Use `tramp-compat-file-attributes'.

* tramp-util.el (tramp-advice-dired-insert-directory): Remove advice.
----------------------------
revision 2.780
date: 2010-03-18 12:21:22 -0700;  author: albinus;  state: Exp;  lines: +19 -16;  commitid: 97eLV6PglkHwmsru;
* tramp.el (tramp-do-copy-or-rename-file-out-of-band)
(tramp-compute-multi-hops, tramp-maybe-open-connection): Use
`format-spec-make'.
(tramp-debug-outline-regexp): New defconst.
(tramp-get-debug-buffer): Use it.
----------------------------
revision 2.779
date: 2010-03-15 16:38:22 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: jOAvuJj0cAcFS5ru;
* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Use
`tramp-compat-delete-directory'.

* tramp-compat.el (tramp-compat-delete-directory): Provide
implementation for older Emacsen.
----------------------------
revision 2.778
date: 2010-03-14 04:11:57 -0700;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: ewiPIlGpMfsAMTqu;
* tramp.el (tramp): Put in comm group.
* tramp-imap.el (tramp-imap): Put in tramp group.
----------------------------
revision 2.777
date: 2010-03-14 03:30:10 -0700;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: Fhwj0p760AveyTqu;
Version 2.1.18 released.

* configure.ac: Bump version.

* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Make call
of `delete-directory' backwards compatible.
----------------------------
revision 2.776
date: 2010-03-13 11:18:45 -0800;  author: albinus;  state: Exp;  lines: +13 -14;  commitid: VzSfnEH3lwaAvOqu;
* tramp.el (tramp-find-executable): Use
`tramp-get-connection-buffer'.  Make the regexp for checking
output of "wc -l" more robust.
(tramp-find-shell): Use another shell but /bin/sh on OpenSolaris.
(tramp-open-connection-setup-interactive-shell): Remove workaround
for OpenSolaris bug, it is not needed anymore.
----------------------------
revision 2.775
date: 2010-03-02 01:00:51 -0800;  author: albinus;  state: Exp;  lines: +10 -10;  commitid: sqObKjE4Vfcxrlpu;
* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Fix an
error when FILENAME and NEWNAME are existing remote directories.

* tramp-compat.el (tramp-compat-make-temp-file): Add optional
parameter DIR-FLAG.
----------------------------
revision 2.774
date: 2010-02-28 03:24:29 -0800;  author: albinus;  state: Exp;  lines: +4 -3;  commitid: ifEmZkMrdufNi6pu;
* tramp.el (tramp-handle-write-region): START can be a string.
Take care in the checks.  Reported by Dan Davison
<davison@stats.ox.ac.uk>.
----------------------------
revision 2.773
date: 2010-02-22 05:43:13 -0800;  author: albinus;  state: Exp;  lines: +6 -2;  commitid: WMG6LBDCSnNlglou;
* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Protect
setting the modes by `ignore-errors'.  It might fail, for example
if the file is not owned by the user but the group.
(tramp-handle-write-region): Ensure, that `tmpfile' is always readable.
----------------------------
revision 2.772
date: 2010-02-18 01:57:09 -0800;  author: albinus;  state: Exp;  lines: +10 -6;  commitid: 04E2EMQz21QL8Onu;
* tramp.el (tramp-handle-directory-files): When FULL, do not
expand "." and "..".  Reported by Thierry Volpiatto
<thierry.volpiatto@gmail.com>.
(tramp-handle-insert-file-contents): Set always the
permissions of the temporary file to "0600".  In case the remote
file has no read permissions for the owner, there might be
problems otherwise.  Reported by Ole Laursen <olau@iola.dk>.
----------------------------
revision 2.771
date: 2010-02-16 07:53:00 -0800;  author: albinus;  state: Exp;  lines: +33 -11;  commitid: O636X782nmAPaAnu;
* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Fix errors
  in copying directories.
  (tramp-handle-add-name-to-file, tramp-handle-copy-directory)
  (tramp-do-copy-or-rename-file, tramp-handle-delete-directory)
  (tramp-handle-delete-file)
  (tramp-handle-dired-recursive-delete-directory)
  (tramp-handle-write-region): Flush also the cache for the upper
  directory.
----------------------------
revision 2.770
date: 2010-02-15 06:56:16 -0800;  author: albinus;  state: Exp;  lines: +34 -30;  commitid: zC9KezLCr9DlTrnu;
* tramp.el (tramp-process-actions, tramp-read-passwd):
* tramp-gvfs.el (tramp-gvfs-maybe-open-connection): Use VEC
instead of PROC for caching "first-password-request".  Otherwise,
new processes would not profit from passwords already entered.

* tramp-cache.el (tramp-dump-connection-properties): Don't save
"first-password-request" property.
----------------------------
revision 2.769
date: 2010-02-04 08:02:02 -0800;  author: albinus;  state: Exp;  lines: +17 -15;  commitid: MoSIFmVTXc10C2mu;
* tramp.el (tramp-handle-dired-uncache): When DIR is not a
directory, handle its directory component.
(tramp-handle-file-remote-p): Let-bind `tramp-verbose' to 3; this
function is called permanently and creates noise, otherwise.

* tramp-imap.el (tramp-imap-handle-insert-directory):
* tramp-smb.el (tramp-smb-handle-insert-directory):
Handle the case, FILENAME is not in `default-directory'.  (Bug#5478)
----------------------------
revision 2.768
date: 2010-01-29 08:14:31 -0800;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: fcDpPGjB3U5fSglu;
* tramp.el (tramp-handle-insert-directory): Handle also symlinks,
when FILENAME is not in `default-directory'.
----------------------------
revision 2.767
date: 2010-01-28 13:05:19 -0800;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: c3BjjjvbLmAPvalu;
* tramp.el (tramp-handle-insert-directory): Handle the case,
FILENAME is not in `default-directory'.  (Bug#5478)
(tramp-register-file-name-handlers): Add safe-magic property.
----------------------------
revision 2.766
date: 2010-01-27 08:35:49 -0800;  author: albinus;  state: Exp;  lines: +25 -7;  commitid: DzqGDgWlAWxn31lu;
* tramp.el (ramp-remote-process-environment): Use `format' instead
of `concat'.
(tramp-check-for-regexp): User (forward-line 1).
(tramp-open-connection-setup-interactive-shell): Handle "=" in
variable values properly.
(tramp-find-inline-encoding): Raise an error, when no encoding is
found.
(tramp-wait-for-output): Remove spurious " ^H" sequences, sent by
busybox.
(tramp-get-ls-command): Suppress coloring, if possible.
----------------------------
revision 2.765
date: 2010-01-23 02:53:31 -0800;  author: albinus;  state: Exp;  lines: +19 -16;  commitid: r6lhKUCOypTThtku;
* tramp.el (tramp-completion-function-alist)
(tramp-file-name-regexp, tramp-chunksize)
(tramp-local-coding-commands, tramp-remote-coding-commands):
Fix docstring.
(tramp-do-copy-or-rename-file-directly): Do not use
`tramp-handle-file-remote-p'.
(tramp-find-foreign-file-name-handler)
(tramp-advice-make-auto-save-file-name)
(tramp-set-auto-save-file-modes): Remove superfluous check for
`stringp'.  This is done inside `tramp-tramp-file-p'.

* tramp-fish.el (tramp-fish-handle-directory-files-and-attributes):
Do not use `tramp-fish-handle-file-attributes.

* tramp-smb.conf (tramp-smb-conf): New defcustom.
(tramp-smb-maybe-open-connection): Use it.
----------------------------
revision 2.764
date: 2010-01-22 13:13:57 -0800;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: Pfp1A8yJSIjKKoku;
* tramp-imap.el (top): Autoload needed packages.
----------------------------
revision 2.763
date: 2010-01-19 11:33:46 -0800;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: Q70j1VYZ0jWmi0ku;
* tramp.el (tramp-wrong-passwd-regexp): Add "Timeout, server not
responding." string.
(tramp-remote-coding-commands): Fix typo in docstring.
----------------------------
revision 2.762
date: 2010-01-12 14:33:45 -0800;  author: albinus;  state: Exp;  lines: +24 -20;  commitid: S6PpbWbHJlF3w7ju;
* tramp.el (tramp-perl-encode, tramp-perl-decode):
Update copyrights for 2010.
(tramp-handle-insert-directory): Simplify handling of SWITCHES.
(tramp-wait-for-output): Check, whether PROC is available.

* tramp-compat.el (tramp-advice-file-expand-wildcards): Wrap call
of `featurep' for 2nd argument.
----------------------------
revision 2.761
date: 2009-12-26 11:59:01 -0800;  author: albinus;  state: Exp;  lines: +6 -1;  commitid: Xb6yjRvwPqwRcVgu;
* tramp.el (tramp-handle-insert-directory): Quote "'" in the
switches.
(tramp-open-connection-setup-interactive-shell): Dump stty
settings.  Enable "neveropen" arg for all `tramp-send-command' calls.
----------------------------
revision 2.760
date: 2009-12-23 02:11:21 -0800;  author: albinus;  state: Exp;  lines: +11 -3;  commitid: jfRDu8Vtvn5e3ugu;
* tramp.el (tramp-handle-file-name-all-completions): Backward/
XEmacs compatibility: Use `completion-ignore-case' if
`read-file-name-completion-ignore-case' does not exist.
(tramp-handle-dired-uncache): Add optional parameter DIR-P for
XEmacs compatibility.  Reported by Pete Forman
<petef4+usenet@gmail.com>.
(tramp-handle-insert-directory): Check also for //SUBDIRED// line.
----------------------------
revision 2.759
date: 2009-12-17 05:04:21 -0800;  author: albinus;  state: Exp;  lines: +13 -40;  commitid: Cvmh8LFqA5fxcJfu;
* tramp.el (tramp-handle-file-remote-p): Expand file name only if
there is already an established connection.
(tramp-advice-file-expand-wildcards): Remove it.

* tramp-compat.el (top): Autoload `tramp-handle-file-remote-p'.
(tramp-advice-file-expand-wildcards): Moved from tramp.el.
Activate advice for older GNU Emacs versions.  (Bug#5237)
----------------------------
revision 2.758
date: 2009-12-15 13:07:29 -0800;  author: albinus;  state: Exp;  lines: +17 -3;  commitid: 76XMdde6VTpgWvfu;
* tramp.el (tramp-echo-mark-marker-length): New defconst.
(tramp-echo-mark, tramp-echoed-echo-mark-regexp): Use it.
(tramp-check-for-regexp): Check also, when an echoing shell stops
to echo sent commands.
----------------------------
revision 2.757
date: 2009-12-09 02:14:30 -0800;  author: albinus;  state: Exp;  lines: +8 -8;  commitid: Ycte6ihHmNidwGeu;
* tramp.el (tramp-handle-insert-directory): Suppress error messages.
----------------------------
revision 2.756
date: 2009-12-06 22:20:55 -0800;  author: albinus;  state: Exp;  lines: +28 -17;  commitid: mpFBU1NbVmB3ipeu;
* tramp.el (tramp-end-of-output): Move up.  Use `#' and `$'
characters.
(tramp-initial-end-of-output): New defconst.
(tramp-methods, tramp-find-shell)
(tramp-open-connection-setup-interactive-shell)
(tramp-maybe-open-connection): Use it.
(tramp-shell-prompt-pattern, tramp-wait-for-output): Handle
existence of `#' and `$'.
----------------------------
revision 2.755
date: 2009-12-03 03:01:45 -0800;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: 2eoHY1YKK0gfYUdu;

VS: ----------------------------------------------------------------------
* tramp.el (tramp-handle-file-remote-p): Expand FILENAME for the
benefit of returning an expanded localname.
(tramp-tramp-file-p): Handle the case NAME is not a string.
----------------------------
revision 2.754
date: 2009-11-29 11:59:05 -0800;  author: albinus;  state: Exp;  lines: +4 -1;  commitid: dQFznYb26jzJ4sdu;
* tramp.el (tramp-maybe-open-connection): Open the remote shell
with "exec" when possible.  This prevents trailing prompts in
`start-file-process'.
----------------------------
revision 2.753
date: 2009-11-24 02:30:15 -0800;  author: albinus;  state: Exp;  lines: +6 -1;  commitid: UwJGm2dOyjBy5Lcu;
*** empty log message ***
----------------------------
revision 2.752
date: 2009-11-24 00:55:06 -0800;  author: albinus;  state: Exp;  lines: +24 -0;  commitid: D2SIluvFlUxEyKcu;

* tramp.el (tramp-eshell-directory-change): New defun.  Add it to
`eshell-directory-change-hook'.
----------------------------
revision 2.751
date: 2009-11-23 07:55:17 -0800;  author: albinus;  state: Exp;  lines: +31 -16;  commitid: jQp2zYKtKP6KUEcu;

* tramp.el (tramp-shell-prompt-pattern): Use \r for carriage
return.
(tramp-handle-make-symbolic-link)
(tramp-handle-dired-compress-file, tramp-handle-expand-file-name):
Quote file names.
(tramp-send-command-and-check): New argument DONT-SUPPRESS-ERR.
(tramp-handle-process-file): Use it.
----------------------------
revision 2.750
date: 2009-11-19 01:22:07 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: uSOSxBQ4ShzXR6cu;

* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Set
variables for computing the prompt for reading password.
----------------------------
revision 2.749
date: 2009-11-17 02:30:33 -0800;  author: albinus;  state: Exp;  lines: +10 -15;  commitid: I1NUwIRfuhoDjRbu;
* tramp.el (tramp-advice-file-expand-wildcards): Simplify.  Don't
set `ad-return-value' if `ad-do-it' doesn't.
----------------------------
revision 2.748
date: 2009-11-11 06:35:54 -0800;  author: albinus;  state: Exp;  lines: +11 -3;  commitid: 61rDfct9xFWQR6bu;
* tramp.el (tramp-advice-minibuffer-electric-separator)
(tramp-advice-minibuffer-electric-tilde): Unload advices via
`tramp-unload'.
(tramp-advice-make-auto-save-file-name)
(tramp-advice-file-expand-wildcards): Apply also `ad-activate'
after removing the advice.
----------------------------
revision 2.747
date: 2009-11-08 02:35:42 -0800;  author: albinus;  state: Exp;  lines: +35 -20;  commitid: ReaDt2z9h1QkDHau;
* tramp.el (tramp-advice-make-auto-save-file-name)
(tramp-advice-file-expand-wildcards): Unload via
`ad-remove-advice'.

* tramp.el (tramp-advice-file-expand-wildcards): Don't rely on
`ad-do-it'.

* tramp.el (tramp-handle-write-region): Copy but rename temp file,
in order to keep context in SELinux.
----------------------------
revision 2.746
date: 2009-11-07 14:25:20 -0800;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: RLErtGnbrAaKADau;
* tramp.el (tramp-handle-copy-directory): Don't use
`file-remote-p' (due to compatibility).
----------------------------
revision 2.745
date: 2009-10-26 01:58:53 -0700;  author: albinus;  state: Exp;  lines: +7 -7;  commitid: XFEPeF8IOHA7w19u;
* tramp.el (tramp-handle-write-region): In case of APPEND, reuse
the tmpfile name.
----------------------------
revision 2.744
date: 2009-10-23 07:56:53 -0700;  author: albinus;  state: Exp;  lines: +73 -18;  commitid: gqer5AGaO4TUAF8u;
* tramp.el (top): Remove `tramp-rfn-eshadow-update-overlay' from
`rfn-eshadow-update-overlay-hook' when unloading.
(tramp-methods): Add `tramp-copy-keep-tmpfile' for "rsync" and
"rsyncc".  Adjust doc string.
(tramp-temp-buffer-file-name) New buffer-local defvar.
(tramp-handle-insert-file-contents, tramp-handle-write-region):
Keep temporary file when indicated by method ("rsync" and
"rsyncc").
(tramp-handle-write-region): Handle APPEND.
(tramp-delete-temp-file-function): New defun.  Added to
`kill-buffer-hook'.
----------------------------
revision 2.743
date: 2009-10-15 05:12:56 -0700;  author: albinus;  state: Exp;  lines: +4 -2;  commitid: tVwhLrqgOjcCWC7u;
* tramp.el (tramp-replace-environment-variables): Do not fail if
the environment variable does not exists.
----------------------------
revision 2.742
date: 2009-10-11 06:29:34 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: eQrCMW1WlkkIu77u;
* tramp.el (tramp-local-host-p): Function shall return nil for
connection methods like smb.
----------------------------
revision 2.741
date: 2009-10-08 08:05:07 -0700;  author: albinus;  state: Exp;  lines: +22 -18;  commitid: gNYvHZmTBacD7K6u;
* tramp.el (tramp-file-name-real-user, tramp-file-name-domain)
(tramp-file-name-real-host, tramp-file-name-port): Apply
`save-match-data.
----------------------------
revision 2.740
date: 2009-10-07 04:03:29 -0700;  author: albinus;  state: Exp;  lines: +5 -5;  commitid: htzqnyxzXInJOA6u;
*** empty log message ***
----------------------------
revision 2.739
date: 2009-10-06 00:03:29 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: DPbs8hHHkxBowr6u;
* tramp.el (tramp-handle-start-file-process): Move tramp-error
call inside with-parsed...  macro so that `v' is defined.
----------------------------
revision 2.738
date: 2009-10-05 04:15:06 -0700;  author: albinus;  state: Exp;  lines: +60 -42;  commitid: 1HQ2FlAQh0XHWk6u;
* tramp.el (tramp-verbose): Fix docstring.
(tramp-default-method): Check also for
`auth-source-user-or-password'.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add handler for `copy-directory'.  Remove handler for
`dired-copy-file-recursive'.
(tramp-handle-copy-directory): New defun.
(tramp-do-copy-or-rename-file-out-of-band): Handle directory case.
(tramp-handle-dired-copy-file-recursive): Remove function.
(tramp-handle-start-file-process): Raise an error when PROGRAM is
nil.  Optimize sent command.
----------------------------
revision 2.737
date: 2009-10-01 08:16:29 -0700;  author: albinus;  state: Exp;  lines: +6 -12;  commitid: yZJfatz5qEiupQ5u;
* tramp.el (tramp-file-name-handler-alist)
(tramp-file-name-for-operation): Remove
`dired-delete-file-recursive'.
(tramp-handle-make-directory): Flush upper directory's file
properties.
(tramp-handle-delete-directory): Handle optional parameter
RECURSIVE.
(tramp-handle-dired-delete-file-recursive): Delete.
----------------------------
revision 2.736
date: 2009-09-29 07:22:58 -0700;  author: albinus;  state: Exp;  lines: +12 -2;  commitid: Zkfkgb9Q0m47bA5u;
* tramp.el (tramp-file-name-handler-alist)
(tramp-file-name-for-operation): Add entry for
`dired-delete-file-recursive'.
(tramp-handle-dired-delete-file-recursive): New defalias.
(tramp-handle-dired-recursive-delete-directory): Flush directory
properties after the remove command only.
----------------------------
revision 2.735
date: 2009-09-24 01:48:06 -0700;  author: albinus;  state: Exp;  lines: +46 -10;  commitid: qRpTbTeQHsdcuU4u;
* tramp.el (top): Require tramp-gvfs.
(tramp-methods): Add recursive option to `tramp-copy-args'.  Add
`tramp-copy-recursive'.  Valid for "rcp", "scp", "scp1", "scp2",
"scp1_old", "scp2_old", "rsync", "rsyncc".
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add entry for `dired-copy-file-recursive'.
(tramp-handle-dired-copy-file-recursive): New defun.
----------------------------
revision 2.734
date: 2009-09-08 08:30:11 -0700;  author: albinus;  state: Exp;  lines: +18 -3;  commitid: 1bC4Ms42Uvh1eT2u;
* tramp.el (tramp-handle-file-truename, tramp-get-remote-perl):
Check also for "perl-file-spec" and "perl-cwd-realpath"
properties.
----------------------------
revision 2.733
date: 2009-09-04 01:09:15 -0700;  author: albinus;  state: Exp;  lines: +3 -6;  commitid: Oi9mNbziQU4JUk2u;
* tramp.el (tramp-handle-insert-directory): Handle "--dired" also
when adding a new directory.
----------------------------
revision 2.732
date: 2009-09-02 02:57:56 -0700;  author: albinus;  state: Exp;  lines: +32 -27;  commitid: m9csKmBGnu60A52u;
* tramp.el (tramp-handle-file-name-all-completions): Use
`tramp-compat-number-sequence' instead of `number-sequence' and
symbol value of `read-file-name-completion-ignore-case'.  Both
symbols do not exist in Emacs 21.
(tramp-handle-insert-directory): Use "?\ " for compatibility
reasons.
(tramp-handle-vc-registered): Check, whether the first run did
return files to be tested.
----------------------------
revision 2.731
date: 2009-09-01 14:04:12 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 4oEhcGnKKbHsi12u;
*** empty log message ***
----------------------------
revision 2.730
date: 2009-09-01 14:02:09 -0700;  author: albinus;  state: Exp;  lines: +40 -45;  commitid: EL4Tnvxo1LlLh12u;
* tramp.el (tramp-handle-file-attributes-with-ls)
(tramp-do-file-attributes-with-perl)
(tramp-do-file-attributes-with-stat): Rename from
`tramp-handle-file-attributes-with-*'.
(tramp-handle-file-attributes): Use them.
(tramp-do-directory-files-and-attributes-with-perl)
(tramp-do-directory-files-and-attributes-with-stat): Rename from
`tramp-handle-directory-files-and-attributes-with-*'.
(tramp-handle-directory-files-and-attributes): Use them.
(tramp-method-out-of-band-p): Additional parameter SIZE.
(tramp-do-copy-or-rename-file, tramp-handle-file-local-copy)
(tramp-handle-write-region): Use it.
(tramp-advice-make-auto-save-file-name): Do not call directly
`tramp-handle-make-auto-save-file-name', because this would bypass
the locking mechanism.
----------------------------
revision 2.729
date: 2009-08-28 05:30:03 -0700;  author: albinus;  state: Exp;  lines: +175 -184;  commitid: 0YkBpoK24K09As1u;
* tramp.el (all): Replace "'(lambda" by "(lambda".
(tramp-handle-file-local-copy): Unset `file-name-handler-alist'
when writing the temp file.  Otherwise, epa-file gets confused.
(tramp-register-file-name-handlers): Make it a defun.  Move also
`epa-file-handler' to the front of `file-name-handler-alist'.

* tramp.el (tramp-shell-prompt-pattern): Allow a prompt to start
right after a ^M.
(tramp-root-regexp, tramp-completion-file-name-regexp-unified)
(tramp-completion-file-name-regexp-separate)
(tramp-completion-file-name-regexp-url): Use \\` and \\'.
(tramp-handle-file-attributes, tramp-set-file-uid-gid): Don't
modify last-coding-system-used by accident.
(tramp-completion-file-name-handler): Apply the checks here,
instead during registration.
(tramp-register-file-name-handlers) Renamed from
`tramp-register-file-name-handler'.  Register both
`tramp-file-name-handler' and
`tramp-completion-file-name-handler'.
(tramp-register-completion-file-name-handler): Removed.
----------------------------
revision 2.728
date: 2009-08-27 06:01:16 -0700;  author: albinus;  state: Exp;  lines: +14 -7;  commitid: 1JQUf9KHqYVQMk1u;
* tramp.el (tramp-do-copy-or-rename-file-directly): Extend check
for direct remote copying.
----------------------------
revision 2.727
date: 2009-08-19 02:36:42 -0700;  author: albinus;  state: Exp;  lines: +24 -14;  commitid: GvKMJsGAhdTBUh0u;
* tramp.el (tramp-handle-process-file): Merge three remote ops
into one.  Do not flush all caches when
`process-file-side-effects' is set.
(tramp-vc-registered-read-file-names): Unset
`process-file-side-effects'.
----------------------------
revision 2.726
date: 2009-08-18 05:03:00 -0700;  author: albinus;  state: Exp;  lines: +51 -69;  commitid: sLSaJrYKLulNKa0u;
* tramp.el (tramp-check-cached-permissions) New defun.
(tramp-handle-file-readable-p): Use it.
(tramp-handle-file-writable-p): Likewise.
(tramp-handle-file-executable-p): Likewise.
----------------------------
revision 2.725
date: 2009-08-17 21:14:28 -0700;  author: albinus;  state: Exp;  lines: +5 -5;  commitid: PFVhS9mu723Y980u;
* tramp.el (tramp-handle-file-name-all-completions): Use `mapc'
instead of `mapcar'.
(tramp-do-copy-or-rename-file-out-of-band): Declare `copy-env'.
----------------------------
revision 2.724
date: 2009-08-17 21:06:07 -0700;  author: albinus;  state: Exp;  lines: +165 -39;  commitid: LxZrWkLNh5v6780u;
* tramp.el (tramp-perl-file-name-all-completions): New defconst.
(tramp-handle-file-name-all-completions): Try using Perl to get
partial completions.  When perl not available, combine `cd' and
`ls' into single remote operation and use shell expansion to get
partial remote directory contents.  Set `file-exists-p' cache for
directory and any files returned by ls.  Change cache handling to
support partial directory contents.  Use error message emitted by
remote `cd' or Perl code for local tramp-error.
----------------------------
revision 2.723
date: 2009-08-17 12:03:05 -0700;  author: albinus;  state: Exp;  lines: +11 -7;  commitid: RYLJO2TPWllO650u;
* tramp.el (tramp-register-completion-file-name-handler): Check also
for (member 'partial-completion completion-styles).
----------------------------
revision 2.722
date: 2009-08-17 07:45:11 -0700;  author: albinus;  state: Exp;  lines: +31 -2;  commitid: l9JHxDx44bjqG30u;
* tramp.el (tramp-methods): New method "rsyncc".
(top): Add completion function for "rsyncc".
(tramp-do-copy-or-rename-file-out-of-band): Handle new
`tramp-methods' entry `copy-env' of "rsyncc".
----------------------------
revision 2.721
date: 2009-08-16 08:15:51 -0700;  author: albinus;  state: Exp;  lines: +157 -139;  commitid: QNHrbIw0RPyQSVZt;
* tramp.el (tramp-perl-file-attributes): Print "nil" when lstat
fails.
(tramp-handle-file-attributes): Removed `file-exists-p' call.
(tramp-handle-file-attributes-with-ls): Check for file existence
at remote end.
(tramp-handle-file-attributes-with-stat): Likewise.
(tramp-handle-file-readable-p): Don't use file attribute cache
when file is a symlink.
(tramp-handle-file-writable-p): Likewise.
(tramp-handle-vc-registered): Use `tramp-get-file-exists-command'
instead of `tramp-find-file-exists-command'.
(tramp-convert-file-attributes): Return nil when attr is nil.
----------------------------
revision 2.720
date: 2009-08-15 11:58:53 -0700;  author: albinus;  state: Exp;  lines: +4 -1;  commitid: f42KBLX5SlRl9PZt;
*** empty log message ***
----------------------------
revision 2.719
date: 2009-08-15 11:00:46 -0700;  author: albinus;  state: Exp;  lines: +126 -51;  commitid: UbFdaf55NIWpPOZt;
* tramp.el (tramp-handle-file-exists-p): Check file-attributes
cache, assume file exists if cache value present.
(tramp-handle-file-readable-p): Examine file-attributes cache to
see if request can be satisfied without remote operation.
(tramp-handle-file-writable-p): Likewise.
(tramp-do-copy-or-rename-file-directly): Avoid separate
tramp-send-command-and-check call.
(tramp-handle-write-region): Avoid tramp-set-file-uid-gid if
file-attributes shows uid/gid to be set already.
 (tramp-handle-vc-registered): Embed the code in
`with-parsed-tramp-file-name'.  Don't use `caddr', we havent't
required 'cl.
----------------------------
revision 2.718
date: 2009-08-14 12:07:21 -0700;  author: albinus;  state: Exp;  lines: +14 -6;  commitid: vHIFkVWMKqDfeHZt;
* tramp.el (tramp-message-show-message): New defvar.
(tramp-message, tramp-error): Use it.
----------------------------
revision 2.717
date: 2009-08-14 07:42:33 -0700;  author: albinus;  state: Exp;  lines: +36 -5;  commitid: rrQ8BphE16tvLFZt;
* tramp.el (tramp-handle-file-truename): Use readlink
--canonicalize-missing instead of --canonicalize.
(tramp-get-remote-readlink) Check for --canonicalize-missing
instead of --canonicalize.
(tramp-perl-file-truename) Updated to support non-existing paths.
----------------------------
revision 2.716
date: 2009-08-09 07:17:23 -0700;  author: albinus;  state: Exp;  lines: +107 -93;  commitid: i9KwvptEPk1LM1Zt;
* tramp.el (tramp-get-ls-command-with-dired): New defun.
(tramp-handle-insert-directory): Handle "--dired".
(tramp-get-ls-command, tramp-get-ls-command)
(tramp-get-file-exists-command, tramp-get-remote-ln)
(tramp-get-remote-perl, tramp-get-remote-stat)
(tramp-get-remote-readlink, tramp-get-remote-id): Remove
superfluous `with-current-buffer'.
----------------------------
revision 2.715
date: 2009-08-07 08:04:31 -0700;  author: albinus;  state: Exp;  lines: +101 -77;  commitid: Xslu3b5q8S8Z6MYt;
* tramp.el (tramp-perl-file-truename): New defconst.  Perl code
contributed by yary <not.com@gmail.com> (tiny change).
(tramp-handle-file-truename): Use it.
----------------------------
revision 2.714
date: 2009-08-06 07:19:57 -0700;  author: albinus;  state: Exp;  lines: +96 -71;  commitid: oNQNefPOig0HTDYt;
* tramp.el (tramp-get-remote-readlink): New defun.
(tramp-handle-file-truename): Use it.
----------------------------
revision 2.713
date: 2009-08-05 22:51:59 -0700;  author: albinus;  state: Exp;  lines: +46 -15;  commitid: QTSFEUczXdkm5BYt;
* tramp.el (tramp-vc-registered-read-file-names): New defconst.
(tramp-handle-vc-registered): Use it.
(tramp-vc-file-name-handler): Remember `localname' but `filename'.
----------------------------
revision 2.712
date: 2009-08-05 14:37:37 -0700;  author: albinus;  state: Exp;  lines: +7 -6;  commitid: I3ylbwow4SJKlyYt;
*** empty log message ***
----------------------------
revision 2.711
date: 2009-08-05 14:36:14 -0700;  author: albinus;  state: Exp;  lines: +7 -2;  commitid: sT7hLQh7roPglyYt;
*** empty log message ***
----------------------------
revision 2.710
date: 2009-08-05 14:16:00 -0700;  author: albinus;  state: Exp;  lines: +57 -4;  commitid: 6zrQSDReg9mkeyYt;
* tramp.el (tramp-vc-registered-file-names): New defvar.
(tramp-vc-file-name-handler): New defun.
(tramp-run-real-handler): Add `tramp-vc-file-name-handler'.
(tramp-handle-vc-registered): Implement optimization strategy.
Suggested by Julian Scheid <julians37@googlemail.com>.
----------------------------
revision 2.709
date: 2009-08-03 20:21:58 -0700;  author: albinus;  state: Exp;  lines: +3 -0;  commitid: cyN5lXE6BrmRjkYt;
* tramp.el (top): Make check for tramp-gvfs loading more robust.
----------------------------
revision 2.708
date: 2009-08-03 12:28:41 -0700;  author: albinus;  state: Exp;  lines: +16 -17;  commitid: kJosKiolgrVuHhYt;
* tramp.el (tramp-handle-insert-file-contents): `unwind-protect' must be
inside `with-parsed-tramp-file-name'.
----------------------------
revision 2.707
date: 2009-08-03 01:17:22 -0700;  author: albinus;  state: Exp;  lines: +7 -1;  commitid: V1KeosG7BSHhZdYt;
* tramp.el (tramp-rfn-eshadow-update-overlay-regexp) New defconst.
(tramp-rfn-eshadow-update-overlay): Use it.
----------------------------
revision 2.706
date: 2009-08-02 10:06:54 -0700;  author: albinus;  state: Exp;  lines: +37 -8;  commitid: SEDcjvCAnZBQW8Yt;
* tramp.el (tramp-debug-message): Print also microseconds.
(tramp-handle-insert-file-contents): Optimize, when BEG
or END is non-nil.
(tramp-handle-vc-registered): Use `tramp-cache-inhibit-cache'.
(tramp-get-debug-buffer): Change `outline-regexp' according to new
format.
----------------------------
revision 2.705
date: 2009-07-28 13:31:26 -0700;  author: albinus;  state: Exp;  lines: +113 -100;  commitid: A7cBlruliRXYewXt;
* tramp.el (tramp-do-copy-or-rename-file): Add messages.  Simplify
check for out-of-band methods.
(tramp-do-copy-or-rename-file-out-of-band): Allow both files to be
remote.  Remove messages which are in `tramp-do-copy-or-rename-file'.
----------------------------
revision 2.704
date: 2009-07-16 03:19:35 -0700;  author: albinus;  state: Exp;  lines: +13 -9;  commitid: 2SXCjqk66uS4fVVt;
* tramp.el (tramp-wait-for-output): Handle the case when commands
do not return a newline but a null byte before the shell
prompt.  (Bug#3858)
----------------------------
revision 2.703
date: 2009-07-08 05:38:14 -0700;  author: albinus;  state: Exp;  lines: +20 -14;  commitid: GGdeWyQxSssvgUUt;
* tramp.el (tramp-set-file-uid-gid): Handle the case the remote
user is root, on the local host.
(tramp-local-host-p): Either the local user or the remote user
must be root.
----------------------------
revision 2.702
date: 2009-07-06 06:33:17 -0700;  author: albinus;  state: Exp;  lines: +12 -4;  commitid: BJtl7hgysvxsDEUt;
* tramp.el (tramp-handle-write-region): Flush file properties in
case of short track.
----------------------------
revision 2.701
date: 2009-06-30 08:26:04 -0700;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: c1bekLhM4NZ6sTTt;
* tramp.el (tramp-default-file-modes) Remove execute permissions.
----------------------------
revision 2.700
date: 2009-06-30 05:18:28 -0700;  author: albinus;  state: Exp;  lines: +5 -3;  commitid: YyKONIgkosAKpSTt;
* tramp.el (tramp-do-copy-or-rename-file-directly): Handle also
the 'rename case, when setting file modes.  (Bug#3712)
----------------------------
revision 2.699
date: 2009-06-29 14:13:11 -0700;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: Xwve6OSqGYb7pNTt;
* tramp.el (tramp-do-copy-or-rename-file-directly): Set file modes
mandatory.  (Bug#3712)
----------------------------
revision 2.698
date: 2009-06-29 07:02:33 -0700;  author: albinus;  state: Exp;  lines: +0 -9;  commitid: NMGYbX9rFFus1LTt;
*** empty log message ***
----------------------------
revision 2.697
date: 2009-06-22 00:40:39 -0700;  author: albinus;  state: Exp;  lines: +20 -22;  commitid: 8T5koCFQQ11o8PSt;
*** empty log message ***
----------------------------
revision 2.696
date: 2009-06-21 13:20:28 -0700;  author: albinus;  state: Exp;  lines: +10 -3;  commitid: TVAVualjEigYmLSt;
* tramp.el (tramp-debug-message): Insert header line in debug buffer.
----------------------------
revision 2.695
date: 2009-06-17 07:50:51 -0700;  author: albinus;  state: Exp;  lines: +60 -51;  commitid: DVBBJGzZhgmWFdSt;
* tramp.el (tramp-handle-insert-file-contents): Improve error
handling.
----------------------------
revision 2.694
date: 2009-06-13 03:45:36 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: enOKaKChLFrHrGRt;
* tramp.el
(tramp-handle-directory-files-and-attributes-with-stat): Care
about filenames with spaces, or starting with "-".  Reported by
Alexey Lebedeff <binarin@binarin.ru>.
----------------------------
revision 2.693
date: 2009-06-07 09:04:52 -0700;  author: albinus;  state: Exp;  lines: +34 -15;  commitid: d1BOscqOFzpbpWQt;
* tramp.el (tramp-do-copy-or-rename-file-directly): Make direct
copy more robust, especially when "chown" is not applicable.
----------------------------
revision 2.692
date: 2009-06-06 16:08:02 -0700;  author: albinus;  state: Exp;  lines: +28 -25;  commitid: jYR4KQ478LLlMQQt;
* tramp.el (top): Improve check for tramp-gvfs loading.
(all): Replace all calls of `split-string' and
`tramp-split-string' by `tramp-compat-split-string'.
(tramp-default-method): Use `tramp-compat-process-running-p'.
(tramp-file-name-handler-alist): Add handler for `dired-uncache'.
(tramp-handle-dired-uncache): New defun.
(tramp-handle-insert-directory): Don't flush the directory from
cache, this is handled by `dired-uncache' now.
(tramp-action-password): Improve trace message.
(tramp-open-connection-setup-interactive-shell): Apply
workaround for OpenSolaris bug.
(tramp-split-string): Remove function.  It is handled in
tramp-compat now.
----------------------------
revision 2.691
date: 2009-04-24 06:46:37 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: BFOI0hB8682w3hLt;
* tramp.el (tramp-handle-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions): Revert patch from
2009-04-21.  It is "-b", which does not work on OpenBSD.
----------------------------
revision 2.690
date: 2009-04-23 07:13:02 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: tj3JGW0HXhNze9Lt;
* tramp.el (tramp-domain-regexp): Allow also "-", "_" and ".".
Suggested by Simo Melenius <simo.melenius@iki.fi>.
----------------------------
revision 2.689
date: 2009-04-21 12:57:27 -0700;  author: albinus;  state: Exp;  lines: +17 -14;  commitid: c8epPraKi9aHcVKt;
* tramp.el (tramp-default-proxies-alist): Allow also Lisp forms.
(tramp-compute-multi-hops): Eval cons cells of
`tramp-default-proxies-alist'.
(tramp-handle-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions): Don't use "-a" as ls
arg.  It does not work on OpenBSD.  Reported by Taylor Venable
<taylor@metasyntax.net>.
----------------------------
revision 2.688
date: 2009-04-19 13:30:32 -0700;  author: albinus;  state: Exp;  lines: +5 -2;  commitid: o7FKKPobKK3DrFKt;
* tramp.el (top): Completion function for rsync is
`tramp-completion-function-alist-ssh'.
----------------------------
revision 2.687
date: 2009-04-14 07:50:37 -0700;  author: albinus;  state: Exp;  lines: +11 -6;  commitid: 0nymRnC0djIoJZJt;
*** empty log message ***
----------------------------
revision 2.686
date: 2009-04-12 12:21:03 -0700;  author: albinus;  state: Exp;  lines: +13 -8;  commitid: w6Cvu1hyjDv9iLJt;
* tramp.el (tramp-do-copy-or-rename-file-directly): Overwrite
always the tmpfile.  (Bug#2962).
(tramp-file-name-handler-alist): Add `vc-registered'.
(tramp-handle-vc-registered ): New defun.  (Bug#1741).
----------------------------
revision 2.685
date: 2009-04-05 11:04:04 -0700;  author: albinus;  state: Exp;  lines: +5 -2;  commitid: sxbdnKpUzBIG5RIt;
*** empty log message ***
----------------------------
revision 2.684
date: 2009-04-05 10:44:33 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: NhnvASBLLVRZYQIt;
*** empty log message ***
----------------------------
revision 2.683
date: 2009-04-05 10:33:34 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: 8ydcjeS9UDedVQIt;
*** empty log message ***
----------------------------
revision 2.682
date: 2009-04-05 08:23:41 -0700;  author: albinus;  state: Exp;  lines: +15 -12;  commitid: y6HlMUV97OoFcQIt;
* tramp.el (tramp-make-tramp-temp-file): Simplify setting file
modes.
(tramp-default-file-modes) New defun.  Replace all calls of
`file-modes' by this.
(tramp-handle-find-backup-file-name): Use `symbol-value' instead
of `boundp'.
----------------------------
revision 2.681
date: 2009-03-23 09:25:44 -0700;  author: albinus;  state: Exp;  lines: +5 -3;  commitid: 4cLEGAPXm19DXaHt;

* tramp.el (tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Don't use quotes
for `tramp-end-of-output'.
(tramp-open-connection-setup-interactive-shell): Trace coding system.
----------------------------
revision 2.680
date: 2009-03-22 06:23:19 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: DAx3zoAfIEcdZ1Ht;
*** empty log message ***
----------------------------
revision 2.679
date: 2009-03-22 04:24:05 -0700;  author: albinus;  state: Exp;  lines: +27 -24;  commitid: veKJqWNBgV8jk1Ht;
* tramp.el (top): Catch `tramp-loading', when a loading of a
package fails.
(tramp-end-of-output): Remove newlines, and add "$" at the end.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Quote `tramp-end-of-output'.
(tramp-wait-for-output): Remove handling of newlines.
----------------------------
revision 2.678
date: 2009-03-17 11:40:37 -0700;  author: albinus;  state: Exp;  lines: +57 -23;  commitid: sGFK0bICVJ42UpGt;
* tramp.el (tramp-remote-path): Add choice "Private Directories".
(tramp-check-for-regexp): Both echoes must be present, before
removing.
(tramp-get-remote-path): Handle also `tramp-own-remote-path'.
----------------------------
revision 2.677
date: 2009-03-15 12:31:46 -0700;  author: albinus;  state: Exp;  lines: +4 -13;  commitid: RRZn0N7eFM4DfaGt;
* tramp.el (tramp-wrong-passwd-regexp): Remove "Tramp connection
closed" option.
(tramp-maybe-open-connection): Use the same command pattern for
first hop and further hops.
----------------------------
revision 2.676
date: 2009-02-26 06:42:55 -0800;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: 29WrwrkDGdQccXDt;

* tramp.el (tramp-remote-coding-commands): Add "base64".  (Bug#2463)
----------------------------
revision 2.675
date: 2009-02-22 07:11:11 -0800;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: n2pmV2R7Ijk5urDt;
* tramp.el (top): Require tramp-gvfs.
(tramp-handle-process-file): Handle QUIT.
----------------------------
revision 2.674
date: 2009-02-01 01:44:22 -0800;  author: albinus;  state: Exp;  lines: +8 -6;  commitid: tLBqEkZarJbLlIAt;
* tramp.el (tramp-read-passwd): Cached passwords shall still be
used.
----------------------------
revision 2.673
date: 2009-01-29 13:57:02 -0800;  author: albinus;  state: Exp;  lines: +21 -17;  commitid: tFmaI3B7d1Q5voAt;
* tramp.el (tramp-process-actions, tramp-read-passwd): Allow
correction of passwords.
----------------------------
revision 2.672
date: 2009-01-18 22:56:24 -0800;  author: albinus;  state: Exp;  lines: +4 -2;  commitid: ZbsqDs9XB3L2Q1zt;
* tramp.el (tramp-ipv6-regexp): The regexp shall cover also IPv4
mapped IPv6 addresses.
----------------------------
revision 2.671
date: 2009-01-05 23:58:01 -0800;  author: albinus;  state: Exp;  lines: +44 -43;  commitid: cgzBce48aUv5Bmxt;
*** empty log message ***
----------------------------
revision 2.670
date: 2009-01-05 23:43:21 -0800;  author: albinus;  state: Exp;  lines: +66 -53;  commitid: ckH4ZtVdczD3wmxt;
* tramp.el (tramp-do-copy-or-rename-file-directly)
(tramp-handle-file-local-copy, tramp-handle-write-region): Delete
temporary file in case of quit.
----------------------------
revision 2.669
date: 2009-01-05 11:45:11 -0800;  author: albinus;  state: Exp;  lines: +74 -58;  commitid: KL2OZhiIEKYFxixt;
* tramp.el (tramp-handle-load)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-file-local-copy, tramp-handle-insert-file-contents)
(tramp-handle-write-region): Delete temporary file in case of error.
(tramp-perl-encode, tramp-perl-decode):	Update copyrights for 2009.
----------------------------
revision 2.668
date: 2009-01-03 06:34:08 -0800;  author: albinus;  state: Exp;  lines: +130 -27;  commitid: jPi6vDCmfRETS0xt;
* tramp.el (tramp-local-host-regexp, tramp-prefix-domain-format)
(tramp-prefix-domain-regexp, tramp-domain-regexp)
(tramp-user-with-domain-regexp, tramp-prefix-ipv6-format)
(tramp-prefix-ipv6-regexp, tramp-ipv6-regexp)
(tramp-postfix-ipv6-format, tramp-postfix-ipv6-regexp): New
defconst.
(tramp-file-name-structure, tramp-file-name-regexp-unified)
(tramp-completion-dissect-file-name, tramp-parse-hosts-group)
(tramp-dissect-file-name, tramp-make-tramp-file-name)
(tramp-completion-make-tramp-file-name): Handle IPv6 addresses.
(tramp-handle-insert-file-contents): Fix setting of
`buffer-read-only'.
(tramp-compute-multi-hops, tramp-local-host-p): Use
`tramp-local-host-regexp'.
(tramp-file-name-real-user, tramp-file-name-domain): Use
`tramp-user-with-domain-regexp'.
----------------------------
revision 2.667
date: 2008-12-22 08:34:01 -0800;  author: albinus;  state: Exp;  lines: +25 -2;  commitid: ZoD8lCWFshf3Wtvt;
* tramp.el (tramp-rfn-eshadow-update-overlay): Move overlay to
end, before updating.
(tramp-convert-file-attributes): Add "l" indicator to file modes.
(tramp-file-name-real-user, tramp-file-name-domain): New defuns.
(top): Don't fail if there is no current message.
----------------------------
revision 2.666
date: 2008-12-04 12:38:56 -0800;  author: albinus;  state: Exp;  lines: +13 -0;  commitid: eVFttyBjtOMSRbtt;
* tramp.el (top): Write a message, when loading Tramp.
----------------------------
revision 2.665
date: 2008-11-25 22:05:21 -0800;  author: albinus;  state: Exp;  lines: +9 -13;  commitid: GgqrUuhhkOu9i5st;
* tramp.el (tramp-handle-write-region): Improve the check for
calling direct copy.
(tramp-find-inline-encoding): Don't raise an error but a warning,
when no inline encoding is found.
(tramp-get-remote-coding): Check for a symbol.  The negative check
for a string fails, when there is an empty string.
----------------------------
revision 2.664
date: 2008-11-16 06:09:28 -0800;  author: albinus;  state: Exp;  lines: +16 -3;  commitid: CHpAr8f41EX9iQqt;
* tramp.el (tramp-handle-file-name-as-directory): New defun.
(tramp-file-name-handler-alist): Handle `file-name-as-directory'.
----------------------------
revision 2.663
date: 2008-11-16 04:26:47 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 549Dr6QWuy0YIPqt;
* tramp.el (tramp-set-completion-function): Fix typo in docstring.
----------------------------
revision 2.662
date: 2008-10-13 22:49:12 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 7PDVMhRIvaUiAymt;
* tramp.el (tramp-process-one-action): Embed regexp in
parentheses, before adding end-of-buffer construct.  Suggested by
Markus Triska <markus.triska@gmx.at>.
----------------------------
revision 2.661
date: 2008-08-22 12:10:54 -0700;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: KDXeVP0aDQvXIOft;
* tramp.el (tramp-remote-process-environment): Add "EMACS=t" and
"INSIDE_EMACS=...".  Reported by Tassilo Horn
<tassilo@member.fsf.org>.
----------------------------
revision 2.660
date: 2008-08-13 22:12:55 -0700;  author: albinus;  state: Exp;  lines: +26 -12;  commitid: tYsGlfYwSDpqlIet;
* tramp.el (tramp-handle-shell-command): Handle output going to
current buffer like shell-command.  Don't disable undo.
----------------------------
revision 2.659
date: 2008-07-27 09:07:23 -0700;  author: albinus;  state: Exp;  lines: +5 -5;  commitid: z7NhmU1sYelOxsct;
* tramp.el (tramp-perl-directory-files-and-attributes)
(tramp-get-device): Make device number a cons cell.
(tramp-convert-file-attributes): Make inode a cons cell.
----------------------------
revision 2.658
date: 2008-07-26 11:07:01 -0700;  author: albinus;  state: Exp;  lines: +10 -16;  commitid: iHpYM53N0C1Relct;
* tramp.el (tramp-handle-start-file-process): Set query-on-exit
flag. Kill temporary buffer.
(tramp-process-sentinel): Remove defun.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection):Don't call it.
----------------------------
revision 2.657
date: 2008-07-24 10:44:55 -0700;  author: albinus;  state: Exp;  lines: +7 -1;  commitid: aCBiEX7o1Wdgb5ct;
* tramp.el (tramp-handle-start-file-process): Make NAME a unique
process name.  Reported by Markus Triska <markus.triska@gmx.at>.
----------------------------
revision 2.656
date: 2008-07-23 12:13:00 -0700;  author: albinus;  state: Exp;  lines: +32 -29;  commitid: UWA5lrUnrgJsHXbt;
* tramp.el (tramp-methods): Add "-q" for "scp", "scp1", "scp2",
"ssh", "ssh1", "ssh2", "scpc", "scpx", "sshx".
(tramp-temp-buffer-name): New defconst.
(tramp-handle-start-file-process): Use it.  Apply "exec", for the
command.  No trailing prompt.
(tramp-process-sentinel): Remove temporary buffer, if existing.
Don't handle trailing prompt.
(tramp-open-connection-setup-interactive-shell): Use
`tramp-temp-buffer-name'.
----------------------------
revision 2.655
date: 2008-06-28 03:07:46 -0700;  author: albinus;  state: Exp;  lines: +9 -7;  commitid: UhtEDl1AAF1fuH8t;
* tramp.el (tramp-handle-file-modes): Handle symlinks.
(tramp-convert-file-attributes): Convert symlinks only when
returned from `tramp-handle-file-attributes-with-stat'.
----------------------------
revision 2.654
date: 2008-06-15 09:55:22 -0700;  author: albinus;  state: Exp;  lines: +173 -163;  commitid: zOmgjKlIJ4WY947t;
(tramp-open-connection-setup-interactive-shell): Flush cache, and
restart `tramp-maybe-open-connection' when the remote system has
been changed. Throw 'uname-changed event.
(tramp-maybe-open-connection): Catch it.
----------------------------
revision 2.653
date: 2008-06-15 06:30:07 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: tbyEJkjQvTVy137t;
* tramp.el (tramp-handle-start-file-process): Clear modification
time of the connection buffer.
(tramp-sh-file-name-handler): Reset `tramp-locked' in case of error.
----------------------------
revision 2.652
date: 2008-05-25 14:14:01 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: Rpu2qEWyFFIygo4t;
* tramp.el (top): Remove `tramp-rfn-eshadow-setup-minibuffer' from
`rfn-eshadow-setup-minibuffer-hook' when unloading.
----------------------------
revision 2.651
date: 2008-05-25 14:01:44 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: wkOSZbqDdDVlco4t;
* tramp.el (top): Quote feature names.
----------------------------
revision 2.650
date: 2008-05-25 13:37:09 -0700;  author: albinus;  state: Exp;  lines: +5 -9;  commitid: MwGlNAAjor6V3o4t;
* tramp.el (tramp-read-passwd): There is only one call to
`auth-source-user-or-password' needed.  Pacify byte compiler.
----------------------------
revision 2.649
date: 2008-05-19 12:04:35 -0700;  author: albinus;  state: Exp;  lines: +4 -3;  commitid: 3PZkVv8zrKf7KB3t;
* tramp.el (top-level): Load auth-source when compiling.
----------------------------
revision 2.648
date: 2008-05-16 13:15:29 -0700;  author: albinus;  state: Exp;  lines: +4 -3;  commitid: kjL3FfVUQk7qee3t;
* tramp.el (tramp-handle-write-region): Fix check for short
track.  Reported by Glenn Morris <rgm@gnu.org>.
----------------------------
revision 2.647
date: 2008-05-15 14:01:03 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: lNjrwQ9lxSO2w63t;
* tramp.el (tramp-file-name-for-operation): Add `make-temp-name'.
----------------------------
revision 2.646
date: 2008-05-14 13:41:58 -0700;  author: tzz;  state: Exp;  lines: +23 -6;  commitid: Lk0U7ts2yTczrY2t;
Load auth-source library.
(tramp-read-passwd): Use it for password, not login.
----------------------------
revision 2.645
date: 2008-05-14 12:25:07 -0700;  author: albinus;  state: Exp;  lines: +14 -5;  commitid: gECC4wwnXuo71Y2t;
* tramp.el (tramp-echo-mark): Update docstring.
(tramp-echo-mark-marker): New defconst.
(tramp-check-for-regexp): Use it.
----------------------------
revision 2.644
date: 2008-05-13 14:16:23 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: 7BqtzJNcAefiFQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.643
date: 2008-04-28 12:04:27 -0700;  author: albinus;  state: Exp;  lines: +42 -27;  commitid: qDHr7NCGjKhVpU0t;
* tramp.el (tramp-mode): New defcustom.
(tramp-file-name-handler, tramp-completion-file-name-handler): Use
it.
(tramp-replace-environment-variables): Handle "$$".
----------------------------
revision 2.642
date: 2008-04-27 09:29:06 -0700;  author: albinus;  state: Exp;  lines: +55 -32;  commitid: ROOlYRTpx4RCAL0t;
* tramp.el (tramp-handle-make-symbolic-link)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-do-copy-or-rename-file-directly)
(tramp-handle-insert-directory, tramp-handle-expand-file-name)
(tramp-handle-substitute-in-file-name)
(tramp-handle-insert-file-contents, tramp-handle-write-region, )
* tramp-cache.el (tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property)
* tramp-cpmpat.el (tramp-compat-make-temp-file)
* tramp-fish.el (tramp-fish-handle-expand-file-name): Disable
`file-name-handler-alist' when handling localname.  It could have
a remote file syntax, like a VMS file name.
----------------------------
revision 2.641
date: 2008-04-27 02:26:56 -0700;  author: albinus;  state: Exp;  lines: +15 -1;  commitid: b7O2OZp5darNfJ0t;
* tramp.el (tramp-replace-environment-variables): New defun.
(tramp-handle-substitute-in-file-name, tramp-file-name-handler):
Use it.
----------------------------
revision 2.640
date: 2008-04-24 12:29:31 -0700;  author: albinus;  state: Exp;  lines: +5 -3;  commitid: f1X6c3O7irvuGo0t;
* tramp.el (tramp-get-remote-stat): Test whether stat supports %s.
Reported by Loris Bennett <loris.bennett@fu-berlin.de>.
----------------------------
revision 2.639
date: 2008-04-09 12:49:26 -0700;  author: albinus;  state: Exp;  lines: +40 -12;  commitid: Ld9XCTN4uzodhtYs;
* tramp.el (tramp-find-file-name-coding-system-alist): New defun.
(tramp-handle-insert-file-contents, tramp-handle-write-region):
Use it.
----------------------------
revision 2.638
date: 2008-04-07 12:22:17 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: wgFp2MGzvOYSbdYs;
* tramp.el (tramp-methods): Fix again tramp-copy-args of "pscp"
and "psftp".  Reported by Gilles Pion <gpion@lfdj.com>.
----------------------------
revision 2.637
date: 2008-04-04 14:59:49 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: x4oybdHl4dpU9QXs;
* tramp.el (after-init-hook): Don't wrap a lambda around
tramp-register-completion-file-name-handler.
----------------------------
revision 2.636
date: 2008-04-03 12:10:38 -0700;  author: albinus;  state: Exp;  lines: +15 -15;  commitid: R5OhRVDSyy7SfHXs;
* tramp.el (tramp-drop-volume-letter): Move definition before use.
----------------------------
revision 2.635
date: 2008-04-02 11:55:13 -0700;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: Ctbss5Em3sozczXs;
* tramp.el (tramp-make-tramp-temp-file): Use
`tramp-drop-volume-letter' for the local file name part.
----------------------------
revision 2.634
date: 2008-03-30 09:37:35 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: JN4jq4YmEJNkxaXs;
* tramp.el (tramp-do-copy-or-rename-file): Fix check for
overwriting when NEWNAME is a local file.
----------------------------
revision 2.633
date: 2008-03-21 10:00:05 -0700;  author: albinus;  state: Exp;  lines: +5 -5;  commitid: RxR1pZsWyfgZW0Ws;
* tramp.el (tramp-methods): Fix tramp-copy-args of "pscp" and "psftp".
----------------------------
revision 2.632
date: 2008-03-19 14:10:15 -0700;  author: albinus;  state: Exp;  lines: +27 -33;  commitid: hSx86UvDOWzNoMVs;
* tramp.el (tramp-let-maybe): Removed.
(tramp-drop-volume-letter): Don't use `replace-regexp-in-string'.
It does not exist under XEmacs.
(tramp-handle-file-truename, tramp-handle-expand-file-name)
(tramp-completion-file-name-handler): Let-bind `directory-sep-char'.
----------------------------
revision 2.631
date: 2008-03-17 15:45:16 -0700;  author: albinus;  state: Exp;  lines: +45 -55;  commitid: 2MaOnLdAUQynZwVs;
* tramp.el (tramp-root-regexp): Simplify.
(tramp-completion-file-name-regexp-separate): Don't insist on
leading "[". This prevents method or user or host completion.
(tramp-let-maybe): Autoload it.
(tramp-drop-volume-letter): Don't autoload. When not on W32, it is
an alias for `identity'.
(tramp-handle-write-region): Protect `last-coding-system-used'
over the trailing statements.
(tramp-completion-file-name-handler-post-function): Removed.
(tramp-completion-file-name-handler): Let-bind
`directory-sep-char' instead of calling
`tramp-drop-volume-letter'.
 (top): Move coding cookie at the end.
----------------------------
revision 2.630
date: 2008-03-15 14:42:37 -0700;  author: albinus;  state: Exp;  lines: +56 -48;  commitid: bAI9aPD8t83SHgVs;
* tramp.el (tramp-root-regexp): New defconst.
(tramp-completion-file-name-regexp-unified)
(tramp-completion-file-name-regexp-separate)
(tramp-completion-file-name-regexp-url): Use it.
(tramp-do-copy-or-rename-file-via-buffer): Set
`enable-multibyte-characters' to nil.  Set `jka-compr-inhibit' to
t for `insert-file-contents-literally'.
(tramp-drop-volume-letter): Rewrite, using `tramp-root-regexp'.
Autoload it.
(tramp-completion-file-name-handler-post-function): New defconst.
(tramp-completion-file-name-handler): Use it.
(tramp-maybe-open-connection): Update calls to
`tramp-flush-connection-property' for removed 2nd argument.
----------------------------
revision 2.629
date: 2008-02-09 00:47:43 -0800;  author: albinus;  state: Exp;  lines: +13 -9;  commitid: dTWZaLMtKEVMxHQs;
* tramp.el (tramp-process-sentinel): Avoid error when process
buffer has been killed, such as by
`tramp-cleanup-all-connections'.
----------------------------
revision 2.628
date: 2008-02-03 03:53:53 -0800;  author: albinus;  state: Exp;  lines: +33 -14;  commitid: dPpFaWCdxu6CLWPs;
* tramp.el (tramp-process-sentinel): New defun.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): Use it as process sentinel.
(tramp-handle-delete-directory): Don't use the "-f" option; it
isn't portable.
(tramp-handle-start-file-process): Echo `tramp-end-of-output'
after the command.
(tramp-handle-shell-command): Set `mode-line-process' in the
asynchronous case.
----------------------------
revision 2.627
date: 2008-01-29 13:06:14 -0800;  author: albinus;  state: Exp;  lines: +42 -18;  commitid: VNOAOBZKhT44ZlPs;
* lisp/tramp.el (tramp-methods): Use "-H" option for "sudo".  Suggested
by Trent W. Buck <trentbuck@gmail.com>.  Make ("%h") a single
element in "plinkx".
(tramp-handle-shell-command): Reuse "*Async Shell Command*" or
"*Shell Command Output*" buffers.  Check, whether there is already
an asynchronous process running.  Display always the buffer of the
asynchronous process.
(tramp-compute-multi-hops): Adapt error message.
----------------------------
revision 2.626
date: 2008-01-28 13:15:59 -0800;  author: albinus;  state: Exp;  lines: +3 -1;  commitid: wcc8oiN7ffFo4ePs;
* lisp/tramp.el (tramp-handle-shell-command): Use "/bin/sh -c" for the
command.
----------------------------
revision 2.625
date: 2008-01-27 06:54:57 -0800;  author: albinus;  state: Exp;  lines: +21 -0;  commitid: ssoUV533P0NFZ3Ps;
* lisp/tramp.el (tramp-compute-multi-hops): In case of su(do)? methods,
the host name must be a local host.
----------------------------
revision 2.624
date: 2008-01-26 06:25:19 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: n0h6DzJFaw2vRVOs;
* lisp/tramp.el (tramp-dissect-file-name): Raise an error when Tramp
2.0 syntax is used.  Suggested by Trent W. Buck <trentbuck@gmail.com>.
----------------------------
revision 2.623
date: 2008-01-24 13:19:52 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: exiu8WfeyYHudIOs;

* lisp/tramp.el (tramp-do-copy-or-rename-file): Flush the cache of the
source file in case of `rename'.
----------------------------
revision 2.622
date: 2008-01-23 12:38:54 -0800;  author: albinus;  state: Exp;  lines: +23 -25;  commitid: 5jJCs9jJDHUk1AOs;

* lisp/tramp.el (tramp-end-of-output): Add `tramp-rsh-end-of-line' into
the regexp.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Don't send `tramp-rsh-end-of-line' additionally, when setting the
prompt.
(tramp-wait-for-output): Distinguish different prompt formats.
(tramp-get-test-nt-command): Don't check for "\n" in the prompt.
(tramp-local-host-p): Check whether temp directory is writable.
----------------------------
revision 2.621
date: 2008-01-17 11:48:51 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: kO14QeUbiokcWNNs;

* lisp/tramp.el (tramp-remote-process-environment): Set "LC_ALL=C".
----------------------------
revision 2.620
date: 2008-01-14 11:29:13 -0800;  author: albinus;  state: Exp;  lines: +3 -1;  commitid: dTgT6hfSSiYtVpNs;

* lisp/tramp.el (tramp-local-host-p): Use `tramp-file-name-host'
instead of `tramp-file-name-real-host'.
----------------------------
revision 2.619
date: 2008-01-12 03:04:23 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.618
date: 2008-01-08 11:58:12 -0800;  author: albinus;  state: Exp;  lines: +17 -17;  commitid: KRtKGntf9F5ohEMs;

* lisp/tramp.el (tramp-handle-process-file): Handle the case where
DESTINATION is a consp with t as car.
(tramp-wait-for-output): We shall remove exactly what has been
find by the search.
----------------------------
revision 2.617
date: 2008-01-04 14:32:30 -0800;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: gTXvBQYlNbReg9Ms;

* lisp/tramp.el (tramp-remote-process-environment): Add "LC_CTYPE=C".
Reported by Pete Forman <pete.forman@westerngeco.com>.
(tramp-perl-encode, tramp-perl-decode): Update copyrights.
----------------------------
revision 2.616
date: 2007-12-23 04:02:44 -0800;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: dXm8BQWGRHrW9yKs;

Version 2.1.12 released.

* configure.ac: Bump version.

* lisp/tramp.el: New todo item.

* lisp/tramp-smb.el (tramp-smb-handle-insert-directory): Handle "-F"
switch.  Reported by Mark T. Kennedy <mkennedy@diamondbackcap.com>.
----------------------------
revision 2.615
date: 2007-12-17 12:20:09 -0800;  author: albinus;  state: Exp;  lines: +9 -3;  commitid: pFDzyTIPArwJ6PJs;

* lisp/tramp.el (tramp-open-connection-setup-interactive-shell)
(tramp-find-shell): Send only single prompt setting commands, in
order to avoid double-prompt.
----------------------------
revision 2.614
date: 2007-12-04 13:48:20 -0800;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: YV9grC60UMnW0aIs;

* lisp/tramp.el: Require password-cache or password.
----------------------------
revision 2.613
date: 2007-11-19 12:01:02 -0800;  author: albinus;  state: Exp;  lines: +35 -38;  commitid: aFmIyJs3joLZTdGs;

* lisp/tramp.el (tramp-open-connection-setup-interactive-shell): Still
some tuning in case of an echoing shell.
(tramp-send-command): Connection property "remote-echo" is not
persistent; cache key is the process therefore.
----------------------------
revision 2.612
date: 2007-11-18 21:48:45 -0800;  author: albinus;  state: Exp;  lines: +0 -8;  commitid: d6mBoO1EHInAb9Gs;

* tramp.el (tramp-terminal-type): Remove duplicated definition.
----------------------------
revision 2.611
date: 2007-11-18 02:21:15 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: jkzQ2MY6x6n1J2Gs;

* lisp/tramp.el (tramp-open-connection-setup-interactive-shell): Call
`tramp-cleanup-connection' via funcall.
----------------------------
revision 2.610
date: 2007-11-18 02:11:38 -0800;  author: albinus;  state: Exp;  lines: +26 -1;  commitid: RBxaXmIdsa2tF2Gs;

* lisp/tramp.el (tramp-completion-reread-directory-timeout): New
defcustom.
(tramp-handle-file-name-all-completions): Flush directory contents
from cache regularly.
(tramp-set-auto-save-file-modes): Check also for
`buffer-modified-p'.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Temp file is already
created when copying.

* texi/tramp.texi (Filename completion): Simplify explanation of
double-slash behaviour.  Explain directory contents flushing.
----------------------------
revision 2.609
date: 2007-11-12 11:59:07 -0800;  author: albinus;  state: Exp;  lines: +32 -8;  commitid: S56poiUr97a57kFs;

* lisp/tramp.el (tramp-open-connection-setup-interactive-shell): Check
whether the output of "uname -sr" has been changed.

* texi/tramp.texi (Connection caching): Tramp flushes connection
properties when remote operating system has been changed.
----------------------------
revision 2.608
date: 2007-11-08 12:07:24 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: KGsz1Z5Uqg97iOEs;

* lisp/tramp.el (tramp-maybe-open-connection): Use a local copy of
`process-environment'.
----------------------------
revision 2.607
date: 2007-11-07 12:34:52 -0800;  author: albinus;  state: Exp;  lines: +12 -4;  commitid: 6QaEdkjJBQXZsGEs;

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Don't expand
the remote connection identification.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Set also $PS2 and $PS3 when setting $PS1.  Check for shell echoing
before calling stty.

* lisp/tramp-cache.el (tramp-cache-print)
(tramp-dump-connection-properties): Fix docstring.
(tramp-list-connections): Renamed from
`tramp-cache-list-connections'.

* lisp/tramp-cmds.el (tramp-cleanup-connection): Apply it.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Don't expand the
remote connection identification when setting connection property.

* lisp/tramp-smb.el (tramp-smb-handle-substitute-in-file-name): "//"
substitutes only in the local filename part.

* texi/tramp.texi (Overview): Mention also the PuTTY integration under
Win32.  Remove paragraphs about Tramp's experimental status.
(Frequently Asked Questions): Add code example for highlighting
the mode line.
----------------------------
revision 2.606
date: 2007-11-06 13:11:38 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: 94tJSiGFLfU2IyEs;

* lisp/tramp.el (top): Don't autoload `tramp-cache-print'.

* lisp/tramp-cache (tramp-cache-print): Move down.
(tramp-cache-list-connections): New defun.

* lisp/tramp-cmds.el (tramp-cleanup-connection): Use it.
----------------------------
revision 2.605
date: 2007-11-05 12:48:24 -0800;  author: albinus;  state: Exp;  lines: +1 -5;  commitid: ojAjVjqChJ1kCqEs;
*** empty log message ***
----------------------------
revision 2.604
date: 2007-11-05 12:38:51 -0800;  author: albinus;  state: Exp;  lines: +7 -1;  commitid: oS6Ugbo6Hm3SyqEs;

* lisp/tramp.el (tramp-wait-for-output): Ignore escape sequences in the
prompt.
----------------------------
revision 2.603
date: 2007-10-31 13:00:26 -0700;  author: albinus;  state: Exp;  lines: +5 -10;  commitid: f9KDfynUwQfxvMDs;

* lisp/tramp.el (tramp-handle-shell-command): Call `start-file-process'
directly.  Fix bug in deleting temp file.
----------------------------
revision 2.602
date: 2007-10-30 13:21:43 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: WH2b3jFqSDeVEEDs;

* lisp/tramp.el (tramp-maybe-open-connection): Set $LC_ALL to "C".

* lisp/tramp-cache.el (tramp-flush-file-function): Check also
`default-directory' if `buffer-file-name' does not return a
string.  Added to `eshell-pre-command-hook'.
----------------------------
revision 2.601
date: 2007-10-27 06:50:43 -0700;  author: albinus;  state: Exp;  lines: +94 -337;  commitid: h3wsKiYvXLWtAeDs;

* lisp/tramp.el (tramp-wrong-passwd-regexp): Tune regexp.
(tramp-get-remote-tmpdir): New defun.
(tramp-make-tramp-temp-file): Use it.
(tramp-local-call-process): New defun.  Replace all calls of
`call-process' by this when appropriate.
(tramp-handle-write-region): Replace calls of `file-attributes' by
`tramp-compat-file-attributes'.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Make the first command a `tramp-send-command' call, with let-bind
of `tramp-end-of-output'.
(tramp-version, tramp-bug, tramp-reporter-dump-variable)
(tramp-load-report-modules, tramp-append-tramp-buffers): Move to
tramp-cmds.el.

* lisp/tramp-fish.el (tramp-fish-handle-copy-file)
(tramp-fish-do-copy-or-rename-file)
(tramp-fish-do-copy-or-rename-file-directly):
* lisp/tramp-smb.el (tramp-smb-handle-copy-file):
Add parameter PRESERVE-UID-GID.
----------------------------
revision 2.600
date: 2007-10-23 14:50:55 -0700;  author: albinus;  state: Exp;  lines: +7 -4;  commitid: WQGp5ST40E6jnLCs;

* lisp/tramp.el (tramp-set-file-uid-gid): Protect `call-process' when
we are local.

* texi/tramp.texi (Traces and Profiles): Simplify loop over
`trace-function-background'.
----------------------------
revision 2.599
date: 2007-10-22 12:06:20 -0700;  author: albinus;  state: Exp;  lines: +49 -110;  commitid: u424SqaGvkwRuCCs;

* lisp/tramp.el (tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Improve sending
initial commands.
(tramp-action-terminal): Send debug message.
(tramp-wait-for-shell-prompt, tramp-send-command-internal): Removed.
(tramp-barf-if-no-shell-prompt): Insert code of
`tramp-wait-for-shell-prompt'.

* lisp/tramp-util.el (tramp-PC-expand-many-files): New defun.
(tramp-advice-PC-expand-many-files): Defadvice moved from tramp.el.
----------------------------
revision 2.598
date: 2007-10-21 06:25:37 -0700;  author: albinus;  state: Exp;  lines: +167 -153;  commitid: h1CUokhKH2z4EsCs;

* lisp/tramp.el (tramp-do-copy-or-rename-file-directly): Make more
rigid checks.
(tramp-handle-insert-file-contents): Don't raise a tramp-error but
a signal, in order to give the callee a chance to suppress.
(tramp-handle-write-region): Set owner also in case of short
track.  Don't use compatibility calls for `write-region' anymore.
----------------------------
revision 2.597
date: 2007-10-18 19:57:31 -0700;  author: albinus;  state: Exp;  lines: +7 -6;  commitid: xv8CtIjZmVqDe9Cs;

* lisp/tramp.el (tramp-rfn-eshadow-update-overlay): Save excursion.
Use `save-restriction' rather than `widen'.
----------------------------
revision 2.596
date: 2007-10-17 15:09:51 -0700;  author: albinus;  state: Exp;  lines: +39 -66;  commitid: gM2uQ3KaIjZIFZBs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-cmds.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-cmds.el.

* lisp/tramp.el (top): Put load of all tramp-* files into a dolist.
Require tramp-cmds.el.
(tramp-clear-passwd): Add parameter VEC.  Adapt all callees.
(tramp-append-tramp-buffers): Apply `tramp-list-tramp-buffers'.

* lisp/tramp-cmds.el: New file.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Apply VEC to
`tramp-clear-passwd'.
----------------------------
revision 2.595
date: 2007-10-15 12:22:41 -0700;  author: albinus;  state: Exp;  lines: +2 -16;  commitid: qRT37mPU3aioOIBs;

* lisp/tramp.el (tramp-handle-file-name-all-completions): Expand
DIRECTORY.
(tramp-handle-dired-recursive-delete-directory): Call "rm -rf".

* texi/tramp.texi (Function Index, Variable Index): New nodes.
(Remote shell setup): Describe `tramp-password-prompt-regexp'.
----------------------------
revision 2.594
date: 2007-10-14 11:51:28 -0700;  author: albinus;  state: Exp;  lines: +40 -40;  commitid: t0mwalxwQ9YHFABs;

* lisp/tramp.el (tramp-make-tramp-temp-file): We can get rid of
DONT-CREATE.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): Use `make-temp-name'.  This is
possible, because we don't need to create the temporary file, but
we need a prefix for ssh, which has its own temporary file
handling.
(tramp-handle-delete-directory): Add "-f" to rmdir.

* lisp/tramp-util.el (top): Check for `tramp-handle-start-file-process',
not its symbol-function.
----------------------------
revision 2.593
date: 2007-10-09 21:34:16 -0700;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: bfWBAWxgBaaT30Bs;

Version 2.1.11 released.
----------------------------
revision 2.592
date: 2007-10-08 13:03:29 -0700;  author: albinus;  state: Exp;  lines: +15 -12;  commitid: ZIw7t1mXjHGwgPAs;

* lisp/tramp.el (tramp-find-foreign-file-name-handler): Check also
host.
(tramp-maybe-send-script): Apply `member' but `memq'.
(tramp-advice-file-expand-wildcards): Simplify implementation.
----------------------------
revision 2.591
date: 2007-10-06 04:52:25 -0700;  author: albinus;  state: Exp;  lines: +68 -54;  commitid: rLyecNwMxsQHBwAs;

* lisp/tramp.el (top): Move loading of tramp-util.el and tramp-vc.el to
tramp-compat.el.
(tramp-make-tramp-temp-file): Complete rewrite.  Create remote
temporary file if possible, in order to avoid a security hole.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): Call `tramp-make-tramp-temp-file'
with DONT-CREATE, because the connection is not setup yet.
(tramp-handle-process-file): Rewrite temporary file handling.
(tramp-completion-mode): New defvar.
(tramp-completion-mode-p): Use it.

* lisp/tramp-compat.el (top):  Load tramp-util.el and tramp-vc.el.

* lisp/tramp-fish.el (tramp-fish-handle-process-file): Rewrite
temporary file handling.

* texi/tramp.texi (External packages): New section.
----------------------------
revision 2.590
date: 2007-10-04 13:04:37 -0700;  author: albinus;  state: Exp;  lines: +66 -71;  commitid: CaRN4HuMV0iBojAs;

* lisp/tramp.el (tramp-make-temp-file): Move to tramp-compat.el.
(tramp-do-copy-or-rename-file-directly): Handle tmpfile only in
the cond clauses where needed.
(tramp-handle-write-region): Rearrange code for proper handling of
tmpfile.

* lisp/tramp-compat.el (tramp-compat-make-temp-file): New defsubst.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el: Rename `tramp-make-temp-file' to
`tramp-compat-make-temp-file'.
----------------------------
revision 2.589
date: 2007-10-03 04:37:06 -0700;  author: albinus;  state: Exp;  lines: +0 -6;  commitid: s0aGC0DnHo4QC8As;
*** empty log message ***
----------------------------
revision 2.588
date: 2007-10-03 03:45:48 -0700;  author: albinus;  state: Exp;  lines: +79 -61;  commitid: T0jhSlYBL14Nk8As;

* lisp/tramp.el (top): Add tramp-compat to `tramp-unload-hook'.
(tramp-file-name-handler-alist): Add
`tramp-handle-insert-file-contents-literally'.  Neded for XEmacs.
(tramp-make-temp-file): Use `make-temp-name'. `make-temp-file',
used before, creates the file already, which is not desired.
(tramp-do-copy-or-rename-file-directly): Simplify handling of
temporary file.
(tramp-handle-insert-file-contents): Assign the result in the
short track case.
(tramp-handle-insert-file-contents-literally): New defun.
(tramp-completion-mode-p): Revert change from 2007-09-24.
Checking for `return' etc as last character is not sufficient, for
example in dired-mode when entering <g> (revert-buffer) or
<s> (dired-sort).

* lisp/tramp-compat.el (top): Add also compatibility code for loading
appropriate timer package.
(tramp-compat-copy-tree): Check for `subrp' and `symbol-file' in
order to avoid autoloading problems.

* lisp/tramp-efs-el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Move further compatibility code to
tramp-compat.el.

	* tramp-ftp.el (tramp-ftp-file-name-handler): Handle the case
	where the second parameter of `copy-file' or `rename-file' is a
	remote file but not via ftp.

	* tramp-util.el: Remove `tramp-minor-mode' and its declarations.
----------------------------
revision 2.587
date: 2007-09-30 09:32:29 -0700;  author: albinus;  state: Exp;  lines: +140 -191;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 2.586
date: 2007-09-28 08:52:03 -0700;  author: albinus;  state: Exp;  lines: +113 -86;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 2.585
date: 2007-09-26 21:33:56 -0700;  author: albinus;  state: Exp;  lines: +18 -13;  commitid: rETqagHVnfvztkzs;

* lisp/tramp.el (tramp-maybe-open-connection): Make test for alive
connection more robust.
----------------------------
revision 2.584
date: 2007-09-23 22:48:21 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: FEYd5GXlmbReZWys;
*** empty log message ***
----------------------------
revision 2.583
date: 2007-09-23 22:22:37 -0700;  author: albinus;  state: Exp;  lines: +22 -31;  commitid: TVHkNk8JNeCdQWys;

* lisp/tramp.el (tramp-completion-mode-p): Rename from
`tramp-completion-mode'. Revert logic, check `return', `newline'
and such alike. Packages like Icicles tend to use other completion
characters but `tab' and `space' only.
----------------------------
revision 2.582
date: 2007-09-20 22:11:05 -0700;  author: albinus;  state: Exp;  lines: +44 -1;  commitid: xfwhuF69r0qaSyys;

* lisp/tramp.el (tramp-rfn-eshadow-overlay): New defvar.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay): New defuns.

* lisp/tramp-smb.el (tramp-smb-errors): Add error message for call
timeout.
----------------------------
revision 2.581
date: 2007-09-09 01:20:59 -0700;  author: albinus;  state: Exp;  lines: +132 -134;  commitid: C6iZp7soVVUMi2xs;

* lisp/tramp.el (top): Remove declarations of `tramp-gw-*' symbols,
they are useless with the byte compiler.
(tramp-make-temp-file, tramp-make-tramp-temp-file): Move up.
(tramp-do-copy-or-rename-file-directly): Rearrange let-bindings.
(tramp-compute-multi-hops): Mask `tramp-gw-*' symbols.
(tramp-file-name-real-host, tramp-file-name-port)
(tramp-find-method, tramp-find-user, tramp-find-host): Make them
defuns.
----------------------------
revision 2.580
date: 2007-09-04 12:22:31 -0700;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: qNUmKLq98MHc8sws;

* lisp/tramp-cache.el (top): Improve error message when
`tramp-persistency-file-name' is corrupted.
----------------------------
revision 2.579
date: 2007-08-28 13:05:52 -0700;  author: albinus;  state: Exp;  lines: +372 -232;  commitid: HaYV2zcWsD8QAyvs;

cvs update: Updating admin/unidata
cvs update: Updating etc
P etc/ChangeLog
P etc/NEWS
cvs update: Updating etc/charsets
cvs update: Updating etc/e
cvs update: Updating etc/images
cvs update: Updating etc/images/ezimage
cvs update: Updating etc/images/gnus
cvs update: Updating etc/images/gud
cvs update: Updating etc/images/icons
cvs update: Updating etc/images/lc
cvs update: Updating etc/images/low-color
cvs update: Updating etc/images/mail
cvs update: Updating etc/images/smilies
cvs update: Updating etc/images/tree-widget
cvs update: Updating etc/images/tree-widget/default
cvs update: Updating etc/images/tree-widget/folder
cvs update: Updating etc/refcards
U etc/refcards/de-refcard.pdf
P etc/refcards/de-refcard.tex
cvs update: Updating etc/tree-widget
cvs update: Updating etc/tree-widget/default
cvs update: Updating etc/tree-widget/folder
cvs update: Updating etc/tutorials
cvs update: Updating gc
cvs update: Updating gc/Mac_files
cvs update: Updating gc/doc
cvs update: Updating gc/include
cvs update: Updating gc/include/private
cvs update: Updating info
cvs update: Updating leim
cvs update: Updating leim/CXTERM-DIC
cvs update: Updating leim/MISC-DIC
cvs update: Updating leim/SKK-DIC
cvs update: Updating leim/ja-dic
cvs update: Updating leim/quail
cvs update: Updating leim/skk
cvs update: Updating lib-src
cvs update: Updating lisp
P lisp/ChangeLog
P lisp/info.el
P lisp/time.el
cvs update: Updating lisp/calc
cvs update: Updating lisp/calendar
cvs update: Updating lisp/emacs-lisp
cvs update: Updating lisp/emulation
cvs update: Updating lisp/erc
cvs update: Updating lisp/eshell
cvs update: Updating lisp/gnus
cvs update: Updating lisp/international
cvs update: Updating lisp/language
cvs update: Updating lisp/mail
cvs update: Updating lisp/mh-e
cvs update: Updating lisp/net
cvs update: Updating lisp/obsolete
cvs update: Updating lisp/play
P lisp/play/bubbles.el
P lisp/play/gamegrid.el
cvs update: Updating lisp/progmodes
P lisp/progmodes/cc-langs.el
cvs update: Updating lisp/term
P lisp/term/x-win.el
cvs update: Updating lisp/textmodes
cvs update: Updating lisp/toolbar
cvs update: Updating lisp/url
cvs update: Updating lispintro
cvs update: Updating lispref
cvs update: Updating lock
cvs update: Updating lwlib
cvs update: Updating m4
cvs update: Updating mac
cvs update: Updating mac/Emacs.app
cvs update: Updating mac/Emacs.app/Contents
cvs update: Updating mac/Emacs.app/Contents/MacOS
cvs update: Updating mac/Emacs.app/Contents/Resources
cvs update: Updating mac/Emacs.app/Contents/Resources/English.lproj
cvs update: Updating mac/bin
cvs update: Updating mac/inc
cvs update: Updating mac/inc/sys
cvs update: Updating mac/src
cvs update: Updating man
cvs update: Updating msdos
cvs update: Updating notes
cvs update: Updating nt
cvs update: Updating nt/icons
cvs update: Updating nt/inc
cvs update: Updating nt/inc/arpa
cvs update: Updating nt/inc/netinet
cvs update: Updating nt/inc/sys
cvs update: Updating oldXMenu
cvs update: Updating site-lisp
cvs update: Updating src
P src/ChangeLog
P src/dispextern.h
P src/gtkutil.c
P src/keyboard.c
cvs update: Updating src/bitmaps
cvs update: Updating src/m
cvs update: Updating src/s
cvs update: Updating vms
magdalene:~/src/emacs> ssh ford
The authenticity of host 'ford (192.168.0.50)' can't be established.
RSA key fingerprint is 4f:06:e0:46:f9:13:3e:ac:ae:41:eb:9a:e2:1f:88:a6.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'ford,192.168.0.50' (RSA) to the list of
known hosts.
Linux LKG29808F 2.6.18-4-ixp4xx #1 Sun Apr 22 08:34:11 UTC 2007 armv5tel

The programs included with the Debian GNU/Linux system are free
software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

  GNU nano 2.0.2            File: /tmp/cvsfT5uaA


----------------------------------------------------------------------
----------------------------------------------------------------------
* lisp/tramp.el (tramp-handle-set-file-times): Flush the file
properties.
(tramp-set-file-uid-gid, tramp-get-local-uid)
(tramp-get-local-gid): New defuns.
(tramp-handle-copy-file): Handle new parameter PRESERVE-UID-GID.
(tramp-do-copy-or-rename-file): New parameter PRESERVE-UID-GID.
Improve fast track.
(tramp-do-copy-or-rename-file-directly): Sync parameter list with
the other tramp-do-copy-or-rename-file-* functions.  Major
rewrite.
(tramp-handle-file-local-copy, tramp-handle-insert-file-contents)
(tramp-handle-write-region): Improve fast track.
(tramp-handle-file-remote-p): IDENTIFICATION can also be
'localname.
(tramp-maybe-open-connection): Let `process-adaptive-read-buffering'
be nil.

* lisp/tramp-util.el (tramp-advice-process-file): Rename from
`tramp-advice-call-process'.
(tramp-advice-call-process-shell-command): Correct doc string.
----------------------------
revision 2.578
date: 2007-08-23 22:19:30 -0700;  author: albinus;  state: Exp;  lines: +81 -67;  commitid: cVxmejaz6llQOXus;

* lisp/tramp.el (tramp-local-host-p): New defun.
(tramp-handle-file-local-copy, tramp-handle-write-region):
Implement fast track when being on the local host.
(tramp-file-name-handler): Don't set "started" property.  It shall
be reserved for the "ftp" method.
(tramp-make-copy-program-file-name): Use `tramp-file-name-real-host'.

* lisp/tramp-ftp.el (top): Autoload `tramp-set-connection-property'.
(tramp-ftp-file-name-handler):  Set "started" property.
----------------------------
revision 2.577
date: 2007-08-21 22:38:44 -0700;  author: albinus;  state: Exp;  lines: +56 -75;  commitid: VUup64FY1TX9ZHus;

* lisp/tramp.el (tramp-get-remote-path): New defun.  Replace occurences
of `tramp-default-remote-path' by this function.
(tramp-set-remote-path): Move most of the code to
`tramp-get-remote-path'.
(tramp-get-ls-command, tramp-get-remote-id): Don't check for not
existing directories, this is done already in
`tramp-get-remote-path'.

* texi/tramp.texi (Remote Programs): Persistency file must be cleared
when changing `tramp-remote-path'.
----------------------------
revision 2.576
date: 2007-08-14 11:58:47 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: cqKWGsujYpjLFKts;

* lisp/tramp.el (top): Require cl.el, when `copy-tree' is not available
otherwise.
----------------------------
revision 2.575
date: 2007-08-07 13:20:28 -0700;  author: albinus;  state: Exp;  lines: +22 -8;  commitid: hUSC79nhK79MlRss;

* lisp/tramp.el (tramp-handle-shell-command): Handle OUTPUT-BUFFER and
ERROR-BUFFER more robust.  Display output.
(tramp-handle-process-file): Fix bug inserting resulting output.

* lisp/tramp-cache.el (top): Read persistent connection history when
cache is empty.
----------------------------
revision 2.574
date: 2007-08-01 12:59:25 -0700;  author: albinus;  state: Exp;  lines: +6 -2;  commitid: ttLEFGUf6QzHq5ss;

* lisp/tramp.el (tramp-file-name-handler): Add a connection property
when we found a foreign file name handler.  This allows backends
like ftp to profit also from usr/host name completion based on
connection cache.
----------------------------
revision 2.573
date: 2007-07-30 12:22:13 -0700;  author: albinus;  state: Exp;  lines: +6 -5;  commitid: 65WZzCqsXnTUhPrs;

* lisp/tramp.el (tramp-wrong-passwd-regexp): Make the regexp more
global matching.
(tramp-send-command-and-read): Search for trash after the regexp
until eol only.  In XEmacs, there is a problem with \n.
----------------------------
revision 2.572
date: 2007-07-29 08:39:39 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: 6Mig8uNEFEeF5Grs;
*** empty log message ***
----------------------------
revision 2.571
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +8 -7;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.570
date: 2007-07-23 13:33:24 -0700;  author: albinus;  state: Exp;  lines: +9 -4;  commitid: fJOGPxd0nkIYTVqs;

* configure.ac: Bump version (to 2.1.11-pre).  Update merge
version to 2.1.10.

* lisp/tramp.el (tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes)
(tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-stat(
(tramp-convert-file-attributes): Handle huge file sizes.
----------------------------
revision 2.569
date: 2007-07-22 09:29:40 -0700;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: JpiEgUOKtSqCAMqs;

Version 2.1.10 released.
----------------------------
revision 2.568
date: 2007-07-17 13:49:43 -0700;  author: albinus;  state: Exp;  lines: +6 -2;  commitid: WDcBCTK3JXbObaqs;

* lisp/tramp.el (tramp-handle-file-remote-p): Handle optional parameter
IDENTIFICATION.

* lisp/tramp-util.el (tramp-advice-file-remote-p): Handle optional
parameter IDENTIFICATION.
----------------------------
revision 2.567
date: 2007-07-16 14:33:02 -0700;  author: albinus;  state: Exp;  lines: +54 -47;  commitid: hlv4JiwKkWs8s2qs;

* lisp/tramp.el (tramp-handle-set-file-times): New defun.  Replaces
`tramp-touch'.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add entry for `set-file-times'.
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-out-of-band): Use `set-file-times'.
(tramp-handle-unhandled-file-name-directory): Rewrite.
(tramp-convert-file-attributes): Add error handling when inode is
extraordinary big.
(tramp-get-inode): Change parameter from FILE to VEC.

* lisp/tramp-fish.el (tramp-fish-file-name-handler-alist): Add entry
for `set-file-times'.  Rename `start-process' into
`start-file-process'.  Remove `call-process' entry.
(tramp-fish-handle-set-file-times): New defun.
(tramp-fish-handle-executable-find): Use `process-file'.
(tramp-fish-handle-process-file): New defun.  Replaces
`tramp-fish-handle-call-process'.
(tramp-fish-do-copy-or-rename-file-directly): Use
`set-file-times'.
(tramp-fish-get-file-entries): Change `tramp-get-inode' parameter.

* lisp/tramp-smb.el (tramp-smb-handle-file-attributes): Change
`tramp-get-inode' parameter.

* lisp/tramp-util.el (all): Change all checks to (fboundp
'start-file-process).
(set-file-times): Add a defalias if function does not exist.

* texi/tramp.texi (Frequently Asked Questions): Simplify recentf
example.
----------------------------
revision 2.566
date: 2007-07-15 07:44:30 -0700;  author: albinus;  state: Exp;  lines: +52 -25;  commitid: jdzMDGqeXZMseSps;

* tramp.el (tramp-methods, tramp-find-shell)
(tramp-open-connection-setup-interactive-shell)
(tramp-maybe-open-connection): Guard against $PROMPT_COMMAND shell
var.  Reported by Steve Youngs <steve@sxemacs.org>.
(tramp-handle-start-file-process ): Use (current-buffer) if BUFFER
is NIL.  This is according to the specification.  Goto (point-max)
when ready.
(tramp-handle-shell-command): Rewrite completely, using
`process-file' and `start-file-process'.
(tramp-touch): Don't use variable expansion when calling
`shell-command'.
----------------------------
revision 2.565
date: 2007-07-08 02:36:29 -0700;  author: albinus;  state: Exp;  lines: +5 -3;  commitid: uObdz1vQQBwFKWos;

* lisp/tramp.el (tramp-handle-file-remote-p): Handle optional parameter
CONNECTED.

* lisp/tramp-util.el (tramp-advice-file-remote-p): Handle optional
parameter CONNECTED.
(all): Use `unhandled-file-name-directory' where appropriate.
----------------------------
revision 2.564
date: 2007-07-01 22:09:52 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.563
date: 2007-07-01 11:31:35 -0700;  author: albinus;  state: Exp;  lines: +27 -50;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.562
date: 2007-06-20 13:26:39 -0700;  author: albinus;  state: Exp;  lines: +6 -10;  commitid: 6Fqxls1tJZzgVGms;

* lisp/tramp.el:
* lisp/tramp-cache.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el: Use `expand-file-name' instead of `concat' where
appropriate.

* lisp/tramp.el (tramp-action-yesno, tramp-action-yn): Protect
`pop-to-buffer' by `save-match-data'.

* texi/tramp.texi (Filename completion): Rework examples for local
filename completion.
----------------------------
revision 2.561
date: 2007-06-17 04:12:31 -0700;  author: albinus;  state: Exp;  lines: +89 -65;  commitid: IQTI2NEf6N68Xfms;

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Unify "Tramp" in strings.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): "//" and "/~"
substitute only in the local filename part.  Suggested by Peter
Gordon <peter@pg-consultants.com>.
(tramp-advice-minibuffer-electric-separator)
(tramp-advice-minibuffer-electric-tilde): New defadvices.
(tramp-append-tramp-buffers): Replace "sensible" by "sensitive" in
the hint.

* texi/tramp.texi (Filename completion): "//" substitutes in local
filename only.
----------------------------
revision 2.560
date: 2007-06-10 13:58:37 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: j5FMSZcyy8vAqpls;

* lisp/tramp.el (tramp-handle-insert-file-contents): VISIT must be
handled after insertion of the local copy.  Reported by Peter
Gordon <peter@pg-consultants.com>.
----------------------------
revision 2.559
date: 2007-05-27 12:54:44 -0700;  author: albinus;  state: Exp;  lines: +93 -63;  commitid: 7PsnkV1mXPbnwBjs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-method,
(tramp-file-name-user, tramp-file-name-host)
(tramp-file-name-localname): New defuns, replacing defstruct
`tramp-file-name'.
(tramp-completion-dissect-file-name1, tramp-compute-multi-hops)
(tramp-dissect-file-name): Apply `vector' instead of
`make-tramp-file-name'.
(tramp-do-copy-or-rename-file-out-of-band): Aset 3rd index instead
of 4th, when setting localname.
(tramp-compute-multi-hops): Aset 2nd index instead of 3rd, when
setting host.

* lisp/tramp-cache.el (all): Aset 3rd index instead of 4th, when
unifying localname.
----------------------------
revision 2.558
date: 2007-05-22 13:21:44 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: DjFy5iQMKvGUPXis;

* lisp/tramp.el (tramp-handle-expand-file-name):
* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name):
Key for home directory cache entry must distinguish different
users.  Reported by Gilles Pion <gpion@lfdj.com>.
----------------------------
revision 2.557
date: 2007-04-23 14:24:26 -0700;  author: albinus;  state: Exp;  lines: +3 -1;

* lisp/tramp.el: (tramp-default-user): Mark the variable as obsolete in
the docstring.
----------------------------
revision 2.556
date: 2007-04-23 14:13:15 -0700;  author: albinus;  state: Exp;  lines: +12 -0;

* lisp/tramp.el: New todo items.

* texi/tramp.texi (Default user): Declare `tramp-default-user' as
obsolete.  Explain how to use `tramp-default-user-alist' instead of.
----------------------------
revision 2.555
date: 2007-04-22 12:37:23 -0700;  author: albinus;  state: Exp;  lines: +47 -30;

* lisp/tramp.el (tramp-methods): "plinkx" loads a session.  No default
port.
(tramp-default-user-alist): No default user for "plinkx".
(tramp-completion-function-alist-putty): New defconst.
(tramp-completion-function-alist): Add "plinkx" completion.
(tramp-set-completion-function): Handle also registry keys.
(tramp-parse-putty, tramp-parse-putty-group): New defuns.
(tramp-action-login): Trace login prompt.

* texi/tramp.texi (Inline methods):  Add `plinkx' method.
----------------------------
revision 2.554
date: 2007-04-19 13:21:27 -0700;  author: albinus;  state: Exp;  lines: +29 -2;

* lisp/tramp.el (tramp-methods): New method "plinkx".
(tramp-default-user-alist): Add default user for "plink" methods.
(tramp-action-login): Read user name interactively when nil.
----------------------------
revision 2.553
date: 2007-04-15 14:03:41 -0700;  author: albinus;  state: Exp;  lines: +3 -4;

* configure.ac: Bump version (to 2.1.10-pre).

* INSTALL: Commands cannot contain whitespaces in their path.

* lisp/tramp.el (tramp-default-user): Fix typo in docstring.  Value can
also be nil.

* texi/trampinst.texi (Installation parameters): Commands cannot
contain whitespaces in their path.
----------------------------
revision 2.552
date: 2007-04-12 13:45:12 -0700;  author: albinus;  state: Exp;  lines: +15 -5;

* lisp/tramp.el (top): Make `set-buffer-multibyte' an alias if it
doesn't exist.
(tramp-handle-directory-files-and-attributes-with-stat)
(tramp-handle-file-attributes-with-stat): Return inode as real
number.
(tramp-convert-file-attributes): Convert inode into a list of two
integers.
----------------------------
revision 2.551
date: 2007-04-08 03:13:35 -0700;  author: albinus;  state: Exp;  lines: +2 -0;

Version 2.1.9 released.
----------------------------
revision 2.550
date: 2007-04-08 02:32:59 -0700;  author: albinus;  state: Exp;  lines: +8 -2;

* lisp/tramp.el (tramp-buffer-name, tramp-debug-buffer-name): We must
use `tramp-file-name-real-host', because for gateway methods the
default port will be expanded later on, which would tamper the
name.
----------------------------
revision 2.549
date: 2007-04-06 14:27:38 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-compute-multi-hops): Fix error in setting hop.
----------------------------
revision 2.548
date: 2007-04-03 14:01:21 -0700;  author: albinus;  state: Exp;  lines: +24 -22;

* lisp/tramp.el (tramp-message): Don't print "Error" in level 1, this
is part of the message already.
(tramp-error-with-buffer, tramp-action-yesno, tramp-action-yn):
Let `enable-recursive-minibuffers' be t, in case we need
`pop-to-buffer' during editing of the minibuffer.
(tramp-barf-if-no-shell-prompt): Apply `tramp-error-with-buffer'.

* texi/trampver.texi.in: Set default value of `emacsgw'.
----------------------------
revision 2.547
date: 2007-03-31 13:52:15 -0700;  author: albinus;  state: Exp;  lines: +87 -22;

* lisp/tramp.el (top): Don't require 'tramp-cache, it results in an
endless loop.  Autoload needed functions instead of.  Declare
needed gateway symbols, when tramp-gw cannot be loaded.
(with-parsed-tramp-file-name): Simplify `edebug-form-spec'.
(with-file-property, with-connection-property): New defmacros,
moved from tramp-cache.  This was necessary, because macros cannot
be autoloaded.
(tramp-register-file-name-handler)
(tramp-register-completion-file-name-handler): New defsubst,
derived from `tramp-register-file-name-handlers'.  The split is
necessary because Tramp's file name handlers must be registered at
different startup places.

* lisp/tramp-cache.el (with-file-property, with-connection-property):
Move them to tramp.el.

* texi/tramp.texi (Frequently Asked Questions): Add recentf to
approaches shortening Tramp file names to be typed.
(Traces and Profiles): Describe call traces; text moved from Bug
Reports.
----------------------------
revision 2.546
date: 2007-03-26 13:08:14 -0700;  author: albinus;  state: Exp;  lines: +1 -2;

* lisp/tramp.el (tramp-handle-expand-file-name): Don't apply
`tramp-drop-volume-letter' for non-Tramp files.
----------------------------
revision 2.545
date: 2007-03-25 11:39:27 -0700;  author: albinus;  state: Exp;  lines: +13 -9;

* aclocal.m4 (AC_EMACS_INFO): Add gateway support.
(AC_EMACS_CHECK_LIB): Remove.

* configure.ac: Add gateway support.

* lisp/Makefile.in: Add gateway support.

* lisp/tramp.el (top): Require tramp-gw conditionally only.
(tramp-methods): Add port spec to "plink", "plink1" and "pscp"
methods.

* texi/Makefile.in: Add gateway support.

* texi/tramp.texi (all): Make gateway text conditional.
----------------------------
revision 2.544
date: 2007-03-21 14:48:24 -0700;  author: albinus;  state: Exp;  lines: +2 -1;

* lisp/tramp.el (tramp-handle-make-auto-save-file-name): Apply
`tramp-temporary-file-directory' for compatibility reasons.
----------------------------
revision 2.543
date: 2007-03-19 15:23:49 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el (tramp-handle-directory-files-and-attributes-with-stat)
(tramp-handle-file-name-all-completions): Add "-b" to the "ls"
command in order to handle file names with spaces.
----------------------------
revision 2.542
date: 2007-03-08 13:21:45 -0800;  author: albinus;  state: Exp;  lines: +293 -282;

* lisp/tramp.el (tramp-methods): Extend doc string by description of
`tramp-default-port' and `tramp-gw-args'.
(tramp-enter-password): Remove `inhibit-trace'.  It is handled by
description in the manual now.
(tramp-maybe-open-connection): Fix small error in gateway handling.

* texi/tramp.texi (Bug Reports): Precise example for call traces.
Describe how to avoid passwords to be sent.
----------------------------
revision 2.541
date: 2007-03-07 13:24:30 -0800;  author: albinus;  state: Exp;  lines: +128 -126;

* lisp/tramp.el (tramp-methods): Add port spec to "telnet" method.
(tramp-do-copy-or-rename-file-out-of-band): Complete gateway
implementation.
(tramp-handle-insert-directory): Check (featurep 'ls-lisp).
(tramp-make-tramp-temp-file): Use `emacs-pid' if there is no
running process yet.
(tramp-compute-multi-hops): New defun.  Code extracted from
`tramp-maybe-open-connection'.
(tramp-maybe-open-connection): Code adapted accordingly.

* lisp/tramp-gw.el (tramp-gw-gw-proc-sentinel): Companion process might
not exist.
(tramp-gw-open-network-stream, tramp-gw-basic-authentication):
Clean password cache in error case only.

* texi/tramp.texi (Remote processes): Improve eshell example.
----------------------------
revision 2.540
date: 2007-03-05 13:57:51 -0800;  author: albinus;  state: Exp;  lines: +53 -24;

* lisp/tramp.el (tramp-methods): Add gateway parameter to "scp",
"scp1", "scp2", "scpc", "scpx", "sshx".
(tramp-do-copy-or-rename-file-out-of-band): Start implementation
for gateways.  It is not finished yet.
(tramp-make-copy-program-file-name): Change parameter to VEC.
(tramp-make-temp-file): New parameter FILENAME.  Append its
extension to the resulting temporary file name.
(tramp-handle-file-local-copy, tramp-handle-write-region): Apply
it.

* lisp/tramp-smb.el (tramp-smb-handle-file-local-copy)
(tramp-smb-handle-write-region): Apply it.

* lisp/tramp-fish.el (tramp-fish-handle-file-local-copy): Apply it.

* texi/tramp.texi (trampfn, trampfnmhl, trampfnuhl, trampfnhl): New
macros.  Apply them wherever possible, improving readability.
(Multi-hops): Add some words in the footnote regarding ethical
issues of passing firewalls.
(Remote processes): New subsection discussing integration into
eshell.
----------------------------
revision 2.539
date: 2007-02-28 14:56:41 -0800;  author: albinus;  state: Exp;  lines: +3 -3;

* lisp/tramp.el (tramp-error-with-buffer): Use `sit-for'.

* lisp/tramp-gw.el (tramp-gw-vector, tramp-gw-gw-proc): Renamed from
`tramp-gw-current-vector' and `tramp-gw-current-gw-proc'.
(tramp-gw-gw-vector): New defvar.
(tramp-gw-gw-proc-sentinel): New defun.
(tramp-gw-open-connection): Use an independent buffer name for
auxiliary process.  Set process sentinel for `tramp-gw-gw-proc'.
----------------------------
revision 2.538
date: 2007-02-27 14:09:44 -0800;  author: albinus;  state: Exp;  lines: +29 -19;

* lisp/tramp.el (tramp-error-with-buffer): New defsubst.  Apply it
wherever there is `pop-to-buffer', followed by `tramp-error'.
(tramp-maybe-open-connection): Rename `tramp-gw-http-method' to
`tramp-gw-tunnel-method'.

* lisp/tramp-gw.el (tramp-gw-tunnel-method)
(tramp-gw-default-tunnel-port): Renamed from
`tramp-gw-http-method' and `tramp-gw-default-http-port',
respectively.  Apply it everywhere.
(tramp-gw-open-connection): Improve doc-string.  Use only type 5
for `socks-server', we have our own 'http implementation.
(tramp-gw-open-network-stream): Improve error handling.
(tramp-gw-basic-authentication): Bind `tramp-current-*' locally
because of password cache key.

* texi/tramp.texi (History): Add gateway methods as well as relation to
GNU Emacs, XEmacs and GNU/Linux Debian.
(Gateway methods): Minor wording improvements.
(Multi-hops): Explain HTTP tunnel example in more detail.
----------------------------
revision 2.537
date: 2007-02-26 13:56:03 -0800;  author: albinus;  state: Exp;  lines: +67 -42;

* lisp/tramp.el (tramp-methods): Add "StrictHostKeyChecking=no" to
`tramp-gw-args' of ssh, ssh1 and ssh2 methods.
(tramp-maybe-open-connection): Implement changed interface of
`tramp-gw-open-connection'.
(tramp-send-eof): Removed.
(tramp-file-name-real-host, tramp-file-name-port): New defsubst.
(tramp-read-passwd): New parameter PROMPT.

* lisp/tramp-gw.el: Complete rewrite.  Use socks.el for SOCKS server;
implement HTTP tunnels on its own.

* texi/tramp.texi (Gateway methods): New section.
(Multi-hops): Describe useage of gateway methods.
----------------------------
revision 2.536
date: 2007-02-13 23:14:45 -0800;  author: albinus;  state: Exp;  lines: +119 -45;

* Makefile.in: Add tramp-gw.el

* lisp/Makefile.in: Add tramp-gw.el

* lisp/tramp-gw.el: New package.

* lisp/tramp.el (top): Require tramp-gw.
(tramp-methods): Add `tramp-gw-args' and `tramp-default-port' for
ssh and telnet methods.
(tramp-message): Catch errors.
(tramp-action-yesno, tramp-action-yn): Trace messages.
(tramp-maybe-open-connection): Handle gateways.
(tramp-read-passwd): New parameter PROC. Used in order to improve
password prompt. Adapt callees.
----------------------------
revision 2.535
date: 2007-01-31 14:35:38 -0800;  author: albinus;  state: Exp;  lines: +5 -6;

* lisp/tramp-smb.el (tramp-smb-handle-insert-directory)
* lisp/tramp.el (tramp-handle-insert-directory): Fix wildcard case.

* texi/tramp.texi (Frequently Asked Questions): New item for
performance considerations.
----------------------------
revision 2.534
date: 2007-01-27 07:01:49 -0800;  author: albinus;  state: Exp;  lines: +8 -4;

* lisp/tramp.el (tramp-perl-encode, tramp-perl-decode): Update copyrights.
----------------------------
revision 2.533
date: 2007-01-18 13:00:11 -0800;  author: albinus;  state: Exp;  lines: +113 -122;

* configure.ac: Bump version (to 2.1.9-pre).

* lisp/tramp.el (with-parsed-tramp-file-name): Protect debug spec
during compilation.
(tramp-handle-expand-file-name, tramp-find-method)
(tramp-find-user, tramp-find-host): Don't check for
`tramp-completion-mode'.
(tramp-find-foreign-file-name-handler): Check also for
`tramp-completion-mode' and `ramp-completion-file-name-regexp'.
(tramp-completion-mode): Variable removed.  Also all occurencies.
(tramp-completion-handle-file-name-all-completions): Don't call
`tramp-run-real-handler'.
(tramp-make-tramp-file-name): It must return always a well-formed
Tramp file name.
(tramp-completion-make-tramp-file-name): New defun.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Apply it.
----------------------------
revision 2.532
date: 2007-01-15 13:34:17 -0800;  author: albinus;  state: Exp;  lines: +4 -1;

* tramp.el (tramp-handle-start-process): BUFFER can be nil

* tramp-util.el (top): Add defadvice for `ispell-start-process'.
----------------------------
revision 2.531
date: 2007-01-13 11:59:33 -0800;  author: albinus;  state: Exp;  lines: +9 -7;

* lisp/tramp.el (top): Change declaration of `with-temp-message' if it
doesn't exist.
(tramp-buffer-name, tramp-debug-buffer-name)
(tramp-make-tramp-file-name, tramp-make-copy-program-file-name):
Check also for empty USER.

* lisp/tramp-smb.el (tramp-smb-actions-with-share):
(tramp-smb-actions-without-share): New defconst.
(tramp-smb-open-connection): Removed.  Code merged into
`tramp-smb-maybe-open-connection'.  Use new defconst.

* lisp/tramp.texi (Multi-hops): Change last example to `sudo'.
----------------------------
revision 2.530
date: 2007-01-11 22:44:26 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (top): Declare `with-temp-message' if it doesn't exist.
----------------------------
revision 2.529
date: 2007-01-11 13:57:08 -0800;  author: albinus;  state: Exp;  lines: +1 -0;

* lisp/tramp.el (tramp-touch): Check, whether `format-time-string' is
a primitive.
----------------------------
revision 2.528
date: 2007-01-11 13:19:11 -0800;  author: albinus;  state: Exp;  lines: +32 -26;

* lisp/tramp.el (tramp-actions-copy-out-of-band):
`tramp-copy-failed-regexp' calls `tramp-action-permission-denied'.
(tramp-handle-file-local-copy): Set `enable-multibyte-characters'
to nil.  Reported by Chris Moore <christopher.ian.moore@gmail.com>.
(tramp-handle-write-region): Compute file size as difference
between END and START.
(tramp-touch): In case of 'tramp-sh-file-name-handler, apply
`tramp-send-command', which is more efficient.
(tramp-action-permission-denied, tramp-action-process-alive):
Don't apply `pop-to-buffer', this is done centrally.
(tramp-action-copy-failed): Removed, not needed anymore.
(tramp-get-remote-stat): Hide temporary error message.
----------------------------
revision 2.527
date: 2007-01-10 14:04:37 -0800;  author: albinus;  state: Exp;  lines: +5 -4;

* lisp/tramp.el (tramp-maybe-open-connection): The sent command must
ensure that the process terminates, finally.  Write the command
compatible for shells and w32 COMSPEC.
----------------------------
revision 2.526
date: 2006-12-31 11:07:29 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-completion-mode): Use `natnump' instead of
`wholenump' because of XEmacs.
----------------------------
revision 2.525
date: 2006-12-30 14:31:18 -0800;  author: albinus;  state: Exp;  lines: +14 -8;

* lisp/tramp.el (tramp-file-name-handler-alist): Add handler for
`shell-command'.
(tramp-handle-shell-command): New defun.
(tramp-touch): Don't bind `shell-file-name' locally.

* lisp/tramp-fish.el (tramp-fish-file-name-handler-alist): Add handler
for `shell-command'.

* lisp/tramp-util.el (start-process-shell-command)
(call-process-shell-command): Bind `shell-command-switch' locally.
----------------------------
revision 2.524
date: 2006-12-29 15:41:25 -0800;  author: albinus;  state: Exp;  lines: +26 -17;

* lisp/tramp.el (tramp-handle-call-process-region): New defun.
(tramp-touch): Use `shell-command' instead of `call-process', in
order to make it usable also for the `fish' method.

* lisp/tramp-fish.el (tramp-fish-handle-insert-file-contents): Move
point to the initial place after insertion.
(tramp-fish-handle-write-region): Don't send zero length data.

* lisp/tramp-util.el (tramp-advice-call-process-region): New defadvice.
----------------------------
revision 2.523
date: 2006-12-27 14:12:29 -0800;  author: albinus;  state: Exp;  lines: +29 -10;

* Makefile.in: Add tramp-fish.el

* lisp/tramp-fish.el: New package.

* lisp/tramp.el (top): Require tramp-fish.
(tramp-inodes): New defvar.
(tramp-handle-expand-file-name): Cache "home-directory".
(tramp-get-inode): New defun.

* lisp/tramp-smb.el (tramp-smb-no-stat, tramp-smb-inodes)
(tramp-smb-get-inode): Removed.  Apply new names.

* lisp/tramp-util.el (tramp-advice-executable-find): Add check for
`tramp-fish-file-name-handler'.

* texi/tramp.texi (Inline methods): Add `fish' method.
----------------------------
revision 2.522
date: 2006-12-26 13:42:55 -0800;  author: albinus;  state: Exp;  lines: +50 -18;

* lisp/tramp.el (tramp-action-process-alive)
(tramp-wait-for-regexp): Pop connection buffer in case of error.
(tramp-exists-file-name-handler): Handle also `default-directory'.
(tramp-half-a-year, tramp-parse-time-months): New defconst.
Transferred from tramp-smb.el.
(tramp-time-less-p, tramp-time-subtract): New defuns.  Transferred
from tramp-smb.el.
(tramp-time-diff): Use them.

* lisp/tramp-smb.el (tramp-smb-half-a-year)
(tramp-smb-parse-time-months, tramp-smb-time-less-p)
(tramp-smb-time-subtract): Removed.  Apply new names.

* lisp/tramp-util.el (top): Don't check for file name handlers of
`start-process-shell-command' and `call-process-shell-command'.

* texi/tramp.texi (Connection types): Mention `scpc' method.
(Default Method): Offer `scpc' for editing large files.
----------------------------
revision 2.521
date: 2006-12-21 12:18:01 -0800;  author: albinus;  state: Exp;  lines: +34 -35;

* lisp/tramp.el (tramp-completion-mode): Use `wholenump' instead of
`integerp'.  `char-equal' could fail else in case of negative
numbers.  Reported by Toby Speight <T.M.Speight.90@cantab.net>.
----------------------------
revision 2.520
date: 2006-12-20 13:38:37 -0800;  author: albinus;  state: Exp;  lines: +15 -11;

* lisp/tramp.el (tramp-handle-file-name-completion)
(tramp-completion-handle-file-name-completion): PREDICATE must be
applied on the expanded car's in `try-completion'.
----------------------------
revision 2.519
date: 2006-12-19 22:05:59 -0800;  author: albinus;  state: Exp;  lines: +10 -5;

* lisp/tramp.el (tramp-handle-file-name-completion)
(tramp-completion-handle-file-name-completion): Handle optional
parameter PREDICATE.
----------------------------
revision 2.518
date: 2006-12-18 23:24:49 -0800;  author: albinus;  state: Exp;  lines: +41 -40;

* lisp/tramp.el (tramp-methods): Introduce new method `scpc'.  Remove
"ControlMaster" option from the other `scp*' methods.
(tramp-default-method): Check for ssh-agent before setting to
`scp'.
(top): Check for `font-lock-add-keywords' before calling; it
doesn't exist under XEmacs.

* texi/tramp.texi (External transfer methods): Describe new method
`scpc'.
----------------------------
revision 2.517
date: 2006-12-17 22:00:08 -0800;  author: albinus;  state: Exp;  lines: +27 -4;

* lisp/tramp.el (tramp-default-method): Before setting to "pscp", check
whether package password.el is loaded, or Pageant is running.

* lisp/tramp-smb.el (tramp-smb-errors): Add error messages.
----------------------------
revision 2.516
date: 2006-12-10 08:43:07 -0800;  author: albinus;  state: Exp;  lines: +9 -4;

* lisp/tramp.el (tramp-password-prompt-regexp): "Passphrase" is used
with capital first letter by PuTTY.
(tramp-message): Add message to debug buffer only when process
buffer is not killed.  Otherwise, debug buffer name cannot be
determined.
(tramp-accept-process-output): Under Win32,
`accept-process-output' doesn't return sometimes.  So we add an
additional timeout around.

* lisp/tramp-smb.el (tramp-smb-send-command ): This is the only place
to call `tramp-smb-maybe-open-connection'.  Remove all other
calls.
(tramp-smb-maybe-open-connection): SHARE isn't needed as
parameter.  We compute it ourselves.
(tramp-smb-open-connection): Set `process-connection-type', which
was done in `tramp-smb-maybe-open-connection' before.  Pop up
connection buffer when there are problems.
----------------------------
revision 2.515
date: 2006-12-09 13:10:08 -0800;  author: albinus;  state: Exp;  lines: +11 -6;

* tramp.el (tramp-enter-password): Inhibit function call traces in
order to avoid passwords to be included there.

* tramp-smb.el (tramp-smb-errors): Add error messages.
(tramp-smb-handle-make-directory-internal): Local file names shall
carry "\\" instead of "/".  Reported by Tom Wurgler
<twurgl@goodyear.com>.

* tramp.texi (Bug Reports): Add code to retrieve function call
traces.
----------------------------
revision 2.514
date: 2006-12-01 12:40:22 -0800;  author: albinus;  state: Exp;  lines: +2 -1;

* lisp/tramp.el (tramp-handle-write-region): Erase buffer before
applying cksum.
(tramp-set-remote-path): Apply `tramp-split-string' instead of
`split-string', because Emacs 21 doesn't support OMIT-NULLS
parameter.
----------------------------
revision 2.513
date: 2006-11-26 03:43:11 -0800;  author: albinus;  state: Exp;  lines: +19 -6;

* lisp/tramp.el (tramp-default-method): Under Windows, change from
plink to pscp.
(tramp-copy-failed-regexp, tramp-action-copy-failed): Add.
(tramp-actions-copy-out-of-band):
Add pair (tramp-copy-failed-regexp tramp-action-copy-failed).
(tramp-action-out-of-band): Move "Permission denied" handling to
tramp-action-copy-failed.
----------------------------
revision 2.512
date: 2006-11-23 22:48:21 -0800;  author: albinus;  state: Exp;  lines: +4 -4;

* lisp/tramp.el (tramp-yn-prompt-regexp): Fix regexp.
----------------------------
revision 2.511
date: 2006-11-21 15:20:53 -0800;  author: albinus;  state: Exp;  lines: +2 -1;

* lisp/tramp.el (tramp-set-remote-path): `tramp-default-remote-path'
contains a trailing ":" under FreeBSD.
----------------------------
revision 2.510
date: 2006-11-07 12:00:35 -0800;  author: albinus;  state: Exp;  lines: +57 -57;
*** empty log message ***
----------------------------
revision 2.509
date: 2006-11-07 03:49:33 -0800;  author: albinus;  state: Exp;  lines: +145 -120;

* lisp/tramp.el (tramp-copy-size-limit): New defcustom.
(tramp-methods): Add "ControlPath" and "ControlMaster" to scp,
scp1 and scp2 methods.  Suggested by Andreas Schwab
<schwab@suse.de>.  Rearrange entries for better readability.
Change syntax of `tramp-copy-args' to that of `tramp-login-args'.
Describe "%t" in the doc string.
(tramp-default-method): scp is the default method.
(tramp-do-copy-or-rename-file, tramp-handle-file-local-copy)
(tramp-handle-write-region): Check for `tramp-copy-size-limit'.
(tramp-do-copy-or-rename-file-out-of-band): Simplify
implementation.
(tramp-maybe-open-connection): Compute format spec only once.

* texi/tramp.texi (Configuration): scp is the default method.
(External transfer methods): Explain meaning of
`tramp-copy-size-limit'.  Don't mention password problems anymore,
this is solved.
(Default Method): Use ssh as example for another method.
----------------------------
revision 2.508
date: 2006-11-05 12:10:59 -0800;  author: albinus;  state: Exp;  lines: +15 -7;

* tramp.el (with-parsed-tramp-file-name): Correct debug spec.
Highlight as keyword.
(tramp-do-copy-or-rename-file): Correct data for
'file-already-exists.
(tramp-touch): Quote file name.
----------------------------
revision 2.507
date: 2006-10-24 22:47:09 -0700;  author: albinus;  state: Exp;  lines: +31 -16;

* configure.ac: Bump version (to 2.1.8-pre).

* lisp/tramp.el (tramp-yn-prompt-regexp): Add question from plink.
(tramp-message): Reduce messages in minibuffer.
(tramp-handle-call-process): Fix error in error handling.
(tramp-touch): UTC handling is not possible for XEmacs.

* lisp/tramp-cache.el (top): Don't autoload macro
`with-parsed-tramp-file-name' but function
`tramp-dissect-file-name'.
(tramp-cache-before-revert-function): Change implementation
accordingly.  Reported by Jonathan Hankins
<jonathan-hankins@mindspring.com>.

* lisp/tramp-util.el (tramp-advice-executable-find): Check for
`load-in-progress)'.
(tramp-advice-call-process): Add check for
`tramp-fish-file-name-handler'.
(tramp-grep-setup, tramp-gud-setup, tramp-ediff-setup): Remove
functions, and call defadvices directly. There is no need for
`eval-after-load'.
(top): Add defadvices for `gnus-1', `jka-compr-call-process' and
`jka-compr-partial-uncompress'.
----------------------------
revision 2.506
date: 2006-09-07 22:00:55 -0700;  author: albinus;  state: Exp;  lines: +1 -2;

* lisp/tramp.el (tramp-open-connection-setup-interactive-shell):
Simplify command checking the uname of the remote host.
----------------------------
revision 2.505
date: 2006-09-03 05:23:58 -0700;  author: albinus;  state: Exp;  lines: +44 -12;

Version 2.1.7 released.
----------------------------
revision 2.504
date: 2006-08-30 23:06:16 -0700;  author: albinus;  state: Exp;  lines: +20 -11;

* lisp/tramp.el (tramp-default-proxies-alist): Extend doc string for %h
and %u patterns.
(tramp-wrong-passwd-regexp): Fix strings.
(tramp-maybe-open-connection): Add handling of %h and %u
patterns.  Suggested by Kirk Strauser <kirk@daycos.com>.

* texi/tramp.texi (Multi-hops): Adding %h and %u patterns to
`tramp-default-proxies-alist'.
----------------------------
revision 2.503
date: 2006-08-28 21:35:25 -0700;  author: albinus;  state: Exp;  lines: +18 -14;

* lisp/tramp.el (tramp-get-remote-uid, tramp-get-remote-gid): Return -1
when ID-FORMAT is 'integer, and the command doesn't yield an
integer.

* texi/tramp.texi (Bug Reports): The Tramp mailing list is moderated
now.  Suggested by Adrian Phillips <a.phillips@met.no>.
----------------------------
revision 2.502
date: 2006-08-27 08:07:18 -0700;  author: albinus;  state: Exp;  lines: +102 -78;

* lisp/tramp.el (tramp-completion-function-alist-*): Provide the
constants also for the Windows case.
(tramp-completion-file-name-regexp-*): Add the drive letter to the
constants in the Windows case.
(tramp-debug-message): Simplify regexp for function names to be
ignored.
(tramp-handle-expand-file-name): Act also in completion mode.
Apply `tramp-drop-volume-letter' then.
(tramp-file-name-handler): No special handling for
`expand-file-name'.  But for `file-name-as-directory'.
(tramp-completion-handle-file-name-all-completions): Apply
`tramp-drop-volume-letter' where appropriate.
(tramp-parse-*): Set `default-directory' to a local filename, in
order to catch the files to be parsed under Windows.
(tramp-open-connection-setup-interactive-shell): Move
"(with-current-buffer ..." upwards; there was a wrong logic.
----------------------------
revision 2.501
date: 2006-08-17 11:28:30 -0700;  author: albinus;  state: Exp;  lines: +33 -40;

* tramp.el (tramp-completion-mode): Remove parameter, it isn't
necessary anymore.  Remove check for `tramp-syntax'.
(tramp-find-method, tramp-find-user, tramp-find-host): Don't
expand to default values when in completion mode.
----------------------------
revision 2.500
date: 2006-08-12 09:56:28 -0700;  author: albinus;  state: Exp;  lines: +13 -9;

* tramp.el (tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-stat): Add
quotes to the user and group elements.
(tramp-handle-file-attributes-with-ls): Goto buffer
head before reading.  Add also quotes to user and group entries
when not in integer format.

* tramp-cache.el: Tune autoloading of functions from tramp.el.
Wrap it with `eval-when-compile', because this is needed for
compiler pacification only.
(tramp-set-connection-property): Trap error from missing function
`tramp-message´ during startup, where we don't miss the debug
messages.
----------------------------
revision 2.499
date: 2006-07-18 13:40:20 -0700;  author: albinus;  state: Exp;  lines: +6 -2;

* lisp/tramp.el (tramp-find-inline-encoding): `rem-enc' and `rem-dec'
must not be cached as converted to a string.
----------------------------
revision 2.498
date: 2006-06-26 13:07:46 -0700;  author: albinus;  state: Exp;  lines: +33 -51;

* lisp/tramp.el (tramp-handle-file-local-copy): Don't evaluate rem-dec
and loc-enc.
(tramp-handle-write-region): Don't evaluate rem-enc and loc-dec.
(tramp-find-inline-encoding): Set connection properties directly
via `tramp-set-connection-property'.
(tramp-set-remote-encoding, tramp-set-remote-decoding)
(tramp-set-local-encoding, tramp-set-local-decoding): Removed.
(tramp-get-remote-encoding, tramp-get-remote-decoding): Removed,
replaced by new defun `tramp-get-remote-coding'.
(tramp-get-local-encoding, tramp-get-local-decoding): Removed,
replaced by new defun `tramp-get-local-coding'.
----------------------------
revision 2.497
date: 2006-06-25 14:09:07 -0700;  author: albinus;  state: Exp;  lines: +1 -0;

* lisp/tramp.el (tramp-unload-tramp): Provide a doc string.
----------------------------
revision 2.496
date: 2006-06-15 15:15:28 -0700;  author: albinus;  state: Exp;  lines: +10 -9;

* lisp/tramp.el (top): Require tramp-util also on Windows machines.
(tramp-message): Process buffer might have been killed.
(tramp-touch): Use UTC to express time.
----------------------------
revision 2.495
date: 2006-06-04 08:36:16 -0700;  author: albinus;  state: Exp;  lines: +12 -2;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Expand
`datarootdir´.  Perform all expansions with "eval".

* configure.ac: Add "-o /dev/null" to texi2dvi call.

* lisp/tramp.el (tramp-process-actions): Pop connection buffer in case
of error.  Modify error message depending on `tramp-action'.

* lisp/tramp-cache.el (tramp-persistency-file-name): Default value is
"~/.emacs.d/tramp" or "~/.xemacs/tramp", respectively.  Suggested
by Romain Francoise <romain@orebokech.com>.
(tramp-dump-connection-properties): Suppress error when
`tramp-persistency-file-name´ cannot be written.

* texi/tramp.texi (Connection caching): Change default file name.
----------------------------
revision 2.494
date: 2006-06-01 14:40:29 -0700;  author: albinus;  state: Exp;  lines: +26 -23;

* lisp/tramp.el (tramp-process-one-action): Remove `with-timeout'
clause.
(tramp-process-actions): Add optional TIMEOUT parameter.  If set,
apply it.
(tramp-maybe-open-connection): Call `tramp-process-actions' with a
timeout of 60".

* texi/tramp.texi (Filename completion): Explain how to enable
`partial-completion-mode' temporarily.
----------------------------
revision 2.493
date: 2006-06-01 13:32:55 -0700;  author: albinus;  state: Exp;  lines: +4 -3;

* lisp/tramp.el (tramp-make-copy-program-file-name): Quote LOCALNAME.
----------------------------
revision 2.492
date: 2006-05-31 14:27:02 -0700;  author: albinus;  state: Exp;  lines: +5 -1;

* configure.ac: Bump version (to 2.1.7-pre).

* lisp/tramp.el (tramp-get-debug-buffer): `outline-mode' must be
protected with a local `default-directory'.

* lisp/tramp-cache.el (top): When reading
`tramp-persistency-file-name', discard error messages for
'file-error.
----------------------------
revision 2.491
date: 2006-05-28 11:47:01 -0700;  author: albinus;  state: Exp;  lines: +11 -9;

Version 2.1.6 released.
----------------------------
revision 2.490
date: 2006-05-27 11:43:31 -0700;  author: albinus;  state: Exp;  lines: +56 -78;

* lisp/tramp.el (tramp-initial-commands): Removed.
(tramp-remote-process-environment): Add the settings from
`tramp-initial-commands' here.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add `executable-find' entry.
(tramp-message): Apply `save-match-data'.
(tramp-do-copy-or-rename-file-out-of-band): `executable-find' must
be called locally.
(tramp-handle-executable-find): New defun.
(tramp-process-one-action)
(tramp-open-connection-setup-interactive-shell): Remove some
messages.  Send the "unset" commands as one bunch for
optimization.
(defun tramp-send-command-internal): Remove the MSG parameter.

* lisp/tramp-smb.el (tramp-smb-open-connection): `executable-find' must
be called locally.

* lisp/tramp-util.el (tramp-advice-executable-find)
(start-process-shell-command)
(tramp-advice-call-process-shell-command): New defadvices.
(tramp-advice-start-process, tramp-advice-call-process): Don't
apply parameter lists explicitely.
----------------------------
revision 2.489
date: 2006-05-24 13:12:23 -0700;  author: albinus;  state: Exp;  lines: +53 -54;

* lisp/tramp.el (tramp-message): Write into debug buffer only if
`tramp-verbose-level' is greater than or equal to 4.
(tramp-get-completion-function): Add
`tramp-parse-connection-properties´.
(tramp-process-initial-commands, tramp-post-connection): Removed,
also their respective calls..
(tramp-open-connection-setup-interactive-shell) Add code from
`tramp-process-initial-commands' and `tramp-post-connection'.

* lisp/tramp-cache.el (tramp-parse-connection-properties): New defun.

* lisp/tramp-util.el (tramp-ediff-setup): New defun.

* texi/tramp.texi (Traces and Profiles): Tramp debug buffer is written
with verbosity level 4 onwards.
----------------------------
revision 2.488
date: 2006-05-22 14:34:30 -0700;  author: albinus;  state: Exp;  lines: +106 -75;

* lisp/tramp.el (tramp-error): Don't kill the process.  There are
several cases it doesn't make sense.
(tramp-do-copy-or-rename-file): Flush NEWNAMEs file property.
(tramp-do-copy-or-rename-file-out-of-band): Apply `tramp-error'
when possible.  Make the temporary process more robust.  Use
"process-name" and "process-buffer" properties.
(tramp-handle-start-process): Return the process.
(tramp-completion-handle-file-name-all-completions): Use
`tramp-find-method'.  It was lost some day, don't know how.
(tramp-action-permission-denied, tramp-action-yesno)
(tramp-action-yn, tramp-find-inline-encoding): Apply `kill-process'.
(tramp-append-tramp-buffers): Add a remark about attached buffers.

* lisp/tramp-cache.el (tramp-cache-print): Make sure processes and
buffers are dumped as strings.
(tramp-flush-connection-property): Don't send a debug message.
Process and/or buffer might have been killed already.
(tramp-dump-connection-properties): Don't save "process-name" and
"process-buffer" properties.
----------------------------
revision 2.487
date: 2006-05-21 09:15:06 -0700;  author: albinus;  state: Exp;  lines: +1288 -1663;

Major rewrite.  Parameter lists changed from METHOD USER HOST to VEC.
----------------------------
revision 2.486
date: 2006-05-10 22:57:33 -0700;  author: albinus;  state: Exp;  lines: +59 -65;

* lisp/tramp.el (all): Apply renamings from tramp-cache.el.
(tramp-handle-start-process, tramp-get-connection-buffer)
(tramp-get-connection-process, tramp-maybe-open-connection):
"process-name" and "process-buffer" are handled as file property,
because they shouldn't be saved in Tramp connection history.
(tramp-maybe-send-script): Dito for "scripts".
(tramp-check-for-regexp, tramp-send-command)
(tramp-send-command-internal): Dito for "check-remote-echo".
(tramp-open-connection-setup-interactive-shell): Move test for
`tramp-chunksize)' down.
(tramp-bug): Add `tramp-file-properties'.
(tramp-append-tramp-buffers): Remove test for cache data.

* lisp/tramp-cache.el (tramp-file-properties): Renamed from
`tramp-cache-data'.  It's not buffer local anymore.
(tramp-cache-setup): Reimplementation.
(tramp-get-file-property): Renamed from
`tramp-cache-get-file-property'.  Reimplementation.
(tramp-set-file-property): Renamed from
`tramp-cache-set-file-property'.  Reimplementation.
(tramp-flush-file-property): Renamed from
`tramp-cache-flush-file'.  Reimplementation.
(tramp-flush-directory-property): Renamed from
`tramp-cache-directory-file'.  Reimplementation.
(with-file-property ): Renamed from `with-cache-data'.
Reimplementation.
(tramp-set-connection-property): Remove parameter TRANSIENT.
(tramp-dump-connection-properties): Pretty printing shall work for
other Emacsen too.

* lisp/tramp-smb.el (all): Apply renamings from tramp-cache.el.
----------------------------
revision 2.485
date: 2006-05-09 22:30:16 -0700;  author: albinus;  state: Exp;  lines: +37 -32;

* lisp/tramp.el (all):
* lisp/tramp-util.el (all): Adapt all occurencies of
`tramp-set-connection-property' and
`tramp-get-connection-property' according to changed parameter
list.

* lisp/tramp-cache.el (tramp-get-connection-property): Reorder
parameter list.
(tramp-set-connection-property): Reorder parameter list.  Add new
parameter TRANSIENT which suppresses saving that property in
persistent connection history.
(with-connection-property): Apply reordered parameter lists.
(tramp-dump-connection-properties): Remove transient entries.
----------------------------
revision 2.484
date: 2006-05-08 22:37:27 -0700;  author: albinus;  state: Exp;  lines: +27 -22;

* lisp/tramp.el (top): Eval expression for adding tramp-(ftp|efs) to
`tramp-unload-hook'.
(tramp-handle-file-name-all-completions)
(tramp-handle-insert-directory): Remove final "cd".
(tramp-register-file-name-handlers): Enable Tramp completion also
when ido is loaded.
(tramp-post-connection): Don't check for (en|de)coding.  It will
be done on-the-fly.
(tramp-find-inline-encoding): Remove tramp-get-* checks.
(tramp-get-remote-encoding, tramp-get-remote-decoding)
(tramp-get-local-encoding, tramp-get-local-decoding): Add
`tramp-find-inline-encoding'.

* lisp/tramp-cahe.el (top): Add unload code to
`tramp-cache-unload-hook'.  Remove also
`tramp-dump-connection-properties' from `kill-emacs-hook'.  Remove
"scripts" properties from connection history, they are not
persistent information.

* texi/tramp.texi (Filename completion): Improve wording.
----------------------------
revision 2.483
date: 2006-05-08 14:26:48 -0700;  author: albinus;  state: Exp;  lines: +134 -141;

* lisp/tramp.el (tramp-buffer-name, tramp-debug-buffer-name): Handle
the case when USER is NIL.  This was lost yesterday.
(tramp-set-remote-path): Save `tramp-default-remote-path' as
connection property.
(all): Remove `save-excursion' inside `with-connection-property'.
Will be handled there.

* lisp/tramp-cache.el (tramp-cache-print): Apply `prin1-to-string'.
(with-connection-property): Apply `save-excursion'.
(tramp-dump-connection-properties): Check for empty hash
table. Prettyprint.
(top): Simplify reading from connection history.
----------------------------
revision 2.482
date: 2006-05-07 14:33:48 -0700;  author: albinus;  state: Exp;  lines: +216 -363;

* lisp/tramp.el (top): cl and custom are always required.
(tramp-verbose): Change description of levels.
(tramp-encoding-reads-stdin, tramp-repair-jka-compr)
(tramp-discard-garbage, tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name)
(tramp-find-default-method, tramp-find-default-user)
(tramp-find-default-host): Remove them.
(tramp-methods): Change defcustom into defvar.
(tramp-actions-before-shell, tramp-actions-copy-out-of-band):
Change defcustom into defconst.
(tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-make-temp-file, tramp-make-tramp-temp-file): Move them up.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-handle-make-auto-save-file-name): For Emacs 21, set
`tramp-auto-save-directory' if unset in order to guarantee unique
auto-save file names.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): New defsubst.  Added with
autoload cookie.  Code from `tramp-repair-jka-compr' moved here.
Register `tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-unload-file-name-handlers): Renamed from
`tramp-unload-file-name-handler-alist'.
(tramp-completion-handle-file-name-all-completions): Delete
directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-process-actions, tramp-wait-for-regexp)
(tramp-maybe-open-connection, tramp-send-command)
(tramp-send-command-internal): Trace sent command with level 6.
(tramp-check-for-regexp): Trace echo with level 5.
(tramp-dissect-file-name): Expand method, user, host.
(tramp-find-method, tramp-find-user, tramp-find-host): Add code
for default values.  Remove all calls but the one in
`tramp-dissect-file-name'.
(tramp-bug, tramp-reporter-dump-variable)
(tramp-append-tramp-buffers): Dump also hash variables.

* lisp/tramp-cache.el: Trace cache commands with level 7.  Trace
connection commands with level 8.
(tramp-cache-print): Dump strings as such.
(tramp-persistency-file-name): New defcustom.
(tramp-connection-properties): New defvar.
(tramp-dump-connection-properties): New defun.
(tramp-get-connection-property, tramp-set-connection-property):
Rewritten.
(top): Dump connection history when leaving Emacs.  Read it during
initialization.

* lisp/tramp-efs.el (tramp-efs-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-ftp.el (tramp-ftp-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-smb.el: Trace sent commands with level 6.
(tramp-smb-file-name-p): Don't use tramp-find-* functions.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
(Bug Reports): Level 6 results already in file contents.
(Traces and Profiles): Describe new levels.
----------------------------
revision 2.481
date: 2006-04-16 03:02:56 -0700;  author: albinus;  state: Exp;  lines: +21 -18;

* lisp/tramp.el (tramp-completion-mode): ?\t has event-modifier
'control.  Reported by Matthias Förste
<slashdevslashnull@gmx.net>.

* texi/tramp.texi (History): Tell about commands on remote hosts.
(Filename completion): Remove exception of multi hop methods.
(Frequently Asked Questions): Give example for prompt checking.
----------------------------
revision 2.480
date: 2006-03-19 10:53:05 -0800;  author: albinus;  state: Exp;  lines: +76 -31;

* lisp/tramp.el (tramp-remote-path): Add `tramp-default-remote-path' as
first item.  Remove items which are usually returned by "getconf
PATH".  Extend custom parameters accordingly.
(tramp-set-remote-path): Apply "getconf PATH" in order to get
default directories.  Suggested by Kevin Rodgers <ihs_4664@yahoo.com>.
Remove patameters VAR and DIRLIST.
(tramp-post-connection): Set remote PATH variable as first action.
(tramp-handle-call-process): Add "</dev/null" when INFILE is nil.

* lisp/tramp-util.el (tramp-grep-setup): New defun.

* texi/tramp.texi (Remote Programs): Introduce `tramp-default-remote-path'.
----------------------------
revision 2.479
date: 2006-03-08 23:01:18 -0800;  author: albinus;  state: Exp;  lines: +24 -18;

* lisp/tramp.el (tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-write-region, tramp-touch)
(tramp-call-local-coding-command): Local `call-process' and
`start-process' must be applied with a local `default-directory'.
----------------------------
revision 2.478
date: 2006-03-07 22:10:08 -0800;  author: albinus;  state: Exp;  lines: +3 -2;

* lisp/tramp.el (tramp-pre-connection): The buffer must be erased.
Reported by Heike C. Zimmerer <hcz@hczim.de>.
----------------------------
revision 2.477
date: 2006-03-05 04:54:13 -0800;  author: albinus;  state: Exp;  lines: +9 -15;

* lisp/tramp.el (tramp-debug-message): Don't filter for
`tramp-warning', it doesn't exist.
(tramp-touch): Raise a warning only if it fails.  It isn't worth
an error.
----------------------------
revision 2.476
date: 2006-02-27 12:53:09 -0800;  author: albinus;  state: Exp;  lines: +70 -17;

* lisp/tramp.el (tramp-echo-mark, tramp-echoed-echo-mark-regexp): New
defconst.
(tramp-check-for-regexp): New defun.
(tramp-wait-for-regexp): Apply it.
(tramp-open-connection-setup-interactive-shell): Check for echo
suppression on remote side.
(tramp-send-command, tramp-send-command-internal): Add
`tramp-echo-mark' to the command if needed.
(tramp-send-command-and-check): Take a more precise regexp for
exit status check.
----------------------------
revision 2.475
date: 2006-02-20 12:36:45 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-maybe-open-connection): Fix typo in calling
`tramp-wait-for-output'.
----------------------------
revision 2.474
date: 2006-02-12 12:48:01 -0800;  author: albinus;  state: Exp;  lines: +4 -3;

* lisp/tramp.el (tramp-maybe-open-connection): Do not wait for
output from a dead connection.
----------------------------
revision 2.473
date: 2006-02-07 13:00:47 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-error): Add a fmt-string to the call of
`tramp-message-for-buffer'.
----------------------------
revision 2.472
date: 2006-01-30 13:06:49 -0800;  author: albinus;  state: Exp;  lines: +3 -3;

* lisp/tramp.el (tramp-unload-tramp): Don't try to unload tramp-util.

* lisp/tramp-smb.el (tramp-smb-wait-for-output): Wait always for the
prompt.  If it returns earlier (when detecting an error message),
the rest of the output will merge accidently with the output of
the next command.  Reported by M Jared Finder <jared@hpalace.com>.
----------------------------
revision 2.471
date: 2006-01-27 14:38:56 -0800;  author: albinus;  state: Exp;  lines: +2 -1;

* lisp/tramp.el (tramp-handle-call-process): All excursions must be
saved correctly.
----------------------------
revision 2.470
date: 2006-01-27 14:29:02 -0800;  author: albinus;  state: Exp;  lines: +102 -40;

Add code for unloading Tramp.

* lisp/tramp-vc.el (vc-user-login-name): Wrap defadvice with a test for
`process-file', in order to let it work for older Emacsen too.
----------------------------
revision 2.469
date: 2005-12-11 07:27:31 -0800;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.468
date: 2005-12-11 07:24:20 -0800;  author: albinus;  state: Exp;  lines: +138 -148;

Version 2.1.5 released.

* configure.ac: Bump version.

* INSTALL: Point to Posix environments for installation under MS
Windows.

* lisp/tramp.el (tramp-remote-path): Beautify "/usr/xpg4/bin".  Clarify
docstring.
(tramp-handle-expand-file-name): Remove double slash.
(tramp-set-remote-path): It is sufficient to check for
`file-directory-p'.
(tramp-find-file-exists-command): Remove unnecessary message.
(tramp-check-ls-command, tramp-check-ls-commands)
(tramp-find-ls-command, tramp-find-id-command): Remove functions.
Code is moved to corresponding `tramp-get-*' functions.
(tramp-get-*): Work in connection buffer because local
`tramp-remote-path'. Insert code from above when necessary.
(tramp-bug): Add `tramp-default-host', `tramp-default-user',
`tramp-default-user-alist'.
(tramp-append-tramp-buffers): Add local variables for all Tramp
buffers.
----------------------------
revision 2.467
date: 2005-12-02 14:16:36 -0800;  author: albinus;  state: Exp;  lines: +99 -71;

* INSTALL, configure.ac: We depend on GNU texinfo 4.6.

* lisp/tramp.el (tramp-verbose): Document level 7.
(tramp-send-command-and-check): Clean up tramp_exit_status from
buffer.
(tramp-handle-file-local-copy, tramp-send-command-and-read):
Remove cleaning of tramp_exit_status.
(tramp-handle-write-region): Make cksum check more robust.
(tramp-remote-path): Add "/usr/xpg4/bin/".  On Solaris, there are
the POSIX programs.
(tramp-find-executable): IGNORE-TILDE is optional now.  New
parameter IGNORE-PATH.  Adapt callees.
(tramp-set-remote-path): Return list of existing directories.
(tramp-post-connection): Make `tramp-remote-path' buffer local.
Set it to list of existing directories.
(tramp-find-id-command, tramp-get-remote-id ): New defun.
(tramp-get-remote-uid, tramp-get-remote-gid): Use them.

* texi/tramp.texi (Frequently Asked Questions): Example how to set
`file-precious-flag' buffer local.

* texi/test.texi: Expand check for Texinfo 4.6 feature.
----------------------------
revision 2.466
date: 2005-11-29 14:24:39 -0800;  author: albinus;  state: Exp;  lines: +139 -109;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* lisp/tramp.el (tramp-do-copy-or-rename-file-via-buffer)
(tramp-handle-file-local-copy, tramp-handle-write-region):
Generate always a new temp buffer. Kill it finally.
(tramp-handle-unhandled-file-name-directory): Take home directory
on remote host.
(tramp-handle-write-region): When `file-precious-flag' is set,
check also the checksums (in case of inline methods).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.

* texi/tramp.texi (Remote processes): Explain gud.el integration in
more detail.
(Frequently Asked Questions): Recommend `file-precious-flag' when
`tramp-chunksize' is set.
----------------------------
revision 2.465
date: 2005-11-27 12:32:41 -0800;  author: albinus;  state: Exp;  lines: +1 -9;

* lisp/tramp.el (tramp-file-name-handler-alist): Remove
`dired-call-process' again.  Not necessary, now that `tramp-util'
is required.
(tramp-handle-dired-call-process): Removed.
(tramp-handle-process-file): Call just `call-process'.

* lisp/tramp-util.el (file-remote-p): Make it available (Emacs 21), or
advice it (XEmacs 21).
(compilation-mode-hook, tramp-gud-file-name): Use `file-remote-p'.
(tramp-gud-file-name-handler): Removed.  It was a wrong approach.
(tramp-gud-massage-args): New defun.
(tramp-gud-setup): Rewritten.  It is called now after loading
gud.el.
(tramp-gud-perldb-massage-args): Removed. Replaced by a more
general approach in `tramp-gud-setup'.
----------------------------
revision 2.464
date: 2005-11-23 13:48:53 -0800;  author: albinus;  state: Exp;  lines: +36 -28;

* lisp/tramp.el (top): Require `tramp-util'.
(tramp-make-tramp-temp-file): New defsubst.
(tramp-handle-call-process): Call it.
(tramp-find-foreign-file-name-handler): Test also for stringp.
(tramp-set-auto-save): Simplify test.  It is done in
`tramp-find-foreign-file-name-handler'.
(tramp-exists-file-name-handler): Protect it with
`condition-case'.

* lisp/tramp-util.el (tramp-advice-start-process)
(tramp-advice-call-process, gud-perldb-massage-args): Replace test
with `tramp-tramp-file-p' by `tramp-sh-file-name-handler'.  It
does not work with other file name handlers.
(tramp-gud-file-name-handler, tramp-gud-setup): New defuns.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Rewritten.
(tramp-vc-file-owner): Replace test with `tramp-tramp-file-p' by
`tramp-sh-file-name-handler'.  It does not work with other file
name handlers.
----------------------------
revision 2.463
date: 2005-11-20 14:16:40 -0800;  author: albinus;  state: Exp;  lines: +119 -220;

* lisp/tramp.el (tramp-send-command-and-read): New defun.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-perl)
(tramp-handle-directory-files-and-attributes-with-stat)
(tramp-get-remote-stat, tramp-get-remote-uid)
(tramp-get-remote-gid): Apply it.
(tramp-handle-insert-directory): Remove unnecessary comments.
(tramp-point-at-eol): Removed. All callees replaced by
`tramp-line-end-position'.
(tramp-barf-unless-okay): Don't pop up Tramp buffer in case of
error.
(tramp-get-ls-command, tramp-get-test-command)
(tramp-get-test-nt-command, tramp-get-file-exists-command)
(tramp-get-remote-ln, tramp-get-remote-perl)
(tramp-get-remote-stat)
(tramp-get-remote-uid, tramp-get-remote-gid): Apply
`with-connection-property'.
(tramp-get-connection-property, tramp-set-connection-property):
Move to tramp-cache.el.

* lisp/tramp-cache.el:
(tramp-get-connection-property, tramp-set-connection-property):
Moved from tramp.el.  Tramp messages added.
(with-connection-property): New macro.

* lisp/tramp-smb.el (tramp-smb-read-file-entry): `tramp-point-at-eol'
replaced by `tramp-line-end-position'.

* lisp/tramp-vc.el (tramp-handle-vc-user-login-name): Removed.
(tramp-vc-user-login-name): Rewritten.

* texi/tramp.texi (Remote File Ownership): Replace `user-full-name' by
`user-login-name'.
(Traces and Profiles): Add trace level 7.
----------------------------
revision 2.462
date: 2005-11-16 15:09:56 -0800;  author: albinus;  state: Exp;  lines: +59 -41;

* lisp/tramp.el (tramp-default-user-alist): Simplify default value.
(tramp-handle-file-attributes): Apply `expand-file-name'.
(tramp-handle-file-newer-than-file-p)
(tramp-handle-add-name-to-file, tramp-do-copy-or-rename-file):
Call of `tramp-error' must be more robust.
(tramp-touch): When there is no Tramp file, we cannot call
`tramp-error'.
(tramp-wait-for-regexp, tramp-wait-for-output): Remove unnecessary
parameter in `tramp-error' call.
(tramp-get-remote-uid, tramp-get-remote-gid): New parameter
ID-FORMAT.  Adapt callees.

* lisp/tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
(tramp-vc-simple-command, tramp-vc-workfile-unchanged-p)
(vc-checkout): Removed, including corresponding defadvices.
(tramp-file-owner): Removed.  Defadvice `vc-file-owner' changed
with code left.
----------------------------
revision 2.461
date: 2005-11-12 15:19:05 -0800;  author: albinus;  state: Exp;  lines: +35 -5;

* lisp/tramp.el (tramp-handle-file-attributes-with-ls): Return t as
9. attribute.  It doesn't matter, because it will be converted
later on.
(tramp-handle-file-ownership-preserved-p): Rewritten.  The old
implementation was just heuristic.
(tramp-convert-file-attributes): Set file's gid change bit.
(tramp-get-remote-uid, tramp-get-remote-gid): New defuns.
----------------------------
revision 2.460
date: 2005-11-09 15:01:22 -0800;  author: albinus;  state: Exp;  lines: +283 -182;

* lisp/tramp.el (tramp-remote-process-environment): New defcustom.
(tramp-file-name-handler-alist): Add `dired-call-process'.
(tramp-handle-dired-call-process ): New defun.
(tramp-debug-message): Extend regexp for backtrace.
(tramp-message): Apply level specific prefixes.
(tramp-error): New defsubst.  Replace all calls of `message',
`signal' and `error' with corresponding Tramp message functions.
(tramp-handle-file-truename): Apply `tramp-equal-remote'.
(tramp-handle-expand-file-name): Use "~root" for tilde expansion
in case of su(do)? methods.  The home directory of the local user
will be taken else.
(tramp-handle-start-process): Use narrowing for protecting buffer
contents.
(tramp-file-name-handler): Remove signal handling.  Not necessary,
because `tramp-error' handles it now.
(tramp-buffer-name, tramp-debug-buffer-name): Handle the case USER
is nil.
(tramp-outline-level): Change formula in order to handle level 0.
(tramp-set-remote-path): Add debug message.
(tramp-enter-password): Don't erase the buffer, not necessary.
(tramp-open-connection-setup-interactive-shell): Don't (un)set
explicitely "TERM", "HISTFILE", "HISTSIZE" "MAIL" "MAILCHECK"
"MAILPATH" "CDPATH" "LC_TIME".  Set
`tramp-remote-process-environment' instead of.
(tramp-barf-unless-okay): Remove SUBSHELL (always nil) and SIGNAL
(always 'file-error).  Change all callees.
(tramp-send-string): Apply `delete-region' instead of
`erase-buffer'.  Necessary because of narrowing.

* lisp/tramp-smb.el (all) Replace all calls of `message', `signal' and
`error' with corresponding Tramp message functions.

* lisp/tramp-util.el (tramp-advice-gud-perldb-massage-args): New
defadvice.

* texi/tramp.texi (Remote processes): Improve doc.
----------------------------
revision 2.459
date: 2005-11-06 12:40:18 -0800;  author: albinus;  state: Exp;  lines: +140 -180;

* lisp/tramp.el (tramp-file-name-handler-alist): Remove `shell-command.
(tramp-handle-start-process, tramp-handle-call-process): Apply
`save-excursion'.
(tramp-handle-shell-command): Removed.
(tramp-file-name-for-operation): Add `dired-call-process'. It IS a
file name handler primitive.
(tramp-wait-for-regexp): Take the message string from right
buffer.
(tramp-post-connection): Remove code for checking encoding
commands.  It is also in `tramp-find-inline-encoding'.
(tramp-find-inline-encoding): Check for connection properties.  By
this, the commands won't be executed again for new connection
buffers.
(tramp-maybe-open-connection): Apply `tramp-send-command' instead
of `tramp-send-string'.  No changed functionality, but better
traces.

* lisp/tramp-util.el (top): Don't require "compile".  Add handlers for
`compilation-mode-hook' and `gud-mode-hook'.
(tramp-advice-start-process, tramp-advice-call-process): Call the
handlers with `apply'.
(tramp-gud-file-name): New defun.
(tramp-compilation-parse-errors-filename-function): Removed.  It
wasn't such a good idea.

* texi/tramp.texi (Remote processes): New section.  Replaces
`Compilation'.
----------------------------
revision 2.458
date: 2005-11-05 13:11:35 -0800;  author: albinus;  state: Exp;  lines: +5 -2;

* lisp/tramp.el (tramp-action-out-of-band): Handle scp message
"Permission denied".

* lisp/tramp-util.el (tramp-compilation-parse-errors-filename-function):
New defun.  Assigned to `compilation-parse-errors-filename-function'.
----------------------------
revision 2.457
date: 2005-11-04 13:18:01 -0800;  author: albinus;  state: Exp;  lines: +67 -61;

* lisp/tramp.el (tramp-default-user): Set to nil.  Otherwise, it would
overwrite setttings for ssh.  Reported by Richard Edgar
<rge21@pas.rochester.edu>.
(tramp-default-user-alist): Add value for rsh and telnet and
alike.
(tramp-handle-file-newer-than-file-p)
(tramp-handle-add-name-to-file, tramp-do-copy-or-rename-file)
(tramp-run-test2 ): Apply `tramp-equal-remote'.
(tramp-equal-remote): Improve docstring.
(tramp-handle-call-process): Continue implementation.

* lisp/tramp-util.el (tramp-advice-start-process)
(tramp-advice-call-process): Check whether to apply.
----------------------------
revision 2.456
date: 2005-11-01 14:28:56 -0800;  author: albinus;  state: Exp;  lines: +93 -37;

* lisp/tramp.el (tramp-handle-call-process): Improve handling of INFILE
and DESTINATION.
(tramp-handle-file-remote-p): Return string instead of struct.
Expand to default values.
(tramp-equal-remote): New defun.
----------------------------
revision 2.455
date: 2005-10-30 14:34:55 -0800;  author: albinus;  state: Exp;  lines: +232 -261;

* lisp/tramp.el: Global change to make access to connection buffer more
robust.  Don't trust that it is always current buffer; don't
expect it is writable.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add `start-process' and `call-process'.  Remove
`dired-call-process'.
(tramp-handle-start-process, tramp-handle-call-process)
(tramp-get-connection-buffer, tramp-get-connection-process): New
defuns.
(tramp-handle-dired-call-process, tramp-async-proc): Removed.
(tramp-handle-shell-command, tramp-handle-process-file): Rewritten
completely.
(tramp-wait-for-output): New arg PROC.
(tramp-get-connection-property, tramp-set-connection-property):
Don't call `tramp-maybe-open-connection'.  There might be
recursions otherwise.
(tramp-handle-expand-file-name): Use
`tramp-temporary-file-directory' instead of "/".
(tramp-maybe-open-connection): Set PS1 to "$ ".  Otherwise, a
local shell prompt could hurt.  Reported by Romain Francoise
<romain@orebokech.com>.
(tramp-chunksize): Escape parentheses in docstring starting at
beginning of line.  Fontification is messed up when
`open-paren-in-column-0-is-defun-start' set to t.  Reported by
John Paul Wallington <jpw@pobox.com>.

* lisp/tramp-cache.el (tramp-cache-setup): Reset `tramp-cache-data'
only when it doesn't exist yet.  Otherwise, it would be cleaned
every new asynchronous process.

* lisp/tramp-util.el: Deactivate key mappings for `tramp-minor-mode'.
(tramp-advice-start-process, tramp-advice-call-process): New
defadvices.
(tramp-compile, tramp-recompile): Removed.
----------------------------
revision 2.454
date: 2005-10-23 04:48:04 -0700;  author: albinus;  state: Exp;  lines: +13 -9;

* configure.ac: Bump version (to 2.1.5-pre).

* Makefile.in (clean): Cleanup also subdirectory test.
(MANIFEST): Exclude tramp2 and .cvsignore.

* lisp/tramp.el (tramp-let-maybe): Add `edebug-form-spec' property.
(tramp-handle-expand-file-name): Bind `default-directory' locally
to "/" in order to avoid problems with UNC shares or Cygwin
mounts.
----------------------------
revision 2.453
date: 2005-10-17 12:44:43 -0700;  author: albinus;  state: Exp;  lines: +70 -56;

* tramp.el (tramp-completion-mode): New defvar.  Used in
`tramp-completion-mode' for checking if we are in completion mode.
(tramp-completion-handle-file-name-all-completions): Reorder code
in order to complete for file names only in case there are no
method/user/host completions.  This is necessary for cooperation
with ido.  Reported by Kim F. Storm <storm@cua.dk>.
----------------------------
revision 2.452
date: 2005-10-16 04:51:37 -0700;  author: albinus;  state: Exp;  lines: +6 -3;

* lisp/tramp.el (tramp-perl-directory-files-and-attributes): Add error
handling.
(tramp-handle-directory-files-and-attributes-with-perl): Handle
perl error msg.
----------------------------
revision 2.451
date: 2005-10-16 03:29:09 -0700;  author: albinus;  state: Exp;  lines: +3 -3;

* lisp/tramp.el (tramp-enter-password): `tramp-password-end-of-line'
must be taken from `tramp-current-hop-*'.
----------------------------
revision 2.450
date: 2005-10-12 23:57:41 -0700;  author: albinus;  state: Exp;  lines: +75 -37;

* lisp/tramp.el (tramp-debug-message, tramp-message-for-buffer): Write
message only if connection buffer exists.  Otherwise, method, user
and host are not set yet.
(tramp-handle-directory-files-and-attributes-with-perl)
(tramp-handle-directory-files-and-attributes-with-stat): New
defuns.
(tramp-handle-directory-files-and-attributes): Use them.
----------------------------
revision 2.449
date: 2005-10-12 13:49:29 -0700;  author: albinus;  state: Exp;  lines: +101 -106;

* lisp/tramp.el (top): Try to simplify XEmacs byte-compiler
pacification.
(tramp-verbose): Finish doc string.  New default value is 3.
(all): Apply new verbosity levels.
(tramp-get-debug-buffer): Remove definition of outline faces.  The
default values are good enough.
(tramp-bug): Explain setting of `tramp-verbose'.

* lisp/tramp-cache.el (all): Apply new verbosity levels.

* lisp/tramp-smb.el (top): Try to simplify XEmacs byte-compiler
pacification.
(all): Apply new verbosity levels.

* lisp/tramp-vc.el (top): Try to simplify XEmacs byte-compiler
pacification.

* texi/tramp.texi (Bug Reports, Traces and Profiles): Explain setting
of `tramp-verbose'.

* texi/trampinst.texi (Installation parameters): Try it now with @w{}.
----------------------------
revision 2.448
date: 2005-10-11 14:58:47 -0700;  author: albinus;  state: Exp;  lines: +23 -6;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rearrange
substitutions that they are accepted with older shell versions.

* Makefile.XEmacs (REQUIRES): Remove fsf-compat, add
sh-script (for executable-find).

* lisp/tramp.el: Require `timer-funcs' instead of `timer' if in
XEmacs.
(tramp-verbose): Start rewriting the doc string.  Not
finished yet.
(tramp-handle-delete-file, tramp-handle-insert-file-contents)
(tramp-sh-file-name-handler): Signals expect a list as last
parameter.
(tramp-file-name-handler): Handle signals in order to trace them
in the debug buffer.

* lisp/tramp-smb.el (tramp-smb-handle-directory-files): Rewritten in
order to profit from caching results.
(tramp-smb-handle-file-name-all-completions): `localname' must be
expanded by `file-name-as-directory'.
----------------------------
revision 2.447
date: 2005-10-10 14:07:48 -0700;  author: albinus;  state: Exp;  lines: +15 -16;

* lisp/tramp.el (tramp-handle-delete-directory)
(tramp-handle-dired-recursive-delete-directory): Apply
`tramp-cache-flush-directory'.
(tramp-handle-insert-directory): Apply `tramp-cache-flush-file'.

* lisp/tramp-cache.el: Autoload the needed functions from tramp.el.
(tramp-cache-flush-directory, tramp-cache-before-revert-function):
New defuns.
(top): Add `tramp-cache-before-revert-function' to
`before-revert-hook'.  Deactivate all Tramp messages for
performance reasons.

* lisp/tramp-smb.el (tramp-smb-handle-delete-directory): Apply
`tramp-cache-flush-directory'.
(tramp-smb-handle-insert-directory): Apply
`tramp-cache-flush-file'.
(tramp-smb-handle-directory-files): Local file must be handled as
directory, otherwise the listing is senseless.

* texi/trampinst.texi (Installation parameters): Don't use @tie{}, it
isn't defined in older texinfo versions.
----------------------------
revision 2.446
date: 2005-10-09 12:43:34 -0700;  author: albinus;  state: Exp;  lines: +99 -132;

* INSTALL: Provide working options for installing on MS Windows.

* lisp/tramp.el (tramp-completion-without-shell-p): Removed.  Not
needed anymore.
(tramp-md5-function): Fix typo in error message.
(tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-handle-file-name-all-completions): Rewritten in order to
profit from caching results.
(tramp-handle-file-name-completion): Removed unnecessary code.

* lisp/tramp-cache.el (with-cache-data): ,@body must be wrapped by
`progn'.  Add `edebug-form-spec' property.

* lisp/tramp-smb.el (tramp-smb-handle-file-name-all-completions):
Rewritten in order to profit from caching results.

* texi/tramp.texi (Dired): Node removed.  There are no limitations on
directory listings anymore.
(Default Method): Fix typo in variable name.
(Filename completion): Remove limitations on directory listings.

* texi/trampinst.texi (Installation parameters): Provide working
options for installing on MS Windows.
----------------------------
revision 2.445
date: 2005-09-21 23:12:36 -0700;  author: albinus;  state: Exp;  lines: +13 -12;

* lisp/tramp.el (tramp-actions-before-shell): Reorder actions.  There
might be a speedup when the next action is recognized immediately.
At least it doesn't hurt.
(tramp-find-executable): "which(1)" doesn't return a correct error
code in some implementations.  Use the number of words it returns
as indication instead of.
(tramp-send-string): Trace all chunk sendings.  It might be huge
for large files, but trace level 10 should be an exception.
Remove the sleep, it's not necessary (and disturbs accept process
output logic on Emacs installations without timeouts, like on my
HP-UX 10.20 desktop).
----------------------------
revision 2.444
date: 2005-09-18 14:06:27 -0700;  author: albinus;  state: Exp;  lines: +65 -56;

* lisp/tramp.el (tramp-login-prompt-regexp): Expand regexp in order to
cover prompts like "login as:".  Reported by Slawomir Nowaczyk
<slawomir.nowaczyk.847@student.lu.se>.
(tramp-debug-message): Remove FACE as parameter.  Not necessary
any longer, we use outline mode now.
(tramp-message, tramp-trace): Change callees.
(tramp-message-for-buffer): It is a defsubst now.
(tramp-get-debug-buffer): Initialize outline mode.
(tramp-outline-level): New defun.
(tramp-insert-with-face): Removed.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): tramp-current-* and
tramp-current-hop-* values should be already expanded.
(tramp-action-login, tramp-read-passwd): Use tramp-current-hop-*.

* texi/tramp.texi (Traces and Profiles): New node.
----------------------------
revision 2.443
date: 2005-09-11 14:17:32 -0700;  author: albinus;  state: Exp;  lines: +175 -135;

* tramp.el (top): Reduce compiler warnings.
(tramp-current-hop-method, tramp-current-hop-user)
(tramp-current-hop-host): New defvars.
(tramp-handle-file-attributes-with-stat): Return floating point
numbers.  Integers did run out of 2**28.
(tramp-do-copy-or-rename-file-out-of-band, tramp-pre-connection)
(tramp-maybe-open-connection): Initialize new defvars.
(tramp-handle-shell-command): Send "tramp_set_exit_status", it
isn't sent any longer during initialization.
(tramp-handle-write-region): Remote decoding command is sent in
one bunch.
(tramp-find-executable): Check first in $PATH with "which"
command.  Directory scan command is sent in one bunch.
(tramp-check-ls-command, tramp-find-ls-command): Debug messages
did go to a wrong debug buffer.
(tramp-action-password, tramp-process-actions): Call
`tramp-enter-password' and `tramp-clear-passwd' with changed
parameters.
(tramp-enter-password, tramp-read-passwd, tramp-clear-passwd):
Change parameter set.  Rewrite.
(tramp-post-connection): Remove unnecessary commands.
(tramp-send-command, tramp-send-string): Move setting of
`tramp-last-cmd-time'.
(tramp-wait-for-output): Correct wrong variable names.
(tramp-get-ls-command): Simplify code.

* tramp-cache.el (tramp-enable-cache): Removed.  Works stable now.
(with-cache-data): Change accordingly.

* tramp-smb.el (top): Require `tramp-cache'.  Reduce compiler
warnings.
(tramp-smb-handle-file-attributes)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-writable-p): Add `with-cache-data'.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-directory)
(tramp-smb-handle-delete-file, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Flush cached data.
(tramp-smb-open-connection) Call `tramp-enter-password' and
`tramp-clear-passwd' with changed parameters.

* tramp-vc.el (top): Reduce compiler warnings.
----------------------------
revision 2.442
date: 2005-09-07 14:43:52 -0700;  author: albinus;  state: Exp;  lines: +3 -1;

* tramp.el (tramp-action-password): Compile the password prompt
from `method', `user' and `host'.  Sometimes it isn't obvious
which password to enter, for example with remote files offered by
recentf.el.  Suggested by Robert Marshall
<robert@chezmarshall.freeserve.co.uk>.
----------------------------
revision 2.441
date: 2005-09-03 15:37:07 -0700;  author: albinus;  state: Exp;  lines: +229 -180;

* lisp/tramp.el (top): Rewrite compiler wrapping for `warnings'.
(tramp-ls-command, tramp-test-groks-nt)
(tramp-test-groks-nt): Remove variables.
(tramp-handle-file-accessible-directory-p): Remove function.
(tramp-file-name-handler-alist): Remove entry for
`file-accessible-directory-p'.  Due to caching it doesn't make
sense to call the test commands explicitely.
(tramp-handle-file-exists-p): Format-string must be given now.
(tramp-handle-file-attributes-with-stat): Don't use hard-coded
"stat" command.
(tramp-handle-file-newer-than-file-p): Simplify call of
`tramp-run-test2' by using `tramp-get-test-nt-command'.
(tramp-handle-file-directory-p): `tramp-run-test' should be
sufficient.
(tramp-handle-file-name-all-completions): Don't use hard-coded
"test" command.
(tramp-handle-make-auto-save-file-name):
`tramp-subst-strs-in-string' should be applied all cases.
(tramp-run-test): Use `with-parsed-tramp-file-name'.
(tramp-run-test2): PROGRAM is replaced by FORMAT-STRING.  SWITCH
not needed anymore.
(tramp-find-file-exists-command): Don't use hard-coded "test" and
"ls" commands.  Work with local file names but remote file names.
(tramp-post-connection): Remove settings for
`tramp-file-exists-command', `tramp-ls-command',
`tramp-test-groks-nt', `tramp-connection-property' "perl",
tramp-connection-property "perl-scripts",
`tramp-connection-property' "ln" and `tramp-connection-property'
"stat".  They are set on-the-fly.
(tramp-convert-file-attributes): Rewrite setting directory
indication bit.
(tramp-get-ls-command, tramp-get-file-exists-command)
(tramp-get-remote-perl, tramp-get-remote-stat):
(tramp-get-remote-ln):  Rewrite.
(tramp-bug): Remove deleted variables.
(tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): Insert special handling for
`last-coding-system-used' again, it still seems to be
necessary (unlike stated before).  Reported by Toshinori Sugita
<sugita@d-pad.co.jp>.

* lisp/tramp-cache.el (top): Rewrite compiler wrapping for
`with-no-warnings.
(tramp-cache-get-file-property): Add new parameter DEFAULT.
(tramp-cache-flush-file): Don't use the message.
(with-cache-data): Applicable for absolute file names only.
----------------------------
revision 2.440
date: 2005-08-31 13:54:43 -0700;  author: albinus;  state: Exp;  lines: +62 -30;

* lisp/tramp.el (tramp-file-name-handler-alist)
(tramp-file-name-for-operation): Add `make-auto-save-file-name'.
(tramp-handle-make-auto-save-file-name): Rename from
`tramp-make-auto-save-file-name'.
(tramp-exists-file-name-handler): New defun.
(tramp-advice-make-auto-save-file-name): Make defadvice only when
`make-auto-save-file-name' is not a magic file name operation.
----------------------------
revision 2.439
date: 2005-08-28 11:56:37 -0700;  author: albinus;  state: Exp;  lines: +208 -131;

* Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/trampcache.el: Removed.  Replaced by tramp-cache.el.

* lisp/tramp-cache.el: New file.  Implementation inspired by work of
Daniel Pittman <daniel@rimspace.net>.

* lisp/tramp.el: Introduce filename caching.  Require `tramp-cache'.
(tramp-syntax): Correct doc string.
(tramp-handle-file-truename, tramp-handle-file-exists-p)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-accessible-directory-p)
(tramp-handle-file-directory-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p): Add `with-cache-data'.
(tramp-handle-file-attributes): Add `with-cache-data'.  Check also
for existence of applicable stat(1) command, which is preferred
over the Perl script.
(tramp-handle-file-attributes-with-stat, tramp-get-remote-stat):
New defuns.
(tramp-handle-set-file-modes, tramp-handle-add-name-to-file)
(tramp-do-copy-or-rename-file, tramp-handle-delete-directory)
(tramp-handle-delete-file, tramp-handle-dired-compress-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-write-region): Flush cashed data.
(tramp-pre-connection): Initialise cache.
(tramp-post-connection): Check for stat(1) command.
(tramp-maybe-open-connection): Optimize code.
(tramp-convert-file-attributes): Handle also attributes returned
by stat.

* test/tramp-time.el: New file.
----------------------------
revision 2.438
date: 2005-08-25 14:23:51 -0700;  author: albinus;  state: Exp;  lines: +7 -2;

* lisp/tramp.el (tramp-password-prompt-regexp): There might be other
words before trailing ":".  Reported by Kurt Steinkraus
<kurt@steinkraus.us>.
(tramp-chunksize): Improve docstring.
(tramp-set-auto-save-file-modes): Octal integer code #o600 breaks
Emacs 20.  Use `tramp-octal-to-decimal' therefore.  Reported by
Christian Joergensen <bugs@razor.dk>.
----------------------------
revision 2.437
date: 2005-08-23 14:21:18 -0700;  author: albinus;  state: Exp;  lines: +40 -18;

* lisp/tramp.el (tramp-chunksize): Improve docstring.
----------------------------
revision 2.436
date: 2005-08-21 14:27:35 -0700;  author: albinus;  state: Exp;  lines: +119 -259;

Rewrite communication functions in order to apply them more transparent.
----------------------------
revision 2.435
date: 2005-08-09 14:34:10 -0700;  author: albinus;  state: Exp;  lines: +4 -5;

* lisp/tramp.el (tramp-make-tramp-file-name): METHOD must not be
prepopulated.
(tramp-bug): Fix variable names.
----------------------------
revision 2.434
date: 2005-08-07 14:33:41 -0700;  author: albinus;  state: Exp;  lines: +42 -68;

* lisp/tramp.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-accept-process-output): New defun.
(tramp-process-one-action, tramp-wait-for-regexp)
(tramp-wait-for-output, tramp-discard-garbage-erase-buffer): Call
it.  Reported by David Howells <dhowells@redhat.com>.
(clear-visited-file-modtime): Defadvice removed.  The check for
unset buffer's modtime does not need to be based on
`tramp-buffer-file-attributes'.  Suggested by RMS.
(tramp-send-command): Simplify.
(tramp-make-tramp-file-name): At least method and host delimeter
must exist.

* lisp/tramp-smb.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-smb-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-smb-wait-for-output): Call `tramp-accept-process-output'.
Simplify trace message.
----------------------------
revision 2.433
date: 2005-08-01 13:58:34 -0700;  author: albinus;  state: Exp;  lines: +23 -16;

Update years in copyright notice.

* lisp/tramp.el (tramp-debug-message): Handle the case, that
`backtrace-frame' returns a lambda expression, or nil.
(tramp-message): Don't use ARGS as format string, it
could contain "%".
(tramp-wait-for-regexp, tramp-wait-for-output): Add a format
string to the call of `tramp-trace'.
(tramp-discard-garbage-erase-buffer): Beautify trace.
----------------------------
revision 2.432
date: 2005-07-31 15:04:06 -0700;  author: albinus;  state: Exp;  lines: +250 -255;

* lisp/tramp.el (tramp-uudecode): Remove shell function frame to make
it fit for `tramp-maybe-send-script'.
(tramp-perl-file-attributes)
(tramp-perl-directory-files-and-attributes): Add Perl call to make
it fit for `tramp-maybe-send-script'. Double "%".
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode): Change it to a defconst.
(tramp-debug-message, tramp-trace): New defsubst.
(tramp-message): Call it.
(tramp-handle-file-local-copy): Call `insert-buffer-substring'
instead of `insert-buffer'.  Compiler warning.
(tramp-maybe-send-perl-script): Rename to
`tramp-maybe-send-script'. Simplify sending the string.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-directory-files-and-attributes): Call it.
(tramp-find-shell): Use `tramp-barf-if-no-shell-prompt' for code
sequence with same logic.
(tramp-wait-for-regexp, tramp-wait-for-output)
(tramp-discard-garbage-erase-buffer)
(tramp-send-command, tramp-send-string): Simplify trace messages.
(tramp-post-connection): Don't send all coding scripts.  This
will be done if necessary only.
(tramp-coding-commands): Split into new defconst
`tramp-local-coding-commands' and `tramp-remote-coding-commands'.
(tramp-find-inline-encoding): Rewrite.  Use new coding constants
in order to send only scripts when needed.
(tramp-bug): Adapt list of variables.
----------------------------
revision 2.431
date: 2005-07-28 15:03:28 -0700;  author: albinus;  state: Exp;  lines: +7 -17;

* lisp/tramp.el (tramp-handle-write-region): Remove unnecessary code.
----------------------------
revision 2.430
date: 2005-07-26 13:10:11 -0700;  author: albinus;  state: Exp;  lines: +3 -29;

* lisp/tramp.el (tramp-user-regexp): Allow "@" as part of user name.
(tramp-last-cmd, tramp-process-echoes)
(tramp-feature-write-region-fix): Remove variables.  They are
mostly not used.
----------------------------
revision 2.429
date: 2005-07-21 14:37:17 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-handle-load): Fix typo in error message.
----------------------------
revision 2.428
date: 2005-07-20 11:54:42 -0700;  author: albinus;  state: Exp;  lines: +5 -6;

* lisp/tramp.el (tramp-completion-handle-expand-file-name): Discard call
of `tramp-drop-volume-letter'.  It is not necessary, and there
have been problems with (expand-file-name "~/.netrc" "/") in
ange-ftp.  Reported by Richard G. Bielawski
<Richard.G.Bielawski@wellsfargo.com>.
----------------------------
revision 2.427
date: 2005-07-17 09:24:28 -0700;  author: albinus;  state: Exp;  lines: +110 -69;

* lisp/tramp.el (tramp-do-copy-or-rename-file-out-of-band): Transfer
message should always be visible.
(tramp-handle-insert-directory, tramp-append-tramp-buffers):
Pacify byte-compiler.
(tramp-bug): Delete non-existing variables from list.  Apply
`tramp-load-report-modules' as pre-hook.  Mask
`tramp-password-prompt-regexp', `tramp-shell-prompt-pattern' and
`shell-prompt-pattern' because of non-7bit characters.  Reported
by Sebastian Luque <sluque@mun.ca>.
(tramp-reporter-dump-variable, tramp-load-report-modules): New
defuns.
----------------------------
revision 2.426
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +4 -18;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.425
date: 2005-06-26 12:45:08 -0700;  author: albinus;  state: Exp;  lines: +5 -4;

* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fourth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in: Adapt email addresses.
----------------------------
revision 2.424
date: 2005-05-01 00:31:48 -0700;  author: albinus;  state: Exp;  lines: +16 -5;

* lisp/tramp.el (tramp-handle-dired-call-process)
(tramp-handle-insert-directory):`insert-buffer' cannot be used
because the contents of the Tramp buffer is changed before
insertion (`expand-file' and alike).
(tramp-handle-insert-directory): If `localname' has an empty
nondirectory name, it must not be quoted.
----------------------------
revision 2.423
date: 2005-04-29 13:44:25 -0700;  author: albinus;  state: Exp;  lines: +2 -1;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set file modes of
`buffer-auto-save-file-name' to ?\600 as fallback solution.
Reported by Ferenc Wagner <wferi@tba.elte.hu>.
----------------------------
revision 2.422
date: 2005-04-16 08:52:24 -0700;  author: albinus;  state: Exp;  lines: +19 -3;

* lisp/tramp.el (tramp-pre-connection): Add parameter CHUNKSIZE.  Make
local variable `tramp-chunksize'.  Change callees.
(tramp-open-connection-setup-interactive-shell): Check remote host
for buggy `send-process-string' implementation.  Set
`tramp-chunksize' if found.  Reported by Michael Kifer
<kifer@cs.sunysb.edu> (and a lot of other people all the years).
----------------------------
revision 2.421
date: 2005-04-13 13:08:18 -0700;  author: albinus;  state: Exp;  lines: +12 -2;

* lisp/tramp.el (tramp-handle-shell-command): `insert-buffer' cannot be
used because the contents of the Tramp buffer is changed before
insertion (`expand-file' and alike).  Reported by Frédéric Bothamy
<frederic.bothamy@free.fr>.
----------------------------
revision 2.420
date: 2005-04-03 12:14:12 -0700;  author: albinus;  state: Exp;  lines: +7 -3;
*** empty log message ***
----------------------------
revision 2.419
date: 2005-04-03 09:50:25 -0700;  author: albinus;  state: Exp;  lines: +26 -15;

* lisp/tramp.el (tramp-set-auto-save): Actions should be done for Tramp
file name handler only.  Ange-FTP has its own auto-save mechanism.
Reported by Richard G. Bielawski <Richard.G.Bielawski@wellsfargo.com>.
(tramp-bug): Remove obsolete variable.
(tramp-append-tramp-buffers): Rewrite partly.  More suitable check
for presence of `mml-mode'.  Make it running for older Emacsen as
well.
----------------------------
revision 2.418
date: 2005-02-27 06:36:23 -0800;  author: albinus;  state: Exp;  lines: +130 -63;

* lisp/tramp.el (tramp-append-tramp-buffers): New defun.
(tramp-bug): Apply `tramp-append-tramp-buffers' as post-hook.
Catch `dont-send' signal.
----------------------------
revision 2.417
date: 2005-02-20 08:11:49 -0800;  author: albinus;  state: Exp;  lines: +7 -4;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set always
permissions, because there might be an old auto-saved file
belonging to another original file.  This could be a security
threat.

* texi/trampver.texi.in: Replace "Emacs" by "GNU Emacs".

* texi/tramp.texi: Replace "Emacs" by "GNU Emacs".
(Default Method): Offer shortened syntax for "su" and "sudo"
methods.
----------------------------
revision 2.416
date: 2005-02-12 03:19:00 -0800;  author: albinus;  state: Exp;  lines: +34 -39;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.415
date: 2005-02-05 15:02:41 -0800;  author: albinus;  state: Exp;  lines: +4 -8;

* INSTALL: Explain in more detail configure parameters
"with-xemacs", "--with-lispdir" and "--infodir".  Change bug
report address to [tramp-devel@gnu.org].

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rewrite
completely in order to apply better default values.

* configure.ac: Reorder substitution of installation directories
wrt changes in aclocal.m4.

* lisp/tramp.el (all): Change all addresses to .gnu.org.

* texi/Makefile.in (datadir): New variable.

* texi/trampinst.texi (Installation parameters): Explain in more detail
configure parameters "with-xemacs", "--with-lispdir" and
"--infodir".
----------------------------
revision 2.414
date: 2005-01-16 06:18:59 -0800;  author: albinus;  state: Exp;  lines: +1 -7;

Version 2.1.3 released.
----------------------------
revision 2.413
date: 2005-01-15 13:45:31 -0800;  author: albinus;  state: Exp;  lines: +50 -14;

* lisp/tramp.el (tramp-operation-not-permitted-regexp) New defcustom,
catching keep-date problems in cp/scp operations.
(tramp-handle-copy-file): Don't call `set-file-modes'
unconditionally.  Specialized functions should know better what is
necessary.  This improves performance a little bit, and the
functions could catch errors with `cp -p' and `scp -p'.
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-out-of-band): Call `set-file-modes'
when appropriate.
(tramp-do-copy-or-rename-file-directly): Mask `cp -p' error.  Call
`set-file-modes' when appropriate.
(tramp-action-out-of-band): Mask `scp -p' error.
Reported by Isak Johnsson <isak@hypergene.com>
----------------------------
revision 2.412
date: 2005-01-05 13:20:52 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el: Fix copyright years.

* lisp/tramp-smb.el: Fix copyright years.  Adapt author address.

* lisp/tramp-util.el: Fix copyright years.  Adapt author address.
(tramp-minor-mode): Mode must toggle.

* texi/tramp.texi: Fix copyright years.
----------------------------
revision 2.411
date: 2005-01-04 15:19:03 -0800;  author: albinus;  state: Exp;  lines: +11 -3;

* lisp/tramp.el (tramp-maybe-open-connection): If the local host does
not run a UNIX derivate, the local shell cannot handle command
sequences separated with ";".  Reported by Takashi Tsunakawa
<tuna@is.s.u-tokyo.ac.jp>.

* lisp/tramp-smb.el (tramp-smb-open-connection): Check existence of
`tramp-smb-program'.

* lisp/tramp-util.el (tramp-compile, tramp-recompile): Enable
`tramp-minor-mode' in buffer "*Compilation*".

* texi/tramp.texi (Compilation): Give a note that remote compilation is
performed synchronously only, for the time being.
----------------------------
revision 2.410
date: 2004-12-25 13:20:30 -0800;  author: albinus;  state: Exp;  lines: +8 -2;

* lisp/tramp.el (tramp-get-buffer, tramp-get-debug-buffer): Discard the
undo list of both Tramp buffer and debug buffer.  Reported by
Joakim Verona <joakim@verona.se>
----------------------------
revision 2.409
date: 2004-12-23 16:31:48 -0800;  author: albinus;  state: Exp;  lines: +4 -2;

* lisp/tramp.el (tramp-file-name-for-operation): Mark `shell-command'
as magic for Emacs only.
(tramp-wait-for-output): Fix error in deleting region.  From Kai
Grossjohann <kai.grossjohann@gmx.net>.

* lisp/tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
(tramp-vc-simple-command): Call `tramp-handle-shell-command' but
`shell-command', because it isn't magic in XEmacs.  Reported by
Adrian Aichner <adrian@xemacs.org>.
----------------------------
revision 2.408
date: 2004-12-05 08:55:01 -0800;  author: albinus;  state: Exp;  lines: +4 -4;


* lisp/tramp.el (tramp-maybe-send-perl-script): Change order of
parameters wrt Tramp convention.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-directory-files-and-attributes): Apply it.
----------------------------
revision 2.407
date: 2004-12-05 04:51:12 -0800;  author: albinus;  state: Exp;  lines: +293 -167;

Sync with Emacs CVS

* lisp/tramp.el (tramp-handle-directory-files-and-attributes): New function.
(tramp-perl-directory-files-and-attributes): New constant.
(tramp-file-name-handler-alist): Delete file-directory-files, add
directory-files-and-attributes.
(tramp-perl-file-attributes): Surround uid and gid by double
quotes. Change parameter id-format from nonnumeric.
(tramp-convert-file-attributes): New function.
(tramp-handle-file-attributes): Use it.
(tramp-maybe-send-perl-script): New function.
(tramp-handle-file-attributes-with-perl): Use it. Don't convert
file mode. Change parameter id-format from nonnumeric.
(tramp-handle-file-attributes-with-ls): Change parameter id-format
from nonnumeric.
(tramp-post-connection): Don't send tramp-perl-file-attributes
script. Reset connection property "perl-scripts".
(tramp-handle-insert-directory): Run real handler when ls-lisp is
in use.
----------------------------
revision 2.406
date: 2004-12-04 09:51:53 -0800;  author: albinus;  state: Exp;  lines: +9 -2;

* lisp/tramp.el (tramp-do-copy-or-rename-file-out-of-band): Check for
existence of `copy-program'.  Reported by Zack Weinberg
<zack@codesourcery.com>.
(tramp group): Add :version.
----------------------------
revision 2.405
date: 2004-11-06 12:33:07 -0800;  author: kai;  state: Exp;  lines: +3 -2;
(tramp-uudecode): Mention `uudecode -o /dev/stdout'.
----------------------------
revision 2.404
date: 2004-11-05 06:01:56 -0800;  author: kai;  state: Exp;  lines: +3 -1;
(tramp-coding-commands): Additionally try "uudecode -o
/dev/stdout" before trying "uudecode -o -".  Suggested by Han Boetes.

(tramp-handle-file-newer-than-file-p): Reverse logic.  From Andrew
J. Korty <ajk@iu.edu>.
----------------------------
revision 2.403
date: 2004-10-23 12:53:38 -0700;  author: kai;  state: Exp;  lines: +15 -0;
* tramp-vc.el (vc-do-command): Do not advise it if
process-file is fboundp.
* tramp.el (tramp-file-name-handler-alist): Add entry for
process-file.
(tramp-handle-process-file): New function.
(tramp-file-name-for-operation): Support process-file.
----------------------------
revision 2.402
date: 2004-10-17 09:33:30 -0700;  author: albinus;  state: Exp;  lines: +2 -3;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.401
date: 2004-10-10 09:48:44 -0700;  author: albinus;  state: Exp;  lines: +27 -1;


* Makefile.in (savannah): Don't apply "configure" for Japanese
manual, but call "make -C texi" with proper variable settings.

* aclocal.m4 (AC_EMACS_INFO): Write default values in help output
for "--with-xemacs" and "--with-emacs".
(AC_PATH_LISPDIR): Write default value in help output for
"--with-lispdir".
(all): Unify capitalization for help output.

* configure.ac: Bump version (to 2.1.3-pre).

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.
(savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.400
date: 2004-10-10 05:34:21 -0700;  author: kai;  state: Exp;  lines: +5 -1;
(tramp-coding-commands): New entry, uses built-in uu
encoding provided by Perl.  Contributed by Slaven Rezic.  (2
lines.)
----------------------------
revision 2.399
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +25 -29;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 2.398
date: 2004-09-08 14:55:51 -0700;  author: albinus;  state: Exp;  lines: +1 -0;


* lisp/tramp.el (tramp-perl-decode): Fixed an error in Perl
implementation.  $pending must be cleared every loop.  Reported by
Benjamin Place <benjaminplace@sprintmail.com>
----------------------------
revision 2.397
date: 2004-09-05 11:26:32 -0700;  author: albinus;  state: Exp;  lines: +8 -0;


* lisp/tramp.el (top): Undefine "/" in `read-file-name-map' when syntax
is 'url.  Otherwise, XEmacs would break the syntax with
`minibuffer-electric-separator'.

* text/tramp.texi (Alternative Syntax): New section.
----------------------------
revision 2.396
date: 2004-08-30 22:26:23 -0700;  author: albinus;  state: Exp;  lines: +4 -2;


* lisp/tramp.el (tramp-maybe-open-connection): The echo command
encloses every single word with '\"'.  Otherwise, the message
could be detected during connection already, and Tramp raises a
false error.
----------------------------
revision 2.395
date: 2004-08-29 07:07:33 -0700;  author: albinus;  state: Exp;  lines: +228 -161;


Adding URL syntax.  Open problems:
- Masking "/~".
- Masking "://" in XEmacs.
- FTP/EFS changes.
- Documentation.
----------------------------
revision 2.394
date: 2004-08-29 06:03:35 -0700;  author: kai;  state: Exp;  lines: +6 -1;
(tramp-handle-verify-visited-file-modtime): New docstring.  From
Luc Teirlinck.
----------------------------
revision 2.393
date: 2004-08-15 07:00:47 -0700;  author: albinus;  state: Exp;  lines: +14 -9;


* lisp/tramp.el (tramp-handle-rename-file): Apply t for KEEP-DATE
when calling `tramp-do-copy-or-rename-file'.
(tramp-do-copy-or-rename-file-out-of-band): If KEEP-DATE is true,
and the method doesn't provide a keep-date argument, call
`set-file-times' after copying.
----------------------------
revision 2.392
date: 2004-08-14 12:20:14 -0700;  author: albinus;  state: Exp;  lines: +11 -14;


* configure.ac: Bump version (to 2.1.2-pre).  Set
TRAMP_EMACS_MERGE_VERSION (to 2.0.44).

* lisp/tramp.el (tramp-methods): "sftp" has nil
`tramp-copy-keep-date-arg'.
(tramp-do-copy-or-rename-file-out-of-band): Handle it.
----------------------------
revision 2.391
date: 2004-08-09 13:20:38 -0700;  author: albinus;  state: Exp;  lines: +20 -4;


Version 2.1.1 released.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-methods): "sftp", "psftp": new external methods.
"plink", "plink1" and "pscp": parameter for port specification is
"-P".

* texi/tramp.texi (Inline methods): Correct wrong (outdated) index
"km".  Say, that the port specification is also available for
"plink".
(External transfer methods): Add "sftp" and "psftp" methods.
----------------------------
revision 2.390
date: 2004-08-06 13:12:26 -0700;  author: albinus;  state: Exp;  lines: +2 -1;


* lisp/tramp.el (tramp-post-connection): Quote $1 and $2 of shell
function "tramp_file_attributes".  Otherwise, file names
containing spaces are misinterpreted.  Reported by Magnus Henoch
<mange@freemail.hu>.
----------------------------
revision 2.389
date: 2004-08-05 13:09:12 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


* lisp/tramp.el (tramp-handle-file-truename): FILENAME must be expanded
first.  Otherwise, parameters like "/ssh:deego@gnufans.net:~" will
return obscure results.  Reported by D. Goel <deego@gnufans.org>.
----------------------------
revision 2.388
date: 2004-08-03 14:20:10 -0700;  author: albinus;  state: Exp;  lines: +7 -3;


* lisp/tramp.el (tramp-methods): Change custom definition of log-args
to the new syntax.
(tramp-wrong-passwd-regexp): Add "Tramp connection closed" string.
(tramp-maybe-open-connection): Add "echo \"Tramp connection
closed\"" to connection command.  By this, we will see easily when
a connection has failed.
----------------------------
revision 2.387
date: 2004-08-02 14:07:19 -0700;  author: albinus;  state: Exp;  lines: +86 -52;


* lisp/tramp.el (tramp-methods): Add "(-p" "%p)" in login-args where
applicable for the port kludge.  Arrange login-args as list of
lists, in order to discard a sublist when the corresponding
parameter is not set (like user name, port number).  Adapt
docstring.
(tramp-maybe-open-connection): Change evaluation of login-args
according the the changes above.
(tramp-make-tramp-file-name): Use "%l" as placeholder for the
localname part.  "%p" is used for port numbers now, and we want to
avoid headaches.

* texi/tramp.texi (all): Exchange nil by @code{nil} where not done
already.
(Inline methods): Say explicitely, that the host name part is
ignored for the su and sudo methods.
(Default User): Give an example for user name mismatch if the
connection method has an own configuration. Show solution.
----------------------------
revision 2.386
date: 2004-08-01 07:36:24 -0700;  author: albinus;  state: Exp;  lines: +103 -33;


* lisp/tramp.el (tramp-default-method-alist)
(tramp-default-proxies-alist): Correcting doc string.
(tramp-default-user, tramp-default-user-alist)
(tramp-default-host): New defcustom.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-expand-file-name, tramp-action-login)
(tramp-buffer-name, tramp-debug-buffer-name)
(tramp-maybe-open-connection)
(tramp-read-passwd, tramp-clear-passwd): Apply `tramp-find-user'
and `tramp-find-host'.
(tramp-find-default-method): Allow nil regexps.
(tramp-find-default-user, tramp-find-user)
(tramp-find-default-host, tramp-find-host): New defun.

* lisp/tramp-smb.el (top): Add empty (anonymous) user to
`tramp-default-user-alist' for smb method.

* texi/tramp.texi (Default User, Default Host): New chapters.
----------------------------
revision 2.385
date: 2004-07-31 12:04:00 -0700;  author: albinus;  state: Exp;  lines: +16 -0;


* lisp/tramp.el (tramp-maybe-open-connection): Foreign and out-of-band
methods are not supported for multi-hops.
----------------------------
revision 2.384
date: 2004-07-30 12:52:03 -0700;  author: albinus;  state: Exp;  lines: +15 -12;


* INSTALL: Precise supported (X)Emacs versions.

* aclocal.m4 (AC_EMACS_INFO): Add check for proper (X)Emacs
version.

* configure.ac: Precise comments.

* lisp/trampver.el.in: Check for (X)Emacs version.  Code is from macro
AC_EMACS_INFO of aclocal.m4.

* lisp/tramp.el (top): Remove (X)Emacs version check.
(tramp-maybe-open-connection): Handle NIL values in
`tramp-default-proxies-alist'.

* texi/trampver.texi.in: Remove `postfixmultihop'.  Rename
`postfixsinglehop' into `postfixhop'.

* texi/tramp.texi (top): Rename `postfixsinglehop' into `postfixhop'.
(Multi-hop Methods, Multi-hop filename syntax): Removed, including
al pointers to.
(Multi-hops): New chapter.
(History of Tramp): Proxy hosts mentioned.
(Frequently Asked Questions): Precise supported (X)Emacs
versions.
----------------------------
revision 2.383
date: 2004-07-27 23:01:13 -0700;  author: albinus;  state: Exp;  lines: +7 -6;


* lisp/tramp.el (tramp-maybe-open-connection): Set
`coding-system-for-read'.  It was lost last patch.

* lisp/tramp-smb.el (all): Don't load "cl-seq", Emacs 19 is out of
scope.  Remove `with-parsed-tramp-file-name' kludge.  Debugging
spec set in tramp.el is sufficient.  Remove multi-method parameter
from `tramp-message-for-buffer' calls.
(tramp-smb-open-connection): Set `coding-system-for-read' to nil.
Check for Emacs 20 is not necessary any longer.

* lisp/tramp-ftp.el (top): Don't load "cl-seq", Emacs 19 is out of
scope.
----------------------------
revision 2.382
date: 2004-07-26 12:36:34 -0700;  author: albinus;  state: Exp;  lines: +657 -1447;


Removing multi-hop methods.  Incorporating proxies.
----------------------------
revision 2.381
date: 2004-07-24 10:56:07 -0700;  author: albinus;  state: Exp;  lines: +64 -56;


* lisp/tramp.el (tramp-handle-set-visited-file-modtime): If `time-list'
is not nil, don't apply the whole body.  If the file doesn't
exists, set modtime to '(-1 65535).
(tramp-handle-verify-visited-file-modtime): Check whether a file
is visiting the buffer, or the buffer has no recorded last
modification time.  Return t in case the visiting file doesn't
exists.
(tramp-handle-write-region): `set-visited-file-modtime' must be
called always when `visit' is t or a string.
All changes suggested by Luc Teirlinck <teirllm@auburn.edu>.
----------------------------
revision 2.380
date: 2004-07-22 13:26:29 -0700;  author: albinus;  state: Exp;  lines: +2 -1;


* lisp/tramp.el (tramp-handle-write-region): `set-visited-file-modtime'
must be called always if `visit' is non-nil. Emacs Lisp
documentation is not clear in this point, `write-region'
implementation clarifies.
----------------------------
revision 2.379
date: 2004-07-17 08:36:49 -0700;  author: kai;  state: Exp;  lines: +0 -3;
(tramp-handle-verify-visited-file-modtime): Remove
outdated comment.
----------------------------
revision 2.378
date: 2004-07-17 08:25:13 -0700;  author: kai;  state: Exp;  lines: +8 -1;
2004-07-14  Luc Teirlinck  <teirllm@auburn.edu>

	* tramp.el (tramp-handle-verify-visited-file-modtime):
	`visited-file-modtime' now returns a list of two integers, instead
	of a cons.
----------------------------
revision 2.377
date: 2004-07-04 04:43:23 -0700;  author: albinus;  state: Exp;  lines: +5 -4;


* lisp/tramp.el (tramp-open-connection-rsh): If a port is given, the
Tramp buffer name must still contain the port number.  Otherwise,
we have two Tramp buffers, with all the confusion.  Reported by
Myron Selby <myron@xytech.com> and Rolf Dubitzky
<Dubitzky@physi.uni-heidelberg.de>.
----------------------------
revision 2.376
date: 2004-06-26 07:58:22 -0700;  author: kai;  state: Exp;  lines: +8 -1;
(tramp-handle-file-remote-p): New implementation to
agree with new return value of `file-remote-p'.
----------------------------
revision 2.375
date: 2004-06-13 08:37:09 -0700;  author: albinus;  state: Exp;  lines: +3 -0;


* lisp/tramp.el (tramp-handle-write-region): Set current buffer.
If connection wasn't open, `file-modes' has changed it accidently.
Reported by David Kastrup <dak@gnu.org>.
----------------------------
revision 2.374
date: 2004-06-13 08:08:50 -0700;  author: albinus;  state: Exp;  lines: +39 -38;

* lisp/tramp.el (tramp-handle-find-backup-file-name): `copy-tree' is
available since Emacs 21.4 only (XEmacs has it).  Implementation
rewritten in order to avoid this function.
----------------------------
revision 2.373
date: 2004-06-08 15:46:00 -0700;  author: albinus;  state: Exp;  lines: +11 -10;


* tramp.el (tramp-sh-file-name-handler): Leaving this function,
`tramp-locked' must be reset to the same value as during entering.
----------------------------
revision 2.372
date: 2004-06-06 03:07:53 -0700;  author: albinus;  state: Exp;  lines: +6 -11;


* tramp.el (tramp-enter-password, tramp-read-passwd): New
arguments USER and HOST.
(tramp-action-password, tramp-multi-action-password): Apply it.

* tramp-smb.el (tramp-smb-open-connection): Apply USER and HOST to
`tramp-enter-passwd'.
----------------------------
revision 2.371
date: 2004-06-03 14:21:49 -0700;  author: albinus;  state: Exp;  lines: +19 -20;


* configure.ac (FTP_UPLOAD): New variable, indicating which ftp
upload program to savannah has to be used.  Kai and Michael differ
in their preferences ...

* Makefile.in (FTP_UPLOAD): New variable.  Value depending on
@FTP_UPLOAD@.
(savannah): Use it.

* lisp/tramp.el (all): Code cleanup.  Change all `tramp-handle-xxx'
calls to respective `xxx` calls.

* lisp/tramp-vc.el (all): Code cleanup.  Change all `tramp-handle-xxx'
calls to respective `xxx` calls.
----------------------------
revision 2.370
date: 2004-06-01 13:36:20 -0700;  author: albinus;  state: Exp;  lines: +8 -3;


* .cvsignore: Add *.diff.

* configure.ac (TRAMP_CLEAN_FILES): Add *.diff.

* lisp/tramp.el (tramp-process-alive-regexp): Precise doc string.
(tramp-multi-action-process-alive): New defun.
(tramp-multi-actions): Use it.
----------------------------
revision 2.369
date: 2004-05-30 14:25:04 -0700;  author: kai;  state: Exp;  lines: +9 -1;
(tramp-handle-file-local-copy-hook): New hook.
(tramp-handle-file-local-copy): Run it.
(tramp-handle-write-region-hook): New hook.
(tramp-handle-write-region): Run it.
----------------------------
revision 2.368
date: 2004-05-30 13:44:34 -0700;  author: kai;  state: Exp;  lines: +10 -10;
(tramp-let-maybe): Move to an earlier spot in the file.  Reverse
args of `get'.
----------------------------
revision 2.367
date: 2004-05-30 03:40:49 -0700;  author: kai;  state: Exp;  lines: +40 -5;
(tramp-locked, tramp-locker): New variables for
implementing a global lock.
(tramp-sh-file-name-handler): Use them to implement the global
lock.
----------------------------
revision 2.366
date: 2004-05-29 13:52:55 -0700;  author: albinus;  state: Exp;  lines: +15 -23;


* Makefile.in (.SILENT, .PHONY): Add lisp target.
(info): Depends on $(CONFIG_FILES).

* lisp/tramp.el (tramp-file-name-handler-alist)
(tramp-file-name-for-operation): Add entry for `file-remote-p'.
(tramp-handle-file-remote-p): New defun.
(top): Remove setting of `file-remote-p'.  Don't set
`inhibit-file-name-handlers' and `inhibit-file-name-operation'.

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`file-remote-p'.
----------------------------
revision 2.365
date: 2004-05-28 08:28:56 -0700;  author: kai;  state: Exp;  lines: +38 -18;
* tramp-smb.el (tramp-smb-open-connection): Use
tramp-set-process-query-on-exit-flag compat function.

* tramp.el (tramp-set-process-query-on-exit-flag): New compat function.
(tramp-open-connection-multi, tramp-open-connection-su)
(tramp-open-connection-rsh, tramp-open-connection-telnet)
(tramp-do-copy-or-rename-file-out-of-band): Use it.
(tramp-let-maybe): New macro, let-binds a variable only if it
isn't obsolete.
(tramp-check-ls-commands, tramp-handle-expand-file-name)
(tramp-handle-file-truename): Use it.
----------------------------
revision 2.364
date: 2004-05-23 12:27:29 -0700;  author: albinus;  state: Exp;  lines: +11 -2;


* lisp/tramp.el (top): Add `tramp-completion-file-name-handler' to
`inhibit-file-name-handlers', and `file-local-copy' to
`inhibit-file-name-operation'.  Needed for proper working of
`file-remote-p'.
----------------------------
revision 2.363
date: 2004-05-20 00:36:14 -0700;  author: albinus;  state: Exp;  lines: +14 -10;


* lisp/tramp.el (tramp-out-of-band-prompt-regexp): Renamed to
`tramp-process-alive-regexp', because its usage is widen.
(tramp-actions-copy-out-of-band): Apply it.
(tramp-actions-before-shell, tramp-multi-actions): Add
`tramp-action-process-alive' action.
(tramp-action-process-alive): New defun.
(tramp-process-one-action, tramp-process-one-multi-action): Remove
check for process status.  Will be performed by the respective
action now.  Reported by Ted Stern <stern+tramp-devel@cray.com>.
----------------------------
revision 2.362
date: 2004-05-16 04:44:55 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-completion-file-name-regexp-unified): Avoid
matching filenames starting with "/:" -- those are reserved for
file-name-non-special.
----------------------------
revision 2.361
date: 2004-05-13 13:31:23 -0700;  author: albinus;  state: Exp;  lines: +12 -0;

* lisp/tramp.el (tramp-process-one-action)
(tramp-process-one-multi-action, tramp-wait-for-regexp)
(tramp-wait-for-output): Throw away if process has died. Reported
by Luc Teirlinck <teirllm@dms.auburn.edu>.
----------------------------
revision 2.360
date: 2004-05-12 00:25:42 -0700;  author: kai;  state: Exp;  lines: +6 -4;
(tramp-initial-commands): Add "unset HISTORY"; this is
not really necessary but seems to keep the shell history smaller
in some cases.  Suggested by Luc Teirlinck.
(tramp-open-connection-setup-interactive-shell): Export variables
HISTFILE and HISTSIZE, do not just set them.  From Luc Teirlinck.
----------------------------
revision 2.359
date: 2004-05-01 13:04:22 -0700;  author: albinus;  state: Exp;  lines: +55 -35;
branches:  2.359.2;


Suppress byte-compiler warnings were possible.

* lisp/tramp.el (toplevel): Call of `byte-compiler-options' pacified.
`directory-sep-char' set to not obsolete (we need it for XEmacs).
Define `last-coding-system-used' in XEmacs case.  Pacify
declarations of `backup-directory-alist',
`bkup-backup-directory-info' and
`tramp-save-PC-expand-many-files'.
(tramp-feature-write-region-fix): Pacify funcall of
`find-operation-coding-system'.
(tramp-line-end-position): Pacify funcall of `line-end-position'
and `point-at-eol'.
(tramp-handle-dired-compress-file): Pacify funcall of
`dired-remove-file'.
(tramp-handle-find-backup-file-name): Pacify access to
`tramp-backup-directory-alist' and
`tramp-bkup-backup-directory-info'.
(tramp-touch): `error' needs just one parameter if there is no
string substitution.
(tramp-bug): `tramp-backup-directory-alist',
`tramp-bkup-backup-directory-info', `backup-directory-alist' and
`bkup-backup-directory-info' must be quoted as symbols.

* lisp/tramp-efs.el (toplevel): Suppress byte-compiler warnings.

* lisp/tramp-smb.el (toplevel): Suppress byte-compiler warnings.
Define `last-coding-system-used' in XEmacs case.

* lisp/tramp-vc.el (toplevel): Suppress byte-compiler warnings.
(tramp-vc-do-command-new): Pacify funcall of `vc-setup-buffer' and
`vc-exec-after'.
(tramp-vc-workfile-unchanged-p): Pacify funcall of
`vc-default-workfile-unchanged-p'.
(tramp-handle-vc-user-login-name): Pacify funcall of
`subr-arity'. `let' must be `let*' because of `file'.
----------------------------
revision 2.358
date: 2004-04-29 01:39:23 -0700;  author: kai;  state: Exp;  lines: +8 -0;
(tramp-bug): Add backup-directory-alist and
bkup-backup-directory-info to bug reports, with Tramp
counterparts.
----------------------------
revision 2.357
date: 2004-04-29 01:35:24 -0700;  author: kai;  state: Exp;  lines: +4 -1;
(tramp-read-passwd): Construct the key for the
password cache in a way that works for multi methods, too.
----------------------------
revision 2.356
date: 2004-04-25 08:41:10 -0700;  author: albinus;  state: Exp;  lines: +85 -8;


* lisp/tramp.el (tramp-backup-directory-alist)
(tramp-bkup-backup-directory-info): New defcustoms.
(tramp-file-name-handler-alist): Add entry for
`find-backup-file-name'.
(tramp-handle-find-backup-file-name): New function.  Implements
Tramp's find-backup-file-name.

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`find-backup-file-name'.

* texi/tramp.el (Auto-save and Backup): Explain exploitation of new
variables `tramp-backup-directory-alist' and
`tramp-bkup-backup-directory-info'.
----------------------------
revision 2.355
date: 2004-04-09 12:05:02 -0700;  author: albinus;  state: Exp;  lines: +14 -8;


* lisp/tramp.el (tramp-do-copy-or-rename-file-via-buffer): Set
permissions of the new file.
(tramp-handle-file-local-copy, tramp-handle-write-region): The
permissions of the temporary file are set if filename exists.
Reported by Ted Stern <stern@cray.com>.
----------------------------
revision 2.354
date: 2004-04-07 00:12:30 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-open-connection-setup-interactive-shell):
Revert weird EOL setting for first stty command (change from
2004-03-30).
----------------------------
revision 2.353
date: 2004-04-02 00:38:35 -0800;  author: albinus;  state: Exp;  lines: +6 -6;


* lisp/tramp.el (tramp-handle-insert-directory): Properly quote file
name also if not full-directory-p.  Handle wildcard case.
Reported by Andreas Schwab <schwab@suse.de>.
----------------------------
revision 2.352
date: 2004-03-30 07:37:22 -0800;  author: kai;  state: Exp;  lines: +5 -1;
(tramp-open-connection-setup-interactive-shell):
First stty command needs weird EOL setting -- it is for setting
EOL setting...  Due to the weird EOL, we might receive garbage
from the remote end which b0rks the next command.  So we add a
placeholder command for this.
----------------------------
revision 2.351
date: 2004-03-28 07:25:05 -0800;  author: kai;  state: Exp;  lines: +16 -0;
(tramp-process-initial-commands): Avoid liveness check
on shell -- we know that it must be alive since we're opening a
connection at this moment.
(tramp-last-cmd): New internal variable.
(tramp-process-echoes): New tunable.
(tramp-send-command): Set tramp-last-cmd.
(tramp-wait-for-output): Delete echo, if applicable.
----------------------------
revision 2.350
date: 2004-03-28 07:06:57 -0800;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-process-initial-commands): Avoid liveness check
on shell -- we know that it must be alive since we're opening a
connection at this moment.
----------------------------
revision 2.349
date: 2004-03-21 12:55:48 -0800;  author: albinus;  state: Exp;  lines: +0 -8;


* lisp/tramp.el (TODO): Remove items done.

* texi/tramp.texi (Auto-save and Backup): Make file name example
(X)Emacs neutral. In case of XEmacs, `bkup-backup-directory-info'
and `auto-save-directory' must be used.
----------------------------
revision 2.348
date: 2004-03-21 12:11:21 -0800;  author: albinus;  state: Exp;  lines: +18 -12;


* lisp/tramp.el (tramp-touch): FILE can be a local file, too.
----------------------------
revision 2.347
date: 2004-03-13 10:56:01 -0800;  author: kai;  state: Exp;  lines: +5 -4;
(tramp-do-copy-or-rename-file-via-buffer): Renamed
from tramp-do-copy-or-rename-via-buffer (without `file'), to make
it consistent with the other tramp-do-* functions.
(tramp-do-copy-or-rename-file): Calls adjusted.
----------------------------
revision 2.346
date: 2004-03-07 22:11:15 -0800;  author: albinus;  state: Exp;  lines: +71 -36;


* lisp/tramp.el (tramp-out-of-band-prompt-regexp)
(tramp-actions-copy-out-of-band): New defcustoms.
(tramp-do-copy-or-rename-file-out-of-band): Asynchronous process
used instead of a synchronous one.  Allows password entering.
(tramp-action-out-of-band): New defun.
(tramp-open-connection-rsh, tramp-method-out-of-band-p): Remove
restriction with password from doc string.
(tramp-bug): Add variables `tramp-terminal-prompt-regexp',
`tramp-out-of-band-prompt-regexp',
`tramp-actions-copy-out-of-band', `password-cache' and
`password-cache-expiry'.
(toplevel): Remove todo item wrt ssh-agent.  Obsolete due to
password caching.

* texi/tramp.texi (Overview, Connection types)
(External transfer methods, Default Method)
(Windows setup hints): Remove restriction of password entering
with external methods.
----------------------------
revision 2.345
date: 2004-03-01 23:24:45 -0800;  author: kai;  state: Exp;  lines: +8 -4;
(tramp-completion-mode, tramp-md5-function): Use
symbol-function to invoke functions only known on some Emacs
flavors.  This avoids byte-compiler warnings.  Reported by Kevin
Scaldeferri <kevin@scaldeferri.com>.
----------------------------
revision 2.344
date: 2004-02-29 05:29:08 -0800;  author: albinus;  state: Exp;  lines: +30 -4;


* lisp/tramp.el (top-level): Require password.el if visible.  Should be
mandatory once No Gnus has found its way into (X)Emacs.
(tramp-read-passwd): Invoke `password-read' if available,
`read-passwd' otherwise. `ange-ftp-read-passwd' isn't used as
fallback any longer.
(tramp-clear-passwd): New function.
(tramp-process-actions, tramp-process-multi-actions): Clear
password cache if login has failed.

* lisp/tramp-smb.el (tramp-smb-open-connection): Clear password cache
if login has failed.

* texi/tramp.texi (all): Use "@value{emacs-name}" everywhere where it
is intended (some accidents of last fix corrected).
(Password caching): New node.
(External transfer methods): Refer to password caching for "smb"
method.

* contrib/password.el: New file.  Taken from No Gnus.
----------------------------
revision 2.343
date: 2004-02-23 01:40:43 -0800;  author: kai;  state: Exp;  lines: +2 -1;
(tramp-handle-write-region): Say which function is used
when encoding.
----------------------------
revision 2.342
date: 2004-02-15 15:27:26 -0800;  author: albinus;  state: Exp;  lines: +65 -24;


* lisp/tramp.el (tramp-async-proc): New variable.
(tramp-handle-shell-command): Adding asynchronous processes.  They
are far from being perfect, but it works at least for
`find-grep-dired' and `find-name-dired' in Emacs 21.4.
----------------------------
revision 2.341
date: 2004-02-09 13:26:55 -0800;  author: albinus;  state: Exp;  lines: +15 -14;


* lisp/tramp.el (tramp-handle-dired-compress-file): Added XEmacs
implementation.
(tramp-handle-dired-compress-file-for-emacs)
(tramp-handle-dired-compress-file-for-xemacs): Not needed
anymore.  Implementation not so different as expected.
----------------------------
revision 2.340
date: 2004-02-08 13:17:20 -0800;  author: albinus;  state: Exp;  lines: +53 -1;


* lisp/tramp.el (tramp-file-name-handler-alist): Add
`dired-compress-file' entry.
(tramp-handle-dired-compress-file)
(tramp-handle-dired-compress-file-for-emacs)
(tramp-handle-dired-compress-file-for-xemacs): New functions.
`tramp-handle-dired-compress-file-for-xemacs' not implemented yet.
----------------------------
revision 2.339
date: 2004-01-22 14:56:46 -0800;  author: albinus;  state: Exp;  lines: +127 -53;


* lisp/tramp.el (tramp-completion-function-alist-ssh): Add
`tramp-parse-shostkeys' and `tramp-parse-sknownhosts'.
(tramp-completion-function-alist): It's a defvar now, because we
want to apply the optimized `tramp-set-completion-function'
instead of a static list.
(tramp-set-completion-function): Implementation tuned.  Avoid
double entries, and entries where the function or the
file/directory doesn' exist.
(tramp-parse-shostkeys, tramp-parse-sknownhosts): New functions
for SSH2.

* texi/tramp.texi (Customizing Completion): Explain new functions
`tramp-parse-shostkeys' and `tramp-parse-sknownhosts'.
----------------------------
revision 2.338
date: 2004-01-18 14:41:19 -0800;  author: albinus;  state: Exp;  lines: +193 -140;


* lisp/tramp.el (tramp-do-copy-or-rename-file): Handle out-of-band
methods.  Call `tramp-do-copy-or-rename-file-out-of-band' this
case.
(tramp-do-copy-or-rename-file-out-of-band): Renamed from
`tramp-do-copy-or-rename-file-one-local', because it handles also
the case both files use the same out-of-band method.
Implementation added.
(tramp-handle-file-local-copy, tramp-handle-write-region):
Out-of-band handling removed.  `copy-file' called instead, which
calls `tramp-do-copy-or-rename-file-out-of-band'.
(tramp-action-password): Check for out-of-band method removed.
This function is used for 'login-program.
(tramp-post-connection): Use `tramp-method-out-of-band-p' when
appropriate.
----------------------------
revision 2.337
date: 2004-01-18 11:28:32 -0800;  author: kai;  state: Exp;  lines: +24 -3;
(tramp-do-copy-or-rename-via-buffer): Handle KEEP-DATE
arg, if possible.
(tramp-touch): Set last-modified time of a remote file.
----------------------------
revision 2.336
date: 2004-01-08 09:06:39 -0800;  author: albinus;  state: Exp;  lines: +2 -2;


* lisp/tramp.el (tramp-buffer-name): Buffer name must contain the user
if exists.  Reported by Adrian Phillips <a.phillips@met.no>.
----------------------------
revision 2.335
date: 2004-01-06 13:48:50 -0800;  author: albinus;  state: Exp;  lines: +1 -1;


* lisp/tramp.el (tramp-completion-mode): Make test for XEmacs
explicitely.  `event-to-character' can exists in Emacs packages
too.  Reported by Matt Swift <swift@alum.mit.edu>.
----------------------------
revision 2.334
date: 2004-01-03 08:47:47 -0800;  author: kai;  state: Exp;  lines: +17 -5;
(tramp-process-connection-type): New variable.
(tramp-maybe-open-connection): Use it.
----------------------------
revision 2.333
date: 2004-01-03 07:18:25 -0800;  author: kai;  state: Exp;  lines: +3 -3;
(tramp-handle-file-local-copy)
(tramp-handle-write-region, tramp-open-connection-rsh): Variable
name typo.  Small change.  From Patrick Tullmann
<tullmann@flux.utah.edu>.
----------------------------
revision 2.332
date: 2003-12-27 13:23:48 -0800;  author: uid67418;  state: Exp;  lines: +11 -1;


* lisp/tramp.el (tramp-completion-mode): Add XEmacs input
events. Until now it was not necessary, because they are
evaluated in case of unified filenames only.

* lisp/tramp-efs.el (top): Add all XEmacs download sites to
`tramp-default-method-alist'.  The existing settings should be
sufficient already, but it's better to make it explicitely.
(tramp-efs-method-given, tramp-efs-method-regexp): New variables.
(tramp-efs-path-regexp, tramp-efs-path-format-string)
(tramp-efs-path-format-without-user)
(tramp-efs-path-user-at-host-format)
(tramp-efs-path-host-format, tramp-efs-path-root-regexp): Changed
to a function.  Their values depend on the existence of the method
tag in filename.
(tramp-efs-file-name-handler): Check first whether the method tag
is given in a filename.
(tramp-efs-file-name-p): A syntax check must be performed first,
otherwise `tramp-dissect-file-name' returns with an error.

* lisp/tramp-ftp.el (Commentary): Removing pointer to EFS.  It has its
own module.

* lisp/tramp-smb.el (top): Setting default value in
`tramp-default-method-alist' corrected.  Order of USER and HOST
have been wrong.  Nobody claimed for months ...

* texi/tramp.texi (Issues): Describe how to use unified filenames with
XEmacs.
----------------------------
revision 2.331
date: 2003-12-25 08:18:29 -0800;  author: uid67418;  state: Exp;  lines: +3 -2;


	* lisp/tramp.el (tramp-completion-mode) Don't check for 'xemacs
but
	`tramp-unified-filenames'.

	* lisp/tramp-smb.el (tramp-smb-errors): Add
NT_STATUS_WRONG_PASSWORD"
	and "NT_STATUS_NETWORK_ACCESS_DENIED".
	(tramp-smb-maybe-open-connection): Set `process-connection-type'
	to 'pty.  Suggested by Piet van Oostrum <piet@cs.uu.nl>.

	* lisp/tramp-smb.el (tramp-smb-process-running): Removed.  Since
we
	acknowledge the virtual prompt for shares, there's no need for
	distinction of reading shares (process ends afterwards) and
	interactive mode of smblient.
	(tramp-smb-open-connection): Setting process sentinel removed.
	(tramp-smb-wait-for-output): Algorithm simplified, again.  Hope
it
	is more robust, too.

	* lisp/tramp-smb.el (tramp-smb-prompt): Add virtual prompt from
	listing shares, too.
	(tramp-smb-errors): Add "NT_STATUS_ACCOUNT_LOCKED_OUT".
	(tramp-smb-wait-for-output): Optimize algorithm getting pending
	output.  If it was received chunkwise, there have been problems.
	Remove the "prompt not found" error message; it is obvious.

	* lisp/tramp-smb.el (tramp-smb-handle-file-writable-p): Handle
the
case
	of non-existing filename, too.  Reported by Christoph Bauer
	<c_bauer@informatik.uni-kl.de>.
	(tramp-smb-get-file-entries): The directory in question should
	have permissions "drwxrwxrwx".  Just virtual, because we don't
	know the real permissions.  Don't we know?

	* lisp/tramp.texi (Obtaining TRAMP): Change Tramp CVS directory
to
	"-d:ext:anoncvs@savannah.nongnu.org:/cvsroot/tramp" as advised
on
	the Savannah page.
----------------------------
revision 2.330
date: 2003-11-30 09:48:03 -0800;  author: kai;  state: Exp;  lines: +1 -0;
* tramp-ftp.el, tramp-smb.el, tramp-util.el, tramp-uu.el:
* tramp-vc.el, tramp.el, trampver.el.in: Add arch tagline.
----------------------------
revision 2.329
date: 2003-11-25 13:57:50 -0800;  author: albinus;  state: Exp;  lines: +14 -13;

* lisp/tramp.el: Add new optional parameter ID-FORMAT to
`file-attributes'.  Calls of `file-attributes' won't use this
parameter for backward compatibility reasons.
(tramp-perl-file-attributes): Add a new parameter to Perl script
in order to handle uid/gid as strings, if desired.
(tramp-handle-file-truename, tramp-handle-file-symlink-p): Apply
`file-attributes' instead of `tramp-handle-file-attributes' in
order to make the function more general.
(tramp-handle-file-attributes): Replace proprietary optional
parameter NONNUMERIC by the recently (Emacs 21.4) introduced
ID-FORMAT.
(tramp-handle-file-attributes-with-perl): Handle parameter
NONNUMERIC if set. This wasn't done in the past.
(tramp-post-connection): Apply second parameter "$2" if
`tramp-remote-perl' is called.

* lisp/tramp-smb.el (tramp-smb-handle-delete-file): Correct cut'n'waste
error (`filename' instead of `directory').
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-attributes): Add recently (Emacs 21.4)
introduced parameter ID-FORMAT.
(tramp-smb-handle-make-directory-internal): Correct cut'n'waste
error (`directory' instead of `ldir').

* lisp/tramp-vc.el (tramp-handle-vc-user-login-name): Check if
`file-attributes' has a second parameter.  If yes, apply it with
value "'integer".  Otherwise, don't use that parameter (default
is integer format).
----------------------------
revision 2.328
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +1 -0;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 2.327
date: 2003-08-09 07:12:00 -0700;  author: kai;  state: Exp;  lines: +54 -94;
(tramp-get-connection-function, tramp-get-remote-sh)
(tramp-get-login-program, tramp-get-login-args)
(tramp-get-copy-program, tramp-get-copy-args)
(tramp-get-copy-keep-date-arg, tramp-get-password-end-of-line):
Functions removed.  Use `tramp-get-method-parameter' instead.
(tramp-get-method-parameter): New function to retrieve a method
parameter.  This allows for omission of method parameters.
(tramp-handle-file-local-copy, tramp-handle-write-region)
(tramp-find-shell, tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-enter-password)
(tramp-open-connection-setup-interactive-shell)
(tramp-post-connection, tramp-maybe-open-connection)
(tramp-method-out-of-band-p): Use new function
`tramp-get-method-parameter'.
----------------------------
revision 2.326
date: 2003-08-08 09:15:11 -0700;  author: kai;  state: Exp;  lines: +1 -0;
(tramp-multi-connection-function-alist): Add ssht
entry which adds "-e none -t -t" to the list of ssh args.
Suggested by Adrian Aichner.
----------------------------
revision 2.325
date: 2003-07-30 06:34:39 -0700;  author: kai;  state: Exp;  lines: +11 -0;
(tramp-chunksize): Extend docstring.  Suggested by
Charles Curley <charlescurley@charlescurley.com>.
----------------------------
revision 2.324
date: 2003-07-20 06:22:15 -0700;  author: kai;  state: Exp;  lines: +6 -4;
More documentation about plink and tramp-password-end-of-line.
----------------------------
revision 2.323
date: 2003-07-20 06:19:01 -0700;  author: kai;  state: Exp;  lines: +91 -36;
(tramp-default-password-end-of-line): Renamed from
tramp-password-end-of-line.
(tramp-password-end-of-line): New method parameter.
(tramp-get-password-end-of-line): Function to access method
parameter `tramp-password-end-of-line', or variable
`tramp-default-password-end-of-line' (default value).
(tramp-methods): Add entries for new parameter
tramp-password-end-of-line.
(tramp-enter-password): Use new function
`tramp-get-password-end-of-line'.
----------------------------
revision 2.322
date: 2003-07-03 04:51:54 -0700;  author: kai;  state: Exp;  lines: +24 -5;
* tramp.el (tramp-handle-insert-file-contents): Do not
unconditionally inhibit the file operation file-local-copy, only
do that when the inhibit-file-name-operation is currently
insert-file-contents.  This fixes finding remote CVS-controlled
files.  (It would barf on inserting the CVS/Entries file
literally, because the file-local-copy handler wasn't called.)
(tramp-handle-shell-command): Support optional third arg
ERROR-BUFFER.

* tramp-vc.el (vc-workfile-unchanged-p): Add comment.
----------------------------
revision 2.321
date: 2003-06-30 00:31:45 -0700;  author: kai;  state: Exp;  lines: +5 -3;
(tramp-sh-extra-args): Test whether widget type
`alist' is available (instead of testing (featurep 'xemacs)).
----------------------------
revision 2.320
date: 2003-06-27 08:23:14 -0700;  author: kai;  state: Exp;  lines: +3 -1;
(tramp-sh-extra-args): Adapt defcustom type to XEmacs.
----------------------------
revision 2.319
date: 2003-06-24 12:23:09 -0700;  author: kai;  state: Exp;  lines: +1 -0;
(tramp-open-connection-setup-interactive-shell): Erase buffer
before sending "stty -onlcr".  Maybe this leads to just one
prompt on a line.
----------------------------
revision 2.318
date: 2003-06-24 12:16:08 -0700;  author: kai;  state: Exp;  lines: +2 -1;
Add another command to tramp-initial-commands.
----------------------------
revision 2.317
date: 2003-06-24 12:14:54 -0700;  author: kai;  state: Exp;  lines: +51 -13;
(tramp-initial-commands): New variable.
(tramp-process-initial-commands): New function, using the variable.
(tramp-open-connection-setup-interactive-shell): Call the new
function.
(tramp-buffer-name, tramp-debug-buffer-name): Always put the
method into the buffer name, never use nil.  Reported by Hanak
David <dhanak@inf.bme.hu>.
----------------------------
revision 2.316
date: 2003-06-17 02:25:25 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-shell-prompt-pattern): Allow space after escape
sequence.
----------------------------
revision 2.315
date: 2003-06-16 08:45:32 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-shell-prompt-pattern): Allow multiple escape
sequences.

* tramp-uu.el:
* tramp-util.el:
* tramp-efs.el: Use iso-2022-7bit encoding with coding cookie for
XEmacs compatibility.
----------------------------
revision 2.314
date: 2003-06-12 03:32:33 -0700;  author: kai;  state: Exp;  lines: +2 -2;
(tramp-handle-file-local-copy)
(tramp-do-copy-or-rename-via-buffer): Use binary coding system,
instead of no-conversion.  They are the same on Emacs but
different on XEmacs.
----------------------------
revision 2.313
date: 2003-06-12 03:30:05 -0700;  author: kai;  state: Exp;  lines: +4 -2;
(tramp-handle-copy-file): Set file modes of target
file.
----------------------------
revision 2.312
date: 2003-06-09 08:16:59 -0700;  author: kai;  state: Exp;  lines: +13 -0;
(tramp-handle-file-local-copy, tramp-handle-write-region): Add the
"-p" hack.
----------------------------
revision 2.311
date: 2003-06-08 06:58:14 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-foreign-file-name-handler-alist): Add comment about
default value having to come last.
----------------------------
revision 2.310
date: 2003-06-08 05:20:58 -0700;  author: kai;  state: Exp;  lines: +10 -2;
(tramp-handle-insert-file-contents): When calling
`file-local-copy', let-bind `inhibit-file-name-operation'
accordingly.  This makes sure that jka-compr is not called when
`insert-file-contents-literally' is invoked.  From Katsumi Yamaoka
<yamaoka@jpl.org>.
(tramp-do-copy-or-rename-via-buffer): Avoid calling jka-compr
when writing the target file.
----------------------------
revision 2.309
date: 2003-06-08 04:53:07 -0700;  author: kai;  state: Exp;  lines: +16 -6;
(tramp-time-diff): Convert return value of subtract-time to a
number of seconds in a correct manner, by applying float-time or
time-to-seconds.  Also correct compat code accordingly.  The
XEmacs branch for itimer-time-difference didn't need correction,
it returned a float already.  Reported by David D. Smith
<ultrasoul@ultrasoul.com>.
----------------------------
revision 2.308
date: 2003-06-08 04:29:09 -0700;  author: kai;  state: Exp;  lines: +7 -2;
(tramp-find-foreign-file-name-handler): Return after
first match is found.  From Francis Litterio <franl@world.std.com>.
----------------------------
revision 2.307
date: 2003-05-31 13:25:39 -0700;  author: kai;  state: Exp;  lines: +13 -5;
Factor out the `regular' file name handling via a
remote shell of some sort into a specific function.  Intent is to
later put that part of Tramp into a special file, so that the
Tramp `core' is just a dispatcher that dispatches to various
handlers.
(tramp-sh-file-name-handler): New function.
(tramp-foreign-file-name-handler-alist): New default value.  Call
tramp-sh-file-name-handler as default case.
(tramp-file-name-handler): Do not invoke the old remote-shell
handler.
----------------------------
revision 2.306
date: 2003-05-24 15:41:01 -0700;  author: albinus;  state: Exp;  lines: +32 -29;

* Makefile.in (configure): It depends on "aclocal.m4", too.

* aclocal.m4, lisp/Makefile.in, contrib/Makefile.in: Use
`--no-site-file' option for Emacs call, in order to avoid loading of
Tramp in site specific init files.  Reported by Harry Putnam
<reader@newsguy.com>.

* lisp/Makefile.in (.PHONY): New target.
(all): "trampver.el" and "tramp.el" must be handled first due to
dependencies.

* lisp/tramp.el (tramp-completion-function-alist): Add completion
function for "remcp", "remsh" and "plink1".

* texi/tramp.texi (Inline methods): Add methods `remsh' and `plink1'.
(External transfer methods): Add method `remcp'.
(Multi-hop Methods): Add method `remsh'.
----------------------------
revision 2.305
date: 2003-05-24 09:10:40 -0700;  author: kai;  state: Exp;  lines: +6 -1;
* tramp.el (tramp-password-end-of-line): Use "xy" with plink.

* configure.ac: Bump version.

* Makefile.in (cvstag): "cvs tag", not "cvs cvstag".
----------------------------
revision 2.304
date: 2003-05-21 00:53:50 -0700;  author: kai;  state: Exp;  lines: +2 -2;
(tramp-shell-prompt-pattern): Allow ANSI escapes at
end of prompt.  (ANSI escapes elsewhere in the prompt are
recognized properly already.)
----------------------------
revision 2.303
date: 2003-05-18 08:00:47 -0700;  author: kai;  state: Exp;  lines: +8 -0;
(tramp-methods): New method plink1.  Like plink but
pass "-1" to force protocol version 1.
----------------------------
revision 2.302
date: 2003-05-14 11:46:03 -0700;  author: kai;  state: Exp;  lines: +9 -1;
Autoload cookie.
----------------------------
revision 2.301
date: 2003-05-03 13:42:21 -0700;  author: kai;  state: Exp;  lines: +227 -379;
(tramp-methods): Unify tramp-rsh-program,
tramp-telnet-program, tramp-su-program into tramp-login-program.
Likewise with tramp-login-args, tramp-copy-program,
tramp-copy-args, tramp-copy-keep-date-arg.
Users changed.
----------------------------
revision 2.300
date: 2003-05-03 13:14:11 -0700;  author: kai;  state: Exp;  lines: +25 -14;
(tramp-methods): Old entries "rsh" and "rcp"
unconditionally invoke rsh now.  New entries "remsh" and "remcp"
unconditionally invoke remsh now.
(tramp-real-rsh-program): Remove.
----------------------------
revision 2.299
date: 2003-04-27 06:16:00 -0700;  author: kai;  state: Exp;  lines: +6 -1;
(tramp-real-rsh-program): Explain strategy for choosing default value.
----------------------------
revision 2.298
date: 2003-04-25 14:24:18 -0700;  author: albinus;  state: Exp;  lines: +9 -9;

* tramp.el (tramp-real-rsh-program): "remsh" is used on Cray
machines, too.  Suggested by Ted Stern <stern+tramp-devel@cray.com>.
(tramp-methods, tramp-multi-connection-function-alist): The list
must be backquoted, because the value of `tramp-real-rsh-program'
is needed.  No trailing space needed in the password argument of
sudo `tramp-su-args'.  Reported by my friendly supervisor Kai
Großjohann <kai.grossjohann@gmx.net>.
----------------------------
revision 2.297
date: 2003-04-24 14:16:14 -0700;  author: albinus;  state: Exp;  lines: +17 -13;

	* Makefile.in (.PHONY): Add `tags'.
	(distclean) Remove also "autom4te.cache".

	* lisp/tramp.el (tramp-real-rsh-program): New constant.  On
	HP-UX, the "rsh" program is called "remsh".
	(tramp-methods, tramp-multi-connection-function-alist): Apply
	`tramp-real-rsh-program'.  Use "-p Password:\ " for "sudo"
	method, because password prompt might be changed by either passprompt
	option in /etc/sudoers, or SUDO_PROMPT environment variable.
	Suggested by Peter Oliver <peter.oliver@aquila-networks.co.uk>.
----------------------------
revision 2.296
date: 2003-04-18 13:15:25 -0700;  author: kai;  state: Exp;  lines: +58 -84;
(tramp-handle-expand-file-name): Make default method
explicit in file name.
(tramp-unified-filenames): Move to an earlier spot in the file.
(top-level): If tramp-unified-filenames is set and we're running
on XEmacs, load tramp-efs.
(tramp-wait-for-shell-prompt, tramp-barf-if-no-shell-prompt): New
functions, used by tramp-send-command-internal.
(tramp-open-connection-setup-interactive-shell): Simplify using
`tramp-send-command-internal'.
(tramp-send-command-internal): New function.
----------------------------
revision 2.295
date: 2003-04-18 07:59:18 -0700;  author: kai;  state: Exp;  lines: +15 -16;
* tramp-efs.el: New file.

* tramp.el (tramp-handle-expand-file-name): Make default method
explicit in file name.
(tramp-unified-filenames): Move to an earlier spot in the file.
(top-level): If tramp-unified-filenames is set and we're running
on XEmacs, load tramp-efs.
----------------------------
revision 2.294
date: 2003-04-18 05:57:28 -0700;  author: kai;  state: Exp;  lines: +2 -1;
(tramp-handle-expand-file-name): Make default method
explicit in file name.
----------------------------
revision 2.293
date: 2003-04-14 13:12:36 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* aclocal.m4 (AC_EMACS_INFO): Make "emacs" as default if $EMACS
isn't set.  Be more robust this case.

* tramp.el (tramp-handle-file-truename): `sym' shouldn't be quoted.
----------------------------
revision 2.292
date: 2003-04-08 13:48:34 -0700;  author: kai;  state: Exp;  lines: +18 -1;
(tramp-handle-file-symlink-p): If target of symlink is
absolute, return a Tramp filename.  (Ie, return
"/user@host:/target" instead of "/target".)
(tramp-handle-file-truename): Deal with new return value from
`file-symlink-p'.
----------------------------
revision 2.291
date: 2003-04-06 01:53:44 -0800;  author: kai;  state: Exp;  lines: +2 -1;
2003-04-04  Andreas Schwab  <schwab@suse.de>

	* tramp.el (tramp-send-string): Handle empty string.
----------------------------
revision 2.290
date: 2003-04-02 02:31:02 -0800;  author: kai;  state: Exp;  lines: +2 -2;
Change actual encoding of file to match coding cookie.
----------------------------
revision 2.289
date: 2003-04-01 19:36:45 -0800;  author: youngs;  state: Exp;  lines: +1 -1;
2003-04-02  Steve Youngs  <youngs@xemacs.org>

	* tramp.el: Change coding cookie to 'iso-2022-7bit' to get around
	a bug in non-Mule XEmacs 21.5.
----------------------------
revision 2.288
date: 2003-03-30 12:09:35 -0800;  author: kai;  state: Exp;  lines: +27 -14;
(xemacs, emacs): Copy trampver.texi, too.
----------------------------
revision 2.287
date: 2003-03-28 09:29:40 -0800;  author: kai;  state: Exp;  lines: +14 -7;
*** empty log message ***
----------------------------
revision 2.286
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;  lines: +9 -17;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.285
date: 2003-03-02 06:45:00 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* tramp.el (tramp-chunksize): Type can be nil as well.  Reported
by Markus Rost <rost@math.ohio-state.edu>.
----------------------------
revision 2.284
date: 2003-02-28 10:12:29 -0800;  author: kai;  state: Exp;  lines: +2 -2;
* tramp.texi: Bump version.

* tramp.el (tramp-version): Bump.
(tramp-handle-expand-file-name): Protect against short localnames
when comparing with "/../".

* Makefile (VERSION): Bump.
----------------------------
revision 2.283
date: 2003-02-27 09:15:14 -0800;  author: kai;  state: Exp;  lines: +17 -10;
(tramp-handle-expand-file-name): Allow ".." to cross
host boundaries.
----------------------------
revision 2.282
date: 2003-02-20 03:45:25 -0800;  author: kai;  state: Exp;  lines: +4 -3;
(tramp-open-connection-setup-interactive-shell): Unset
$ENV in addition to setting $PS1 when starting the Bourne-ish
shell.  Some sh implementations (eg, bash when called as sh) read
the file named there on startup, which could clobber $PS1.
----------------------------
revision 2.281
date: 2003-02-19 23:53:07 -0800;  author: kai;  state: Exp;  lines: +4 -2;
(tramp-open-connection-setup-interactive-shell): Unset
$ENV in addition to setting $PS1 when starting the Bourne-ish
shell.  For some reason, it seems to help to ensure that the
prompt is really '$ '.
----------------------------
revision 2.280
date: 2003-02-15 16:18:43 -0800;  author: albinus;  state: Exp;  lines: +40 -55;


* tramp-smb.el: Replace term `path' with `localname' unless it is
used for a search path.  In GNU, the word `path' is reserved for
search paths.

* tramp.el (tramp-send-string, tramp-send-region): Removed.
(tramp-send-string): New function.  Takes over the role of the
functions above, in order to have a unique place handling
`tramp-chunksize'.  Same implementation as `tramp-send-region'.
----------------------------
revision 2.279
date: 2003-02-15 10:37:30 -0800;  author: kai;  state: Exp;  lines: +152 -152;
* tramp.texi: Replace word `path' with `localname' where used as
a component of a Tramp file name.  In GNU, the word `path' is
used only for search paths, ie lists of directories.

* tramp-vc.el, tramp.el: Replace term `path' with `localname'
unless it is used for a search path.  In GNU, the word `path' is
reserved for search paths.

* tramp.el (tramp-do-copy-or-rename-file-one-local): New
function.  Not implemented.  Not used.  Should invoke rcp or scp
directly to keep the time.
----------------------------
revision 2.278
date: 2003-02-15 10:12:54 -0800;  author: kai;  state: Exp;  lines: +15 -6;
(tramp-do-copy-or-rename-file-one-local): New
function.  Not implemented.  Not used.  Should invoke rcp or scp
directly to keep the time.
----------------------------
revision 2.277
date: 2003-02-09 11:22:36 -0800;  author: albinus;  state: Exp;  lines: +33 -10;

* tramp.el (tramp-chunksize): It's now a defcustom.  Set to 500 on
systems only known to have a buggy `process-send-string'
implementation.  First black-listed constellation is GNU Emacs/
hpux.
(tramp-send-region): Correct debug message.
(tramp-bug): Add `tramp-chunksize'.
* tramp.texi (Frequently Asked Questions): `tramp-chunksize'
introduced.
----------------------------
revision 2.276
date: 2003-02-05 11:34:18 -0800;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.texi (Installation): In Emacs, use M-x
texinfo-format-buffer RET, not M-x makeinfo-buffer RET.  Reported
by gebser@ameritech.net.

* tramp.el (tramp-send-region): Protect against tramp-chunksize
being nil.

* Makefile (VERSION): Bump.
----------------------------
revision 2.275
date: 2003-02-05 11:31:01 -0800;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-send-region): Protect against tramp-chunksize
being nil.
----------------------------
revision 2.274
date: 2003-02-04 14:37:29 -0800;  author: albinus;  state: Exp;  lines: +9 -3;


* tramp.el (tramp-handle-directory-file-name): Handle the case
PATH is "".
(tramp-completion-handle-file-name-all-completions): Define
`tramp-current-user' locally.  See `tramp-parse-passwd'.
(tramp-parse-passwd): For su-alike methods it would be desirable
to return "root@localhost" as default.  Unfortunately, we have no
information whether any user name has been typed already.  So we
(mis-)use tramp-current-user as indication, assuming it is set in
`tramp-completion-handle-file-name-all-completions'.
(tramp-send-region): Handle the case `tramp-chunksize' is equal
0.  I did it accidently.  Infinite loop ...

* tramp-ftp.el (top-level): eval-after-load "ange-ftp"
'(tramp-disable-ange-ftp).  Suggested by Kai.
(tramp-ftp-file-name-handler): `tramp-disable-ange-ftp' not needed
any longer.

* tramp-smb.el (tramp-smb-file-name-handler-alist): Apply
`tramp-handle-directory-file-name' in order to profit from Kai's
yesterday changes.
----------------------------
revision 2.273
date: 2003-02-03 12:16:47 -0800;  author: kai;  state: Exp;  lines: +27 -10;
(tramp-chunksize): Set default to 500 as workaround
for some ssh connections.
(tramp-handle-directory-file-name): New implementation.  Not sure
if it works.
----------------------------
revision 2.272
date: 2003-01-28 12:50:38 -0800;  author: albinus;  state: Exp;  lines: +1 -1;


* tramp.el (tramp-get-device): `tramp-make-tramp-file-name' must
not be called with NIL path.  It fails in case of multi-method.
----------------------------
revision 2.271
date: 2003-01-27 12:28:40 -0800;  author: albinus;  state: Exp;  lines: +9 -6;


* tramp.el (tramp-file-name-for-operation): Apply
`expand-file-name' for relative file names only.  Otherwise there
might be problems if the default directory is another Tramp
directory as the directory the file is based on.
(tramp-find-foreign-file-name-handler): Check whether FILENAME is
a Tramp file name.  It isn't if it comes from an expanded file
name (like "/xx:yy//zz").
----------------------------
revision 2.270
date: 2003-01-25 14:32:25 -0800;  author: albinus;  state: Exp;  lines: +29 -8;


* tramp.el (tramp-devices): New variable.  Keeps virtual device
numbers.  Devices must distinguish physical file systems.  The
device numbers provided by "lstat" aren't unique, because we
operate on different hosts.  So we use virtual device numbers,
generated by `tramp-get-device'.  Both Ange-FTP and EFS use device
number -1.  In order to be different, we use device number (-1 x),
whereby "x" is unique for a given (multi-method method user
host).  Suggested by Kai.
(tramp-perl-file-attributes): Always return device number -1.
There will be a virtual device number set in
`tramp-handle-file-attributes', which replaces this one.
(tramp-handle-file-attributes): Set virtual device number.
(tramp-get-device): New function.  Returns the virtual device
number.  If it doesn't exist, generate a new one.
(tramp-handle-file-regular-p): Use Emacs file name primitives
instead of calling tramp-handle-* equivalents directly.  Needed
for tramp-smb.

* tramp-smb.el (tramp-smb-devices, tramp-smb-get-device): Removed.
Functionality moved to tramp.el.
(tramp-smb-handle-file-attributes): Apply
`tramp-get-device'. ATIME and CTIME are (0 0) now (= "don't
know"), which is more honest.
(tramp-smb-handle-make-directory): Use Emacs file name primitives
instead of calling tramp-smb-handle-* equivalents directly.
(tramp-smb-read-file-entry): Return size as a number but a string.
----------------------------
revision 2.269
date: 2003-01-24 12:29:24 -0800;  author: albinus;  state: Exp;  lines: +49 -15;


* tramp.el (tramp-completion-function-alist-ssh): Add parsing of
"/etc/ssh_config" and "~/.ssh/config".  Suggested by Kai.
(tramp-completion-function-alist, tramp-set-completion-function):
Doc string update.
(tramp-parse-sconfig, tramp-parse-sconfig-group): New functions.
Provide parsing of "~/.ssh/config" style files.

* tramp.texi (Customizing Completion): Add function
`tramp-parse-sconfig'.  Change example of
`tramp-set-completion-function', because parsing of ssh config
files looks more natural.
----------------------------
revision 2.268
date: 2003-01-21 12:50:58 -0800;  author: albinus;  state: Exp;  lines: +6 -5;


* tramp.el (tramp-completion-handle-expand-file-name): Apply
`tramp-drop-volume-letter'.  Otherwise, there are problems on W32
systems.
----------------------------
revision 2.267
date: 2003-01-14 00:14:44 -0800;  author: kai;  state: Exp;  lines: +3 -2;
(tramp-md5-function): Require md5 before checking
function md5.  If using md5-encode, put wrapper around it that
converts vector of bytes to ascii text.
----------------------------
revision 2.266
date: 2003-01-13 13:23:18 -0800;  author: albinus;  state: Exp;  lines: +3 -3;


* tramp.el (tramp-completion-mode): Perform check (integerp
last-input-event) before (event-modifiers last-input-event) -
there might be problems if `last-input-event' is a mouse event.
----------------------------
revision 2.265
date: 2003-01-11 15:40:34 -0800;  author: albinus;  state: Exp;  lines: +5 -5;


* tramp-smb.el (tramp-parse-rhosts, tramp-parse-shosts)
(tramp-parse-hosts, tramp-parse-passwd, tramp-parse-netrc): Use
`file-readable-p' instead of `file-exists-p'.  Otherwise these
functions might block.  Reported by <kin@neoscale.com>.
----------------------------
revision 2.264
date: 2003-01-02 02:59:25 -0800;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.el (top-level): Avoid byte-compiler warnings of unused
variables if the byte-compiler supports this.  This is for the
with-parsed-tramp-file-name macro which is wont to produce such
stuff.

* Makefile (EMACS_EL_FILES): List of files for Emacs repository.
(emacs): New target.  Copy data into Emacs CVS repository.
(xemacs): Copy more files to XEmacs repository.
----------------------------
revision 2.263
date: 2002-12-23 06:03:44 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.28 released.
----------------------------
revision 2.262
date: 2002-12-22 14:28:30 -0800;  author: albinus;  state: Exp;  lines: +52 -47;

* tramp.el (top-level): Discard tramp-smb.el also for Cygwin.  No
"smbclient" available there.
(tramp-completion-dissect-file-name):
`tramp-completion-file-name-structure1',
`tramp-completion-file-name-structure2',
`tramp-completion-file-name-structure3' and
`tramp-completion-file-name-structure4' changed from "defconst" to
"let*", because they are function local (but nevertheless
constants).  Suggested by David Kastrup
<David.Kastrup@t-online.de> and Kai Großjohann
<kai.grossjohann@uni-duisburg.de>.  The value "9" has changed to
"nil" (meaning there's nothing to match), because Emacs 21.3 seems
to be more sensible on `match-string'.
(tramp-completion-dissect-file-name1): In case of a "nil" position
don't call `match-string'.

* tramp-smb.el (tramp-smb-file-name-handler-alist):
`add-name-to-file' is handled by `tramp-smb-handle-copy-file',
because there are no hardlinks under Windows.
----------------------------
revision 2.261
date: 2002-12-21 13:32:59 -0800;  author: albinus;  state: Exp;  lines: +1 -4;

* tramp.el (tramp-default-method-alist): Defaults setting for FTP
method has moved to tramp-smb.el. The remaining default for the SU
method is available for both Emacs and XEmacs now.

* tramp-ftp.el (top-level): Set defaults for
`tramp-default-method-alist'. Taken over from tramp.el.

* tramp-smb.el (top-level): Set default for
`tramp-default-method-alist'. If the user name contains a domain
(visible via the "%" char), it must be the SMB method.
(tramp-smb-wait-for-output): Use `tramp-smb-process-running' where
appropriate. Last time I've changed this function I forgot one
place.
----------------------------
revision 2.260
date: 2002-12-05 14:29:23 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.27 released.
----------------------------
revision 2.259
date: 2002-12-05 01:54:14 -0800;  author: kai;  state: Exp;  lines: +13 -7;
(tramp-run-real-handler)
(tramp-completion-run-real-handler): Disable cygwin-mount, too.
All files handled by Tramp are on Unix systems, where
cygwin-mount is not useful.  (Ie, remote Cygwin systems are not
supported.)
----------------------------
revision 2.258
date: 2002-11-30 14:33:34 -0800;  author: kai;  state: Exp;  lines: +12 -11;
* tramp.el (tramp-end-of-output): Do not use directory listing as
input to `md5' function.  The current time is deemed to be good
enough.

* tramp-vc.el (tramp-vc-do-command-new): `okstatus' can be async.
From Francis Litterio <franl@world.std.com>.
(tramp-vc-simple-command): Comment on potential `okstatus'
problem with it being `async'.  No code change.
----------------------------
revision 2.257
date: 2002-11-28 13:38:40 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Adjust version numbers in files.
----------------------------
revision 2.256
date: 2002-11-28 13:03:34 -0800;  author: albinus;  state: Exp;  lines: +26 -19;


* tramp.el (top-level): Require tramp-smb.el only if local
Operating System is not MS Windows.  There's no need for the SMB
method there, because those Emacsen support UNC file names.
(tramp-handle-file-modes): Use Emacs file name primitives instead
of calling tramp-handle-* equivalents directly.  Needed for
tramp-smb.

* tramp-smb.el (tramp-smb-errors): List of error strings extended.
(tramp-smb-not-handled-yet): Function removed.  All I/O primitives
are handled now.  All places where used updated accordingly.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region, tramp-smb-open-connection): Error
handling improved.
(tramp-smb-handle-delete-directory)
(tramp-smb-handle-directory-files)
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-make-directory)
(tramp-smb-handle-make-directory-internal): New file name
primitive functions implemented.
(tramp-smb-handle-insert-directory): In case parameter is not a
directory, the result of "dir filename*" will return too many
results.  They are filtered out now.
(tramp-smb-send-command): Returns nil if there has been an error
message from smbclient.  Used for improved error handling
mentioned above.
(tramp-smb-wait-for-output): Timeouts removed.  Too much trouble
with.
(tramp-smb-time-less-p, tramp-smb-time-subtract): Handle the case
when T1 or T2 is nil.  It shouldn't happen ever, but it did once.

* tramp.texi (External transfer methods): Note added for `smb'
method that's not implemented for Emacsen running locally under MS
Windows.  UNC file names shall be used instead of.
----------------------------
revision 2.255
date: 2002-11-21 11:57:53 -0800;  author: kai;  state: Exp;  lines: +8 -0;
New todo items.
----------------------------
revision 2.254
date: 2002-11-10 11:43:57 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* tramp.el (tramp-handle-file-name-completion): Use Emacs file
name primitives instead of calling tramp-handle-* equivalents
directly.  Needed for tramp-smb.

* tramp-smb.el (tramp-smb-errors): List of error strings extended.
(tramp-smb-not-handled, tramp-smb-not-handled-yet):
`tramp-smb-not-handled' renamed to `tramp-smb-not-handled-yet'.
The new `tramp-smb-not-handled' returns nil for als primitives
which don't make sense for SMB servers.  All callers adapted.
(tramp-smb-handle-copy-file)
(tramp-smb-handle-file-name-all-completions)
(tramp-smb-handle-file-newer-than-file-p)
(tramp-smb-handle-rename-file)
(tramp-smb-handle-substitute-in-file-name)
(tramp-smb-handle-write-region): New file name primitive functions
implemented.
(tramp-smb-handle-delete-file): In the `let' clause, `path' must
be declared but `share'.  Found during compilation.
(tramp-smb-handle-file-symlink-p)
(tramp-smb-handle-set-visited-file-modtime)
(tramp-smb-handle-verify-visited-file-modtime): Replaced by
`tramp-smb-not-handled'.
(tramp-smb-handle-insert-directory): Handling of copyied files
added.
(tramp-smb-maybe-open-connection): Are-you-alive command changed
from "help" to "dir .".
(tramp-smb-wait-for-output): In case of finished process return
immediately.
(tramp-smb-check-shares): New function.  Reads share names.
----------------------------
revision 2.253
date: 2002-11-03 14:34:54 -0800;  author: albinus;  state: Exp;  lines: +4 -6;

tramp.el (tramp-handle-insert-file-contents): Use Emacs file
name primitives instead of calling tramp-handle-* equivalents
directly.  Needed for tramp-smb.

tramp-smb.el: First usefull version.  Directory traversing and
file displaying work.
----------------------------
revision 2.252
date: 2002-11-03 06:25:48 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Fix previous change.
----------------------------
revision 2.251
date: 2002-11-02 10:15:29 -0800;  author: kai;  state: Exp;  lines: +21 -14;
(tramp-md5-function): New variable.
(tramp-end-of-output): Use it.1
----------------------------
revision 2.250
date: 2002-10-27 12:53:49 -0800;  author: albinus;  state: Exp;  lines: +25 -12;

* tramp.el (top-level): Load tramp-smb.el.  Remove autoload of
`tramp-ftp-file-name-p'; not needed anymore.
(tramp-foreign-file-name-handler-alist): New variable.  Foreign
methods shall plug in.
(tramp-file-name-for-operation): Relative file names are checked
via `expand-file-name'.  If no absolute file name is given,
default directory of current-buffer is used.
(tramp-find-foreign-file-name-handler): New function.  Parses
`tramp-foreign-file-name-handler-alist' in order to find foreign
file name handlers.
(tramp-file-name-handler): Apply
`tramp-find-foreign-file-name-handler' instead of simply looking
for FTP foreign method.

* tramp-ftp.el (top-level): Plug into
`tramp-foreign-file-name-handler-alist'.

* tramp-smb.el: New file.  Functionality disabled by
`tramp-use-smb' during development.

* Makefile (tramp): Add tramp-smb.elc.
----------------------------
revision 2.249
date: 2002-10-22 14:04:48 -0700;  author: albinus;  state: Exp;  lines: +23 -24;

(tramp-file-name-for-operation): Even more file
primitives.  Sort them alphabetically.
----------------------------
revision 2.248
date: 2002-10-22 03:50:36 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-action-yn): Erase the buffer when the user has
said yes, don't erase it when they said no.
----------------------------
revision 2.247
date: 2002-10-20 13:32:58 -0700;  author: albinus;  state: Exp;  lines: +25 -10;

(tramp-file-name-for-operation): Complete file
primitives.  Lots of undocumented found.
----------------------------
revision 2.246
date: 2002-10-19 07:14:26 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-sh-extra-args): Use "-norc -noprofile" instead
of "--norc" for bash.  The single dash is for old versions, and
the additional option might help more.  Suggested by Tim Connors
<tconnors@astro.swin.edu.au>.
----------------------------
revision 2.245
date: 2002-10-15 02:09:59 -0700;  author: kai;  state: Exp;  lines: +15 -6;
(tramp-end-of-output): Emulate
directory-files-and-attributes if it does not exist.  (It does
not exist on XEmacs.)
----------------------------
revision 2.244
date: 2002-10-14 13:39:22 -0700;  author: albinus;  state: Exp;  lines: +50 -22;

	* tramp.el (tramp-dissect-file-name): Check for multi-method
	syntax before raising an error.
	(tramp-primitive-file-name): Renamed to
	`tramp-file-name-for-operation'.  Docstring enhanced.  List of
	file primitives completed in order to be signalled when a new one
	appears.  All changes suggested by Kai.
	(tramp-file-name-handler): `save-match-data' global.
----------------------------
revision 2.243
date: 2002-10-14 08:03:33 -0700;  author: kai;  state: Exp;  lines: +7 -1;
(tramp-end-of-output): Use a random value which
includes "///".  The "///" makes sure that the string can't occur
during normal operation, the random value makes it unlikely that
it occurs in random shell-command output.
----------------------------
revision 2.242
date: 2002-10-13 13:27:29 -0700;  author: albinus;  state: Exp;  lines: +70 -252;

2002-10-13  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-advice-find-file-name-handler): Remove defadvice
	because it might be not a good idea to hook into Emacs built-in
	subroutiones. Suggested by RMS.
	(tramp-primitive-file-name): Handle all primitives now.
	(tramp-file-name-handler): Allow call of
	`tramp-ftp-file-name-handler' for functions only defined in
	`tramp-file-name-handler-alist'.  Strange.

2002-10-12  Michael Albinus  <Michael.Albinus@alcatel.de>

	* Makefile (tramp): Add tramp-uu.elc and tramp-ftp.elc.

	* tramp.el (main): Require `tramp-ftp' after load in order to
	avoid infloop. Autoload `tramp-ftp-file-name-p' for compiler
	satisfaction.
	(tramp-primitive-file-name): Add handling of `expand-file-name'
	and `file-newer-than-file-p'.
	(tramp-file-name-handler): Call `tramp-primitive-file-name' via
	`apply'.

	* tramp-ftp.el (main): Require `tramp'.


2002-10-11  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp-ftp.el: New file.

	* tramp.el (tramp-default-method): Adapt doc string.
	(tramp-ftp-method, tramp-completion-function-alist-ftp)
	(tramp-disable-ange-ftp, tramp-invoke-ange-ftp)
	(tramp-ange-ftp-file-name-p, tramp-make-ange-ftp-file-name): Moved
	to tramp-ftp.el or removed (if not needed any longer).  Callees
	adapted.
	(tramp-completion-function-alist): "ftp" entry removed.  Will be
	added from within tramp-ftp.el.
	(tramp-set-completion-function ): Allow setting of methods not
	defined yet.
	(tramp-run-real-handler, tramp-completion-run-real-handler):
	Remove `ange-ftp-hook-function' handling.  Make
	`inhibit-file-name-handlers' a cons but a list.
	(tramp-advice-find-file-name-handler): Advice for
	`find-file-name-handler'.  Check for Ange-FTP file names,
	applicable for NON built-in primitives only.
	(tramp-primitive-file-name): New function.  Returns filename for
	some built-in primitives.
	(tramp-file-name-handler): Check for Ange-FTP file names (built-in
	primitives only).  Forward to Ange-FTP in case of.
	(tramp-completion-file-name-handler): Remove catch for
	`tramp-forward-to-ange-ftp'.  Not necessary any longer.
	(tramp-flatten-list): Remove function.  Never used.
	(tramp-completion-mode, tramp-get-completion-methods): Special
	handling of `tramp-ftp-method' removed.  It's part of
	`tramp-methods' now (as foreign method).

2002-10-13  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Windows setup hints): Fix typo (missing {} after
	@dots).
	(Inline methods, External transfer methods)
	(Remote shell setup, Windows setup hints)
	(Frequently Asked Questions, Issues): Replace "Tramp" by
	"@tramp{}".
----------------------------
revision 2.241
date: 2002-10-11 00:57:48 -0700;  author: kai;  state: Exp;  lines: +2 -2;
(tramp-handle-shell-command): Don't switch to the
output buffer, just display it.  From Francis Litterio
<franl@world.std.com>.
----------------------------
revision 2.240
date: 2002-10-06 12:03:20 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(VERSION): Bump.
----------------------------
revision 2.239
date: 2002-10-05 14:11:52 -0700;  author: kai;  state: Exp;  lines: +3 -1;
(tramp-handle-file-truename): If it's a directory,
append slash only if result doesn't end in a slash already.
----------------------------
revision 2.238
date: 2002-10-04 13:35:29 -0700;  author: kai;  state: Exp;  lines: +8 -5;
(tramp-handle-file-truename): Restructure logic.  If
list of steps is nil, return "/" as the real name.
----------------------------
revision 2.237
date: 2002-10-03 14:47:40 -0700;  author: albinus;  state: Exp;  lines: +13 -8;


2002-10-03  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): Add "\\(" and
	"\\)". Otherwise, `match-string' doesn't make sense.
	(tramp-host-with-port-regexp): New defcustom. Equal to previous
	`tramp-host-regexp'.
	(tramp-host-regexp): Taken off hashes in host names. Otherwise,
	scanning files like .rhosts would take comments as host names.
	(tramp-file-name-structure, tramp-multi-file-name-hop-structure):
	Replace `tramp-host-regexp' by `tramp-host-with-port-regexp'.
----------------------------
revision 2.236
date: 2002-10-03 12:15:23 -0700;  author: kai;  state: Exp;  lines: +23 -2;
(tramp-action-terminal): New function.
(tramp-terminal-prompt-regexp): New variable, matches "tset"
prompts.
(tramp-actions-before-shell): Use them.
----------------------------
revision 2.235
date: 2002-09-30 07:25:24 -0700;  author: kai;  state: Exp;  lines: +53 -53;
(tramp-handle-shell-command): Logic error.  From Ivan
Zakharyaschev <imz@altlinux.org>.
----------------------------
revision 2.234
date: 2002-09-29 09:07:44 -0700;  author: kai;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.233
date: 2002-09-29 08:26:08 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-host-regexp): Allow hashes in host names (for
the "#port" feature).
----------------------------
revision 2.232
date: 2002-09-28 04:57:20 -0700;  author: kai;  state: Exp;  lines: +4 -1;
* tramp.el (tramp-open-connection-setup-interactive-shell):
Explicitly set tramp-last-cmd-time before invoking
tramp-send-command the first time.  Otherwise, tramp-send-command
would issue "echo are you awake" right at the first time, which
is not what we want.  Reported by Douglas Gray Stephens.

* Makefile (cvs-update): New convenience target.
----------------------------
revision 2.231
date: 2002-09-27 14:37:15 -0700;  author: albinus;  state: Exp;  lines: +9 -12;


	* tramp.texi (Inline methods): Explain that encoding/decoding
	commands are selected automagically ,based on `uuencode',
	'mimencode' and anown Perl implementation of base-64
	coding. Actualize the methods with respect to reality.
	(External transfer methods): Add missing methods `scp1', `scp2',
	`scp1_old', `scp2_old' and `ftp'.
	(Multi-hop Methods): Remove `multiu'.

	* tramp.el (tramp-methods, tramp-completion-function-alist):
	Rename "scp1-old", "scp2-old", "ssh1-old", "ssh2-old" to
	"*_old". There have been problems in method name completion,
	because "-" is a word delimeter for partial completion mode.
	(tramp-completion-function-alist): Set
	`tramp-completion-function-alist-ssh' as completion function for
	"fcp".
----------------------------
revision 2.230
date: 2002-09-26 04:24:03 -0700;  author: kai;  state: Exp;  lines: +23 -19;
(tramp-handle-file-local-copy): More local bindings.
Bind results of tramp-get-{remote,local}-{de,en}coding earlier to
avoid nasty "are you awake" problem.
----------------------------
revision 2.229
date: 2002-09-25 08:57:52 -0700;  author: kai;  state: Exp;  lines: +2 -1;
(tramp-maybe-open-connection): Don't send "are you awake" if
process has died.
----------------------------
revision 2.228
date: 2002-09-25 07:06:35 -0700;  author: kai;  state: Exp;  lines: +10 -8;
(tramp-action-password): Protect against clobbered
match data.
----------------------------
revision 2.227
date: 2002-09-24 09:22:16 -0700;  author: kai;  state: Exp;  lines: +1 -2;
* tramp.texi: Bump version.

* tramp.el (tramp-handle-file-truename): Eliminate unused
variable.
(tramp-version): Bump.
----------------------------
revision 2.226
date: 2002-09-24 03:09:06 -0700;  author: kai;  state: Exp;  lines: +46 -46;
(tramp-ange-ftp-file-name-p): If METHOD is nil, find the right
default method.  Require additional args USER and HOST for this.
Callers changed.
----------------------------
revision 2.225
date: 2002-09-24 02:57:55 -0700;  author: kai;  state: Exp;  lines: +14 -4;
(tramp-find-inline-encoding): Don't redirect stdout to
/dev/null to avoid "chmode go-rwx" operation from "mimencode
>/dev/null" as root(!), and to check the output of the decoding
command.
----------------------------
revision 2.224
date: 2002-09-22 10:29:53 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.22.
----------------------------
revision 2.223
date: 2002-09-22 09:25:40 -0700;  author: albinus;  state: Exp;  lines: +54 -40;

	* tramp.el (tramp-parse-rhosts, tramp-parse-shosts)
	(tramp-parse-hosts, tramp-parse-passwd): Apply `push' but
	`add-to-list' for performance reasons.
	(tramp-get-completion-user-host): Return `nil' in case both `user'
	and 'host' are empty (not necessarily `nil'.
	(tramp-parse-netrc, tramp-parse-netrc-group): New functions.
	(tramp-user-regexp): " \t" are not user regexp characters.
	(tramp-completion-handle-file-name-all-completions): Remove
	Ange-FTP cmpletion. It has a bug not handling the "/ftp:" prefix
	completely, and it returns local completions as well.
	(tramp-completion-function-alist-ftp): New constant.
	(tramp-completion-function-alist): Add completion function for
	"ftp".

	* tramp.texi (Customizing Completion): Introduce
	`tramp-parse-netrc'.
----------------------------
revision 2.222
date: 2002-09-22 06:53:01 -0700;  author: kai;  state: Exp;  lines: +37 -21;
Version 2.0.21 released.

(tramp-handle-file-newer-than-file-p): If mtime of
both files is known, return a useful result.  Better error
message in case one is a Tramp file and one isn't.
(tramp-handle-file-local-copy, tramp-handle-write-region)
(tramp-find-shell, tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-setup-interactive-shell)
(tramp-post-connection, tramp-maybe-open-connection)
(tramp-method-out-of-band-p): Correct number of args for
`tramp-get-rsh-program' and similar functions.
----------------------------
revision 2.221
date: 2002-09-22 06:40:58 -0700;  author: kai;  state: Exp;  lines: +44 -23;
(tramp-handle-file-newer-than-file-p): If mtime of
both files is known, return a useful result.  Better error
message in case one is a Tramp file and one isn't.
----------------------------
revision 2.220
date: 2002-09-22 06:11:59 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.20 released.
----------------------------
revision 2.219
date: 2002-09-20 13:40:27 -0700;  author: kai;  state: Exp;  lines: +1 -1;
*tramp.el (tramp-method-out-of-band-p): Add missing ")".
----------------------------
revision 2.218
date: 2002-09-20 10:03:39 -0700;  author: kai;  state: Exp;  lines: +83 -47;
(tramp-handle-file-local-copy, tramp-handle-write-region)
(tramp-completion-handle-file-name-all-completions)
(tramp-open-connection-telnet, tramp-open-connection-rsh)
(tramp-open-connection-su, tramp-post-connection)
(tramp-maybe-open-connection, tramp-method-out-of-band-p)
(tramp-get-connection-function, tramp-get-remote-sh)
(tramp-get-rsh-program, tramp-get-rsh-args)
(tramp-get-rcp-program, tramp-get-rcp-args)
(tramp-get-rcp-keep-date-arg, tramp-get-su-program)
(tramp-get-su-args, tramp-get-telnet-program)
(tramp-get-telnet-args): Use `tramp-find-method', perhaps require
additional args USER, HOST.
(tramp-action-password, tramp-open-connection-telnet)
(tramp-open-connection-su, tramp-open-connection-multi)
(tramp-method-out-of-band-p): `tramp-method-out-of-band-p' now
takes USER and HOST arguments, to be able to use
`tramp-find-method'.  Update callers.
(tramp-find-method): New function.
----------------------------
revision 2.217
date: 2002-09-20 09:27:58 -0700;  author: kai;  state: Exp;  lines: +13 -11;
(tramp-completion-function-alist): Escape open paren
in docstring.
(tramp-user-regexp, tramp-host-regexp): Allow empty strings.
(tramp-handle-insert-file-contents): Call
tramp-message-for-buffer instead of tramp-message.
(tramp-open-connection-rsh): Handle empty string as user name.
(tramp-open-connection-su): Handle empty string as host name.
Handle nil user name.
----------------------------
revision 2.216
date: 2002-09-20 08:33:41 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-handle-insert-directory): Handle "--dired" in
SWITCHES (by removing it).
----------------------------
revision 2.215
date: 2002-09-18 00:40:01 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* tramp.el (tramp-file-name-handler): Add `file-remote-p'
property.
----------------------------
revision 2.214
date: 2002-09-16 12:25:08 -0700;  author: kai;  state: Exp;  lines: +1 -0;
* contrib/README: Explain uudecode.el.

* contrib/uudecode.el: New file.
----------------------------
revision 2.213
date: 2002-09-16 01:46:05 -0700;  author: kai;  state: Exp;  lines: +24 -52;
* tramp.el (tramp-methods): Update docstring:
tramp-encoding-command, tramp-decoding-command,
tramp-encoding-function and tramp-decoding-function are not
parameters anymore.
(tramp-uuencode-region): Autoload it.
----------------------------
revision 2.212
date: 2002-09-13 14:19:48 -0700;  author: kai;  state: Exp;  lines: +6 -8;
Version 2.0.19 released.

* tramp-uu.el: New file.

* tramp.el (tramp-coding-commands): Use `tramp-uuencode-region'
as local encoder for the uuencode based entries.

* tramp.texi: Define macro for printing a Tramp filename.
----------------------------
revision 2.211
date: 2002-09-13 03:12:30 -0700;  author: kai;  state: Exp;  lines: +3 -3;
* tramp.el (tramp-perl-decode): Perl changes to accomodate older
versions of Perl.  Now tested with 5.004.  Suggestion from
Michael Albinus.

* Makefile (VERSION): Bump
----------------------------
revision 2.210
date: 2002-09-12 09:33:59 -0700;  author: kai;  state: Exp;  lines: +1 -1;
tramp-call-local-coding-command: small fix.
----------------------------
revision 2.209
date: 2002-09-12 09:08:06 -0700;  author: kai;  state: Exp;  lines: +10 -8;
* tramp.el (tramp-find-inline-encoding): Call
tramp-call-local-coding-command with nil for INPUT and OUTPUT.
(tramp-call-local-coding-command): OUTPUT equals nil means to
discard the output.  INPUT equals nil means /dev/null.

* Makefile (tar): Depend on prepversion, not tag.
(dist): Depend on tag.
(VERSION): Bump.
----------------------------
revision 2.208
date: 2002-09-12 06:07:49 -0700;  author: kai;  state: Exp;  lines: +6 -2;
(tramp-encoding-shell): Default to environment
variable COMSPEC on Windows.
(tramp-handle-write-region): More debugging output.
(tramp-find-inline-encoding): Ditto.
----------------------------
revision 2.207
date: 2002-09-11 12:25:36 -0700;  author: albinus;  state: Exp;  lines: +9 -8;

* tramp.el (tramp-completion-handle-file-name-all-completions):
	Define `result1'.
	(tramp-parse-hosts-group): Discard IPv6 entries.

* tramp.texi (Copying): New node. Contains the disclaimer
	part. Two occurences of this text removed.
	(Obtaining @tramp{}): Harmonize example. Use "~/emacs" but "~/lisp".
	(Top): Introduce new flags `emacs'/`xemacs', `emacs-name',
	´emacs-dir', `ftp-package-name', `tramp-prefix',
	`tramp-prefix-single-hop', `tramp-postfix',
	`tramp-postfix-single-hop', `tramp-postfix-multi-hop'.
	(All): Use them. Fix typos where seen.
----------------------------
revision 2.206
date: 2002-09-11 11:32:10 -0700;  author: albinus;  state: Exp;  lines: +3 -2;

* tramp.el: Next todo item. The list shall decrease, but it
	doesn't :(
----------------------------
revision 2.205
date: 2002-09-11 05:10:41 -0700;  author: kai;  state: Exp;  lines: +3 -0;
New todo item.
----------------------------
revision 2.204
date: 2002-09-11 04:03:45 -0700;  author: kai;  state: Exp;  lines: +169 -218;
* tramp.el (tramp-post-connection): Only send Perl
mime-encode/decode implementations when using inline method.
(tramp-handle-file-local-copy)
(tramp-handle-write-region, tramp-post-connection)
(tramp-coding-commands, tramp-find-inline-encoding): For the
inline encodings, distinguish between local and remote commands,
instead of between commands and functions.  (The local commands
can be functions, too.)  If the local host is a Windows machine,
we can't expect the same commands to work there as on the remote
host.
(tramp-call-local-coding-command): New function for calling local
encoding and decoding commands.
(tramp-set-remote-encoding, tramp-get-remote-encoding)
(tramp-set-remote-decoding, tramp-get-remote-decoding)
(tramp-set-local-encoding, tramp-get-local-encoding)
(tramp-set-local-decoding, tramp-get-local-decoding): New functions.
(tramp-get-encoding-command, tramp-set-encoding-command)
(tramp-get-decoding-command, tramp-set-decoding-command)
(tramp-get-encoding-function, tramp-set-encoding-function)
(tramp-get-decoding-function, tramp-set-decoding-function): Old
functions, removed.

* Makefile (VERSION): Bump.
----------------------------
revision 2.203
date: 2002-09-10 14:07:17 -0700;  author: albinus;  state: Exp;  lines: +5 -2;

(tramp-handle-write-region): Added missing `)'. Hope
	it's the right place.
----------------------------
revision 2.202
date: 2002-09-09 09:52:06 -0700;  author: kai;  state: Exp;  lines: +101 -39;
(tramp-encoding-shell): Renamed from tramp-sh-program.  More
documentation.  Default to cmd.exe on Windows NT.
(tramp-encoding-command-switch): New variable.  Use instead of
hard-wired "-c" which is only good for /bin/sh.
(tramp-encoding-reads-stdin): New variable.  If t, commands are
called like "/bin/sh -c COMMAND <INPUT", if nil, they are called
like "/bin/sh -c COMMAND INPUT", ie the input file is the last
argument.
(tramp-multi-sh-program): Always default to tramp-encoding-shell.
(tramp-handle-file-local-copy, tramp-handle-write-region): Respect
tramp-encoding-shell and friends.
(tramp-find-inline-encoding): Use new-style calls for checking if
the local commands work.
----------------------------
revision 2.201
date: 2002-09-09 02:48:20 -0700;  author: kai;  state: Exp;  lines: +3 -2;
(tramp-open-connection-setup-interactive-shell): Do
"exec env PS1='$ ' /bin/sh" instead of just "exec /bin/sh" in
order to get a sane shell prompt.  If people have ${CWD}, say, in
their shell prompt, then the default login shell might display
something harmless, but the /bin/sh will display a dollar sign
which confused the subsequent prompt recognition.
----------------------------
revision 2.200
date: 2002-09-08 11:35:11 -0700;  author: albinus;  state: Exp;  lines: +143 -137;

2002-09-08  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Configuration): New node `Customizing Completion'.
	(Usage): New node `Filename completion'. Respective sentences from
	node `Dired' moved to.

2002-09-07  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-methods): Remove `tramp-completion-function'
	entries. They are handled now by `tramp-completion-function-alist'.
	(tramp-completion-function): Defvar removed. I've never used
	it. Hmm.
	(tramp-get-completion-function)
	(tramp-get-completion-rsh, tramp-get-completion-ssh)
	(tramp-get-completion-telnet, tramp-get-completion-su): Functions
	removed as well. Not necessary any longer due to extended
	customization means.
	(tramp-completion-function-alist): New defcustom. Holds all
	FUNCTION FILE pairs used for user and host name completion
	relevant for METHOD.
	(tramp-completion-function-alist-rsh)
	(tramp-completion-function-alist-ssh)
	(tramp-completion-function-alist-telnet)
	(tramp-completion-function-alist-su): Defconst for initializing
	`tramp-completion-function-alist'. Unfortunately, mainly UNIX-like
	values are known for me until now. Needs to be completed for at
	least VMS++ like operating systems.
	(tramp-set-completion-function)
	(tramp-get-completion-function): New functions for configuration
	of `tramp-completion-function-alist'. The old definition of
	`tramp-get-completion-function' has been discarded.
	(tramp-completion-handle-file-name-all-completions): Change
	function call for user/host completion according to definition in
	`tramp-completion-function-alist'.
	(tramp-parse-passwd): Added exception handling for "root", because
	`tramp-get-completion-su' (the previous place for this stuff)
	doesn't exist any longer.
----------------------------
revision 2.199
date: 2002-09-07 10:42:53 -0700;  author: kai;  state: Exp;  lines: +2 -2;
(tramp-wait-for-output, tramp-post-connection): Allow "\r" at end
of line of the output delimiter.
----------------------------
revision 2.198
date: 2002-09-07 10:35:40 -0700;  author: kai;  state: Exp;  lines: +15 -2;
(tramp-enter-password): Use
`tramp-password-end-of-line' to terminate the line.
(tramp-bug): Include new variable `tramp-password-end-of-line'.
(tramp-password-end-of-line): New variable.  People who use plink
under Windows might have to issue "\r\n" after the password, but
they need to send just "\n" after the other commands.  So this
variable was introduced to complement `tramp-rsh-end-of-line'.
----------------------------
revision 2.197
date: 2002-09-07 10:29:10 -0700;  author: kai;  state: Exp;  lines: +4 -4;
Trivial change in comment formatting.  The new format is what M-;
produces in Emacs 21.
----------------------------
revision 2.196
date: 2002-09-06 13:27:49 -0700;  author: kai;  state: Exp;  lines: +16 -24;
(tramp-handle-file-local-copy, tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Add some
comments about Douglas Grey Stephen's suggestions to make Tramp
work better with plink under Windows.  I'm not sure what to think
of them, but now I have a guinea pig to try it out on.  Said
guinea pig is having other problems, though...
Also remove some commented-out code.
----------------------------
revision 2.195
date: 2002-09-06 13:22:39 -0700;  author: albinus;  state: Exp;  lines: +43 -25;

2002-09-06  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-get-completion-methods): Algorithm slightly
	tuned.
	(tramp-get-completion-user-host): Accept user names as they are if
	typed until "@".
	(tramp-completion-mode): Replace `last-input-char' by modern
	`last-input-event'. Check for `event-modifiers'.
----------------------------
revision 2.194
date: 2002-09-06 03:41:14 -0700;  author: kai;  state: Exp;  lines: +3 -1;
(file-expand-wildcards): Corrected check to see if
advising is necessary.
----------------------------
revision 2.193
date: 2002-09-06 03:10:13 -0700;  author: kai;  state: Exp;  lines: +779 -145;
Merge changes by Michael Albinus from "completion" branch.

2002-09-05  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-postfix-single-method-format)
	(tramp-postfix-multi-method-format)
	(tramp-postfix-multi-hop-format)
	(tramp-postfix-user-format): New format strings.
	(tramp-postfix-single-method-regexp)
	(tramp-postfix-multi-method-regexp)
	(tramp-postfix-multi-hop-regexp)
	(tramp-postfix-user-regexp)
	(tramp-make-multi-tramp-file-format)
	(tramp-make-tramp-file-name): Apply them.
	(tramp-completion-handle-file-name-all-completions): Fix for
	invoking ange-ftp in case of "/ftp:xxx" file names.

2002-09-04  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-prefix-format)
	(tramp-postfix-host-format): New format strings.
	(tramp-prefix-regexp, tramp-method-regexp)
	(tramp-postfix-single-method-regexp)
	(tramp-postfix-multi-method-regexp)
	(tramp-postfix-multi-hop-regexp)
	(tramp-user-regexp, tramp-postfix-user-regexp)
	(tramp-host-regexp, tramp-postfix-host-regexp)
	(tramp-path-regexp): New atomar regular expressions. If
	corresponding format strings exist, derived from them.
	(tramp-file-name-structure)
	(tramp-multi-file-name-structure)
	(tramp-multi-file-name-hop-structure)
	(tramp-make-multi-tramp-file-format)
	(tramp-completion-mode)
	(tramp-completion-dissect-file-name)
	(tramp-parse-rhosts-group)
	(tramp-parse-shosts-group)
	(tramp-parse-hosts-group)
	(tramp-parse-passwd-group): Apply these expressions.
	(tramp-file-name-structure-unified)
	(tramp-file-name-structure-separate)
	(tramp-make-tramp-file-format-unified)
	(tramp-make-tramp-file-format-separate)
	(tramp-make-tramp-file-format)
	(tramp-make-tramp-file-user-nil-format-unified)
	(tramp-make-tramp-file-user-nil-format-separate)
	(tramp-make-tramp-file-user-nil-format)
	(tramp-multi-file-name-structure-unified)
	(tramp-multi-file-name-structure-separate)
	(tramp-multi-file-name-hop-structure-unified)
	(tramp-multi-file-name-hop-structure-separate)
	(tramp-make-multi-tramp-file-format-unified)
	(tramp-make-multi-tramp-file-format-separate): Removed.
	(tramp-make-tramp-file-name): Allow partial tramp file
	names. Generate tramp file format on-the-fly depending on
	parameters. Apply atomar format strings resp expressions.
	(tramp-get-completion-methods)
	(tramp-get-completion-user-host): Apply
	`tramp-make-tramp-file-name'.
	(tramp-parse-hosts-group): Take all host names and IP addresses
	into account.
	(tramp-bug): Remove `tramp-make-tramp-file-format'.

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-methods): Add `tramp-completion-function' for
	"su" and "sudo".
	(tramp-get-completion-telnet): Implement it.
	(tramp-parse-hosts)
	(tramp-parse-hosts-group)
	(tramp-get-completion-su)
	(tramp-parse-passwd)
	(tramp-parse-passwd-group): New functions.

2002-08-31  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): Check for `last-input-char'.
	(tramp-completion-file-name-handler-alist): Add handler
	for `file-exists-p.
	(tramp-completion-handle-file-exists-p): New function.
	(tramp-completion-handle-file-name-completion): Simplified.
	(tramp-completion-dissect-file-name): Regexp's reorganised.
	(tramp-completion-handle-file-name-all-completions): Call
	completion-function only if `user' or `host' is given.
	(tramp-get-completion-user-host): New function.
	(tramp-get-completion-rsh)
	(tramp-get-completion-ssh): Apply it.

2002-08-29  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-handler-alist): Add handler
	for `expand-file-name'.
	(tramp-completion-handle-expand-file-name): New function.

2002-08-26  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): New function.
	(tramp-completion-handle-file-name-directory)
	(tramp-completion-handle-file-name-all-completions): Apply it.
	(tramp-methods): Remove double definition of `ssh1-old' and
	`ssh2-old'.
	(tramp-point-at-eol): New defalias.
	(tramp-parse-rhosts-group)
	(tramp-parse-shosts-group):: Apply it.

2002-08-25  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-get-completion-methods)
	(tramp-get-completion-rsh)
	(tramp-get-completion-ssh): Add "[" for Xemacs.
	(tramp-completion-file-name-regexp-separate): Expression adapted.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-directory' and `file-name-nondirectory'.
	(tramp-completion-handle-file-name-directory)
	(tramp-completion-handle-file-name-nondirectory)
	(tramp-completion-run-real-handler): New functions.
	(tramp-completion-file-name-handler)
	(tramp-completion-handle-file-name-all-completions): Apply
	`tramp-completion-run-real-handler'.
	(tramp-parse-rhosts)
	(tramp-parse-shosts): Use `with-temp-buffer'. `result´ renamed to
	`res' (otherwise side effects in XEmacs).

2002-08-24  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-regexp)
	(tramp-completion-file-name-handler-alist)
	(tramp-flatten-list)
	(tramp-completion-dissect-file-name)
	(tramp-get-completion-rsh)
	(tramp-parse-rhosts)
	(tramp-parse-rhosts-group)
	(tramp-get-completion-ssh): Doc string tuned.
	(tramp-methods): Doc string and custom type extended for
	`tramp-completion-function'.
	(tramp-completion-function): Variable added. Is it really used?
	Other variables like `tramp-completion-function' aren't used.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-completion'.
	(tramp-completion-handle-file-name-completion): New function.

2002-08-20  Michael Albinus  <Michael.Albinus@alcatel.de>

	Branch "completion" created. Version named (temporarily)
	"2.0.completion".

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Dired): Mention method, user name and machine name
	completion.
----------------------------
revision 2.192
date: 2002-09-05 09:14:32 -0700;  author: kai;  state: Exp;  lines: +17 -1;
(tramp-chunksize): New kluge variable.
(tramp-send-region): If tramp-chunksize is non-nil, send region
in parts and sleep 0.1 seconds between chunks.
----------------------------
revision 2.191
date: 2002-09-03 05:50:21 -0700;  author: kai;  state: Exp;  lines: +70 -51;
(tramp-handle-insert-directory): Use
`insert-buffer-substring' instead of `insert-buffer', which is not
supposed to be used from Lisp.  Remember old point in a variable
instead of using `mark'.  Suggestion from Stefan Monnier.
(tramp-unified-filenames): New variable.  Use it in default value
of other filename variables.
(file-expand-wildcards): Don't advise unless "[" and "]" are used
in the filename format.
----------------------------
revision 2.190
date: 2002-09-01 13:29:20 -0700;  author: kai;  state: Exp;  lines: +0 -24;
(tramp-methods): Remove duplicate definition of
ssh1-old and ssh2-old.
----------------------------
revision 2.189
date: 2002-09-01 12:29:45 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.15 is released.
----------------------------
revision 2.188
date: 2002-09-01 12:27:38 -0700;  author: kai;  state: Exp;  lines: +9 -4;
(require 'base64): Add explanatory comment to Steve's
change.
(tramp-feature-write-region-fix): Make sure that variable is
always defined, even on XEmacs (where it is nil).
----------------------------
revision 2.187
date: 2002-08-30 19:25:33 -0700;  author: youngs;  state: Exp;  lines: +9 -6;

2002-08-31  Steve Youngs  <youngs@xemacs.org>

	* tramp.el (require 'base64): Most modern Emacsen have the base64
	encode/decode functions built in, so test to see if they are bound
	before we go blindly requiring base64.el.
	(tramp-feature-write-region-fix): XEmacs doesn't have a
	'find-operation-coding-system' and this variable doesn't seem to
	be used anywhere so wrap it in (unless (featurep 'xemacs)).
----------------------------
revision 2.186
date: 2002-08-29 12:31:40 -0700;  author: albinus;  state: Exp;  lines: +13 -7;

2002-08-29  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-invoke-ange-ftp):
	(tramp-ange-ftp-file-name-p): Check for Xemacs.
	(tramp-do-copy-or-rename-file): Don't pass KEEP-DATE to
	tramp-invoke-ange-ftp 'rename.
	(tramp-handle-write-region): Don't pass LOCKNAME and CONFIRM to
	tramp-invoke-ange-ftp 'write-region.
	(tramp-handle-set-file-modes): Change order of FILENAME and MODE
	passing to tramp-invoke-ange-ftp 'set-file-modes.
	(tramp-invoke-ange-ftp): `tramp-disable-ange-ftp' must be called
	again after activating `ange-ftp'.
----------------------------
revision 2.185
date: 2002-08-24 04:12:38 -0700;  author: kai;  state: Exp;  lines: +7 -205;
2002-08-22  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* tramp.el (tramp-open-connection-su): Use user name "root" if no
	user name is given.

2002-08-22  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* tramp.texi (Usage): Mention type-ahead problem.
----------------------------
revision 2.184
date: 2002-08-22 08:13:02 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Bump version number.
----------------------------
revision 2.183
date: 2002-08-22 08:12:23 -0700;  author: kai;  state: Exp;  lines: +95 -52;
* tramp.texi (Remote shell setup): Mention
`tramp-shell-prompt-pattern', `tramp-actions-before-shell', and
`tramp-multi-actions'.

* tramp.el (tramp-shell-prompt-pattern): New variable.
(tramp-actions-before-shell, tramp-multi-actions)
(tramp-find-shell, tramp-open-connection-multi)
(tramp-open-connection-setup-interactive-shell): Use it.
(tramp-open-connection-telnet, tramp-open-connection-rsh)
(tramp-open-connection-su): Mention `tramp-shell-prompt-pattern'
in the docstring.
(tramp-bug): Report `tramp-shell-prompt-pattern'.
(tramp-process-one-multi-action, tramp-process-one-action): Make
message clearer so people don't confuse it with Emacs asking them
a question if the regexp happens to end with "?".
(tramp-verbose): Change default value from 10 to 9.  Also change
some logging levels so that 10 is reserved for stuff which is
needed for debugging only, but 9 catches everything that people
might like to see in order to see that Tramp is actually working.

* Makefile (VERSION): Bump.
----------------------------
revision 2.182
date: 2002-08-21 08:00:59 -0700;  author: kai;  state: Exp;  lines: +3 -3;
* tramp.el (tramp-handle-write-region): Don't check to see if
remote end is awake after sending data to remote host: we want to
send "EOF" not "echo are you awake"...
(tramp-maybe-open-connection): Swap args for tramp-time-diff.

* Makefile (VERSION): Bump.
----------------------------
revision 2.181
date: 2002-08-17 13:09:27 -0700;  author: kai;  state: Exp;  lines: +35 -5;
(tramp-yn-prompt-regexp): New variable.
(tramp-action-yn): New function, using it.
----------------------------
revision 2.180
date: 2002-08-08 13:06:24 -0700;  author: kai;  state: Exp;  lines: +8 -0;
(tramp-feature-write-region-fix): New internal
variable.  Not yet used.  Should be used in
`tramp-handle-write-region'.
----------------------------
revision 2.179
date: 2002-08-07 07:51:36 -0700;  author: kai;  state: Exp;  lines: +1 -1;
branches:  2.179.2;
* tramp.el (tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Comment out
possibly obsolete "echo hello" commands.
(tramp-run-real-handler): If operation is
`ange-ftp-hook-function', use first arg as the real operation.
(tramp-check-ls-commands): Use / instead of \ as directory
separator.  (Relevant for XEmacs on Windows.)
(tramp-maybe-open-connection): Use tramp-wait-for-output when
waiting for the "are you awake" command.  Use a different string
for the "are you awake" command.
(tramp-send-command): New optional arg NEVEROPEN means to never
invoke tramp-maybe-open-connection.
(tramp-maybe-open-connection): Use it.

* Makefile (VERSION): Bump.
----------------------------
revision 2.178
date: 2002-08-07 06:23:45 -0700;  author: kai;  state: Exp;  lines: +8 -4;
(tramp-send-command): New optional arg NEVEROPEN means to never
invoke tramp-maybe-open-connection.
(tramp-maybe-open-connection): Use it.
----------------------------
revision 2.177
date: 2002-08-07 05:47:13 -0700;  author: kai;  state: Exp;  lines: +3 -2;
(tramp-maybe-open-connection): Use tramp-wait-for-output when
waiting for the "are you awake" command.  Use a different string
for the "are you awake" command.
----------------------------
revision 2.176
date: 2002-08-07 04:58:10 -0700;  author: kai;  state: Exp;  lines: +22 -19;
(tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Comment out
possibly obsolete "echo hello" commands.
(tramp-run-real-handler): If operation is
`ange-ftp-hook-function', use first arg as the real operation.
(tramp-check-ls-commands): Use / instead of \ as directory
separator.  (Relevant for XEmacs on Windows.)
----------------------------
revision 2.175
date: 2002-08-06 03:32:27 -0700;  author: kai;  state: Exp;  lines: +9 -5;
(tramp-run-real-handler): If operation is
`ange-ftp-hook-function', use first arg as the real operation.
----------------------------
revision 2.174
date: 2002-08-05 07:53:47 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.11.

* tramp.el (tramp-invoke-ange-ftp): Avoid infloop by Ange-FTP
calling Tramp again: use tramp-run-real-handler to invoke
Ange-FTP.
(tramp-post-connection): Erase buffer after finding a remote
shell.
(tramp-find-file-exists-command): Try "test -e" and its variants
before "ls -d".

* Makefile (xemacs): Adjust to new directory names after moving
from SourceForge to Savannah.
(VERSION): Bump.
----------------------------
revision 2.173
date: 2002-08-05 07:41:17 -0700;  author: kai;  state: Exp;  lines: +10 -9;
* tramp.el (tramp-invoke-ange-ftp): Avoid infloop by Ange-FTP
calling Tramp again: use tramp-run-real-handler to invoke
Ange-FTP.
(tramp-post-connection): Erase buffer after finding a remote
shell.
(tramp-find-file-exists-command): Try "test -e" and its variants
before "ls -d".

* Makefile (xemacs): Adjust to new directory names after moving
from SourceForge to Savannah.
----------------------------
revision 2.172
date: 2002-08-04 06:53:24 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-perl-encode-with-module,
tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode): Doc fix.  From Andreas
Schwab.
(tramp-bug): New variables to report.
(tramp-post-connection): After finding shell, wait a bit.  I have
no idea why it is necessary, but Daniel also thinks it's
necessary.
(tramp-uudecode): New variable.  Shell function `tramp_uudecode'
for decoding to standard output for those Unices that don't have
it.
(tramp-post-connection): Install the function on the remote host.
(tramp-coding-commands): Add an alternative for using the
`tramp_uudecode' shell function.

* Makefile (VERSION): Bump.
----------------------------
revision 2.171
date: 2002-08-04 06:47:42 -0700;  author: kai;  state: Exp;  lines: +26 -8;
(tramp-uudecode): New variable.  Shell function `tramp_uudecode'
for decoding to standard output for those Unices that don't have
it.
(tramp-post-connection): Install the function on the remote host.
(tramp-coding-commands): Add an alternative for using the
`tramp_uudecode' shell function.
----------------------------
revision 2.170
date: 2002-08-04 05:22:40 -0700;  author: kai;  state: Exp;  lines: +11 -6;
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode): Doc fix.  From Andreas
Schwab.
(tramp-bug): New variables to report.
----------------------------
revision 2.169
date: 2002-08-04 04:31:45 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-find-inline-encoding): When checking the decoding command,
some commands fail when reading from /dev/null.  So we pass a
known string through the encoding command and pass that through
the decoding command.  So we know whether the decoding command
can deal with some real input.
----------------------------
revision 2.168
date: 2002-08-04 01:44:50 -0700;  author: kai;  state: Exp;  lines: +12 -2;
* tramp.el (tramp-bug): Add wording about additional info to
include in bug report.
(tramp-find-shell): Set $PS1 for invocation of second shell (for
tilde expansion).
(tramp-find-shell): Shell prompt must match at end of buffer.  Do
this also for fallback shell prompt.
(tramp-find-shell): More debugging output.

* Makefile (VERSION): Bump.
----------------------------
revision 2.167
date: 2002-08-03 13:52:41 -0700;  author: kai;  state: Exp;  lines: +5 -5;
(tramp-perl-encode, tramp-perl-encode): Double the
backslashes in the string.
----------------------------
revision 2.166
date: 2002-08-03 08:45:12 -0700;  author: kai;  state: Exp;  lines: +11 -7;
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-encode): Strings are passwd
through `format', so double all percent characters and document.
----------------------------
revision 2.165
date: 2002-08-03 02:25:07 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.6 released.
----------------------------
revision 2.164
date: 2002-08-03 02:11:08 -0700;  author: kai;  state: Exp;  lines: +46 -40;
(tramp-perl-encode, tramp-perl-decode): New (faster) versions.
From Juanma Barranquero <lektu@terra.es>.
----------------------------
revision 2.163
date: 2002-08-03 02:03:37 -0700;  author: kai;  state: Exp;  lines: +9 -9;
(tramp-handle-make-directory): save-excursion.
(tramp-default-method): Change to "ssh".
----------------------------
revision 2.162
date: 2002-07-31 08:25:09 -0700;  author: kai;  state: Exp;  lines: +15 -9;
(tramp-handle-file-truename): Invoke Ange-FTP properly.
(tramp-handle-expand-many-files): Don't try to invoke Ange-FTP
twice.
----------------------------
revision 2.161
date: 2002-07-31 07:04:09 -0700;  author: kai;  state: Exp;  lines: +13 -2;
*** empty log message ***
----------------------------
revision 2.160
date: 2002-07-31 05:34:46 -0700;  author: kai;  state: Exp;  lines: +107 -4;
(tramp-wrong-passwd-regexp): Restructure.  Add
additional alternative.
(tramp-action-permission-denied): Show *tramp/foo* buffer so that
the user knows why.
(tramp-su-program): Add defvar for this method parameter.  From
Juanma Barranquero <lektu@terra.es>.
(tramp-perl-encode-with-module): Rename from tramp-perl-encode.
(tramp-perl-decode-with-module): Rename from tramp-perl-decode.
(tramp-perl-encode, tramp-perl-decode): New implementations that
do not use any Perl modules.  From Juanma Barranquero
<lektu@terra.es>.
(tramp-post-connection): Create shell functions tramp_encode,
tramp_decode, tramp_encode_with_module, tramp_decode_with_module
for the new Perl snippets.
(tramp-coding-commands): Add entries for the two
implementations (one with module, one without module).
----------------------------
revision 2.159
date: 2002-07-31 02:59:03 -0700;  author: kai;  state: Exp;  lines: +17 -4;
(tramp-wrong-passwd-regexp): Restructure.  Add
additional alternative.
(tramp-action-permission-denied): Show *tramp/foo* buffer so that
the user knows why.
----------------------------
revision 2.158
date: 2002-07-30 12:53:26 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Typo in comment, not worthy of a change log entry.
----------------------------
revision 2.157
date: 2002-07-30 08:33:58 -0700;  author: kai;  state: Exp;  lines: +23 -15;
(tramp-coding-commands): Provide base64 encoding with recode.
----------------------------
revision 2.156
date: 2002-07-29 10:41:16 -0700;  author: kai;  state: Exp;  lines: +26 -1;
(tramp-action-yesno): New function.
(tramp-yesno-prompt-regexp): New variable.
(tramp-actions-before-shell): Use them.
----------------------------
revision 2.155
date: 2002-07-29 07:09:49 -0700;  author: kai;  state: Exp;  lines: +15 -6;
* Makefile (prepversion): Edit tramp.el instead of creating new
file tramp-version.el.
(clean): Don't remove tramp-version.el, the file doesn't exist
anymore.

* tramp.el (tramp-perl-encode, tramp-perl-decode): Very simple
implementations requiring the Perl module MIME::Base64.
(tramp-coding-commands): Use them.
(tramp-version): Move back here from tramp-version.el.  The
variable is automatically edited from the Makefile.
(tramp-login-prompt-regexp, tramp-password-prompt-regexp)
(tramp-wrong-passwd-regexp): Remove "$" from regexp, it must match
at end of buffer anyway.
(tramp-action-login, tramp-action-succeed)
(tramp-action-permission-denied, tramp-multi-action-login)
(tramp-multi-action-succeed)
(tramp-multi-action-permission-denied): Erase buffer when
finished.
(tramp-process-one-action, tramp-process-one-multi-action):
Always search from point-min.
(tramp-enter-password): Erase buffer.
----------------------------
revision 2.154
date: 2002-07-29 01:22:47 -0700;  author: kai;  state: Exp;  lines: +10 -1;
* Makefile (prepversion): Edit tramp.texi for version number
instead of creating new file tramp-version.texi.

* tramp.texi: Define macro @trampver here instead of in
tramp-version.texi.  The value is edited from Makefile.

* Makefile (prepversion): Edit tramp.el instead of creating new
file tramp-version.el.
(clean): Don't remove tramp-version.el, the file doesn't exist
anymore.

* tramp.el (tramp-perl-encode, tramp-perl-decode): Very simple
implementations requiring the Perl module MIME::Base64.
(tramp-coding-commands): Use them.
(tramp-version): Move back here from tramp-version.el.  The
variable is automatically edited from the Makefile.
----------------------------
revision 2.153
date: 2002-07-29 00:32:04 -0700;  author: kai;  state: Exp;  lines: +28 -18;
(tramp-perl-encode, tramp-perl-decode): Very simple
implementations requiring the Perl module MIME::Base64.
(tramp-coding-commands): Use them.
----------------------------
revision 2.152
date: 2002-07-28 04:37:44 -0700;  author: kai;  state: Exp;  lines: +13 -55;
(tramp-multi-actions): New variable, like
tramp-actions-before-shell, but for multi-hop connections.
(tramp-perl-encode, tramp-perl-decode): New variables.  Contain
Perl code for uuencode, uudecode.
(tramp-post-connection): Use new Perl encode/decode implementation.
(tramp-coding-commands): Ditto.
(tramp-perl-mime-encode, tramp-perl-mime-decode): Remove.  This
code does not work.
(tramp-invoke-ange-ftp): Require ange-ftp to avoid binding
ange-ftp-name-format when it is unbound.
(tramp-coding-commands): Remove Perl alternative.  Fix doc.
----------------------------
revision 2.151
date: 2002-07-28 03:00:59 -0700;  author: kai;  state: Exp;  lines: +174 -85;
(tramp-multi-actions): New variable, like
tramp-actions-before-shell, but for multi-hop connections.
(tramp-perl-encode, tramp-perl-decode): New variables.  Contain
Perl code for uuencode, uudecode.
(tramp-post-connection): Use new Perl encode/decode implementation.
(tramp-coding-commands): Ditto.
----------------------------
revision 2.150
date: 2002-07-27 12:25:53 -0700;  author: kai;  state: Exp;  lines: +2 -1;
tramp-maybe-open-connection: Brain fart.  Check that
tramp-last-cmd-time is set before accessing it.
----------------------------
revision 2.149
date: 2002-07-27 09:34:01 -0700;  author: kai;  state: Exp;  lines: +6 -6;
(tramp-handle-file-attributes): Make sure to call Ange-FTP in all
cases, not only for existing files.  Make sure not to call
tramp-handle-file-exists-p on an Ange-FTP filename.
----------------------------
revision 2.148
date: 2002-07-27 09:25:51 -0700;  author: kai;  state: Exp;  lines: +3 -3;
Minor tweak of last change.  Not worthy of a ChangeLog entry.
----------------------------
revision 2.147
date: 2002-07-27 09:24:47 -0700;  author: kai;  state: Exp;  lines: +23 -4;
(tramp-maybe-open-connection): Look to see if process is really
still alive.
----------------------------
revision 2.146
date: 2002-07-27 08:26:42 -0700;  author: kai;  state: Exp;  lines: +231 -472;
(tramp-handle-insert-directory): Expand file name.
(tramp-actions-before-shell): New variable of actions to perform
before we get a shell prompt.
(tramp-action-login, tramp-action-password, tramp-action-succeed)
(tramp-action-permission-denied): New functions, used in above
variable.
(tramp-process-one-action, tramp-process-actions): Process the
actions.
(tramp-open-connection-telnet, tramp-open-connection-rsh): Use new
action mechanism, call tramp-process-actions.
(tramp-methods): Replace a lot of methods because of
autodetection of mimencode/uuencode.  The new names are a bit
longer but more mnemonic.
----------------------------
revision 2.145
date: 2002-07-27 05:21:55 -0700;  author: kai;  state: Exp;  lines: +153 -68;
(tramp-handle-insert-directory): Expand file name.
(tramp-actions-before-shell): New variable of actions to perform
before we get a shell prompt.
(tramp-action-login, tramp-action-password, tramp-action-succeed)
(tramp-action-permission-denied): New functions, used in above
variable.
(tramp-process-one-action, tramp-process-actions): Process the
actions.
(tramp-open-connection-telnet, tramp-open-connection-rsh): Use new
action mechanism, call tramp-process-actions.
----------------------------
revision 2.144
date: 2002-07-26 13:26:21 -0700;  author: kai;  state: Exp;  lines: +68 -67;
(tramp-handle-file-local-copy)
(tramp-handle-write-region): Call
`tramp-get-{de,en}coding-{function,command}' with four args.
(tramp-post-connection): Always send Perl implementation of
mimencode and mimedecode when Perl is available.
(tramp-get-encoding-command, tramp-get-decoding-command)
(tramp-get-encoding-function, tramp-get-decoding-function): New
implementation, uses auto-detected connection properties.
----------------------------
revision 2.143
date: 2002-07-26 10:12:36 -0700;  author: kai;  state: Exp;  lines: +192 -63;
* tramp.texi (Top): Add copying.
(Overview, Obtaining @tramp{}, Installation, Multi-hop Methods)
(Remote Programs, Multi-hop filename syntax)
(Frequently Asked Questions): Reformat.

* Makefile (clean): Delete more.

* tramp.el (tramp-coding-commands): New variable.
(tramp-find-inline-encoding): New function.
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file): Do expand-file-name on arg.

* Makefile: Bump version, preparing for next release.  (But that
release is not soon.)
----------------------------
revision 2.142
date: 2002-07-23 09:46:30 -0700;  author: youngs;  state: Exp;  lines: +1 -9;

2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (all): Export $VERSION to the subdirectories.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target to create tramp-version.el.
	(all): Use it.
	(clean): Add tramp-version.elc.

	* tramp.el (tramp-version): Removed, we create it on the fly from
	the Makefile.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target.  Creates
	tramp-version.texi.
	(all): Use it.
	(clean): Add tramp-version.texi.

	* tramp.texi: Include tramp-version.texi.
	(Top): Use macro defined in tramp-version.texi.
	(copying): Ditto.
----------------------------
revision 2.141
date: 2002-07-23 02:59:47 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-version): Bump version to 2.0.3.

* Makefile (VERSION): New version 2.0.3.
----------------------------
revision 2.140
date: 2002-07-23 02:51:25 -0700;  author: kai;  state: Exp;  lines: +23 -3;
(tramp-handle-directory-files): Handle fifth, XEmacs-specific,
arg FILES-ONLY.
----------------------------
revision 2.139
date: 2002-07-23 02:38:24 -0700;  author: kai;  state: Exp;  lines: +19 -18;
(tramp-open-connection-su, tramp-multi-connect-telnet)
(tramp-multi-connect-rlogin, tramp-multi-connect-su)
(tramp-make-tramp-file-name, tramp-make-tramp-multi-file-name):
Correct alist for `format-spec', use (a . b) instead of (a b).
----------------------------
revision 2.138
date: 2002-07-21 01:44:54 -0700;  author: kai;  state: Exp;  lines: +20 -34;
(tramp-open-connection-su, tramp-multi-connect-telnet)
(tramp-multi-connect-rlogin, tramp-multi-connect-su)
(tramp-make-tramp-file-name, tramp-make-tramp-multi-file-name):
Use backticks in format-spec for brevity and to avoid
character/number confusion in XEmacs.
----------------------------
revision 2.137
date: 2002-07-20 03:14:38 -0700;  author: kai;  state: Exp;  lines: +3 -5;
(tramp-do-copy-or-rename-via-buffer): Remove fifth arg trampbuf.
(tramp-do-copy-or-rename-file): Call
tramp-do-copy-or-rename-via-buffer with four args.
----------------------------
revision 2.136
date: 2002-07-20 03:10:37 -0700;  author: kai;  state: Exp;  lines: +68 -73;
(tramp-do-copy-or-rename-via-buffer): New function.
(tramp-do-copy-or-rename-file): Use it.  Change and simplify
logic.  Omit special case of invoking rcp directly to copy the
files.
----------------------------
revision 2.135
date: 2002-07-19 07:31:16 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-multi-sh-program): New variable.
(tramp-open-connection-multi): Use it.
Bump version to 2.0.2.

* Makefile (VERSION): New version 2.0.2.
----------------------------
revision 2.134
date: 2002-07-19 06:29:01 -0700;  author: youngs;  state: Exp;  lines: +21 -21;

2002-07-19  Steve Youngs  <youngs@xemacs.org>

	* tramp.el: Revert my previous patch.  It's better to work around
	the colour prompt problem outside of Tramp, eg in ~/.bashrc or
	similar.
----------------------------
revision 2.133
date: 2002-07-19 00:51:47 -0700;  author: kai;  state: Exp;  lines: +20 -1;
(tramp-multi-sh-program): New variable.
(tramp-open-connection-multi): Use it.
----------------------------
revision 2.132
date: 2002-07-18 15:35:45 -0700;  author: youngs;  state: Exp;  lines: +22 -22;

2002-07-19  Steve Youngs  <youngs@xemacs.org>

	* tramp.el (tramp-find-shell): Remove "\\'" from regexp so we can
	deal with shell prompts that have colour control characters in
	them.
	(tramp-open-connection-telnet): Ditto.
	(tramp-open-connection-rsh): Ditto.
	(tramp-open-connection-su): Ditto.
	(tramp-open-connection-multi): Ditto.
	(tramp-multi-connect-telnet): Ditto.
	(tramp-multi-connect-rlogin): Ditto.
	(tramp-multi-connect-su): Ditto.
	(tramp-open-connection-setup-interactive-shell): Ditto.

2002-07-18  Steve Youngs  <youngs@xemacs.org>

	* tramp.el (tramp-multi-file-name-structure-separate): Typo, it's
	name was set to 'tramp-file-name-structure-separate'.
----------------------------
revision 2.131
date: 2002-07-18 12:43:52 -0700;  author: kai;  state: Exp;  lines: +95 -3;
(tramp-methods): Rename methods invoking "ssh1" or
"ssh2" to longer names.  Use old names sm1, sm2, su1, su2 and so
on for methods invoking "ssh -1" or "ssh -2".
----------------------------
revision 2.130
date: 2002-07-13 10:38:18 -0700;  author: kai;  state: Exp;  lines: +5 -5;
(tramp-multi-file-name-structure-unified): Add missing
initial slash.  Colon is moved from start to end of hop regexp,
adjust this regexp accordingly.
(tramp-file-name-structure-separate): Bug fix.
(tramp-multi-file-name-hop-structure-unified): Move colon from
beginning to end.
----------------------------
revision 2.129
date: 2002-07-11 13:23:28 -0700;  author: kai;  state: Exp;  lines: +0 -2;
Remove obsolete comment.
----------------------------
revision 2.128
date: 2002-07-11 13:22:43 -0700;  author: kai;  state: Exp;  lines: +19 -8;
(tramp-handle-make-symbolic-link): Complete implementation.
----------------------------
revision 2.127
date: 2002-07-10 05:34:55 -0700;  author: kai;  state: Exp;  lines: +7 -3;
(tramp-default-method): New default value "sm" for all Emacsen.
(tramp-default-method-alist): Invoke Ange-FTP for some user/host
combinations on Emacs.
----------------------------
revision 2.126
date: 2002-07-10 02:08:02 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp-file-name-structure): Add missing paren.
(tramp-file-name-regexp-unified, tramp-file-name-regexp-separate):
Add autoload cookies.
----------------------------
revision 2.125
date: 2002-07-10 01:30:27 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-file-name-structure): Add missing paren.
----------------------------
revision 2.124
date: 2002-07-09 13:10:57 -0700;  author: kai;  state: Exp;  lines: +8 -2;
(tramp-default-method): New default value "ftp" on Emacs, "sm" on
XEmacs.
----------------------------
revision 2.123
date: 2002-07-09 13:06:21 -0700;  author: kai;  state: Exp;  lines: +132 -41;
(tramp-file-name-structure-unified)
(tramp-file-name-structure-separate)
(tramp-file-name-regexp-unified)
(tramp-make-tramp-file-format-unified)
(tramp-make-tramp-file-format-separate)
(tramp-make-tramp-file-user-nil-format-unified)
(tramp-make-tramp-file-user-nil-format-separate)
(tramp-multi-file-name-structure-unified)
(tramp-multi-file-name-structure-separate)
(tramp-file-name-structure-unified)
(tramp-file-name-structure-separate)
(tramp-multi-file-name-hop-structure-unified)
(tramp-multi-file-name-hop-structure-separate)
(tramp-make-multi-tramp-file-format-unified)
(tramp-make-multi-tramp-file-format-separate): New constants.
(tramp-file-name-structure, tramp-file-name-regexp)
(tramp-make-tramp-file-format)
(tramp-make-tramp-file-user-nil-format)
(tramp-multi-file-name-structure)
(tramp-file-name-structure)
(tramp-multi-file-name-hop-structure)
(tramp-make-multi-tramp-file-format): Use them as default values.
On Emacs, use the *-unified variants, on XEmacs, use the
*-separate variants.  Tramp and Ange-FTP share a common filename
syntax on Emacs, but Tramp and EFS use separate filename syntaxes
on XEmacs.
(tramp-handle-ange-ftp): Removed.
(tramp-disable-ange-ftp): New function to disable Ange-FTP if
enabled.  Unconditionally call it at top level when file is
loaded.  This should be safe since XEmacs uses EFS.
----------------------------
revision 2.122
date: 2002-07-09 10:10:24 -0700;  author: kai;  state: Exp;  lines: +9 -2;
(tramp-handle-file-name-directory): Don't return "/"
for the root directory on a remote host.
----------------------------
revision 2.121
date: 2002-07-03 04:17:17 -0700;  author: kai;  state: Exp;  lines: +2 -2;
(tramp-send-eof): Doc string typo.
(tramp-kill-process): Likewise.
From Juanma Barranquero <lektu@terra.es>.
----------------------------
revision 2.120
date: 2002-07-02 02:29:23 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(tramp-handle-ange-ftp): Add todo items for handling
EFS, too.
----------------------------
revision 2.119
date: 2002-06-27 08:42:30 -0700;  author: kai;  state: Exp;  lines: +66 -61;
(tramp-handle-ange-ftp): New function to set up Tramp
configuration suitable for replacing Ange-FTP.
(tramp-repair-jka-compr): Factor out some previously top-level
code into an extra function.  Also call it at top-level.
----------------------------
revision 2.118
date: 2002-06-26 06:22:20 -0700;  author: kai;  state: Exp;  lines: +2 -2;
(tramp-wait-for-regexp, tramp-wait-for-output): Convert int to
string before passing it to `insert'.
----------------------------
revision 2.117
date: 2002-06-26 03:56:26 -0700;  author: kai;  state: Exp;  lines: +72 -35;
*** empty log message ***
----------------------------
revision 2.116
date: 2002-06-25 13:03:54 -0700;  author: kai;  state: Exp;  lines: +18 -13;
* tramp.texi (External transfer methods, Inline methods):
Document the "-p" hack for ssh.

* lisp/tramp.el (tramp-version): New version 2.0.1.
----------------------------
revision 2.115
date: 2002-06-25 10:59:00 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(VERSION): New version 2.0.1.
----------------------------
revision 2.114
date: 2002-06-24 07:43:45 -0700;  author: kai;  state: Exp;  lines: +40 -42;
(tramp-handle-file-truename): Don't invoke Ange-FTP.
(tramp-invoke-ange-ftp): Remove superfluous IDX-LIST argument.
Callers changed.
----------------------------
revision 2.113
date: 2002-06-24 07:38:54 -0700;  author: kai;  state: Exp;  lines: +9 -8;
(tramp-handle-file-truename): Don't invoke Ange-FTP.
----------------------------
revision 2.112
date: 2002-06-24 06:53:37 -0700;  author: kai;  state: Exp;  lines: +4 -4;
(tramp-ftp-method): New user option.
(with-parsed-tramp-file-name): New macro for the usual big `let'
statement to dissect a file-name.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-truename, tramp-handle-file-directory-p)
(tramp-handle-file-regular-p, tramp-handle-file-symlink-p)
(tramp-handle-file-writable-p, tramp-handle-file-writable-p): Use
the new macro and forward call to Ange-FTP if applicable.
(tramp-make-ange-ftp-file-name): New helper function to convert a
file name into an Ange-FTP file name, used by
`tramp-invoke-ange-ftp'.
(tramp-invoke-ange-ftp): New function to forward calls to
Ange-FTP.
----------------------------
revision 2.111
date: 2002-06-24 06:51:14 -0700;  author: kai;  state: Exp;  lines: +1017 -956;
(tramp-ftp-method): New user option.
(with-parsed-tramp-file-name): New macro for the usual big `let'
statement to dissect a file-name.
(tramp-handle-make-symbolic-link, tramp-handle-load)
(tramp-handle-file-name-directory)
(tramp-handle-file-name-nondirectory, tramp-handle-file-truename)
(tramp-handle-file-truename, tramp-handle-file-directory-p)
(tramp-handle-file-regular-p, tramp-handle-file-symlink-p)
(tramp-handle-file-writable-p, tramp-handle-file-writable-p): Use
the new macro and forward call to Ange-FTP if applicable.
(tramp-make-ange-ftp-file-name): New helper function to convert a
file name into an Ange-FTP file name, used by
`tramp-invoke-ange-ftp'.
(tramp-invoke-ange-ftp): New function to forward calls to
Ange-FTP.
----------------------------
revision 2.110
date: 2002-06-20 09:40:37 -0700;  author: kai;  state: Exp;  lines: +2 -1;
tramp-default-method: Reference tramp-default-method-alist in docstring.
----------------------------
revision 2.109
date: 2002-06-20 09:38:00 -0700;  author: kai;  state: Exp;  lines: +45 -12;
(tramp-default-method-alist): New user option.
(tramp-find-default-method): Use it.
----------------------------
revision 2.108
date: 2002-06-19 04:40:22 -0700;  author: kai;  state: Exp;  lines: +21 -4;
(tramp-sh-extra-args): New variable.
(tramp-find-shell): Use it.
----------------------------
revision 2.107
date: 2002-06-17 03:57:20 -0700;  author: kai;  state: Exp;  lines: +1 -2;
Include version number.
(MANIFEST): Don't include directory name "tramp/" in the entries.
(tar): Create a tramp-$(VERSION).tar.gz file.
(dist, savannah): tramp.tar.gz renamed to tramp-$(VERSION).tar.gz.
----------------------------
revision 2.106
date: 2002-06-16 09:20:22 -0700;  author: kai;  state: Exp;  lines: +4 -2;
New todo item.
----------------------------
revision 2.105
date: 2002-06-15 10:44:15 -0700;  author: kai;  state: Exp;  lines: +3 -3;
* Makefile (savannah): Don't echo the echo commands.

* tramp.texi (Obtaining @tramp{}): Use `@@' for a literal at sign.

* tramp.el (tramp-handle-file-truename): Lower numchase-limit
(max number of symlink traversals) from 30 to 20.
----------------------------
revision 2.104
date: 2002-06-14 06:31:53 -0700;  author: kai;  state: Exp;  lines: +4 -3;
(tramp-bug-report-address): Change bug reporting
address to Savannah.
----------------------------
revision 2.103
date: 2002-06-10 08:17:29 -0700;  author: kai;  state: Exp;  lines: +18 -2;
(tramp-methods): New method "fcp".  Suggested by
graydon@redhat.com.
----------------------------
revision 2.102
date: 2002-06-05 01:57:08 -0700;  author: kai;  state: Exp;  lines: +28 -14;
Sync with latest SourceForge changes.
----------------------------
revision 2.101
date: 2002-05-22 02:23:36 -0700;  author: kaig;  state: Exp;  lines: +27 -31;
(tramp-find-shell, tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-multi, tramp-multi-connect-telnet)
(tramp-multi-connect-rlogin)
(tramp-open-connection-setup-interactive-shell): Shell prompt
must match at end of buffer.
----------------------------
revision 2.100
date: 2002-05-21 03:48:43 -0700;  author: kaig;  state: Exp;  lines: +3 -3;
(tramp-send-linewise): Use sleep-for instead of sit-for
to wait 0.1s.  sit-for does not wait if the user types ahead.
----------------------------
revision 2.99
date: 2002-05-20 03:16:42 -0700;  author: kaig;  state: Exp;  lines: +3 -3;
* tramp.el (tramp-send-linewise): Wait 0.1s instead of 0.001s.
----------------------------
revision 2.98
date: 2002-05-19 14:30:15 -0700;  author: kaig;  state: Exp;  lines: +47 -14;
* tramp.el (tramp-send-linewise): New function.
(tramp-post-connection): Use it for sending long strings.
----------------------------
revision 2.97
date: 2002-04-14 08:52:38 -0700;  author: kaig;  state: Exp;  lines: +18 -2;
* tramp.texi (External transfer methods): Document the `pscp'
method.

* tramp.el (tramp-methods): New method "pscp".  Suggestion from
lawrence mitchell.
----------------------------
revision 2.96
date: 2002-04-14 05:30:35 -0700;  author: kaig;  state: Exp;  lines: +54 -18;
* tramp.texi (Inline methods): Document the `km', `plinku' and
`plinkm' methods.

* tramp.el (file-expand-wildcards): Advise it even on Emacs 21.
(tramp-methods): New methods "plinku" and "plinkm".
"plinku" was suggested by Adam Przepiórkowski.
----------------------------
revision 2.95
date: 2002-04-10 10:16:25 -0700;  author: kaig;  state: Exp;  lines: +18 -12;
(tramp-shell-quote-argument): When calling
shell-quote-argument internally, make sure it uses Unix-like
behavior, not Windows-like behavior.  (This is done by binding
system-type, which is certainly not the right way to do it!)
----------------------------
revision 2.94
date: 2002-03-25 08:32:25 -0800;  author: kaig;  state: Exp;  lines: +4 -2;
Erase buffer before expanding tilde, too.
----------------------------
revision 2.93
date: 2002-03-25 08:30:02 -0800;  author: kaig;  state: Exp;  lines: +4 -3;
(tramp-handle-expand-file-name): Erase buffer after expanding tilde.
----------------------------
revision 2.92
date: 2002-03-25 01:29:39 -0800;  author: kaig;  state: Exp;  lines: +10 -9;
(tramp-handle-add-name-to-file): Use "ln" connection
property instead of literal "ln" in command.
(tramp-post-connection): Only set "ln" connection property if
that program could be found.  Erase buffer when done.
----------------------------
revision 2.91
date: 2002-03-12 02:07:47 -0800;  author: kaig;  state: Exp;  lines: +3 -2;
(tramp-post-connection): Make sure to leave an empty
connection buffer on exit.
----------------------------
revision 2.90
date: 2002-03-06 03:54:26 -0800;  author: kaig;  state: Exp;  lines: +24 -6;
(tramp-handle-make-symbolic-link)
(tramp-handle-directory-files)
(tramp-handle-file-name-all-completions)
(tramp-handle-dired-call-process, tramp-handle-insert-directory)
(tramp-handle-expand-file-name, tramp-handle-shell-command): Make
sure to "cd" back to the home dir.  Otherwise, previous commands
could affect future commands because of the wrong cwd.
(tramp-shell-quote-argument): Don't invoke substring on short
strings.
----------------------------
revision 2.89
date: 2002-03-01 03:30:54 -0800;  author: kaig;  state: Exp;  lines: +6 -4;
(tramp-post-connection): Issue message when checking
encoding/decoding commands is finished.
----------------------------
revision 2.88
date: 2002-02-18 07:17:19 -0800;  author: kaig;  state: Exp;  lines: +3 -3;
(file-expand-wildcards): Make sure that the return
value is always a list.
----------------------------
revision 2.87
date: 2002-02-11 17:49:51 -0800;  author: youngs;  state: Exp;  lines: +4 -4;
2002-02-12  Steve Youngs  <youngs@xemacs.org>

	* tramp.el (tramp-handle-insert-directory): Change "#'identity" to
	"'identity" it was causing a invalid read syntax error that edebug
	brought to the surface.
	Add a "." after directory name so that symlinked directories
	display properly on platforms that have breakage on symlinks like
	Solaris.
----------------------------
revision 2.86
date: 2002-02-08 00:29:59 -0800;  author: kaig;  state: Exp;  lines: +14 -4;
(file-expand-wildcards): Improve the kludge by looking
if the path name part of the filename contains wildcard
characters at all.  If this is not the case, we avoid calling the
original function at all.
----------------------------
revision 2.85
date: 2002-02-01 04:25:08 -0800;  author: kaig;  state: Exp;  lines: +20 -17;
(tramp-handle-verify-visited-file-modtime): When the
file does not exist, it is not modified.
----------------------------
revision 2.84
date: 2002-01-31 09:37:17 -0800;  author: kaig;  state: Exp;  lines: +3 -3;
(tramp-handle-verify-visited-file-modtime): Don't use
modtime from `file-attributes' if it is nil.
----------------------------
revision 2.83
date: 2002-01-22 09:24:23 -0800;  author: kaig;  state: Exp;  lines: +12 -2;
(tramp-kill-process): New function.
(tramp-post-connection): Kill connection process if something
goes wrong.
----------------------------
revision 2.82
date: 2002-01-22 04:43:31 -0800;  author: kaig;  state: Exp;  lines: +3 -5;
(tramp-handle-insert-file-contents): Remove debug message
referring to `last-coding-system-used' -- it does not exist on
all Emacsen.
(toplevel): New todo item.
----------------------------
revision 2.81
date: 2002-01-22 04:39:05 -0800;  author: kaig;  state: Exp;  lines: +5 -3;
(tramp-handle-file-local-copy): Use tramp-message-for-buffer, not
tramp-message.
----------------------------
revision 2.80
date: 2002-01-21 23:39:06 -0800;  author: kaig;  state: Exp;  lines: +49 -36;
(tramp-handle-insert-file-contents): Use
tramp-message-for-buffer, not tramp-message.
(tramp-message): Prefix all messages with "tramp:".
----------------------------
revision 2.79
date: 2002-01-21 23:34:03 -0800;  author: kaig;  state: Exp;  lines: +7 -6;
* tramp.el (tramp-handle-set-visited-file-modtime): Save
`last-coding-system-used' in a way that works even if the
variable is not defined.

* Makefile (xemacs): New target: copy stuff to the XEmacs package
source directory.
----------------------------
revision 2.78
date: 2002-01-21 02:54:42 -0800;  author: kaig;  state: Exp;  lines: +48 -30;
(top-level, tramp-run-real-handler, efs-ftp-path):
Disable special handling for ange-ftp and EFS.  This was only
needed when Tramp names also matched the ange-ftp filename regexp.
This experimental change only comments out the relevant sections.
----------------------------
revision 2.77
date: 2002-01-20 08:39:39 -0800;  author: kaig;  state: Exp;  lines: +4 -4;
* tramp.texi (External transfer methods): Document double use of
`-t' for the `scpx' method.  Explain why it is useful for Windows
users.
(Inline methods): Ditto for the `smx' method.

* tramp.el: Remove some todo items which are done.
(tramp-methods): Use doubled `-t -t' for `scpx' and `smx'
methods.
----------------------------
revision 2.76
date: 2002-01-20 02:57:31 -0800;  author: kaig;  state: Exp;  lines: +2 -10;
Remove some todo items which are done.
----------------------------
revision 2.75
date: 2002-01-20 02:42:05 -0800;  author: kaig;  state: Exp;  lines: +20 -9;
(tramp-handle-set-visited-file-modtime): Take care to not clobber
`last-coding-system-used' -- it would confuse jka-compr.
----------------------------
revision 2.74
date: 2002-01-20 00:30:00 -0800;  author: kaig;  state: Exp;  lines: +7 -6;
(tramp-handle-write-region): When calling
`write-region' to write the temp file, pass `no-message' for
VISIT.  If our own VISIT arg is true, we explicitly call
`set-visited-file-modtime' later on.  If we pass VISIT=t when
writing the temp file, the visited-file-modtime information of
the buffer is clobbered by a local time, which will bite us when
the local and remote times are out of sync.
----------------------------
revision 2.73
date: 2002-01-19 11:21:11 -0800;  author: kaig;  state: Exp;  lines: +8 -5;
(tramp-time-diff): `itimer-time-difference' expects three-element
lists; pad short lists when calling that function.  Reported by
Skip Montanaro <skip@pobox.com>.
----------------------------
revision 2.72
date: 2002-01-19 04:13:34 -0800;  author: kaig;  state: Exp;  lines: +4 -4;
(tramp-handle-verify-visited-file-modtime): Allow 1 sec
difference between times.
----------------------------
revision 2.71
date: 2002-01-19 04:00:21 -0800;  author: kaig;  state: Exp;  lines: +4 -2;
(tramp-handle-set-visited-file-modtime): If time-list is
provided, call real handler with that data.
----------------------------
revision 2.70
date: 2002-01-19 03:38:54 -0800;  author: kaig;  state: Exp;  lines: +8 -2;
(clear-visited-file-modtime): Advise this function; it
does not support filename handlers.  Set the Lisp variable that
we use for emulating modtime back to nil.
----------------------------
revision 2.69
date: 2002-01-10 02:30:29 -0800;  author: kaig;  state: Exp;  lines: +15 -11;
(tramp-handle-expand-file-name): Bind
directory-sep-char to "/" so that XEmacs on Windows does the
right thing.
(tramp-handle-file-truename): Return trailing "/" if input had
trailing "/".
----------------------------
revision 2.68
date: 2002-01-06 06:02:38 -0800;  author: kaig;  state: Exp;  lines: +22 -14;
(tramp-handle-file-truename): Use
`tramp-method-for-buffer' to make sure that log messages end up
in the right buffer.  Correct braino in symlink handling.
----------------------------
revision 2.67
date: 2002-01-05 04:27:57 -0800;  author: kaig;  state: Exp;  lines: +16 -5;
(tramp-split-string): New compat function.
(tramp-handle-file-truename): Use it.
----------------------------
revision 2.66
date: 2002-01-04 09:55:24 -0800;  author: kaig;  state: Exp;  lines: +19 -11;
(tramp-find-shell): If starting bash for tilde
expansion, provide `--norc' argument.
(tramp-handle-file-truename): More debugging output.  More Obiwan
errors.
----------------------------
revision 2.65
date: 2002-01-04 09:28:52 -0800;  author: kaig;  state: Exp;  lines: +37 -29;
(tramp-find-shell): If starting bash for tilde
expansion, provide `--norc' argument.
----------------------------
revision 2.64
date: 2002-01-02 08:51:08 -0800;  author: youngs;  state: Exp;  lines: +4 -4;
2002-01-03  Steve Youngs  <youngs@xemacs.org>

	* tramp.el (tramp-find-shell): Change order for choice of shell,
	put bash first.
----------------------------
revision 2.63
date: 2002-01-02 06:14:28 -0800;  author: kaig;  state: Exp;  lines: +8 -6;
(tramp-handle-file-truename): Another Obiwan error.
For relative symlinks "/a/b" pointing to "c/d", the "b" part
should not be part of the truename.
----------------------------
revision 2.62
date: 2002-01-01 11:51:18 -0800;  author: kaig;  state: Exp;  lines: +11 -2;
(tramp-handle-file-truename): Obiwan error.
(tramp-process-actions): New function.  Doesn't do anything yet.
----------------------------
revision 2.61
date: 2001-12-30 08:57:23 -0800;  author: kaig;  state: Exp;  lines: +3 -3;
(tramp-remote-path): Add /usr/contrib/bin.
Reported by Jason Mastaler.
----------------------------
revision 2.60
date: 2001-12-30 08:53:34 -0800;  author: kaig;  state: Exp;  lines: +5 -4;
(tramp-post-connection): Use parens around "test / -nt
/" command to find out if `test' supports the `-nt' switch.
Without the parens, /bin/sh as of BSD/OS 4.x crashes.
Reported by Jason Mastaler.
----------------------------
revision 2.59
date: 2001-12-29 13:21:57 -0800;  author: kaig;  state: Exp;  lines: +4 -3;
(tramp-find-ls-command): Look for `gls' in addition to `ls' and
`gnuls' binaries.
----------------------------
revision 2.58
date: 2001-12-29 13:13:39 -0800;  author: kaig;  state: Exp;  lines: +4 -4;
(tramp-check-ls-command): Return status of command to
check if ls supports the `-n' option should be zero, not non-nil.
----------------------------
revision 2.57
date: 2001-12-28 13:57:06 -0800;  author: kaig;  state: Exp;  lines: +5 -4;
Don't print message for checking decoding/encoding commands, unless
that check actually happens.
----------------------------
revision 2.56
date: 2001-12-28 13:56:12 -0800;  author: kaig;  state: Exp;  lines: +4 -2;
tramp-post-connection: Small comment change.
----------------------------
revision 2.55
date: 2001-12-28 13:52:46 -0800;  author: kaig;  state: Exp;  lines: +23 -7;
(tramp-post-connection): Move comment.  Check to see if
decoding and encoding commands work, if given in method
definition.
----------------------------
revision 2.54
date: 2001-12-27 23:07:46 -0800;  author: kaig;  state: Exp;  lines: +48 -3;
(tramp-file-name-handler-alist): New entry for
`file-truename'.
(tramp-handle-file-truename): New function.
----------------------------
revision 2.53
date: 2001-12-27 09:28:08 -0800;  author: kaig;  state: Exp;  lines: +25 -20;
(tramp-handle-set-visited-file-modtime): More error checking.  If
`file-attributes' returns modtime (0 0), then assume modtime isn't
known and revert to using `ls -ild'.  Previously, we checked if
Perl was available.
(tramp-handle-verify-visited-file-modtime): Check for modtime
being (0 0), rather than Perl being available.
(tramp-handle-write-region): Some sanity checking: make sure that
current buffer isn't changed while the function runs.  (Maybe this
is not necessary now?)  Only set-visited-file-modtime if VISIT is
t (used to check for non-nil).
(tramp-make-auto-save-file-name): Construct a local filename, then
run `make-auto-save-file-name' on it.  This makes sure that no
filename handlers will be run on that file.  (Specifically, this
avoids jka-compr -- we want auto-save files to be saved quickly.
This fixes the change from 2001-12-07 which aimed at doing the
same thing, but failed.)
----------------------------
revision 2.52
date: 2001-12-27 08:21:26 -0800;  author: kaig;  state: Exp;  lines: +11 -10;
(toplevel): Don't barf if jka-compr is already loaded.
Instead, make sure that jka-compr comes first in
file-name-handler-alist.
----------------------------
revision 2.51
date: 2001-12-26 11:35:13 -0800;  author: kaig;  state: Exp;  lines: +30 -13;
(tramp-buffer-file-attributes): Doc string fix.
(tramp-handle-set-visited-file-modtime): Don't barf if called
without arguments.  Use output of "ls -ild", not return value of
file-attributes, for tramp-buffer-file-attributes.
(tramp-handle-verify-visited-file-modtime): Use output of "ls
-ild", not return value of file-attributes, for
tramp-buffer-file-attributes.
(tramp-handle-insert-file-contents): Call set-visited-file-modtime
without args.
(tramp-handle-insert-file-contents): Ditto.
(tramp-handle-write-region): Pass VISIT arg on to call of real
handler.  (The old code of passing the `no-message' symbol instead
was a little strange -- an XEmacsism?)
(tramp-handle-write-region): Call set-visited-file-modtime, if
VISIT.
Remove some todo items.
----------------------------
revision 2.50
date: 2001-12-25 13:38:53 -0800;  author: kaig;  state: Exp;  lines: +37 -9;
(tramp-buffer-file-attributes): New variable.
(tramp-handle-set-visited-file-modtime): Use it in case the
remote end does not give us the right modtime.
(tramp-handle-verify-visited-file-modtime): Implementation.
----------------------------
revision 2.49
date: 2001-12-25 12:54:05 -0800;  author: kaig;  state: Exp;  lines: +4 -2;
New todo item.
----------------------------
revision 2.48
date: 2001-12-07 04:00:39 -0800;  author: kaig;  state: Exp;  lines: +13 -9;
(tramp-make-auto-save-file-name): Append "~" to
auto-save file name; this avoids jka-compr when auto-saving.
----------------------------
revision 2.47
date: 2001-12-06 04:34:38 -0800;  author: kaig;  state: Exp;  lines: +25 -3;
Make it work inside XEmacs, too.  From Stephen
J. Turnbull <stephen@xemacs.org>.
(MANIFEST): New directory layout.
----------------------------
revision 2.46
date: 2001-11-30 00:59:42 -0800;  author: kaig;  state: Exp;  lines: +89 -71;
(tramp-handle-file-name-all-completions): Return nil
if filename contains a slash.
(tramp-handle-directory-file-name): New implementation.  From
Philippe Troin <phil@fifi.org>.
----------------------------
revision 2.45
date: 2001-11-20 09:58:54 -0800;  author: kaig;  state: Exp;  lines: +10 -6;
(toplevel): Emit an error message if jka-compr is
already loaded.
----------------------------
revision 2.44
date: 2001-11-07 06:38:28 -0800;  author: kaig;  state: Exp;  lines: +30 -26;
* tramp-util.el (tramp-compile): Make sure default-directory is
set correctly.

* tramp.el (tramp-post-connection): Don't send Perl `mime-encode'
and `mime-decode' implementations unless really needed.
----------------------------
revision 2.43
date: 2001-11-02 08:58:28 -0800;  author: kaig;  state: Exp;  lines: +17 -2;
(file-expand-wildcards): Advise this function to work
around a problem in Emacs 20.x.  This is just a kludge!
----------------------------
revision 2.42
date: 2001-10-16 02:57:02 -0700;  author: kaig;  state: Exp;  lines: +10 -8;
(tramp-open-connection-su): Make sure that user name is
given.
----------------------------
revision 2.41
date: 2001-10-10 05:04:05 -0700;  author: kaig;  state: Exp;  lines: +7 -2;
Added comment.
----------------------------
revision 2.40
date: 2001-10-10 04:56:16 -0700;  author: kaig;  state: Exp;  lines: +10 -8;
(tramp-handle-file-name-directory): Return "/" if
`path' component is empty.
----------------------------
revision 2.39
date: 2001-10-01 08:21:52 -0700;  author: kaig;  state: Exp;  lines: +3 -3;
(tramp-file-name-structure): Allow dot in host names.
----------------------------
revision 2.38
date: 2001-09-29 13:01:01 -0700;  author: kaig;  state: Exp;  lines: +3 -3;
(tramp-file-name-structure): Make regexp less
restrictive to allow multi-hop filenames.
----------------------------
revision 2.37
date: 2001-09-27 09:44:05 -0700;  author: kaig;  state: Exp;  lines: +6 -2;
(tramp-bug): Report more info about multi-hop methods.
----------------------------
revision 2.36
date: 2001-09-20 06:29:07 -0700;  author: kaig;  state: Exp;  lines: +10 -12;
* tramp.texi (Module): New filenames.  Moved to SourceForge.

* tramp.el (tramp-bug-report-address): Update to reflect move to
SourceForge.
----------------------------
revision 2.35
date: 2001-09-08 15:24:27 -0700;  author: kaig;  state: Exp;  lines: +9 -2;
(Module): Add a todo item.
----------------------------
revision 2.34
date: 2001-08-11 15:02:33 -0700;  author: grossjoh;  state: Exp;  lines: +11 -11;
Default file name format changed again.  This time,
it's like /[method/user@host]/path/to/file.  The user@ part is
optional.  Multihop files are like
/[multiu/telnet:user@host/ssh:user2@host2]/path/to/file.
----------------------------
revision 2.33
date: 2001-08-05 13:39:51 -0700;  author: grossjoh;  state: Exp;  lines: +9 -9;
* tramp.el: Default file name format changed!  File names with
default method have changed from /r:user@host:/path/to/file to
/./user@host:/path/to/file.  Files with explicitly specified
method have changed from /r@meth:user@host:/path/to/file to
/./@meth:user@host:/path/to/file.  (Note one more colon for method
spec!)

* tramp.texi: New default file name format.
* tramp_ja.texi: Ditto.
----------------------------
revision 2.32
date: 2001-07-31 06:12:19 -0700;  author: grossjoh;  state: Exp;  lines: +16 -13;
(tramp-barf-unless-okay): Add new arg `signal' and
signal that signal rather than calling `error'.
----------------------------
revision 2.31
date: 2001-07-29 13:14:40 -0700;  author: grossjoh;  state: Exp;  lines: +4 -3;
Include file-name-handler-alist in bug reports.
----------------------------
revision 2.30
date: 2001-07-13 02:34:10 -0700;  author: grossjoh;  state: Exp;  lines: +7 -4;
(Multi-hop Methods): Say how to customize multi-hop
connection methods.  Provide example.
----------------------------
revision 2.29
date: 2001-06-03 11:41:26 -0700;  author: grossjoh;  state: Exp;  lines: +7 -6;
(tramp-handle-write-region): Use "<<EOF" style of sending file
contents on standard input.  It seems the old way of omitting
"<<EOF" from the command, then using process-send-eof to indicate
end of file, sent an `exit' command to the shell.  This also
happens when sending an explicit Ctrl-D character.  This appears
to be needed for the `suu' method (while it is not needed for the
`sm' method).  Go figure.
----------------------------
revision 2.28
date: 2001-06-03 06:29:39 -0700;  author: grossjoh;  state: Exp;  lines: +11 -10;
(tramp-handle-delete-file): Signal file error if deletion failed.
This depends on `rm -f' on the remote end to set the exit status
correctly.  This does not provide a meaningful message.  How do we
extract the error message from `rm -f' from the buffer?
----------------------------
revision 2.27
date: 2001-06-03 06:14:41 -0700;  author: grossjoh;  state: Exp;  lines: +9 -7;
(tramp-handle-write-region): Remove superfluous `echo hello'
command which clobbers the exit status.
----------------------------
revision 2.26
date: 2001-06-03 05:57:06 -0700;  author: grossjoh;  state: Exp;  lines: +4 -6;
(tramp-find-executable): Remove superfluous newline.
----------------------------
revision 2.25
date: 2001-06-03 05:43:31 -0700;  author: grossjoh;  state: Exp;  lines: +6 -6;
(tramp-send-eof): Always send a literal Ctrl-D, even if
client is Windows.
----------------------------
revision 2.24
date: 2001-05-28 13:07:51 -0700;  author: grossjoh;  state: Exp;  lines: +4 -4;
*** empty log message ***
----------------------------
revision 2.23
date: 2001-05-28 08:00:37 -0700;  author: yyamano;  state: Exp;  lines: +86 -2;
Add new `smp' method by Mark A. Hershberger <mah@everybody.org>.
----------------------------
revision 2.22
date: 2001-05-28 02:54:45 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
(tramp-open-connection-setup-interactive-shell): Do
`stty kill ^U' in case some system sets it to `@'.  Remove the
`stty erase ^?' from yesterday.
----------------------------
revision 2.21
date: 2001-05-27 06:35:23 -0700;  author: grossjoh;  state: Exp;  lines: +6 -3;
(tramp-open-connection-setup-interactive-shell): Do
`stty erase ^?' in case some system sets it to `@'.  Suggested by
Stefan Monnier.
----------------------------
revision 2.20
date: 2001-05-25 02:46:36 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
(tramp-send-command-and-check): Add a space in the
shell command.  Suggested by Yuji Yamao.  (I don't really
understand this.)
----------------------------
revision 2.19
date: 2001-05-02 15:15:29 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
(tramp-file-name-structure): Allow uppercase characters in file
names.  [Would it have been better to bind case-fold-search?]
----------------------------
revision 2.18
date: 2001-05-02 15:12:33 -0700;  author: grossjoh;  state: Exp;  lines: +8 -5;
(tramp-bug): Typo in variables list.  Only include
backup-by-copying-when-privileged-mismatch if bound.
----------------------------
revision 2.17
date: 2001-04-24 08:38:09 -0700;  author: grossjoh;  state: Exp;  lines: +7 -6;
(tramp-do-copy-or-rename-file): When moving, be sure to
delete the old file in all cases.
----------------------------
revision 2.16
date: 2001-04-23 13:15:16 -0700;  author: grossjoh;  state: Exp;  lines: +4 -4;
(tramp-send-command-and-check): `2>/dev/null'
(tramp-check-ls-command): Don't `2>/dev/null', this is done in
tramp-send-command-and-check.
----------------------------
revision 2.15
date: 2001-04-13 09:35:07 -0700;  author: grossjoh;  state: Exp;  lines: +14 -10;
(tramp-find-executable): Be extra careful when searching for
executables, include sentinel string to search for.
----------------------------
revision 2.14
date: 2001-04-12 16:45:24 -0700;  author: grossjoh;  state: Exp;  lines: +7 -5;
(tramp-open-connection-setup-interactive-shell): Posix
shells don't allow you to turn off the history, so we redirect it
to an innocuous file and limits that file's size as much as
possible.
----------------------------
revision 2.13
date: 2001-04-12 04:23:04 -0700;  author: grossjoh;  state: Exp;  lines: +6 -8;
(tramp-handle-write-region): Don't use here document,
just send encoded file on stdin.  Suggested by Stefan Monnier.
----------------------------
revision 2.12
date: 2001-03-25 21:03:20 -0800;  author: daniel;  state: Exp;  lines: +7 -7;
Revert overly-enthusiastic changes in tramp2. Ooops.
----------------------------
revision 2.11
date: 2001-03-25 19:27:41 -0800;  author: daniel;  state: Exp;  lines: +7 -7;
Emacs does not accept floating point numbers in `accept-process-output'. Make
sure that we never call it with any.

This is done by wrapping the call internally and converting a floating point
number to a pair of values.
----------------------------
revision 2.10
date: 2001-03-16 01:24:44 -0800;  author: grossjoh;  state: Exp;  lines: +3 -4;
(tramp-multi-connect-su): Don't clobber `found'.
----------------------------
revision 2.9
date: 2001-03-14 13:46:41 -0800;  author: grossjoh;  state: Exp;  lines: +79 -37;
(tramp-methods, tramp-telnet-args): New method
parameter `tramp-telnet-args'.
(tramp-get-telnet-args): New function.
(tramp-open-connection-telnet): Use it.
----------------------------
revision 2.8
date: 2001-03-07 10:08:33 -0800;  author: grossjoh;  state: Exp;  lines: +20 -19;
(tramp-line-end-position): New implementation, moved to
beginning of file.
(tramp-multi-connect-rlogin): Unused variable `pw' deleted.
(tramp-discard-garbage-erase-buffer): More args.
(tramp-open-connection-setup-interactive-shell): Pass more args.
(tramp-wait-for-output): Unused variable `result' deleted.
(tramp-wait-for-output): Wrong variable.
(tramp-octal-to-decimal): Use `x'.
(tramp-get-rcp-args): Error message typo.
(tramp-temporary-file-directory): Pacify byte-compiler, use funcall.
----------------------------
revision 2.7
date: 2001-03-04 03:16:18 -0800;  author: grossjoh;  state: Exp;  lines: +12 -7;
* tramp.el (tramp-handle-file-directory-p): Use `test -d' rather
than `cd' to check if a file is a directory.  Suggested by Stefan
Monnier.
----------------------------
revision 2.6
date: 2001-03-03 10:59:44 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
(tramp-verbose): New default value `10', it seems most people need
to set it to this value, anyway, to see what's happening.
Suggested by Michael Kifer.
----------------------------
revision 2.5
date: 2001-03-03 10:56:44 -0800;  author: grossjoh;  state: Exp;  lines: +17 -2;
(tramp-methods): New method `smx' which is like `sm' but
unconditionally starts /bin/sh on the remote end.  This might
avoid shell startup overhead.  Patch by Michael Kifer.
----------------------------
revision 2.4
date: 2001-03-03 03:32:46 -0800;  author: grossjoh;  state: Exp;  lines: +12 -2;
(tramp-methods): Expand documentation for `tramp-methods'.
----------------------------
revision 2.3
date: 2001-03-02 15:58:58 -0800;  author: grossjoh;  state: Exp;  lines: +5 -5;
(tramp-find-shell): Allow `$ ' as shell prompt after
starting a shell for tilde expansion.
----------------------------
revision 2.2
date: 2001-02-28 10:09:39 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
(tramp-open-connection-rsh): Doc bug.  Reported by Tom
Roche.
----------------------------
revision 2.1
date: 2001-02-28 04:07:09 -0800;  author: daniel;  state: Exp;  lines: +2 -6;
Initial checkin of the *NOT WORKING* tramp2 shell.

Even if you just updated to this version, though, tramp still works because
the old code isn't gone... yet.
----------------------------
revision 2.0
date: 2001-02-28 02:39:27 -0800;  author: grossjoh;  state: Exp;  lines: +2 -2;
branches:  2.0.2;
Going stable?
----------------------------
revision 1.454
date: 2001-02-28 02:33:27 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
*** empty log message ***
----------------------------
revision 1.453
date: 2001-02-23 14:20:06 -0800;  author: grossjoh;  state: Exp;  lines: +10 -7;
(tramp-find-executable): Avoid mentioning all directories on the
command line, instead send directory names on stdin.  Reported by
Paul Stevenson.
----------------------------
revision 1.452
date: 2001-02-23 13:13:33 -0800;  author: grossjoh;  state: Exp;  lines: +17 -2;
Patch by Francesco Potortì, slightly modified.
(tramp-discard-garbage): New variable.  When non-nil,
expect that remote shell sends some garbage on startup, and delete
it.
(tramp-discard-garbage-erase-buffer): New function.
(tramp-open-connection-setup-interactive-shell): Use it.
(tramp-methods): New method for Kerberos and mimencode.
----------------------------
revision 1.451
date: 2001-02-23 13:08:19 -0800;  author: grossjoh;  state: Exp;  lines: +24 -5;
(tramp-discard-garbage): New variable.  When non-nil,
expect that remote shell sends some garbage on startup, and delete
it.
(tramp-discard-garbage-erase-buffer): New function.
(tramp-open-connection-setup-interactive-shell): Use it.
----------------------------
revision 1.450
date: 2001-02-21 07:25:07 -0800;  author: grossjoh;  state: Exp;  lines: +6 -2;
(tramp-open-connection-setup-interactive-shell): Wait a
bit at the very beginning, in case the remote end feels like
sending some junk.  Reported by Francesco Potortì.
----------------------------
revision 1.449
date: 2001-02-20 02:02:30 -0800;  author: grossjoh;  state: Exp;  lines: +22 -4;
(tramp-open-connection-setup-interactive-shell): Also
`unset CDPATH' for the ksh users.  Reported by Jim Greer.
----------------------------
revision 1.448
date: 2001-02-18 02:37:36 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
(tramp-find-executable): Use "test -x $f -a -f $f" to
find out whether it's an executable.  Suggestion from Francesco
Potortì.
----------------------------
revision 1.447
date: 2001-02-17 08:32:14 -0800;  author: grossjoh;  state: Exp;  lines: +11 -10;
* tramp-vc.el: Require vc-rcs for `vc-rcs-release' if necessary.
(tramp-vc-workfile-unchanged-p): Compatibility with old and new VC.
(vc-checkout): Avoid byte-compiler warning.

* tramp.el (tramp-open-connection-telnet): Remote login default to local
login, but only when actually sending the login name.  The other
functions (for buffer name and stuff) continue to pass `nil' for
the user.
----------------------------
revision 1.446
date: 2001-02-17 08:00:46 -0800;  author: grossjoh;  state: Exp;  lines: +9 -12;
(tramp-open-connection-telnet): Remote login default to local
login, but only when actually sending the login name.  The other
functions (for buffer name and stuff) continue to pass `nil' for
the user.
----------------------------
revision 1.445
date: 2001-02-16 16:43:02 -0800;  author: grossjoh;  state: Exp;  lines: +33 -14;
(tramp-find-executable): Make sure that file is not a
directory.  Reported by Ed Sabol.
----------------------------
revision 1.444
date: 2001-02-16 14:06:58 -0800;  author: grossjoh;  state: Exp;  lines: +22 -16;
New todo item.
(tramp-buffer-name, tramp-buffer-name-multi-method,
tramp-debug-buffer-name): Better buffer name format for omitted
user names.
----------------------------
revision 1.443
date: 2001-02-16 10:20:53 -0800;  author: grossjoh;  state: Exp;  lines: +26 -15;
(tramp-find-executable): Use a shell-based implementation for
tramp-find-executable.  Suggestion from Francesco Potortì.
----------------------------
revision 1.442
date: 2001-02-16 09:41:01 -0800;  author: grossjoh;  state: Exp;  lines: +14 -6;
(tramp-terminal-type): Don't hardwire $TERM value when
opening a connection to the remote host.  Suggestion from rand at
meridian-enviro dot com.
----------------------------
revision 1.441
date: 2001-02-03 05:14:10 -0800;  author: daniel;  state: Exp;  lines: +17 -17;
Added `tramp-wait-for-output' when performing system setup.

Based on patch by puneet <puneet@computer.org> from reports by many people
including Matt Swift <swift@alum.mit.edu>.

This should remove a race condition that caused TRAMP to loose synchronisation
with the remote system while finding a command to detect the existence of a
file.
----------------------------
revision 1.440
date: 2001-01-18 15:20:57 -0800;  author: grossjoh;  state: Exp;  lines: +4 -3;
(tramp-handle-load): Call `load' on local copy with
fewer args for XEmacs compatibility.
----------------------------
revision 1.439
date: 2001-01-18 10:32:47 -0800;  author: grossjoh;  state: Exp;  lines: +201 -183;
(tramp-open-connection-telnet,
tramp-open-connection-rsh, tramp-open-connection-su,
tramp-open-connection-multi): Locally bind TERM env var to "dumb"
before starting the login on the remote host.
----------------------------
revision 1.438
date: 2001-01-13 04:32:14 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
(tramp-handle-file-name-all-completions): Local
variable `dirs' not necessary anymore.  Kudos to Bruce Ingalls for
pointing this out.
----------------------------
revision 1.437
date: 2001-01-10 04:54:35 -0800;  author: grossjoh;  state: Exp;  lines: +5 -5;
(tramp-open-connection-setup-interactive-shell): `unset
HISTFILE' rather than `set -o history' to turn off the history.
Pete Forman says this works on bash1 and bash2, but not for ksh or
a Posix sh.  He also says there's no way to turn history off for
ksh and Posix shells, except by invoking non-interactively.  I
won't do that, though, because I need the prompts.
----------------------------
revision 1.436
date: 2000-12-15 15:36:40 -0800;  author: grossjoh;  state: Exp;  lines: +11 -3;
(tramp-post-connection): Search for a shell before
finding a command to check if a file exists.
----------------------------
revision 1.435
date: 2000-12-14 05:40:13 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
Going back to separating commands with ";" rather than EOL.
----------------------------
revision 1.434
date: 2000-11-17 14:13:36 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
(tramp-send-command-and-check): Send command and "echo
$?" as two separate commands.
----------------------------
revision 1.433
date: 2000-11-15 02:48:49 -0800;  author: grossjoh;  state: Exp;  lines: +13 -6;
* tramp.el (tramp-handle-shell-command): Return exit status.

* tramp-vc.el (tramp-vc-do-command): Return exit status.
(tramp-vc-do-command-new): For the new VC that comes with Emacs
21.
(tramp-handle-vc-user-login-name): User part of a Tramp file name
structure might be empty.
----------------------------
revision 1.432
date: 2000-11-09 08:51:33 -0800;  author: grossjoh;  state: Exp;  lines: +4 -4;
(tramp-methods): Change tramp-remote-sh to "/bin/sh"
from "" for the sudu and sudm methods.
----------------------------
revision 1.431
date: 2000-11-01 04:35:08 -0800;  author: grossjoh;  state: Exp;  lines: +23 -4;
(tramp-coding-system-change-eol-conversion): New compat function.
(tramp-open-connection-setup-interactive-shell): Use it.
----------------------------
revision 1.430
date: 2000-11-01 04:06:16 -0800;  author: grossjoh;  state: Exp;  lines: +3 -2;
Require shell.
----------------------------
revision 1.429
date: 2000-11-01 04:04:32 -0800;  author: grossjoh;  state: Exp;  lines: +23 -7;
(tramp-dos-coding-system): New variable.
(tramp-open-connection-telnet, tramp-open-connection-rsh,
tramp-open-connection-su, tramp-open-connection-multi): Use it.
----------------------------
revision 1.428
date: 2000-10-20 11:21:33 -0700;  author: grossjoh;  state: Exp;  lines: +12 -12;
(tramp-open-connection-telnet): Missed occurrences of
match-string.
(tramp-open-connection-rsh): Dito.
(tramp-open-connection-su): Dito.
(tramp-multi-connect-telnet): Dito.
(tramp-multi-connect-rlogin): Dito.
(tramp-multi-connect-su): Dito.
----------------------------
revision 1.427
date: 2000-10-20 06:17:56 -0700;  author: grossjoh;  state: Exp;  lines: +14 -6;
(tramp-open-connection-telnet): Don't bind
`coding-system-for-read' on Emacs 21.
(tramp-open-connection-rsh): Dito.
(tramp-open-connection-su): Dito.
(tramp-open-connection-multi): Dito.
----------------------------
revision 1.426
date: 2000-10-20 06:06:17 -0700;  author: grossjoh;  state: Exp;  lines: +47 -29;
(tramp-wait-for-regexp): Return list of match-strings.
This way, communication with callers isn't done via global state.
(tramp-open-connection-telnet): Use it.
(tramp-open-connection-rsh): Dito.
(tramp-open-connection-su): Dito.
(tramp-multi-connect-telnet): Dito.
(tramp-multi-connect-rlogin): Dito.
(tramp-multi-connect-su): Dito.
(tramp-wait-for-output): From match data, compute list of
match-strings.  Used by tramp-wait-for-regexp.
----------------------------
revision 1.425
date: 2000-10-06 14:36:23 -0700;  author: grossjoh;  state: Exp;  lines: +29 -3;
(tramp-handle-load): Tentative first implementation.
----------------------------
revision 1.424
date: 2000-09-26 08:33:42 -0700;  author: grossjoh;  state: Exp;  lines: +134 -42;
(tramp-make-tramp-file-user-nil-format): New variable.
(tramp-open-connection-telnet): Work when USER is nil.
(tramp-open-connection-rsh): dito.
(tramp-open-connection-su): dito.
(tramp-multi-connect-telnet): dito.
(tramp-multi-connect-rlogin): dito.
(tramp-multi-connect-su): dito.
(tramp-make-rcp-program-file-name): dito.
(tramp-open-connection-multi): Don't grok default USER.
(tramp-pre-connection): Not changed.  tramp-current-user will be
set to nil when no user is given in the file name.
(tramp-dissect-multi-file-name): dito.
(tramp-dissect-file-name): Return nil when no user is given in
file name.
----------------------------
revision 1.423
date: 2000-09-25 04:30:23 -0700;  author: grossjoh;  state: Exp;  lines: +6 -5;
Typo in tramp-buffer-name (Henrik Holm).
----------------------------
revision 1.422
date: 2000-09-25 04:28:01 -0700;  author: grossjoh;  state: Exp;  lines: +15 -15;
`An rcp file' --> `a tramp file', in various places.
----------------------------
revision 1.421
date: 2000-09-24 21:14:44 -0700;  author: daniel;  state: Exp;  lines: +2 -4;
Remove obselete TODO item. -Henrik Holm
----------------------------
revision 1.420
date: 2000-09-23 18:21:53 -0700;  author: daniel;  state: Exp;  lines: +4 -4;
Change the Perl to support inode numbers in the form of `(high . low)'.
This isn't quite what a real Emacs will do, because it's unconditional, but
that's not really a concern, because no one really uses the inode field and
because portable software already needs to deal with this.

If anyone breaks because of this (especially XEmacs users), let the list know
and I will fix it.
----------------------------
revision 1.419
date: 2000-09-17 06:05:00 -0700;  author: grossjoh;  state: Exp;  lines: +73 -13;
(tramp-file-exists-command): New Variable.
(tramp-handle-file-exists-p): Use it.
(tramp-find-file-exists-command): New function to initialize new
variable.
(tramp-post-connection): Use it.
(tramp-get-file-exists-command): Access variable.
(tramp-bug): Report a few more variable settings.
----------------------------
revision 1.418
date: 2000-09-15 17:14:49 -0700;  author: grossjoh;  state: Exp;  lines: +9 -2;
(tramp-open-connection-setup-interactive-shell): Set
TERM=dumb as suggested by V. Balaji <vb@gfdl.gov>.
----------------------------
revision 1.417
date: 2000-09-14 08:11:20 -0700;  author: grossjoh;  state: Exp;  lines: +5 -2;
(tramp-methods): Method `scpx' was missing a setting
for `tramp-remote-sh'.
----------------------------
revision 1.416
date: 2000-09-09 12:48:21 -0700;  author: grossjoh;  state: Exp;  lines: +22 -10;
(tramp-handle-insert-directory): Try to improve the
logic as to what exactly is displayed.  The `/.' idea was snarfed
from the standard `insert-directory'.
----------------------------
revision 1.415
date: 2000-09-03 05:41:45 -0700;  author: yyamano;  state: Exp;  lines: +2 -8;
Remove old comment. This bug was fixed.
----------------------------
revision 1.414
date: 2000-09-01 03:07:40 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
* tramp.el (tramp-file-name-structure): Move `-' to beginning of
[...].  Is this really necessary?  Well, it won't hurt.
----------------------------
revision 1.413
date: 2000-08-31 08:24:05 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Hilko Bengen: (tramp-file-name-structure): Allow `-' in user names.
----------------------------
revision 1.412
date: 2000-08-29 14:52:49 -0700;  author: grossjoh;  state: Exp;  lines: +11 -8;
Change intro msg.
----------------------------
revision 1.411
date: 2000-08-29 14:47:07 -0700;  author: grossjoh;  state: Exp;  lines: +7 -3;
tramp-bug: report on backup-by-copying* variables.
----------------------------
revision 1.410
date: 2000-08-29 09:44:25 -0700;  author: grossjoh;  state: Exp;  lines: +17 -3;
tramp-handle-make-symbolic-link: Check that method, user, host are the
same.
----------------------------
revision 1.409
date: 2000-08-29 09:30:45 -0700;  author: grossjoh;  state: Exp;  lines: +7 -4;
* Makefile (tramp.elc): Wrap long line.
(tramp-vc.elc): Frob load-path for byte-compilation because of
required libraries.

* tramp-vc.el: Move `provide' to end of file.
Require some needed libraries to avoid byte-compiler errors.

* tramp.el (tramp-handle-file-name-all-completions): Expand
DIRECTORY so that this also works with abbreviated file names.
(tramp-handle-file-newer-than-file-p): Bug with `signal'.
----------------------------
revision 1.408
date: 2000-08-24 10:20:36 -0700;  author: yyamano;  state: Exp;  lines: +4 -4;
Fix the following minor bug of tramp-perl-file-attributes.

> Also, this seems to have a (minor) bug WRT block devices and sockets. On my
> box, they report 'file' in the first value with the internal function, but
> as directories with this code. I still need to dig out why that is.
----------------------------
revision 1.407
date: 2000-08-24 10:18:39 -0700;  author: yyamano;  state: Exp;  lines: +3 -3;
Add "/usr/pkg/bin" to tramp-remote-path for NetBSD packages.
`packages' is the same as `ports' on FreeBSD and it is
installed in /usr/pkg by default.
----------------------------
revision 1.406
date: 2000-08-19 08:23:42 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
* tramp.el (tramp-multi-connect-su): Defer (erase-buffer) until
after the buffer contents are used.
----------------------------
revision 1.405
date: 2000-08-18 11:44:40 -0700;  author: grossjoh;  state: Exp;  lines: +3 -2;
* tramp.el (tramp-pre-connection): Locally (to the connection
buffer) set inhibit-eol-conversion to nil.
----------------------------
revision 1.404
date: 2000-08-18 11:39:13 -0700;  author: grossjoh;  state: Exp;  lines: +4 -5;
2000-08-18  KOIE Hidetaka  <hide@koie.org>

	* tramp.el (tramp-handle-insert-file-contents): Don't use
	`no-conversion' coding system on the local copy.
----------------------------
revision 1.403
date: 2000-08-18 11:33:06 -0700;  author: grossjoh;  state: Exp;  lines: +11 -4;
* tramp.el (tramp-handle-insert-directory): Make it work with
  wildcards, too.
----------------------------
revision 1.402
date: 2000-08-18 11:13:07 -0700;  author: grossjoh;  state: Exp;  lines: +4 -4;
* tramp.el (tramp-handle-make-directory): Correct order of arguments
for tramp-barf-unless-okay.  Maybe I should be using keyword arguments
in this case...
----------------------------
revision 1.401
date: 2000-08-18 10:57:04 -0700;  author: grossjoh;  state: Exp;  lines: +24 -16;
* tramp.el (tramp-handle-file-exists-p): Use `test -e', not `ls
-d'.
(tramp-open-connection-setup-interactive-shell),
(tramp-open-connection-telnet),
(tramp-open-connection-rsh),
(tramp-open-connection-su),
(tramp-open-connection-multi),
(tramp-multi-connect-telnet),
(tramp-multi-connect-telnet),
(tramp-multi-connect-rlogin),
(tramp-multi-connect-su): Erase buffer before sending next
command.
----------------------------
revision 1.400
date: 2000-08-18 10:45:29 -0700;  author: grossjoh;  state: Exp;  lines: +3 -2;
* tramp.el (tramp-open-connection-setup-interactive-shell): Erase buffer
before sending next command.
----------------------------
revision 1.399
date: 2000-08-18 10:35:20 -0700;  author: grossjoh;  state: Exp;  lines: +3 -5;
* tramp.el (tramp-handle-file-exists-p): Use `test -e', not `ls
-d'.
----------------------------
revision 1.398
date: 2000-08-08 03:40:14 -0700;  author: daniel;  state: Exp;  lines: +6 -5;
Commit Pete Forman's patch to fix inode numbers on AIX.
----------------------------
revision 1.397
date: 2000-08-03 00:53:17 -0700;  author: grossjoh;  state: Exp;  lines: +4 -3;
Stderr for tramp_file_attributes shell function goes to Boolean Nirwana.
----------------------------
revision 1.396
date: 2000-07-20 04:46:52 -0700;  author: grossjoh;  state: Exp;  lines: +6 -2;
New todo item thanks to Daniel.
----------------------------
revision 1.395
date: 2000-07-19 22:52:24 -0700;  author: daniel;  state: Exp;  lines: +81 -93;
Do (save-match-data) at a higher level to try and avoid screwing up anyone
else who depends on their match data. This should fix the VC-to-CVS-file bug
that has been reported a few times, plus misc other bugs from the same source.

Also, drop some redundant code in places.
----------------------------
revision 1.394
date: 2000-07-19 10:13:20 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
OpenSSH sometimes responds with `Name or service not known'.
----------------------------
revision 1.393
date: 2000-06-06 05:58:27 -0700;  author: grossjoh;  state: Exp;  lines: +110 -111;
tramp-send-command-and-check: new function for checking the exit
status of a command.
Use it.
----------------------------
revision 1.392
date: 2000-06-06 05:06:36 -0700;  author: grossjoh;  state: Exp;  lines: +10 -7;
tramp-handle-write-region: Ignore LOCKNAME.  Ange-ftp lives without
file locking, so we can, too.
----------------------------
revision 1.391
date: 2000-06-06 04:53:51 -0700;  author: grossjoh;  state: Exp;  lines: +4 -2;
In Emacs 20.4, (cdr (process-coding-system PROC)) can be nil.  I'm not
sure what this means.  I'll assume that nil is the same as
`undecided', for the moment.
----------------------------
revision 1.390
date: 2000-06-06 00:30:45 -0700;  author: grossjoh;  state: Exp;  lines: +5 -5;
tramp-open-connection-setup-interactive-shell: `set +o vi +o emacs'
rather than just `set +o vi' when setting up the remote shell.  Thanks
to Hal Snyder for this suggestion.
----------------------------
revision 1.389
date: 2000-06-06 00:29:51 -0700;  author: daniel;  state: Exp;  lines: +2 -18;
Remove outdated or completed TODO items.
----------------------------
revision 1.388
date: 2000-06-05 17:20:02 -0700;  author: daniel;  state: Exp;  lines: +18 -43;
Commit my patch 'filename completion with ls(1) and sh(1)'

Special thanks to Joe Stoy for testing and bug reports, as well as to Stefan
Monnier, Kai Großjohann and Pete Forman for testing and patience.

    'Do I get to claim to be a guru yet?'
----------------------------
revision 1.387
date: 2000-06-05 04:10:35 -0700;  author: grossjoh;  state: Exp;  lines: +5 -3;
Comment typo.
----------------------------
revision 1.386
date: 2000-06-05 03:59:01 -0700;  author: grossjoh;  state: Exp;  lines: +13 -2;
tramp-open-connection-setup-interactive-shell: On OpenBSD, /bin/sh is
the same as pdksh, which ignores `stty -echo' unless command line
editing is turned off (or on?  or something?).  Anyway, `set +o vi'
seems to do the trick.

Thanks to Hal Snyder <hal@vailsys.com> for the bug report and for the
`set +o vi' suggestion.
----------------------------
revision 1.385
date: 2000-06-05 03:54:06 -0700;  author: daniel;  state: Exp;  lines: +6 -5;
The 'Now I understand the headspace of the Unix Haters Handbook' release.

Filename completion, done dirt cheap. The find tricks are extreme. They work.
They conform to the Solaris, Linux, AIX and Irix man pages. They do filename
completion successfully on Linux. Even for the stupid-ass obscure cases.

    'Why is it that find(1) lacks the -sanity option?'
----------------------------
revision 1.384
date: 2000-06-04 22:02:22 -0700;  author: daniel;  state: Exp;  lines: +7 -5;
Fix a bug with relative paths in the LINKNAME argument.
Thanks to Stefan Monnier for getting me to test those things and stuff. :)
----------------------------
revision 1.383
date: 2000-06-04 19:48:08 -0700;  author: daniel;  state: Exp;  lines: +8 -21;
Use 'find' internal filtering when listing files for completion on the remote
machine, rather than piping through fgrep. This should, hopefully, tickle
automount bugs less often (as well as not depending on fgrep on the remote
machine. :)
----------------------------
revision 1.382
date: 2000-06-04 18:49:29 -0700;  author: daniel;  state: Exp;  lines: +15 -11;
Use defalias to set up 'tramp-line-end-position', as suggested by Stefan
Monnier.

Allow 'make-symbolic-link' to work across remote hosts and so forth.

Added '/usr/freeware/bin' to the default remote path, to enhance compatibility
with Irix remote hosts. Thanks to Charlie Zender for the suggestion.
----------------------------
revision 1.381
date: 2000-06-04 14:03:40 -0700;  author: grossjoh;  state: Exp;  lines: +6 -4;
tramp-open-connection-setup-interactive-shell: return value of
process-coding-system might be a symbol rather than a cons pair.
----------------------------
revision 1.380
date: 2000-06-04 06:47:07 -0700;  author: daniel;  state: Exp;  lines: +7 -2;
Unalias 'ls' during the post-connection shell setup.
This should make things more automatic when people do:

] alias ls='ls --color=yes'

or similar silly things.
----------------------------
revision 1.379
date: 2000-06-04 06:40:58 -0700;  author: daniel;  state: Exp;  lines: +64 -9;
Implement `make-symbolic-link'.

This supports all the silly little 'what if it exists?' mades correctly, for
what it's worth. It also refuses, point blank, to create a symbolic link
across hosts.
----------------------------
revision 1.378
date: 2000-06-04 06:11:37 -0700;  author: daniel;  state: Exp;  lines: +34 -81;
Use fgrep rather than grep when filtering files for completion on the remote
machine. Thanks to Kai Großjohann and Stefan Monnier for hitting me over the
head 'til I did this right. :)

When accessing connection properties, make sure the connection is open.
Otherwise we get false negative when, say, doing filename completion and
looking for fgrep. (Don't I feel silly now?)

Make `tramp-line-end-position' more useful - it now knows the XEmacs name for
'what is the point at the end of the line,' and actually uses it as well.

Replaced all the '(progn (eol) (point))' calls with 'tramp-line-end-position'.
----------------------------
revision 1.377
date: 2000-06-04 04:52:05 -0700;  author: grossjoh;  state: Exp;  lines: +5 -2;
tramp-handle-write-region: expand file names filename and lockname.
----------------------------
revision 1.376
date: 2000-06-04 02:52:55 -0700;  author: daniel;  state: Exp;  lines: +80 -15;
Performance work:

Use grep(1) to filter the filenames on the remote machine when doing filename
completion. This should (substantially) reduce the network traffic when you
have a partial filename and perform completion in a large directory.

If grep(1) cannot be found on the remote machine(!), it will fall back to the
old behavior of doing local filtering.
----------------------------
revision 1.375
date: 2000-06-03 04:07:23 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
tramp-open-connection-setup-interactive-shell: use standard process
coding system if `process-coding-system' returns nil.
----------------------------
revision 1.374
date: 2000-06-02 16:14:50 -0700;  author: grossjoh;  state: Exp;  lines: +6 -5;
More documentation.  Explain meaning of `tramp' and document the history.
----------------------------
revision 1.373
date: 2000-06-02 10:15:42 -0700;  author: grossjoh;  state: Exp;  lines: +3 -2;
Joe Stoy suggests a missing tramp-wait-for-output.
----------------------------
revision 1.372
date: 2000-06-01 15:41:21 -0700;  author: grossjoh;  state: Exp;  lines: +5 -5;
file-name-all-completions: Use `find' rather than `ls -d */ .*/' for
finding out which files are directories.  Thanks to Stefan Monnier for
this change.
----------------------------
revision 1.371
date: 2000-06-01 07:23:23 -0700;  author: grossjoh;  state: Exp;  lines: +4 -2;
Provide more intuitive command name tramp-submit-bug in addition to
tramp-bug.  This is what Emacs/W3 and ffap do, anyway.
----------------------------
revision 1.370
date: 2000-06-01 07:04:29 -0700;  author: grossjoh;  state: Exp;  lines: +5 -2;
Document problem due to globbing with large directories.
----------------------------
revision 1.369
date: 2000-06-01 06:51:49 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Joe Stoy: typo in tramp-get-rcp-keep-date-arg, leftover from name change.
----------------------------
revision 1.368
date: 2000-05-31 15:24:21 -0700;  author: grossjoh;  state: Exp;  lines: +19 -19;
Leftovers from name change.
----------------------------
revision 1.367
date: 2000-05-31 14:55:22 -0700;  author: grossjoh;  state: Exp;  lines: +1616 -1616;
Change identifiers to tramp.
----------------------------
revision 1.366
date: 2000-05-30 06:13:37 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Remove debug code artifact from rcp-get-connection-property on behalf
of Daniel.
----------------------------
revision 1.365
date: 2000-05-30 04:44:46 -0700;  author: grossjoh;  state: Exp;  lines: +16 -18;
rcp-open-connection-setup-interactive-shell: don't try to find out
coding system, just try to find out the EOL convention.
----------------------------
revision 1.364
date: 2000-05-29 05:51:41 -0700;  author: daniel;  state: Exp;  lines: +10 -10;
Send the Perl `file-attributes' implementation on several lines, to avoid
issues with brain-dead sh(1) implementations and the like.
----------------------------
revision 1.363
date: 2000-05-29 02:11:03 -0700;  author: daniel;  state: Exp;  lines: +5 -5;
Fixed a silly error in 'rcp-get-connection-property'.
Thanks to Joy Stoy for the report and the correct fix.
----------------------------
revision 1.362
date: 2000-05-28 21:21:03 -0700;  author: daniel;  state: Exp;  lines: +22 -28;
Use the new connection property infrastructure for the remote Perl executable.
----------------------------
revision 1.361
date: 2000-05-28 20:58:28 -0700;  author: daniel;  state: Exp;  lines: +22 -6;
Define the 'rcp-get-connection-property' and 'rcp-set-connection-property'
methods.

Remove some out-of-date todo items. (Implement file-attributes in Perl :)
----------------------------
revision 1.360
date: 2000-05-28 17:56:58 -0700;  author: daniel;  state: Exp;  lines: +10 -10;
Use `lsh' rather than `>>', as requested by Kai.
----------------------------
revision 1.359
date: 2000-05-28 13:16:31 -0700;  author: grossjoh;  state: Exp;  lines: +6 -6;
Add missing arg `path' to rcp-handle-file-attributes-with-*.
----------------------------
revision 1.358
date: 2000-05-28 12:41:54 -0700;  author: grossjoh;  state: Exp;  lines: +6 -6;
rcp-temporary-file-directory: don't use `t' as a local variable.
Top-level: eval-when-feature not defined on Emacs 21.
----------------------------
revision 1.357
date: 2000-05-28 07:16:22 -0700;  author: daniel;  state: Exp;  lines: +199 -89;
Added a Perl-based implementation of 'file-attributes'.

This is fairly well tested on my Linux machine, but not really on anything
else. It /should/ just work though. Fallback is also tested and works, so
people lacking Perl on the remote machine will not be hurt by this.
----------------------------
revision 1.356
date: 2000-05-28 03:52:13 -0700;  author: grossjoh;  state: Exp;  lines: +30 -22;
More debugging messages for out-of-band methods.  Change the rsync
method to use ssh.
----------------------------
revision 1.355
date: 2000-05-26 22:17:03 -0700;  author: daniel;  state: Exp;  lines: +10 -3;
XEmacs compatibility fix: `detect-coding-region' takes a buffer as the third
argument in XEmacs. So, we get a list of coding systems and take the first
one.
----------------------------
revision 1.354
date: 2000-05-26 04:12:20 -0700;  author: grossjoh;  state: Exp;  lines: +6 -6;
rcp-handle-file-newer-than-file-p: (signal 'file-error ...) rather
than (error ...)
----------------------------
revision 1.353
date: 2000-05-26 04:06:44 -0700;  author: daniel;  state: Exp;  lines: +11 -357;
Moved the VC integration code into a separate file.
----------------------------
revision 1.352
date: 2000-05-26 03:36:23 -0700;  author: grossjoh;  state: Exp;  lines: +9 -2;
Try more values for tmp directory.
----------------------------
revision 1.351
date: 2000-05-26 03:17:54 -0700;  author: grossjoh;  state: Exp;  lines: +4 -2;
Change CVS instructions, include new todo item.
----------------------------
revision 1.350
date: 2000-05-25 15:32:54 -0700;  author: grossjoh;  state: Exp;  lines: +15 -14;
rcp-open-connection-setup-interactive-shell: Try to intuit the coding
systems for process I/O based on some shell command.  Behavior for
non-MULE Emacsen hasn't changed, I hope.
----------------------------
revision 1.349
date: 2000-05-24 06:25:02 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Forgot kudos to Pete Forman for the last change.
----------------------------
revision 1.348
date: 2000-05-24 06:22:35 -0700;  author: grossjoh;  state: Exp;  lines: +5 -3;
rcp-find-shell was waiting for the wrong prompt.  Fix the prompt.
----------------------------
revision 1.347
date: 2000-05-22 03:02:28 -0700;  author: grossjoh;  state: Exp;  lines: +3 -2;
Require base64.
----------------------------
revision 1.346
date: 2000-05-21 14:29:59 -0700;  author: grossjoh;  state: Exp;  lines: +10 -3;
Forgot access function for rcp-remote-perl.
----------------------------
revision 1.345
date: 2000-05-21 14:26:29 -0700;  author: grossjoh;  state: Exp;  lines: +16 -7;
Find a `perl' on the remote end.  Who knows what this might be useful
for...
----------------------------
revision 1.344
date: 2000-05-21 14:07:38 -0700;  author: grossjoh;  state: Exp;  lines: +19 -13;
rcp-handle-file-newer-than-file-p: use abominable construction using
`find' if `test' does not grok the `-nt' argument.
----------------------------
revision 1.343
date: 2000-05-21 06:34:36 -0700;  author: grossjoh;  state: Exp;  lines: +17 -6;
rcp-open-connection-setup-interactive-shell: echo stuff so that the
end-of-line guessing machinery has something to work on.
----------------------------
revision 1.342
date: 2000-05-20 17:03:25 -0700;  author: grossjoh;  state: Exp;  lines: +6 -5;
Don't use `when' rather than `if' when checking for EFS, as this would
require CL.
----------------------------
revision 1.341
date: 2000-05-20 16:24:54 -0700;  author: grossjoh;  state: Exp;  lines: +45 -41;
rcp-handle-file-directory-p: missing save-excursion.
rcp-handle-file-newer-than-file-p: reorganize to make it work more often.
----------------------------
revision 1.340
date: 2000-05-20 06:08:31 -0700;  author: grossjoh;  state: Exp;  lines: +5 -2;
Todo item for rcp-handle-file-directory-p.
----------------------------
revision 1.339
date: 2000-05-18 13:34:32 -0700;  author: grossjoh;  state: Exp;  lines: +7 -6;
rcp-post-connection: assume `test / -nt /' produces no output if `-nt'
is supported, and an error message otherwise.
----------------------------
revision 1.338
date: 2000-05-18 13:07:17 -0700;  author: grossjoh;  state: Exp;  lines: +5 -2;
rcp-handle-file-directory-p: document why we didn't use `test -d'.
----------------------------
revision 1.337
date: 2000-05-18 12:00:05 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Typo in rcp-handle-file-newer-than-file-p.
----------------------------
revision 1.336
date: 2000-05-18 11:59:07 -0700;  author: grossjoh;  state: Exp;  lines: +12 -3;
Different implementation of rcp-handle-file-directory-p.
`file-directory-p' on a symlink checks the target of the symlink.  The
old implementation checked the symlink, instead.
----------------------------
revision 1.335
date: 2000-05-17 14:00:54 -0700;  author: grossjoh;  state: Exp;  lines: +4 -4;
(rcp-handle-file-name-directory "/r:user@host:") would barf.
----------------------------
revision 1.334
date: 2000-05-17 07:28:25 -0700;  author: grossjoh;  state: Exp;  lines: +22 -7;
rcp-handle-file-newer-than-file-p barfs if it can't do the operation.
----------------------------
revision 1.333
date: 2000-05-17 06:48:53 -0700;  author: grossjoh;  state: Exp;  lines: +5 -5;
Bug in rcp-time-diff when using code snarfed from Emacs 21.  Kudos to
Lothar Brendel <brendel@comphys.uni-duisburg.de>) for reporting this.
----------------------------
revision 1.332
date: 2000-05-16 11:05:09 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Pete Forman: rcp-su-program in `sudu' method is `sudo', not `su'.
----------------------------
revision 1.331
date: 2000-05-16 09:58:26 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Typo.  Kudos to Pete Forman for finding it.
----------------------------
revision 1.330
date: 2000-05-16 04:47:14 -0700;  author: grossjoh;  state: Exp;  lines: +11 -2;
Document a potential implementation problem.

Load EFS on XEmacsen which have it.
----------------------------
revision 1.329
date: 2000-05-16 04:38:02 -0700;  author: grossjoh;  state: Exp;  lines: +7 -3;
rcp-time-diff: make it work on Emacs 20, too.
----------------------------
revision 1.328
date: 2000-05-15 14:55:23 -0700;  author: grossjoh;  state: Exp;  lines: +6 -2;
New todo item.
----------------------------
revision 1.327
date: 2000-05-15 14:48:41 -0700;  author: grossjoh;  state: Exp;  lines: +37 -10;
Find out if remote `test' builtin groks the `-nt' switch.  Have
`rcp-handle-file-newer-than-file-p' barf if it doesn't.
----------------------------
revision 1.326
date: 2000-05-15 13:19:31 -0700;  author: grossjoh;  state: Exp;  lines: +4 -2;
Todo item.
----------------------------
revision 1.325
date: 2000-05-15 12:49:53 -0700;  author: grossjoh;  state: Exp;  lines: +10 -4;
Note that `load' isn't implemented yet.
Silent byte compile in compat functions section.
----------------------------
revision 1.324
date: 2000-05-15 12:40:10 -0700;  author: grossjoh;  state: Exp;  lines: +14 -3;
Explicitly note that `make-symbolic-link' isn't implemented (yet?).
----------------------------
revision 1.323
date: 2000-05-15 12:34:56 -0700;  author: grossjoh;  state: Exp;  lines: +47 -3;
Implement `file-newer-than-file-p'.  This implementation relies on the
`test' command to grok the `-nt' switch.  Does this work on Irix, too?
It works on AIX.
----------------------------
revision 1.322
date: 2000-05-15 12:09:10 -0700;  author: grossjoh;  state: Exp;  lines: +8 -14;
Delete some todo items (bugs are fixed, kudos to Stefan Monnier), fix
a bug and delete its todo item, too.
----------------------------
revision 1.321
date: 2000-05-15 12:04:02 -0700;  author: grossjoh;  state: Exp;  lines: +5 -2;
Send `biff n' after opening connection.
----------------------------
revision 1.320
date: 2000-05-15 11:51:41 -0700;  author: grossjoh;  state: Exp;  lines: +8 -6;
Fix infloop bug with XEmacs bug workaround.
----------------------------
revision 1.319
date: 2000-05-15 11:01:14 -0700;  author: grossjoh;  state: Exp;  lines: +39 -15;
Try to work around a bug in XEmacs where `with-timeout' returns before
the timeout expires.
----------------------------
revision 1.318
date: 2000-05-15 07:57:54 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Document where format-spec.el comes from.
----------------------------
revision 1.317
date: 2000-05-14 12:46:07 -0700;  author: grossjoh;  state: Exp;  lines: +8 -3;
Michael Sternberg <sternberg@phys.uni-paderborn.de>: send `mesg n'
----------------------------
revision 1.316
date: 2000-05-14 02:06:04 -0700;  author: grossjoh;  state: Exp;  lines: +14 -10;
Mark A Hershberger: new variable rcp-login-prompt-regexp.  Use it.
----------------------------
revision 1.315
date: 2000-05-13 01:47:13 -0700;  author: grossjoh;  state: Exp;  lines: +4 -3;
rcp-wrong-passwd-regexp: add `Sorry, try again.' for `sudo'.  Kudos to
Mark A Hershberger for reporting this.
----------------------------
revision 1.314
date: 2000-05-13 01:42:22 -0700;  author: grossjoh;  state: Exp;  lines: +33 -3;
Mark A. Hershberger <mah@everybody.org>: Add methods for using
`sudo'.  Add multi methods for using `sudo'.
----------------------------
revision 1.313
date: 2000-05-12 14:13:28 -0700;  author: grossjoh;  state: Exp;  lines: +8 -9;
rcp-multi-connect-su: Really check whether the remote shell prompt was
found.  Previously, a password prompt was interpreted as a shell prompt.
----------------------------
revision 1.312
date: 2000-05-12 14:04:20 -0700;  author: grossjoh;  state: Exp;  lines: +19 -4;
Don't use "set +o history 1>/dev/null 2>/dev/null".  AIX chokes on
redirecting stderr here?!
----------------------------
revision 1.311
date: 2000-05-09 09:14:47 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Replace literal ^@ with \^@ (three chars).
----------------------------
revision 1.310
date: 2000-05-07 05:28:48 -0700;  author: grossjoh;  state: Exp;  lines: +6 -3;
Adjust documentation of rcp-remote-path for `~'.
----------------------------
revision 1.309
date: 2000-05-07 05:27:14 -0700;  author: grossjoh;  state: Exp;  lines: +17 -11;
Allow `~' in rcp-remote-path.  When searching for a shell which groks
tilde expansion, all directory names in rcp-remote-path starting with
`~' are ignored.
----------------------------
revision 1.308
date: 2000-05-07 05:07:31 -0700;  author: grossjoh;  state: Exp;  lines: +67 -39;
Replace all occurrences of literal "\n" with references to
rcp-rsh-end-of-line.
----------------------------
revision 1.307
date: 2000-05-07 04:17:48 -0700;  author: grossjoh;  state: Exp;  lines: +45 -27;
rcp-multi-connection-function-alist: Last element in each item is not
a program name, use a complete shell command instead.  Allow percent
escapes in shell command for user and host name.
----------------------------
revision 1.306
date: 2000-05-07 04:00:21 -0700;  author: grossjoh;  state: Exp;  lines: +6 -4;
rcp-password-prompt-regexp: grok `sudo' prompts.
----------------------------
revision 1.305
date: 2000-05-06 07:11:15 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Typo.
----------------------------
revision 1.304
date: 2000-05-06 04:12:05 -0700;  author: grossjoh;  state: Exp;  lines: +9 -8;
rcp-open-connection-su: replace `%u' with user name, rather than
always tacking on the user name at the end of the argument list.

rcp-methods: use it.
----------------------------
revision 1.303
date: 2000-05-06 03:59:54 -0700;  author: grossjoh;  state: Exp;  lines: +14 -72;
Use `format-spec.el' from Gnus rather than home-grown
`rcp-substitute-percent-escapes' function.
----------------------------
revision 1.302
date: 2000-05-06 03:44:03 -0700;  author: grossjoh;  state: Exp;  lines: +4 -2;
Little bug fixes.
----------------------------
revision 1.301
date: 2000-05-05 14:52:36 -0700;  author: grossjoh;  state: Exp;  lines: +4 -9;
The normal `file-truename' function does the right thing.  But there
was a bug in `rcp-handle-file-symlink-p', which is fixed now.
----------------------------
revision 1.300
date: 2000-05-05 14:30:47 -0700;  author: grossjoh;  state: Exp;  lines: +4 -3;
Document requirement of `fsf-compat' for XEmacs 21.
----------------------------
revision 1.299
date: 2000-05-05 14:14:29 -0700;  author: grossjoh;  state: Exp;  lines: +7 -6;
rcp-open-connection-setup-interactive-shell: set up the remote shell
environment in a safer way.
----------------------------
revision 1.298
date: 2000-05-05 13:49:17 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
rcp-open-connection-setup-interactive-shell: avoid error from remote
shell when unsetting various shell variables.
----------------------------
revision 1.297
date: 2000-05-05 13:45:22 -0700;  author: grossjoh;  state: Exp;  lines: +11 -11;
Rearrange to avoid byte compiler error.
----------------------------
revision 1.296
date: 2000-05-05 13:43:41 -0700;  author: grossjoh;  state: Exp;  lines: +16 -5;
`line-end-position' does not seem to be defined everywhere, so we add
a kluge.
----------------------------
revision 1.295
date: 2000-05-04 13:44:28 -0700;  author: grossjoh;  state: Exp;  lines: +8 -4;
rcp-handle-vc-user-login-name: deal with multi files.
----------------------------
revision 1.294
date: 2000-05-04 01:04:20 -0700;  author: grossjoh;  state: Exp;  lines: +21 -9;
On a non-MULE Emacs, don't try to frob the coding system, use `stty
-onlcr', instead.
----------------------------
revision 1.293
date: 2000-05-04 00:58:38 -0700;  author: grossjoh;  state: Exp;  lines: +4 -3;
*** empty log message ***
----------------------------
revision 1.292
date: 2000-04-28 15:00:30 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Braino in rcp-debug-buffer-name -- adaptation to multi methods was wrong.
----------------------------
revision 1.291
date: 2000-04-28 14:55:18 -0700;  author: grossjoh;  state: Exp;  lines: +20 -11;
Try to make rcp-open-connection-setup-interactive-shell really work.
I wonder how it could ever have worked before -- it was waiting for
the same output twice.  Hm.

Also try to frob the buffer process coding system, rather than relying
on `stty -onlcr' to do the right thing.  I wonder whether this is a
better way to do things.

Ideas?
----------------------------
revision 1.290
date: 2000-04-28 14:23:44 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Stefan Monnier says to call `ls -ild' rather than `ls -iLld', and I
think he's right.
----------------------------
revision 1.289
date: 2000-04-28 14:06:55 -0700;  author: grossjoh;  state: Exp;  lines: +9 -2;
Documentation.
----------------------------
revision 1.288
date: 2000-04-28 14:02:02 -0700;  author: grossjoh;  state: Exp;  lines: +47 -21;
Stefan Monnier: lotsa changes, primarily for Emacs 21.

    * Implement set-file-modes
    * Implement file-ownership-preserved-p
    * Detect new VC
----------------------------
revision 1.287
date: 2000-04-28 13:55:35 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Kudos to Dale R Worley <worley@world.std.com> for the previous
change.  (Sorry, Dale, for forgetting this.)
----------------------------
revision 1.286
date: 2000-04-28 13:53:50 -0700;  author: grossjoh;  state: Exp;  lines: +13 -2;
Add (and document) new method `scpx' which tries to set up a sane
remote shell.  This kind of workaround only works with `ssh', not with
`rsh'.
----------------------------
revision 1.285
date: 2000-04-27 14:38:58 -0700;  author: grossjoh;  state: Exp;  lines: +6 -2;
Document that it only works for Emacs 20+ and XEmacs 21+.
----------------------------
revision 1.284
date: 2000-04-27 14:29:11 -0700;  author: grossjoh;  state: Exp;  lines: +16 -60;
Elide useless documentation from beginning of file, refer to info file
instead.
----------------------------
revision 1.283
date: 2000-04-27 08:58:26 -0700;  author: grossjoh;  state: Exp;  lines: +8 -5;
Make a better-looking debug buffer.
----------------------------
revision 1.282
date: 2000-04-27 08:53:49 -0700;  author: grossjoh;  state: Exp;  lines: +8 -2;
New function rcp-insert-with-face by Alex Schroeder.
----------------------------
revision 1.281
date: 2000-04-27 06:15:28 -0700;  author: grossjoh;  state: Exp;  lines: +4 -3;
Tollef Fog Heen: Add more directories to rcp-remote-path.
----------------------------
revision 1.280
date: 2000-04-27 06:13:53 -0700;  author: grossjoh;  state: Exp;  lines: +19 -2;
More logging in the debug buffer.  (Kudos to Dale R Worley for
reporting this.)
----------------------------
revision 1.279
date: 2000-04-27 04:24:50 -0700;  author: grossjoh;  state: Exp;  lines: +4 -2;
New todo item.
----------------------------
revision 1.278
date: 2000-04-27 04:23:21 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Ed Sabol reported this typo.
----------------------------
revision 1.277
date: 2000-04-26 13:30:37 -0700;  author: grossjoh;  state: Exp;  lines: +55 -11;
Add new method parameter `rcp-remote-sh', which is "/bin/sh" in all
predefined methods.  But if you must change it, you can do so.
----------------------------
revision 1.276
date: 2000-04-23 03:36:14 -0700;  author: grossjoh;  state: Exp;  lines: +4 -2;
New todo item (bug).
----------------------------
revision 1.275
date: 2000-04-22 11:24:47 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Meaningless change to test the loginfo script
----------------------------
revision 1.274
date: 2000-04-22 11:14:47 -0700;  author: grossjoh;  state: Exp;  lines: +4 -2;
*** empty log message ***
----------------------------
revision 1.273
date: 2000-04-19 00:15:58 -0700;  author: grossjoh;  state: Exp;  lines: +9 -4;
Send `stty -onlcr -echo' to the remote shell first, only then change
the shell prompt (lest the stty settings screw up the setting of the
shell prompt).
----------------------------
revision 1.272
date: 2000-04-17 02:40:43 -0700;  author: grossjoh;  state: Exp;  lines: +32 -4;
* Quote shell arguments when doing call-process.
* Kill process when login has failed.
----------------------------
revision 1.271
date: 2000-04-16 14:15:07 -0700;  author: grossjoh;  state: Exp;  lines: +37 -16;
More documentation for multi-hop methods.
----------------------------
revision 1.270
date: 2000-04-16 02:57:32 -0700;  author: grossjoh;  state: Exp;  lines: +40 -40;
Exchange order of regexp matches in `rcp-wait-for-regexp' to make sure
that the paren count is right.
----------------------------
revision 1.269
date: 2000-04-15 16:42:47 -0700;  author: grossjoh;  state: Exp;  lines: +5 -4;
Todo item update.
----------------------------
revision 1.268
date: 2000-04-15 14:22:06 -0700;  author: grossjoh;  state: Exp;  lines: +8 -8;
Bug fix when writing files using multi-hop method.
----------------------------
revision 1.267
date: 2000-04-15 14:09:06 -0700;  author: grossjoh;  state: Exp;  lines: +38 -4;
Bug fix for arguments for `su' command.

Allow `su' command as hop in multi-hop connection method.
----------------------------
revision 1.266
date: 2000-04-15 13:58:22 -0700;  author: grossjoh;  state: Exp;  lines: +80 -32;
The `su' program can now be called with arguments.
----------------------------
revision 1.265
date: 2000-04-15 09:27:01 -0700;  author: grossjoh;  state: Exp;  lines: +2 -7;
Removed superfluous check.
----------------------------
revision 1.264
date: 2000-04-15 09:25:36 -0700;  author: grossjoh;  state: Exp;  lines: +36 -4;
Added rlogin method to multi connection method.
----------------------------
revision 1.263
date: 2000-04-15 09:16:37 -0700;  author: grossjoh;  state: Exp;  lines: +229 -62;
More infrastructure, and the connection function itself.
----------------------------
revision 1.262
date: 2000-04-15 07:47:30 -0700;  author: grossjoh;  state: Exp;  lines: +353 -221;
More preparations for multi-hop connecting.  I think the
infrastructure is all there, now.  Only the actual connection function
is missing.
----------------------------
revision 1.261
date: 2000-04-15 04:32:13 -0700;  author: grossjoh;  state: Exp;  lines: +88 -14;
These are the beginnings of a multi-hop access method.  First, we need
to set up functions which are able to parse the file name.  This is
just a first step.
----------------------------
revision 1.260
date: 2000-04-14 15:52:38 -0700;  author: grossjoh;  state: Exp;  lines: +112 -11;
Add connection methods `sum' and `suu' to edit local files as another
user, using the `su' program.  (`sum' uses base64/mimencode and `suu'
uses -- you guess it -- uudecode/uuencode.)
----------------------------
revision 1.259
date: 2000-04-14 14:58:24 -0700;  author: grossjoh;  state: Exp;  lines: +10 -12;
Stefan Monnier: use `make-temp-file' (new in Emacs 21) if it is available.
----------------------------
revision 1.258
date: 2000-04-14 14:54:23 -0700;  author: grossjoh;  state: Exp;  lines: +190 -178;
Added `save-match-data' in lots of places to protect the callers.
We'll see how that goes.
----------------------------
revision 1.257
date: 2000-04-14 14:36:26 -0700;  author: grossjoh;  state: Exp;  lines: +2 -17;
Removed unused function.
----------------------------
revision 1.256
date: 2000-04-13 10:37:36 -0700;  author: grossjoh;  state: Exp;  lines: +16 -13;
Pacify byte compiler.
----------------------------
revision 1.255
date: 2000-04-13 10:15:42 -0700;  author: grossjoh;  state: Exp;  lines: +301 -197;
Changes suggested by Gerd Moellmann.
----------------------------
revision 1.254
date: 2000-04-08 15:20:04 -0700;  author: grossjoh;  state: Exp;  lines: +15 -12;
Never return `.' and `..' from file name completions.
----------------------------
revision 1.253
date: 2000-04-06 06:35:27 -0700;  author: grossjoh;  state: Exp;  lines: +18 -7;
New variable rcp-sh-program which is used as the local shell.  (Used
to have "/bin/sh" hard-coded.)

You can set this to "/usr/bin/ksh", say, if you need tilde expansion
in local commands.

This MUST be a Bourne-like shell!
----------------------------
revision 1.252
date: 2000-04-05 16:30:11 -0700;  author: grossjoh;  state: Exp;  lines: +4 -14;
Removed some todo items.  Please review the diff (below) and speak up
if you think that removing was wrong for one of the items.  Thanks...

/----
| Index: rcp.el
| ===================================================================
| RCS file: /services/emacs-rcp/cvsroot/rcp/lisp/rcp.el,v
| retrieving revision 1.251
| diff -u -u -r1.251 rcp.el
| --- rcp.el	2000/04/04 21:12:25	1.251
| +++ rcp.el	2000/04/05 23:28:41
| @@ -3022,10 +3022,6 @@
|  ;;   Instead, try to find out a local shell which groks tilde
|  ;;   expansion.  (Mario DeWeerd)
|  ;; * Bug with file name completion if `@user' part is omitted.
| -;; * Add rcp-message for rcp calls, as well.
| -;; * Mark Galassi <rosalia@lanl.gov>: Barf on unknown methods.
| -;; * Mario DeWeerd: rcp-handle-copy-file should not switch the current
| -;;   buffer.
|  ;; * Unify rcp-handle-file-attributes and rcp-file-owner.
|  ;; * Greg Stark: save a read-only file, Emacs asks whether to save
|  ;;   anyway, then tries to chmod the file, which fails.
| @@ -3062,17 +3058,11 @@
|  ;;      -- <daniel@danann.net>
|  ;; * Provide a local cache of old versions of remote files for the rsync
|  ;;   transfer method to use.  (Greg Stark)
| -;; * Do not require the user to know beforehand whether a particular
| -;;   connection attempt requires passwd entry.  (Greg Stark)
| -;;   Maybe support passwd entry for scp?
|  ;; * Remove unneeded parameters from methods.
|  ;; * Invoke rsync once for copying a whole directory hierarchy.
|  ;;   (Francesco Potortì)
| -;; * Maybe extract remote environment from shell startup scripts: instead
| -;;   of "rsh -l USER HOST /bin/sh", say "rsh -l USER HOST", then wait
| -;;   a bit, then say "exec /bin/sh".
| -;; * The above is pretty much done, but maybe we should not set PATH
| -;;   ourselves?
| +;; * Should we set PATH ourselves or should we rely on the remote end
| +;;   to do it?
|
|  ;; Functions for file-name-handler-alist:
|  ;; diff-latest-backup-file -- in diff.el
\----
----------------------------
revision 1.251
date: 2000-04-04 14:12:25 -0700;  author: grossjoh;  state: Exp;  lines: +6 -2;
More todo items.
----------------------------
revision 1.250
date: 2000-04-04 14:09:13 -0700;  author: grossjoh;  state: Exp;  lines: +4 -2;
New todo item (bug).
----------------------------
revision 1.249
date: 2000-04-04 13:50:52 -0700;  author: grossjoh;  state: Exp;  lines: +8 -10;
Protect against wrong stty setting, by running stty first.
----------------------------
revision 1.248
date: 2000-04-04 13:31:30 -0700;  author: grossjoh;  state: Exp;  lines: +4 -4;
When editing remote VC-controlled files, we can't really make it work,
but we can fake it.  Change rcp-handle-vc-user-login-name such that it
returns the user name given in the file name if it wants the login
name of the user owning the file.  This fails if you edit a
VC-controlled file /r:foo@host:/path/to/file but the file belongs to
user bar -- it will return foo anyway.

Let's hope that the discussion with Andre Spiegel turns up something.
----------------------------
revision 1.247
date: 2000-04-04 13:25:07 -0700;  author: grossjoh;  state: Exp;  lines: +8 -4;
rcp-open-connection-setup-interactive-shell: protect against more
        timing issues.
----------------------------
revision 1.246
date: 2000-04-04 01:06:27 -0700;  author: grossjoh;  state: Exp;  lines: +8 -7;
More progress messages when opening the connection.
----------------------------
revision 1.245
date: 2000-04-01 12:55:52 -0800;  author: grossjoh;  state: Exp;  lines: +19 -9;
More error checking for rcp-handle-write-region and
rcp-handle-file-local-copy.
----------------------------
revision 1.244
date: 2000-03-31 13:18:40 -0800;  author: grossjoh;  state: Exp;  lines: +8 -6;
Try to make it work for remote CVS-controlled files.
----------------------------
revision 1.243
date: 2000-03-31 12:52:38 -0800;  author: grossjoh;  state: Exp;  lines: +3 -4;
Braino when moving from `file' to `filename'.
----------------------------
revision 1.242
date: 2000-03-31 12:39:53 -0800;  author: grossjoh;  state: Exp;  lines: +5 -5;
rcp-do-copy-or-rename-file-directly:
        Call `mv' or `cp' with `-f' argument to prevent questions.
        We expect that Emacs will ask questions anyway, so the remote
        shell doesn't need to also do this.
----------------------------
revision 1.241
date: 2000-03-31 12:38:46 -0800;  author: grossjoh;  state: Exp;  lines: +48 -45;
Move from `file' to `filename' in lots of places.  Did this really
make sense?  Hm.  See below:

Well, there is only one place where we use the variable `file', now,
and that spot is documented: the function
`rcp-handle-vc-user-login-name' expects to be called only if `file' is
bound.

Potential breakage alert!

But since there should be a real solution in cooperation with the VC
people, this could be acceptable.
----------------------------
revision 1.240
date: 2000-03-22 05:02:50 -0800;  author: grossjoh;  state: Exp;  lines: +17 -8;
Changes by Joe Stoy to make things more stable.  Tries to wait for the
remote prompt a little more often.
----------------------------
revision 1.239
date: 2000-03-18 16:32:43 -0800;  author: grossjoh;  state: Exp;  lines: +4 -3;
rcp-open-connection-setup-interactive-shell: some commands executed at
the beginning of the session may produce bogus output.  Don't worry
about that and just continue normally.
----------------------------
revision 1.238
date: 2000-03-18 16:28:26 -0800;  author: grossjoh;  state: Exp;  lines: +6 -4;
rcp-handle-shell-command: shell-command now seems to accept a third
argument.  Actually handling this isn't implemented yet, but let's at
least emit a meaningful message.
----------------------------
revision 1.237
date: 2000-03-12 05:40:47 -0800;  author: grossjoh;  state: Exp;  lines: +100 -95;
Opening remote CVS-controlled files wouldn't work because
vc-find-cvs-master assumes that file-attributes doesn't frob the match
data, but rcp-handle-file-attributes did frob the match data.

Strangely, putting save-match-data around most of
rcp-handle-file-attributes doesn't seem to do the right thing.  Why?
----------------------------
revision 1.236
date: 2000-03-11 12:35:12 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
rcp-open-connection-setup-interactive-shell: typo.
----------------------------
revision 1.235
date: 2000-03-11 12:33:26 -0800;  author: grossjoh;  state: Exp;  lines: +6 -7;
rcp-open-connection-setup-interactive-shell: send misc shell
commands in one go, rather than one at a time.
----------------------------
revision 1.234
date: 2000-02-29 04:11:53 -0800;  author: grossjoh;  state: Exp;  lines: +17 -3;
Kudos to Pete Forman for providing the `uudecode to standard output'
command for AIX.
----------------------------
revision 1.233
date: 2000-02-26 07:37:40 -0800;  author: grossjoh;  state: Exp;  lines: +3 -6;
Bug in previous changes.
----------------------------
revision 1.232
date: 2000-02-25 14:49:16 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
Bug fix in make-auto-save-file-name advice.  More sanity checking.
----------------------------
revision 1.231
date: 2000-02-25 14:44:23 -0800;  author: grossjoh;  state: Exp;  lines: +54 -43;
Joe Stoy contributed these patches for file name handling on NT as
well as better handling of auto-save files.
----------------------------
revision 1.230
date: 2000-02-03 04:49:54 -0800;  author: grossjoh;  state: Exp;  lines: +8 -3;
rcp-find-shell: Try to make it more robust; searches for shell prompt
        after exec'ing ksh or bash.
----------------------------
revision 1.229
date: 2000-02-01 10:06:59 -0800;  author: grossjoh;  state: Exp;  lines: +2 -3;
Simple change to test `cvs ci' mailings.
----------------------------
revision 1.228
date: 2000-01-26 04:41:51 -0800;  author: grossjoh;  state: Exp;  lines: +42 -2;
Daniel Pittman adds support for sending bug reports.
----------------------------
revision 1.227
date: 2000-01-22 15:41:07 -0800;  author: grossjoh;  state: Exp;  lines: +5 -3;
rcp-handle-write-region: Daniel Pittman:

    When using XEmacs/MULE, the seventh argument to write-region is a
    coding system to use when writing, not the test `confim-p'.

    This would cause XEmacs/MULE to prompt every time you wrote a file
    for confirmation. The attached patch makes this work by ignoring
    the final argument.
----------------------------
revision 1.226
date: 2000-01-22 15:31:42 -0800;  author: grossjoh;  state: Exp;  lines: +8 -8;
rcp-wait-for-output: Joe Stoy: look for rcp-end-of-output alone on its
line.  (Joe provided the fix, not only the report, as claimed in the
last log entry.)
----------------------------
revision 1.225
date: 2000-01-22 15:29:40 -0800;  author: grossjoh;  state: Exp;  lines: +6 -3;
rcp-wait-for-output: Look for rcp-end-of-output alone on its line.
Sometimes, `/////' can appear in base64 encoded text, apparently.
Kudos to Joe Stoy <joe.stoy@balliol.oxford.ac.uk> for this report.
----------------------------
revision 1.224
date: 2000-01-22 15:25:18 -0800;  author: grossjoh;  state: Exp;  lines: +7 -5;
rcp-find-ls-command would never search for bash because
rcp-find-executable would signal an error.  So rcp-find-executable now
just returns nil.  Changed other code to take this into account.
Kudos to Joe Stoy <joe.stoy@balliol.oxford.ac.uk> for reporting this.
----------------------------
revision 1.223
date: 2000-01-11 02:54:20 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
Joe Stoy: rcp-substitute-percent-escapes:  Allow null file name
components, e.g. "/r:user@host:" is home dir.
----------------------------
revision 1.222
date: 2000-01-10 01:46:19 -0800;  author: grossjoh;  state: Exp;  lines: +14 -9;
Daniel Pittman has devised this patch.  Mario DeWeerd says this is the
right behavior.
----------------------------
revision 1.221
date: 2000-01-09 12:51:38 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
The uudecode change was suggested by mkoeppe; I had completely
forgotten about that.
----------------------------
revision 1.220
date: 2000-01-09 12:45:28 -0800;  author: grossjoh;  state: Exp;  lines: +7 -7;
Use better `uuencode' command.
----------------------------
revision 1.219
date: 2000-01-09 12:36:29 -0800;  author: grossjoh;  state: Exp;  lines: +12 -7;
Tried to use a safer command for uudecode.
----------------------------
revision 1.218
date: 2000-01-07 09:43:41 -0800;  author: grossjoh;  state: Exp;  lines: +52 -36;
Copying and renaming files should now work even across machine
boundaries, at least in most cases.  Preserving the time stamp does
not work if using an inline method, though.
----------------------------
revision 1.217
date: 2000-01-04 00:32:13 -0800;  author: grossjoh;  state: Exp;  lines: +6 -3;
Bug fix in rcp-handle-file-modes: rcp-handle-file-attributes returns a
list, not a vector, so one should use nth, not aref.
----------------------------
revision 1.216
date: 1999-12-28 09:37:14 -0800;  author: grossjoh;  state: Exp;  lines: +5 -2;
Doc fix.
----------------------------
revision 1.215
date: 1999-12-28 09:31:04 -0800;  author: grossjoh;  state: Exp;  lines: +6 -3;
Bug fixes.
----------------------------
revision 1.214
date: 1999-12-28 09:05:32 -0800;  author: grossjoh;  state: Exp;  lines: +63 -38;
`shell-quote-argument' does not grok newlines.  Provide own function
`rcp-shell-quote-argument' which does (but is restricted to
Bourne-like shells) and use that.
----------------------------
revision 1.213
date: 1999-11-21 09:37:20 -0800;  author: kai;  state: Exp;  lines: +100 -25;
Implement new operation file-modes.
Remove dependency on CL in `rcp-set-remote-path'.
----------------------------
revision 1.212
date: 1999-11-19 15:09:53 -0800;  author: grossjoh;  state: Exp;  lines: +5 -3;
*** empty log message ***
----------------------------
revision 1.211
date: 1999-11-17 03:04:10 -0800;  author: grossjoh;  state: Exp;  lines: +4 -4;
rcp-open-connection-rsh: allow longer timeout -- my shell is real slow.
----------------------------
revision 1.210
date: 1999-11-16 00:44:50 -0800;  author: grossjoh;  state: Exp;  lines: +7 -5;
rcp-open-connection-rsh: rcp-get-rsh-args wasn't used.
        Kudos to Joe Stoy <joe.stoy@balliol.oxford.ac.uk> for this report.
----------------------------
revision 1.209
date: 1999-11-14 12:41:35 -0800;  author: grossjoh;  state: Exp;  lines: +4 -10;
Use (rcp-temporary-file-directory) as default directory for start-process.
----------------------------
revision 1.208
date: 1999-11-13 04:57:58 -0800;  author: grossjoh;  state: Exp;  lines: +4 -2;
rcp-open-connection-setup-interactive-shell: Turn off bash history, if
        appropriate.
----------------------------
revision 1.207
date: 1999-11-13 04:51:46 -0800;  author: grossjoh;  state: Exp;  lines: +4 -3;
rcp-wrong-passwd-regexp: recognize more error messages.
----------------------------
revision 1.206
date: 1999-11-13 04:49:51 -0800;  author: grossjoh;  state: Exp;  lines: +26 -6;
rcp-open-connection-telnet, rcp-open-connection-rsh: Watch for `login
        failed' messages and emit appropriate error message.
----------------------------
revision 1.205
date: 1999-11-13 04:05:23 -0800;  author: grossjoh;  state: Exp;  lines: +19 -11;
Make sure `start-process' has a meaningful default-directory.
----------------------------
revision 1.204
date: 1999-11-09 07:50:15 -0800;  author: grossjoh;  state: Exp;  lines: +8 -3;
rcp-handle-unhandled-file-name-directory: First attempt at an
        implementation.
----------------------------
revision 1.203
date: 1999-11-05 14:28:37 -0800;  author: grossjoh;  state: Exp;  lines: +7 -3;
Make sure to fetch exit status from last line of output.
Remove redirection of stdout and stderr to /dev/null for
rcp-handle-file-exists-p, too.
----------------------------
revision 1.202
date: 1999-11-05 14:03:39 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
rcp-do-copy-or-rename-file: Typo.
----------------------------
revision 1.201
date: 1999-11-05 14:02:47 -0800;  author: grossjoh;  state: Exp;  lines: +14 -6;
Try better error reporting for invocations of rcp.
----------------------------
revision 1.200
date: 1999-11-04 14:11:27 -0800;  author: grossjoh;  state: Exp;  lines: +11 -1;
rcp-version: variable and command for better error reporting.
        Thanks to Matt Swift for the suggestion.
----------------------------
revision 1.199
date: 1999-11-04 08:01:17 -0800;  author: grossjoh;  state: Exp;  lines: +3 -2;
Doc bug.
----------------------------
revision 1.198
date: 1999-11-03 12:43:49 -0800;  author: grossjoh;  state: Exp;  lines: +2 -2;
rcp-open-connection-rsh: use ``rsh HOST -l USER'' rather than ``rsh -l
        USER HOST''.
----------------------------
revision 1.197
date: 1999-11-03 12:35:01 -0800;  author: grossjoh;  state: Exp;  lines: +4 -1;
rcp-open-connection-telnet: Barf if method is out of band.
----------------------------
revision 1.196
date: 1999-11-03 12:33:57 -0800;  author: grossjoh;  state: Exp;  lines: +12 -1;
rcp-open-connection-rsh: Added check for out-of-band method if remote
        shell is asking for password.
----------------------------
revision 1.195
date: 1999-11-03 04:35:20 -0800;  author: grossjoh;  state: Exp;  lines: +3 -1;
require timer
----------------------------
revision 1.194
date: 1999-11-02 08:58:55 -0800;  author: grossjoh;  state: Exp;  lines: +5 -2;
Document missing `with-timeout' for XEmacs 20.  Document second
tarball with RCS files.
----------------------------
revision 1.193
date: 1999-11-02 08:55:58 -0800;  author: grossjoh;  state: Exp;  lines: +14 -44;
rcp-handle-file-attributes: tricky condition-case should have been
        used for the inode number, not for the size.
        Thanks to Pete Forman for this correction.
        Thanks to Stefan Monnier for the code.
rcp-do-with-timeout: not sufficient, therefore removed.
        (Thanks to Pete Forman for this hint.)
----------------------------
revision 1.192
date: 1999-11-02 04:27:30 -0800;  author: grossjoh;  state: Exp;  lines: +1 -2;
doc update
----------------------------
revision 1.191
date: 1999-11-02 04:26:06 -0800;  author: grossjoh;  state: Exp;  lines: +51 -19;
rcp-handle-rename-file: new function.
rcp-do-copy-or-rename-file: renamed from rcp-do-copy-file, slightly
        generalized
rcp-do-copy-or-rename-file-directly: renamed from
        rcp-do-copy-file-directly, slightly generalized
----------------------------
revision 1.190
date: 1999-11-02 04:04:46 -0800;  author: grossjoh;  state: Exp;  lines: +10 -8;
rcp-do-copy-file-directly: missing rcp-wait-for-output.
        Sanity checking on copy operation.
----------------------------
revision 1.189
date: 1999-10-31 14:14:04 -0800;  author: kai;  state: Exp;  lines: +1 -4;
Removed superfluous debug calls.
----------------------------
revision 1.188
date: 1999-10-31 14:13:40 -0800;  author: kai;  state: Exp;  lines: +131 -129;
* Barf if unknown method.
* rcp-do-copy-file-directly: missing save-excursion
* rcp-message-for-buffer: new function, using it instead of
  rcp-message if currently looking at wrong buffer
* rcp-substitute-percent-escapes: complete reimplementation, seems to
  be faster now
----------------------------
revision 1.187
date: 1999-10-30 13:01:17 -0700;  author: grossjoh;  state: Exp;  lines: +31 -1;
Include definition of macro `with-timeout' for compatibility with
XEmacs 20.x.
----------------------------
revision 1.186
date: 1999-10-30 12:46:31 -0700;  author: grossjoh;  state: Exp;  lines: +12 -3;
Make passwd prompt customizable (for rsh login method).
----------------------------
revision 1.185
date: 1999-10-30 12:32:40 -0700;  author: grossjoh;  state: Exp;  lines: +4 -4;
Pete Forman says that not all `ls' programs grok the -1 option.
Hence, I piped the output of `ls' through `cat' in some places.  (It
wasn't necessary to do it in all places, hopefully I won't get burned
for this.)
----------------------------
revision 1.184
date: 1999-10-30 12:27:49 -0700;  author: grossjoh;  state: Exp;  lines: +3 -1;
Mario De Weerd: rcp-vc-do-command: make sure to fetch status from last
line of output.
----------------------------
revision 1.183
date: 1999-10-30 12:14:54 -0700;  author: grossjoh;  state: Exp;  lines: +27 -8;
Grok large inode numbers.
----------------------------
revision 1.182
date: 1999-10-26 13:11:10 -0700;  author: grossjoh;  state: Exp;  lines: +5 -5;
Daniel Pittman: Switch order of save-excursion and
save-window-excursion such that the latter is inside the former.
----------------------------
revision 1.181
date: 1999-10-26 13:09:08 -0700;  author: grossjoh;  state: Exp;  lines: +8 -6;
New regexp for prompt.
----------------------------
revision 1.180
date: 1999-10-25 00:37:58 -0700;  author: grossjoh;  state: Exp;  lines: +7 -7;
*** empty log message ***
----------------------------
revision 1.179
date: 1999-10-25 00:23:40 -0700;  author: grossjoh;  state: Exp;  lines: +5 -5;
Added argument "-1" to calls of ls.
----------------------------
revision 1.178
date: 1999-10-24 10:06:42 -0700;  author: kai;  state: Exp;  lines: +96 -53;
Documentation update to account for new communication mechanism.
----------------------------
revision 1.177
date: 1999-10-24 09:42:29 -0700;  author: kai;  state: Exp;  lines: +6 -19;
Cleaned up code to remove rlogin connection method.
----------------------------
revision 1.176
date: 1999-10-24 09:37:01 -0700;  author: kai;  state: Exp;  lines: +26 -261;
Cleanups.
----------------------------
revision 1.175
date: 1999-10-24 09:31:32 -0700;  author: kai;  state: Exp;  lines: +134 -59;
Communication mechanism changed completely.  Now relies on remote
shell to issue a prompt after each command.  Previously, we would send
a command `echo /////' after each command and wait for that string to
occur, now we set the remote prompt to a suitable value instead.

Cleanup of function rcp-open-connection-nrlogin; introduced a couple
of helper functions.

New function rcp-open-connection-ntelnet; this is now pretty much like
the nrlogin one.
----------------------------
revision 1.174
date: 1999-10-23 08:05:24 -0700;  author: kai;  state: Exp;  lines: +43 -1;
New function rcp-open-connection-nrlogin.  This one starts an
interactive shell using the rlogin program.  It groks both password
prompts and password-less logins.
----------------------------
revision 1.173
date: 1999-10-17 10:13:47 -0700;  author: grossjoh;  state: Exp;  lines: +6 -1;
New todo items.
----------------------------
revision 1.172
date: 1999-10-17 09:52:24 -0700;  author: grossjoh;  state: Exp;  lines: +3 -2;
rcp-run-real-handler: Don't let it run ange-ftp functions.  That does
        not make any sense anyway, and it makes remote VC not work.
----------------------------
revision 1.171
date: 1999-10-17 03:34:09 -0700;  author: grossjoh;  state: Exp;  lines: +29 -5;
Daniel Pittman: file-name-directory and file-name-nondirectory are
        handled from Lisp.
----------------------------
revision 1.170
date: 1999-10-16 04:50:50 -0700;  author: grossjoh;  state: Exp;  lines: +63 -44;
Daniel Pittman:
        * advice around 'vc-do-command' and 'vc-simple-command' now
          uses the buffer file name if none was passed in.
        * Added 'rcp-vc-setup-for-remote' to support remote VC backend
          release numbers.
        * Miscellaneous comment changes and TODO updates.
----------------------------
revision 1.169
date: 1999-10-16 04:45:19 -0700;  author: grossjoh;  state: Exp;  lines: +1 -6;
rcp-handle-insert-file-contents: comment about Emacs vs. XEmacs
        removed: signaling a file-error is the right thing to do on
        both Emacsen.
----------------------------
revision 1.168
date: 1999-10-16 04:44:19 -0700;  author: grossjoh;  state: Exp;  lines: +11 -6;
Daniel Pittman: signal file-error from rcp-handle-insert-file-contents
        if file does not exist.
----------------------------
revision 1.167
date: 1999-10-16 04:37:24 -0700;  author: grossjoh;  state: Exp;  lines: +2 -2;
Francesco Potortì: doc fix.
----------------------------
revision 1.166
date: 1999-10-16 04:29:14 -0700;  author: grossjoh;  state: Exp;  lines: +20 -9;
Removed depenence on CL at run time.
More timing issues :-(
----------------------------
revision 1.165
date: 1999-10-13 13:41:29 -0700;  author: grossjoh;  state: Exp;  lines: +31 -18;
rcp-handle-file-local-copy, rcp-handle-write-region: Do some error
        checking on calling the rcp program.  Thanks to Francesco for
        pointing this out.
----------------------------
revision 1.164
date: 1999-10-13 04:28:30 -0700;  author: grossjoh;  state: Exp;  lines: +12 -10;
Use ad-get-arg to avoid byte-compilation errors in advices.
----------------------------
revision 1.163
date: 1999-10-13 04:22:24 -0700;  author: grossjoh;  state: Exp;  lines: +11 -10;
Needed to wait twice in rcp-find-shell -- why?
Some cleanup.
----------------------------
revision 1.162
date: 1999-10-13 03:08:11 -0700;  author: grossjoh;  state: Exp;  lines: +11 -11;
Reverted Francesco's patch of rcp-check-ls-commands.
----------------------------
revision 1.161
date: 1999-10-13 03:04:42 -0700;  author: grossjoh;  state: Exp;  lines: +32 -7;
Daniel Pittman: At least on XEmacs, dired looks for a handler of
        'dired-recursive-delete-directory' when you request deletion
        of a subdirectory.  This adds a handler for this.
----------------------------
revision 1.160
date: 1999-10-13 03:02:30 -0700;  author: grossjoh;  state: Exp;  lines: +10 -9;
Daniel Pittman: Added missing file-name-handler-alist entry for
        directory-files; the function was written already.
Francesco Potortì: Typo in `rcp-check-ls-commands'.
----------------------------
revision 1.159
date: 1999-10-13 02:58:55 -0700;  author: grossjoh;  state: Exp;  lines: +21 -1;
Daniel Pittman:

* (defun rcp-handle-vc-user-login-name)
Return the login used for a remote machine rather than the local one.

* (defadvice vc-user-login-name)
Call 'rcp-handle-vc-user-login-name' when the current file is remote.
----------------------------
revision 1.158
date: 1999-10-13 02:57:28 -0700;  author: grossjoh;  state: Exp;  lines: +16 -8;
Another go at the infamous SSH2 bug :-(
----------------------------
revision 1.157
date: 1999-10-10 13:11:21 -0700;  author: grossjoh;  state: Exp;  lines: +2 -15;
A few comments and todo items.
----------------------------
revision 1.156
date: 1999-10-10 13:10:28 -0700;  author: grossjoh;  state: Exp;  lines: +96 -58;
Daniel Pittman <daniel@danann.net>:

* Update comment regarding EFS and RCP in the header.

* Fixed a bug with tilde-expansion and remote commands.

The function 'shell-quote-argument' was used to produce a safe path for
remote use in a number of places. This had the unfortunate side effect
of running commands like 'test -f \~/test.file' and failing because the
tilde was not expanded.

We now call 'rcp-handle-expand-file-name' for all paths that will be
shell-quoted later on. It's a touch more costly than I like but, well,
it stops the lisp '(rcp-handle-file-attributes "/r:machine:~/existing.file")'
from failing in a messy way.

* Removed your old comment regarding 'vc-user-login-name'

* Added advice and defun for 'vc-file-owner'

This removes any calls to 'vc-user-login-name' with a parameter, at
least for RCP files. This should (in theory) fix the need to hack at
that function.

* My fix for the *long* delay on each action introduced in
  'rcp-wait-for-output'

There was a one second (!) wait for input before trying to force some.
This is, I guess, a bug fix somewhere else. Unfortunately, one second
for every remote operation (or close to that) is painful.

This makes it wait ~10ms for input, a much more reasonable time for
something intended to timeout mostly. This makes RCP usable again for
me.
----------------------------
revision 1.155
date: 1999-10-07 06:47:48 -0700;  author: grossjoh;  state: Exp;  lines: +10 -2;
rcp-handle-file-name-all-completions: obey completion-ignored-extensions.
Thanks to Paul Stevenson <spaul@mail.phy.ornl.gov> for the feature request.
----------------------------
revision 1.154
date: 1999-10-06 08:21:19 -0700;  author: grossjoh;  state: Exp;  lines: +42 -42;
Dave Love <fx@gnu.org>: Only require cl when compiling.  Move
	`provide' to end.  Minor doc and message fixes.
----------------------------
revision 1.153
date: 1999-10-06 08:13:28 -0700;  author: grossjoh;  state: Exp;  lines: +3 -2;
rcp-handle-file-regular-p: would barf on non-existing file.
        Thanks to Matthew Swift <swift@alum.mit.edu> for the bug report.
----------------------------
revision 1.152
date: 1999-10-06 07:25:01 -0700;  author: grossjoh;  state: Exp;  lines: +6 -4;
rcp-handle-make-directory: Check for mkdir errors.
rcp-set-auto-save: Don't turn on auto-save if buffer file name is nil.
----------------------------
revision 1.151
date: 1999-10-06 06:56:37 -0700;  author: grossjoh;  state: Exp;  lines: +6 -3;
Fixes for rlogin connection method.
----------------------------
revision 1.150
date: 1999-09-28 14:37:35 -0700;  author: grossjoh;  state: Exp;  lines: +3 -1;
New todo item.
----------------------------
revision 1.149
date: 1999-09-24 04:56:40 -0700;  author: grossjoh;  state: Exp;  lines: +6 -2;
Matthew Swift <swift@alum.mit.edu>: rcp-do-copy-file: let
default-directory to a harmless value when calling call-process.
----------------------------
revision 1.148
date: 1999-09-23 08:11:24 -0700;  author: grossjoh;  state: Exp;  lines: +155 -40;
Fixes from Daniel Pittman <daniel@danann.net>:

* Fixed 'rcp-run-real-handler'

This removes the lossage of my previous patch, replacing it with a much
more useful version. This one disables EFS and RCP for the selected
operation and looks almost identical to the one that the documentation
recommends.


* Remove 'vc-registered' from 'rcp-file-name-handler-alist'

After fixing the lossage I suggested for 'rcp-run-real-handler' I went
to work fixing remote VC for XEmacs. As part of this,
'rcp-handle-vc-registered' became a no-op, calling directly to the
default handler.

Since this is the behavior for an unknown function, I removed
'vc-registered' from the alist.


* Fix the window behavior of 'rcp-vc-do-command'

This did not preserve the window layout, resulting in odd changes to the
screen layout. This now preserves that layout where the changes were
happening. As a result, remote VC feels much more like local VC.


* Implement 'rcp-vc-simple-command'

XEmacs uses both 'vc-simple-command' and 'vc-do-command' for VC, but
only 'vc-do-command' was modified by RCP. I implemented
'rcp-vc-simple-command' based on the 'rcp-vc-do-command' template and
the XEmacs VC code.


As a result of this and the 'rcp-run-real-handler' changes, VC now works
remotely where the local and remote login names are identical. I will
take a look at the 'vc-user-login-name' function soon and see if I can
fix the remote/local mismatched name issues.


* Added (sit-for 1) to 'rcp-post-connection'

This is needed, for me at least, when using the 'scp' method between my
Linux box and several different remote Linux machines.


* Expanded on the comment before my advice on 'efs-ftp-path'

You had put a comment in there with a question - now that question is
answered.
----------------------------
revision 1.147
date: 1999-09-21 06:32:22 -0700;  author: grossjoh;  state: Exp;  lines: +6 -9;
Unused variable cleanup.  (Erik Arneson)
----------------------------
revision 1.146
date: 1999-09-21 06:26:53 -0700;  author: grossjoh;  state: Exp;  lines: +5 -2;
Twiddled rcp-open-connection-rlogin according to suggestion from
Matthias.  Needed to wait for process output twice.
----------------------------
revision 1.145
date: 1999-09-21 06:24:30 -0700;  author: grossjoh;  state: Exp;  lines: +152 -17;
Bug fixes in rcp-wait-for-output and rcp-open-connection-rsh; trying
to make it work with ssh2, as well.

Added extra methods referring to specifically to ssh1 and ssh2.
----------------------------
revision 1.144
date: 1999-09-15 07:43:08 -0700;  author: grossjoh;  state: Exp;  lines: +2 -2;
XEmacs bugfix: don't call apply with just one arg.
----------------------------
revision 1.143
date: 1999-09-15 00:28:15 -0700;  author: grossjoh;  state: Exp;  lines: +7 -6;
XEmacs bugfix: only set last-coding-system-used if it is bound.
Slight cleanup for compatibility functions.
----------------------------
revision 1.142
date: 1999-09-12 12:11:28 -0700;  author: grossjoh;  state: Exp;  lines: +2 -2;
*** empty log message ***
----------------------------
revision 1.141
date: 1999-09-12 11:39:19 -0700;  author: grossjoh;  state: Exp;  lines: +2 -2;
Tim Carroll <tim@boomboom.com>, rcp-open-connection-setup-interactive-shell:

"unset PS1 PS2 PS3" doesn't seem to work right with RedHat bash,
setting the variables to empty strings instead.
----------------------------
revision 1.140
date: 1999-09-10 16:00:20 -0700;  author: grossjoh;  state: Exp;  lines: +8 -8;
Changed from ssh to ssh1, scp to scp1 and so on.  For me, ssh2 seems
not to work, due to a timing problem.
----------------------------
revision 1.139
date: 1999-09-10 15:51:24 -0700;  author: grossjoh;  state: Exp;  lines: +2 -2;
Increased timeout with rcp-open-connection-function.  mkoeppe says
this is needed.
----------------------------
revision 1.138
date: 1999-09-10 15:49:59 -0700;  author: grossjoh;  state: Exp;  lines: +16 -5;
Matthias Koeppe  <mkoeppe@cs.uni-magdeburg.de>:

* rcp-handle-write-region: use "<<'EOF'" rather than "<<EOF" for the
  here document in order to prevent problems with shell expansion.

* New function rcp-handle-directory-file-name to handle
  "/r:user@host:/" special case.

* rcp-open-connection-rlogin: rlogin program was hardwired, not taken
  from rcp-methods.
----------------------------
revision 1.137
date: 1999-09-10 15:31:38 -0700;  author: grossjoh;  state: Exp;  lines: +25 -7;
Daniel Pittman: various fixes for making it work with XEmacs and EFS.
Not sure yet if this will break other places.
----------------------------
revision 1.136
date: 1999-09-10 15:21:43 -0700;  author: grossjoh;  state: Exp;  lines: +9 -2;
Daniel Pittman: make rcp-handle-insert-directory safe for XEmacs even
when the region is active.  (The zmacs region stays?)
----------------------------
revision 1.135
date: 1999-09-10 15:16:24 -0700;  author: grossjoh;  state: Exp;  lines: +5 -7;
Daniel Pittman <daniel@danann.net>: fix to make it run under XEmacs
without Mule.  Also reverted the previous defvar kludge.
----------------------------
revision 1.134
date: 1999-09-10 15:12:03 -0700;  author: grossjoh;  state: Exp;  lines: +5 -1;
Kludge to get rcp.el working on XEmacs 21.1: define dummy variable
last-coding-system-used.  Thanks to John Verzani
<verzani@postbox.csi.cuny.edu> for reporting this.

I'm sure this is not the right way to do it, but what is the right way
to do it?
----------------------------
revision 1.133
date: 1999-08-24 00:24:55 -0700;  author: grossjoh;  state: Exp;  lines: +11 -3;
Compat function for read-passwd.
----------------------------
revision 1.132
date: 1999-08-23 13:37:30 -0700;  author: grossjoh;  state: Exp;  lines: +5 -3;
Make safer the use of encoding and decoding functions.  Only call them
when they are fboundp.
----------------------------
revision 1.131
date: 1999-08-23 13:30:33 -0700;  author: grossjoh;  state: Exp;  lines: +25 -1;
Add methods `slm' and `slu' for using `slogin' together with
`mimencode' or `uuencode', respectively.
----------------------------
revision 1.130
date: 1999-08-04 09:28:10 -0700;  author: grossjoh;  state: Exp;  lines: +2 -1;
Matthias Koeppe <mkoeppe@mail.math.uni-magdeburg.de>:
        dired-may-insert-subdir wouldn't work because subdir wasn't
        indented correctly because point and mark were exchanged
----------------------------
revision 1.129
date: 1999-07-29 08:20:21 -0700;  author: grossjoh;  state: Exp;  lines: +2 -1;
Fudge open connection function.
----------------------------
revision 1.128
date: 1999-07-23 14:38:52 -0700;  author: grossjoh;  state: Exp;  lines: +23 -10;
Erik Arneson <erik@starseed.com>: on XEmacs, the variable
`temporary-file-directory' isn't defined, use the function
`temp-directory' instead.
----------------------------
revision 1.127
date: 1999-06-07 09:09:31 -0700;  author: grossjoh;  state: Exp;  lines: +12 -2;
Workaround for bug in pgnus-0.84 base64.el.
----------------------------
revision 1.126
date: 1999-06-05 15:59:53 -0700;  author: grossjoh;  state: Exp;  lines: +1 -2;
Doc fix.
----------------------------
revision 1.125
date: 1999-06-05 15:58:20 -0700;  author: grossjoh;  state: Exp;  lines: +55 -50;
Yuji Yamano <yyamano@kt.rim.or.jp>:
    Bugfix: dired header line contained directory name twice.
----------------------------
revision 1.124
date: 1999-06-01 04:01:36 -0700;  author: grossjoh;  state: Exp;  lines: +26 -24;
Documentation.
----------------------------
revision 1.123
date: 1999-05-31 09:50:37 -0700;  author: grossjoh;  state: Exp;  lines: +12 -7;
Put tmp files in temporary-file-directory by default.
----------------------------
revision 1.122
date: 1999-05-28 13:51:30 -0700;  author: kai;  state: Exp;  lines: +12 -1;
MULE changes: ensure correct value of last-coding-system-used in
handler for write-region.
----------------------------
revision 1.121
date: 1999-05-28 09:32:52 -0700;  author: kai;  state: Exp;  lines: +8 -3;
Bugfix to make inline methods work again.
----------------------------
revision 1.120
date: 1999-05-27 07:22:53 -0700;  author: grossjoh;  state: Exp;  lines: +10 -1;
More portability cruft.
----------------------------
revision 1.119
date: 1999-05-27 05:59:01 -0700;  author: grossjoh;  state: Exp;  lines: +5 -2;
(eval-when-compile (require 'cl)) isn't enough -- need this at run
time because of `defstruct'.
----------------------------
revision 1.118
date: 1999-05-27 04:33:03 -0700;  author: grossjoh;  state: Exp;  lines: +18 -2;
Backward compatibility: subst-char-in-string isn't defined in 20.3.
----------------------------
revision 1.117
date: 1999-05-27 02:45:35 -0700;  author: grossjoh;  state: Exp;  lines: +7 -5;
Slight change in Emacs/XEmacs compatibility stuff.
----------------------------
revision 1.116
date: 1999-05-25 03:11:17 -0700;  author: grossjoh;  state: Exp;  lines: +3 -2;
Tiny change for pacifying byte-compiler.
----------------------------
revision 1.115
date: 1999-05-25 02:55:47 -0700;  author: grossjoh;  state: Exp;  lines: +3 -1;
New todo item.
----------------------------
revision 1.114
date: 1999-05-24 12:33:29 -0700;  author: kai;  state: Exp;  lines: +6 -12;
MULE fixes in rcp-handle-write-region.
What about rcp-handle-file-local-copy?
----------------------------
revision 1.113
date: 1999-05-24 11:48:11 -0700;  author: grossjoh;  state: Exp;  lines: +2 -2;
add-name-to-file should call ln, not mv!
----------------------------
revision 1.112
date: 1999-05-24 11:21:15 -0700;  author: kai;  state: Exp;  lines: +92 -46;
Implemented add-name-to-file.
Did paranoid error checking with `cd' commands.
Cleaned up the todo list.
----------------------------
revision 1.111
date: 1999-05-24 10:19:36 -0700;  author: kai;  state: Exp;  lines: +22 -20;
rcp-handle-directory-files:
    Bug fix.
rcp-handle-file-name-all-completions:
    Grok case-insensitive completion.
----------------------------
revision 1.110
date: 1999-05-24 09:58:01 -0700;  author: kai;  state: Exp;  lines: +4 -4;
rcp-handle-file-name-all-completions:
    Didn't quote directory.
----------------------------
revision 1.109
date: 1999-05-24 09:50:12 -0700;  author: kai;  state: Exp;  lines: +64 -65;
Changes requested by RMS:
  - require fewer packages
  - replace comint-quote-filename with shell-quote-argument
  - in rcp-handle-expand-many-files, removed the clever quoting
    in order not to require comint
rcp-handle-expand-many-files needs to be reimplemented, I think.
----------------------------
revision 1.108
date: 1999-05-24 06:25:38 -0700;  author: grossjoh;  state: Exp;  lines: +13 -1;
Todo items.
----------------------------
revision 1.107
date: 1999-05-23 16:10:59 -0700;  author: grossjoh;  state: Exp;  lines: +4 -3;
rcp-do-copy-file couldn't copy a remote file to a local file.
----------------------------
revision 1.106
date: 1999-05-23 15:24:39 -0700;  author: kai;  state: Exp;  lines: +14 -4;
Missing variables and typos.
----------------------------
revision 1.105
date: 1999-05-23 15:21:34 -0700;  author: kai;  state: Exp;  lines: +136 -25;
Additional connection method: can use rlogin (with entering of passwd)
for logging in.
----------------------------
revision 1.104
date: 1999-05-23 08:56:45 -0700;  author: kai;  state: Exp;  lines: +9 -6;
Missing quote-filename when copying files.
----------------------------
revision 1.103
date: 1999-05-22 14:56:04 -0700;  author: kai;  state: Exp;  lines: +322 -110;
Add support for logging in via telnet.
----------------------------
revision 1.102
date: 1999-05-21 13:58:19 -0700;  author: grossjoh;  state: Exp;  lines: +4 -1;
New todo.
----------------------------
revision 1.101
date: 1999-05-20 04:24:06 -0700;  author: grossjoh;  state: Exp;  lines: +4 -1;
New todo item.
----------------------------
revision 1.100
date: 1999-05-15 15:31:28 -0700;  author: kai;  state: Exp;  lines: +15 -1;
Add feature to send all commands to debug buffer.
----------------------------
revision 1.99
date: 1999-05-14 07:15:20 -0700;  author: grossjoh;  state: Exp;  lines: +2 -1;
(require 'dired) to pacify byte compiler.
----------------------------
revision 1.98
date: 1999-05-14 07:13:40 -0700;  author: grossjoh;  state: Exp;  lines: +6 -4;
Correct mistakes in using defadvice.
----------------------------
revision 1.97
date: 1999-05-13 08:14:13 -0700;  author: kai;  state: Exp;  lines: +34 -4;
Optionally auto-save into special directory.
----------------------------
revision 1.96
date: 1999-05-12 16:03:34 -0700;  author: kai;  state: Exp;  lines: +22 -25;
Try to make completion faster.
----------------------------
revision 1.95
date: 1999-05-12 07:39:12 -0700;  author: grossjoh;  state: Exp;  lines: +35 -18;
Try to make it work with new pcl-cvs.
----------------------------
revision 1.94
date: 1999-05-12 07:18:20 -0700;  author: grossjoh;  state: Exp;  lines: +18 -11;
Use advice for vc-do-command rather than fset.
----------------------------
revision 1.93
date: 1999-05-08 14:45:58 -0700;  author: grossjoh;  state: Exp;  lines: +3 -2;
Greg Stark <gsstark@mit.edu>: put /usr/ccs/bin in rcp-remote-path for SCCS.
----------------------------
revision 1.92
date: 1999-05-08 04:41:30 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Braino in rcp-message discovered by Yuji Yamano <yyamano@kt.rim.or.jp>.
----------------------------
revision 1.91
date: 1999-05-06 00:47:37 -0700;  author: grossjoh;  state: Exp;  lines: +3 -1;
New todo.
----------------------------
revision 1.90
date: 1999-05-05 10:52:00 -0700;  author: grossjoh;  state: Exp;  lines: +16 -2;
Added two missing variable declarations.
Tried to make dired work with XEmacs.
----------------------------
revision 1.89
date: 1999-05-05 04:56:18 -0700;  author: grossjoh;  state: Exp;  lines: +113 -24;
I hope that file-local-copy (and thus, insert-file-contents) is now
able to use the built-in base64-encode-region function rather than
starting a shell command.
----------------------------
revision 1.88
date: 1999-05-05 03:11:06 -0700;  author: grossjoh;  state: Exp;  lines: +3 -1;
New todo.
----------------------------
revision 1.87
date: 1999-05-05 03:03:56 -0700;  author: grossjoh;  state: Exp;  lines: +2 -1;
Bug found.
----------------------------
revision 1.86
date: 1999-05-04 04:31:04 -0700;  author: grossjoh;  state: Exp;  lines: +2 -1;
added todo item
----------------------------
revision 1.85
date: 1999-05-01 13:16:48 -0700;  author: kai;  state: Exp;  lines: +261 -101;
Support for inline file transfer using uuencode/uudecode or
mimencode/mimdecode.
----------------------------
revision 1.84
date: 1999-05-01 09:25:22 -0700;  author: grossjoh;  state: Exp;  lines: +34 -5;
Bugfixes and first start at inline copying
----------------------------
revision 1.83
date: 1999-04-24 14:39:08 -0700;  author: grossjoh;  state: Exp;  lines: +2 -2;
`rcp-default-method' was bogus.
----------------------------
revision 1.82
date: 1999-04-23 09:28:21 -0700;  author: grossjoh;  state: Exp;  lines: +4 -1;
Strange timing problems.
----------------------------
revision 1.81
date: 1999-04-22 09:07:13 -0700;  author: grossjoh;  state: Exp;  lines: +5 -5;
Changed obsolete comment.
----------------------------
revision 1.80
date: 1999-04-21 02:40:08 -0700;  author: grossjoh;  state: Exp;  lines: +2 -1;
Todo item.
----------------------------
revision 1.79
date: 1999-04-20 07:30:16 -0700;  author: grossjoh;  state: Exp;  lines: +3 -1;
Bug report added.
----------------------------
revision 1.78
date: 1999-04-19 09:02:59 -0700;  author: grossjoh;  state: Exp;  lines: +7 -5;
Document new filename format including method.
----------------------------
revision 1.77
date: 1999-04-19 09:01:28 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Explicitly set remote path.
----------------------------
revision 1.76
date: 1999-04-16 07:33:24 -0700;  author: grossjoh;  state: Exp;  lines: +31 -1;
XEmacs usage info added.
----------------------------
revision 1.75
date: 1999-04-01 01:26:52 -0800;  author: grossjoh;  state: Exp;  lines: +4 -1;
Add pointer to current version.  Thanks to Jorge Rodriguez
<jorge@uhheph.phys.hawaii.edu> for pointing this out.
----------------------------
revision 1.74
date: 1999-03-26 03:12:44 -0800;  author: grossjoh;  state: Exp;  lines: +5 -5;
rcp-vc-do-command: quote each argument to protect blanks from shell.
----------------------------
revision 1.73
date: 1999-03-26 03:10:56 -0800;  author: grossjoh;  state: Exp;  lines: +4 -2;
rcp-vc-do-command: quote each argument to protect blanks from shell.
----------------------------
revision 1.72
date: 1999-03-18 09:59:53 -0800;  author: grossjoh;  state: Exp;  lines: +8 -9;
Customization.  Doc fixes.
----------------------------
revision 1.71
date: 1999-03-16 07:44:58 -0800;  author: grossjoh;  state: Exp;  lines: +5 -3;
rcp-handle-write-region: implement optional arg CONFIRM.
    Thanks to Jan Vronhof <vroonhof@math.ethz.ch>.
----------------------------
revision 1.70
date: 1999-03-16 06:10:14 -0800;  author: grossjoh;  state: Exp;  lines: +70 -29;
Customization.
----------------------------
revision 1.69
date: 1999-03-15 10:58:25 -0800;  author: grossjoh;  state: Exp;  lines: +5 -3;
Pacify byte compiler.
----------------------------
revision 1.68
date: 1999-03-15 10:56:45 -0800;  author: grossjoh;  state: Exp;  lines: +9 -36;
VC bug fixes.
----------------------------
revision 1.67
date: 1999-03-15 10:45:07 -0800;  author: grossjoh;  state: Exp;  lines: +205 -8;
Try to support VC.
----------------------------
revision 1.66
date: 1999-03-12 15:16:08 -0800;  author: grossjoh;  state: Exp;  lines: +28 -4;
Beginning of VC support.
----------------------------
revision 1.65
date: 1999-03-09 08:52:48 -0800;  author: grossjoh;  state: Exp;  lines: +13 -2;
Documentation.  Todo items.
----------------------------
revision 1.64
date: 1999-03-08 07:34:50 -0800;  author: grossjoh;  state: Exp;  lines: +23 -15;
Use timeout when starting remote shell.
----------------------------
revision 1.63
date: 1999-03-07 15:41:27 -0800;  author: kai;  state: Exp;  lines: +241 -164;
Support multiple connection methods.  New file name syntax is:
    /r@METHOD:USER@HOST:PATH
See variables rcp-methods and rcp-default-method.  Old variables
rcp-{rsh,rcp}-{program,args} are kept around for default values.
----------------------------
revision 1.62
date: 1999-03-07 13:38:02 -0800;  author: grossjoh;  state: Exp;  lines: +4 -2;
Byte-compiler warning removed.
----------------------------
revision 1.61
date: 1999-03-07 13:34:05 -0800;  author: grossjoh;  state: Exp;  lines: +2 -2;
Typo in rcp-do-copy-file.  Thanks to William D. McCoy
<wdmccoy@geo.umass.edu> for reporting this bug.
----------------------------
revision 1.60
date: 1999-03-07 10:05:15 -0800;  author: kai;  state: Exp;  lines: +91 -125;
Remove all the variables for customizing remote programs.
Create mechanism for finding the right remote `ls' executable to use.
Implement some (stupid) fallback code in case no good `ls' was found.
(The `ls' command needs to grok the `-n' option for printing numerical
user and group ids.)
----------------------------
revision 1.59
date: 1999-03-07 08:21:12 -0800;  author: grossjoh;  state: Exp;  lines: +5 -2;
Small changes.
----------------------------
revision 1.58
date: 1999-03-05 09:48:12 -0800;  author: grossjoh;  state: Exp;  lines: +30 -29;
Edward Sabol: Missing save-excursion in rcp-expand-many-files.
----------------------------
revision 1.57
date: 1999-03-05 09:32:28 -0800;  author: grossjoh;  state: Exp;  lines: +23 -10;
More documentation.
----------------------------
revision 1.56
date: 1999-03-05 05:50:28 -0800;  author: grossjoh;  state: Exp;  lines: +28 -17;
New variable rcp-rcp-args.  Use it.
----------------------------
revision 1.55
date: 1999-03-05 04:55:24 -0800;  author: grossjoh;  state: Exp;  lines: +4 -1;
Timing problems.
----------------------------
revision 1.54
date: 1999-03-05 04:01:27 -0800;  author: grossjoh;  state: Exp;  lines: +2 -2;
Typo.
----------------------------
revision 1.53
date: 1999-03-05 04:00:35 -0800;  author: grossjoh;  state: Exp;  lines: +24 -18;
Timing problems.  Kludged my way around it.
----------------------------
revision 1.52
date: 1999-03-05 02:23:12 -0800;  author: grossjoh;  state: Exp;  lines: +10 -4;
Bug fixes.
----------------------------
revision 1.51
date: 1999-03-05 02:12:47 -0800;  author: grossjoh;  state: Exp;  lines: +5 -19;
Automatically find right remote shell.
New variable rcp-remote-path.
----------------------------
revision 1.50
date: 1999-03-05 02:08:41 -0800;  author: grossjoh;  state: Exp;  lines: +37 -6;
Edward's patches for support of complete.el.
----------------------------
revision 1.49
date: 1999-03-04 10:03:47 -0800;  author: grossjoh;  state: Exp;  lines: +57 -1;
Try to add support for complete.el.  Doesn't work, though.
----------------------------
revision 1.48
date: 1999-03-02 14:02:20 -0800;  author: kai;  state: Exp;  lines: +9 -1;
More docs.
----------------------------
revision 1.47
date: 1999-03-02 13:42:52 -0800;  author: kai;  state: Exp;  lines: +68 -65;
Move defsubst to avoid byte compiler warnings.
----------------------------
revision 1.46
date: 1999-03-02 13:31:59 -0800;  author: kai;  state: Exp;  lines: +470 -454;
Move from rssh to rcp.  Some documentation cleanup.
----------------------------
revision 1.45
date: 1999-03-02 02:57:55 -0800;  author: grossjoh;  state: Exp;  lines: +6 -1;
More todo items.
----------------------------
revision 1.44
date: 1999-02-25 02:23:47 -0800;  author: grossjoh;  state: Exp;  lines: +48 -8;
First implementation of `copy-file'.
----------------------------
revision 1.43
date: 1999-02-23 02:28:50 -0800;  author: grossjoh;  state: Exp;  lines: +2 -2;
Ed Sabol: more chars in rssh-file-name-quote-list.
----------------------------
revision 1.42
date: 1999-02-23 02:24:46 -0800;  author: grossjoh;  state: Exp;  lines: +2 -2;
Ed Sabol: add ?[, ?], ?\? to rssh-file-name-quote-list.
----------------------------
revision 1.41
date: 1999-02-22 09:32:34 -0800;  author: grossjoh;  state: Exp;  lines: +5 -3;
Didn't quote file names often enough.
----------------------------
revision 1.40
date: 1999-02-22 08:46:44 -0800;  author: grossjoh;  state: Exp;  lines: +4 -2;
rssh-handle-write-region: backward compatibility.
        Kudos to Edward J. Sabol <sabol@alderaan.gsfc.nasa.gov>.
----------------------------
revision 1.39
date: 1999-02-21 15:00:23 -0800;  author: grossjoh;  state: Exp;  lines: +15 -7;
rssh-handle-write-region: support arguments passed when auto-saving.
rssh-set-auto-save: new function, to be added to find-file-hooks.
        Must be appended to override ange-ftp-set-buffer-mode.
----------------------------
revision 1.38
date: 1999-02-21 14:36:15 -0800;  author: grossjoh;  state: Exp;  lines: +7 -2;
Add todo items.

rssh-handle-write-region:
Kludge for XEmacs support.  Dunno if this works.
----------------------------
revision 1.37
date: 1999-02-21 08:48:56 -0800;  author: kai;  state: Exp;  lines: +74 -33;
Don't use `ls -F' for file-name-all-completions (which wants "/" to be
appended to all directory names returned).  Instead, test each file
name for being a directory and append a slash if needed.

Use `comint-quote-filename' to quote file names sent to the shell
(used to be "..." or '...').

Thanks to Edward J. Sabol <sabol@alderaan.gsfc.nasa.gov> for reporting
both problems.
----------------------------
revision 1.36
date: 1999-02-18 03:24:31 -0800;  author: grossjoh;  state: Exp;  lines: +7 -2;
Try to do some auto-save stuff.
----------------------------
revision 1.35
date: 1999-02-18 02:39:06 -0800;  author: grossjoh;  state: Exp;  lines: +3 -4;
Typo in rssh-handle-file-name-all-completions.
----------------------------
revision 1.34
date: 1999-02-17 09:06:12 -0800;  author: grossjoh;  state: Exp;  lines: +3 -2;
Typo.
----------------------------
revision 1.33
date: 1999-02-17 09:05:04 -0800;  author: grossjoh;  state: Exp;  lines: +13 -1;
rssh-handle-file-name-completion.  Seems to be needed for Emacs 19.34
but not Emacs 20.3?
----------------------------
revision 1.32
date: 1999-02-16 02:27:51 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
rssh-handle-file-writable-p:
    use file-name-directory not file-name-nondirectory
----------------------------
revision 1.31
date: 1999-02-15 09:52:22 -0800;  author: grossjoh;  state: Exp;  lines: +36 -5;
First implementation of shell-command.
----------------------------
revision 1.30
date: 1999-02-12 10:03:42 -0800;  author: grossjoh;  state: Exp;  lines: +4 -1;
New todo item.
----------------------------
revision 1.29
date: 1999-02-12 10:02:08 -0800;  author: grossjoh;  state: Exp;  lines: +2 -2;
Reinstate # in (apply #'start-process ...).  Seems to work in 19.34 as well.
----------------------------
revision 1.28
date: 1999-02-12 10:00:59 -0800;  author: grossjoh;  state: Exp;  lines: +2 -2;
Replace (kill-line 1) with (delete-region (point) (progn (forward-line
1) (point))) because the former would mess up the kill ring.
----------------------------
revision 1.27
date: 1999-02-12 09:55:18 -0800;  author: grossjoh;  state: Exp;  lines: +59 -88;
Revamped implementation of rssh-handle-expand-file-name.  Now uses
Bourne shell builtin tilde expansion, the rest of the work is done by
itself or by builtin expand-file-name.  If your Bourne shell (at the
remote side) doesn't grok tilde expansion, you could set
rssh-sh-command-alist such that ksh is invoked.

Replaced defmacro with defsubst for util functions.
----------------------------
revision 1.26
date: 1999-02-11 06:32:20 -0800;  author: grossjoh;  state: Exp;  lines: +5 -1;
"Edward J. Sabol" <sabol@alderaan.gsfc.nasa.gov>:
        Explicitly load cl-seq.el if running under Emacs 19.
----------------------------
revision 1.25
date: 1999-02-11 06:29:49 -0800;  author: grossjoh;  state: Exp;  lines: +31 -25;
rssh-handle-expand-file-name:
        Thanks to Edward J. Sabol <sabol@alderaan.gsfc.nasa.gov> for
        helping me fix something here.  Hopefully it works now.
        Any errors remaining are mine, of course.
----------------------------
revision 1.24
date: 1999-02-11 04:51:22 -0800;  author: grossjoh;  state: Exp;  lines: +2 -2;
rssh-handle-expand-file-name:
    Don't use beginning-of-buffer which sets the mark
----------------------------
revision 1.23
date: 1999-02-10 14:03:46 -0800;  author: grossjoh;  state: Exp;  lines: +2 -2;
"Edward J. Sabol" <sabol@alderaan.gsfc.nasa.gov>:
        Remove # in (apply #'start-process ...) for 19.34 compatibility.
----------------------------
revision 1.22
date: 1999-02-09 05:07:13 -0800;  author: grossjoh;  state: Exp;  lines: +71 -22;
Reimplementation of `expand-file-name'.  Now uses csh to do the
dirty job.
----------------------------
revision 1.21
date: 1999-02-09 03:34:32 -0800;  author: grossjoh;  state: Exp;  lines: +31 -47;
Michael Welsh Duggan <md5i@cs.cmu.edu>:
        Improve debugging by replacing huge cond in
        rssh-file-name-handler with lookup in an alist.
----------------------------
revision 1.20
date: 1999-02-09 03:31:27 -0800;  author: grossjoh;  state: Exp;  lines: +2 -2;
Francesco Potortì <F.Potorti@cnuce.cnr.it>:
        Shell syntax for redirection was wrong.
----------------------------
revision 1.19
date: 1999-02-08 09:32:31 -0800;  author: grossjoh;  state: Exp;  lines: +78 -10;
Customizable file name syntax.
----------------------------
revision 1.18
date: 1999-02-08 08:31:29 -0800;  author: grossjoh;  state: Exp;  lines: +14 -15;
Bug fixes in rssh-handle-expand-file-name.
----------------------------
revision 1.17
date: 1999-01-06 08:21:22 -0800;  author: kai;  state: Exp;  lines: +7 -2;
More documentation.  Mentioned EFS issue and optional user name part.
----------------------------
revision 1.16
date: 1999-01-06 08:18:07 -0800;  author: kai;  state: Exp;  lines: +5 -5;
User name part is optional in rssh file names, default user name is
the current user name.
----------------------------
revision 1.15
date: 1999-01-06 08:08:02 -0800;  author: kai;  state: Exp;  lines: +28 -21;
(Hopefully) clever implementation of `expand-file-name'.
----------------------------
revision 1.14
date: 1999-01-06 07:53:29 -0800;  author: kai;  state: Exp;  lines: +23 -4;
Simple-minded implementation of EXPAND-FILE-NAME.
----------------------------
revision 1.13
date: 1998-12-28 14:55:41 -0800;  author: kai;  state: Exp;  lines: +6 -1;
Added todo items.
----------------------------
revision 1.12
date: 1998-12-28 07:07:03 -0800;  author: kai;  state: Exp;  lines: +176 -46;
Remote commands are specified in alists, where the key is a regex
matched against the host name, and the value is the command to invoke.
----------------------------
revision 1.11
date: 1998-12-23 08:17:31 -0800;  author: kai;  state: Exp;  lines: +3 -3;
Change rssh-handle-expand-file-name.  But this doesn't work either.
----------------------------
revision 1.10
date: 1998-12-22 10:14:54 -0800;  author: kai;  state: Exp;  lines: +3 -2;
A first try at handling `expand-file-name'.
----------------------------
revision 1.9
date: 1998-12-22 09:31:39 -0800;  author: kai;  state: Exp;  lines: +13 -7;
* Dired on a symlink would display the symlink rather than the
  directory pointed to.  `cd' into the directory, then do `ls'.

* RET on a directory in dired wouldn't work.  Same fix as above.

* The first command would sometimes fail.  Dunno why.  Added some
  synchronization code, which might work.  Dunno why, though.
----------------------------
revision 1.8
date: 1998-12-12 16:04:06 -0800;  author: kai;  state: Exp;  lines: +6 -5;
Bug fix.
----------------------------
revision 1.7
date: 1998-12-12 16:00:27 -0800;  author: kai;  state: Exp;  lines: +11 -2;
Implemented make-directory.
----------------------------
revision 1.6
date: 1998-12-12 15:55:48 -0800;  author: kai;  state: Exp;  lines: +18 -6;
Improved I/O synchronization by outputting a sentinel string ("/////")
at the end of each command.
----------------------------
revision 1.5
date: 1998-12-12 15:36:51 -0800;  author: grossjoh;  state: Exp;  lines: +68 -74;
*** empty log message ***
----------------------------
revision 1.4
date: 1998-12-05 06:49:18 -0800;  author: grossjoh;  state: Exp;  lines: +7 -1;
Todo items added.
----------------------------
revision 1.3
date: 1998-12-01 04:01:34 -0800;  author: grossjoh;  state: Exp;  lines: +45 -43;
More docs, rearranged sources.
----------------------------
revision 1.2
date: 1998-11-30 10:07:48 -0800;  author: grossjoh;  state: Exp;  lines: +33 -20;
Portability fixes.
----------------------------
revision 1.1
date: 1998-11-29 06:42:12 -0800;  author: grossjoh;  state: Exp;
Initial revision
----------------------------
revision 2.0.2.6
date: 2001-07-16 02:54:52 -0700;  author: grossjoh;  state: Exp;  lines: +7 -4;
Merge with head as of 2001-07-15.
----------------------------
revision 2.0.2.5
date: 2001-06-15 04:45:17 -0700;  author: grossjoh;  state: Exp;  lines: +26 -24;
Merge from head.
----------------------------
revision 2.0.2.4
date: 2001-06-03 05:13:07 -0700;  author: grossjoh;  state: Exp;  lines: +257 -94;
Sync with head.
----------------------------
revision 2.0.2.3
date: 2001-03-28 13:44:30 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
(tramp-handle-file-directory-p): Use `test -d', not
`cd', to find out if it's a directory.
----------------------------
revision 2.0.2.2
date: 2001-03-02 16:06:34 -0800;  author: grossjoh;  state: Exp;  lines: +5 -5;
(tramp-find-shell): Allow `$ ' as remote shell prompt,
too.  Reported by Tom Roche.
----------------------------
revision 2.0.2.1
date: 2001-02-28 10:10:31 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
(tramp-open-connection-rsh): Doc bug.  Reported by Tom
Roche.
----------------------------
revision 2.179.2.5
date: 2002-09-05 13:14:32 -0700;  author: albinus;  state: Exp;  lines: +82 -30;

2002-09-05  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-postfix-single-method-format),
	(tramp-postfix-multi-method-format),
	(tramp-postfix-multi-hop-format),
	(tramp-postfix-user-format): New format strings.
	(tramp-postfix-single-method-regexp),
	(tramp-postfix-multi-method-regexp),
	(tramp-postfix-multi-hop-regexp),
	(tramp-postfix-user-regexp),
	(tramp-make-multi-tramp-file-format),
	(tramp-make-tramp-file-name): Apply them.
	(tramp-completion-handle-file-name-all-completions): Fix for
	invoking ange-ftp in case of "/ftp:xxx" file names.
----------------------------
revision 2.179.2.4
date: 2002-09-04 13:49:51 -0700;  author: albinus;  state: Exp;  lines: +191 -233;

2002-09-04  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-prefix-format),
	(tramp-postfix-host-format): New format strings. No need for other
	ones because the `*-regexp' can be used.
	(tramp-prefix-regexp),
	(tramp-method-regexp),
	(tramp-postfix-single-method-regexp),
	(tramp-postfix-multi-method-regexp),
	(tramp-postfix-multi-hop-regexp),
	(tramp-user-regexp),
	(tramp-postfix-user-regexp),
	(tramp-host-regexp),
	(tramp-postfix-host-regexp),
	(tramp-path-regexp): New atomar regular expressions. If
	corresponding format strings exist, derived from them.
	(tramp-file-name-structure),
	(tramp-multi-file-name-structure),
	(tramp-multi-file-name-hop-structure),
	(tramp-make-multi-tramp-file-format),
	(tramp-completion-mode),
	(tramp-completion-dissect-file-name),
	(tramp-parse-rhosts-group),
	(tramp-parse-shosts-group),
	(tramp-parse-hosts-group),
	(tramp-parse-passwd-group): Apply these expressions.
	(tramp-file-name-structure-unified),
	(tramp-file-name-structure-separate),
	(tramp-make-tramp-file-format-unified),
	(tramp-make-tramp-file-format-separate),
	(tramp-make-tramp-file-format),
	(tramp-make-tramp-file-user-nil-format-unified),
	(tramp-make-tramp-file-user-nil-format-separate),
	(tramp-make-tramp-file-user-nil-format),
	(tramp-multi-file-name-structure-unified),
	(tramp-multi-file-name-structure-separate),
	(tramp-multi-file-name-hop-structure-unified),
	(tramp-multi-file-name-hop-structure-separate),
	(tramp-make-multi-tramp-file-format-unified),
	(tramp-make-multi-tramp-file-format-separate): Removed.
	(tramp-make-tramp-file-name): Allow partial tramp file
	names. Generate tramp file format on-the-fly depending on
	parameters. Apply atomar format strings resp expressions.
	(tramp-get-completion-methods),
	(tramp-get-completion-user-host): Apply `tramp-make-tramp-file-name'.
	(tramp-parse-hosts-group): Take all host names and IP addresses
	into account.
	(tramp-bug): Remove `tramp-make-tramp-file-format'.
----------------------------
revision 2.179.2.3
date: 2002-09-01 12:17:59 -0700;  author: albinus;  state: Exp;  lines: +275 -117;

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-methods): Add `tramp-completion-function' for
	"su" and "sudo".
	(tramp-get-completion-telnet): Implement it.
	(tramp-parse-hosts),
	(tramp-parse-hosts-group),
	(tramp-get-completion-su),
	(tramp-parse-passwd),
	(tramp-parse-passwd-group): New functions.
	* tramp.texi (Dired): Mention method, user name and machine name
	completion.

2002-08-31  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): Check for `last-input-char'.
	(tramp-completion-file-name-handler-alist): Add handler
	for `file-exists-p.
	(tramp-completion-handle-file-exists-p): New function.
	(tramp-completion-handle-file-name-completion): Simplified.
	(tramp-completion-dissect-file-name): Regexp's reorganised.
	(tramp-completion-handle-file-name-all-completions): Call
	completion-function only if `user' or `host' is given.
	(tramp-get-completion-user-host): New function.
	(tramp-get-completion-rsh),
	(tramp-get-completion-ssh): Apply it.

2002-08-29  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-handler-alist): Add handler
	for `expand-file-name'.
	(tramp-completion-handle-expand-file-name): New function.
----------------------------
revision 2.179.2.2
date: 2002-08-26 14:18:38 -0700;  author: albinus;  state: Exp;  lines: +172 -120;

2002-08-26  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): New function.
	(tramp-completion-handle-file-name-directory),
	(tramp-completion-handle-file-name-all-completions): Apply it.
	(tramp-methods): Remove double definition of `ssh1-old' and
	`ssh2-old'.
	(tramp-point-at-eol): New defalias.
	(tramp-parse-rhosts-group),
	(tramp-parse-shosts-group):: Apply it.

2002-08-25  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-get-completion-methods),
	(tramp-get-completion-rsh),
	(tramp-get-completion-ssh): Add "[" for Xemacs.
	(tramp-completion-file-name-regexp-separate): Expression adapted.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-directory' and `file-name-nondirectory'.
	(tramp-completion-handle-file-name-directory),
	(tramp-completion-handle-file-name-nondirectory),
	(tramp-completion-run-real-handler): New functions.
	(tramp-completion-file-name-handler),
	(tramp-completion-handle-file-name-all-completions): Apply
	`tramp-completion-run-real-handler'.
	(tramp-parse-rhosts),
	(tramp-parse-shosts): Use `with-temp-buffer'. `result´ renamed to
	`res' (otherwise side effects in XEmacs).

2002-08-24  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-regexp),
	(tramp-completion-file-name-handler-alist),
	(tramp-flatten-list),
	(tramp-completion-dissect-file-name),
	(tramp-get-completion-rsh),
	(tramp-parse-rhosts),
	(tramp-parse-rhosts-group),
	(tramp-get-completion-ssh): Doc string tuned.
	(tramp-methods): Doc string and custom type extended for
	`tramp-completion-function'.
	(tramp-completion-function): Variable added. Is it really used?
	Other variables like `tramp-completion-function' aren't used.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-completion'.
	(tramp-completion-handle-file-name-completion): New function.
----------------------------
revision 2.179.2.1
date: 2002-08-20 12:33:49 -0700;  author: albinus;  state: Exp;  lines: +404 -9;
*** empty log message ***
----------------------------
revision 2.359.2.122
date: 2008-07-27 20:41:17 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: uQeLDOQCZXERnwct;
* tramp.el (tramp-perl-directory-files-and-attributes)
(tramp-get-device): Make device number a cons cell.
----------------------------
revision 2.359.2.121
date: 2008-06-11 10:25:54 -0700;  author: albinus;  state: Exp;  lines: +35 -5;  commitid: 1SFrKy6IeFmqsy6t;
* tramp.el (tramp-make-temp-file): Backport from Tramp 2.1.
----------------------------
revision 2.359.2.120
date: 2008-04-28 12:28:03 -0700;  author: albinus;  state: Exp;  lines: +3 -12;  commitid: A2gqHVVUgqK0yU0t;
* tramp.el (tramp-replace-environment-variables): Remove it.
There is a more simple solution.
(tramp-file-name-handler): Apply `substitute-in-file-name' w/o
Tramp file name handlers.
----------------------------
revision 2.359.2.119
date: 2008-04-27 02:39:01 -0700;  author: albinus;  state: Exp;  lines: +13 -1;  commitid: X2KtkHzBcWUVjJ0t;
* tramp.el (tramp-replace-environment-variables): New defun.
(tramp-file-name-handler): Use it.
----------------------------
revision 2.359.2.118
date: 2008-04-09 12:52:49 -0700;  author: albinus;  state: Exp;  lines: +41 -19;  commitid: OyN8qRjzEienitYs;
* tramp.el (tramp-find-file-name-coding-system-alist): New defun.
(tramp-handle-insert-file-contents, tramp-handle-write-region):
Use it.
----------------------------
revision 2.359.2.117
date: 2008-02-02 02:31:57 -0800;  author: albinus;  state: Exp;  lines: +29 -20;  commitid: CuzGGcOLRGZtlOPs;
* tramp.el (tramp-handle-make-auto-save-file-name)
(tramp-completion-dissect-file-name, tramp-find-executable): Use
`mapc' instead of `mapcar'.
(tramp-open-connection-setup-interactive-shell): Send only single
prompt setting commands, in order to avoid double-prompt.
----------------------------
revision 2.359.2.116
date: 2007-10-31 13:41:53 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: eQbRU3AyiiKSJMDs;

* lisp/tramp.el (tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-multi): Set $LC_ALL to "C".
----------------------------
revision 2.359.2.115
date: 2007-10-06 08:13:26 -0700;  author: albinus;  state: Exp;  lines: +27 -12;  commitid: 9UzcauBOw6L0JxAs;

* lisp/tramp.el (tramp-completion-mode): Extend doc-string.
(tramp-completion-mode-p): Revert change from 2007-09-24.
Checking for `return' etc as last character is not sufficient, for
example in dired-mode when entering <g> (revert-buffer) or
<s> (dired-sort).
----------------------------
revision 2.359.2.114
date: 2007-09-23 22:46:34 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: VEpQqnnraJNnYWys;

Replace `iff' in doc-strings and comments.
----------------------------
revision 2.359.2.113
date: 2007-09-23 22:24:39 -0700;  author: albinus;  state: Exp;  lines: +25 -34;  commitid: iQqxIsTWbJOSQWys;

* lisp/tramp.el (tramp-completion-mode-p): Rename from
`tramp-completion-mode'. Revert logic, check `return', `newline'
and such alike. Packages like Icicles tend to use other completion
characters but `tab' and `space' only.
----------------------------
revision 2.359.2.112
date: 2007-08-14 12:04:41 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: Y7AVB4MKIhlRHKts;

* lisp/tramp.el (top): Require cl.el, when `copy-tree' is not available
otherwise.
----------------------------
revision 2.359.2.111
date: 2007-08-07 12:45:29 -0700;  author: albinus;  state: Exp;  lines: +10 -4;  commitid: scZ29p6nNoaV9Rss;

* lisp/tramp.el (tramp-handle-file-remote-p): Handle optional parameter
IDENTIFICATION.
(tramp-file-name-handler): No special handling for
`expand-file-name'.  But for `file-name-as-directory'.
----------------------------
revision 2.359.2.110
date: 2007-07-25 12:37:31 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.359.2.109
date: 2007-07-16 13:08:35 -0700;  author: albinus;  state: Exp;  lines: +7 -3;  commitid: RVCo01n1wQqGZ1qs;

* lisp/tramp.el (tramp-handle-file-remote-p): Handle optional parameter
CONNECTED.
----------------------------
revision 2.359.2.108
date: 2007-07-15 01:41:01 -0700;  author: albinus;  state: Exp;  lines: +15 -9;  commitid: aM3x77bQBIEHdQps;

* configure.ac: Bump version (to 2.0.57-pre).  Update merge
version to 2.0.56.

* lisp/tramp.el (tramp-find-shell, tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-multi)
(tramp-open-connection-setup-interactive-shell): Guard against
$PROMPT_COMMAND shell var.  Reported by Steve Youngs
<steve@sxemacs.org>.
----------------------------
revision 2.359.2.107
date: 2007-06-16 00:55:56 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: YIf7F6AuY148U6ms;

* lisp/tramp.el (tramp-append-tramp-buffers): Replace "sensible" by
"sensitive" in the hint.
----------------------------
revision 2.359.2.106
date: 2007-06-10 13:54:42 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: pTNOe5lnTN1ippls;

* lisp/tramp.el (tramp-handle-insert-file-contents): VISIT must be
handled after insertion of the local copy.  Reported by Peter
Gordon <peter@pg-consultants.com>.
----------------------------
revision 2.359.2.105
date: 2007-05-27 09:12:15 -0700;  author: albinus;  state: Exp;  lines: +0 -2;  commitid: 5dq79zMk9R1tiAjs;
*** empty log message ***
----------------------------
revision 2.359.2.104
date: 2007-05-27 08:43:53 -0700;  author: albinus;  state: Exp;  lines: +101 -84;  commitid: wsslTl4EbLwp8Ajs;

* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el:
* lisp/tramp-vc.el:
Don't load cl.el, because that pollutes the namespace.  Replace cl
macros by their implementations where necessary.  Requested by
Richard Stallman <rms@gnu.org>.

* lisp/tramp.el (tramp-file-name-p, tramp-file-name-multi-method)
(tramp-file-name-method, tramp-file-name-user)
(tramp-file-name-host, tramp-file-name-localname): New defuns,
replacing defstruct `tramp-file-name'.
(tramp-handle-file-remote-p, tramp-completion-dissect-file-name1)
(tramp-dissect-file-name, tramp-dissect-multi-file-name): Apply
`vector' instead of `make-tramp-file-name'.
----------------------------
revision 2.359.2.103
date: 2007-04-16 13:27:02 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* tramp.el (top): Make `set-buffer-multibyte' an alias if it
doesn't exist.
----------------------------
revision 2.359.2.102
date: 2007-04-08 03:37:36 -0700;  author: albinus;  state: Exp;  lines: +2 -0;

* lisp/tramp.el (tramp-completion-mode): `last-input-event' is nil when
XEmacs is started.
----------------------------
revision 2.359.2.101
date: 2007-03-31 12:09:17 -0700;  author: albinus;  state: Exp;  lines: +23 -6;

* lisp/tramp.el (tramp-register-file-name-handler)
(tramp-register-completion-file-name-handler): New defsubst,
derived from `tramp-register-file-name-handlers'.  The split is
necessary because Tramp's file name handlers must be registered at
different startup places.
(tramp-completion-mode): `last-input-event' may have no
character approximation.
----------------------------
revision 2.359.2.100
date: 2007-03-21 14:44:24 -0700;  author: albinus;  state: Exp;  lines: +2 -1;

* lisp/tramp.el (tramp-handle-make-auto-save-file-name): Apply
`tramp-temporary-file-directory' for compatibility reasons.
----------------------------
revision 2.359.2.99
date: 2007-03-07 12:38:34 -0800;  author: albinus;  state: Exp;  lines: +3 -3;

* lisp/tramp.el (tramp-handle-insert-directory): Check (featurep 'ls-lisp).
----------------------------
revision 2.359.2.98
date: 2007-03-04 22:46:02 -0800;  author: albinus;  state: Exp;  lines: +9 -7;

* lisp/tramp.el (tramp-make-temp-file): New parameter FILENAME.  Append
its extension to the resulting temporary file name.
(tramp-handle-file-local-copy, tramp-handle-write-region): Apply
it.

* lisp/tramp-smb.el (tramp-smb-handle-file-local-copy)
(tramp-smb-handle-write-region): Apply it.
----------------------------
revision 2.359.2.97
date: 2007-02-11 22:12:57 -0800;  author: albinus;  state: Exp;  lines: +15 -9;

* lisp/tramp.el (tramp-get-ls-command, tramp-get-file-exists-command)
(tramp-get-remote-ln): Handle error case.  Reported by Chris Moore
<dooglus@gmail.com>.
----------------------------
revision 2.359.2.96
date: 2007-01-27 06:59:27 -0800;  author: albinus;  state: Exp;  lines: +15 -6;

* lisp/tramp.el (tramp-do-copy-or-rename-file-out-of-band): Set
default-directory to a sane value when calling start-process.
(tramp-perl-encode, tramp-perl-decode):	Update copyrights.
----------------------------
revision 2.359.2.95
date: 2007-01-18 12:33:19 -0800;  author: albinus;  state: Exp;  lines: +5 -3;

* tramp.el (with-parsed-tramp-file-name): Protect debug spec
during compilation.
----------------------------
revision 2.359.2.94
date: 2007-01-11 12:11:19 -0800;  author: albinus;  state: Exp;  lines: +5 -1;

* lisp/tramp.el (tramp-handle-file-local-copy): Set
`enable-multibyte-characters' to nil.  Reported by Chris Moore
<christopher.ian.moore@gmail.com>.
----------------------------
revision 2.359.2.93
date: 2007-01-08 20:59:44 -0800;  author: albinus;  state: Exp;  lines: +26 -22;

* lisp/tramp.el: (tramp-process-one-action): Remove `with-timeout'.
(tramp-process-actions): Add optional parameter TIMEOUT.
(tramp-open-connection-telnet, tramp-open-connection-rsh)
(tramp-open-connection-su): Add timeout of 60".
----------------------------
revision 2.359.2.92
date: 2006-12-31 11:04:48 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-completion-mode): Use `natnump' instead of
`wholenump' because of XEmacs.
----------------------------
revision 2.359.2.91
date: 2006-12-31 06:37:22 -0800;  author: albinus;  state: Exp;  lines: +4 -6;

Version 2.0.55 repackaged.
----------------------------
revision 2.359.2.90
date: 2006-12-21 12:09:14 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-completion-mode): Use `wholenump' instead of
`integerp'.  `char-equal' could fail else in case of negative
numbers.  Reported by Toby Speight <T.M.Speight.90@cantab.net>.
----------------------------
revision 2.359.2.89
date: 2006-12-20 13:20:14 -0800;  author: albinus;  state: Exp;  lines: +42 -33;

* lisp/tramp.el (tramp-default-method): We still need to check for
`executable-find', because it is not bound under Emacs 20.
(tramp-handle-file-name-completion)
(tramp-completion-handle-file-name-completion): PREDICATE must be
applied on the expanded car's in `try-completion'.
----------------------------
revision 2.359.2.88
date: 2006-12-19 21:41:57 -0800;  author: albinus;  state: Exp;  lines: +12 -7;

* lisp/tramp.el (tramp-handle-file-name-completion)
(tramp-completion-handle-file-name-completion): Handle optional
parameter PREDICATE.
(tramp-find-default-method): Add code for default values.
----------------------------
revision 2.359.2.87
date: 2006-12-18 23:27:36 -0800;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.359.2.86
date: 2006-12-18 23:09:49 -0800;  author: albinus;  state: Exp;  lines: +43 -42;

* lisp/tramp.el (tramp-methods): Introduce new method `scpc'.  Remove
"ControlMaster" option from the other `scp*' methods.
(tramp-default-method): Check for ssh-agent before setting to
`scp'.
(top): Check for `font-lock-add-keywords' before calling; it
doesn't exist under XEmacs.

* texi/tramp.texi (External transfer methods): Describe new method
`scpc'.
----------------------------
revision 2.359.2.85
date: 2006-12-17 05:24:56 -0800;  author: albinus;  state: Exp;  lines: +27 -4;

* lisp/tramp.el (tramp-default-method): Before setting to "pscp", check
whether package password.el is loaded, or Pageant is running.
----------------------------
revision 2.359.2.84
date: 2006-12-03 22:57:04 -0800;  author: albinus;  state: Exp;  lines: +35 -10;

* lisp/tramp.el (tramp-methods): Add "ControlPath" and "ControlMaster"
to scp, scp1 and scp2 methods.  Suggested by Andreas Schwab
<schwab@suse.de>.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-open-connection-rsh): Compute format spec for ?t.
(tramp-process-actions): Trace command parameters.
----------------------------
revision 2.359.2.83
date: 2006-11-26 03:40:01 -0800;  author: albinus;  state: Exp;  lines: +30 -15;

* lisp/tramp.el (tramp-default-method): Under Windows, change from
plink to pscp.
(tramp-copy-failed-regexp, tramp-action-copy-failed): Add.
(tramp-yn-prompt-regexp): Fix regexp.
(tramp-actions-copy-out-of-band):
Add pair (tramp-copy-failed-regexp tramp-action-copy-failed).
(tramp-action-out-of-band): Move "Permission denied" handling to
tramp-action-copy-failed.
(tramp-do-copy-or-rename-file-out-of-band): unwind-protect killing of
process buffer.
----------------------------
revision 2.359.2.82
date: 2006-11-18 09:39:30 -0800;  author: albinus;  state: Exp;  lines: +6 -7;

* lisp/tramp.el (top): cl and custom are always required.
(tramp-unified-filenames): Doc fix.
----------------------------
revision 2.359.2.81
date: 2006-11-07 03:06:09 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-default-method): scp is the default method.

* texi/tramp.texi (Configuration): scp is the default method.
(Default Method): Use ssh as example for another method.
----------------------------
revision 2.359.2.80
date: 2006-11-05 11:49:45 -0800;  author: albinus;  state: Exp;  lines: +10 -11;

* tramp.el (with-parsed-tramp-file-name): Correct debug spec.
Highlight as keyword.
(tramp-do-copy-or-rename-file): Correct data for
'file-already-exists.  Don't call tramp-method-out-of-band-p for
local files.
(tramp-touch): Quote file name.
----------------------------
revision 2.359.2.79
date: 2006-10-21 06:40:50 -0700;  author: albinus;  state: Exp;  lines: +16 -5;

* configure.ac: Bump version (to 2.0.55-pre).  Update merge
version to 2.0.54.

* lisp/tramp.el (tramp-yn-prompt-regexp): Add question from plink.
(tramp-completion-mode): Remove clause (not
tramp-unified-filenames), because the function is called in other
context too, where this check results in wrong results in the
XEmacs case on Windows.
(tramp-touch): UTC handling is not possible for XEmacs.
----------------------------
revision 2.359.2.78
date: 2006-08-28 22:21:41 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Version 2.0.54 released.
----------------------------
revision 2.359.2.77
date: 2006-07-02 13:35:05 -0700;  author: albinus;  state: Exp;  lines: +3 -1;

* lisp/tramp.el (tramp-handle-shell-command): Preserve current-buffer.
----------------------------
revision 2.359.2.76
date: 2006-06-25 14:08:17 -0700;  author: albinus;  state: Exp;  lines: +1 -0;

* lisp/tramp.el (tramp-unload-tramp): Provide a doc string.
----------------------------
revision 2.359.2.75
date: 2006-06-15 15:01:28 -0700;  author: albinus;  state: Exp;  lines: +4 -3;

* lisp/tramp.el (tramp-touch): Use UTC to express time.
----------------------------
revision 2.359.2.74
date: 2006-05-28 11:35:08 -0700;  author: albinus;  state: Exp;  lines: +10 -9;

* lisp/tramp.el (tramp-register-file-name-handlers):
`partial-completion-mode' is unknown to XEmacs.
(tramp-time-diff): Don't use `floor', it might fail for large
differences.
----------------------------
revision 2.359.2.73
date: 2006-05-08 21:30:44 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-register-file-name-handlers): Enable Tramp
completion also when ido is loaded.
----------------------------
revision 2.359.2.72
date: 2006-05-06 15:08:05 -0700;  author: albinus;  state: Exp;  lines: +57 -109;

* configure.ac: Bump version (to 2.0.54-pre).  Update merge
version to 2.0.53.

* lisp/tramp.el (tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): That's a defsubst now.  Code
from `tramp-repair-jka-compr' moved here.  Register
`tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-repair-jka-compr): Remove.
(tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name): Remove them.
(tramp-completion-handle-file-name-all-completions):
Delete directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-completion-file-name-handler-alist): Delete
expand-file-name and other operations that can cause spurious loading.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
----------------------------
revision 2.359.2.71
date: 2006-04-23 14:53:53 -0700;  author: albinus;  state: Exp;  lines: +71 -44;

* lisp/tramp.el (tramp-handle-make-auto-save-file-name): For Emacs 21,
set `tramp-auto-save-directory' if unset in order to guarantee
unique auto-save file names.
(tramp-register-file-name-handlers): New defun.  Added with
autoload cookie.
(tramp-unload-file-name-handlers): Renamed from
`tramp-unload-file-name-handler-alist'.
----------------------------
revision 2.359.2.70
date: 2006-04-16 02:50:11 -0700;  author: albinus;  state: Exp;  lines: +20 -16;

* lisp/tramp.el (tramp-completion-mode): ?\t has event-modifier
'control.  Reported by Matthias Förste
<slashdevslashnull@gmx.net>.
----------------------------
revision 2.359.2.69
date: 2006-04-13 12:56:44 -0700;  author: albinus;  state: Exp;  lines: +10 -6;

* lisp/tramp.el (tramp-display-shell-command-buffer): New defvar.
(tramp-handle-shell-command): Display output buffer only when
`tramp-display-shell-command-buffer' is true.
(tramp-handle-process-file): Set `tramp-display-shell-command-buffer'.
----------------------------
revision 2.359.2.68
date: 2006-02-12 12:18:06 -0800;  author: albinus;  state: Exp;  lines: +8 -5;

* tramp.el (tramp-remote-path): Add "/usr/xpg4/bin" on top,
because on Solaris a POSIX compatible "id" is needed.  Reported by
Magnus Henoch <mange@freemail.hu>.
(tramp-perl-encode, tramp-perl-decode): Adapt copyright years.
(tramp-maybe-open-connection): Do not wait for
output from a dead connection.

* tramp-uu.el, trampver.el.in: Adapt copyright years.
----------------------------
revision 2.359.2.67
date: 2006-02-01 14:23:21 -0800;  author: albinus;  state: Exp;  lines: +6 -5;

* lisp/tramp.el (tramp-convert-file-attributes): Set file's gid change
bit only when id-format is 'integer.  Reported by Matt Hodges
<M.P.Hodges@rl.ac.uk>.
----------------------------
revision 2.359.2.66
date: 2006-01-27 13:55:23 -0800;  author: albinus;  state: Exp;  lines: +1 -0;

* configure.ac: Bump version (to 2.0.53-pre).  Update merge
version to 2.0.52.

* lisp/tramp.el: Add autoload for adding
`tramp-completion-file-name-handler' to `file-name-handler-alist'.
----------------------------
revision 2.359.2.65
date: 2006-01-22 10:38:31 -0800;  author: albinus;  state: Exp;  lines: +87 -25;


Version 2.0.52 released.

* configure.ac: Bump version.

* lisp/tramp.el, lisp/tramp-ftp.el, lisp/tramp-util.el,
lisp/tramp-vc.el: Add code for unloading Tramp.  See comment before
`tramp-unload-tramp' for checklist.

* lisp/tramp.el (tramp-unload-file-name-handler-alist)
(tramp-unload-tramp): New defuns.
(tramp-advice-PC-expand-many-files): New defadvice.
(tramp-save-PC-expand-many-files, tramp-setup-complete) Defuns
removed.

* lisp/tramp-ftp.el (tramp-ftp-enable-ange-ftp): New defun.

* lisp/tramp-util.el (top): Apply `ignore' instead of `identity' for
byte-compiler pacification.

* texi/tramp.texi (Frequently Asked Questions): Remove Ange-FTP item.
Add Tramp disabling item.
----------------------------
revision 2.359.2.64
date: 2005-12-18 03:03:59 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-handle-expand-file-name): Remove double slash.
----------------------------
revision 2.359.2.63
date: 2005-11-12 15:09:51 -0800;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.359.2.62
date: 2005-11-12 14:50:14 -0800;  author: albinus;  state: Exp;  lines: +27 -5;

* lisp/tramp.el (tramp-handle-file-attributes-with-ls): Return t as
9. attribute.  It doesn't matter, because it will be converted
later on.
(tramp-handle-file-ownership-preserved-p): Rewritten.  The old
implementation was just heuristic.
(tramp-post-connection): Set uid and gid properties.
(tramp-convert-file-attributes): Set file's gid change bit.
(tramp-get-remote-uid, tramp-get-remote-gid): New defuns.
----------------------------
revision 2.359.2.61
date: 2005-11-08 23:00:00 -0800;  author: albinus;  state: Exp;  lines: +11 -0;

* lisp/tramp.el (tramp-handle-expand-file-name): Use "~root" for tilde
expansion in case of su(do)? methods.  The home directory of the
local user will be taken else.
----------------------------
revision 2.359.2.60
date: 2005-11-05 12:56:43 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-multi): Set PS1 to "$ ".  Otherwise, a
local shell prompt could hurt.  Reported by Romain Francoise
<romain@orebokech.com>.
(tramp-action-out-of-band): Handle scp message
"Permission denied".
----------------------------
revision 2.359.2.59
date: 2005-10-30 12:23:56 -0800;  author: albinus;  state: Exp;  lines: +5 -2;

* lisp/tramp.el (tramp-chunksize): Escape parentheses in docstring
starting at beginning of line.  Fontification is messed up when
`open-paren-in-column-0-is-defun-start' set to t.  Reported by
John Paul Wallington <jpw@pobox.com>.
----------------------------
revision 2.359.2.58
date: 2005-10-23 03:54:24 -0700;  author: albinus;  state: Exp;  lines: +12 -8;

* lisp/tramp.el (tramp-let-maybe): Add `edebug-form-spec' property.
(tramp-handle-expand-file-name): Bind `default-directory' locally
to "/" in order to avoid problems with UNC shares or Cygwin
mounts.
----------------------------
revision 2.359.2.57
date: 2005-10-17 12:43:36 -0700;  author: albinus;  state: Exp;  lines: +72 -58;

* tramp.el (tramp-completion-mode): New defvar.  Used in
`tramp-completion-mode' for checking if we are in completion mode.
(tramp-completion-handle-file-name-all-completions): Reorder code
in order to complete for file names only in case there are no
method/user/host completions.  This is necessary for cooperation
with ido.  Reported by Kim F. Storm <storm@cua.dk>.
----------------------------
revision 2.359.2.56
date: 2005-10-16 04:53:01 -0700;  author: albinus;  state: Exp;  lines: +6 -3;

* lisp/tramp.el (tramp-perl-directory-files-and-attributes): Add error
handling.
(tramp-handle-directory-files-and-attributes): Handle perl error
msg.
----------------------------
revision 2.359.2.55
date: 2005-10-11 14:40:00 -0700;  author: albinus;  state: Exp;  lines: +4 -1;

* configure.ac: Bump version (to 2.0.52-pre).  Update merge
version to 2.0.51.

* Makefile.XEmacs (REQUIRES): Remove fsf-compat, add
sh-script (for executable-find).

* lisp/tramp.el: Require `timer-funcs' instead of `timer' if in
XEmacs.
----------------------------
revision 2.359.2.54
date: 2005-10-09 12:46:59 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-md5-function): Fix typo in error message.
----------------------------
revision 2.359.2.53
date: 2005-10-05 14:21:20 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el: Pacify byte compiler warnings in pacification code.
(tramp-handle-file-local-copy): Use insert-buffer-substring.
----------------------------
revision 2.359.2.52
date: 2005-09-18 13:07:22 -0700;  author: albinus;  state: Exp;  lines: +4 -2;

* tramp.el (tramp-login-prompt-regexp): Expand regexp in order to
cover prompts like "login as:".  Reported by Slawomir Nowaczyk
<slawomir.nowaczyk.847@student.lu.se>.
----------------------------
revision 2.359.2.51
date: 2005-09-07 14:28:47 -0700;  author: albinus;  state: Exp;  lines: +10 -3;

* tramp.el (tramp-action-password, tramp-multi-action-password):
Compile the password prompt from `method', `user' and `host'.
Sometimes it isn't obvious which password to enter, for example
with remote files offered by recentf.el, or with multiple steps.
Suggested by Robert Marshall <robert@chezmarshall.freeserve.co.uk>.
----------------------------
revision 2.359.2.50
date: 2005-09-03 14:48:14 -0700;  author: albinus;  state: Exp;  lines: +25 -2;

* lisp/tramp.el (tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): Insert special handling for
`last-coding-system-used' again, it still seems to be
necessary (unlike stated before).  Reported by Toshinori Sugita
<sugita@d-pad.co.jp>
----------------------------
revision 2.359.2.49
date: 2005-08-31 13:37:33 -0700;  author: albinus;  state: Exp;  lines: +62 -30;

* lisp/tramp.el (tramp-file-name-handler-alist)
(tramp-file-name-for-operation): Add `make-auto-save-file-name'.
(tramp-handle-make-auto-save-file-name): Rename from
`tramp-make-auto-save-file-name'.
(tramp-exists-file-name-handler): New defun.
(tramp-advice-make-auto-save-file-name): Make defadvice only when
`make-auto-save-file-name' is not a magic file name operation.
----------------------------
revision 2.359.2.48
date: 2005-08-25 14:21:46 -0700;  author: albinus;  state: Exp;  lines: +7 -2;

* lisp/tramp.el (tramp-password-prompt-regexp): There might be other
words before trailing ":".  Reported by Kurt Steinkraus
<kurt@steinkraus.us>.
(tramp-chunksize): Improve docstring.
(tramp-set-auto-save-file-modes): Octal integer code #o600 breaks
Emacs 20.  Use `tramp-octal-to-decimal' therefore.  Reported by
Christian Joergensen <bugs@razor.dk>.
----------------------------
revision 2.359.2.47
date: 2005-08-23 14:12:45 -0700;  author: albinus;  state: Exp;  lines: +40 -18;

* lisp/tramp.el (tramp-chunksize): Improve docstring.
----------------------------
revision 2.359.2.46
date: 2005-08-07 08:06:53 -0700;  author: albinus;  state: Exp;  lines: +31 -59;

Version 2.0.50 released.

* configure.ac: Bump version.

* lisp/tramp.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-accept-process-output): New defun.
(tramp-process-one-action, tramp-process-one-multi-action)
(tramp-wait-for-regexp, tramp-wait-for-output)
(tramp-discard-garbage-erase-buffer): Call it.  Reported by David
Howells <dhowells@redhat.com>.
(clear-visited-file-modtime): Defadvice removed.  The check for
unset buffer's modtime does not need to be based on
`tramp-buffer-file-attributes'.  Suggested by RMS.

* lisp/tramp-smb.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-smb-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-smb-wait-for-output): Call `tramp-accept-process-output'.
----------------------------
revision 2.359.2.45
date: 2005-08-01 13:48:26 -0700;  author: albinus;  state: Exp;  lines: +2 -1;

Update years in copyright notice.
----------------------------
revision 2.359.2.44
date: 2005-07-31 14:21:53 -0700;  author: albinus;  state: Exp;  lines: +6 -7;

* lisp/tramp.el (tramp-message): Insert "\n" if not being at beginning
of line.
(tramp-find-shell): Use `tramp-barf-if-no-shell-prompt' for code
sequence with same logic.
----------------------------
revision 2.359.2.43
date: 2005-07-26 13:04:13 -0700;  author: albinus;  state: Exp;  lines: +3 -3;

* lisp/tramp.el (tramp-user-regexp): Allow "@" as part of user name.
----------------------------
revision 2.359.2.42
date: 2005-07-21 14:35:08 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-handle-load): Fix typo in error message.
----------------------------
revision 2.359.2.41
date: 2005-07-20 11:51:48 -0700;  author: albinus;  state: Exp;  lines: +5 -6;

* lisp/tramp.el (tramp-completion-handle-expand-file-name): Discard call
of `tramp-drop-volume-letter'.  It is not necessary, and there
have been problems with (expand-file-name "~/.netrc" "/") in
ange-ftp.  Reported by Richard G. Bielawski
<Richard.G.Bielawski@wellsfargo.com>.
----------------------------
revision 2.359.2.40
date: 2005-07-17 09:22:26 -0700;  author: albinus;  state: Exp;  lines: +119 -77;

* lisp/tramp.el (tramp-do-copy-or-rename-file-out-of-band): Transfer
message should always be visible.
(tramp-handle-insert-directory, tramp-setup-complete)
(tramp-set-process-query-on-exit-flag)
(tramp-append-tramp-buffers): Pacify byte-compiler.
(tramp-bug): Delete non-existing variables from list.  Apply
`tramp-load-report-modules' as pre-hook.  Mask
`tramp-password-prompt-regexp', `tramp-shell-prompt-pattern' and
`shell-prompt-pattern' because of non-7bit characters.  Reported
by Sebastian Luque <sluque@mun.ca>.
(tramp-reporter-dump-variable, tramp-load-report-modules): New
defuns.
----------------------------
revision 2.359.2.39
date: 2005-07-10 14:36:48 -0700;  author: albinus;  state: Exp;  lines: +4 -18;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.359.2.38
date: 2005-06-26 12:23:35 -0700;  author: albinus;  state: Exp;  lines: +5 -4;


* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fifth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in:
----------------------------
revision 2.359.2.37
date: 2005-05-01 00:30:34 -0700;  author: albinus;  state: Exp;  lines: +18 -5;

* lisp/tramp.el (tramp-handle-dired-call-process)
(tramp-handle-insert-directory):`insert-buffer' cannot be used
because the contents of the Tramp buffer is changed before
insertion (`expand-file' and alike).
(tramp-handle-insert-directory): If `localname' has an empty
nondirectory name, it must not be quoted.
----------------------------
revision 2.359.2.36
date: 2005-04-29 13:43:06 -0700;  author: albinus;  state: Exp;  lines: +2 -1;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set file modes of
`buffer-auto-save-file-name' to ?\600 as fallback solution.
Reported by Ferenc Wagner <wferi@tba.elte.hu>.
----------------------------
revision 2.359.2.35
date: 2005-04-16 08:38:54 -0700;  author: albinus;  state: Exp;  lines: +23 -6;

* lisp/tramp.el (tramp-pre-connection): Add parameter CHUNKSIZE.  Make
local variable `tramp-chunksize'.  Change callees.
(tramp-open-connection-setup-interactive-shell): Check remote host
for buggy `send-process-string' implementation.  Set
`tramp-chunksize' if found.  Reported by Michael Kifer
<kifer@cs.sunysb.edu> (and a lot of other people all the years).
----------------------------
revision 2.359.2.34
date: 2005-04-13 13:02:16 -0700;  author: albinus;  state: Exp;  lines: +12 -2;

* lisp/tramp.el (tramp-handle-shell-command): `insert-buffer' cannot be
used because the contents of the Tramp buffer is changed before
insertion (`expand-file' and alike).  Reported by Frédéric Bothamy
<frederic.bothamy@free.fr>.
----------------------------
revision 2.359.2.33
date: 2005-04-03 12:13:32 -0700;  author: albinus;  state: Exp;  lines: +7 -3;
*** empty log message ***
----------------------------
revision 2.359.2.32
date: 2005-04-03 09:48:45 -0700;  author: albinus;  state: Exp;  lines: +26 -15;

* configure.ac: Bump version (to 2.0.49-pre).  Update merge
version to 2.0.48.

* lisp/tramp.el (tramp-set-auto-save): Actions should be done for Tramp
file name handler only.  Ange-FTP has its own auto-save mechanism.
Reported by Richard G. Bielawski <Richard.G.Bielawski@wellsfargo.com>.
(tramp-bug): Remove obsolete variable.
(tramp-append-tramp-buffers): Rewrite partly.  More suitable check
for presence of `mml-mode'.  Make it running for older Emacsen as
well.
----------------------------
revision 2.359.2.31
date: 2005-02-27 06:28:50 -0800;  author: albinus;  state: Exp;  lines: +134 -67;

* lisp/tramp.el (tramp-append-tramp-buffers): New defun.
(tramp-bug): Apply `tramp-append-tramp-buffers' as post-hook.
Catch `dont-send' signal.
----------------------------
revision 2.359.2.30
date: 2005-02-20 08:09:23 -0800;  author: albinus;  state: Exp;  lines: +7 -4;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set always
permissions, because there might be an old auto-saved file
belonging to another original file.  This could be a security
threat.

* lisp/tramp-smb.el (tramp-smb-open-connection): `executable-find'
doesn't exist in older Emacsen.  To be checked before applied.

* lisp/trampver.texi.in: Replace "Emacs" by "GNU Emacs".

* lisp/tramp.texi: Replace "Emacs" by "GNU Emacs".
(Default Method): Offer shortened syntax for "su" and "sudo"
methods.
----------------------------
revision 2.359.2.29
date: 2005-02-12 03:34:28 -0800;  author: albinus;  state: Exp;  lines: +51 -56;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.359.2.28
date: 2005-02-05 15:00:04 -0800;  author: albinus;  state: Exp;  lines: +4 -8;

* INSTALL: Change bug report address to [tramp-devel@gnu.org].

* lisp/tramp.el (all): Change all addresses to .gnu.org.
----------------------------
revision 2.359.2.27
date: 2005-02-02 14:08:21 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* configure.ac: Bump version (to 2.0.48-pre).  Update merge
version to 2.0.47.  Change bug report address to
[tramp-devel@gnu.org].

* lisp/tramp.el (tramp-file-name-for-operation) Use 'shell-command but
'shell.  Cut'n'waste error.  Reported by Vincent Bernat
<bernat@free.fr>.

* texi/tramp.texi (all): Change all addresses to .gnu.org.
----------------------------
revision 2.359.2.26
date: 2005-01-16 03:36:04 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

Version 2.0.47 released.
----------------------------
revision 2.359.2.25
date: 2005-01-15 14:27:38 -0800;  author: albinus;  state: Exp;  lines: +53 -14;

* lisp/tramp.el (tramp-operation-not-permitted-regexp) New defcustom,
catching keep-date problems in cp/scp operations.
(tramp-handle-copy-file): Don't call `set-file-modes'
unconditionally.  Specialized functions should know better what is
necessary.  This improves performance a little bit, and the
functions could catch errors with `cp -p' and `scp -p'.
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-out-of-band): Call `set-file-modes'
when appropriate.
(tramp-do-copy-or-rename-file-directly): Mask `cp -p' error.  Call
`set-file-modes' when appropriate.
(tramp-action-out-of-band): Mask `scp -p' error.
Reported by Isak Johnsson <isak@hypergene.com>
----------------------------
revision 2.359.2.24
date: 2004-12-25 13:19:39 -0800;  author: albinus;  state: Exp;  lines: +9 -2;

* lisp/tramp.el (tramp-get-buffer, tramp-get-debug-buffer): Discard the
undo list of both Tramp buffer and debug buffer.  Reported by
Joakim Verona <joakim@verona.se>
----------------------------
revision 2.359.2.23
date: 2004-12-23 16:00:48 -0800;  author: albinus;  state: Exp;  lines: +4 -2;

* configure.ac: Bump version (to 2.0.47-pre).  Update merge
version to 2.0.46.

* lisp/tramp.el (tramp-file-name-for-operation): Mark `shell-command'
as magic for Emacs only.
(tramp-wait-for-output): Fix error in deleting region.  From Kai
Grossjohann <kai.grossjohann@gmx.net>.

* lisp/tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
(tramp-vc-simple-command): Call `tramp-handle-shell-command' but
`shell-command', because it isn't magic in XEmacs.  Reported by
Adrian Aichner <adrian@xemacs.org>.
----------------------------
revision 2.359.2.22
date: 2004-12-23 02:58:23 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* configure.ac: Bump version (to 2.0.47-pre).

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`substitute-in-file-name.
(tramp-smb-handle-substitute-in-file-name): New defun.
(tramp-smb-advice-PC-do-completion): Delete advice.

Sync with trunk (Michael Albinus <michael.albinus@gmx.de>).

* lisp/tramp.el (tramp-handle-file-newer-than-file-p): Reverse logic.
From Andrew J. Korty <ajk@iu.edu>.
----------------------------
revision 2.359.2.21
date: 2004-12-05 08:54:00 -0800;  author: albinus;  state: Exp;  lines: +7 -7;


* lisp/tramp.el (tramp-maybe-send-perl-script): Change order of
parameters wrt Tramp convention.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-directory-files-and-attributes): Apply it.
----------------------------
revision 2.359.2.20
date: 2004-12-05 04:53:37 -0800;  author: albinus;  state: Exp;  lines: +294 -171;

Sync with Emacs CVS

* lisp/tramp.el (tramp-handle-directory-files-and-attributes): New function.
(tramp-perl-directory-files-and-attributes): New constant.
(tramp-file-name-handler-alist): Delete file-directory-files, add
directory-files-and-attributes.
(tramp-perl-file-attributes): Surround uid and gid by double
quotes. Change parameter id-format from nonnumeric.
(tramp-convert-file-attributes): New function.
(tramp-handle-file-attributes): Use it.
(tramp-maybe-send-perl-script): New function.
(tramp-handle-file-attributes-with-perl): Use it. Don't convert
file mode. Change parameter id-format from nonnumeric.
(tramp-handle-file-attributes-with-ls): Change parameter id-format
from nonnumeric.
(tramp-post-connection): Don't send tramp-perl-file-attributes
script. Reset connection property "perl-scripts".
(tramp-handle-insert-directory): Run real handler when ls-lisp is
in use.
----------------------------
revision 2.359.2.19
date: 2004-12-04 09:53:01 -0800;  author: albinus;  state: Exp;  lines: +9 -2;

* lisp/tramp.el (tramp-do-copy-or-rename-file-out-of-band): Check for
existence of `copy-program'.  Reported by Zack Weinberg
<zack@codesourcery.com>.
(tramp group): Add :version.
----------------------------
revision 2.359.2.18
date: 2004-11-06 12:33:02 -0800;  author: kai;  state: Exp;  lines: +3 -2;
(tramp-uudecode): Mention `uudecode -o /dev/stdout'.
----------------------------
revision 2.359.2.17
date: 2004-11-06 11:36:14 -0800;  author: kai;  state: Exp;  lines: +2 -0;
* tramp.el (tramp-coding-commands): Additionally try "uudecode -o
/dev/stdout" before trying "uudecode -o -".  Suggested by Han
Boetes.
----------------------------
revision 2.359.2.16
date: 2004-10-23 12:53:26 -0700;  author: kai;  state: Exp;  lines: +21 -1;
* tramp-vc.el (vc-do-command): Do not advise it if
process-file is fboundp.
* tramp.el (tramp-file-name-handler-alist): Add entry for
process-file.
(tramp-handle-process-file): New function.
(tramp-file-name-for-operation): Support process-file.
----------------------------
revision 2.359.2.15
date: 2004-10-17 09:03:17 -0700;  author: albinus;  state: Exp;  lines: +2 -3;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.359.2.14
date: 2004-10-10 09:54:27 -0700;  author: albinus;  state: Exp;  lines: +30 -1;


* Makefile.in (savannah): Don't call make for texi.  Only the
trunk should place its files there.

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.359.2.13
date: 2004-09-08 14:59:59 -0700;  author: albinus;  state: Exp;  lines: +1 -0;


* lisp/tramp.el (tramp-perl-decode): Fixed an error in Perl
implementation.  $pending must be cleared every loop.  Reported by
Benjamin Place <benjaminplace@sprintmail.com>
----------------------------
revision 2.359.2.12
date: 2004-08-06 13:14:08 -0700;  author: albinus;  state: Exp;  lines: +2 -1;


* lisp/tramp.el (tramp-post-connection): Quote $1 and $2 of shell
function "tramp_file_attributes".  Otherwise, file names
containing spaces are misinterpreted.  Reported by Magnus Henoch
<mange@freemail.hu>.
----------------------------
revision 2.359.2.11
date: 2004-08-05 13:02:30 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


* lisp/tramp.el (tramp-handle-file-truename): FILENAME must be expanded
first.  Otherwise, parameters like "/ssh:deego@gnufans.net:~" will
return obscure results.  Reported by D. Goel <deego@gnufans.org>.
----------------------------
revision 2.359.2.10
date: 2004-07-25 03:52:39 -0700;  author: albinus;  state: Exp;  lines: +33 -28;


* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): If file
does not exist, say it is not modified if and only if that agrees
with the buffer's record.
(tramp-handle-write-region): Pass modtime explicitely to
`set-visited-file-modtime', because filename can be different
from (buffer-file-name) if `file-precious-flag' is set.
All changes suggested by Luc Teirlinck <teirllm@auburn.edu>.
----------------------------
revision 2.359.2.9
date: 2004-07-24 11:42:36 -0700;  author: albinus;  state: Exp;  lines: +64 -56;


* lisp/tramp.el (tramp-handle-set-visited-file-modtime): If `time-list'
is not nil, don't apply the whole body.  If the file doesn't
exists, set modtime to '(-1 65535).
(tramp-handle-verify-visited-file-modtime): Check whether a file
is visiting the buffer, or the buffer has no recorded last
modification time.  Return t in case the visiting file doesn't
exists.
(tramp-handle-write-region): `set-visited-file-modtime' must be
called always when `visit' is t or a string.
All changes suggested by Luc Teirlinck <teirllm@auburn.edu>.
----------------------------
revision 2.359.2.8
date: 2004-07-17 08:37:24 -0700;  author: kai;  state: Exp;  lines: +0 -3;
(tramp-handle-verify-visited-file-modtime): Remove
outdated comment.
----------------------------
revision 2.359.2.7
date: 2004-07-17 08:34:43 -0700;  author: kai;  state: Exp;  lines: +8 -1;
2004-07-14  Luc Teirlinck  <teirllm@auburn.edu>

	* tramp.el (tramp-handle-verify-visited-file-modtime):
	`visited-file-modtime' now returns a list of two integers, instead
	of a cons.
----------------------------
revision 2.359.2.6
date: 2004-07-13 12:29:53 -0700;  author: albinus;  state: Exp;  lines: +121 -80;


Sync with trunk.
----------------------------
revision 2.359.2.5
date: 2004-06-26 08:02:07 -0700;  author: kai;  state: Exp;  lines: +8 -1;
Merge from trunk.

(tramp-handle-file-remote-p): New implementation to
agree with new return value of `file-remote-p'.
----------------------------
revision 2.359.2.4
date: 2004-05-30 13:55:59 -0700;  author: kai;  state: Exp;  lines: +10 -10;
Sync with trunk.

(tramp-let-maybe): ReportReverse args of `get'.
(tramp-let-maybe): Move to an earlier spot in the file.  Patch by
Andreas Schwab.
----------------------------
revision 2.359.2.3
date: 2004-05-29 14:40:49 -0700;  author: albinus;  state: Exp;  lines: +83 -44;


Version 2.0.41 released.

Sync with trunk
----------------------------
revision 2.359.2.2
date: 2004-05-26 13:08:04 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


* lisp/tramp.el (tramp-completion-file-name-regexp-unified): Fix
cut'n'waste error.
----------------------------
revision 2.359.2.1
date: 2004-05-16 04:48:14 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Merge from trunk:

(tramp-completion-file-name-regexp-unified): Avoid
matching filenames starting with "/:" -- those are reserved for
file-name-non-special.
----------------------------
revision 2.814.2.12
date: 2011-01-10 12:41:48 -0800;  author: albinus;  state: Exp;  lines: +33 -9;  commitid: dPCZWsJ2iF0eeL3v;
* tramp.el (tramp-find-inline-compress, tramp-get-inline-coding): Quote
command after pipe symbol for local calls under W32.  (Bug#6784)
----------------------------
revision 2.814.2.11
date: 2011-01-10 11:34:05 -0800;  author: albinus;  state: Exp;  lines: +9 -5;  commitid: Dd3sYgHEsxVZQK3v;
* tramp.el (tramp-default-method): Initialize with pscp/plink only
when running under W32.
----------------------------
revision 2.814.2.10
date: 2010-12-31 12:10:32 -0800;  author: albinus;  state: Exp;  lines: +6 -2;  commitid: XcNS9U0WTBhqnt2v;
* tramp.el (tramp-methods): Add recursive options to "scpc",
"scpx", "pscp" and "psftp".
----------------------------
revision 2.814.2.9
date: 2010-12-31 12:01:25 -0800;  author: albinus;  state: Exp;  lines: +4 -2;  commitid: edlI4dFvALCikt2v;
* tramp.el (tramp-methods): Add recursive options to "scpc" and
"scpx".
----------------------------
revision 2.814.2.8
date: 2010-12-10 05:25:44 -0800;  author: albinus;  state: Exp;  lines: +23 -22;  commitid: BU41OIYVwd0pOJZu;
* tramp.el (tramp-action-password, tramp-process-actions): Revert
patch from 2010-12-08.  Use `save-restriction'.
----------------------------
revision 2.814.2.7
date: 2010-12-08 12:02:03 -0800;  author: albinus;  state: Exp;  lines: +69 -64;  commitid: 6QChK6fqJWdm4wZu;
* tramp.el (tramp-handle-start-file-process): Protect
buffer-modified value.  (Bug#7557)
(tramp-action-password): Delete region, do not narrow.
(tramp-process-actions): Do not widen.
----------------------------
revision 2.814.2.6
date: 2010-11-13 01:54:01 -0800;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: HP5PPVF5oAQAvfWu;
* tramp.el (tramp-remote-coding-commands): Add an alternative
using "base64 -d -i".  This is needed for older base64 versions
from GNU coreutils.  Reported by Klaus Reichl
<Klaus.Reichl@thalesgroup.com>.
----------------------------
revision 2.814.2.5
date: 2010-11-06 07:09:33 -0700;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: i0R0my5dDovc9nVu;
* tramp.el (tramp-handle-insert-file-contents): Do not set
`permanent-local' property for `backup-by-copying-when-mismatch'.
----------------------------
revision 2.814.2.4
date: 2010-10-30 09:35:46 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: d2kTlq36gGhibuUu;
* tramp.el (tramp-handle-insert-file-contents): For root, preserve
owner and group when editing files.  (Bug#7289)

* tramp-fish.el: Update URL in comment (viewcvs -> viewvc).
----------------------------
revision 2.814.2.3
date: 2010-10-20 23:21:09 -0700;  author: albinus;  state: Exp;  lines: +46 -43;  commitid: y60Te0T44Qcy4hTu;
* tramp.el (tramp-get-inline-coding): Return `nil' in case of
errors.
----------------------------
revision 2.814.2.2
date: 2010-10-19 02:04:16 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: k6G4bwL643hv22Tu;
* tramp.el (tramp-do-file-attributes-with-stat)
(tramp-do-directory-files-and-attributes-with-stat): Use "e0" in
order to make stat results a float.  Patch by Andreas Schwab
<schwab@linux-m68k.org>.
----------------------------
revision 2.814.2.1
date: 2010-10-15 02:57:41 -0700;  author: albinus;  state: Exp;  lines: +10 -3;  commitid: GaU6Ec91ZVBMswSu;
* tramp.el (tramp-open-connection-setup-interactive-shell):
Suppress expansion of tabs to spaces.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/tramp2-cache.el,v
Working file: lisp/tramp2-cache.el
head: 2.5
branch:
locks: strict
access list:
symbolic names:
	stable: 2.4.0.2
keyword substitution: kv
total revisions: 6;	selected revisions: 6
description:
----------------------------
revision 2.5
date: 2001-12-06 04:17:20 -0800;  author: kaig;  state: dead;  lines: +0 -0;
Moved to tramp/tramp2 because of experimental status.
----------------------------
revision 2.4
date: 2001-03-18 20:52:10 -0800;  author: daniel;  state: Exp;  lines: +7 -2;
branches:  2.4.2;
Emacs support mega-patch. TRAMP2 now byte-compiles successfully on Emacs
20.7.2 under Linux. This makes testing under GNU Emacs as well as XEmacs
possible.
----------------------------
revision 2.3
date: 2001-03-18 05:01:58 -0800;  author: daniel;  state: Exp;  lines: +2 -2;
Make sure that error reporting works on both Emacs and XEmacs.
This should make it possible to load tramp2 on Emacs.
----------------------------
revision 2.2
date: 2001-03-18 02:51:15 -0800;  author: daniel;  state: Exp;  lines: +1 -1;
TRAMP2 `expand-file-name' handler is now, as far as I can tell, spec-compliant
/and/ safe. No more adopting non-tramp files.

This makes things *much* safer.
----------------------------
revision 2.1
date: 2001-03-10 20:54:41 -0800;  author: daniel;  state: Exp;
`insert-file-contents' and `write-region' now work.

TRAMP2 is now hooked into the `file-name-handler-alist' and basic tramp2 file
operations work successfully. File content is actually visited.

The system is basically functional but not ready for production. It requires
substantially more functional completeness before it can be used in a
real-world situation.

There is a current known bug with version control integration when visiting
files. This is being looked at. If you want to test this, expect that.
----------------------------
revision 2.4.2.1
date: 2001-06-03 05:13:13 -0700;  author: grossjoh;  state: Exp;  lines: +0 -0;
Sync with head.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/tramp2-compat.el,v
Working file: lisp/tramp2-compat.el
head: 2.4
branch:
locks: strict
access list:
symbolic names:
	stable: 2.3.0.2
keyword substitution: kv
total revisions: 5;	selected revisions: 5
description:
----------------------------
revision 2.4
date: 2001-12-06 04:17:20 -0800;  author: kaig;  state: dead;  lines: +0 -0;
Moved to tramp/tramp2 because of experimental status.
----------------------------
revision 2.3
date: 2001-03-25 19:27:42 -0800;  author: daniel;  state: Exp;  lines: +16 -0;
branches:  2.3.2;
Emacs does not accept floating point numbers in `accept-process-output'. Make
sure that we never call it with any.

This is done by wrapping the call internally and converting a floating point
number to a pair of values.
----------------------------
revision 2.2
date: 2001-03-18 20:52:10 -0800;  author: daniel;  state: Exp;  lines: +17 -3;
Emacs support mega-patch. TRAMP2 now byte-compiles successfully on Emacs
20.7.2 under Linux. This makes testing under GNU Emacs as well as XEmacs
possible.
----------------------------
revision 2.1
date: 2001-03-18 05:01:58 -0800;  author: daniel;  state: Exp;
Make sure that error reporting works on both Emacs and XEmacs.
This should make it possible to load tramp2 on Emacs.
----------------------------
revision 2.3.2.1
date: 2001-06-03 05:13:13 -0700;  author: grossjoh;  state: Exp;  lines: +0 -0;
Sync with head.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/tramp2-enc.el,v
Working file: lisp/tramp2-enc.el
head: 2.7
branch:
locks: strict
access list:
symbolic names:
	stable: 2.5.0.2
keyword substitution: kv
total revisions: 9;	selected revisions: 9
description:
----------------------------
revision 2.7
date: 2001-12-06 04:17:20 -0800;  author: kaig;  state: dead;  lines: +0 -0;
Moved to tramp/tramp2 because of experimental status.
----------------------------
revision 2.6
date: 2001-06-04 06:30:31 -0700;  author: daniel;  state: Exp;  lines: +12 -9;
Follow-up on comments from Kai - use `tramp2-shell-quote', not '%s', to
protect file names from shell expansion.
----------------------------
revision 2.5
date: 2001-03-18 20:52:10 -0800;  author: daniel;  state: Exp;  lines: +7 -3;
branches:  2.5.2;
Emacs support mega-patch. TRAMP2 now byte-compiles successfully on Emacs
20.7.2 under Linux. This makes testing under GNU Emacs as well as XEmacs
possible.
----------------------------
revision 2.4
date: 2001-03-15 02:50:38 -0800;  author: daniel;  state: Exp;  lines: +2 -2;
Sync my latest batch of changes to tramp2 trunk.
----------------------------
revision 2.3
date: 2001-03-10 20:54:41 -0800;  author: daniel;  state: Exp;  lines: +26 -28;
`insert-file-contents' and `write-region' now work.

TRAMP2 is now hooked into the `file-name-handler-alist' and basic tramp2 file
operations work successfully. File content is actually visited.

The system is basically functional but not ready for production. It requires
substantially more functional completeness before it can be used in a
real-world situation.

There is a current known bug with version control integration when visiting
files. This is being looked at. If you want to test this, expect that.
----------------------------
revision 2.2
date: 2001-03-08 00:07:12 -0800;  author: daniel;  state: Exp;  lines: +48 -10;
Implemented `write-region' for tramp2 and base64.
The code needs to be made more general, to allow the uuencode handlers
to share the same infrastructure. It works, though, which is half of
the ability of tramp present. :)
----------------------------
revision 2.1
date: 2001-03-04 22:03:01 -0800;  author: daniel;  state: Exp;
Protocol definitions now work. `ssh' and `shell' are now defined and used for
testing.

Remote detection for base64 encoder/decoder implemented along with framework
for such. uuencode stubs and base64 transfer stubs exist but not implemented.

TRAMP2 now operates on the remote machine successfully. Basic infrastructure
for connection and encoding is in place. Only actual data transfer remains
before the infrastructure is complete and the file operation handlers can be
ported.
----------------------------
revision 2.5.2.2
date: 2001-06-15 04:45:22 -0700;  author: grossjoh;  state: Exp;  lines: +12 -9;
Merge from head.
----------------------------
revision 2.5.2.1
date: 2001-06-03 05:13:14 -0700;  author: grossjoh;  state: Exp;  lines: +0 -0;
Sync with head.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/tramp2-hack.el,v
Working file: lisp/tramp2-hack.el
head: 2.4
branch:
locks: strict
access list:
symbolic names:
	stable: 2.3.0.2
keyword substitution: kv
total revisions: 5;	selected revisions: 5
description:
----------------------------
revision 2.4
date: 2001-12-06 04:17:20 -0800;  author: kaig;  state: dead;  lines: +0 -0;
Moved to tramp/tramp2 because of experimental status.
----------------------------
revision 2.3
date: 2001-03-18 20:52:10 -0800;  author: daniel;  state: Exp;  lines: +2 -1;
branches:  2.3.2;
Emacs support mega-patch. TRAMP2 now byte-compiles successfully on Emacs
20.7.2 under Linux. This makes testing under GNU Emacs as well as XEmacs
possible.
----------------------------
revision 2.2
date: 2001-03-18 17:29:56 -0800;  author: daniel;  state: Exp;  lines: +3 -1;
Only hack `file-remote-p' when it's bound.
----------------------------
revision 2.1
date: 2001-03-10 20:54:41 -0800;  author: daniel;  state: Exp;
`insert-file-contents' and `write-region' now work.

TRAMP2 is now hooked into the `file-name-handler-alist' and basic tramp2 file
operations work successfully. File content is actually visited.

The system is basically functional but not ready for production. It requires
substantially more functional completeness before it can be used in a
real-world situation.

There is a current known bug with version control integration when visiting
files. This is being looked at. If you want to test this, expect that.
----------------------------
revision 2.3.2.1
date: 2001-06-03 05:13:14 -0700;  author: grossjoh;  state: Exp;  lines: +0 -0;
Sync with head.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/tramp2-ops.el,v
Working file: lisp/tramp2-ops.el
head: 2.14
branch:
locks: strict
access list:
symbolic names:
	stable: 2.12.0.2
keyword substitution: kv
total revisions: 16;	selected revisions: 16
description:
----------------------------
revision 2.14
date: 2001-12-06 04:17:20 -0800;  author: kaig;  state: dead;  lines: +0 -0;
Moved to tramp/tramp2 because of experimental status.
----------------------------
revision 2.13
date: 2001-06-04 06:30:31 -0700;  author: daniel;  state: Exp;  lines: +15 -9;
Follow-up on comments from Kai - use `tramp2-shell-quote', not '%s', to
protect file names from shell expansion.
----------------------------
revision 2.12
date: 2001-03-18 20:52:11 -0800;  author: daniel;  state: Exp;  lines: +30 -72;
branches:  2.12.2;
Emacs support mega-patch. TRAMP2 now byte-compiles successfully on Emacs
20.7.2 under Linux. This makes testing under GNU Emacs as well as XEmacs
possible.
----------------------------
revision 2.11
date: 2001-03-18 05:01:59 -0800;  author: daniel;  state: Exp;  lines: +7 -7;
Make sure that error reporting works on both Emacs and XEmacs.
This should make it possible to load tramp2 on Emacs.
----------------------------
revision 2.10
date: 2001-03-18 04:45:48 -0800;  author: daniel;  state: Exp;  lines: +61 -1;
Implement `file-name-all-completions' and `file-name-completion'.
----------------------------
revision 2.9
date: 2001-03-18 03:10:47 -0800;  author: daniel;  state: Exp;  lines: +0 -6;
Remove a couple of debug calls that slipped the net from the code.
----------------------------
revision 2.8
date: 2001-03-18 02:51:16 -0800;  author: daniel;  state: Exp;  lines: +47 -57;
TRAMP2 `expand-file-name' handler is now, as far as I can tell, spec-compliant
/and/ safe. No more adopting non-tramp files.

This makes things *much* safer.
----------------------------
revision 2.7
date: 2001-03-15 03:02:26 -0800;  author: daniel;  state: Exp;  lines: +223 -83;
Sync what remain of the changes from the corrupted version of tramp2-ops.
*sigh*
----------------------------
revision 2.6
date: 2001-03-10 21:07:19 -0800;  author: daniel;  state: Exp;  lines: +3 -7;
There is a current known bug with version control integration when visiting
files. This is fixed; it helps to read the documentation on return types.
----------------------------
revision 2.5
date: 2001-03-10 20:54:42 -0800;  author: daniel;  state: Exp;  lines: +460 -20;
`insert-file-contents' and `write-region' now work.

TRAMP2 is now hooked into the `file-name-handler-alist' and basic tramp2 file
operations work successfully. File content is actually visited.

The system is basically functional but not ready for production. It requires
substantially more functional completeness before it can be used in a
real-world situation.

There is a current known bug with version control integration when visiting
files. This is being looked at. If you want to test this, expect that.
----------------------------
revision 2.4
date: 2001-03-08 00:07:12 -0800;  author: daniel;  state: Exp;  lines: +135 -4;
Implemented `write-region' for tramp2 and base64.
The code needs to be made more general, to allow the uuencode handlers
to share the same infrastructure. It works, though, which is half of
the ability of tramp present. :)
----------------------------
revision 2.3
date: 2001-03-04 22:03:02 -0800;  author: daniel;  state: Exp;  lines: +1 -1;
Protocol definitions now work. `ssh' and `shell' are now defined and used for
testing.

Remote detection for base64 encoder/decoder implemented along with framework
for such. uuencode stubs and base64 transfer stubs exist but not implemented.

TRAMP2 now operates on the remote machine successfully. Basic infrastructure
for connection and encoding is in place. Only actual data transfer remains
before the infrastructure is complete and the file operation handlers can be
ported.
----------------------------
revision 2.2
date: 2001-03-01 02:08:11 -0800;  author: daniel;  state: Exp;  lines: +5 -0;
TRAMP2 now establishes remote connections, in so far as '/bin/sh -i' is a
remote connection. This works for one and two hop connections, using the
[command] syntax.

Misc other cleanups, TRAMP2 making good progress toward actually working.
----------------------------
revision 2.1
date: 2001-02-28 04:07:10 -0800;  author: daniel;  state: Exp;
Initial checkin of the *NOT WORKING* tramp2 shell.

Even if you just updated to this version, though, tramp still works because
the old code isn't gone... yet.
----------------------------
revision 2.12.2.2
date: 2001-06-15 04:45:22 -0700;  author: grossjoh;  state: Exp;  lines: +15 -9;
Merge from head.
----------------------------
revision 2.12.2.1
date: 2001-06-03 05:13:14 -0700;  author: grossjoh;  state: Exp;  lines: +0 -0;
Sync with head.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/tramp2-util.el,v
Working file: lisp/tramp2-util.el
head: 2.7
branch:
locks: strict
access list:
symbolic names:
	stable: 2.5.0.2
keyword substitution: kv
total revisions: 9;	selected revisions: 9
description:
----------------------------
revision 2.7
date: 2001-12-06 04:17:20 -0800;  author: kaig;  state: dead;  lines: +0 -0;
Moved to tramp/tramp2 because of experimental status.
----------------------------
revision 2.6
date: 2001-06-04 06:30:32 -0700;  author: daniel;  state: Exp;  lines: +6 -4;
Follow-up on comments from Kai - use `tramp2-shell-quote', not '%s', to
protect file names from shell expansion.
----------------------------
revision 2.5
date: 2001-03-25 19:27:42 -0800;  author: daniel;  state: Exp;  lines: +17 -32;
branches:  2.5.2;
Emacs does not accept floating point numbers in `accept-process-output'. Make
sure that we never call it with any.

This is done by wrapping the call internally and converting a floating point
number to a pair of values.
----------------------------
revision 2.4
date: 2001-03-18 20:52:11 -0800;  author: daniel;  state: Exp;  lines: +7 -4;
Emacs support mega-patch. TRAMP2 now byte-compiles successfully on Emacs
20.7.2 under Linux. This makes testing under GNU Emacs as well as XEmacs
possible.
----------------------------
revision 2.3
date: 2001-03-18 05:01:59 -0800;  author: daniel;  state: Exp;  lines: +1 -1;
Make sure that error reporting works on both Emacs and XEmacs.
This should make it possible to load tramp2 on Emacs.
----------------------------
revision 2.2
date: 2001-03-15 02:50:38 -0800;  author: daniel;  state: Exp;  lines: +83 -16;
Sync my latest batch of changes to tramp2 trunk.
----------------------------
revision 2.1
date: 2001-03-10 20:54:42 -0800;  author: daniel;  state: Exp;
`insert-file-contents' and `write-region' now work.

TRAMP2 is now hooked into the `file-name-handler-alist' and basic tramp2 file
operations work successfully. File content is actually visited.

The system is basically functional but not ready for production. It requires
substantially more functional completeness before it can be used in a
real-world situation.

There is a current known bug with version control integration when visiting
files. This is being looked at. If you want to test this, expect that.
----------------------------
revision 2.5.2.2
date: 2001-06-15 04:45:23 -0700;  author: grossjoh;  state: Exp;  lines: +6 -4;
Merge from head.
----------------------------
revision 2.5.2.1
date: 2001-06-03 05:13:15 -0700;  author: grossjoh;  state: Exp;  lines: +0 -0;
Sync with head.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/tramp2.el,v
Working file: lisp/tramp2.el
head: 2.19
branch:
locks: strict
access list:
symbolic names:
	stable: 2.15.0.2
keyword substitution: kv
total revisions: 22;	selected revisions: 22
description:
----------------------------
revision 2.19
date: 2001-12-06 04:17:20 -0800;  author: kaig;  state: dead;  lines: +1 -1;
Moved to tramp/tramp2 because of experimental status.
----------------------------
revision 2.18
date: 2001-08-31 10:22:19 -0700;  author: grossjoh;  state: Exp;  lines: +24 -13;
(tramp2-setup-coding-system): Find a good coding
system in extra function so it can be customized via
tramp2-setup-functions.
(tramp2-execute-local): Set TERM to dumb, just to be on the safe
side.
----------------------------
revision 2.17
date: 2001-06-05 19:40:27 -0700;  author: daniel;  state: Exp;  lines: +2 -2;
Call functions with the correct number of arguments.
I need a brown paper bag and a sticker with "test first" written on it.
----------------------------
revision 2.16
date: 2001-06-04 06:21:05 -0700;  author: daniel;  state: Exp;  lines: +56 -49;
Reduce the body of the `tramp2-with-connection' macro to something a little
more sane. Moved most of it's content to `tramp2-establish-connection', a
function.
----------------------------
revision 2.15
date: 2001-03-25 19:27:42 -0800;  author: daniel;  state: Exp;  lines: +4 -4;
branches:  2.15.2;
Emacs does not accept floating point numbers in `accept-process-output'. Make
sure that we never call it with any.

This is done by wrapping the call internally and converting a floating point
number to a pair of values.
----------------------------
revision 2.14
date: 2001-03-19 20:57:51 -0800;  author: daniel;  state: Exp;  lines: +60 -43;
Added some new todo stuff so I don't forget about the hostname completion.
----------------------------
revision 2.13
date: 2001-03-19 03:07:35 -0800;  author: daniel;  state: Exp;  lines: +16 -24;
Brown paper bag time: `def-tramp-handler' now works when compiled as well as
when evaluated.
----------------------------
revision 2.12
date: 2001-03-18 20:52:11 -0800;  author: daniel;  state: Exp;  lines: +70 -53;
Emacs support mega-patch. TRAMP2 now byte-compiles successfully on Emacs
20.7.2 under Linux. This makes testing under GNU Emacs as well as XEmacs
possible.
----------------------------
revision 2.11
date: 2001-03-18 05:01:59 -0800;  author: daniel;  state: Exp;  lines: +13 -11;
Make sure that error reporting works on both Emacs and XEmacs.
This should make it possible to load tramp2 on Emacs.
----------------------------
revision 2.10
date: 2001-03-18 02:51:16 -0800;  author: daniel;  state: Exp;  lines: +15 -16;
TRAMP2 `expand-file-name' handler is now, as far as I can tell, spec-compliant
/and/ safe. No more adopting non-tramp files.

This makes things *much* safer.
----------------------------
revision 2.9
date: 2001-03-15 02:50:38 -0800;  author: daniel;  state: Exp;  lines: +126 -59;
Sync my latest batch of changes to tramp2 trunk.
----------------------------
revision 2.8
date: 2001-03-10 21:07:19 -0800;  author: daniel;  state: Exp;  lines: +3 -1;
There is a current known bug with version control integration when visiting
files. This is fixed; it helps to read the documentation on return types.
----------------------------
revision 2.7
date: 2001-03-10 20:54:42 -0800;  author: daniel;  state: Exp;  lines: +455 -127;
`insert-file-contents' and `write-region' now work.

TRAMP2 is now hooked into the `file-name-handler-alist' and basic tramp2 file
operations work successfully. File content is actually visited.

The system is basically functional but not ready for production. It requires
substantially more functional completeness before it can be used in a
real-world situation.

There is a current known bug with version control integration when visiting
files. This is being looked at. If you want to test this, expect that.
----------------------------
revision 2.6
date: 2001-03-08 00:07:12 -0800;  author: daniel;  state: Exp;  lines: +122 -74;
Implemented `write-region' for tramp2 and base64.
The code needs to be made more general, to allow the uuencode handlers
to share the same infrastructure. It works, though, which is half of
the ability of tramp present. :)
----------------------------
revision 2.5
date: 2001-03-04 22:03:02 -0800;  author: daniel;  state: Exp;  lines: +276 -25;
Protocol definitions now work. `ssh' and `shell' are now defined and used for
testing.

Remote detection for base64 encoder/decoder implemented along with framework
for such. uuencode stubs and base64 transfer stubs exist but not implemented.

TRAMP2 now operates on the remote machine successfully. Basic infrastructure
for connection and encoding is in place. Only actual data transfer remains
before the infrastructure is complete and the file operation handlers can be
ported.
----------------------------
revision 2.4
date: 2001-03-04 03:29:04 -0800;  author: daniel;  state: Exp;  lines: +221 -69;
TRAMP2 actually works, end-to-end, on a local connection. The handler does the
right thing and all.

If you get real enthusiastic, test it with:
M-: (tramp2-handler-for-noop "/!:[/bin/sh -i]localhost::test.file")
----------------------------
revision 2.3
date: 2001-03-01 03:44:48 -0800;  author: daniel;  state: Exp;  lines: +111 -20;
Remote command execution now works when running a single '/bin/sh -i' session
and the 'noop' handler. It seems to hang on the second hop connection running
locally...

Still, it's /way/ positive progress - and the remote command success/failure
and output parser works as intended, which rocks.
----------------------------
revision 2.2
date: 2001-03-01 02:08:11 -0800;  author: daniel;  state: Exp;  lines: +193 -62;
TRAMP2 now establishes remote connections, in so far as '/bin/sh -i' is a
remote connection. This works for one and two hop connections, using the
[command] syntax.

Misc other cleanups, TRAMP2 making good progress toward actually working.
----------------------------
revision 2.1
date: 2001-02-28 04:07:11 -0800;  author: daniel;  state: Exp;
Initial checkin of the *NOT WORKING* tramp2 shell.

Even if you just updated to this version, though, tramp still works because
the old code isn't gone... yet.
----------------------------
revision 2.15.2.3
date: 2001-07-16 02:54:57 -0700;  author: grossjoh;  state: Exp;  lines: +0 -0;
Merge with head as of 2001-07-15.
----------------------------
revision 2.15.2.2
date: 2001-06-15 04:45:23 -0700;  author: grossjoh;  state: Exp;  lines: +56 -49;
Merge from head.
----------------------------
revision 2.15.2.1
date: 2001-06-03 05:13:16 -0700;  author: grossjoh;  state: Exp;  lines: +1 -1;
Sync with head.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/trampcache.el,v
Working file: lisp/trampcache.el
head: 2.4
branch:
locks: strict
access list:
symbolic names:
	V-2-0-57: 2.2.2.2
	V-2-0-56: 2.2.2.1
	V-2-0-55: 2.2.2.1
	V-2-0-54: 2.2.2.1
	V-2-0-53: 2.2.2.1
	V-2-0-52: 2.2.2.1
	V-2-0-51: 2.2.2.1
	V-2-0-50: 2.2.2.1
	V-2-0-49: 2.2
	V-2-0-48: 2.2
	V-2-1-3: 2.2
	V-2-0-47: 2.2
	V-2-0-46: 2.2
	V-2-0-45: 2.2
	V-2-1-2: 2.2
	V-2-0-44: 2.2
	V-2-1-1: 2.2
	V-2-0-43: 2.2
	V-2-0-42: 2.2
	V-2-0-41: 2.2
	V-2-1-0: 2.2
	branch-2-0-stable: 2.2.0.2
	branchpoint-2-0-stable: 2.2
	V-2-0-40: 2.2
	V-2-0-39: 2.1
	V-2-0-38: 2.1
	V-2-0-37: 2.1
	V-2-0-36: 2.1
	V-2-0-35: 2.1
	V-2-0-34: 2.1
	V-2-0-33: 2.1
	V-2-0-32: 2.1
	V-2-0-30: 2.1
	V-2-0-29: 2.1
	V-2-0-28: 2.1
	V-2-0-27: 2.1
	V-2-0-26: 2.1
	V-2-0-25: 2.1
	V-2-0-24: 2.1
	V-2-0-23: 2.1
	V-2-0-22: 2.1
	V-2-0-21: 2.1
	V-2-0-20: 2.1
	V-2-0-19: 2.1
	V-2-0-18: 2.1
	V-2-0-17: 2.1
	V-2-0-16: 2.1
	V-2-0-15: 2.1
	V-2-0-14: 2.1
	V-2-0-13: 2.1
	completion: 2.1.0.2
	V-2-0-12: 2.1
	V-2-0-11: 2.1
	V-2-0-10: 2.1
	V-2-0-9: 2.1
	V-2-0-8: 2.1
	V-2-0-7: 2.1
	V-2-0-6: 2.1
	V-2-0-5: 2.1
	V-2-0-4: 2.1
	V-2-0-3: 2.1
	V-2-0-1: 2.1
	EMACS-21: 2.1
	V-2-0-0: 2.1
	tramp-xemacs-pkg: 2.0.0.4
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 8;	selected revisions: 8
description:
----------------------------
revision 2.4
date: 2005-08-28 11:34:37 -0700;  author: albinus;  state: dead;  lines: +0 -0;

Remove trampcache.el. It is replaced by tramp-cache.el
----------------------------
revision 2.3
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +4 -4;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.2
date: 2004-03-01 23:24:45 -0800;  author: kai;  state: Exp;  lines: +0 -1;
branches:  2.2.2;
(tramp-completion-mode, tramp-md5-function): Use
symbol-function to invoke functions only known on some Emacs
flavors.  This avoids byte-compiler warnings.  Reported by Kevin
Scaldeferri <kevin@scaldeferri.com>.
----------------------------
revision 2.1
date: 2002-06-17 03:57:20 -0700;  author: kai;  state: Exp;  lines: +0 -1;
Include version number.
(MANIFEST): Don't include directory name "tramp/" in the entries.
(tar): Create a tramp-$(VERSION).tar.gz file.
(dist, savannah): tramp.tar.gz renamed to tramp-$(VERSION).tar.gz.
----------------------------
revision 2.0
date: 2001-02-28 02:39:32 -0800;  author: grossjoh;  state: Exp;  lines: +1 -1;
Going stable?
----------------------------
revision 1.1
date: 2000-06-01 06:42:59 -0700;  author: daniel;  state: Exp;
Initial infrastructure for implementing remote file information caching.

This is *not* a working implementation or anything like that. It's a start at
providing the background support needed to put caching into the main body of
the code.

I intend to flesh out this infrastructure and begin to use it through the
code over the next few days.

This is being made available to solicit comments on the public interface and
the nature of the data storage (if you can work it out :)
----------------------------
revision 2.2.2.2
date: 2007-07-25 12:37:31 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.2.2.1
date: 2005-07-10 14:36:49 -0700;  author: albinus;  state: Exp;  lines: +4 -4;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/Attic/trampver.el,v
Working file: lisp/trampver.el
head: 1.2
branch:
locks: strict
access list:
symbolic names:
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.2
date: 2008-03-21 10:24:23 -0700;  author: albinus;  state: dead;  lines: +0 -0;  commitid: 8Jl7khKJ51Hj51Ws;
*** empty log message ***
----------------------------
revision 1.1
date: 2008-03-21 09:45:10 -0700;  author: albinus;  state: Exp;  commitid: hjOwrdo4QbxWR0Ws;
Fix up encoding.
=============================================================================

RCS file: /sources/tramp/tramp/lisp/trampver.el.in,v
Working file: lisp/trampver.el.in
head: 2.24
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.22
	branch-2-1-stable: 2.20.0.2
	branchpoint-2-1-stable: 2.20
	V-2-1-19: 2.20
	V-2-1-18: 2.20
	V-2-1-17: 2.18
	V-2-1-16: 2.18
	V-2-1-15: 2.18
	V-2-1-14: 2.17
	V-2-1-13: 2.15
	V-2-0-57: 2.2.2.8
	V-2-1-12: 2.12
	V-2-1-11: 2.11
	V-2-1-10: 2.9
	V-2-0-56: 2.2.2.4
	V-2-1-9: 2.6
	V-2-1-8: 2.6
	V-2-0-55: 2.2.2.4
	V-2-1-7: 2.6
	V-2-0-54: 2.2.2.4
	V-2-1-6: 2.6
	V-2-0-53: 2.2.2.4
	V-2-0-52: 2.2.2.3
	V-2-1-5: 2.5
	V-2-1-4: 2.5
	V-2-0-51: 2.2.2.3
	V-2-0-50: 2.2.2.3
	V-2-0-49: 2.2
	V-2-0-48: 2.2
	V-2-1-3: 2.3
	V-2-0-47: 2.2
	V-2-0-46: 2.2
	V-2-0-45: 2.2
	V-2-1-2: 2.3
	V-2-0-44: 2.2
	V-2-1-1: 2.3
	V-2-0-43: 2.2
	V-2-0-42: 2.2
	V-2-0-41: 2.2
	V-2-1-0: 2.2
	branch-2-0-stable: 2.2.0.2
	branchpoint-2-0-stable: 2.2
	V-2-0-40: 2.2
	V-2-0-39: 2.2
	V-2-0-38: 2.2
	V-2-0-37: 2.1
	V-2-0-36: 2.1
	V-2-0-35: 2.1
	V-2-0-34: 2.1
	V-2-0-33: 2.1
	V-2-0-32: 2.1
keyword substitution: kv
total revisions: 33;	selected revisions: 33
description:
----------------------------
revision 2.24
date: 2011-01-26 01:43:34 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.23
date: 2011-01-19 03:09:00 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 2.22
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -1;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 2.21
date: 2010-09-08 06:48:41 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: f8KVMZ3mcKcLVMNu;
Rearrange load dependencies.  (Bug#1529, Bug#5448, Bug#5705)

* Makefile.in (tramp-bug-report-address): New variable.
(EVAL): Remove variable.
(EM): Adapt variable.
(tramp-autoloads, tramp-loaddefs.el): New entries
(all): Depend on tramp-autoloads.
(%.elc): Change call of $(EM).
(distclean): Remove also trampver.el and tramp-loaddefs.el.

* tramp.el (top): Remove all other tramp-* loads except
tramp-compat.el.  Remove all changes to tramp-unload-hook for
other tramp-* packages.  Rearrange defun order.  Change calls of
`tramp-compat-call-process', `tramp-compat-decimal-to-octal',
`tramp-compat-octal-to-decimal' to new function names.
(tramp-terminal-type, tramp-initial-end-of-output)
(tramp-methods, tramp-foreign-file-name-handler-alist)
(tramp-tramp-file-p, tramp-completion-mode-p)
(tramp-send-command-and-check, tramp-get-remote-path)
(tramp-get-remote-tmpdir, tramp-get-remote-ln)
(tramp-shell-quote-argument): Set tramp-autoload cookie.
(with-file-property, with-connection-property): Move to
tramp-cache.el.
(tramp-local-call-process, tramp-decimal-to-octal)
(tramp-octal-to-decimal): Move to tramp-compat.el.
(tramp-handle-shell-command): Do not require 'shell.
(tramp-compute-multi-hops): No special handling for tramp-gw-*
symbols.
(tramp-unload-tramp): Do not call `tramp-unload-file-name-handlers'.

* tramp-cache.el (top): Require 'tramp.  Add to `tramp-unload-hook'.
(tramp-cache-data, tramp-get-file-property)
(tramp-set-file-property, tramp-flush-file-property)
(tramp-flush-directory-property, tramp-get-connection-property)
(tramp-set-connection-property, tramp-flush-connection-property)
(tramp-cache-print, tramp-list-connections): Set tramp-autoload
cookie.
(with-file-property, with-connection-property): New defuns, moved
from tramp.el.
(tramp-flush-file-function): Use `with-parsed-tramp-file-name'
macro.

* tramp-cmds.el (top): Add to `tramp-unload-hook'.
(tramp-version): Set tramp-autoload cookie.

* tramp-compat.el (top): Require 'tramp-loaddefs.  Remove all
changes to tramp-unload-hook for other tramp-* packages.  Add to
`tramp-unload-hook'.
(tramp-compat-decimal-to-octal, tramp-compat-octal-to-decimal)
(tramp-compat-call-process): New defuns, moved from tramp.el.

* tramp-efs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-efs-method): Make it a defconst.
(tramp-efs-file-name-p): Make it a defsubst.
(tramp-efs-method, tramp-efs-file-name-handler)
(tramp-efs-file-name-p): Set tramp-autoload cookie.

* tramp-fish.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change call of
`tramp-compat-decimal-to-octal' to new function name.
(tramp-fish-method): Make it a defconst.
(tramp-fish-file-name-p): Make it a defsubst.
(tramp-fish-method, tramp-fish-file-name-handler)
(tramp-fish-file-name-p): Set tramp-autoload cookie.

* tramp-ftp.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-ftp-method): Make it a defconst.
(tramp-ftp-file-name-p): Make it a defsubst.
(tramp-ftp-method, tramp-ftp-file-name-handler)
(tramp-ftp-file-name-p): Set tramp-autoload cookie.

* tramp-gvfs.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-gvfs-file-name-p): Make it a defsubst.
(tramp-gvfs-methods, tramp-gvfs-file-name-handler)
(tramp-gvfs-file-name-p): Set tramp-autoload cookie.
(tramp-gvfs-handle-file-directory-p): New defun.
(tramp-gvfs-file-name-handler-alist): Use it.

* tramp-gw.el (top) Add objects to `tramp-methods' and
`tramp-foreign-file-name-handler-alist'.  Add to
`tramp-unload-hook'.
(tramp-gw-tunnel-method, tramp-gw-default-tunnel-port)
(tramp-gw-socks-method, tramp-gw-default-socks-port): Make it a
defconst.
(tramp-gw-tunnel-method, tramp-gw-socks-method)
(tramp-gw-open-connection): Set tramp-autoload cookie.

* tramp-imap.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.
(tramp-imap-file-name-p): Make it a defsubst.
(tramp-imap-method, tramp-imaps-method)
(tramp-imap-file-name-handler)
(tramp-imap-file-name-p): Set tramp-autoload cookie.

* tramp-smb.el (top) Require just 'tramp.  Add objects to
`tramp-methods' and `tramp-foreign-file-name-handler-alist'.  Add
to `tramp-unload-hook'.  Change checks, whether package can be
loaded.  Change call of `tramp-compat-decimal-to-octal' to new
function name.
(tramp-smb-tunnel-method): Make it a defconst.
(tramp-smb-file-name-p): Make it a defsubst.
(tramp-smb-method, tramp-smb-file-name-handler)
(tramp-smb-file-name-p): Set tramp-autoload cookie.

* tramp-util.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* tramp-uu.el (top) Add to `tramp-unload-hook'.
(tramp-uuencode-region): Set tramp-autoload cookie.

* tramp-vc.el (top) Require just 'tramp.  Add to
`tramp-unload-hook'.

* trampver.el.in (top) Add to `tramp-unload-hook'.
(tramp-version, tramp-bug-report-address): Set tramp-autoload cookie.

* .cvsignore: Add tramp-loaddefs.el.
----------------------------
revision 2.20
date: 2010-01-22 13:13:57 -0800;  author: albinus;  state: Exp;  lines: +5 -4;  commitid: Pfp1A8yJSIjKKoku;
branches:  2.20.2;
* tramp-imap.el (top): Autoload needed packages.
----------------------------
revision 2.19
date: 2010-01-14 20:52:28 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: zweSrHgxjm35ypju;
Add 2010 to copyright years.
----------------------------
revision 2.18
date: 2009-01-05 11:57:58 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: WClLjg8lVn29Cixt;
*** empty log message ***
----------------------------
revision 2.17
date: 2008-05-13 14:19:08 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: fej9SZVNgy5jGQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.16
date: 2008-04-10 13:25:22 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: Of6a1VbHTLKCrBYs;
Fix up comment convention on the arch-tag lines.
----------------------------
revision 2.15
date: 2008-03-21 09:43:48 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 3pRvmWOgeTctR0Ws;
Fix up encoding.
----------------------------
revision 2.14
date: 2008-03-17 15:45:55 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: azuv0ATd7fFFZwVs;
* trampver.el.in (top): Move coding cookie at the end.
----------------------------
revision 2.13
date: 2008-01-12 03:04:24 -0800;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.12
date: 2007-12-23 04:26:39 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: NvaEbe3Y9l0piyKs;

* lisp/trampver.el.in (x): Fix buggy call to `error'.
----------------------------
revision 2.11
date: 2007-09-30 09:32:30 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: t27oXoaEasyGlMzs;

* Makefile.in (EMACS_EL_FILES, XEMACS_FILES): Add tramp-compat.el.

* lisp/Makefile.in (LISP_FILES): Add tramp-compat.el.

* lisp/tramp-compat.el: New file.

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Move compatibility code to tramp-compat.el.
Apply `mapc' instead of `mapcar' when the code needs side effects
only.  Move utf-8 coding cookie to the second line.
----------------------------
revision 2.10
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +4 -4;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.9
date: 2007-07-01 22:09:53 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.8
date: 2007-07-01 11:31:35 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.7
date: 2007-05-28 06:20:38 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: Ma8UwuYWkhiejHjs;

* Makefile.in (XEMACS_FILES) Add texi/doclicense.texi.

* texi/doclicense.texi: New file.

* texi/Makefile.in (TEXI_FILES): Add doclicense.texi.
----------------------------
revision 2.6
date: 2006-02-12 12:48:01 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-maybe-open-connection): Do not wait for
output from a dead connection.
----------------------------
revision 2.5
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.4
date: 2005-06-26 12:45:08 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fourth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in: Adapt email addresses.
----------------------------
revision 2.3
date: 2004-07-30 12:52:03 -0700;  author: albinus;  state: Exp;  lines: +8 -3;


* INSTALL: Precise supported (X)Emacs versions.

* aclocal.m4 (AC_EMACS_INFO): Add check for proper (X)Emacs
version.

* configure.ac: Precise comments.

* lisp/trampver.el.in: Check for (X)Emacs version.  Code is from macro
AC_EMACS_INFO of aclocal.m4.

* lisp/tramp.el (top): Remove (X)Emacs version check.
(tramp-maybe-open-connection): Handle NIL values in
`tramp-default-proxies-alist'.

* texi/trampver.texi.in: Remove `postfixmultihop'.  Rename
`postfixsinglehop' into `postfixhop'.

* texi/tramp.texi (top): Rename `postfixsinglehop' into `postfixhop'.
(Multi-hop Methods, Multi-hop filename syntax): Removed, including
al pointers to.
(Multi-hops): New chapter.
(History of Tramp): Proxy hosts mentioned.
(Frequently Asked Questions): Precise supported (X)Emacs
versions.
----------------------------
revision 2.2
date: 2003-11-30 09:48:03 -0800;  author: kai;  state: Exp;  lines: +1 -0;
branches:  2.2.2;
* tramp-ftp.el, tramp-smb.el, tramp-util.el, tramp-uu.el:
* tramp-vc.el, tramp.el, trampver.el.in: Add arch tagline.
----------------------------
revision 2.1
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.2.2.8
date: 2008-02-02 02:32:29 -0800;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: vKCZH8xyvFPKlOPs;
*** empty log message ***
----------------------------
revision 2.2.2.7
date: 2007-08-07 12:52:03 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: oKChXHP6TTRjcRss;

* lisp/trampver.el.in: Fix the `coding' cookie.
----------------------------
revision 2.2.2.6
date: 2007-07-25 12:37:31 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.2.2.5
date: 2007-05-28 03:11:24 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 1phYrakvGyMHgGjs;
*** empty log message ***
----------------------------
revision 2.2.2.4
date: 2006-02-12 12:18:06 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* tramp.el (tramp-remote-path): Add "/usr/xpg4/bin" on top,
because on Solaris a POSIX compatible "id" is needed.  Reported by
Magnus Henoch <mange@freemail.hu>.
(tramp-perl-encode, tramp-perl-decode): Adapt copyright years.
(tramp-maybe-open-connection): Do not wait for
output from a dead connection.

* tramp-uu.el, trampver.el.in: Adapt copyright years.
----------------------------
revision 2.2.2.3
date: 2005-08-01 13:48:27 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

Update years in copyright notice.
----------------------------
revision 2.2.2.2
date: 2005-07-10 14:36:49 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.2.2.1
date: 2005-06-26 12:23:35 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fifth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in:
----------------------------
revision 2.20.2.1
date: 2011-01-24 02:09:41 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
=============================================================================

RCS file: /sources/tramp/tramp/test/test-harness.el,v
Working file: test/test-harness.el
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.10
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
	V-2-1-18: 1.1
	V-2-1-17: 1.1
	V-2-1-16: 1.1
	V-2-1-15: 1.1
	V-2-1-14: 1.1
	V-2-1-13: 1.1
	V-2-0-57: 1.1
	V-2-1-12: 1.1
	V-2-1-11: 1.1
	V-2-1-10: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.8
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.6
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.4
	stable: 1.1.0.2
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.1
date: 2001-02-28 04:07:12 -0800;  author: daniel;  state: Exp;
branches:  1.1.2;
Initial checkin of the *NOT WORKING* tramp2 shell.

Even if you just updated to this version, though, tramp still works because
the old code isn't gone... yet.
----------------------------
revision 1.1.2.1
date: 2001-06-03 05:13:16 -0700;  author: grossjoh;  state: Exp;  lines: +0 -0;
Sync with head.
=============================================================================

RCS file: /sources/tramp/tramp/test/tramp-expr.el,v
Working file: test/tramp-expr.el
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.10
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
	V-2-1-18: 1.1
	V-2-1-17: 1.1
	V-2-1-16: 1.1
	V-2-1-15: 1.1
	V-2-1-14: 1.1
	V-2-1-13: 1.1
	V-2-0-57: 1.1
	V-2-1-12: 1.1
	V-2-1-11: 1.1
	V-2-1-10: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.8
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.6
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.4
	stable: 1.1.0.2
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.1
date: 2001-02-28 04:07:13 -0800;  author: daniel;  state: Exp;
branches:  1.1.2;
Initial checkin of the *NOT WORKING* tramp2 shell.

Even if you just updated to this version, though, tramp still works because
the old code isn't gone... yet.
----------------------------
revision 1.1.2.1
date: 2001-06-03 05:13:17 -0700;  author: grossjoh;  state: Exp;  lines: +0 -0;
Sync with head.
=============================================================================

RCS file: /sources/tramp/tramp/test/tramp-file-name.el,v
Working file: test/tramp-file-name.el
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.10
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
	V-2-1-18: 1.1
	V-2-1-17: 1.1
	V-2-1-16: 1.1
	V-2-1-15: 1.1
	V-2-1-14: 1.1
	V-2-1-13: 1.1
	V-2-0-57: 1.1
	V-2-1-12: 1.1
	V-2-1-11: 1.1
	V-2-1-10: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.8
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.6
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.4
	stable: 1.1.0.2
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.1
date: 2001-03-15 02:50:40 -0800;  author: daniel;  state: Exp;
branches:  1.1.2;
Sync my latest batch of changes to tramp2 trunk.
----------------------------
revision 1.1.2.1
date: 2001-06-03 05:13:17 -0700;  author: grossjoh;  state: Exp;  lines: +0 -0;
Sync with head.
=============================================================================

RCS file: /sources/tramp/tramp/test/tramp-path.el,v
Working file: test/tramp-path.el
head: 1.2
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.2
	branch-2-1-stable: 1.2.0.10
	branchpoint-2-1-stable: 1.2
	V-2-1-19: 1.2
	V-2-1-18: 1.2
	V-2-1-17: 1.2
	V-2-1-16: 1.2
	V-2-1-15: 1.2
	V-2-1-14: 1.2
	V-2-1-13: 1.2
	V-2-0-57: 1.2
	V-2-1-12: 1.2
	V-2-1-11: 1.2
	V-2-1-10: 1.2
	V-2-0-56: 1.2
	V-2-1-9: 1.2
	V-2-1-8: 1.2
	V-2-0-55: 1.2
	V-2-1-7: 1.2
	V-2-0-54: 1.2
	V-2-1-6: 1.2
	V-2-0-53: 1.2
	V-2-0-52: 1.2
	V-2-1-5: 1.2
	V-2-1-4: 1.2
	V-2-0-51: 1.2
	V-2-0-50: 1.2
	V-2-0-49: 1.2
	V-2-0-48: 1.2
	V-2-1-3: 1.2
	V-2-0-47: 1.2
	V-2-0-46: 1.2
	V-2-0-45: 1.2
	V-2-1-2: 1.2
	V-2-0-44: 1.2
	V-2-1-1: 1.2
	V-2-0-43: 1.2
	V-2-0-42: 1.2
	V-2-0-41: 1.2
	V-2-1-0: 1.2
	branch-2-0-stable: 1.2.0.8
	branchpoint-2-0-stable: 1.2
	V-2-0-40: 1.2
	V-2-0-39: 1.2
	V-2-0-38: 1.2
	V-2-0-37: 1.2
	V-2-0-36: 1.2
	V-2-0-35: 1.2
	V-2-0-34: 1.2
	V-2-0-33: 1.2
	V-2-0-32: 1.2
	V-2-0-30: 1.2
	V-2-0-29: 1.2
	V-2-0-28: 1.2
	V-2-0-27: 1.2
	V-2-0-26: 1.2
	V-2-0-25: 1.2
	V-2-0-24: 1.2
	V-2-0-23: 1.2
	V-2-0-22: 1.2
	V-2-0-21: 1.2
	V-2-0-20: 1.2
	V-2-0-19: 1.2
	V-2-0-18: 1.2
	V-2-0-17: 1.2
	V-2-0-16: 1.2
	V-2-0-15: 1.2
	V-2-0-14: 1.2
	V-2-0-13: 1.2
	completion: 1.2.0.6
	V-2-0-12: 1.2
	V-2-0-11: 1.2
	V-2-0-10: 1.2
	V-2-0-9: 1.2
	V-2-0-8: 1.2
	V-2-0-7: 1.2
	V-2-0-6: 1.2
	V-2-0-5: 1.2
	V-2-0-4: 1.2
	V-2-0-3: 1.2
	V-2-0-1: 1.2
	EMACS-21: 1.2
	V-2-0-0: 1.2
	tramp-xemacs-pkg: 1.2.0.4
	stable: 1.2.0.2
keyword substitution: kv
total revisions: 3;	selected revisions: 3
description:
----------------------------
revision 1.2
date: 2001-03-10 20:54:43 -0800;  author: daniel;  state: Exp;  lines: +2 -1;
branches:  1.2.2;
`insert-file-contents' and `write-region' now work.

TRAMP2 is now hooked into the `file-name-handler-alist' and basic tramp2 file
operations work successfully. File content is actually visited.

The system is basically functional but not ready for production. It requires
substantially more functional completeness before it can be used in a
real-world situation.

There is a current known bug with version control integration when visiting
files. This is being looked at. If you want to test this, expect that.
----------------------------
revision 1.1
date: 2001-02-28 04:07:13 -0800;  author: daniel;  state: Exp;
Initial checkin of the *NOT WORKING* tramp2 shell.

Even if you just updated to this version, though, tramp still works because
the old code isn't gone... yet.
----------------------------
revision 1.2.2.1
date: 2001-06-03 05:13:17 -0700;  author: grossjoh;  state: Exp;  lines: +0 -0;
Sync with head.
=============================================================================

RCS file: /sources/tramp/tramp/test/tramp-time.el,v
Working file: test/tramp-time.el
head: 1.11
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.11
	branch-2-1-stable: 1.11.0.2
	branchpoint-2-1-stable: 1.11
	V-2-1-19: 1.11
	V-2-1-18: 1.11
	V-2-1-17: 1.11
	V-2-1-16: 1.11
	V-2-1-15: 1.11
	V-2-1-14: 1.11
	V-2-1-13: 1.10
	V-2-1-12: 1.9
	V-2-1-11: 1.9
	V-2-1-10: 1.8
	V-2-1-9: 1.6
	V-2-1-8: 1.6
	V-2-1-7: 1.6
	V-2-1-6: 1.6
	V-2-1-5: 1.4
	V-2-1-4: 1.4
keyword substitution: kv
total revisions: 11;	selected revisions: 11
description:
----------------------------
revision 1.11
date: 2008-05-13 14:19:35 -0700;  author: albinus;  state: Exp;  lines: +6 -7;  commitid: 0vQLdPIHBexsGQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 1.10
date: 2008-01-12 03:04:24 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 1.9
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +3 -3;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 1.8
date: 2007-07-01 22:09:53 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 1.7
date: 2007-07-01 11:31:35 -0700;  author: albinus;  state: Exp;  lines: +5 -7;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 1.6
date: 2006-05-28 11:47:01 -0700;  author: albinus;  state: Exp;  lines: +12 -5;

Version 2.1.6 released.
----------------------------
revision 1.5
date: 2006-05-21 09:15:06 -0700;  author: albinus;  state: Exp;  lines: +40 -10;

Major rewrite.  Parameter lists changed from METHOD USER HOST to VEC.
----------------------------
revision 1.4
date: 2005-10-13 13:55:22 -0700;  author: albinus;  state: Exp;  lines: +11 -11;

Version 2.1.4 released.

* configure.ac: Bump version.

* texi/tramp.texi (Bug Reports): Make a cross reference to `Traces and
Profiles'.
(Traces and Profiles): Explain settings for backtraces.
----------------------------
revision 1.3
date: 2005-10-09 12:43:35 -0700;  author: albinus;  state: Exp;  lines: +23 -15;

* INSTALL: Provide working options for installing on MS Windows.

* lisp/tramp.el (tramp-completion-without-shell-p): Removed.  Not
needed anymore.
(tramp-md5-function): Fix typo in error message.
(tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-handle-file-name-all-completions): Rewritten in order to
profit from caching results.
(tramp-handle-file-name-completion): Removed unnecessary code.

* lisp/tramp-cache.el (with-cache-data): ,@body must be wrapped by
`progn'.  Add `edebug-form-spec' property.

* lisp/tramp-smb.el (tramp-smb-handle-file-name-all-completions):
Rewritten in order to profit from caching results.

* texi/tramp.texi (Dired): Node removed.  There are no limitations on
directory listings anymore.
(Default Method): Fix typo in variable name.
(Filename completion): Remove limitations on directory listings.

* texi/trampinst.texi (Installation parameters): Provide working
options for installing on MS Windows.
----------------------------
revision 1.2
date: 2005-09-11 14:17:32 -0700;  author: albinus;  state: Exp;  lines: +14 -26;

* tramp.el (top): Reduce compiler warnings.
(tramp-current-hop-method, tramp-current-hop-user)
(tramp-current-hop-host): New defvars.
(tramp-handle-file-attributes-with-stat): Return floating point
numbers.  Integers did run out of 2**28.
(tramp-do-copy-or-rename-file-out-of-band, tramp-pre-connection)
(tramp-maybe-open-connection): Initialize new defvars.
(tramp-handle-shell-command): Send "tramp_set_exit_status", it
isn't sent any longer during initialization.
(tramp-handle-write-region): Remote decoding command is sent in
one bunch.
(tramp-find-executable): Check first in $PATH with "which"
command.  Directory scan command is sent in one bunch.
(tramp-check-ls-command, tramp-find-ls-command): Debug messages
did go to a wrong debug buffer.
(tramp-action-password, tramp-process-actions): Call
`tramp-enter-password' and `tramp-clear-passwd' with changed
parameters.
(tramp-enter-password, tramp-read-passwd, tramp-clear-passwd):
Change parameter set.  Rewrite.
(tramp-post-connection): Remove unnecessary commands.
(tramp-send-command, tramp-send-string): Move setting of
`tramp-last-cmd-time'.
(tramp-wait-for-output): Correct wrong variable names.
(tramp-get-ls-command): Simplify code.

* tramp-cache.el (tramp-enable-cache): Removed.  Works stable now.
(with-cache-data): Change accordingly.

* tramp-smb.el (top): Require `tramp-cache'.  Reduce compiler
warnings.
(tramp-smb-handle-file-attributes)
(tramp-smb-handle-file-directory-p)
(tramp-smb-handle-file-exists-p)
(tramp-smb-handle-file-writable-p): Add `with-cache-data'.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-directory)
(tramp-smb-handle-delete-file, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region): Flush cached data.
(tramp-smb-open-connection) Call `tramp-enter-password' and
`tramp-clear-passwd' with changed parameters.

* tramp-vc.el (top): Reduce compiler warnings.
----------------------------
revision 1.1
date: 2005-08-28 11:56:39 -0700;  author: albinus;  state: Exp;

* Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/Makefile.in: Replace trampcache.el by tramp-cache.el.

* lisp/trampcache.el: Removed.  Replaced by tramp-cache.el.

* lisp/tramp-cache.el: New file.  Implementation inspired by work of
Daniel Pittman <daniel@rimspace.net>.

* lisp/tramp.el: Introduce filename caching.  Require `tramp-cache'.
(tramp-syntax): Correct doc string.
(tramp-handle-file-truename, tramp-handle-file-exists-p)
(tramp-handle-file-executable-p, tramp-handle-file-readable-p)
(tramp-handle-file-accessible-directory-p)
(tramp-handle-file-directory-p, tramp-handle-file-writable-p)
(tramp-handle-file-ownership-preserved-p): Add `with-cache-data'.
(tramp-handle-file-attributes): Add `with-cache-data'.  Check also
for existence of applicable stat(1) command, which is preferred
over the Perl script.
(tramp-handle-file-attributes-with-stat, tramp-get-remote-stat):
New defuns.
(tramp-handle-set-file-modes, tramp-handle-add-name-to-file)
(tramp-do-copy-or-rename-file, tramp-handle-delete-directory)
(tramp-handle-delete-file, tramp-handle-dired-compress-file)
(tramp-handle-dired-recursive-delete-directory)
(tramp-handle-write-region): Flush cashed data.
(tramp-pre-connection): Initialise cache.
(tramp-post-connection): Check for stat(1) command.
(tramp-maybe-open-connection): Optimize code.
(tramp-convert-file-attributes): Handle also attributes returned
by stat.

* test/tramp-time.el: New file.
=============================================================================

RCS file: /sources/tramp/tramp/texi/.cvsignore,v
Working file: texi/.cvsignore
head: 2.8
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.8
	branch-2-1-stable: 2.8.0.4
	branchpoint-2-1-stable: 2.8
	V-2-1-19: 2.8
	V-2-1-18: 2.8
	V-2-1-17: 2.8
	V-2-1-16: 2.8
	V-2-1-15: 2.8
	V-2-1-14: 2.8
	V-2-1-13: 2.8
	V-2-0-57: 2.8
	V-2-1-12: 2.8
	V-2-1-11: 2.8
	V-2-1-10: 2.8
	V-2-0-56: 2.8
	V-2-1-9: 2.8
	V-2-1-8: 2.8
	V-2-0-55: 2.8
	V-2-1-7: 2.8
	V-2-0-54: 2.8
	V-2-1-6: 2.8
	V-2-0-53: 2.8
	V-2-0-52: 2.8
	V-2-1-5: 2.8
	V-2-1-4: 2.8
	V-2-0-51: 2.8
	V-2-0-50: 2.8
	V-2-0-49: 2.8
	V-2-0-48: 2.8
	V-2-1-3: 2.8
	V-2-0-47: 2.8
	V-2-0-46: 2.8
	V-2-0-45: 2.8
	V-2-1-2: 2.8
	V-2-0-44: 2.8
	V-2-1-1: 2.8
	V-2-0-43: 2.8
	V-2-0-42: 2.8
	V-2-0-41: 2.8
	V-2-1-0: 2.8
	branch-2-0-stable: 2.8.0.2
	branchpoint-2-0-stable: 2.8
	V-2-0-40: 2.8
	V-2-0-39: 2.7
	V-2-0-38: 2.7
	V-2-0-37: 2.7
	V-2-0-36: 2.7
	V-2-0-35: 2.7
	V-2-0-34: 2.7
	V-2-0-33: 2.7
	V-2-0-32: 2.7
	V-2-0-30: 2.6
	V-2-0-29: 2.6
	V-2-0-28: 2.6
	V-2-0-27: 2.5
	V-2-0-26: 2.5
	V-2-0-25: 2.5
	V-2-0-24: 2.5
	V-2-0-23: 2.5
	V-2-0-22: 2.5
	V-2-0-21: 2.5
	V-2-0-20: 2.5
	V-2-0-19: 2.4
	V-2-0-18: 2.4
	V-2-0-17: 2.4
	V-2-0-16: 2.4
	V-2-0-15: 2.4
	V-2-0-14: 2.4
	V-2-0-13: 2.4
	completion: 2.4.0.2
	V-2-0-12: 2.4
	V-2-0-11: 2.4
	V-2-0-10: 2.4
	V-2-0-9: 2.4
	V-2-0-8: 2.4
	V-2-0-7: 2.4
	V-2-0-6: 2.4
	V-2-0-5: 2.4
	V-2-0-4: 2.4
	V-2-0-3: 2.2
	V-2-0-1: 2.1
	EMACS-21: 2.2
	V-2-0-0: 2.1
	tramp-xemacs-pkg: 2.1.0.2
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 16;	selected revisions: 16
description:
----------------------------
revision 2.8
date: 2004-03-14 08:46:25 -0800;  author: kai;  state: Exp;  lines: +2 -1;
Ignore some more files.
----------------------------
revision 2.7
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.6
date: 2002-12-23 06:03:44 -0800;  author: kai;  state: Exp;  lines: +2 -0;
Version 2.0.28 released.
----------------------------
revision 2.5
date: 2002-09-22 06:11:59 -0700;  author: kai;  state: Exp;  lines: +1 -0;
Version 2.0.20 released.
----------------------------
revision 2.4
date: 2002-07-29 02:06:46 -0700;  author: kai;  state: Exp;  lines: +1 -3;
lisp/tramp-version.el and texi/tramp-version.texi don't exist anymore.
----------------------------
revision 2.3
date: 2002-07-26 13:26:22 -0700;  author: kai;  state: Exp;  lines: +1 -0;
(tramp-handle-file-local-copy)
(tramp-handle-write-region): Call
`tramp-get-{de,en}coding-{function,command}' with four args.
(tramp-post-connection): Always send Perl implementation of
mimencode and mimedecode when Perl is available.
(tramp-get-encoding-command, tramp-get-decoding-command)
(tramp-get-encoding-function, tramp-get-decoding-function): New
implementation, uses auto-detected connection properties.
----------------------------
revision 2.2
date: 2002-07-14 07:05:28 -0700;  author: kai;  state: Exp;  lines: +4 -3;
*** empty log message ***
----------------------------
revision 2.1
date: 2001-03-14 13:47:19 -0800;  author: grossjoh;  state: Exp;  lines: +1 -0;
Ignore *.vrs.
----------------------------
revision 2.0
date: 2001-02-28 02:39:32 -0800;  author: grossjoh;  state: Exp;  lines: +0 -0;
branches:  2.0.2;
Going stable?
----------------------------
revision 1.6
date: 2000-07-06 06:29:39 -0700;  author: grossjoh;  state: Exp;  lines: +1 -0;
Ignore dir.lock.
----------------------------
revision 1.5
date: 2000-06-02 16:23:05 -0700;  author: grossjoh;  state: Exp;  lines: +1 -0;
Ignore some more files.
----------------------------
revision 1.4
date: 2000-05-28 19:47:55 -0700;  author: daniel;  state: Exp;  lines: +1 -0;
Also ignore the 'dir' file.
----------------------------
revision 1.3
date: 2000-05-25 08:19:18 -0700;  author: grossjoh;  state: Exp;  lines: +1 -0;
*** empty log message ***
----------------------------
revision 1.2
date: 2000-03-12 05:39:15 -0800;  author: grossjoh;  state: Exp;  lines: +11 -0;
Some files don't need to be in the CVS repository.
----------------------------
revision 1.1
date: 2000-03-12 05:36:03 -0800;  author: grossjoh;  state: Exp;
Some files don't need to be in the CVS repository.
----------------------------
revision 2.0.2.1
date: 2001-03-01 06:16:59 -0800;  author: grossjoh;  state: Exp;  lines: +1 -0;
*** empty log message ***
=============================================================================

RCS file: /sources/tramp/tramp/texi/ChangeLog,v
Working file: texi/ChangeLog
head: 2.306
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.304
	branch-2-1-stable: 2.299.0.2
	branchpoint-2-1-stable: 2.299
	V-2-1-19: 2.299
	V-2-1-18: 2.289
	V-2-1-17: 2.283
	V-2-1-16: 2.271
	V-2-1-15: 2.262
	V-2-1-14: 2.258
	V-2-1-13: 2.253
	V-2-0-57: 2.130.2.44
	V-2-1-12: 2.247
	V-2-1-11: 2.239
	V-2-1-10: 2.231
	V-2-0-56: 2.130.2.41
	V-2-1-9: 2.215
	V-2-1-8: 2.200
	V-2-0-55: 2.130.2.39
	V-2-1-7: 2.191
	V-2-0-54: 2.130.2.35
	V-2-1-6: 2.184
	V-2-0-53: 2.130.2.30
	V-2-0-52: 2.130.2.28
	V-2-1-5: 2.173
	V-2-1-4: 2.166
	V-2-0-51: 2.130.2.25
	V-2-0-50: 2.130.2.23
	V-2-0-49: 2.130.2.20
	V-2-0-48: 2.130.2.19
	V-2-1-3: 2.153
	V-2-0-47: 2.130.2.14
	V-2-0-46: 2.130.2.9
	V-2-0-45: 2.130.2.6
	V-2-1-2: 2.145
	V-2-0-44: 2.130.2.4
	V-2-1-1: 2.137
	V-2-0-43: 2.130.2.2
	V-2-0-42: 2.130.2.2
	V-2-0-41: 2.130.2.1
	V-2-1-0: 2.130
	branch-2-0-stable: 2.130.0.2
	branchpoint-2-0-stable: 2.130
	V-2-0-40: 2.130
	V-2-0-39: 2.120
	V-2-0-38: 2.109
	V-2-0-37: 2.107
	V-2-0-36: 2.97
	V-2-0-35: 2.93
	V-2-0-34: 2.88
	V-2-0-33: 2.87
	V-2-0-32: 2.85
	V-2-0-30: 2.78
	V-2-0-29: 2.74
	V-2-0-28: 2.70
	V-2-0-27: 2.69
	V-2-0-26: 2.68
	V-2-0-25: 2.59
	V-2-0-24: 2.57
	V-2-0-23: 2.54
	V-2-0-22: 2.51
	V-2-0-21: 2.49
	V-2-0-20: 2.49
	V-2-0-19: 2.48
	V-2-0-18: 2.47
	V-2-0-17: 2.47
	V-2-0-16: 2.46
	V-2-0-15: 2.44
	V-2-0-14: 2.42
	V-2-0-13: 2.41
	completion: 2.40.0.2
	V-2-0-12: 2.40
	V-2-0-11: 2.39
	V-2-0-10: 2.37
	V-2-0-9: 2.37
	V-2-0-8: 2.37
	V-2-0-7: 2.37
	V-2-0-6: 2.36
	V-2-0-5: 2.36
	V-2-0-4: 2.36
	V-2-0-3: 2.33
	V-2-0-1: 2.24
	EMACS-21: 2.33
	V-2-0-0: 2.23
	tramp-xemacs-pkg: 2.10.0.2
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 365;	selected revisions: 365
description:
----------------------------
revision 2.306
date: 2011-01-26 01:43:34 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.305
date: 2010-12-03 08:34:24 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: d1xVoIqIAb1d5RYu;
* tramp.texi (Inline methods): Add "ksu" method.
(Remote processes): Add example with remote Â´default-directory'.
----------------------------
revision 2.304
date: 2010-11-20 03:09:57 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: OEjCifFu53ZGH9Xu;
*** empty log message ***
----------------------------
revision 2.303
date: 2010-11-04 06:25:21 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: WE0rBddJ2aKbY6Vu;
* tramp.texi (Remote shell setup): New item "Interactive shell
prompt".  Reported by Christian Millour <cm@abtela.com>.
(Remote shell setup, Remote processes): Use @code{} for
environment variables.
----------------------------
revision 2.302
date: 2010-10-03 08:01:53 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: UFuEO1K0rWh2x0Ru;
* tramp.texi (Frequently Asked Questions): Mention
remote-file-name-inhibit-cache.
----------------------------
revision 2.301
date: 2010-09-13 08:30:48 -0700;  author: albinus;  state: Exp;  lines: +8 -0;  commitid: 31xKlcFVn8iQkrOu;
* tramp.texi (Inline methods): Remove "ssh1_old", "ssh2_old" and
"fish" methods.
(External methods): Remove "scp1_old" and "scp2_old" methods.

* tramp_ja.texi: Remove file.
----------------------------
revision 2.300
date: 2010-09-02 02:37:55 -0700;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: QmwMPkdzQ02BJZMu;
* Makefile.in: Remove japanese manual creation.

* tramp.texi:
* trampinst.texi: Remove Japanese manual.

* trampver.texi.in: Remove japanesemanual.
----------------------------
revision 2.299
date: 2010-08-23 11:23:07 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: tiSTp0DWhbgDXKLu;
Version 2.1.19 released.

* configure.ac: Bump version.
----------------------------
revision 2.298
date: 2010-08-05 06:40:10 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: 0Z3Xl9X5fjWCYpJu;
*** empty log message ***
----------------------------
revision 2.297
date: 2010-08-05 06:39:04 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: I0ON6iys2RifYpJu;
* tramp.texi (External packages): Fie attributes cache flushing
for asynchronous processes.
----------------------------
revision 2.296
date: 2010-07-28 03:23:43 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: ElO9iUZNqZNa9nIu;
* tramp.texi (Traces and Profiles): Describe verbose level 9.
----------------------------
revision 2.295
date: 2010-07-17 02:59:15 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: Xp5ABYdeJanFmXGu;
* tramp.texi: Start direntry descriptions in column 32, per
Texinfo convention.
----------------------------
revision 2.294
date: 2010-07-17 02:23:09 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: iFTOmFNqHRGhaXGu;
* tramp.texi (Inline methods): Remove remark about doubled "-t"
argument.
(Frequently Asked Questions): Recommend "sshx" and "scpx" for
echoing shells.
----------------------------
revision 2.293
date: 2010-07-10 02:44:43 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: zcnsfhVGPcSCv3Gu;
* tramp.texi (Inline methods): Remove "kludgy" phrase.
(Filename Syntax): Describe port numbers.
----------------------------
revision 2.292
date: 2010-05-01 03:04:55 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: Y1ROfa5QXBP3S3xu;
* tramp.texi (Inline methods, Default Method): Mention
`tramp-inline-compress-start-size'.
----------------------------
revision 2.291
date: 2010-03-19 07:09:44 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: Xz9j3TIE2ShKByru;
* tramp.texi (Auto-save and Backup): Remove reference to Emacs 21.
(Frequently Asked Questions): Adapt supported (X)Emacs versions.
Adapt supported MS Windows versions.  Remove obsolete URL.
----------------------------
revision 2.290
date: 2010-03-15 01:35:46 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: mQCxDJ4WW5W8T0ru;
* tramp.texi (Frequently Asked Questions): Use the $() syntax.
texi2dvi reports errors with the backquotes.
----------------------------
revision 2.289
date: 2010-03-14 03:30:10 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: Fhwj0p760AveyTqu;
Version 2.1.18 released.

* configure.ac: Bump version.

* tramp.el (tramp-do-copy-or-rename-file-out-of-band): Make call
of `delete-directory' backwards compatible.
----------------------------
revision 2.288
date: 2010-01-17 04:11:38 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: G430qBYkaoFNUHju;
* tramp.texi (Frequently Asked Questions): Add GNU Emacs 23 and
SXEmacs 22 to the supported systems.  New item for hung ssh
sessions.
----------------------------
revision 2.287
date: 2010-01-17 01:54:21 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: e3rQKsxANmtH9Hju;
* tramp.texi (Remote processes): Fix typos.
----------------------------
revision 2.286
date: 2009-12-03 03:21:26 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: BefsJlb3uoM95Vdu;

* tramp.texi (Remote processes): Add missing <RET> in the example.
----------------------------
revision 2.285
date: 2009-11-29 12:37:30 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: 9G3fdmY8Oh91isdu;
*** empty log message ***
----------------------------
revision 2.284
date: 2009-11-08 02:29:22 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: g3G7CpkC5CqfBHau;
*** empty log message ***
----------------------------
revision 2.283
date: 2009-11-07 14:32:07 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: qUYqSsT5BgJbDDau;
*** empty log message ***
----------------------------
revision 2.282
date: 2009-10-23 08:08:51 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: 99166YLzhav1FF8u;
*** empty log message ***
----------------------------
revision 2.281
date: 2009-10-05 04:39:53 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: g0tgmmGAaG6d5l6u;
*** empty log message ***
----------------------------
revision 2.280
date: 2009-09-24 02:01:17 -0700;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: DoBh6lYhbaVIyU4u;
*** empty log message ***
----------------------------
revision 2.279
date: 2009-09-03 06:19:49 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: seEhz43j5jxgFe2u;
*** empty log message ***
----------------------------
revision 2.278
date: 2009-08-28 07:31:03 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: 0HkofIJqtcgFft1u;
*** empty log message ***
----------------------------
revision 2.277
date: 2009-08-19 01:22:42 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: wGoHCbozxgBevh0u;
*** empty log message ***
----------------------------
revision 2.276
date: 2009-08-18 02:09:12 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: HmIL9KtkfJMaN90u;
*** empty log message ***
----------------------------
revision 2.275
date: 2009-08-07 12:52:20 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: lFjs8aOqx9EIHNYt;
*** empty log message ***
----------------------------
revision 2.274
date: 2009-07-01 08:08:13 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: eMqpCyt93lVZj1Ut;
*** empty log message ***
----------------------------
revision 2.273
date: 2009-06-30 14:20:22 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: YIMrWlqihgiEpVTt;
*** empty log message ***
----------------------------
revision 2.272
date: 2009-06-29 07:13:45 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: QE5WdSuVBnqi5LTt;
*** empty log message ***
----------------------------
revision 2.271
date: 2009-06-22 12:24:09 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: MPgHXy8O08AJ1TSt;
*** empty log message ***
----------------------------
revision 2.270
date: 2009-06-15 11:45:36 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: nBVsIfPeHcPr2ZRt;
*** empty log message ***
----------------------------
revision 2.269
date: 2009-04-21 13:04:26 -0700;  author: albinus;  state: Exp;  lines: +7 -2;  commitid: SUkpBez5ejX6fVKt;
*** empty log message ***
----------------------------
revision 2.268
date: 2009-04-19 13:46:34 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: xBd2DF6OALgtxFKt;
*** empty log message ***
----------------------------
revision 2.267
date: 2009-04-12 12:30:54 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: 4SK0KXUJtNHxlLJt;
*** empty log message ***
----------------------------
revision 2.266
date: 2009-03-29 09:54:39 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: WpTlKGnNtXrEVWHt;
*** empty log message ***
----------------------------
revision 2.265
date: 2009-03-17 11:30:49 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: UzhbkKTr49XJQpGt;
*** empty log message ***
----------------------------
revision 2.264
date: 2009-02-22 09:32:30 -0800;  author: albinus;  state: Exp;  lines: +9 -0;  commitid: 6EkwUEds3wPzgsDt;
*** empty log message ***
----------------------------
revision 2.263
date: 2009-02-16 12:08:22 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: wwcHVQphhH20kHCt;
*** empty log message ***
----------------------------
revision 2.262
date: 2009-02-01 01:46:09 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: 93YwTeWZ4PQqmIAt;
*** empty log message ***
----------------------------
revision 2.261
date: 2009-01-21 10:49:09 -0800;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: P0GCZdCkVipDIlzt;
*** empty log message ***
----------------------------
revision 2.260
date: 2009-01-03 06:42:19 -0800;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: SXxJHpNlzkTOV0xt;
*** empty log message ***
----------------------------
revision 2.259
date: 2008-11-25 23:18:33 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: K1y1OjVnAmQjH5st;
*** empty log message ***
----------------------------
revision 2.258
date: 2008-07-27 09:04:49 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: h1dJvvNWV0BZwsct;
*** empty log message ***
----------------------------
revision 2.257
date: 2008-06-21 04:46:52 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: 3pUAN0c2kZlagO7t;
*** empty log message ***
----------------------------
revision 2.256
date: 2008-06-15 01:52:09 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: mDdVmCdfKXugu17t;
*** empty log message ***
----------------------------
revision 2.255
date: 2008-04-28 12:38:38 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: hvnOUNcUtpYHBU0t;
*** empty log message ***
----------------------------
revision 2.254
date: 2008-04-06 21:37:18 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: nqwxu3p1vUwli8Ys;
*** empty log message ***
----------------------------
revision 2.253
date: 2008-03-29 12:56:48 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: KAwozSJosajJF3Xs;
*** empty log message ***
----------------------------
revision 2.252
date: 2008-03-26 13:08:55 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: gn2DqEKwetLRPFWs;
*** empty log message ***
----------------------------
revision 2.251
date: 2008-03-21 10:50:08 -0700;  author: albinus;  state: Exp;  lines: +82 -78;  commitid: PqmTs2QUUpPde1Ws;
Fix up encoding.
----------------------------
revision 2.250
date: 2008-02-03 03:09:05 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: 3ujqvV6TTF5jwWPs;
*** empty log message ***
----------------------------
revision 2.249
date: 2008-01-27 08:11:59 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: g9MIo6EKeBZ9q4Ps;
*** empty log message ***
----------------------------
revision 2.248
date: 2008-01-12 03:04:24 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.247
date: 2007-12-23 04:02:45 -0800;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: dXm8BQWGRHrW9yKs;

Version 2.1.12 released.

* configure.ac: Bump version.

* lisp/tramp.el: New todo item.

* lisp/tramp-smb.el (tramp-smb-handle-insert-directory): Handle "-F"
switch.  Reported by Mark T. Kennedy <mkennedy@diamondbackcap.com>.
----------------------------
revision 2.246
date: 2007-11-18 02:11:38 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: RBxaXmIdsa2tF2Gs;

* lisp/tramp.el (tramp-completion-reread-directory-timeout): New
defcustom.
(tramp-handle-file-name-all-completions): Flush directory contents
from cache regularly.
(tramp-set-auto-save-file-modes): Check also for
`buffer-modified-p'.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Temp file is already
created when copying.

* texi/tramp.texi (Filename completion): Simplify explanation of
double-slash behaviour.  Explain directory contents flushing.
----------------------------
revision 2.245
date: 2007-11-12 11:59:07 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: S56poiUr97a57kFs;

* lisp/tramp.el (tramp-open-connection-setup-interactive-shell): Check
whether the output of "uname -sr" has been changed.

* texi/tramp.texi (Connection caching): Tramp flushes connection
properties when remote operating system has been changed.
----------------------------
revision 2.244
date: 2007-11-07 12:34:53 -0800;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: 6QaEdkjJBQXZsGEs;

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Don't expand
the remote connection identification.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Set also $PS2 and $PS3 when setting $PS1.  Check for shell echoing
before calling stty.

* lisp/tramp-cache.el (tramp-cache-print)
(tramp-dump-connection-properties): Fix docstring.
(tramp-list-connections): Renamed from
`tramp-cache-list-connections'.

* lisp/tramp-cmds.el (tramp-cleanup-connection): Apply it.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Don't expand the
remote connection identification when setting connection property.

* lisp/tramp-smb.el (tramp-smb-handle-substitute-in-file-name): "//"
substitutes only in the local filename part.

* texi/tramp.texi (Overview): Mention also the PuTTY integration under
Win32.  Remove paragraphs about Tramp's experimental status.
(Frequently Asked Questions): Add code example for highlighting
the mode line.
----------------------------
revision 2.243
date: 2007-10-29 13:14:08 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: gXDioO9TQxwtEwDs;

* texi/tramp.texi (Connection caching): Host names must be different
when tunneling.
----------------------------
revision 2.242
date: 2007-10-23 14:50:56 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: WQGp5ST40E6jnLCs;

* lisp/tramp.el (tramp-set-file-uid-gid): Protect `call-process' when
we are local.

* texi/tramp.texi (Traces and Profiles): Simplify loop over
`trace-function-background'.
----------------------------
revision 2.241
date: 2007-10-18 11:46:35 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: BHD6VmLqheQ8w6Cs;

* configure.ac: Bump version (to 2.1.12-pre).  Update merge
version to 2.1.11.

* texi/tramp.texi (Cleanup remote connections): New section.
(Password caching): Remove `tramp-clear-passwd'.  It's not a
command anymore.
(Bug Reports): Add `tramp-bug' to function index.
----------------------------
revision 2.240
date: 2007-10-15 12:22:41 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: qRT37mPU3aioOIBs;

* lisp/tramp.el (tramp-handle-file-name-all-completions): Expand
DIRECTORY.
(tramp-handle-dired-recursive-delete-directory): Call "rm -rf".

* texi/tramp.texi (Function Index, Variable Index): New nodes.
(Remote shell setup): Describe `tramp-password-prompt-regexp'.
----------------------------
revision 2.239
date: 2007-10-09 21:34:17 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: bfWBAWxgBaaT30Bs;

Version 2.1.11 released.
----------------------------
revision 2.238
date: 2007-10-06 04:52:25 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: rLyecNwMxsQHBwAs;

* lisp/tramp.el (top): Move loading of tramp-util.el and tramp-vc.el to
tramp-compat.el.
(tramp-make-tramp-temp-file): Complete rewrite.  Create remote
temporary file if possible, in order to avoid a security hole.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): Call `tramp-make-tramp-temp-file'
with DONT-CREATE, because the connection is not setup yet.
(tramp-handle-process-file): Rewrite temporary file handling.
(tramp-completion-mode): New defvar.
(tramp-completion-mode-p): Use it.

* lisp/tramp-compat.el (top):  Load tramp-util.el and tramp-vc.el.

* lisp/tramp-fish.el (tramp-fish-handle-process-file): Rewrite
temporary file handling.

* texi/tramp.texi (External packages): New section.
----------------------------
revision 2.237
date: 2007-09-28 08:52:03 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 2.236
date: 2007-09-13 21:14:02 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: Q6ImRhqozbKIMExs;

* tramp.texi (Filename Syntax): Provide links to "Inline methods"
and "External transfer methods".
----------------------------
revision 2.235
date: 2007-08-21 22:38:44 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: VUup64FY1TX9ZHus;

* lisp/tramp.el (tramp-get-remote-path): New defun.  Replace occurences
of `tramp-default-remote-path' by this function.
(tramp-set-remote-path): Move most of the code to
`tramp-get-remote-path'.
(tramp-get-ls-command, tramp-get-remote-id): Don't check for not
existing directories, this is done already in
`tramp-get-remote-path'.

* texi/tramp.texi (Remote Programs): Persistency file must be cleared
when changing `tramp-remote-path'.
----------------------------
revision 2.234
date: 2007-08-09 22:44:16 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: li0FflOtiODtpats;

* texi/tramp.texi (Filename Syntax): Don't use @var{} constructs inside
the @trampfn macro.
----------------------------
revision 2.233
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.232
date: 2007-07-24 14:37:01 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: pD4iKfigg72fe4rs;

* texi/tramp.texi (Frequently Asked Questions): Point to mode line
extension in Emacs 23.1.
----------------------------
revision 2.231
date: 2007-07-22 09:29:40 -0700;  author: albinus;  state: Exp;  lines: +2 -0;  commitid: JpiEgUOKtSqCAMqs;

Version 2.1.10 released.
----------------------------
revision 2.230
date: 2007-07-22 04:42:10 -0700;  author: albinus;  state: Exp;  lines: +7 -0;  commitid: Z2nU7CnfArl80Lqs;

* texi/tramp.texi (trampfn): Expand macro implementation in order to
handle empty arguments.
(trampfnmhl, trampfnuhl, trampfnhl): Remove macros.  Replace all
occurencies by trampfn.
----------------------------
revision 2.229
date: 2007-07-18 14:27:00 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: DIfDUUi85nCImiqs;

* texi/tramp.texi (Frequently Asked Questions): Extend example code for
host identification in the modeline. Add bbdb to approaches
shortening Tramp file names to be typed.
----------------------------
revision 2.228
date: 2007-07-16 14:33:02 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: hlv4JiwKkWs8s2qs;

* lisp/tramp.el (tramp-handle-set-file-times): New defun.  Replaces
`tramp-touch'.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add entry for `set-file-times'.
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-out-of-band): Use `set-file-times'.
(tramp-handle-unhandled-file-name-directory): Rewrite.
(tramp-convert-file-attributes): Add error handling when inode is
extraordinary big.
(tramp-get-inode): Change parameter from FILE to VEC.

* lisp/tramp-fish.el (tramp-fish-file-name-handler-alist): Add entry
for `set-file-times'.  Rename `start-process' into
`start-file-process'.  Remove `call-process' entry.
(tramp-fish-handle-set-file-times): New defun.
(tramp-fish-handle-executable-find): Use `process-file'.
(tramp-fish-handle-process-file): New defun.  Replaces
`tramp-fish-handle-call-process'.
(tramp-fish-do-copy-or-rename-file-directly): Use
`set-file-times'.
(tramp-fish-get-file-entries): Change `tramp-get-inode' parameter.

* lisp/tramp-smb.el (tramp-smb-handle-file-attributes): Change
`tramp-get-inode' parameter.

* lisp/tramp-util.el (all): Change all checks to (fboundp
'start-file-process).
(set-file-times): Add a defalias if function does not exist.

* texi/tramp.texi (Frequently Asked Questions): Simplify recentf
example.
----------------------------
revision 2.227
date: 2007-07-14 02:35:31 -0700;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: Bh9so4kaMw7xyIps;

* tramp.texi: Move @setfilename ../info/tramp up, outside the
header section.  Reported by <poti@potis.org>.
(Remote processes): Arguments of the program to be debugged are
taken literally.  Add an anchor to the subsection
"Running a debugger on a remote host".
----------------------------
revision 2.226
date: 2007-07-12 14:10:21 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: tpJ21GvoHEVXswps;

* texi/tramp.texi (Remote processes): Don't call it "experimental" any
longer.  Add subsection about running a debugger on a remote host.
----------------------------
revision 2.225
date: 2007-07-03 06:37:24 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: 9XDSidtyh1zxfkos;

* texi/Makefile.in (.../dir): Fix error in copying dir_sample.
----------------------------
revision 2.224
date: 2007-07-01 11:31:35 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.223
date: 2007-06-20 13:26:40 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: 6Fqxls1tJZzgVGms;

* lisp/tramp.el:
* lisp/tramp-cache.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el: Use `expand-file-name' instead of `concat' where
appropriate.

* lisp/tramp.el (tramp-action-yesno, tramp-action-yn): Protect
`pop-to-buffer' by `save-match-data'.

* texi/tramp.texi (Filename completion): Rework examples for local
filename completion.
----------------------------
revision 2.222
date: 2007-06-17 04:12:32 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: IQTI2NEf6N68Xfms;

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Unify "Tramp" in strings.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): "//" and "/~"
substitute only in the local filename part.  Suggested by Peter
Gordon <peter@pg-consultants.com>.
(tramp-advice-minibuffer-electric-separator)
(tramp-advice-minibuffer-electric-tilde): New defadvices.
(tramp-append-tramp-buffers): Replace "sensible" by "sensitive" in
the hint.

* texi/tramp.texi (Filename completion): "//" substitutes in local
filename only.
----------------------------
revision 2.221
date: 2007-06-09 03:43:13 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: JFT40BDNteEy3els;

* texi/tramp.texi (Remote shell setup): Add an example how to customize
`tramp-actions-before-shell'.
----------------------------
revision 2.220
date: 2007-06-03 11:16:41 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: TKWJux4s1Xx2Luks;

* texi/tramp.texi (Traces and Profiles): Require also 'tramp, because
traces are taken from a new started Emacs usually, which might not
have loaded Tramp yet.
----------------------------
revision 2.219
date: 2007-05-28 06:20:38 -0700;  author: albinus;  state: Exp;  lines: +10 -0;  commitid: Ma8UwuYWkhiejHjs;

* Makefile.in (XEMACS_FILES) Add texi/doclicense.texi.

* texi/doclicense.texi: New file.

* texi/Makefile.in (TEXI_FILES): Add doclicense.texi.
----------------------------
revision 2.218
date: 2007-04-23 14:13:15 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el: New todo items.

* texi/tramp.texi (Default user): Declare `tramp-default-user' as
obsolete.  Explain how to use `tramp-default-user-alist' instead of.
----------------------------
revision 2.217
date: 2007-04-22 12:37:23 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-methods): "plinkx" loads a session.  No default
port.
(tramp-default-user-alist): No default user for "plinkx".
(tramp-completion-function-alist-putty): New defconst.
(tramp-completion-function-alist): Add "plinkx" completion.
(tramp-set-completion-function): Handle also registry keys.
(tramp-parse-putty, tramp-parse-putty-group): New defuns.
(tramp-action-login): Trace login prompt.

* texi/tramp.texi (Inline methods):  Add `plinkx' method.
----------------------------
revision 2.216
date: 2007-04-15 14:03:41 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* configure.ac: Bump version (to 2.1.10-pre).

* INSTALL: Commands cannot contain whitespaces in their path.

* lisp/tramp.el (tramp-default-user): Fix typo in docstring.  Value can
also be nil.

* texi/trampinst.texi (Installation parameters): Commands cannot
contain whitespaces in their path.
----------------------------
revision 2.215
date: 2007-04-08 03:13:35 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.1.9 released.
----------------------------
revision 2.214
date: 2007-04-03 14:01:21 -0700;  author: albinus;  state: Exp;  lines: +5 -1;

* lisp/tramp.el (tramp-message): Don't print "Error" in level 1, this
is part of the message already.
(tramp-error-with-buffer, tramp-action-yesno, tramp-action-yn):
Let `enable-recursive-minibuffers' be t, in case we need
`pop-to-buffer' during editing of the minibuffer.
(tramp-barf-if-no-shell-prompt): Apply `tramp-error-with-buffer'.

* texi/trampver.texi.in: Set default value of `emacsgw'.
----------------------------
revision 2.213
date: 2007-04-02 11:44:23 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* texi/tramp.texi (Frequently Asked Questions): Extend recent files
example to the XEmacs case.
----------------------------
revision 2.212
date: 2007-03-31 13:52:16 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (top): Don't require 'tramp-cache, it results in an
endless loop.  Autoload needed functions instead of.  Declare
needed gateway symbols, when tramp-gw cannot be loaded.
(with-parsed-tramp-file-name): Simplify `edebug-form-spec'.
(with-file-property, with-connection-property): New defmacros,
moved from tramp-cache.  This was necessary, because macros cannot
be autoloaded.
(tramp-register-file-name-handler)
(tramp-register-completion-file-name-handler): New defsubst,
derived from `tramp-register-file-name-handlers'.  The split is
necessary because Tramp's file name handlers must be registered at
different startup places.

* lisp/tramp-cache.el (with-file-property, with-connection-property):
Move them to tramp.el.

* texi/tramp.texi (Frequently Asked Questions): Add recentf to
approaches shortening Tramp file names to be typed.
(Traces and Profiles): Describe call traces; text moved from Bug
Reports.
----------------------------
revision 2.211
date: 2007-03-25 11:39:27 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* aclocal.m4 (AC_EMACS_INFO): Add gateway support.
(AC_EMACS_CHECK_LIB): Remove.

* configure.ac: Add gateway support.

* lisp/Makefile.in: Add gateway support.

* lisp/tramp.el (top): Require tramp-gw conditionally only.
(tramp-methods): Add port spec to "plink", "plink1" and "pscp"
methods.

* texi/Makefile.in: Add gateway support.

* texi/tramp.texi (all): Make gateway text conditional.
----------------------------
revision 2.210
date: 2007-03-10 08:37:37 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* texi/tramp.texi (Auto-save and Backup): Correct typo.
----------------------------
revision 2.209
date: 2007-03-08 13:21:45 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-methods): Extend doc string by description of
`tramp-default-port' and `tramp-gw-args'.
(tramp-enter-password): Remove `inhibit-trace'.  It is handled by
description in the manual now.
(tramp-maybe-open-connection): Fix small error in gateway handling.

* texi/tramp.texi (Bug Reports): Precise example for call traces.
Describe how to avoid passwords to be sent.
----------------------------
revision 2.208
date: 2007-03-07 13:24:30 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-methods): Add port spec to "telnet" method.
(tramp-do-copy-or-rename-file-out-of-band): Complete gateway
implementation.
(tramp-handle-insert-directory): Check (featurep 'ls-lisp).
(tramp-make-tramp-temp-file): Use `emacs-pid' if there is no
running process yet.
(tramp-compute-multi-hops): New defun.  Code extracted from
`tramp-maybe-open-connection'.
(tramp-maybe-open-connection): Code adapted accordingly.

* lisp/tramp-gw.el (tramp-gw-gw-proc-sentinel): Companion process might
not exist.
(tramp-gw-open-network-stream, tramp-gw-basic-authentication):
Clean password cache in error case only.

* texi/tramp.texi (Remote processes): Improve eshell example.
----------------------------
revision 2.207
date: 2007-03-05 13:57:51 -0800;  author: albinus;  state: Exp;  lines: +9 -0;

* lisp/tramp.el (tramp-methods): Add gateway parameter to "scp",
"scp1", "scp2", "scpc", "scpx", "sshx".
(tramp-do-copy-or-rename-file-out-of-band): Start implementation
for gateways.  It is not finished yet.
(tramp-make-copy-program-file-name): Change parameter to VEC.
(tramp-make-temp-file): New parameter FILENAME.  Append its
extension to the resulting temporary file name.
(tramp-handle-file-local-copy, tramp-handle-write-region): Apply
it.

* lisp/tramp-smb.el (tramp-smb-handle-file-local-copy)
(tramp-smb-handle-write-region): Apply it.

* lisp/tramp-fish.el (tramp-fish-handle-file-local-copy): Apply it.

* texi/tramp.texi (trampfn, trampfnmhl, trampfnuhl, trampfnhl): New
macros.  Apply them wherever possible, improving readability.
(Multi-hops): Add some words in the footnote regarding ethical
issues of passing firewalls.
(Remote processes): New subsection discussing integration into
eshell.
----------------------------
revision 2.206
date: 2007-02-27 14:09:44 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (tramp-error-with-buffer): New defsubst.  Apply it
wherever there is `pop-to-buffer', followed by `tramp-error'.
(tramp-maybe-open-connection): Rename `tramp-gw-http-method' to
`tramp-gw-tunnel-method'.

* lisp/tramp-gw.el (tramp-gw-tunnel-method)
(tramp-gw-default-tunnel-port): Renamed from
`tramp-gw-http-method' and `tramp-gw-default-http-port',
respectively.  Apply it everywhere.
(tramp-gw-open-connection): Improve doc-string.  Use only type 5
for `socks-server', we have our own 'http implementation.
(tramp-gw-open-network-stream): Improve error handling.
(tramp-gw-basic-authentication): Bind `tramp-current-*' locally
because of password cache key.

* texi/tramp.texi (History): Add gateway methods as well as relation to
GNU Emacs, XEmacs and GNU/Linux Debian.
(Gateway methods): Minor wording improvements.
(Multi-hops): Explain HTTP tunnel example in more detail.
----------------------------
revision 2.205
date: 2007-02-26 13:56:03 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-methods): Add "StrictHostKeyChecking=no" to
`tramp-gw-args' of ssh, ssh1 and ssh2 methods.
(tramp-maybe-open-connection): Implement changed interface of
`tramp-gw-open-connection'.
(tramp-send-eof): Removed.
(tramp-file-name-real-host, tramp-file-name-port): New defsubst.
(tramp-read-passwd): New parameter PROMPT.

* lisp/tramp-gw.el: Complete rewrite.  Use socks.el for SOCKS server;
implement HTTP tunnels on its own.

* texi/tramp.texi (Gateway methods): New section.
(Multi-hops): Describe useage of gateway methods.
----------------------------
revision 2.204
date: 2007-02-21 13:16:55 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* tramp.texi (Frequently Asked Questions): Improve ~/.zshrc
settings.  Reported by Ted Zlatanov <tzz@lifelogs.com>.
----------------------------
revision 2.203
date: 2007-01-31 14:35:38 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp-smb.el (tramp-smb-handle-insert-directory)
* lisp/tramp.el (tramp-handle-insert-directory): Fix wildcard case.

* texi/tramp.texi (Frequently Asked Questions): New item for
performance considerations.
----------------------------
revision 2.202
date: 2007-01-22 22:02:35 -0800;  author: albinus;  state: Exp;  lines: +2 -2;
*** empty log message ***
----------------------------
revision 2.201
date: 2007-01-22 22:01:35 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* tramp.texi (Frequently Asked Questions): New item for dired
listing options.
----------------------------
revision 2.200
date: 2007-01-14 12:24:38 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.1.8 released.
----------------------------
revision 2.199
date: 2007-01-13 11:59:33 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (top): Change declaration of `with-temp-message' if it
doesn't exist.
(tramp-buffer-name, tramp-debug-buffer-name)
(tramp-make-tramp-file-name, tramp-make-copy-program-file-name):
Check also for empty USER.

* lisp/tramp-smb.el (tramp-smb-actions-with-share):
(tramp-smb-actions-without-share): New defconst.
(tramp-smb-open-connection): Removed.  Code merged into
`tramp-smb-maybe-open-connection'.  Use new defconst.

* lisp/tramp.texi (Multi-hops): Change last example to `sudo'.
----------------------------
revision 2.198
date: 2006-12-27 14:12:29 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* Makefile.in: Add tramp-fish.el

* lisp/tramp-fish.el: New package.

* lisp/tramp.el (top): Require tramp-fish.
(tramp-inodes): New defvar.
(tramp-handle-expand-file-name): Cache "home-directory".
(tramp-get-inode): New defun.

* lisp/tramp-smb.el (tramp-smb-no-stat, tramp-smb-inodes)
(tramp-smb-get-inode): Removed.  Apply new names.

* lisp/tramp-util.el (tramp-advice-executable-find): Add check for
`tramp-fish-file-name-handler'.

* texi/tramp.texi (Inline methods): Add `fish' method.
----------------------------
revision 2.197
date: 2006-12-26 13:42:55 -0800;  author: albinus;  state: Exp;  lines: +7 -2;

* lisp/tramp.el (tramp-action-process-alive)
(tramp-wait-for-regexp): Pop connection buffer in case of error.
(tramp-exists-file-name-handler): Handle also `default-directory'.
(tramp-half-a-year, tramp-parse-time-months): New defconst.
Transferred from tramp-smb.el.
(tramp-time-less-p, tramp-time-subtract): New defuns.  Transferred
from tramp-smb.el.
(tramp-time-diff): Use them.

* lisp/tramp-smb.el (tramp-smb-half-a-year)
(tramp-smb-parse-time-months, tramp-smb-time-less-p)
(tramp-smb-time-subtract): Removed.  Apply new names.

* lisp/tramp-util.el (top): Don't check for file name handlers of
`start-process-shell-command' and `call-process-shell-command'.

* texi/tramp.texi (Connection types): Mention `scpc' method.
(Default Method): Offer `scpc' for editing large files.
----------------------------
revision 2.196
date: 2006-12-18 23:24:49 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-methods): Introduce new method `scpc'.  Remove
"ControlMaster" option from the other `scp*' methods.
(tramp-default-method): Check for ssh-agent before setting to
`scp'.
(top): Check for `font-lock-add-keywords' before calling; it
doesn't exist under XEmacs.

* texi/tramp.texi (External transfer methods): Describe new method
`scpc'.
----------------------------
revision 2.195
date: 2006-12-09 13:10:08 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* tramp.el (tramp-enter-password): Inhibit function call traces in
order to avoid passwords to be included there.

* tramp-smb.el (tramp-smb-errors): Add error messages.
(tramp-smb-handle-make-directory-internal): Local file names shall
carry "\\" instead of "/".  Reported by Tom Wurgler
<twurgl@goodyear.com>.

* tramp.texi (Bug Reports): Add code to retrieve function call
traces.
----------------------------
revision 2.194
date: 2006-11-07 03:49:33 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp.el (tramp-copy-size-limit): New defcustom.
(tramp-methods): Add "ControlPath" and "ControlMaster" to scp,
scp1 and scp2 methods.  Suggested by Andreas Schwab
<schwab@suse.de>.  Rearrange entries for better readability.
Change syntax of `tramp-copy-args' to that of `tramp-login-args'.
Describe "%t" in the doc string.
(tramp-default-method): scp is the default method.
(tramp-do-copy-or-rename-file, tramp-handle-file-local-copy)
(tramp-handle-write-region): Check for `tramp-copy-size-limit'.
(tramp-do-copy-or-rename-file-out-of-band): Simplify
implementation.
(tramp-maybe-open-connection): Compute format spec only once.

* texi/tramp.texi (Configuration): scp is the default method.
(External transfer methods): Explain meaning of
`tramp-copy-size-limit'.  Don't mention password problems anymore,
this is solved.
(Default Method): Use ssh as example for another method.
----------------------------
revision 2.193
date: 2006-10-18 22:04:14 -0700;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.192
date: 2006-10-18 22:03:29 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

* texi/tramp.texi (External transfer methods): Explain how to use the
WINS hostname for the smb method.
(Frequently Asked Questions): Remove questions marked with "???".
There have been no complaints for years, so the information must
be appropriate.
----------------------------
revision 2.191
date: 2006-09-03 05:23:58 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

Version 2.1.7 released.
----------------------------
revision 2.190
date: 2006-08-30 23:06:16 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-default-proxies-alist): Extend doc string for %h
and %u patterns.
(tramp-wrong-passwd-regexp): Fix strings.
(tramp-maybe-open-connection): Add handling of %h and %u
patterns.  Suggested by Kirk Strauser <kirk@daycos.com>.

* texi/tramp.texi (Multi-hops): Adding %h and %u patterns to
`tramp-default-proxies-alist'.
----------------------------
revision 2.189
date: 2006-08-28 21:35:25 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-get-remote-uid, tramp-get-remote-gid): Return -1
when ID-FORMAT is 'integer, and the command doesn't yield an
integer.

* texi/tramp.texi (Bug Reports): The Tramp mailing list is moderated
now.  Suggested by Adrian Phillips <a.phillips@met.no>.
----------------------------
revision 2.188
date: 2006-06-05 13:05:06 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* texi/tramp.texi: Fix various typos.
----------------------------
revision 2.187
date: 2006-06-04 08:36:16 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Expand
`datarootdir´.  Perform all expansions with "eval".

* configure.ac: Add "-o /dev/null" to texi2dvi call.

* lisp/tramp.el (tramp-process-actions): Pop connection buffer in case
of error.  Modify error message depending on `tramp-action'.

* lisp/tramp-cache.el (tramp-persistency-file-name): Default value is
"~/.emacs.d/tramp" or "~/.xemacs/tramp", respectively.  Suggested
by Romain Francoise <romain@orebokech.com>.
(tramp-dump-connection-properties): Suppress error when
`tramp-persistency-file-name´ cannot be written.

* texi/tramp.texi (Connection caching): Change default file name.
----------------------------
revision 2.186
date: 2006-06-01 14:40:29 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-process-one-action): Remove `with-timeout'
clause.
(tramp-process-actions): Add optional TIMEOUT parameter.  If set,
apply it.
(tramp-maybe-open-connection): Call `tramp-process-actions' with a
timeout of 60".

* texi/tramp.texi (Filename completion): Explain how to enable
`partial-completion-mode' temporarily.
----------------------------
revision 2.185
date: 2006-05-29 13:39:22 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* texi/tramp.texi (Frequently Asked Questions): Disable zsh zle.
----------------------------
revision 2.184
date: 2006-05-28 11:47:01 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.1.6 released.
----------------------------
revision 2.183
date: 2006-05-24 13:12:23 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-message): Write into debug buffer only if
`tramp-verbose-level' is greater than or equal to 4.
(tramp-get-completion-function): Add
`tramp-parse-connection-properties´.
(tramp-process-initial-commands, tramp-post-connection): Removed,
also their respective calls..
(tramp-open-connection-setup-interactive-shell) Add code from
`tramp-process-initial-commands' and `tramp-post-connection'.

* lisp/tramp-cache.el (tramp-parse-connection-properties): New defun.

* lisp/tramp-util.el (tramp-ediff-setup): New defun.

* texi/tramp.texi (Traces and Profiles): Tramp debug buffer is written
with verbosity level 4 onwards.
----------------------------
revision 2.182
date: 2006-05-21 09:15:06 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

Major rewrite.  Parameter lists changed from METHOD USER HOST to VEC.
----------------------------
revision 2.181
date: 2006-05-08 22:37:27 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (top): Eval expression for adding tramp-(ftp|efs) to
`tramp-unload-hook'.
(tramp-handle-file-name-all-completions)
(tramp-handle-insert-directory): Remove final "cd".
(tramp-register-file-name-handlers): Enable Tramp completion also
when ido is loaded.
(tramp-post-connection): Don't check for (en|de)coding.  It will
be done on-the-fly.
(tramp-find-inline-encoding): Remove tramp-get-* checks.
(tramp-get-remote-encoding, tramp-get-remote-decoding)
(tramp-get-local-encoding, tramp-get-local-decoding): Add
`tramp-find-inline-encoding'.

* lisp/tramp-cahe.el (top): Add unload code to
`tramp-cache-unload-hook'.  Remove also
`tramp-dump-connection-properties' from `kill-emacs-hook'.  Remove
"scripts" properties from connection history, they are not
persistent information.

* texi/tramp.texi (Filename completion): Improve wording.
----------------------------
revision 2.180
date: 2006-05-07 14:33:49 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp.el (top): cl and custom are always required.
(tramp-verbose): Change description of levels.
(tramp-encoding-reads-stdin, tramp-repair-jka-compr)
(tramp-discard-garbage, tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name)
(tramp-find-default-method, tramp-find-default-user)
(tramp-find-default-host): Remove them.
(tramp-methods): Change defcustom into defvar.
(tramp-actions-before-shell, tramp-actions-copy-out-of-band):
Change defcustom into defconst.
(tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-make-temp-file, tramp-make-tramp-temp-file): Move them up.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-handle-make-auto-save-file-name): For Emacs 21, set
`tramp-auto-save-directory' if unset in order to guarantee unique
auto-save file names.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): New defsubst.  Added with
autoload cookie.  Code from `tramp-repair-jka-compr' moved here.
Register `tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-unload-file-name-handlers): Renamed from
`tramp-unload-file-name-handler-alist'.
(tramp-completion-handle-file-name-all-completions): Delete
directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-process-actions, tramp-wait-for-regexp)
(tramp-maybe-open-connection, tramp-send-command)
(tramp-send-command-internal): Trace sent command with level 6.
(tramp-check-for-regexp): Trace echo with level 5.
(tramp-dissect-file-name): Expand method, user, host.
(tramp-find-method, tramp-find-user, tramp-find-host): Add code
for default values.  Remove all calls but the one in
`tramp-dissect-file-name'.
(tramp-bug, tramp-reporter-dump-variable)
(tramp-append-tramp-buffers): Dump also hash variables.

* lisp/tramp-cache.el: Trace cache commands with level 7.  Trace
connection commands with level 8.
(tramp-cache-print): Dump strings as such.
(tramp-persistency-file-name): New defcustom.
(tramp-connection-properties): New defvar.
(tramp-dump-connection-properties): New defun.
(tramp-get-connection-property, tramp-set-connection-property):
Rewritten.
(top): Dump connection history when leaving Emacs.  Read it during
initialization.

* lisp/tramp-efs.el (tramp-efs-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-ftp.el (tramp-ftp-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-smb.el: Trace sent commands with level 6.
(tramp-smb-file-name-p): Don't use tramp-find-* functions.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
(Bug Reports): Level 6 results already in file contents.
(Traces and Profiles): Describe new levels.
----------------------------
revision 2.179
date: 2006-04-16 03:02:56 -0700;  author: albinus;  state: Exp;  lines: +7 -1;

* lisp/tramp.el (tramp-completion-mode): ?\t has event-modifier
'control.  Reported by Matthias Förste
<slashdevslashnull@gmx.net>.

* texi/tramp.texi (History): Tell about commands on remote hosts.
(Filename completion): Remove exception of multi hop methods.
(Frequently Asked Questions): Give example for prompt checking.
----------------------------
revision 2.178
date: 2006-03-19 10:53:06 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-remote-path): Add `tramp-default-remote-path' as
first item.  Remove items which are usually returned by "getconf
PATH".  Extend custom parameters accordingly.
(tramp-set-remote-path): Apply "getconf PATH" in order to get
default directories.  Suggested by Kevin Rodgers <ihs_4664@yahoo.com>.
Remove patameters VAR and DIRLIST.
(tramp-post-connection): Set remote PATH variable as first action.
(tramp-handle-call-process): Add "</dev/null" when INFILE is nil.

* lisp/tramp-util.el (tramp-grep-setup): New defun.

* texi/tramp.texi (Remote Programs): Introduce `tramp-default-remote-path'.
----------------------------
revision 2.177
date: 2006-03-14 13:40:09 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

DESTDIR support
----------------------------
revision 2.176
date: 2006-01-27 14:29:02 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

Add code for unloading Tramp.

* lisp/tramp-vc.el (vc-user-login-name): Wrap defadvice with a test for
`process-file', in order to let it work for older Emacsen too.
----------------------------
revision 2.175
date: 2005-12-30 07:42:29 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* texi/tramp.texi (various): Apply "ftp" as method for the download
URL.
(Bug Reports): Refer to FAQ for common problems.
(Frequently Asked Questions): New item for common connection
problems.
----------------------------
revision 2.174
date: 2005-12-28 13:49:47 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* configure.ac: Bump version (to 2.1.6-pre).

* texi/tramp.texi (Frequently Asked Questions): Add bookmarks and
filecache to approaches shortening Tramp file names to be typed.
----------------------------
revision 2.173
date: 2005-12-11 07:24:20 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.1.5 released.

* configure.ac: Bump version.

* INSTALL: Point to Posix environments for installation under MS
Windows.

* lisp/tramp.el (tramp-remote-path): Beautify "/usr/xpg4/bin".  Clarify
docstring.
(tramp-handle-expand-file-name): Remove double slash.
(tramp-set-remote-path): It is sufficient to check for
`file-directory-p'.
(tramp-find-file-exists-command): Remove unnecessary message.
(tramp-check-ls-command, tramp-check-ls-commands)
(tramp-find-ls-command, tramp-find-id-command): Remove functions.
Code is moved to corresponding `tramp-get-*' functions.
(tramp-get-*): Work in connection buffer because local
`tramp-remote-path'. Insert code from above when necessary.
(tramp-bug): Add `tramp-default-host', `tramp-default-user',
`tramp-default-user-alist'.
(tramp-append-tramp-buffers): Add local variables for all Tramp
buffers.
----------------------------
revision 2.172
date: 2005-12-02 14:16:36 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

* INSTALL, configure.ac: We depend on GNU texinfo 4.6.

* lisp/tramp.el (tramp-verbose): Document level 7.
(tramp-send-command-and-check): Clean up tramp_exit_status from
buffer.
(tramp-handle-file-local-copy, tramp-send-command-and-read):
Remove cleaning of tramp_exit_status.
(tramp-handle-write-region): Make cksum check more robust.
(tramp-remote-path): Add "/usr/xpg4/bin/".  On Solaris, there are
the POSIX programs.
(tramp-find-executable): IGNORE-TILDE is optional now.  New
parameter IGNORE-PATH.  Adapt callees.
(tramp-set-remote-path): Return list of existing directories.
(tramp-post-connection): Make `tramp-remote-path' buffer local.
Set it to list of existing directories.
(tramp-find-id-command, tramp-get-remote-id ): New defun.
(tramp-get-remote-uid, tramp-get-remote-gid): Use them.

* texi/tramp.texi (Frequently Asked Questions): Example how to set
`file-precious-flag' buffer local.

* texi/test.texi: Expand check for Texinfo 4.6 feature.
----------------------------
revision 2.171
date: 2005-11-29 14:24:40 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* lisp/tramp.el (tramp-do-copy-or-rename-file-via-buffer)
(tramp-handle-file-local-copy, tramp-handle-write-region):
Generate always a new temp buffer. Kill it finally.
(tramp-handle-unhandled-file-name-directory): Take home directory
on remote host.
(tramp-handle-write-region): When `file-precious-flag' is set,
check also the checksums (in case of inline methods).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.

* texi/tramp.texi (Remote processes): Explain gud.el integration in
more detail.
(Frequently Asked Questions): Recommend `file-precious-flag' when
`tramp-chunksize' is set.
----------------------------
revision 2.170
date: 2005-11-20 14:16:40 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp.el (tramp-send-command-and-read): New defun.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-perl)
(tramp-handle-directory-files-and-attributes-with-stat)
(tramp-get-remote-stat, tramp-get-remote-uid)
(tramp-get-remote-gid): Apply it.
(tramp-handle-insert-directory): Remove unnecessary comments.
(tramp-point-at-eol): Removed. All callees replaced by
`tramp-line-end-position'.
(tramp-barf-unless-okay): Don't pop up Tramp buffer in case of
error.
(tramp-get-ls-command, tramp-get-test-command)
(tramp-get-test-nt-command, tramp-get-file-exists-command)
(tramp-get-remote-ln, tramp-get-remote-perl)
(tramp-get-remote-stat)
(tramp-get-remote-uid, tramp-get-remote-gid): Apply
`with-connection-property'.
(tramp-get-connection-property, tramp-set-connection-property):
Move to tramp-cache.el.

* lisp/tramp-cache.el:
(tramp-get-connection-property, tramp-set-connection-property):
Moved from tramp.el.  Tramp messages added.
(with-connection-property): New macro.

* lisp/tramp-smb.el (tramp-smb-read-file-entry): `tramp-point-at-eol'
replaced by `tramp-line-end-position'.

* lisp/tramp-vc.el (tramp-handle-vc-user-login-name): Removed.
(tramp-vc-user-login-name): Rewritten.

* texi/tramp.texi (Remote File Ownership): Replace `user-full-name' by
`user-login-name'.
(Traces and Profiles): Add trace level 7.
----------------------------
revision 2.169
date: 2005-11-09 15:01:23 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-remote-process-environment): New defcustom.
(tramp-file-name-handler-alist): Add `dired-call-process'.
(tramp-handle-dired-call-process ): New defun.
(tramp-debug-message): Extend regexp for backtrace.
(tramp-message): Apply level specific prefixes.
(tramp-error): New defsubst.  Replace all calls of `message',
`signal' and `error' with corresponding Tramp message functions.
(tramp-handle-file-truename): Apply `tramp-equal-remote'.
(tramp-handle-expand-file-name): Use "~root" for tilde expansion
in case of su(do)? methods.  The home directory of the local user
will be taken else.
(tramp-handle-start-process): Use narrowing for protecting buffer
contents.
(tramp-file-name-handler): Remove signal handling.  Not necessary,
because `tramp-error' handles it now.
(tramp-buffer-name, tramp-debug-buffer-name): Handle the case USER
is nil.
(tramp-outline-level): Change formula in order to handle level 0.
(tramp-set-remote-path): Add debug message.
(tramp-enter-password): Don't erase the buffer, not necessary.
(tramp-open-connection-setup-interactive-shell): Don't (un)set
explicitely "TERM", "HISTFILE", "HISTSIZE" "MAIL" "MAILCHECK"
"MAILPATH" "CDPATH" "LC_TIME".  Set
`tramp-remote-process-environment' instead of.
(tramp-barf-unless-okay): Remove SUBSHELL (always nil) and SIGNAL
(always 'file-error).  Change all callees.
(tramp-send-string): Apply `delete-region' instead of
`erase-buffer'.  Necessary because of narrowing.

* lisp/tramp-smb.el (all) Replace all calls of `message', `signal' and
`error' with corresponding Tramp message functions.

* lisp/tramp-util.el (tramp-advice-gud-perldb-massage-args): New
defadvice.

* texi/tramp.texi (Remote processes): Improve doc.
----------------------------
revision 2.168
date: 2005-11-06 12:40:18 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-file-name-handler-alist): Remove `shell-command.
(tramp-handle-start-process, tramp-handle-call-process): Apply
`save-excursion'.
(tramp-handle-shell-command): Removed.
(tramp-file-name-for-operation): Add `dired-call-process'. It IS a
file name handler primitive.
(tramp-wait-for-regexp): Take the message string from right
buffer.
(tramp-post-connection): Remove code for checking encoding
commands.  It is also in `tramp-find-inline-encoding'.
(tramp-find-inline-encoding): Check for connection properties.  By
this, the commands won't be executed again for new connection
buffers.
(tramp-maybe-open-connection): Apply `tramp-send-command' instead
of `tramp-send-string'.  No changed functionality, but better
traces.

* lisp/tramp-util.el (top): Don't require "compile".  Add handlers for
`compilation-mode-hook' and `gud-mode-hook'.
(tramp-advice-start-process, tramp-advice-call-process): Call the
handlers with `apply'.
(tramp-gud-file-name): New defun.
(tramp-compilation-parse-errors-filename-function): Removed.  It
wasn't such a good idea.

* texi/tramp.texi (Remote processes): New section.  Replaces
`Compilation'.
----------------------------
revision 2.167
date: 2005-10-18 12:43:26 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): `datadir',
`lispdir' and `infodir' should still contain environment
variables, which can be changed during make. `lispdir_default' and
`infodir_default' must be expanded for the Tramp manual.

* texi/tramp.texi (Traces and Profiles): Reference to `Outline Mode'
should be done for info pages only.
----------------------------
revision 2.166
date: 2005-10-13 13:55:22 -0700;  author: albinus;  state: Exp;  lines: +8 -0;

Version 2.1.4 released.

* configure.ac: Bump version.

* texi/tramp.texi (Bug Reports): Make a cross reference to `Traces and
Profiles'.
(Traces and Profiles): Explain settings for backtraces.
----------------------------
revision 2.165
date: 2005-10-12 13:49:29 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

* lisp/tramp.el (top): Try to simplify XEmacs byte-compiler
pacification.
(tramp-verbose): Finish doc string.  New default value is 3.
(all): Apply new verbosity levels.
(tramp-get-debug-buffer): Remove definition of outline faces.  The
default values are good enough.
(tramp-bug): Explain setting of `tramp-verbose'.

* lisp/tramp-cache.el (all): Apply new verbosity levels.

* lisp/tramp-smb.el (top): Try to simplify XEmacs byte-compiler
pacification.
(all): Apply new verbosity levels.

* lisp/tramp-vc.el (top): Try to simplify XEmacs byte-compiler
pacification.

* texi/tramp.texi (Bug Reports, Traces and Profiles): Explain setting
of `tramp-verbose'.

* texi/trampinst.texi (Installation parameters): Try it now with @w{}.
----------------------------
revision 2.164
date: 2005-10-10 14:07:48 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-handle-delete-directory)
(tramp-handle-dired-recursive-delete-directory): Apply
`tramp-cache-flush-directory'.
(tramp-handle-insert-directory): Apply `tramp-cache-flush-file'.

* lisp/tramp-cache.el: Autoload the needed functions from tramp.el.
(tramp-cache-flush-directory, tramp-cache-before-revert-function):
New defuns.
(top): Add `tramp-cache-before-revert-function' to
`before-revert-hook'.  Deactivate all Tramp messages for
performance reasons.

* lisp/tramp-smb.el (tramp-smb-handle-delete-directory): Apply
`tramp-cache-flush-directory'.
(tramp-smb-handle-insert-directory): Apply
`tramp-cache-flush-file'.
(tramp-smb-handle-directory-files): Local file must be handled as
directory, otherwise the listing is senseless.

* texi/trampinst.texi (Installation parameters): Don't use @tie{}, it
isn't defined in older texinfo versions.
----------------------------
revision 2.163
date: 2005-10-09 12:43:35 -0700;  author: albinus;  state: Exp;  lines: +10 -0;

* INSTALL: Provide working options for installing on MS Windows.

* lisp/tramp.el (tramp-completion-without-shell-p): Removed.  Not
needed anymore.
(tramp-md5-function): Fix typo in error message.
(tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-handle-file-name-all-completions): Rewritten in order to
profit from caching results.
(tramp-handle-file-name-completion): Removed unnecessary code.

* lisp/tramp-cache.el (with-cache-data): ,@body must be wrapped by
`progn'.  Add `edebug-form-spec' property.

* lisp/tramp-smb.el (tramp-smb-handle-file-name-all-completions):
Rewritten in order to profit from caching results.

* texi/tramp.texi (Dired): Node removed.  There are no limitations on
directory listings anymore.
(Default Method): Fix typo in variable name.
(Filename completion): Remove limitations on directory listings.

* texi/trampinst.texi (Installation parameters): Provide working
options for installing on MS Windows.
----------------------------
revision 2.162
date: 2005-09-18 14:06:28 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-login-prompt-regexp): Expand regexp in order to
cover prompts like "login as:".  Reported by Slawomir Nowaczyk
<slawomir.nowaczyk.847@student.lu.se>.
(tramp-debug-message): Remove FACE as parameter.  Not necessary
any longer, we use outline mode now.
(tramp-message, tramp-trace): Change callees.
(tramp-message-for-buffer): It is a defsubst now.
(tramp-get-debug-buffer): Initialize outline mode.
(tramp-outline-level): New defun.
(tramp-insert-with-face): Removed.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): tramp-current-* and
tramp-current-hop-* values should be already expanded.
(tramp-action-login, tramp-read-passwd): Use tramp-current-hop-*.

* texi/tramp.texi (Traces and Profiles): New node.
----------------------------
revision 2.161
date: 2005-09-18 05:02:51 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

Update all files to specify GFDL version 1.2.
----------------------------
revision 2.160
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +18 -0;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.159
date: 2005-06-26 12:45:08 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fourth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in: Adapt email addresses.
----------------------------
revision 2.158
date: 2005-02-20 08:11:49 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set always
permissions, because there might be an old auto-saved file
belonging to another original file.  This could be a security
threat.

* texi/trampver.texi.in: Replace "Emacs" by "GNU Emacs".

* texi/tramp.texi: Replace "Emacs" by "GNU Emacs".
(Default Method): Offer shortened syntax for "su" and "sudo"
methods.
----------------------------
revision 2.157
date: 2005-02-13 10:42:44 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* INSTALL, texi/tramp.texi, texi/trampinst.texi: Replace "Linux" by
"GNU/Linux".  Suggested by Richard M. Stallman <rms@gnu.org>

* aclocal.m4 (AC_PATH_LISPDIR): Document an alternative approach
configuring `lispdir'.  Not activated (yet).

* configure.ac: Documentation fix.
----------------------------
revision 2.156
date: 2005-02-12 03:19:00 -0800;  author: albinus;  state: Exp;  lines: +18 -14;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.155
date: 2005-02-05 15:02:42 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* INSTALL: Explain in more detail configure parameters
"with-xemacs", "--with-lispdir" and "--infodir".  Change bug
report address to [tramp-devel@gnu.org].

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rewrite
completely in order to apply better default values.

* configure.ac: Reorder substitution of installation directories
wrt changes in aclocal.m4.

* lisp/tramp.el (all): Change all addresses to .gnu.org.

* texi/Makefile.in (datadir): New variable.

* texi/trampinst.texi (Installation parameters): Explain in more detail
configure parameters "with-xemacs", "--with-lispdir" and
"--infodir".
----------------------------
revision 2.154
date: 2005-02-02 14:38:25 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* INSTALL: Linux configure option prefix should be
"--prefix=/usr".  Reported by Bradley Dilger <dilger@wrecking.org>.

* configure.ac: Bump version (to 2.1.4-pre).  Change bug report
address to [tramp-devel@gnu.org].

* texi/tramp.texi (all): Change all addresses to .gnu.org.
(Obtaining Tramp): Mention the Nightly CVS Tree Tarball as CVS
direct access alternative.

* texi/trampinst.texi (Installation parameters): Linux configure option
prefix should be "--prefix=/usr".  Reported by Bradley Dilger
<dilger@wrecking.org>.
----------------------------
revision 2.153
date: 2005-01-16 06:18:59 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.1.3 released.
----------------------------
revision 2.152
date: 2005-01-09 11:10:39 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp-util.el (tramp-remap-command): New defun.
(top): Remove `define-key' calls.  They are replaced by respective
`tramp-remap-command' and `add-menu-button' calls.  Add
`tramp-minor-mode' to `dired-mode-hook'.
(tramp-compile, tramp-recompile): Call the commands
asynchronously.  Add `compilation-mode' to *Compilation* buffer.

* texi/tramp.texi: (Compilation): Make reference to (X)Emacs manual
flavor specific.  Remove mentioned restrictions for Emacs < 21.4
and for XEmacs.
----------------------------
revision 2.151
date: 2005-01-05 13:20:52 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el: Fix copyright years.

* lisp/tramp-smb.el: Fix copyright years.  Adapt author address.

* lisp/tramp-util.el: Fix copyright years.  Adapt author address.
(tramp-minor-mode): Mode must toggle.

* texi/tramp.texi: Fix copyright years.
----------------------------
revision 2.150
date: 2005-01-04 15:19:03 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-maybe-open-connection): If the local host does
not run a UNIX derivate, the local shell cannot handle command
sequences separated with ";".  Reported by Takashi Tsunakawa
<tuna@is.s.u-tokyo.ac.jp>.

* lisp/tramp-smb.el (tramp-smb-open-connection): Check existence of
`tramp-smb-program'.

* lisp/tramp-util.el (tramp-compile, tramp-recompile): Enable
`tramp-minor-mode' in buffer "*Compilation*".

* texi/tramp.texi (Compilation): Give a note that remote compilation is
performed synchronously only, for the time being.
----------------------------
revision 2.149
date: 2004-12-29 13:15:27 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp-smb.el: Add new Todo item.

* lisp/tramp-util.el (tramp-minor-mode): New minor mode.  Add it to
`find-file-hooks'.
(tramp-minor-mode-map): Respective map.  Add remapping for
`compile' and `recompile'.
(tramp-recompile): New defun.

* texi/tramp.texi (Compilation): New section, describing compilation of
remote files.
----------------------------
revision 2.148
date: 2004-10-17 09:33:31 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.147
date: 2004-10-14 14:17:10 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* texi/trampver.texi.in (top): Set default value of `emacs' or `xemacs'
derived from @EMACS_INFO@.  This simplifies synchronizing with
XEmacs CVS.
----------------------------
revision 2.146
date: 2004-10-10 09:48:44 -0700;  author: albinus;  state: Exp;  lines: +12 -2;


* Makefile.in (savannah): Don't apply "configure" for Japanese
manual, but call "make -C texi" with proper variable settings.

* aclocal.m4 (AC_EMACS_INFO): Write default values in help output
for "--with-xemacs" and "--with-emacs".
(AC_PATH_LISPDIR): Write default value in help output for
"--with-lispdir".
(all): Unify capitalization for help output.

* configure.ac: Bump version (to 2.1.3-pre).

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.
(savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.145
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +9 -1;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 2.144
date: 2004-09-16 13:04:47 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* Makefile.in (AUTOCONF): New variable.
(configure): Apply it.  Reported by Norbert Koch
<viteno@xemacs.org> in order to have a simple possibility applying
autoconf under another name.

* texi/trampinst.texi (Installation parameters): Mention usefull
configure option "--prefix=/usr/share" for Linux systems.
Reported by Charles Curley <charlescurley@charlescurley.com>.
----------------------------
revision 2.143
date: 2004-09-07 14:19:18 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* texi/tramp.texi (Frequently Asked Questions): Add item for host name
indication in mode line.
----------------------------
revision 2.142
date: 2004-09-05 11:26:32 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


* lisp/tramp.el (top): Undefine "/" in `read-file-name-map' when syntax
is 'url.  Otherwise, XEmacs would break the syntax with
`minibuffer-electric-separator'.

* text/tramp.texi (Alternative Syntax): New section.
----------------------------
revision 2.141
date: 2004-09-05 02:23:01 -0700;  author: albinus;  state: Exp;  lines: +6 -1;


* texi/tramp.texi (Frequently Asked Questions): Improve second
abbreviation example.
----------------------------
revision 2.140
date: 2004-09-04 07:52:00 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* lisp/tramp-efs.el (all): Rename `tramp-postfix-single-method-*' to
`tramp-postfix-method-*'.

* texi/tramp.texi (Frequently Asked Questions): Add two examples of
using abbreviations to shortening Tramp file names.
----------------------------
revision 2.139
date: 2004-08-31 13:57:16 -0700;  author: albinus;  state: Exp;  lines: +5 -0;


* texi/tramp.texi (Frequently Asked Questions): Add item describing
approaches shortening Tramp file names to be typed.
----------------------------
revision 2.138
date: 2004-08-29 09:17:37 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(Inline methods): Todo item for plink and
tramp-rsh-end-of-line issue.
----------------------------
revision 2.137
date: 2004-08-09 13:20:38 -0700;  author: albinus;  state: Exp;  lines: +9 -0;


Version 2.1.1 released.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-methods): "sftp", "psftp": new external methods.
"plink", "plink1" and "pscp": parameter for port specification is
"-P".

* texi/tramp.texi (Inline methods): Correct wrong (outdated) index
"km".  Say, that the port specification is also available for
"plink".
(External transfer methods): Add "sftp" and "psftp" methods.
----------------------------
revision 2.136
date: 2004-08-03 14:20:10 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


* lisp/tramp.el (tramp-methods): Change custom definition of log-args
to the new syntax.
(tramp-wrong-passwd-regexp): Add "Tramp connection closed" string.
(tramp-maybe-open-connection): Add "echo \"Tramp connection
closed\"" to connection command.  By this, we will see easily when
a connection has failed.
----------------------------
revision 2.135
date: 2004-08-02 14:07:19 -0700;  author: albinus;  state: Exp;  lines: +9 -0;


* lisp/tramp.el (tramp-methods): Add "(-p" "%p)" in login-args where
applicable for the port kludge.  Arrange login-args as list of
lists, in order to discard a sublist when the corresponding
parameter is not set (like user name, port number).  Adapt
docstring.
(tramp-maybe-open-connection): Change evaluation of login-args
according the the changes above.
(tramp-make-tramp-file-name): Use "%l" as placeholder for the
localname part.  "%p" is used for port numbers now, and we want to
avoid headaches.

* texi/tramp.texi (all): Exchange nil by @code{nil} where not done
already.
(Inline methods): Say explicitely, that the host name part is
ignored for the su and sudo methods.
(Default User): Give an example for user name mismatch if the
connection method has an own configuration. Show solution.
----------------------------
revision 2.134
date: 2004-08-01 07:36:24 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


* lisp/tramp.el (tramp-default-method-alist)
(tramp-default-proxies-alist): Correcting doc string.
(tramp-default-user, tramp-default-user-alist)
(tramp-default-host): New defcustom.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-expand-file-name, tramp-action-login)
(tramp-buffer-name, tramp-debug-buffer-name)
(tramp-maybe-open-connection)
(tramp-read-passwd, tramp-clear-passwd): Apply `tramp-find-user'
and `tramp-find-host'.
(tramp-find-default-method): Allow nil regexps.
(tramp-find-default-user, tramp-find-user)
(tramp-find-default-host, tramp-find-host): New defun.

* lisp/tramp-smb.el (top): Add empty (anonymous) user to
`tramp-default-user-alist' for smb method.

* texi/tramp.texi (Default User, Default Host): New chapters.
----------------------------
revision 2.133
date: 2004-07-30 12:53:38 -0700;  author: albinus;  state: Exp;  lines: +2 -2;
*** empty log message ***
----------------------------
revision 2.132
date: 2004-07-30 12:52:03 -0700;  author: albinus;  state: Exp;  lines: +14 -0;


* INSTALL: Precise supported (X)Emacs versions.

* aclocal.m4 (AC_EMACS_INFO): Add check for proper (X)Emacs
version.

* configure.ac: Precise comments.

* lisp/trampver.el.in: Check for (X)Emacs version.  Code is from macro
AC_EMACS_INFO of aclocal.m4.

* lisp/tramp.el (top): Remove (X)Emacs version check.
(tramp-maybe-open-connection): Handle NIL values in
`tramp-default-proxies-alist'.

* texi/trampver.texi.in: Remove `postfixmultihop'.  Rename
`postfixsinglehop' into `postfixhop'.

* texi/tramp.texi (top): Rename `postfixsinglehop' into `postfixhop'.
(Multi-hop Methods, Multi-hop filename syntax): Removed, including
al pointers to.
(Multi-hops): New chapter.
(History of Tramp): Proxy hosts mentioned.
(Frequently Asked Questions): Precise supported (X)Emacs
versions.
----------------------------
revision 2.131
date: 2004-05-08 03:22:24 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Resurrect tagline.
----------------------------
revision 2.130
date: 2004-05-02 09:38:39 -0700;  author: kai;  state: Exp;  lines: +4 -0;
branches:  2.130.2;
* aclocal.m4 (AC_CONTRIB_FILES): Load the library in question
before invoking fboundp on the function searched.

* configure.ac: Bump version.
----------------------------
revision 2.129
date: 2004-04-25 08:41:10 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* lisp/tramp.el (tramp-backup-directory-alist)
(tramp-bkup-backup-directory-info): New defcustoms.
(tramp-file-name-handler-alist): Add entry for
`find-backup-file-name'.
(tramp-handle-find-backup-file-name): New function.  Implements
Tramp's find-backup-file-name.

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`find-backup-file-name'.

* texi/tramp.el (Auto-save and Backup): Explain exploitation of new
variables `tramp-backup-directory-alist' and
`tramp-bkup-backup-directory-info'.
----------------------------
revision 2.128
date: 2004-04-09 09:14:27 -0700;  author: albinus;  state: Exp;  lines: +28 -0;


Complete rework, based on review by Karl Berry <karl@gnu.org>

* aclocal.m4 (AC_EMACS_INSTALL): Rewrite function.  Apply a
variable substitution rather then a file substitution

* configure.ac: Adapt comment for AC_EMACS_INSTALL call.

* texi/Makefile.in (INSTALL_CHAPTER): New variable, set by configure.
(TEXI_FILES): Includes "trampinst.texi" also if $(INSTALL_CHAPTER)
is "yes".
($(localinfodir)/%, %.dvi, tramp-%.html, tramp_ja-%.html):
$(INSTALL_CHAPTER) is a parameter, too.

* texi/trampver.texi.in (trampver, tramp): Macros changed to flags.
(otherflavor, installationchapter): Macros removed.  Not necessary
any longer.
(all): "tramp-" and "-" removed from flag names.

* texi/tramp.texi, texi/tramp_ja.texi (tramp): Macro removed.
(Obtaining Tramp): Flag removed from title.
(all): "tramp-" and "-" removed from flag names.  Flags `tramp'
and `trampver' used properly.  Flag `tramp-inst' replaced by
`installchapter'.  Installation related text adapted.

* texi/trampinst.texi (otherflavor, installationchapter): Macros
removed.  Not necessary any longer.
(all): Includes "trampver.texi" for flag setting.  All local flags
moved to that file.  "tramp-" and "-" removed from flag names.
Flags `tramp' and `trampver' used properly.  Flag `tramp-inst'
replaced by `installchapter'.
----------------------------
revision 2.127
date: 2004-03-29 12:37:49 -0800;  author: albinus;  state: Exp;  lines: +11 -0;


* configure.ac: Beautify check for "install-info".

* INSTALL (Installation Names): Describe what to do in case of
errors and warnings.
(Load Path): Add XEmacs example.

* texi/Makefile.in (INSTALL_INFO): Use option `--quiet'.

* texi/tramp.texi (Frequently Asked Questions): Use "MS Windows
NT/2000/XP" (not only "NT").  Remove doubled entry "What kinds of
systems does @tramp{} work on".

* texi/trampinst.texi (Installation parameters): Describe what to do in
case of errors and warnings.
----------------------------
revision 2.126
date: 2004-03-28 08:44:41 -0800;  author: albinus;  state: Exp;  lines: +16 -0;


* configure.ac: Check existence of "install-info".  Taken from
Emacs configure.in.

* texi/Makefile.in (INSTALL_INFO): New Variable.
($(localinfodir)/dir, $(infodir)/dir): New Targets.
(.PHONY): Add "$(localinfodir)/dir" and "$(infodir)/dir".
(install): Depends on "$(infodir)/dir".
(tramp): Depends on "$(localinfodir)/dir".

* texi/dir_sample: Created new.  Existing one didn't work, don't know  why.

* texi/tramp_ja.texi: @direntry corrected to "tramp_ja".

* texi/trampinst.texi (Load paths): Remove explanation on applying
"install-info".  It should work now, even on Debian.
----------------------------
revision 2.125
date: 2004-03-21 12:55:48 -0800;  author: albinus;  state: Exp;  lines: +6 -0;


* lisp/tramp.el (TODO): Remove items done.

* texi/tramp.texi (Auto-save and Backup): Make file name example
(X)Emacs neutral. In case of XEmacs, `bkup-backup-directory-info'
and `auto-save-directory' must be used.
----------------------------
revision 2.124
date: 2004-03-14 12:59:18 -0800;  author: albinus;  state: Exp;  lines: +10 -0;


* INSTALL: Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.

* Makefile.in: Don't check for $(USE_CONTRIB) any longer.
(xemacs): Use ""$(MAKE)" instead of "make".
(emacs): Use "--with-emacs" configure option.
(savannah): Use "ftp-upload" instead of "scp".  Hope it works for
Kai.

* aclocal.m4 (AC_EMACS_LISP): Use "-vanilla" in case of XEmacs.
(AC_CONTRIB_FILES): New function.  Checks for the need of
provisioning of a contributed package.

* configure.ac: Apply `AC_CONTRIB_FILES' for all Lisp files of
contrib directory.

* contrib/README: Clarify run-at-time.el.

* lisp/Makefile.in: New environment variables $(CONTRIB_FILES) and
$(INSTALL_FILES).  Don't check for $(USE_CONTRIB) any longer.
(all): Depends on $(CONTRIB_FILES), too.
(install): Copy $(INSTALL_FILES) but $?.
(distclean): Remove also $(CONTRIB_FILES).

* texi/Makefile.in (savannah): Simplify copy command.

* texi/trampinst.texi (Installation, Installation parameters)
(Load paths): Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.
----------------------------
revision 2.123
date: 2004-03-07 22:11:15 -0800;  author: albinus;  state: Exp;  lines: +7 -0;


* lisp/tramp.el (tramp-out-of-band-prompt-regexp)
(tramp-actions-copy-out-of-band): New defcustoms.
(tramp-do-copy-or-rename-file-out-of-band): Asynchronous process
used instead of a synchronous one.  Allows password entering.
(tramp-action-out-of-band): New defun.
(tramp-open-connection-rsh, tramp-method-out-of-band-p): Remove
restriction with password from doc string.
(tramp-bug): Add variables `tramp-terminal-prompt-regexp',
`tramp-out-of-band-prompt-regexp',
`tramp-actions-copy-out-of-band', `password-cache' and
`password-cache-expiry'.
(toplevel): Remove todo item wrt ssh-agent.  Obsolete due to
password caching.

* texi/tramp.texi (Overview, Connection types)
(External transfer methods, Default Method)
(Windows setup hints): Remove restriction of password entering
with external methods.
----------------------------
revision 2.122
date: 2004-03-05 12:47:50 -0800;  author: albinus;  state: Exp;  lines: +5 -0;


* configure.ac: Write "${MAKE}" if appropriate (but "make").

* Makefile.in: (.PHONY): Remove unused targets.
(distclean): Remove also *.tar.gz*
(tar): Call gpg.

* lisp/Makefile.in (.PHONY): Remove unused targets.
(install): Depends on "all".

* lisp/tramp-vc.el (tramp-vc-workfile-unchanged-p): Correct typo
("file" -> "filename").  Reported by Kim F. Storm <storm@cua.dk>.

* texi/Makefile.in (SINFO): Removed.
(.PHONY): New Target.
----------------------------
revision 2.121
date: 2004-02-29 10:06:49 -0800;  author: kai;  state: Exp;  lines: +2 -0;
* Makefile.in (dist, install-html): Remove unused targets.

* Makefile.in (install-ftp, site-lisp): Remove unused targets.

* Makefile.in (site-info, install-html): Remove unused targets.
----------------------------
revision 2.120
date: 2004-02-29 05:37:34 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.39 released.
----------------------------
revision 2.119
date: 2004-02-29 05:29:08 -0800;  author: albinus;  state: Exp;  lines: +14 -6;


* lisp/tramp.el (top-level): Require password.el if visible.  Should be
mandatory once No Gnus has found its way into (X)Emacs.
(tramp-read-passwd): Invoke `password-read' if available,
`read-passwd' otherwise. `ange-ftp-read-passwd' isn't used as
fallback any longer.
(tramp-clear-passwd): New function.
(tramp-process-actions, tramp-process-multi-actions): Clear
password cache if login has failed.

* lisp/tramp-smb.el (tramp-smb-open-connection): Clear password cache
if login has failed.

* texi/tramp.texi (all): Use "@value{emacs-name}" everywhere where it
is intended (some accidents of last fix corrected).
(Password caching): New node.
(External transfer methods): Refer to password caching for "smb"
method.

* contrib/password.el: New file.  Taken from No Gnus.
----------------------------
revision 2.118
date: 2004-02-06 01:25:45 -0800;  author: albinus;  state: Exp;  lines: +9 -0;


* texi/tramp.texi (all): Replace "Emacs" by "@value{emacs-other-name}"
where possible.
(External transfer methods): "ftp" is possible for XEmacs, too.
(Auto-save and Backup): Add auto-save.  Based on wording of Kai.
(Frequently Asked Questions): Remote hosts must not be Unix-like
for "smb" method.
----------------------------
revision 2.117
date: 2004-02-01 06:33:56 -0800;  author: albinus;  state: Exp;  lines: +7 -0;


* texi/tramp.texi (all): Savannah URLs unified to
"http://savannah.nongnu.org".
(Top): Refer to Savannah mailing list as the major one.  Mention
older mailing lists in HTML mode only.
----------------------------
revision 2.116
date: 2004-01-22 14:56:46 -0800;  author: albinus;  state: Exp;  lines: +5 -0;


* lisp/tramp.el (tramp-completion-function-alist-ssh): Add
`tramp-parse-shostkeys' and `tramp-parse-sknownhosts'.
(tramp-completion-function-alist): It's a defvar now, because we
want to apply the optimized `tramp-set-completion-function'
instead of a static list.
(tramp-set-completion-function): Implementation tuned.  Avoid
double entries, and entries where the function or the
file/directory doesn' exist.
(tramp-parse-shostkeys, tramp-parse-sknownhosts): New functions
for SSH2.

* texi/tramp.texi (Customizing Completion): Explain new functions
`tramp-parse-shostkeys' and `tramp-parse-sknownhosts'.
----------------------------
revision 2.115
date: 2004-01-05 14:30:37 -0800;  author: albinus;  state: Exp;  lines: +5 -0;


* lisp/tramp-smb.el (tramp-smb-maybe-open-connection): Use
`tramp-process-connection-type'.

* texi/tramp.texi (Issues): Explain disabling "auto-autoloads.el*" for
unified filenames with XEmacs.
----------------------------
revision 2.114
date: 2004-01-02 03:38:32 -0800;  author: albinus;  state: Exp;  lines: +5 -0;


* configure.ac: *.elc files must be removed always.  Otherwise,
there could be problems if they are created with the wrong Emacs
flavor.

* texi/tramp.texi (Obtaining TRAMP): Remove CVS login from example.
That's necessary for pserver password authentification only.
----------------------------
revision 2.113
date: 2003-12-29 15:18:36 -0800;  author: uid67418;  state: Exp;  lines: +6 -0;


* texi/tramp.texi (Obtaining TRAMP): Change remaining
"subversions.gnu.org" to "savannah.nongnu.org".  Overlooked last time.
----------------------------
revision 2.112
date: 2003-12-28 13:24:34 -0800;  author: uid67418;  state: Exp;  lines: +5 -0;


* texi/tramp_ja.texi (Obtaining TRAMP, Using TRAMP): Fixing typos.
From Yuji Yamano <yyamano@kt.rim.or.jp>
----------------------------
revision 2.111
date: 2003-12-27 13:23:48 -0800;  author: uid67418;  state: Exp;  lines: +5 -0;


* lisp/tramp.el (tramp-completion-mode): Add XEmacs input
events. Until now it was not necessary, because they are
evaluated in case of unified filenames only.

* lisp/tramp-efs.el (top): Add all XEmacs download sites to
`tramp-default-method-alist'.  The existing settings should be
sufficient already, but it's better to make it explicitely.
(tramp-efs-method-given, tramp-efs-method-regexp): New variables.
(tramp-efs-path-regexp, tramp-efs-path-format-string)
(tramp-efs-path-format-without-user)
(tramp-efs-path-user-at-host-format)
(tramp-efs-path-host-format, tramp-efs-path-root-regexp): Changed
to a function.  Their values depend on the existence of the method
tag in filename.
(tramp-efs-file-name-handler): Check first whether the method tag
is given in a filename.
(tramp-efs-file-name-p): A syntax check must be performed first,
otherwise `tramp-dissect-file-name' returns with an error.

* lisp/tramp-ftp.el (Commentary): Removing pointer to EFS.  It has its
own module.

* lisp/tramp-smb.el (top): Setting default value in
`tramp-default-method-alist' corrected.  Order of USER and HOST
have been wrong.  Nobody claimed for months ...

* texi/tramp.texi (Issues): Describe how to use unified filenames with
XEmacs.
----------------------------
revision 2.110
date: 2003-12-25 08:18:29 -0800;  author: uid67418;  state: Exp;  lines: +6 -0;


	* lisp/tramp.el (tramp-completion-mode) Don't check for 'xemacs
but
	`tramp-unified-filenames'.

	* lisp/tramp-smb.el (tramp-smb-errors): Add
NT_STATUS_WRONG_PASSWORD"
	and "NT_STATUS_NETWORK_ACCESS_DENIED".
	(tramp-smb-maybe-open-connection): Set `process-connection-type'
	to 'pty.  Suggested by Piet van Oostrum <piet@cs.uu.nl>.

	* lisp/tramp-smb.el (tramp-smb-process-running): Removed.  Since
we
	acknowledge the virtual prompt for shares, there's no need for
	distinction of reading shares (process ends afterwards) and
	interactive mode of smblient.
	(tramp-smb-open-connection): Setting process sentinel removed.
	(tramp-smb-wait-for-output): Algorithm simplified, again.  Hope
it
	is more robust, too.

	* lisp/tramp-smb.el (tramp-smb-prompt): Add virtual prompt from
	listing shares, too.
	(tramp-smb-errors): Add "NT_STATUS_ACCOUNT_LOCKED_OUT".
	(tramp-smb-wait-for-output): Optimize algorithm getting pending
	output.  If it was received chunkwise, there have been problems.
	Remove the "prompt not found" error message; it is obvious.

	* lisp/tramp-smb.el (tramp-smb-handle-file-writable-p): Handle
the
case
	of non-existing filename, too.  Reported by Christoph Bauer
	<c_bauer@informatik.uni-kl.de>.
	(tramp-smb-get-file-entries): The directory in question should
	have permissions "drwxrwxrwx".  Just virtual, because we don't
	know the real permissions.  Don't we know?

	* lisp/tramp.texi (Obtaining TRAMP): Change Tramp CVS directory
to
	"-d:ext:anoncvs@savannah.nongnu.org:/cvsroot/tramp" as advised
on
	the Savannah page.
----------------------------
revision 2.109
date: 2003-11-30 09:52:16 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Release 2.0.38.
----------------------------
revision 2.108
date: 2003-11-30 09:48:47 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.37 released.
----------------------------
revision 2.107
date: 2003-11-25 13:57:51 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el: Add new optional parameter ID-FORMAT to
`file-attributes'.  Calls of `file-attributes' won't use this
parameter for backward compatibility reasons.
(tramp-perl-file-attributes): Add a new parameter to Perl script
in order to handle uid/gid as strings, if desired.
(tramp-handle-file-truename, tramp-handle-file-symlink-p): Apply
`file-attributes' instead of `tramp-handle-file-attributes' in
order to make the function more general.
(tramp-handle-file-attributes): Replace proprietary optional
parameter NONNUMERIC by the recently (Emacs 21.4) introduced
ID-FORMAT.
(tramp-handle-file-attributes-with-perl): Handle parameter
NONNUMERIC if set. This wasn't done in the past.
(tramp-post-connection): Apply second parameter "$2" if
`tramp-remote-perl' is called.

* lisp/tramp-smb.el (tramp-smb-handle-delete-file): Correct cut'n'waste
error (`filename' instead of `directory').
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-file-attributes): Add recently (Emacs 21.4)
introduced parameter ID-FORMAT.
(tramp-smb-handle-make-directory-internal): Correct cut'n'waste
error (`directory' instead of `ldir').

* lisp/tramp-vc.el (tramp-handle-vc-user-login-name): Check if
`file-attributes' has a second parameter.  If yes, apply it with
value "'integer".  Otherwise, don't use that parameter (default
is integer format).
----------------------------
revision 2.106
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +31 -0;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 2.105
date: 2003-11-02 12:16:50 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

	* texi/tramp.texi (Inline methods): Small grammar fix.
	(External transfer methods): Likewise.
	Submitted by Thien-Thi Nguyen <ttn@gnu.org> in Emacs CVS.
	Replace ASCII with @acronym{ASCII}.
	Submitted by Jesper Harder <harder@ifa.au.dk> in Emacs CVS.
----------------------------
revision 2.104
date: 2003-10-14 14:26:40 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(Configuration, External transfer methods):
Typos.  From Yoichi NAKAYAMA <yoichi@geiin.org>.
----------------------------
revision 2.103
date: 2003-10-08 12:57:01 -0700;  author: kai;  state: Exp;  lines: +7 -0;
From Yoichi NAKAYAMA <yoichi@geiin.org>:

* tramp.texi (External transfer methods, Auto-save and Backup):
Typo fixes.
* tramp_ja.texi: Sync with tramp.texi version 2.68.
----------------------------
revision 2.102
date: 2003-08-23 08:33:01 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(Default Method): Too many "use" in one sentence.
Rephrase.  Reported by Christian Kirsch.
(Filename Syntax): Old `su' example is probably a left-over from
the sm/su method naming.  Replace with `ssh', instead.
----------------------------
revision 2.101
date: 2003-08-22 13:04:53 -0700;  author: kai;  state: Exp;  lines: +1 -0;
(Configuration): Pointer to new subsection added.
----------------------------
revision 2.100
date: 2003-08-22 12:54:30 -0700;  author: kai;  state: Exp;  lines: +9 -0;
(Configuration): Tramp now chooses base64/uuencode
automatically.  Update wording accordingly.
(Top): More description for the `Default Method' menu entry.
(Default Method): Use @code, not @var, for Lisp variables.
(Default Method): New subsection `Which method is the right one
for me?'  Suggested by Christian Kirsch.
----------------------------
revision 2.99
date: 2003-08-08 08:04:57 -0700;  author: kai;  state: Exp;  lines: +6 -0;
(Remote shell setup): Warn of environment variables
FRUMPLE if user frumple exists.  Suggested by Sven Gabriel
<sven.gabriel@imk.fzk.de>.
----------------------------
revision 2.98
date: 2003-07-20 10:52:48 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.36 released.
----------------------------
revision 2.97
date: 2003-07-19 12:59:29 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(Remote shell setup): Mention tilde as another
problematic non-Bourne construct.
----------------------------
revision 2.96
date: 2003-07-17 13:06:01 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(Remote shell setup): Explain about problems with
non-Bourne commands in ~/.profile and ~/.shrc.
----------------------------
revision 2.95
date: 2003-06-28 15:21:58 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* Makefile.in (TEXI_FILES): New variable.
($(localinfodir)/tramp, %.dvi, tramp-%.html): Depend on
$(TEXI_FILES).  Just tramp.texi is not sufficient.
----------------------------
revision 2.94
date: 2003-06-24 12:28:49 -0700;  author: kai;  state: Exp;  lines: +6 -0;
Add release entries.
----------------------------
revision 2.93
date: 2003-06-17 04:25:55 -0700;  author: kai;  state: Exp;  lines: +2 -1;
Remember that Adrian's patch is small.
----------------------------
revision 2.92
date: 2003-06-17 04:24:00 -0700;  author: kai;  state: Exp;  lines: +7 -0;
2003-06-17  Adrian Aichner  <adrian@xemacs.org>

	* tramp.texi: Fix minor typos.
	* tramp.texi (Concept Index): Added to make manual searchable via
	`Info-index'.
	* tramp.texi (Version Control): Add cindex entry.
----------------------------
revision 2.91
date: 2003-06-15 00:30:23 -0700;  author: kai;  state: Exp;  lines: +5 -0;
Move direntry later, after copying and before
titlepage.
----------------------------
revision 2.90
date: 2003-06-09 08:19:39 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* dir_sample: New file.

* trampinst.texi (Load paths): gnu/linux --> GNU/Linux.
----------------------------
revision 2.89
date: 2003-05-24 15:41:02 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* Makefile.in (configure): It depends on "aclocal.m4", too.

* aclocal.m4, lisp/Makefile.in, contrib/Makefile.in: Use
`--no-site-file' option for Emacs call, in order to avoid loading of
Tramp in site specific init files.  Reported by Harry Putnam
<reader@newsguy.com>.

* lisp/Makefile.in (.PHONY): New target.
(all): "trampver.el" and "tramp.el" must be handled first due to
dependencies.

* lisp/tramp.el (tramp-completion-function-alist): Add completion
function for "remcp", "remsh" and "plink1".

* texi/tramp.texi (Inline methods): Add methods `remsh' and `plink1'.
(External transfer methods): Add method `remcp'.
(Multi-hop Methods): Add method `remsh'.
----------------------------
revision 2.88
date: 2003-04-08 13:20:14 -0700;  author: kai;  state: Exp;  lines: +4 -0;
* Makefile.in (savannah): Do not copy the Japanese HTML file.

* Makefile.in (savannah): Invoke configure after creating the
distribution tarball, because that deletes texi/Makefile which is
needed for the rest of the target.
----------------------------
revision 2.87
date: 2003-04-08 12:18:09 -0700;  author: kai;  state: Exp;  lines: +1 -0;
Bump version.
----------------------------
revision 2.86
date: 2003-04-08 12:11:11 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Bump version.
----------------------------
revision 2.85
date: 2003-04-06 14:44:33 -0700;  author: albinus;  state: Exp;  lines: +17 -0;

* aclocal.m4 (AC_EMACS_INSTALL): New macro.  Depending on
configure option `--with-packaging', Tramp installation chapter
will be part of the manual, or not.

* configure.ac (top-level): Apply `AC_EMACS_INSTALL'.

* Makefile.in (xemacs, emacs): Call `./configure --with-packaging'
in order to generate `trampver.texi' without installation chapter.

* texi/Makefile.in (%.dvi): Apply parameter `-t "@set $(EMACS_INFO)"'
for texi2dvi.

* texi/tramp.texi (top-level): Move installation related entries to
trampinst.texi.  Apply respective macros instead of, in case flag
`tramp-inst' is set.
Move all (X)Emacs related flags to trampver.texi.in.

* texi/trampinst.texi: New file.  Contains installation related
entries.

* texi/trampver.texi.in (top-level): Define all (X)Emacs related
flags.  Include trampinst.texi depending on configure option
`--with-packaging'.
----------------------------
revision 2.84
date: 2003-03-30 12:12:18 -0800;  author: kai;  state: Exp;  lines: +5 -0;
Say "Emacs" instead of "GNU Emacs" to follow
Richard's change in Emacs CVS.
----------------------------
revision 2.83
date: 2003-03-30 12:09:36 -0800;  author: kai;  state: Exp;  lines: +4 -0;
(xemacs, emacs): Copy trampver.texi, too.
----------------------------
revision 2.82
date: 2003-03-30 12:00:39 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* test.texi: Add "@bye" in order to have a well-formed document.
----------------------------
revision 2.81
date: 2003-03-28 09:29:58 -0800;  author: kai;  state: Exp;  lines: +4 -0;
(Auto-save and Backup): New node.
----------------------------
revision 2.80
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;  lines: +41 -0;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.79
date: 2003-03-05 14:33:17 -0800;  author: albinus;  state: Exp;  lines: +21 -0;

* Makefile (tramp.html): Generate both `tramp-emacs.html' and
`tramp-xemacs.html'.  Link `tramp.html' to
`tramp-emacs.html'. Since a web page is remote, a user must have
the choice to switch between the pages.
(tramp-%.html): New target for generating `tramp-emacs.html' and
`tramp-xemacs.html'.
(install-html): Copy `*.html'.
(savannah): More or less the same.

* tramp.texi (Top): Rename "Emacs" to "GNU Emacs" in order to have
better differentiation to "XEmacs".  `emacs-other-name',
`emacs-other-dir' and `emacs-other-file-name' are new macros in
order to point to the other Emacs flavor where appropriate.  In
info case, point to node `Installation' in order to explain how to
generate the other way.  In html case, make a link to the other
html file.
(Installation): Short explanation the option for the other Emacs
flavor.
----------------------------
revision 2.78
date: 2003-02-28 10:12:30 -0800;  author: kai;  state: Exp;  lines: +4 -0;
* tramp.texi: Bump version.

* tramp.el (tramp-version): Bump.
(tramp-handle-expand-file-name): Protect against short localnames
when comparing with "/../".

* Makefile (VERSION): Bump.
----------------------------
revision 2.77
date: 2003-02-15 10:37:30 -0800;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.texi: Replace word `path' with `localname' where used as
a component of a Tramp file name.  In GNU, the word `path' is
used only for search paths, ie lists of directories.

* tramp-vc.el, tramp.el: Replace term `path' with `localname'
unless it is used for a search path.  In GNU, the word `path' is
reserved for search paths.

* tramp.el (tramp-do-copy-or-rename-file-one-local): New
function.  Not implemented.  Not used.  Should invoke rcp or scp
directly to keep the time.
----------------------------
revision 2.76
date: 2003-02-09 11:22:36 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* tramp.el (tramp-chunksize): It's now a defcustom.  Set to 500 on
systems only known to have a buggy `process-send-string'
implementation.  First black-listed constellation is GNU Emacs/
hpux.
(tramp-send-region): Correct debug message.
(tramp-bug): Add `tramp-chunksize'.
* tramp.texi (Frequently Asked Questions): `tramp-chunksize'
introduced.
----------------------------
revision 2.75
date: 2003-02-08 10:39:55 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* tramp.texi (Installation): Explain what to do if files from the
tramp/contrib directory are needed.
----------------------------
revision 2.74
date: 2003-02-05 11:34:18 -0800;  author: kai;  state: Exp;  lines: +2 -0;
* tramp.texi (Installation): In Emacs, use M-x
texinfo-format-buffer RET, not M-x makeinfo-buffer RET.  Reported
by gebser@ameritech.net.

* tramp.el (tramp-send-region): Protect against tramp-chunksize
being nil.

* Makefile (VERSION): Bump.
----------------------------
revision 2.73
date: 2003-02-05 11:30:30 -0800;  author: kai;  state: Exp;  lines: +6 -0;
(Installation): In Emacs, use M-x
texinfo-format-buffer RET, not M-x makeinfo-buffer RET.  Reported
by gebser@ameritech.net.
----------------------------
revision 2.72
date: 2003-02-01 08:22:10 -0800;  author: albinus;  state: Exp;  lines: +5 -0;


* tramp.texi (Frequently Asked Questions): Explain a workaround if
another package loads accidently Ange-FTP.
----------------------------
revision 2.71
date: 2003-01-24 12:29:24 -0800;  author: albinus;  state: Exp;  lines: +7 -0;


* tramp.el (tramp-completion-function-alist-ssh): Add parsing of
"/etc/ssh_config" and "~/.ssh/config".  Suggested by Kai.
(tramp-completion-function-alist, tramp-set-completion-function):
Doc string update.
(tramp-parse-sconfig, tramp-parse-sconfig-group): New functions.
Provide parsing of "~/.ssh/config" style files.

* tramp.texi (Customizing Completion): Add function
`tramp-parse-sconfig'.  Change example of
`tramp-set-completion-function', because parsing of ssh config
files looks more natural.
----------------------------
revision 2.70
date: 2002-12-23 06:03:44 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.28 released.
----------------------------
revision 2.69
date: 2002-12-05 14:29:23 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.27 released.
----------------------------
revision 2.68
date: 2002-11-28 13:38:40 -0800;  author: kai;  state: Exp;  lines: +2 -0;
Adjust version numbers in files.
----------------------------
revision 2.67
date: 2002-11-28 13:35:11 -0800;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.26 released.
----------------------------
revision 2.66
date: 2002-11-28 13:03:34 -0800;  author: albinus;  state: Exp;  lines: +6 -0;


* tramp.el (top-level): Require tramp-smb.el only if local
Operating System is not MS Windows.  There's no need for the SMB
method there, because those Emacsen support UNC file names.
(tramp-handle-file-modes): Use Emacs file name primitives instead
of calling tramp-handle-* equivalents directly.  Needed for
tramp-smb.

* tramp-smb.el (tramp-smb-errors): List of error strings extended.
(tramp-smb-not-handled-yet): Function removed.  All I/O primitives
are handled now.  All places where used updated accordingly.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region, tramp-smb-open-connection): Error
handling improved.
(tramp-smb-handle-delete-directory)
(tramp-smb-handle-directory-files)
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-make-directory)
(tramp-smb-handle-make-directory-internal): New file name
primitive functions implemented.
(tramp-smb-handle-insert-directory): In case parameter is not a
directory, the result of "dir filename*" will return too many
results.  They are filtered out now.
(tramp-smb-send-command): Returns nil if there has been an error
message from smbclient.  Used for improved error handling
mentioned above.
(tramp-smb-wait-for-output): Timeouts removed.  Too much trouble
with.
(tramp-smb-time-less-p, tramp-smb-time-subtract): Handle the case
when T1 or T2 is nil.  It shouldn't happen ever, but it did once.

* tramp.texi (External transfer methods): Note added for `smb'
method that's not implemented for Emacsen running locally under MS
Windows.  UNC file names shall be used instead of.
----------------------------
revision 2.65
date: 2002-11-22 14:51:36 -0800;  author: albinus;  state: Exp;  lines: +5 -0;


* tramp-smb.el (tramp-smb-handle-substitute-in-file-name):
Removed.  The default handler is good enough for us now.
(tramp-smb-advice-PC-do-completion): Advice for
`PC-do-completion'.  Corrects a the inconvenient usage of
`substitute-in-file-name' there.

* tramp.texi (External transfer methods): Remind the application
of "$$" in share names of the `smb' method.
----------------------------
revision 2.64
date: 2002-11-21 14:04:25 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* tramp-smb.el (tramp-use-smb): Remove variable.  "smb" method is
active now; beta test can start.
(tramp-smb-handle-file-newer-than-file-p): Apply
`tramp-smb-time-less-p' but `tramp-time-diff'.  Seems to be more
general.
(tramp-smb-handle-insert-directory): Use SWITCHES in order to
decide how to sort (but obscure dired variables).  Don't apply
`save-excursion'; the cursor must be at the end of the buffer
after insertion.  I should have it done from the beginning ...
(tramp-smb-handle-write-region): Remove unused variable
`trampbuf'.  Thanx to XEmacs compiler warning.
(tramp-smb-read-file-entry): Simplify handling of the dont-know
mtime value.
(tramp-smb-maybe-open-connection): Remove unused variable
`last-cmd-time'.  Thanx to XEmacs compiler warning.

* tramp.texi (External transfer methods): Add description of `smb'
method.
----------------------------
revision 2.63
date: 2002-10-13 13:27:29 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

2002-10-13  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-advice-find-file-name-handler): Remove defadvice
	because it might be not a good idea to hook into Emacs built-in
	subroutiones. Suggested by RMS.
	(tramp-primitive-file-name): Handle all primitives now.
	(tramp-file-name-handler): Allow call of
	`tramp-ftp-file-name-handler' for functions only defined in
	`tramp-file-name-handler-alist'.  Strange.

2002-10-12  Michael Albinus  <Michael.Albinus@alcatel.de>

	* Makefile (tramp): Add tramp-uu.elc and tramp-ftp.elc.

	* tramp.el (main): Require `tramp-ftp' after load in order to
	avoid infloop. Autoload `tramp-ftp-file-name-p' for compiler
	satisfaction.
	(tramp-primitive-file-name): Add handling of `expand-file-name'
	and `file-newer-than-file-p'.
	(tramp-file-name-handler): Call `tramp-primitive-file-name' via
	`apply'.

	* tramp-ftp.el (main): Require `tramp'.


2002-10-11  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp-ftp.el: New file.

	* tramp.el (tramp-default-method): Adapt doc string.
	(tramp-ftp-method, tramp-completion-function-alist-ftp)
	(tramp-disable-ange-ftp, tramp-invoke-ange-ftp)
	(tramp-ange-ftp-file-name-p, tramp-make-ange-ftp-file-name): Moved
	to tramp-ftp.el or removed (if not needed any longer).  Callees
	adapted.
	(tramp-completion-function-alist): "ftp" entry removed.  Will be
	added from within tramp-ftp.el.
	(tramp-set-completion-function ): Allow setting of methods not
	defined yet.
	(tramp-run-real-handler, tramp-completion-run-real-handler):
	Remove `ange-ftp-hook-function' handling.  Make
	`inhibit-file-name-handlers' a cons but a list.
	(tramp-advice-find-file-name-handler): Advice for
	`find-file-name-handler'.  Check for Ange-FTP file names,
	applicable for NON built-in primitives only.
	(tramp-primitive-file-name): New function.  Returns filename for
	some built-in primitives.
	(tramp-file-name-handler): Check for Ange-FTP file names (built-in
	primitives only).  Forward to Ange-FTP in case of.
	(tramp-completion-file-name-handler): Remove catch for
	`tramp-forward-to-ange-ftp'.  Not necessary any longer.
	(tramp-flatten-list): Remove function.  Never used.
	(tramp-completion-mode, tramp-get-completion-methods): Special
	handling of `tramp-ftp-method' removed.  It's part of
	`tramp-methods' now (as foreign method).

2002-10-13  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Windows setup hints): Fix typo (missing {} after
	@dots).
	(Inline methods, External transfer methods)
	(Remote shell setup, Windows setup hints)
	(Frequently Asked Questions, Issues): Replace "Tramp" by
	"@tramp{}".
----------------------------
revision 2.62
date: 2002-10-12 02:04:36 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(Windows setup hints): Mention possible ssh-agent
issues under Windows.  Suggestion from Francis Litterio.
----------------------------
revision 2.61
date: 2002-10-11 01:17:55 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(Windows setup hints): Mention possible scp problems
with Cygwin scp.
----------------------------
revision 2.60
date: 2002-10-08 11:01:22 -0700;  author: kai;  state: Exp;  lines: +7 -0;
(Installation, Inline methods)
(Customizing Completion, Remote shell setup)
(Frequently Asked Questions): Fix typos.  From Francis Litterio
<franl@world.std.com>.
----------------------------
revision 2.59
date: 2002-10-06 12:03:20 -0700;  author: kai;  state: Exp;  lines: +4 -0;
(VERSION): Bump.
----------------------------
revision 2.58
date: 2002-10-03 12:31:09 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* tramp.texi: Move @copying section to preamble of document.  Do
@insertcopying on page after the title page for tex output, and in
the top node otherwise.

* Makefile (realclean): New target, delete info file and tarball
here.
----------------------------
revision 2.57
date: 2002-09-29 09:07:44 -0700;  author: kai;  state: Exp;  lines: +4 -0;
*** empty log message ***
----------------------------
revision 2.56
date: 2002-09-28 05:08:52 -0700;  author: kai;  state: Exp;  lines: +4 -0;
* Makefile (tramp): Renamed from tramp.info.

* Makefile (cvs-update): New convenience target.
(clean): Remove info subdir, too.
----------------------------
revision 2.55
date: 2002-09-27 14:37:15 -0700;  author: albinus;  state: Exp;  lines: +10 -0;


	* tramp.texi (Inline methods): Explain that encoding/decoding
	commands are selected automagically ,based on `uuencode',
	'mimencode' and anown Perl implementation of base-64
	coding. Actualize the methods with respect to reality.
	(External transfer methods): Add missing methods `scp1', `scp2',
	`scp1_old', `scp2_old' and `ftp'.
	(Multi-hop Methods): Remove `multiu'.

	* tramp.el (tramp-methods, tramp-completion-function-alist):
	Rename "scp1-old", "scp2-old", "ssh1-old", "ssh2-old" to
	"*_old". There have been problems in method name completion,
	because "-" is a word delimeter for partial completion mode.
	(tramp-completion-function-alist): Set
	`tramp-completion-function-alist-ssh' as completion function for
	"fcp".
----------------------------
revision 2.54
date: 2002-09-27 09:39:03 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.23 released.
----------------------------
revision 2.53
date: 2002-09-24 09:22:16 -0700;  author: kai;  state: Exp;  lines: +4 -0;
* tramp.texi: Bump version.

* tramp.el (tramp-handle-file-truename): Eliminate unused
variable.
(tramp-version): Bump.
----------------------------
revision 2.52
date: 2002-09-24 02:57:55 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(tramp-find-inline-encoding): Don't redirect stdout to
/dev/null to avoid "chmode go-rwx" operation from "mimencode
>/dev/null" as root(!), and to check the output of the decoding
command.
----------------------------
revision 2.51
date: 2002-09-22 10:29:46 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.22.
----------------------------
revision 2.50
date: 2002-09-22 09:25:41 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

	* tramp.el (tramp-parse-rhosts, tramp-parse-shosts)
	(tramp-parse-hosts, tramp-parse-passwd): Apply `push' but
	`add-to-list' for performance reasons.
	(tramp-get-completion-user-host): Return `nil' in case both `user'
	and 'host' are empty (not necessarily `nil'.
	(tramp-parse-netrc, tramp-parse-netrc-group): New functions.
	(tramp-user-regexp): " \t" are not user regexp characters.
	(tramp-completion-handle-file-name-all-completions): Remove
	Ange-FTP cmpletion. It has a bug not handling the "/ftp:" prefix
	completely, and it returns local completions as well.
	(tramp-completion-function-alist-ftp): New constant.
	(tramp-completion-function-alist): Add completion function for
	"ftp".

	* tramp.texi (Customizing Completion): Introduce
	`tramp-parse-netrc'.
----------------------------
revision 2.49
date: 2002-09-22 06:11:59 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.20 released.
----------------------------
revision 2.48
date: 2002-09-13 14:19:49 -0700;  author: kai;  state: Exp;  lines: +6 -0;
Version 2.0.19 released.

* tramp-uu.el: New file.

* tramp.el (tramp-coding-commands): Use `tramp-uuencode-region'
as local encoder for the uuencode based entries.

* tramp.texi: Define macro for printing a Tramp filename.
----------------------------
revision 2.47
date: 2002-09-11 12:25:36 -0700;  author: albinus;  state: Exp;  lines: +17 -0;

* tramp.el (tramp-completion-handle-file-name-all-completions):
	Define `result1'.
	(tramp-parse-hosts-group): Discard IPv6 entries.

* tramp.texi (Copying): New node. Contains the disclaimer
	part. Two occurences of this text removed.
	(Obtaining @tramp{}): Harmonize example. Use "~/emacs" but "~/lisp".
	(Top): Introduce new flags `emacs'/`xemacs', `emacs-name',
	´emacs-dir', `ftp-package-name', `tramp-prefix',
	`tramp-prefix-single-hop', `tramp-postfix',
	`tramp-postfix-single-hop', `tramp-postfix-multi-hop'.
	(All): Use them. Fix typos where seen.
----------------------------
revision 2.46
date: 2002-09-08 11:33:03 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

2002-09-08  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Configuration): New node `Customizing Completion'.
	(Usage): New node `Filename completion'. Respective sentences from
	node `Dired' moved to.

2002-09-07  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-methods): Remove `tramp-completion-function'
	entries. They are handled now by `tramp-completion-function-alist'.
	(tramp-completion-function): Defvar removed. I've never used
	it. Hmm.
	(tramp-get-completion-function)
	(tramp-get-completion-rsh, tramp-get-completion-ssh)
	(tramp-get-completion-telnet, tramp-get-completion-su): Functions
	removed as well. Not necessary any longer due to extended
	customization means.
	(tramp-completion-function-alist): New defcustom. Holds all
	FUNCTION FILE pairs used for user and host name completion
	relevant for METHOD.
	(tramp-completion-function-alist-rsh)
	(tramp-completion-function-alist-ssh)
	(tramp-completion-function-alist-telnet)
	(tramp-completion-function-alist-su): Defconst for initializing
	`tramp-completion-function-alist'. Unfortunately, mainly UNIX-like
	values are known for me until now. Needs to be completed for at
	least VMS++ like operating systems.
	(tramp-set-completion-function)
	(tramp-get-completion-function): New functions for configuration
	of `tramp-completion-function-alist'. The old definition of
	`tramp-get-completion-function' has been discarded.
	(tramp-completion-handle-file-name-all-completions): Change
	function call for user/host completion according to definition in
	`tramp-completion-function-alist'.
	(tramp-parse-passwd): Added exception handling for "root", because
	`tramp-get-completion-su' (the previous place for this stuff)
	doesn't exist any longer.
----------------------------
revision 2.45
date: 2002-09-06 03:10:13 -0700;  author: kai;  state: Exp;  lines: +5 -0;
Merge changes by Michael Albinus from "completion" branch.

2002-09-05  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-postfix-single-method-format)
	(tramp-postfix-multi-method-format)
	(tramp-postfix-multi-hop-format)
	(tramp-postfix-user-format): New format strings.
	(tramp-postfix-single-method-regexp)
	(tramp-postfix-multi-method-regexp)
	(tramp-postfix-multi-hop-regexp)
	(tramp-postfix-user-regexp)
	(tramp-make-multi-tramp-file-format)
	(tramp-make-tramp-file-name): Apply them.
	(tramp-completion-handle-file-name-all-completions): Fix for
	invoking ange-ftp in case of "/ftp:xxx" file names.

2002-09-04  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-prefix-format)
	(tramp-postfix-host-format): New format strings.
	(tramp-prefix-regexp, tramp-method-regexp)
	(tramp-postfix-single-method-regexp)
	(tramp-postfix-multi-method-regexp)
	(tramp-postfix-multi-hop-regexp)
	(tramp-user-regexp, tramp-postfix-user-regexp)
	(tramp-host-regexp, tramp-postfix-host-regexp)
	(tramp-path-regexp): New atomar regular expressions. If
	corresponding format strings exist, derived from them.
	(tramp-file-name-structure)
	(tramp-multi-file-name-structure)
	(tramp-multi-file-name-hop-structure)
	(tramp-make-multi-tramp-file-format)
	(tramp-completion-mode)
	(tramp-completion-dissect-file-name)
	(tramp-parse-rhosts-group)
	(tramp-parse-shosts-group)
	(tramp-parse-hosts-group)
	(tramp-parse-passwd-group): Apply these expressions.
	(tramp-file-name-structure-unified)
	(tramp-file-name-structure-separate)
	(tramp-make-tramp-file-format-unified)
	(tramp-make-tramp-file-format-separate)
	(tramp-make-tramp-file-format)
	(tramp-make-tramp-file-user-nil-format-unified)
	(tramp-make-tramp-file-user-nil-format-separate)
	(tramp-make-tramp-file-user-nil-format)
	(tramp-multi-file-name-structure-unified)
	(tramp-multi-file-name-structure-separate)
	(tramp-multi-file-name-hop-structure-unified)
	(tramp-multi-file-name-hop-structure-separate)
	(tramp-make-multi-tramp-file-format-unified)
	(tramp-make-multi-tramp-file-format-separate): Removed.
	(tramp-make-tramp-file-name): Allow partial tramp file
	names. Generate tramp file format on-the-fly depending on
	parameters. Apply atomar format strings resp expressions.
	(tramp-get-completion-methods)
	(tramp-get-completion-user-host): Apply
	`tramp-make-tramp-file-name'.
	(tramp-parse-hosts-group): Take all host names and IP addresses
	into account.
	(tramp-bug): Remove `tramp-make-tramp-file-format'.

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-methods): Add `tramp-completion-function' for
	"su" and "sudo".
	(tramp-get-completion-telnet): Implement it.
	(tramp-parse-hosts)
	(tramp-parse-hosts-group)
	(tramp-get-completion-su)
	(tramp-parse-passwd)
	(tramp-parse-passwd-group): New functions.

2002-08-31  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): Check for `last-input-char'.
	(tramp-completion-file-name-handler-alist): Add handler
	for `file-exists-p.
	(tramp-completion-handle-file-exists-p): New function.
	(tramp-completion-handle-file-name-completion): Simplified.
	(tramp-completion-dissect-file-name): Regexp's reorganised.
	(tramp-completion-handle-file-name-all-completions): Call
	completion-function only if `user' or `host' is given.
	(tramp-get-completion-user-host): New function.
	(tramp-get-completion-rsh)
	(tramp-get-completion-ssh): Apply it.

2002-08-29  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-handler-alist): Add handler
	for `expand-file-name'.
	(tramp-completion-handle-expand-file-name): New function.

2002-08-26  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): New function.
	(tramp-completion-handle-file-name-directory)
	(tramp-completion-handle-file-name-all-completions): Apply it.
	(tramp-methods): Remove double definition of `ssh1-old' and
	`ssh2-old'.
	(tramp-point-at-eol): New defalias.
	(tramp-parse-rhosts-group)
	(tramp-parse-shosts-group):: Apply it.

2002-08-25  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-get-completion-methods)
	(tramp-get-completion-rsh)
	(tramp-get-completion-ssh): Add "[" for Xemacs.
	(tramp-completion-file-name-regexp-separate): Expression adapted.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-directory' and `file-name-nondirectory'.
	(tramp-completion-handle-file-name-directory)
	(tramp-completion-handle-file-name-nondirectory)
	(tramp-completion-run-real-handler): New functions.
	(tramp-completion-file-name-handler)
	(tramp-completion-handle-file-name-all-completions): Apply
	`tramp-completion-run-real-handler'.
	(tramp-parse-rhosts)
	(tramp-parse-shosts): Use `with-temp-buffer'. `result´ renamed to
	`res' (otherwise side effects in XEmacs).

2002-08-24  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-regexp)
	(tramp-completion-file-name-handler-alist)
	(tramp-flatten-list)
	(tramp-completion-dissect-file-name)
	(tramp-get-completion-rsh)
	(tramp-parse-rhosts)
	(tramp-parse-rhosts-group)
	(tramp-get-completion-ssh): Doc string tuned.
	(tramp-methods): Doc string and custom type extended for
	`tramp-completion-function'.
	(tramp-completion-function): Variable added. Is it really used?
	Other variables like `tramp-completion-function' aren't used.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-completion'.
	(tramp-completion-handle-file-name-completion): New function.

2002-08-20  Michael Albinus  <Michael.Albinus@alcatel.de>

	Branch "completion" created. Version named (temporarily)
	"2.0.completion".

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Dired): Mention method, user name and machine name
	completion.
----------------------------
revision 2.44
date: 2002-09-01 12:29:45 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.15 is released.
----------------------------
revision 2.43
date: 2002-08-24 04:12:38 -0700;  author: kai;  state: Exp;  lines: +4 -0;
2002-08-22  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* tramp.el (tramp-open-connection-su): Use user name "root" if no
	user name is given.

2002-08-22  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* tramp.texi (Usage): Mention type-ahead problem.
----------------------------
revision 2.42
date: 2002-08-22 08:12:23 -0700;  author: kai;  state: Exp;  lines: +8 -0;
* tramp.texi (Remote shell setup): Mention
`tramp-shell-prompt-pattern', `tramp-actions-before-shell', and
`tramp-multi-actions'.

* tramp.el (tramp-shell-prompt-pattern): New variable.
(tramp-actions-before-shell, tramp-multi-actions)
(tramp-find-shell, tramp-open-connection-multi)
(tramp-open-connection-setup-interactive-shell): Use it.
(tramp-open-connection-telnet, tramp-open-connection-rsh)
(tramp-open-connection-su): Mention `tramp-shell-prompt-pattern'
in the docstring.
(tramp-bug): Report `tramp-shell-prompt-pattern'.
(tramp-process-one-multi-action, tramp-process-one-action): Make
message clearer so people don't confuse it with Emacs asking them
a question if the regexp happens to end with "?".
(tramp-verbose): Change default value from 10 to 9.  Also change
some logging levels so that 10 is reserved for stuff which is
needed for debugging only, but 9 catches everything that people
might like to see in order to see that Tramp is actually working.

* Makefile (VERSION): Bump.
----------------------------
revision 2.41
date: 2002-08-21 08:00:59 -0700;  author: kai;  state: Exp;  lines: +4 -0;
* tramp.el (tramp-handle-write-region): Don't check to see if
remote end is awake after sending data to remote host: we want to
send "EOF" not "echo are you awake"...
(tramp-maybe-open-connection): Swap args for tramp-time-diff.

* Makefile (VERSION): Bump.
----------------------------
revision 2.40
date: 2002-08-07 07:51:36 -0700;  author: kai;  state: Exp;  lines: +4 -0;
branches:  2.40.2;
* tramp.el (tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Comment out
possibly obsolete "echo hello" commands.
(tramp-run-real-handler): If operation is
`ange-ftp-hook-function', use first arg as the real operation.
(tramp-check-ls-commands): Use / instead of \ as directory
separator.  (Relevant for XEmacs on Windows.)
(tramp-maybe-open-connection): Use tramp-wait-for-output when
waiting for the "are you awake" command.  Use a different string
for the "are you awake" command.
(tramp-send-command): New optional arg NEVEROPEN means to never
invoke tramp-maybe-open-connection.
(tramp-maybe-open-connection): Use it.

* Makefile (VERSION): Bump.
----------------------------
revision 2.39
date: 2002-08-05 07:53:48 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.11.

* tramp.el (tramp-invoke-ange-ftp): Avoid infloop by Ange-FTP
calling Tramp again: use tramp-run-real-handler to invoke
Ange-FTP.
(tramp-post-connection): Erase buffer after finding a remote
shell.
(tramp-find-file-exists-command): Try "test -e" and its variants
before "ls -d".

* Makefile (xemacs): Adjust to new directory names after moving
from SourceForge to Savannah.
(VERSION): Bump.
----------------------------
revision 2.38
date: 2002-08-04 07:12:56 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(Inline methods, Remote shell setup): Typos.  From
Adrian Aichner.
----------------------------
revision 2.37
date: 2002-08-03 02:25:07 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Version 2.0.6 released.
----------------------------
revision 2.36
date: 2002-07-29 01:22:47 -0700;  author: kai;  state: Exp;  lines: +8 -0;
* Makefile (prepversion): Edit tramp.texi for version number
instead of creating new file tramp-version.texi.

* tramp.texi: Define macro @trampver here instead of in
tramp-version.texi.  The value is edited from Makefile.

* Makefile (prepversion): Edit tramp.el instead of creating new
file tramp-version.el.
(clean): Don't remove tramp-version.el, the file doesn't exist
anymore.

* tramp.el (tramp-perl-encode, tramp-perl-decode): Very simple
implementations requiring the Perl module MIME::Base64.
(tramp-coding-commands): Use them.
(tramp-version): Move back here from tramp-version.el.  The
variable is automatically edited from the Makefile.
----------------------------
revision 2.35
date: 2002-07-26 10:12:36 -0700;  author: kai;  state: Exp;  lines: +9 -0;
* tramp.texi (Top): Add copying.
(Overview, Obtaining @tramp{}, Installation, Multi-hop Methods)
(Remote Programs, Multi-hop filename syntax)
(Frequently Asked Questions): Reformat.

* Makefile (clean): Delete more.

* tramp.el (tramp-coding-commands): New variable.
(tramp-find-inline-encoding): New function.
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file): Do expand-file-name on arg.

* Makefile: Bump version, preparing for next release.  (But that
release is not soon.)
----------------------------
revision 2.34
date: 2002-07-23 09:46:31 -0700;  author: youngs;  state: Exp;  lines: +11 -0;

2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (all): Export $VERSION to the subdirectories.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target to create tramp-version.el.
	(all): Use it.
	(clean): Add tramp-version.elc.

	* tramp.el (tramp-version): Removed, we create it on the fly from
	the Makefile.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target.  Creates
	tramp-version.texi.
	(all): Use it.
	(clean): Add tramp-version.texi.

	* tramp.texi: Include tramp-version.texi.
	(Top): Use macro defined in tramp-version.texi.
	(copying): Ditto.
----------------------------
revision 2.33
date: 2002-07-19 07:37:41 -0700;  author: kai;  state: Exp;  lines: +2 -0;
(tramp.html, tramp_ja.html): Specify output file.
----------------------------
revision 2.32
date: 2002-07-19 00:51:36 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(Inline methods): Document new-style "ssh -1"
methods and the renaming of "ssh1" methods.
----------------------------
revision 2.31
date: 2002-07-14 12:46:37 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* Makefile (tramp.info, tramp_ja.info): Create ../info directory
if necessary.

* tramp.texi: Use @dircategory, @copying.  Add lots of index
entries.  Use @samp or @kbd for stuff that users type on the
keyboard.  Use @item on its own line, except in tables.
Suggestion from Eli Zaretskii.
"@setfilename ../info/tramp" to be compatible with the Emacs
version.
----------------------------
revision 2.30
date: 2002-07-14 07:02:32 -0700;  author: kai;  state: Exp;  lines: +7 -0;
Use @dircategory, @copying.  Add lots of index
entries.  Use @samp or @kbd for stuff that users type on the
keyboard.  Use @item on its own line, except in tables.
Suggestion from Eli Zaretskii.
----------------------------
revision 2.29
date: 2002-07-13 11:00:56 -0700;  author: kai;  state: Exp;  lines: +2 -0;
Fix copyright years.
(Filename Syntax): Describe two syntaxes.
(Multi-hop filename syntax): Describe two syntaxes.
(Issues): Explain why there are two syntaxes.
----------------------------
revision 2.28
date: 2002-07-13 10:29:03 -0700;  author: kai;  state: Exp;  lines: +5 -0;
Fix copyright years.
(Filename Syntax): Describe two syntaxes.
----------------------------
revision 2.27
date: 2002-07-13 03:54:11 -0700;  author: kai;  state: Exp;  lines: +6 -0;
Remove date/version variables.
(Remote shell setup): Say that shell-prompt-pattern
must match the end of the buffer.
----------------------------
revision 2.26
date: 2002-06-26 06:34:44 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(Inline methods): Explain that method `smx' does not
eliminate all questions, just those from the shell.
----------------------------
revision 2.25
date: 2002-06-25 13:03:54 -0700;  author: kai;  state: Exp;  lines: +3 -0;
* tramp.texi (External transfer methods, Inline methods):
Document the "-p" hack for ssh.

* lisp/tramp.el (tramp-version): New version 2.0.1.
----------------------------
revision 2.24
date: 2002-06-25 11:01:21 -0700;  author: kai;  state: Exp;  lines: +4 -0;
2.0.1 release note.
----------------------------
revision 2.23
date: 2002-06-15 10:44:15 -0700;  author: kai;  state: Exp;  lines: +6 -0;
* Makefile (savannah): Don't echo the echo commands.

* tramp.texi (Obtaining @tramp{}): Use `@@' for a literal at sign.

* tramp.el (tramp-handle-file-truename): Lower numchase-limit
(max number of symlink traversals) from 30 to 20.
----------------------------
revision 2.22
date: 2002-06-14 07:47:16 -0700;  author: kai;  state: Exp;  lines: +3 -0;
Project has moved to Savannah.  Change all
references to SourceForge correspondingly.
----------------------------
revision 2.21
date: 2002-06-14 07:40:11 -0700;  author: kai;  state: Exp;  lines: +5 -0;
* Makefile (sourceforge): Removed target.
(savannah): New target for uploading web page to Savannah.

* Makefile (MANIFEST): Write it in the source dir, not in "..".
(tar): Create only one tarball, don't distinguish between
developer release and stable release.
(sourceforge): Remove target.  The project has moved to Savannah.
(savannah): New target for uploading tarball to Savannah.
Also make home page.
----------------------------
revision 2.20
date: 2002-06-10 08:23:02 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(External transfer methods): Document the new `fcp'
method.
----------------------------
revision 2.19
date: 2002-06-07 02:36:03 -0700;  author: kai;  state: Exp;  lines: +5 -0;
Remove prev/next/up items from @node commands.
"makeinfo" adds them.
----------------------------
revision 2.18
date: 2002-06-05 01:57:08 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Sync with latest SourceForge changes.
----------------------------
revision 2.17
date: 2002-05-28 04:01:36 -0700;  author: kaig;  state: Exp;  lines: +4 -0;
(Windows setup hints): New section.  Still too short.
----------------------------
revision 2.16
date: 2002-04-22 11:54:54 -0700;  author: kaig;  state: Exp;  lines: +13 -0;
2002-04-22  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* tramp.texi (Top, Connection types, Dired, Back-end Versions,
	Path deconstruction): It's "its", not "it's".  Thanks to Ted
	Stern for catching this.

2002-04-19  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>
	From Harry Putnam <reader@newsguy.com>.  Awaiting copyright
	assignment.

	* tramp.texi (Installation): Give more details on byte-compiling
	the Lisp files and creating and installing the info file.
----------------------------
revision 2.15
date: 2002-04-14 08:52:39 -0700;  author: kaig;  state: Exp;  lines: +5 -0;
* tramp.texi (External transfer methods): Document the `pscp'
method.

* tramp.el (tramp-methods): New method "pscp".  Suggestion from
lawrence mitchell.
----------------------------
revision 2.14
date: 2002-04-14 05:30:35 -0700;  author: kaig;  state: Exp;  lines: +5 -0;
* tramp.texi (Inline methods): Document the `km', `plinku' and
`plinkm' methods.

* tramp.el (file-expand-wildcards): Advise it even on Emacs 21.
(tramp-methods): New methods "plinku" and "plinkm".
"plinku" was suggested by Adam Przepiórkowski.
----------------------------
revision 2.13
date: 2002-01-21 02:50:30 -0800;  author: kaig;  state: Exp;  lines: +5 -0;
Sync with tramp.texi rev 2.10.  From Yoichi NAKAYAMA <yoichi@FreeBSD.org>.
----------------------------
revision 2.12
date: 2002-01-20 08:39:40 -0800;  author: kaig;  state: Exp;  lines: +7 -0;
* tramp.texi (External transfer methods): Document double use of
`-t' for the `scpx' method.  Explain why it is useful for Windows
users.
(Inline methods): Ditto for the `smx' method.

* tramp.el: Remove some todo items which are done.
(tramp-methods): Use doubled `-t -t' for `scpx' and `smx'
methods.
----------------------------
revision 2.11
date: 2001-12-11 09:43:00 -0800;  author: kaig;  state: Exp;  lines: +4 -0;
(Connection types): Double-space sentence end.
----------------------------
revision 2.10
date: 2001-09-20 06:29:07 -0700;  author: kaig;  state: Exp;  lines: +4 -0;
branches:  2.10.2;
* tramp.texi (Module): New filenames.  Moved to SourceForge.

* tramp.el (tramp-bug-report-address): Update to reflect move to
SourceForge.
----------------------------
revision 2.9
date: 2001-09-07 06:50:27 -0700;  author: kaig;  state: Exp;  lines: +6 -0;
* tramp.texi (Module): Repository has moved to SF.

* Makefile (Module): Install things on SourceForge.

* Makefile (Module): Rule for submitting to SourceForge.
----------------------------
revision 2.8
date: 2001-08-05 13:39:51 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
* tramp.el: Default file name format changed!  File names with
default method have changed from /r:user@host:/path/to/file to
/./user@host:/path/to/file.  Files with explicitly specified
method have changed from /r@meth:user@host:/path/to/file to
/./@meth:user@host:/path/to/file.  (Note one more colon for method
spec!)

* tramp.texi: New default file name format.
* tramp_ja.texi: Ditto.
----------------------------
revision 2.7
date: 2001-07-13 06:04:16 -0700;  author: grossjoh;  state: Exp;  lines: +1 -0;
(Obtaining @tramp{}): Host name change.
----------------------------
revision 2.6
date: 2001-07-13 02:34:10 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
(Multi-hop Methods): Say how to customize multi-hop
connection methods.  Provide example.
----------------------------
revision 2.5
date: 2001-03-30 01:53:26 -0800;  author: grossjoh;  state: Exp;  lines: +7 -0;
(External transfer methods): Mention possibility of
providing password on command line for scp.
(Frequently Asked Questions): Mention Tom Roche's nifty Web page
with instructions for NT.
----------------------------
revision 2.4
date: 2001-03-26 00:25:08 -0800;  author: grossjoh;  state: Exp;  lines: +6 -0;
(Configuration): Syntax error.  Reported by Tom
Roche.
(Frequently Asked Questions): Dito.
----------------------------
revision 2.3
date: 2001-03-22 15:46:36 -0800;  author: yyamano;  state: Exp;  lines: +1 -1;
Fix typo.
----------------------------
revision 2.2
date: 2001-03-22 14:28:24 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(Frequently Asked Questions): ksh init code to turn
off history saving.  From Ted Stern and Tom Roche.
----------------------------
revision 2.1
date: 2001-03-01 06:19:12 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(Frequently Asked Questions): Pointer to Joe Stoy's
documentation for NT.
----------------------------
revision 2.0
date: 2001-02-28 02:39:33 -0800;  author: grossjoh;  state: Exp;  lines: +0 -0;
branches:  2.0.2;
Going stable?
----------------------------
revision 1.8
date: 2001-02-24 05:00:14 -0800;  author: grossjoh;  state: Exp;  lines: +6 -0;
(Remote shell setup): New section.  Explain that
people have to take care that their remote shell is setup
correctly, and why.
----------------------------
revision 1.7
date: 2001-01-03 21:48:00 -0800;  author: yyamano;  state: Exp;  lines: +4 -0;
Sync with tramp.texi rev 1.38.
----------------------------
revision 1.6
date: 2001-01-03 15:51:19 -0800;  author: grossjoh;  state: Exp;  lines: +4 -0;
(Top): Added detailed node listing.
----------------------------
revision 1.5
date: 2000-10-01 05:53:29 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
V. Balaji: (Frequently Asked Questions): Notification when
transfers are complete.
----------------------------
revision 1.4
date: 2000-09-22 06:05:25 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
(Installation): Better URL for XEmacs package
installation instructions.
----------------------------
revision 1.3
date: 2000-09-21 06:42:45 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
(Installation): Add URL for XEmacs package
installation instructions.
----------------------------
revision 1.2
date: 2000-09-11 15:29:19 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
(Default Method): Add example.  Thanks to Henrik Holm
for suggesting this.
----------------------------
revision 1.1
date: 2000-07-06 06:29:10 -0700;  author: grossjoh;  state: Exp;
(Top): Make URLs clickable.
----------------------------
revision 2.0.2.4
date: 2001-07-16 02:54:58 -0700;  author: grossjoh;  state: Exp;  lines: +6 -0;
Merge with head as of 2001-07-15.
----------------------------
revision 2.0.2.3
date: 2001-06-03 05:13:18 -0700;  author: grossjoh;  state: Exp;  lines: +14 -1;
Sync with head.
----------------------------
revision 2.0.2.2
date: 2001-03-28 13:44:30 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(tramp-handle-file-directory-p): Use `test -d', not
`cd', to find out if it's a directory.
----------------------------
revision 2.0.2.1
date: 2001-03-01 06:16:15 -0800;  author: grossjoh;  state: Exp;  lines: +5 -0;
(Frequently Asked Questions): Pointer to Joe Stoy's
documentation for NT.
----------------------------
revision 2.10.2.1
date: 2001-12-11 19:35:34 -0800;  author: youngs;  state: Exp;  lines: +4 -0;
Sync with main branch
----------------------------
revision 2.40.2.1
date: 2002-09-01 12:17:59 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-methods): Add `tramp-completion-function' for
	"su" and "sudo".
	(tramp-get-completion-telnet): Implement it.
	(tramp-parse-hosts),
	(tramp-parse-hosts-group),
	(tramp-get-completion-su),
	(tramp-parse-passwd),
	(tramp-parse-passwd-group): New functions.
	* tramp.texi (Dired): Mention method, user name and machine name
	completion.

2002-08-31  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): Check for `last-input-char'.
	(tramp-completion-file-name-handler-alist): Add handler
	for `file-exists-p.
	(tramp-completion-handle-file-exists-p): New function.
	(tramp-completion-handle-file-name-completion): Simplified.
	(tramp-completion-dissect-file-name): Regexp's reorganised.
	(tramp-completion-handle-file-name-all-completions): Call
	completion-function only if `user' or `host' is given.
	(tramp-get-completion-user-host): New function.
	(tramp-get-completion-rsh),
	(tramp-get-completion-ssh): Apply it.

2002-08-29  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-handler-alist): Add handler
	for `expand-file-name'.
	(tramp-completion-handle-expand-file-name): New function.
----------------------------
revision 2.130.2.44
date: 2008-02-02 02:36:49 -0800;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: ED8Mi15ISvlenOPs;
*** empty log message ***
----------------------------
revision 2.130.2.43
date: 2007-07-25 12:37:31 -0700;  author: albinus;  state: Exp;  lines: +4 -0;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.130.2.42
date: 2007-07-14 02:37:22 -0700;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: bh2j4LByNNWgzIps;

* tramp.texi: Move @setfilename ../info/tramp up, outside the
header section.  Reported by <poti@potis.org>.
----------------------------
revision 2.130.2.41
date: 2007-05-28 01:49:42 -0700;  author: albinus;  state: Exp;  lines: +12 -0;  commitid: 3AYYXUpQ30DuOFjs;

Version 2.0.56 released.
----------------------------
revision 2.130.2.40
date: 2007-02-21 13:23:08 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* tramp.texi (Frequently Asked Questions): Improve ~/.zshrc
settings.  Reported by Ted Zlatanov <tzz@lifelogs.com>.
----------------------------
revision 2.130.2.39
date: 2006-12-30 07:15:39 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.0.55 released.
----------------------------
revision 2.130.2.38
date: 2006-12-18 23:09:49 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp.el (tramp-methods): Introduce new method `scpc'.  Remove
"ControlMaster" option from the other `scp*' methods.
(tramp-default-method): Check for ssh-agent before setting to
`scp'.
(top): Check for `font-lock-add-keywords' before calling; it
doesn't exist under XEmacs.

* texi/tramp.texi (External transfer methods): Describe new method
`scpc'.
----------------------------
revision 2.130.2.37
date: 2006-11-07 03:06:09 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp.el (tramp-default-method): scp is the default method.

* texi/tramp.texi (Configuration): scp is the default method.
(Default Method): Use ssh as example for another method.
----------------------------
revision 2.130.2.36
date: 2006-10-18 21:59:29 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* texi/tramp.texi (Frequently Asked Questions): Remove questions marked with
"???".  There have been no complaints for years, so the information
must be appropriate.
----------------------------
revision 2.130.2.35
date: 2006-08-28 22:21:43 -0700;  author: albinus;  state: Exp;  lines: +7 -0;

Version 2.0.54 released.
----------------------------
revision 2.130.2.34
date: 2006-06-05 13:04:41 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* texi/tramp.texi: Fix various typos.
----------------------------
revision 2.130.2.33
date: 2006-05-29 13:32:38 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* texi/tramp.texi (Frequently Asked Questions): Disable zsh zle.
----------------------------
revision 2.130.2.32
date: 2006-05-08 22:18:37 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

* texi/tramp.texi (Filename completion): Improve wording.
----------------------------
revision 2.130.2.31
date: 2006-05-06 15:08:05 -0700;  author: albinus;  state: Exp;  lines: +6 -0;

* configure.ac: Bump version (to 2.0.54-pre).  Update merge
version to 2.0.53.

* lisp/tramp.el (tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): That's a defsubst now.  Code
from `tramp-repair-jka-compr' moved here.  Register
`tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-repair-jka-compr): Remove.
(tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name): Remove them.
(tramp-completion-handle-file-name-all-completions):
Delete directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-completion-file-name-handler-alist): Delete
expand-file-name and other operations that can cause spurious loading.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
----------------------------
revision 2.130.2.30
date: 2006-04-17 05:07:58 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.0.53 released.
----------------------------
revision 2.130.2.29
date: 2006-03-14 13:15:57 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

DESTDIR support
----------------------------
revision 2.130.2.28
date: 2006-01-22 10:38:32 -0800;  author: albinus;  state: Exp;  lines: +7 -0;


Version 2.0.52 released.

* configure.ac: Bump version.

* lisp/tramp.el, lisp/tramp-ftp.el, lisp/tramp-util.el,
lisp/tramp-vc.el: Add code for unloading Tramp.  See comment before
`tramp-unload-tramp' for checklist.

* lisp/tramp.el (tramp-unload-file-name-handler-alist)
(tramp-unload-tramp): New defuns.
(tramp-advice-PC-expand-many-files): New defadvice.
(tramp-save-PC-expand-many-files, tramp-setup-complete) Defuns
removed.

* lisp/tramp-ftp.el (tramp-ftp-enable-ange-ftp): New defun.

* lisp/tramp-util.el (top): Apply `ignore' instead of `identity' for
byte-compiler pacification.

* texi/tramp.texi (Frequently Asked Questions): Remove Ange-FTP item.
Add Tramp disabling item.
----------------------------
revision 2.130.2.27
date: 2005-12-30 07:48:55 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* texi/tramp.texi (various): Apply "ftp" as method for the download
URL.
(Bug Reports): Refer to FAQ for common problems.
(Frequently Asked Questions): New item for common connection
problems.
----------------------------
revision 2.130.2.26
date: 2005-12-02 12:33:27 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.
----------------------------
revision 2.130.2.25
date: 2005-10-08 06:55:37 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.0.51 released.
----------------------------
revision 2.130.2.24
date: 2005-09-18 05:01:00 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

Update all files to specify GFDL version 1.2.
----------------------------
revision 2.130.2.23
date: 2005-08-07 08:06:53 -0700;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.0.50 released.

* configure.ac: Bump version.

* lisp/tramp.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-handle-set-visited-file-modtime)
(tramp-handle-insert-file-contents)
(tramp-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-accept-process-output): New defun.
(tramp-process-one-action, tramp-process-one-multi-action)
(tramp-wait-for-regexp, tramp-wait-for-output)
(tramp-discard-garbage-erase-buffer): Call it.  Reported by David
Howells <dhowells@redhat.com>.
(clear-visited-file-modtime): Defadvice removed.  The check for
unset buffer's modtime does not need to be based on
`tramp-buffer-file-attributes'.  Suggested by RMS.

* lisp/tramp-smb.el: Remove defvar of `last-coding-system-used' in the
XEmacs case; not necessary anymore.
(tramp-smb-handle-write-region): No special handling for
`last-coding-system-used, because this is done in
`tramp-accept-process-output' now.
(tramp-smb-wait-for-output): Call `tramp-accept-process-output'.
----------------------------
revision 2.130.2.22
date: 2005-07-10 14:36:49 -0700;  author: albinus;  state: Exp;  lines: +18 -0;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.130.2.21
date: 2005-06-26 12:23:35 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fifth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in:
----------------------------
revision 2.130.2.20
date: 2005-05-14 08:21:27 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


Version 2.0.49 released.

* configure.ac: Bump version.
----------------------------
revision 2.130.2.19
date: 2005-03-20 11:41:42 -0800;  author: albinus;  state: Exp;  lines: +4 -0;
*** empty log message ***
----------------------------
revision 2.130.2.18
date: 2005-02-20 08:09:24 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set always
permissions, because there might be an old auto-saved file
belonging to another original file.  This could be a security
threat.

* lisp/tramp-smb.el (tramp-smb-open-connection): `executable-find'
doesn't exist in older Emacsen.  To be checked before applied.

* lisp/trampver.texi.in: Replace "Emacs" by "GNU Emacs".

* lisp/tramp.texi: Replace "Emacs" by "GNU Emacs".
(Default Method): Offer shortened syntax for "su" and "sudo"
methods.
----------------------------
revision 2.130.2.17
date: 2005-02-13 09:58:14 -0800;  author: albinus;  state: Exp;  lines: +20 -15;

* texi/tramp.texi: Replace "Linux" by "GNU/Linux".  Suggested by
Richard M. Stallman <rms@gnu.org>
----------------------------
revision 2.130.2.16
date: 2005-02-12 03:34:31 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.130.2.15
date: 2005-02-02 14:08:21 -0800;  author: albinus;  state: Exp;  lines: +5 -1;

* configure.ac: Bump version (to 2.0.48-pre).  Update merge
version to 2.0.47.  Change bug report address to
[tramp-devel@gnu.org].

* lisp/tramp.el (tramp-file-name-for-operation) Use 'shell-command but
'shell.  Cut'n'waste error.  Reported by Vincent Bernat
<bernat@free.fr>.

* texi/tramp.texi (all): Change all addresses to .gnu.org.
----------------------------
revision 2.130.2.14
date: 2005-01-16 03:36:05 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

Version 2.0.47 released.
----------------------------
revision 2.130.2.13
date: 2005-01-09 11:22:49 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* lisp/tramp-util.el (tramp-remap-command): New defun.
(top): Remove `define-key' calls.  They are replaced by respective
`tramp-remap-command' and `add-menu-button' calls.  Add
`tramp-minor-mode' to `dired-mode-hook'.
(tramp-compile, tramp-recompile): Call the commands
asynchronously.  Add `compilation-mode' to *Compilation* buffer.

* lisp/tramp.texi: (Compilation): Make reference to (X)Emacs manual
flavor specific.  Remove mentioned restrictions for Emacs < 21.4
and for XEmacs.
----------------------------
revision 2.130.2.12
date: 2005-01-05 13:32:35 -0800;  author: albinus;  state: Exp;  lines: +4 -0;

* lisp/tramp-util.el: Fix copyright years.  Adapt author address.
(tramp-minor-mode): Mode must toggle.

* texi/tramp.texi: Fix copyright years.
----------------------------
revision 2.130.2.11
date: 2005-01-04 15:25:04 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp-util.el (tramp-compile, tramp-recompile): Enable
`tramp-minor-mode' in buffer "*Compilation*".

* texi/tramp.texi (Compilation): Give a note that remote compilation is
performed synchronously only, for the time being.
----------------------------
revision 2.130.2.10
date: 2004-12-29 13:27:49 -0800;  author: albinus;  state: Exp;  lines: +5 -0;

* lisp/tramp-util.el (tramp-minor-mode): New minor mode.  Add it to
`find-file-hooks'.
(tramp-minor-mode-map): Respective map.  Add remapping for
`compile' and `recompile'.
(tramp-recompile): New defun.

* texi/tramp.texi (Compilation): New section, describing compilation of
remote files.
----------------------------
revision 2.130.2.9
date: 2004-12-16 06:11:08 -0800;  author: albinus;  state: Exp;  lines: +4 -0;


Version 2.0.46 released.
----------------------------
revision 2.130.2.8
date: 2004-10-17 09:03:18 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.130.2.7
date: 2004-10-14 14:13:21 -0700;  author: albinus;  state: Exp;  lines: +6 -0;


* configure.ac: Bump version (to 2.0.46-pre).  Update merge
version to 2.0.45.

* texi/trampver.texi.in (top): Set default value of `emacs' or `xemacs'
derived from @EMACS_INFO@.  This simplifies synchronizing with
XEmacs CVS.
----------------------------
revision 2.130.2.6
date: 2004-10-12 13:37:18 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


Version 2.0.45 released.

* configure.ac: Bump version.

* lisp/tramp-smb.el
(tramp-smb-advice-PC-do-completion): Don't activate
advice during definition.  This is done later on, depending on
test result of `substitute-in-file-name'.  Suggested by Stefan
Monnier <monnier@iro.umontreal.ca>.
----------------------------
revision 2.130.2.5
date: 2004-10-10 09:54:27 -0700;  author: albinus;  state: Exp;  lines: +9 -1;


* Makefile.in (savannah): Don't call make for texi.  Only the
trunk should place its files there.

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.130.2.4
date: 2004-08-10 13:25:06 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


Version 2.0.44 released.

* configure.ac: Bump version.
----------------------------
revision 2.130.2.3
date: 2004-07-17 10:19:56 -0700;  author: kai;  state: Exp;  lines: +7 -0;
Missed to add a release changelog entry.

* Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.

* configure.ac: Bump version (to 2.0.44-pre).  Update merge
version to 2.0.43.
----------------------------
revision 2.130.2.2
date: 2004-06-26 08:08:44 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Release 2.0.42.
----------------------------
revision 2.130.2.1
date: 2004-05-08 03:24:19 -0700;  author: kai;  state: Exp;  lines: +6 -2;
Change email address kgrossjo@eu.uu.net to kai@emptydomain.de.
=============================================================================

RCS file: /sources/tramp/tramp/texi/Attic/Makefile,v
Working file: texi/Makefile
head: 2.14
branch:
locks: strict
access list:
symbolic names:
	V-2-0-30: 2.12
	V-2-0-29: 2.12
	V-2-0-28: 2.12
	V-2-0-27: 2.12
	V-2-0-26: 2.12
	V-2-0-25: 2.12
	V-2-0-24: 2.12
	V-2-0-23: 2.11
	V-2-0-22: 2.11
	V-2-0-21: 2.11
	V-2-0-20: 2.11
	V-2-0-19: 2.11
	V-2-0-18: 2.11
	V-2-0-17: 2.11
	V-2-0-16: 2.10
	V-2-0-15: 2.10
	V-2-0-14: 2.10
	V-2-0-13: 2.10
	completion: 2.10.0.2
	V-2-0-12: 2.10
	V-2-0-11: 2.10
	V-2-0-10: 2.10
	V-2-0-9: 2.10
	V-2-0-8: 2.10
	V-2-0-7: 2.10
	V-2-0-6: 2.10
	V-2-0-5: 2.10
	V-2-0-4: 2.10
	V-2-0-3: 2.6
	V-2-0-1: 2.4
	EMACS-21: 2.6
	V-2-0-0: 2.4
	tramp-xemacs-pkg: 2.1.0.2
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 27;	selected revisions: 27
description:
----------------------------
revision 2.14
date: 2003-03-22 09:00:43 -0800;  author: albinus;  state: dead;  lines: +0 -0;
*** empty log message ***
----------------------------
revision 2.13
date: 2003-03-05 14:33:17 -0800;  author: albinus;  state: Exp;  lines: +8 -3;

* Makefile (tramp.html): Generate both `tramp-emacs.html' and
`tramp-xemacs.html'.  Link `tramp.html' to
`tramp-emacs.html'. Since a web page is remote, a user must have
the choice to switch between the pages.
(tramp-%.html): New target for generating `tramp-emacs.html' and
`tramp-xemacs.html'.
(install-html): Copy `*.html'.
(savannah): More or less the same.

* tramp.texi (Top): Rename "Emacs" to "GNU Emacs" in order to have
better differentiation to "XEmacs".  `emacs-other-name',
`emacs-other-dir' and `emacs-other-file-name' are new macros in
order to point to the other Emacs flavor where appropriate.  In
info case, point to node `Installation' in order to explain how to
generate the other way.  In html case, make a link to the other
html file.
(Installation): Short explanation the option for the other Emacs
flavor.
----------------------------
revision 2.12
date: 2002-09-28 05:08:52 -0700;  author: kai;  state: Exp;  lines: +5 -5;
* Makefile (tramp): Renamed from tramp.info.

* Makefile (cvs-update): New convenience target.
(clean): Remove info subdir, too.
----------------------------
revision 2.11
date: 2002-09-11 12:25:36 -0700;  author: albinus;  state: Exp;  lines: +5 -1;

* tramp.el (tramp-completion-handle-file-name-all-completions):
	Define `result1'.
	(tramp-parse-hosts-group): Discard IPv6 entries.

* tramp.texi (Copying): New node. Contains the disclaimer
	part. Two occurences of this text removed.
	(Obtaining @tramp{}): Harmonize example. Use "~/emacs" but "~/lisp".
	(Top): Introduce new flags `emacs'/`xemacs', `emacs-name',
	´emacs-dir', `ftp-package-name', `tramp-prefix',
	`tramp-prefix-single-hop', `tramp-postfix',
	`tramp-postfix-single-hop', `tramp-postfix-multi-hop'.
	(All): Use them. Fix typos where seen.
----------------------------
revision 2.10
date: 2002-07-29 02:08:06 -0700;  author: kai;  state: Exp;  lines: +1 -1;
clean: texi/tramp-version.texi doesn't exist anymore.
----------------------------
revision 2.9
date: 2002-07-29 01:22:47 -0700;  author: kai;  state: Exp;  lines: +7 -3;
* Makefile (prepversion): Edit tramp.texi for version number
instead of creating new file tramp-version.texi.

* tramp.texi: Define macro @trampver here instead of in
tramp-version.texi.  The value is edited from Makefile.

* Makefile (prepversion): Edit tramp.el instead of creating new
file tramp-version.el.
(clean): Don't remove tramp-version.el, the file doesn't exist
anymore.

* tramp.el (tramp-perl-encode, tramp-perl-decode): Very simple
implementations requiring the Perl module MIME::Base64.
(tramp-coding-commands): Use them.
(tramp-version): Move back here from tramp-version.el.  The
variable is automatically edited from the Makefile.
----------------------------
revision 2.8
date: 2002-07-26 10:12:36 -0700;  author: kai;  state: Exp;  lines: +1 -0;
* tramp.texi (Top): Add copying.
(Overview, Obtaining @tramp{}, Installation, Multi-hop Methods)
(Remote Programs, Multi-hop filename syntax)
(Frequently Asked Questions): Reformat.

* Makefile (clean): Delete more.

* tramp.el (tramp-coding-commands): New variable.
(tramp-find-inline-encoding): New function.
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file): Do expand-file-name on arg.

* Makefile: Bump version, preparing for next release.  (But that
release is not soon.)
----------------------------
revision 2.7
date: 2002-07-23 09:46:31 -0700;  author: youngs;  state: Exp;  lines: +8 -2;

2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (all): Export $VERSION to the subdirectories.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target to create tramp-version.el.
	(all): Use it.
	(clean): Add tramp-version.elc.

	* tramp.el (tramp-version): Removed, we create it on the fly from
	the Makefile.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target.  Creates
	tramp-version.texi.
	(all): Use it.
	(clean): Add tramp-version.texi.

	* tramp.texi: Include tramp-version.texi.
	(Top): Use macro defined in tramp-version.texi.
	(copying): Ditto.
----------------------------
revision 2.6
date: 2002-07-19 07:37:41 -0700;  author: kai;  state: Exp;  lines: +2 -2;
(tramp.html, tramp_ja.html): Specify output file.
----------------------------
revision 2.5
date: 2002-07-14 12:46:37 -0700;  author: kai;  state: Exp;  lines: +2 -0;
* Makefile (tramp.info, tramp_ja.info): Create ../info directory
if necessary.

* tramp.texi: Use @dircategory, @copying.  Add lots of index
entries.  Use @samp or @kbd for stuff that users type on the
keyboard.  Use @item on its own line, except in tables.
Suggestion from Eli Zaretskii.
"@setfilename ../info/tramp" to be compatible with the Emacs
version.
----------------------------
revision 2.4
date: 2002-06-15 10:44:15 -0700;  author: kai;  state: Exp;  lines: +3 -3;
* Makefile (savannah): Don't echo the echo commands.

* tramp.texi (Obtaining @tramp{}): Use `@@' for a literal at sign.

* tramp.el (tramp-handle-file-truename): Lower numchase-limit
(max number of symlink traversals) from 30 to 20.
----------------------------
revision 2.3
date: 2002-06-14 07:50:10 -0700;  author: kai;  state: Exp;  lines: +4 -1;
Prettier output.
----------------------------
revision 2.2
date: 2002-06-14 07:40:12 -0700;  author: kai;  state: Exp;  lines: +4 -2;
* Makefile (sourceforge): Removed target.
(savannah): New target for uploading web page to Savannah.

* Makefile (MANIFEST): Write it in the source dir, not in "..".
(tar): Create only one tarball, don't distinguish between
developer release and stable release.
(sourceforge): Remove target.  The project has moved to Savannah.
(savannah): New target for uploading tarball to Savannah.
Also make home page.
----------------------------
revision 2.1
date: 2001-09-07 06:50:27 -0700;  author: kaig;  state: Exp;  lines: +5 -2;
* tramp.texi (Module): Repository has moved to SF.

* Makefile (Module): Install things on SourceForge.

* Makefile (Module): Rule for submitting to SourceForge.
----------------------------
revision 2.0
date: 2001-02-28 02:39:33 -0800;  author: grossjoh;  state: Exp;  lines: +0 -0;
Going stable?
----------------------------
revision 1.12
date: 2000-06-08 04:47:11 -0700;  author: grossjoh;  state: Exp;  lines: +2 -0;
Add non-working `install-info' calls (commented out).
----------------------------
revision 1.11
date: 2000-05-31 15:24:26 -0700;  author: grossjoh;  state: Exp;  lines: +16 -16;
Leftovers from name change.
----------------------------
revision 1.10
date: 2000-05-30 09:54:43 -0700;  author: grossjoh;  state: Exp;  lines: +2 -2;
Publish Yuji's Japanese translation on the Web.
----------------------------
revision 1.9
date: 2000-05-28 10:08:05 -0700;  author: yyamano;  state: Exp;  lines: +7 -0;
Add two targets for rcp_ja.texi.

XXX - all
XXX     English people don't like that unused Japanese manual is
XXX     automatically generated?
XXX - site-info_ja, intall-html_ja
XXX     Translation is not finished now. I'll make it in the near future. :-)
----------------------------
revision 1.8
date: 2000-05-27 01:20:37 -0700;  author: yyamano;  state: Exp;  lines: +1 -1;
Remove *.html files when make clean.
----------------------------
revision 1.7
date: 2000-05-25 08:18:58 -0700;  author: grossjoh;  state: Exp;  lines: +4 -1;
*** empty log message ***
----------------------------
revision 1.6
date: 2000-05-24 04:04:10 -0700;  author: grossjoh;  state: Exp;  lines: +3 -0;
Create HTML version of rcp manual.
----------------------------
revision 1.5
date: 2000-05-06 03:44:05 -0700;  author: grossjoh;  state: Exp;  lines: +3 -1;
Little bug fixes.
----------------------------
revision 1.4
date: 2000-05-05 15:29:21 -0700;  author: grossjoh;  state: Exp;  lines: +1 -1;
Use $(MAKEINFO), not hard-coded `makeinfo'.
----------------------------
revision 1.3
date: 2000-04-04 07:41:06 -0700;  author: grossjoh;  state: Exp;  lines: +5 -0;
*** empty log message ***
----------------------------
revision 1.2
date: 2000-01-28 15:53:02 -0800;  author: grossjoh;  state: Exp;  lines: +1 -1;
Ted Stern <stern@tera.com>: Suggestions for Makefile; missing subdir
Makefiles
----------------------------
revision 1.1
date: 2000-01-28 15:44:47 -0800;  author: grossjoh;  state: Exp;
*** empty log message ***
=============================================================================

RCS file: /sources/tramp/tramp/texi/Makefile.in,v
Working file: texi/Makefile.in
head: 2.33
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.32
	branch-2-1-stable: 2.31.0.2
	branchpoint-2-1-stable: 2.31
	V-2-1-19: 2.31
	V-2-1-18: 2.31
	V-2-1-17: 2.31
	V-2-1-16: 2.30
	V-2-1-15: 2.29
	V-2-1-14: 2.29
	V-2-1-13: 2.27
	V-2-0-57: 2.11.2.8
	V-2-1-12: 2.25
	V-2-1-11: 2.25
	V-2-1-10: 2.23
	V-2-0-56: 2.11.2.7
	V-2-1-9: 2.19
	V-2-1-8: 2.18
	V-2-0-55: 2.11.2.6
	V-2-1-7: 2.18
	V-2-0-54: 2.11.2.6
	V-2-1-6: 2.18
	V-2-0-53: 2.11.2.6
	V-2-0-52: 2.11.2.5
	V-2-1-5: 2.17
	V-2-1-4: 2.16
	V-2-0-51: 2.11.2.4
	V-2-0-50: 2.11.2.4
	V-2-0-49: 2.11.2.2
	V-2-0-48: 2.11.2.2
	V-2-1-3: 2.12
	V-2-0-47: 2.11.2.2
	V-2-0-46: 2.11.2.2
	V-2-0-45: 2.11.2.2
	V-2-1-2: 2.11
	V-2-0-44: 2.11.2.1
	V-2-1-1: 2.11
	V-2-0-43: 2.11
	V-2-0-42: 2.11
	V-2-0-41: 2.11
	V-2-1-0: 2.11
	branch-2-0-stable: 2.11.0.2
	branchpoint-2-0-stable: 2.11
	V-2-0-40: 2.11
	V-2-0-39: 2.5
	V-2-0-38: 2.5
	V-2-0-37: 2.5
	V-2-0-36: 2.4
	V-2-0-35: 2.3
	V-2-0-34: 2.3
	V-2-0-33: 2.2
	V-2-0-32: 2.2
keyword substitution: kv
total revisions: 41;	selected revisions: 41
description:
----------------------------
revision 2.33
date: 2011-01-26 01:43:34 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.32
date: 2010-09-02 02:37:55 -0700;  author: albinus;  state: Exp;  lines: +11 -24;  commitid: QmwMPkdzQ02BJZMu;
* Makefile.in: Remove japanese manual creation.

* tramp.texi:
* trampinst.texi: Remove Japanese manual.

* trampver.texi.in: Remove japanesemanual.
----------------------------
revision 2.31
date: 2009-09-24 01:52:17 -0700;  author: albinus;  state: Exp;  lines: +13 -12;  commitid: lRLuQeLKzHhDvU4u;
* Makefile.in: Add emacsimap handling.
----------------------------
revision 2.30
date: 2009-02-22 09:25:48 -0800;  author: albinus;  state: Exp;  lines: +11 -7;  commitid: 2bzNT6XoUmyhesDt;
* Makefile.in: Add emacsgvfs handling.
----------------------------
revision 2.29
date: 2008-05-13 14:20:00 -0700;  author: albinus;  state: Exp;  lines: +4 -5;  commitid: 4cRHKMylP5rBGQ2t;
Switch to recommended form of GPLv3 permissions notice.
----------------------------
revision 2.28
date: 2008-04-06 21:36:45 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: ZlH4a1euF4Dai8Ys;
* Makefile.in ($(localinfodir)/dir, $(DESTDIR)$(infodir)/dir):
Depend on $(INFO_FILES), otherwise parallel make may fail.
----------------------------
revision 2.27
date: 2008-03-21 10:28:51 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: XXNX6zMnbsBV61Ws;
Fix up encoding.
----------------------------
revision 2.26
date: 2008-01-12 03:04:24 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.25
date: 2007-09-28 08:52:03 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: mqGGNlxkmWwZawzs;

* aclocal.m4 (AC_PATH_LISPDIR): Handle `datarootdir'.

* configure.ac (top): Handle `datarootdir'.

* contrib/Makefile.in (top): Handle `datarootdir'.

* lisp/tramp.el (with-file-property, with-connection-property):
Highlight as keyword.
(tramp-rfn-eshadow-setup-minibuffer)
(tramp-rfn-eshadow-update-overlay, tramp-handle-set-file-times)
(tramp-set-file-uid-gid, tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-directly)
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-shell-command, tramp-get-debug-buffer)
(tramp-send-command-and-read, tramp-equal-remote)
(tramp-get-local-gid): Pacify byte-compiler.
(tramp-handle-file-name-directory): Result shall not be expanded.
(tramp-find-foreign-file-name-handler): Rewrite.
(tramp-dissect-file-name): Add optional parameter NODEFAULT.

* lisp/tramp-cache.el (tramp-cache-print): Pacify byte-compiler.

* lisp/tramp-fish.el (tramp-fish-handle-expand-file-name): Apply
`tramp-completion-mode-p'.
(tramp-fish-handle-set-file-times)
(tramp-fish-handle-executable-find)
(tramp-fish-handle-process-file, tramp-fish-get-file-entries)
(tramp-fish-retrieve-data): Pacify byte-compiler.

* lisp/tramp-gw.el (tramp-gw-basic-authentication): Call
`tramp-read-passwd' with first parameter `nil'.

* lisp/tramp-util.el (process-file): Add a defalias if function does
not exist.
(tramp-gud-file-name, gud-find-file): Pacify byte-compiler.

* lisp/tramp-vc.el (tramp-vc-user-login-name): Apply `set-file-times'
instead of `tramp-touch'.

* lisp/Makefile.in (top): Handle `datarootdir'.

* texi/Makefile.in (top): Handle `datarootdir'.
----------------------------
revision 2.24
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +6 -5;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.23
date: 2007-07-03 06:37:24 -0700;  author: albinus;  state: Exp;  lines: +2 -4;  commitid: 9XDSidtyh1zxfkos;

* texi/Makefile.in (.../dir): Fix error in copying dir_sample.
----------------------------
revision 2.22
date: 2007-07-01 22:09:53 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: UuuVoNhIwXHnt9os;
*** empty log message ***
----------------------------
revision 2.21
date: 2007-07-01 11:31:36 -0700;  author: albinus;  state: Exp;  lines: +4 -6;  commitid: R9g6wawV0oEHU5os;

* aclocal.m4: Add GPLv3 license.

* configure.ac: Migrate to GPLv3 license.  Remove contrib files
check of base64.el, md5.el, uudecode.el, run_at_time.el.

* Makefile.in: Migrate to GPLv3 license.

* README: Remove tramp2 directory.

* contrib/Makefile.in: Migrate to GPLv3 license.

* contrib/format-spec.el:
* contrib/password.el:
* contrib/socks.el: Synchronize with recent versions from their
repositories.  Migrate to GPLv3 license.

* contrib/base64.el:
* contrib/dir_sample:
* contrib/md5.el:
* contrib/run-at-time.el:
* contrib/uudecode.el: Removed.

* lisp/Makefile.in:
* lisp/tramp-cache.el:
* lisp/tramp-efs.el:
* lisp/tramp-fish.el:
* lisp/tramp-ftp.el:
* lisp/tramp-gw.el:
* lisp/tramp-uu.el:
* lisp/tramp-vc.el:
* lisp/trampver.el.in: Migrate to GPLv3 license.

* lisp/tramp.el: Migrate to GPLv3 license.  Don't require base64.el.
Require tramp-util.el and tramp-vc only if `start-file-process' is
not fbound.
(tramp-md5-function): Removed. Call `md5' directly.
(tramp-file-name-handler-alist): Add `start-file-process'.  Remove
`start-process' and `call-process'.
(tramp-handle-start-file-process): Renamed from
`tramp-handle-start-process'.
(tramp-handle-process-file): Implementation taken from
`tramp-handle-call-process'.
(tramp-handle-call-process): Removed.
(tramp-file-name-for-operation): Add `start-file-process'.
(tramp-open-connection-setup-interactive-shell): Don't set
"last-cmd-time" property.

* lisp/tramp-smb.el: Migrate to GPLv3 license.
(tramp-smb-errors): Add error message for connection timeout.
(tramp-smb-maybe-open-connection): Check for error messages.

* lisp/tramp-util.el: Migrate to GPLv3 license.
(tramp-advice-start-process): Call `tramp-handle-start-file-process'.

* texi/Makefile.in: Migrate to GPLv3 license.
----------------------------
revision 2.20
date: 2007-05-28 06:20:38 -0700;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: Ma8UwuYWkhiejHjs;

* Makefile.in (XEMACS_FILES) Add texi/doclicense.texi.

* texi/doclicense.texi: New file.

* texi/Makefile.in (TEXI_FILES): Add doclicense.texi.
----------------------------
revision 2.19
date: 2007-03-25 11:39:27 -0700;  author: albinus;  state: Exp;  lines: +8 -5;

* aclocal.m4 (AC_EMACS_INFO): Add gateway support.
(AC_EMACS_CHECK_LIB): Remove.

* configure.ac: Add gateway support.

* lisp/Makefile.in: Add gateway support.

* lisp/tramp.el (top): Require tramp-gw conditionally only.
(tramp-methods): Add port spec to "plink", "plink1" and "pscp"
methods.

* texi/Makefile.in: Add gateway support.

* texi/tramp.texi (all): Make gateway text conditional.
----------------------------
revision 2.18
date: 2006-03-14 13:40:09 -0800;  author: albinus;  state: Exp;  lines: +25 -15;

DESTDIR support
----------------------------
revision 2.17
date: 2005-11-29 14:24:40 -0800;  author: albinus;  state: Exp;  lines: +5 -2;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* lisp/tramp.el (tramp-do-copy-or-rename-file-via-buffer)
(tramp-handle-file-local-copy, tramp-handle-write-region):
Generate always a new temp buffer. Kill it finally.
(tramp-handle-unhandled-file-name-directory): Take home directory
on remote host.
(tramp-handle-write-region): When `file-precious-flag' is set,
check also the checksums (in case of inline methods).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.

* texi/tramp.texi (Remote processes): Explain gud.el integration in
more detail.
(Frequently Asked Questions): Recommend `file-precious-flag' when
`tramp-chunksize' is set.
----------------------------
revision 2.16
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.15
date: 2005-06-26 12:45:08 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fourth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in: Adapt email addresses.
----------------------------
revision 2.14
date: 2005-05-08 13:59:01 -0700;  author: albinus;  state: Exp;  lines: +2 -2;
*** empty log message ***
----------------------------
revision 2.13
date: 2005-02-05 15:02:42 -0800;  author: albinus;  state: Exp;  lines: +1 -0;

* INSTALL: Explain in more detail configure parameters
"with-xemacs", "--with-lispdir" and "--infodir".  Change bug
report address to [tramp-devel@gnu.org].

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rewrite
completely in order to apply better default values.

* configure.ac: Reorder substitution of installation directories
wrt changes in aclocal.m4.

* lisp/tramp.el (all): Change all addresses to .gnu.org.

* texi/Makefile.in (datadir): New variable.

* texi/trampinst.texi (Installation parameters): Explain in more detail
configure parameters "with-xemacs", "--with-lispdir" and
"--infodir".
----------------------------
revision 2.12
date: 2004-10-10 09:48:44 -0700;  author: albinus;  state: Exp;  lines: +3 -1;


* Makefile.in (savannah): Don't apply "configure" for Japanese
manual, but call "make -C texi" with proper variable settings.

* aclocal.m4 (AC_EMACS_INFO): Write default values in help output
for "--with-xemacs" and "--with-emacs".
(AC_PATH_LISPDIR): Write default value in help output for
"--with-lispdir".
(all): Unify capitalization for help output.

* configure.ac: Bump version (to 2.1.3-pre).

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.
(savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.11
date: 2004-04-09 09:14:27 -0700;  author: albinus;  state: Exp;  lines: +8 -5;
branches:  2.11.2;


Complete rework, based on review by Karl Berry <karl@gnu.org>

* aclocal.m4 (AC_EMACS_INSTALL): Rewrite function.  Apply a
variable substitution rather then a file substitution

* configure.ac: Adapt comment for AC_EMACS_INSTALL call.

* texi/Makefile.in (INSTALL_CHAPTER): New variable, set by configure.
(TEXI_FILES): Includes "trampinst.texi" also if $(INSTALL_CHAPTER)
is "yes".
($(localinfodir)/%, %.dvi, tramp-%.html, tramp_ja-%.html):
$(INSTALL_CHAPTER) is a parameter, too.

* texi/trampver.texi.in (trampver, tramp): Macros changed to flags.
(otherflavor, installationchapter): Macros removed.  Not necessary
any longer.
(all): "tramp-" and "-" removed from flag names.

* texi/tramp.texi, texi/tramp_ja.texi (tramp): Macro removed.
(Obtaining Tramp): Flag removed from title.
(all): "tramp-" and "-" removed from flag names.  Flags `tramp'
and `trampver' used properly.  Flag `tramp-inst' replaced by
`installchapter'.  Installation related text adapted.

* texi/trampinst.texi (otherflavor, installationchapter): Macros
removed.  Not necessary any longer.
(all): Includes "trampver.texi" for flag setting.  All local flags
moved to that file.  "tramp-" and "-" removed from flag names.
Flags `tramp' and `trampver' used properly.  Flag `tramp-inst'
replaced by `installchapter'.
----------------------------
revision 2.10
date: 2004-03-29 12:37:49 -0800;  author: albinus;  state: Exp;  lines: +1 -1;


* configure.ac: Beautify check for "install-info".

* INSTALL (Installation Names): Describe what to do in case of
errors and warnings.
(Load Path): Add XEmacs example.

* texi/Makefile.in (INSTALL_INFO): Use option `--quiet'.

* texi/tramp.texi (Frequently Asked Questions): Use "MS Windows
NT/2000/XP" (not only "NT").  Remove doubled entry "What kinds of
systems does @tramp{} work on".

* texi/trampinst.texi (Installation parameters): Describe what to do in
case of errors and warnings.
----------------------------
revision 2.9
date: 2004-03-28 08:44:41 -0800;  author: albinus;  state: Exp;  lines: +19 -8;


* configure.ac: Check existence of "install-info".  Taken from
Emacs configure.in.

* texi/Makefile.in (INSTALL_INFO): New Variable.
($(localinfodir)/dir, $(infodir)/dir): New Targets.
(.PHONY): Add "$(localinfodir)/dir" and "$(infodir)/dir".
(install): Depends on "$(infodir)/dir".
(tramp): Depends on "$(localinfodir)/dir".

* texi/dir_sample: Created new.  Existing one didn't work, don't know  why.

* texi/tramp_ja.texi: @direntry corrected to "tramp_ja".

* texi/trampinst.texi (Load paths): Remove explanation on applying
"install-info".  It should work now, even on Debian.
----------------------------
revision 2.8
date: 2004-03-14 12:59:18 -0800;  author: albinus;  state: Exp;  lines: +1 -5;


* INSTALL: Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.

* Makefile.in: Don't check for $(USE_CONTRIB) any longer.
(xemacs): Use ""$(MAKE)" instead of "make".
(emacs): Use "--with-emacs" configure option.
(savannah): Use "ftp-upload" instead of "scp".  Hope it works for
Kai.

* aclocal.m4 (AC_EMACS_LISP): Use "-vanilla" in case of XEmacs.
(AC_CONTRIB_FILES): New function.  Checks for the need of
provisioning of a contributed package.

* configure.ac: Apply `AC_CONTRIB_FILES' for all Lisp files of
contrib directory.

* contrib/README: Clarify run-at-time.el.

* lisp/Makefile.in: New environment variables $(CONTRIB_FILES) and
$(INSTALL_FILES).  Don't check for $(USE_CONTRIB) any longer.
(all): Depends on $(CONTRIB_FILES), too.
(install): Copy $(INSTALL_FILES) but $?.
(distclean): Remove also $(CONTRIB_FILES).

* texi/Makefile.in (savannah): Simplify copy command.

* texi/trampinst.texi (Installation, Installation parameters)
(Load paths): Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.
----------------------------
revision 2.7
date: 2004-03-05 12:47:50 -0800;  author: albinus;  state: Exp;  lines: +3 -2;


* configure.ac: Write "${MAKE}" if appropriate (but "make").

* Makefile.in: (.PHONY): Remove unused targets.
(distclean): Remove also *.tar.gz*
(tar): Call gpg.

* lisp/Makefile.in (.PHONY): Remove unused targets.
(install): Depends on "all".

* lisp/tramp-vc.el (tramp-vc-workfile-unchanged-p): Correct typo
("file" -> "filename").  Reported by Kim F. Storm <storm@cua.dk>.

* texi/Makefile.in (SINFO): Removed.
(.PHONY): New Target.
----------------------------
revision 2.6
date: 2004-02-29 10:06:49 -0800;  author: kai;  state: Exp;  lines: +0 -6;
* Makefile.in (dist, install-html): Remove unused targets.

* Makefile.in (install-ftp, site-lisp): Remove unused targets.

* Makefile.in (site-info, install-html): Remove unused targets.
----------------------------
revision 2.5
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +33 -17;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 2.4
date: 2003-06-28 15:21:58 -0700;  author: albinus;  state: Exp;  lines: +4 -3;

* Makefile.in (TEXI_FILES): New variable.
($(localinfodir)/tramp, %.dvi, tramp-%.html): Depend on
$(TEXI_FILES).  Just tramp.texi is not sufficient.
----------------------------
revision 2.3
date: 2003-04-08 13:20:14 -0700;  author: kai;  state: Exp;  lines: +4 -2;
* Makefile.in (savannah): Do not copy the Japanese HTML file.

* Makefile.in (savannah): Invoke configure after creating the
distribution tarball, because that deletes texi/Makefile which is
needed for the rest of the target.
----------------------------
revision 2.2
date: 2003-04-06 14:44:33 -0700;  author: albinus;  state: Exp;  lines: +2 -1;

* aclocal.m4 (AC_EMACS_INSTALL): New macro.  Depending on
configure option `--with-packaging', Tramp installation chapter
will be part of the manual, or not.

* configure.ac (top-level): Apply `AC_EMACS_INSTALL'.

* Makefile.in (xemacs, emacs): Call `./configure --with-packaging'
in order to generate `trampver.texi' without installation chapter.

* texi/Makefile.in (%.dvi): Apply parameter `-t "@set $(EMACS_INFO)"'
for texi2dvi.

* texi/tramp.texi (top-level): Move installation related entries to
trampinst.texi.  Apply respective macros instead of, in case flag
`tramp-inst' is set.
Move all (X)Emacs related flags to trampver.texi.in.

* texi/trampinst.texi: New file.  Contains installation related
entries.

* texi/trampver.texi.in (top-level): Define all (X)Emacs related
flags.  Include trampinst.texi depending on configure option
`--with-packaging'.
----------------------------
revision 2.1
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.11.2.8
date: 2007-07-25 12:37:31 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: c88QPZwVcue8xbrs;

Relicense all FSF files to GPLv3 or later.
----------------------------
revision 2.11.2.7
date: 2007-05-28 01:49:43 -0700;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: 3AYYXUpQ30DuOFjs;

Version 2.0.56 released.
----------------------------
revision 2.11.2.6
date: 2006-03-14 13:15:57 -0800;  author: albinus;  state: Exp;  lines: +25 -15;

DESTDIR support
----------------------------
revision 2.11.2.5
date: 2005-12-02 12:33:27 -0800;  author: albinus;  state: Exp;  lines: +5 -2;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.
----------------------------
revision 2.11.2.4
date: 2005-07-10 14:36:49 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.11.2.3
date: 2005-06-26 12:23:35 -0700;  author: albinus;  state: Exp;  lines: +3 -3;


* lisp/tramp.el (tramp-find-file-exists-command)
(tramp-find-shell): Follow error conventions.
(tramp-set-auto-save-file-modes): Use octal integer
code #o600 instead of octal character code ?\600.  The latter
resulted in a syntax error with XEmacs.

* lisp/tramp-smb.el (tramp-smb-open-connection): Pass `tramp-chunksize'
as fifth (required) argument.

* contrib/Makefile.in:
* contrib/README:
* lisp/Makefile.in:
* lisp/tramp.el:
* lisp/tramp-ftp.el:
* lisp/tramp-uu.el:
* lisp/trampver.el.in:
* texi/Makefile.in:
----------------------------
revision 2.11.2.2
date: 2004-10-10 09:54:27 -0700;  author: albinus;  state: Exp;  lines: +2 -0;


* Makefile.in (savannah): Don't call make for texi.  Only the
trunk should place its files there.

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.11.2.1
date: 2004-07-17 10:19:56 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Missed to add a release changelog entry.

* Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.

* configure.ac: Bump version (to 2.0.44-pre).  Update merge
version to 2.0.43.
=============================================================================

RCS file: /sources/tramp/tramp/texi/dir_sample,v
Working file: texi/dir_sample
head: 2.2
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.2
	branch-2-1-stable: 2.2.0.4
	branchpoint-2-1-stable: 2.2
	V-2-1-19: 2.2
	V-2-1-18: 2.2
	V-2-1-17: 2.2
	V-2-1-16: 2.2
	V-2-1-15: 2.2
	V-2-1-14: 2.2
	V-2-1-13: 2.2
	V-2-0-57: 2.2
	V-2-1-12: 2.2
	V-2-1-11: 2.2
	V-2-1-10: 2.2
	V-2-0-56: 2.2
	V-2-1-9: 2.2
	V-2-1-8: 2.2
	V-2-0-55: 2.2
	V-2-1-7: 2.2
	V-2-0-54: 2.2
	V-2-1-6: 2.2
	V-2-0-53: 2.2
	V-2-0-52: 2.2
	V-2-1-5: 2.2
	V-2-1-4: 2.2
	V-2-0-51: 2.2
	V-2-0-50: 2.2
	V-2-0-49: 2.2
	V-2-0-48: 2.2
	V-2-1-3: 2.2
	V-2-0-47: 2.2
	V-2-0-46: 2.2
	V-2-0-45: 2.2
	V-2-1-2: 2.2
	V-2-0-44: 2.2
	V-2-1-1: 2.2
	V-2-0-43: 2.2
	V-2-0-42: 2.2
	V-2-0-41: 2.2
	V-2-1-0: 2.2
	branch-2-0-stable: 2.2.0.2
	branchpoint-2-0-stable: 2.2
	V-2-0-40: 2.2
	V-2-0-39: 2.1
	V-2-0-38: 2.1
	V-2-0-37: 2.1
	V-2-0-36: 2.1
	V-2-0-35: 2.1
	V-2-0-34: 2.1
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 2.2
date: 2004-03-28 08:44:41 -0800;  author: albinus;  state: Exp;  lines: +14 -14;


* configure.ac: Check existence of "install-info".  Taken from
Emacs configure.in.

* texi/Makefile.in (INSTALL_INFO): New Variable.
($(localinfodir)/dir, $(infodir)/dir): New Targets.
(.PHONY): Add "$(localinfodir)/dir" and "$(infodir)/dir".
(install): Depends on "$(infodir)/dir".
(tramp): Depends on "$(localinfodir)/dir".

* texi/dir_sample: Created new.  Existing one didn't work, don't know  why.

* texi/tramp_ja.texi: @direntry corrected to "tramp_ja".

* texi/trampinst.texi (Load paths): Remove explanation on applying
"install-info".  It should work now, even on Debian.
----------------------------
revision 2.1
date: 2003-06-09 08:19:39 -0700;  author: kai;  state: Exp;
* dir_sample: New file.

* trampinst.texi (Load paths): gnu/linux --> GNU/Linux.
=============================================================================

RCS file: /sources/tramp/tramp/texi/doclicense.texi,v
Working file: texi/doclicense.texi
head: 2.3
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.3
	branch-2-1-stable: 2.3.0.2
	branchpoint-2-1-stable: 2.3
	V-2-1-19: 2.3
	V-2-1-18: 2.3
	V-2-1-17: 2.3
	V-2-1-16: 2.3
	V-2-1-15: 2.2
	V-2-1-14: 2.1
	V-2-1-13: 2.1
	V-2-0-57: 1.1.2.1
	V-2-1-12: 2.1
	V-2-1-11: 2.1
	V-2-1-10: 2.1
	V-2-0-56: 1.1.2.1
	branch-2-0-stable: 1.1.0.2
keyword substitution: kv
total revisions: 5;	selected revisions: 5
description:
----------------------------
revision 2.3
date: 2009-02-16 12:08:04 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: MxIbI8go3aoUjHCt;
Update copyrights.
----------------------------
revision 2.2
date: 2008-11-25 23:17:08 -0800;  author: albinus;  state: Exp;  lines: +209 -114;  commitid: o9V4kmfrTzqQG5st;
* doclicense.texi: Change to FDL 1.3.
----------------------------
revision 2.1
date: 2007-05-28 06:20:38 -0700;  author: albinus;  state: Exp;  lines: +416 -0;  commitid: Ma8UwuYWkhiejHjs;

* Makefile.in (XEMACS_FILES) Add texi/doclicense.texi.

* texi/doclicense.texi: New file.

* texi/Makefile.in (TEXI_FILES): Add doclicense.texi.
----------------------------
revision 1.1
date: 2007-05-28 01:49:43 -0700;  author: albinus;  state: dead;  commitid: 3AYYXUpQ30DuOFjs;
branches:  1.1.2;
file doclicense.texi was initially added on branch branch-2-0-stable.
----------------------------
revision 1.1.2.1
date: 2007-05-28 01:49:43 -0700;  author: albinus;  state: Exp;  lines: +416 -0;  commitid: 3AYYXUpQ30DuOFjs;

Version 2.0.56 released.
=============================================================================

RCS file: /sources/tramp/tramp/texi/test.texi,v
Working file: texi/test.texi
head: 2.3
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.3
	branch-2-1-stable: 2.3.0.2
	branchpoint-2-1-stable: 2.3
	V-2-1-19: 2.3
	V-2-1-18: 2.3
	V-2-1-17: 2.3
	V-2-1-16: 2.3
	V-2-1-15: 2.3
	V-2-1-14: 2.3
	V-2-1-13: 2.3
	V-2-0-57: 2.2
	V-2-1-12: 2.3
	V-2-1-11: 2.3
	V-2-1-10: 2.3
	V-2-0-56: 2.2
	V-2-1-9: 2.3
	V-2-1-8: 2.3
	V-2-0-55: 2.2
	V-2-1-7: 2.3
	V-2-0-54: 2.2
	V-2-1-6: 2.3
	V-2-0-53: 2.2
	V-2-0-52: 2.2
	V-2-1-5: 2.3
	V-2-1-4: 2.2
	V-2-0-51: 2.2
	V-2-0-50: 2.2
	V-2-0-49: 2.2
	V-2-0-48: 2.2
	V-2-1-3: 2.2
	V-2-0-47: 2.2
	V-2-0-46: 2.2
	V-2-0-45: 2.2
	V-2-1-2: 2.2
	V-2-0-44: 2.2
	V-2-1-1: 2.2
	V-2-0-43: 2.2
	V-2-0-42: 2.2
	V-2-0-41: 2.2
	V-2-1-0: 2.2
	branch-2-0-stable: 2.2.0.2
	branchpoint-2-0-stable: 2.2
	V-2-0-40: 2.2
	V-2-0-39: 2.2
	V-2-0-38: 2.2
	V-2-0-37: 2.2
	V-2-0-36: 2.2
	V-2-0-35: 2.2
	V-2-0-34: 2.2
	V-2-0-33: 2.2
	V-2-0-32: 2.2
keyword substitution: kv
total revisions: 3;	selected revisions: 3
description:
----------------------------
revision 2.3
date: 2005-12-02 14:16:36 -0800;  author: albinus;  state: Exp;  lines: +6 -0;

* INSTALL, configure.ac: We depend on GNU texinfo 4.6.

* lisp/tramp.el (tramp-verbose): Document level 7.
(tramp-send-command-and-check): Clean up tramp_exit_status from
buffer.
(tramp-handle-file-local-copy, tramp-send-command-and-read):
Remove cleaning of tramp_exit_status.
(tramp-handle-write-region): Make cksum check more robust.
(tramp-remote-path): Add "/usr/xpg4/bin/".  On Solaris, there are
the POSIX programs.
(tramp-find-executable): IGNORE-TILDE is optional now.  New
parameter IGNORE-PATH.  Adapt callees.
(tramp-set-remote-path): Return list of existing directories.
(tramp-post-connection): Make `tramp-remote-path' buffer local.
Set it to list of existing directories.
(tramp-find-id-command, tramp-get-remote-id ): New defun.
(tramp-get-remote-uid, tramp-get-remote-gid): Use them.

* texi/tramp.texi (Frequently Asked Questions): Example how to set
`file-precious-flag' buffer local.

* texi/test.texi: Expand check for Texinfo 4.6 feature.
----------------------------
revision 2.2
date: 2003-03-30 12:00:39 -0800;  author: albinus;  state: Exp;  lines: +2 -1;

* test.texi: Add "@bye" in order to have a well-formed document.
----------------------------
revision 2.1
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;

Makefiles rewritten.  See ChangeLogs for details.
=============================================================================

RCS file: /sources/tramp/tramp/texi/tramp.texi,v
Working file: texi/tramp.texi
head: 2.264
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.261
	branch-2-1-stable: 2.256.0.2
	branchpoint-2-1-stable: 2.256
	V-2-1-19: 2.256
	V-2-1-18: 2.248
	V-2-1-17: 2.242
	V-2-1-16: 2.229
	V-2-1-15: 2.221
	V-2-1-14: 2.218
	V-2-1-13: 2.214
	V-2-0-57: 2.115.2.26
	V-2-1-12: 2.210
	V-2-1-11: 2.203
	V-2-1-10: 2.197
	V-2-0-56: 2.115.2.24
	V-2-1-9: 2.185
	V-2-1-8: 2.172
	V-2-0-55: 2.115.2.22
	V-2-1-7: 2.165
	V-2-0-54: 2.115.2.19
	V-2-1-6: 2.158
	V-2-0-53: 2.115.2.14
	V-2-0-52: 2.115.2.14
	V-2-1-5: 2.149
	V-2-1-4: 2.143
	V-2-0-51: 2.115.2.12
	V-2-0-50: 2.115.2.11
	V-2-0-49: 2.115.2.10
	V-2-0-48: 2.115.2.10
	V-2-1-3: 2.133
	V-2-0-47: 2.115.2.6
	V-2-0-46: 2.115.2.2
	V-2-0-45: 2.115.2.1
	V-2-1-2: 2.127
	V-2-0-44: 2.115
	V-2-1-1: 2.119
	V-2-0-43: 2.115
	V-2-0-42: 2.115
	V-2-0-41: 2.115
	V-2-1-0: 2.115
	branch-2-0-stable: 2.115.0.2
	branchpoint-2-0-stable: 2.115
	V-2-0-40: 2.115
	V-2-0-39: 2.110
	V-2-0-38: 2.101
	V-2-0-37: 2.101
	V-2-0-36: 2.93
	V-2-0-35: 2.91
	V-2-0-34: 2.88
	V-2-0-33: 2.88
	V-2-0-32: 2.88
	V-2-0-30: 2.83
	V-2-0-29: 2.79
	V-2-0-28: 2.75
	V-2-0-27: 2.74
	V-2-0-26: 2.73
	V-2-0-25: 2.65
	V-2-0-24: 2.63
	V-2-0-23: 2.61
	V-2-0-22: 2.59
	V-2-0-21: 2.57
	V-2-0-20: 2.56
	V-2-0-19: 2.55
	V-2-0-18: 2.54
	V-2-0-17: 2.52
	V-2-0-16: 2.51
	V-2-0-15: 2.49
	V-2-0-14: 2.47
	V-2-0-13: 2.45
	completion: 2.45.0.2
	V-2-0-12: 2.45
	V-2-0-11: 2.44
	V-2-0-10: 2.42
	V-2-0-9: 2.40
	V-2-0-8: 2.40
	V-2-0-7: 2.39
	V-2-0-6: 2.38
	V-2-0-5: 2.37
	V-2-0-4: 2.36
	V-2-0-3: 2.32
	V-2-0-1: 2.22
	EMACS-21: 2.32
	V-2-0-0: 2.20
	tramp-xemacs-pkg: 2.9.0.2
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 340;	selected revisions: 340
description:
----------------------------
revision 2.264
date: 2011-01-26 01:43:34 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.263
date: 2011-01-19 03:09:00 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 2.262
date: 2010-12-03 08:34:24 -0800;  author: albinus;  state: Exp;  lines: +17 -0;  commitid: d1xVoIqIAb1d5RYu;
* tramp.texi (Inline methods): Add "ksu" method.
(Remote processes): Add example with remote Â´default-directory'.
----------------------------
revision 2.261
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -4;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 2.260
date: 2010-11-04 06:25:22 -0700;  author: albinus;  state: Exp;  lines: +35 -3;  commitid: WE0rBddJ2aKbY6Vu;
* tramp.texi (Remote shell setup): New item "Interactive shell
prompt".  Reported by Christian Millour <cm@abtela.com>.
(Remote shell setup, Remote processes): Use @code{} for
environment variables.
----------------------------
revision 2.259
date: 2010-10-03 08:01:53 -0700;  author: albinus;  state: Exp;  lines: +4 -1;  commitid: UFuEO1K0rWh2x0Ru;
* tramp.texi (Frequently Asked Questions): Mention
remote-file-name-inhibit-cache.
----------------------------
revision 2.258
date: 2010-09-13 08:30:48 -0700;  author: albinus;  state: Exp;  lines: +0 -21;  commitid: 31xKlcFVn8iQkrOu;
* tramp.texi (Inline methods): Remove "ssh1_old", "ssh2_old" and
"fish" methods.
(External methods): Remove "scp1_old" and "scp2_old" methods.

* tramp_ja.texi: Remove file.
----------------------------
revision 2.257
date: 2010-09-02 02:37:55 -0700;  author: albinus;  state: Exp;  lines: +1 -7;  commitid: QmwMPkdzQ02BJZMu;
* Makefile.in: Remove japanese manual creation.

* tramp.texi:
* trampinst.texi: Remove Japanese manual.

* trampver.texi.in: Remove japanesemanual.
----------------------------
revision 2.256
date: 2010-08-05 06:39:05 -0700;  author: albinus;  state: Exp;  lines: +20 -1;  commitid: I0ON6iys2RifYpJu;
branches:  2.256.2;
* tramp.texi (External packages): Fie attributes cache flushing
for asynchronous processes.
----------------------------
revision 2.255
date: 2010-07-28 03:23:43 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: ElO9iUZNqZNa9nIu;
* tramp.texi (Traces and Profiles): Describe verbose level 9.
----------------------------
revision 2.254
date: 2010-07-17 02:59:15 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: Xp5ABYdeJanFmXGu;
* tramp.texi: Start direntry descriptions in column 32, per
Texinfo convention.
----------------------------
revision 2.253
date: 2010-07-17 02:23:09 -0700;  author: albinus;  state: Exp;  lines: +12 -3;  commitid: iFTOmFNqHRGhaXGu;
* tramp.texi (Inline methods): Remove remark about doubled "-t"
argument.
(Frequently Asked Questions): Recommend "sshx" and "scpx" for
echoing shells.
----------------------------
revision 2.252
date: 2010-07-10 02:44:43 -0700;  author: albinus;  state: Exp;  lines: +10 -5;  commitid: zcnsfhVGPcSCv3Gu;
* tramp.texi (Inline methods): Remove "kludgy" phrase.
(Filename Syntax): Describe port numbers.
----------------------------
revision 2.251
date: 2010-05-01 03:04:55 -0700;  author: albinus;  state: Exp;  lines: +7 -1;  commitid: Y1ROfa5QXBP3S3xu;
* tramp.texi (Inline methods, Default Method): Mention
`tramp-inline-compress-start-size'.
----------------------------
revision 2.250
date: 2010-03-19 07:09:44 -0700;  author: albinus;  state: Exp;  lines: +8 -13;  commitid: Xz9j3TIE2ShKByru;
* tramp.texi (Auto-save and Backup): Remove reference to Emacs 21.
(Frequently Asked Questions): Adapt supported (X)Emacs versions.
Adapt supported MS Windows versions.  Remove obsolete URL.
----------------------------
revision 2.249
date: 2010-03-15 01:35:46 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: mQCxDJ4WW5W8T0ru;
* tramp.texi (Frequently Asked Questions): Use the $() syntax.
texi2dvi reports errors with the backquotes.
----------------------------
revision 2.248
date: 2010-01-17 04:11:38 -0800;  author: albinus;  state: Exp;  lines: +21 -10;  commitid: G430qBYkaoFNUHju;
* tramp.texi (Frequently Asked Questions): Add GNU Emacs 23 and
SXEmacs 22 to the supported systems.  New item for hung ssh
sessions.
----------------------------
revision 2.247
date: 2010-01-17 01:54:21 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: e3rQKsxANmtH9Hju;
* tramp.texi (Remote processes): Fix typos.
----------------------------
revision 2.246
date: 2010-01-14 20:52:28 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: zweSrHgxjm35ypju;
Add 2010 to copyright years.
----------------------------
revision 2.245
date: 2009-12-03 03:21:26 -0800;  author: albinus;  state: Exp;  lines: +3 -2;  commitid: BefsJlb3uoM95Vdu;

* tramp.texi (Remote processes): Add missing <RET> in the example.
----------------------------
revision 2.244
date: 2009-11-29 12:37:02 -0800;  author: albinus;  state: Exp;  lines: +21 -0;  commitid: Uy9P3YvfJlYPhsdu;
* tramp.texi (Remote processes): Improve eshell example with "su"
and "sudo" commands.
----------------------------
revision 2.243
date: 2009-11-08 02:29:01 -0800;  author: albinus;  state: Exp;  lines: +17 -0;  commitid: fjWhgPOGWCK6BHau;
* tramp.texi (Auto-save and Backup): Disable backups just for a
method.
----------------------------
revision 2.242
date: 2009-10-23 08:08:30 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: a4QeDLQrpZ2UEF8u;
* tramp.texi (External methods): Temporary files are kept for
`rsync' and `rsyncc' methods.
----------------------------
revision 2.241
date: 2009-10-05 04:39:43 -0700;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: 8QvnOLMUz9z95l6u;
* tramp.texi (Remote processes): Association of a pty is not supported.
----------------------------
revision 2.240
date: 2009-09-24 01:59:16 -0700;  author: albinus;  state: Exp;  lines: +47 -7;  commitid: OPqMLC9Byz52yU4u;
* tramp.texi (History): Add IMAP support.
(External methods): Add `imap' and `imaps' methods.
(GVFS based methods): Add indices for `davs'.
(Password handling): Rename anchors.  Add IMAP entries for
~/.authinfo.gpg.
----------------------------
revision 2.239
date: 2009-09-03 08:20:28 -0700;  author: albinus;  state: Exp;  lines: +15 -0;  commitid: lFSvKVvvguJEkf2u;
*** empty log message ***
----------------------------
revision 2.238
date: 2009-09-03 06:19:39 -0700;  author: albinus;  state: Exp;  lines: +34 -0;  commitid: jgptX5BBHIZcFe2u;
* tramp.texi (Frequently Asked Questions): New item for
emacsclient.
----------------------------
revision 2.237
date: 2009-08-28 07:30:48 -0700;  author: albinus;  state: Exp;  lines: +21 -162;  commitid: tuvhsVGbpMszft1u;
* tramp.texi (Version Control): Remove.
(External packages): New subsections "Filename completion" and
"File attributes cache".
----------------------------
revision 2.236
date: 2009-08-19 01:22:32 -0700;  author: albinus;  state: Exp;  lines: +18 -4;  commitid: wpmytuSb3USavh0u;
* tramp.texi (External methods): Correct `scpc' concept index
entries.  New method `rsyncc'.
----------------------------
revision 2.235
date: 2009-08-18 02:08:59 -0700;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: CZcVR9pHBVb6N90u;
* tramp.texi (Filename completion): Precise, that partial
completion must be activated in ~/.emacs.
----------------------------
revision 2.234
date: 2009-08-07 12:51:49 -0700;  author: albinus;  state: Exp;  lines: +1 -6;  commitid: eCYeiPPjxTAwHNYt;
* tramp.texi (Obtaining Tramp): Update cvs checkout
command. Remove nightly tarballs reference.
----------------------------
revision 2.233
date: 2009-07-01 08:08:01 -0700;  author: albinus;  state: Exp;  lines: +35 -15;  commitid: tZc2eRhhJWNVj1Ut;
* tramp.texi (GVFS based methods): New section.
(Remote processes): Processes for GVFS based methods run locally.
----------------------------
revision 2.232
date: 2009-06-30 14:19:51 -0700;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: z4I9Rhn447jspVTt;
*** empty log message ***
----------------------------
revision 2.231
date: 2009-06-30 14:19:26 -0700;  author: albinus;  state: Exp;  lines: +17 -9;  commitid: HeNS1miQeLyjpVTt;
* tramp.texi (External methods): Avoid the word "hack".  Add
`synce' method.
----------------------------
revision 2.230
date: 2009-06-29 07:12:12 -0700;  author: albinus;  state: Exp;  lines: +8 -9;  commitid: a805SoQwUlrL4LTt;
* tramp.texi (Inline methods, External methods, Gateway methods):
Avoid the word "kludge".
----------------------------
revision 2.229
date: 2009-06-15 11:45:17 -0700;  author: albinus;  state: Exp;  lines: +22 -0;  commitid: UVwTifpkRM4k2ZRt;
* tramp.texi (Remote processes): New subsection "Running remote
programs that create local X11 windows".
----------------------------
revision 2.228
date: 2009-04-21 13:04:08 -0700;  author: albinus;  state: Exp;  lines: +13 -0;  commitid: EZKB7ZzPaS40fVKt;
* tramp.texi (Multi-hops): Cells of `tramp-default-proxies-alist'
can also be Lisp forms.
----------------------------
revision 2.227
date: 2009-04-19 13:45:05 -0700;  author: albinus;  state: Exp;  lines: +5 -5;  commitid: CquRrI9wofUVwFKt;
* tramp.texi (External methods): Precise rsync description.
----------------------------
revision 2.226
date: 2009-04-12 12:30:36 -0700;  author: albinus;  state: Exp;  lines: +4 -1;  commitid: qhrVcjGjkRlrlLJt;
* tramp.texi (Frequently Asked Questions): Improve code for
disabling vc.
----------------------------
revision 2.225
date: 2009-03-29 09:52:44 -0700;  author: albinus;  state: Exp;  lines: +10 -2;  commitid: 42MJHW80T7STUWHt;
* tramp.texi (External methods): Add 'tramp-gvfs-methods' option.
----------------------------
revision 2.224
date: 2009-03-17 11:30:18 -0700;  author: albinus;  state: Exp;  lines: +14 -0;  commitid: 3T60B8W9Wy3xQpGt;
* tramp.texi (Remote Programs): Introduce `tramp-own-remote-path'.
----------------------------
revision 2.223
date: 2009-02-22 09:30:00 -0800;  author: albinus;  state: Exp;  lines: +32 -0;  commitid: LLNVheuDqg5IfsDt;
* tramp.texi (History): Add GVFS support.
(External methods): Add 'dav', `davs' and `obex' methods.
----------------------------
revision 2.222
date: 2009-02-16 12:07:03 -0800;  author: albinus;  state: Exp;  lines: +1 -10;  commitid: vBqnNgG5yp0xjHCt;
* tramp.texi: Consistently use @insertcopying in the Top node,
@contents at the front (after @end titlepage), and @direntry after
@copying.  (Bug#1988)
----------------------------
revision 2.221
date: 2009-01-21 10:48:55 -0800;  author: albinus;  state: Exp;  lines: +48 -59;  commitid: CvhzS9xRMRAxIlzt;
* tramp.texi (all): Harmonize usage of "external method",
"external transfer method" and "out-of-band method".
(Connection types): Precise the differences of inline and external
methods.  Written by Adrian Phillips <a.phillips@met.no>.
----------------------------
revision 2.220
date: 2009-01-03 06:41:51 -0800;  author: albinus;  state: Exp;  lines: +19 -7;  commitid: MBDVOrX1oZSCV0xt;
* tramp.texi (Filename Syntax, Filename completion): Handle IPv6
addresses.
----------------------------
revision 2.219
date: 2008-11-25 23:18:05 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: mxKj7LtZKre9H5st;
Relicense all texi files under FDL 1.3 or later.
----------------------------
revision 2.218
date: 2008-06-28 02:54:45 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: ihH2KtLDgfLOpH8t;
American English spelling fix.
----------------------------
revision 2.217
date: 2008-06-21 04:46:13 -0700;  author: albinus;  state: Exp;  lines: +47 -23;  commitid: 5ub8D2ddrHuXfO7t;
* tramp.texi (Password handling): Renamed from "Password
caching".  Add `auth-source' mechanism.
(Connection caching): Tramp reopens the connection automatically,
when the operating system on the remote host has been changed.
----------------------------
revision 2.216
date: 2008-06-15 01:52:43 -0700;  author: albinus;  state: Exp;  lines: +3 -9;  commitid: RmTHqDqNT0Nru17t;
* tramp.texi: Remove references to external license, since
doclicense is included.
----------------------------
revision 2.215
date: 2008-04-28 12:38:25 -0700;  author: albinus;  state: Exp;  lines: +19 -0;  commitid: yByffnHtpPgCBU0t;
* tramp.texi (Frequently Asked Questions): Explain, how to disable
Tramp via `tramp-mode'.
----------------------------
revision 2.214
date: 2008-03-26 13:08:27 -0700;  author: albinus;  state: Exp;  lines: +1 -11;  commitid: 7SO422TKvGBGPFWs;
* tramp.texi (Filename completion): Remove footnote about let-bind
of `partial-completion-mode'.  It doesn't work this way.
----------------------------
revision 2.213
date: 2008-02-03 03:08:41 -0800;  author: albinus;  state: Exp;  lines: +22 -6;  commitid: 5WpySO7vAFy8wWPs;
* tramp.texi: Use new FSF's Back-Cover Text.
(Remote processes): Add `shell-command'
----------------------------
revision 2.212
date: 2008-01-27 08:11:40 -0800;  author: albinus;  state: Exp;  lines: +4 -2;  commitid: Qa4vNQceGgh2q4Ps;
* tramp.texi (Inline methods): The hostname of the su(do)? methods
must be a local host.
----------------------------
revision 2.211
date: 2008-01-12 03:04:24 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: neKtFbHR1Lhec7Ns;

Update copyrights.

* configure.ac: Bump version (to 2.1.13-pre).  Update merge
version to 2.1.12.
----------------------------
revision 2.210
date: 2007-11-18 02:11:39 -0800;  author: albinus;  state: Exp;  lines: +34 -12;  commitid: RBxaXmIdsa2tF2Gs;

* lisp/tramp.el (tramp-completion-reread-directory-timeout): New
defcustom.
(tramp-handle-file-name-all-completions): Flush directory contents
from cache regularly.
(tramp-set-auto-save-file-modes): Check also for
`buffer-modified-p'.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Temp file is already
created when copying.

* texi/tramp.texi (Filename completion): Simplify explanation of
double-slash behaviour.  Explain directory contents flushing.
----------------------------
revision 2.209
date: 2007-11-12 11:59:08 -0800;  author: albinus;  state: Exp;  lines: +17 -3;  commitid: S56poiUr97a57kFs;

* lisp/tramp.el (tramp-open-connection-setup-interactive-shell): Check
whether the output of "uname -sr" has been changed.

* texi/tramp.texi (Connection caching): Tramp flushes connection
properties when remote operating system has been changed.
----------------------------
revision 2.208
date: 2007-11-07 12:34:53 -0800;  author: albinus;  state: Exp;  lines: +37 -22;  commitid: 6QaEdkjJBQXZsGEs;

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Don't expand
the remote connection identification.
(tramp-find-shell, tramp-open-connection-setup-interactive-shell):
Set also $PS2 and $PS3 when setting $PS1.  Check for shell echoing
before calling stty.

* lisp/tramp-cache.el (tramp-cache-print)
(tramp-dump-connection-properties): Fix docstring.
(tramp-list-connections): Renamed from
`tramp-cache-list-connections'.

* lisp/tramp-cmds.el (tramp-cleanup-connection): Apply it.

* lisp/tramp-ftp.el (tramp-ftp-file-name-handler): Don't expand the
remote connection identification when setting connection property.

* lisp/tramp-smb.el (tramp-smb-handle-substitute-in-file-name): "//"
substitutes only in the local filename part.

* texi/tramp.texi (Overview): Mention also the PuTTY integration under
Win32.  Remove paragraphs about Tramp's experimental status.
(Frequently Asked Questions): Add code example for highlighting
the mode line.
----------------------------
revision 2.207
date: 2007-10-29 13:14:08 -0700;  author: albinus;  state: Exp;  lines: +15 -1;  commitid: gXDioO9TQxwtEwDs;

* texi/tramp.texi (Connection caching): Host names must be different
when tunneling.
----------------------------
revision 2.206
date: 2007-10-23 14:50:56 -0700;  author: albinus;  state: Exp;  lines: +2 -3;  commitid: WQGp5ST40E6jnLCs;

* lisp/tramp.el (tramp-set-file-uid-gid): Protect `call-process' when
we are local.

* texi/tramp.texi (Traces and Profiles): Simplify loop over
`trace-function-background'.
----------------------------
revision 2.205
date: 2007-10-18 11:46:35 -0700;  author: albinus;  state: Exp;  lines: +32 -6;  commitid: BHD6VmLqheQ8w6Cs;

* configure.ac: Bump version (to 2.1.12-pre).  Update merge
version to 2.1.11.

* texi/tramp.texi (Cleanup remote connections): New section.
(Password caching): Remove `tramp-clear-passwd'.  It's not a
command anymore.
(Bug Reports): Add `tramp-bug' to function index.
----------------------------
revision 2.204
date: 2007-10-15 12:22:42 -0700;  author: albinus;  state: Exp;  lines: +44 -2;  commitid: qRT37mPU3aioOIBs;

* lisp/tramp.el (tramp-handle-file-name-all-completions): Expand
DIRECTORY.
(tramp-handle-dired-recursive-delete-directory): Call "rm -rf".

* texi/tramp.texi (Function Index, Variable Index): New nodes.
(Remote shell setup): Describe `tramp-password-prompt-regexp'.
----------------------------
revision 2.203
date: 2007-10-06 04:52:25 -0700;  author: albinus;  state: Exp;  lines: +33 -0;  commitid: rLyecNwMxsQHBwAs;

* lisp/tramp.el (top): Move loading of tramp-util.el and tramp-vc.el to
tramp-compat.el.
(tramp-make-tramp-temp-file): Complete rewrite.  Create remote
temporary file if possible, in order to avoid a security hole.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): Call `tramp-make-tramp-temp-file'
with DONT-CREATE, because the connection is not setup yet.
(tramp-handle-process-file): Rewrite temporary file handling.
(tramp-completion-mode): New defvar.
(tramp-completion-mode-p): Use it.

* lisp/tramp-compat.el (top):  Load tramp-util.el and tramp-vc.el.

* lisp/tramp-fish.el (tramp-fish-handle-process-file): Rewrite
temporary file handling.

* texi/tramp.texi (External packages): New section.
----------------------------
revision 2.202
date: 2007-09-13 21:14:02 -0700;  author: albinus;  state: Exp;  lines: +2 -1;  commitid: Q6ImRhqozbKIMExs;

* tramp.texi (Filename Syntax): Provide links to "Inline methods"
and "External transfer methods".
----------------------------
revision 2.201
date: 2007-08-21 22:38:44 -0700;  author: albinus;  state: Exp;  lines: +10 -4;  commitid: VUup64FY1TX9ZHus;

* lisp/tramp.el (tramp-get-remote-path): New defun.  Replace occurences
of `tramp-default-remote-path' by this function.
(tramp-set-remote-path): Move most of the code to
`tramp-get-remote-path'.
(tramp-get-ls-command, tramp-get-remote-id): Don't check for not
existing directories, this is done already in
`tramp-get-remote-path'.

* texi/tramp.texi (Remote Programs): Persistency file must be cleared
when changing `tramp-remote-path'.
----------------------------
revision 2.200
date: 2007-08-09 22:44:16 -0700;  author: albinus;  state: Exp;  lines: +6 -6;  commitid: li0FflOtiODtpats;

* texi/tramp.texi (Filename Syntax): Don't use @var{} constructs inside
the @trampfn macro.
----------------------------
revision 2.199
date: 2007-07-29 08:09:37 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: frjWtQEKlWTRUFrs;

Use utf-8 encoding with coding cookie.

* lisp/tramp.el (tramp-handle-verify-visited-file-modtime): Flush
buffer file-name's file property.
(tramp-handle-file-remote-p): The first parameter is FILENAME.

* texi/tramp.texi (Frequently Asked Questions): Fix typo.
----------------------------
revision 2.198
date: 2007-07-24 14:37:02 -0700;  author: albinus;  state: Exp;  lines: +5 -1;  commitid: pD4iKfigg72fe4rs;

* texi/tramp.texi (Frequently Asked Questions): Point to mode line
extension in Emacs 23.1.
----------------------------
revision 2.197
date: 2007-07-22 04:42:11 -0700;  author: albinus;  state: Exp;  lines: +51 -50;  commitid: Z2nU7CnfArl80Lqs;

* texi/tramp.texi (trampfn): Expand macro implementation in order to
handle empty arguments.
(trampfnmhl, trampfnuhl, trampfnhl): Remove macros.  Replace all
occurencies by trampfn.
----------------------------
revision 2.196
date: 2007-07-18 14:27:00 -0700;  author: albinus;  state: Exp;  lines: +59 -11;  commitid: DIfDUUi85nCImiqs;

* texi/tramp.texi (Frequently Asked Questions): Extend example code for
host identification in the modeline. Add bbdb to approaches
shortening Tramp file names to be typed.
----------------------------
revision 2.195
date: 2007-07-16 14:33:02 -0700;  author: albinus;  state: Exp;  lines: +0 -2;  commitid: hlv4JiwKkWs8s2qs;

* lisp/tramp.el (tramp-handle-set-file-times): New defun.  Replaces
`tramp-touch'.
(tramp-file-name-handler-alist, tramp-file-name-for-operation):
Add entry for `set-file-times'.
(tramp-do-copy-or-rename-file-via-buffer)
(tramp-do-copy-or-rename-file-out-of-band): Use `set-file-times'.
(tramp-handle-unhandled-file-name-directory): Rewrite.
(tramp-convert-file-attributes): Add error handling when inode is
extraordinary big.
(tramp-get-inode): Change parameter from FILE to VEC.

* lisp/tramp-fish.el (tramp-fish-file-name-handler-alist): Add entry
for `set-file-times'.  Rename `start-process' into
`start-file-process'.  Remove `call-process' entry.
(tramp-fish-handle-set-file-times): New defun.
(tramp-fish-handle-executable-find): Use `process-file'.
(tramp-fish-handle-process-file): New defun.  Replaces
`tramp-fish-handle-call-process'.
(tramp-fish-do-copy-or-rename-file-directly): Use
`set-file-times'.
(tramp-fish-get-file-entries): Change `tramp-get-inode' parameter.

* lisp/tramp-smb.el (tramp-smb-handle-file-attributes): Change
`tramp-get-inode' parameter.

* lisp/tramp-util.el (all): Change all checks to (fboundp
'start-file-process).
(set-file-times): Add a defalias if function does not exist.

* texi/tramp.texi (Frequently Asked Questions): Simplify recentf
example.
----------------------------
revision 2.194
date: 2007-07-14 02:35:31 -0700;  author: albinus;  state: Exp;  lines: +8 -2;  commitid: Bh9so4kaMw7xyIps;

* tramp.texi: Move @setfilename ../info/tramp up, outside the
header section.  Reported by <poti@potis.org>.
(Remote processes): Arguments of the program to be debugged are
taken literally.  Add an anchor to the subsection
"Running a debugger on a remote host".
----------------------------
revision 2.193
date: 2007-07-12 14:10:21 -0700;  author: albinus;  state: Exp;  lines: +44 -14;  commitid: tpJ21GvoHEVXswps;

* texi/tramp.texi (Remote processes): Don't call it "experimental" any
longer.  Add subsection about running a debugger on a remote host.
----------------------------
revision 2.192
date: 2007-06-20 13:26:40 -0700;  author: albinus;  state: Exp;  lines: +14 -13;  commitid: 6Fqxls1tJZzgVGms;

* lisp/tramp.el:
* lisp/tramp-cache.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el:
* lisp/tramp-util.el: Use `expand-file-name' instead of `concat' where
appropriate.

* lisp/tramp.el (tramp-action-yesno, tramp-action-yn): Protect
`pop-to-buffer' by `save-match-data'.

* texi/tramp.texi (Filename completion): Rework examples for local
filename completion.
----------------------------
revision 2.191
date: 2007-06-17 04:12:32 -0700;  author: albinus;  state: Exp;  lines: +26 -0;  commitid: IQTI2NEf6N68Xfms;

* lisp/tramp.el:
* lisp/tramp-fish.el:
* lisp/tramp-smb.el: Unify "Tramp" in strings.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): "//" and "/~"
substitute only in the local filename part.  Suggested by Peter
Gordon <peter@pg-consultants.com>.
(tramp-advice-minibuffer-electric-separator)
(tramp-advice-minibuffer-electric-tilde): New defadvices.
(tramp-append-tramp-buffers): Replace "sensible" by "sensitive" in
the hint.

* texi/tramp.texi (Filename completion): "//" substitutes in local
filename only.
----------------------------
revision 2.190
date: 2007-06-09 03:43:13 -0700;  author: albinus;  state: Exp;  lines: +21 -2;  commitid: JFT40BDNteEy3els;

* texi/tramp.texi (Remote shell setup): Add an example how to customize
`tramp-actions-before-shell'.
----------------------------
revision 2.189
date: 2007-06-03 11:16:41 -0700;  author: albinus;  state: Exp;  lines: +1 -0;  commitid: TKWJux4s1Xx2Luks;

* texi/tramp.texi (Traces and Profiles): Require also 'tramp, because
traces are taken from a new started Emacs usually, which might not
have loaded Tramp yet.
----------------------------
revision 2.188
date: 2007-05-28 06:20:38 -0700;  author: albinus;  state: Exp;  lines: +6 -0;  commitid: Ma8UwuYWkhiejHjs;

* Makefile.in (XEMACS_FILES) Add texi/doclicense.texi.

* texi/doclicense.texi: New file.

* texi/Makefile.in (TEXI_FILES): Add doclicense.texi.
----------------------------
revision 2.187
date: 2007-04-23 14:13:15 -0700;  author: albinus;  state: Exp;  lines: +11 -1;

* lisp/tramp.el: New todo items.

* texi/tramp.texi (Default user): Declare `tramp-default-user' as
obsolete.  Explain how to use `tramp-default-user-alist' instead of.
----------------------------
revision 2.186
date: 2007-04-22 12:37:23 -0700;  author: albinus;  state: Exp;  lines: +11 -0;

* lisp/tramp.el (tramp-methods): "plinkx" loads a session.  No default
port.
(tramp-default-user-alist): No default user for "plinkx".
(tramp-completion-function-alist-putty): New defconst.
(tramp-completion-function-alist): Add "plinkx" completion.
(tramp-set-completion-function): Handle also registry keys.
(tramp-parse-putty, tramp-parse-putty-group): New defuns.
(tramp-action-login): Trace login prompt.

* texi/tramp.texi (Inline methods):  Add `plinkx' method.
----------------------------
revision 2.185
date: 2007-04-03 14:07:13 -0700;  author: albinus;  state: Exp;  lines: +3 -3;
*** empty log message ***
----------------------------
revision 2.184
date: 2007-04-02 11:44:23 -0700;  author: albinus;  state: Exp;  lines: +28 -3;

* texi/tramp.texi (Frequently Asked Questions): Extend recent files
example to the XEmacs case.
----------------------------
revision 2.183
date: 2007-03-31 13:52:16 -0700;  author: albinus;  state: Exp;  lines: +42 -19;

* lisp/tramp.el (top): Don't require 'tramp-cache, it results in an
endless loop.  Autoload needed functions instead of.  Declare
needed gateway symbols, when tramp-gw cannot be loaded.
(with-parsed-tramp-file-name): Simplify `edebug-form-spec'.
(with-file-property, with-connection-property): New defmacros,
moved from tramp-cache.  This was necessary, because macros cannot
be autoloaded.
(tramp-register-file-name-handler)
(tramp-register-completion-file-name-handler): New defsubst,
derived from `tramp-register-file-name-handlers'.  The split is
necessary because Tramp's file name handlers must be registered at
different startup places.

* lisp/tramp-cache.el (with-file-property, with-connection-property):
Move them to tramp.el.

* texi/tramp.texi (Frequently Asked Questions): Add recentf to
approaches shortening Tramp file names to be typed.
(Traces and Profiles): Describe call traces; text moved from Bug
Reports.
----------------------------
revision 2.182
date: 2007-03-25 11:39:27 -0700;  author: albinus;  state: Exp;  lines: +21 -5;

* aclocal.m4 (AC_EMACS_INFO): Add gateway support.
(AC_EMACS_CHECK_LIB): Remove.

* configure.ac: Add gateway support.

* lisp/Makefile.in: Add gateway support.

* lisp/tramp.el (top): Require tramp-gw conditionally only.
(tramp-methods): Add port spec to "plink", "plink1" and "pscp"
methods.

* texi/Makefile.in: Add gateway support.

* texi/tramp.texi (all): Make gateway text conditional.
----------------------------
revision 2.181
date: 2007-03-10 08:37:37 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* texi/tramp.texi (Auto-save and Backup): Correct typo.
----------------------------
revision 2.180
date: 2007-03-08 13:21:45 -0800;  author: albinus;  state: Exp;  lines: +6 -1;

* lisp/tramp.el (tramp-methods): Extend doc string by description of
`tramp-default-port' and `tramp-gw-args'.
(tramp-enter-password): Remove `inhibit-trace'.  It is handled by
description in the manual now.
(tramp-maybe-open-connection): Fix small error in gateway handling.

* texi/tramp.texi (Bug Reports): Precise example for call traces.
Describe how to avoid passwords to be sent.
----------------------------
revision 2.179
date: 2007-03-07 13:24:30 -0800;  author: albinus;  state: Exp;  lines: +9 -7;

* lisp/tramp.el (tramp-methods): Add port spec to "telnet" method.
(tramp-do-copy-or-rename-file-out-of-band): Complete gateway
implementation.
(tramp-handle-insert-directory): Check (featurep 'ls-lisp).
(tramp-make-tramp-temp-file): Use `emacs-pid' if there is no
running process yet.
(tramp-compute-multi-hops): New defun.  Code extracted from
`tramp-maybe-open-connection'.
(tramp-maybe-open-connection): Code adapted accordingly.

* lisp/tramp-gw.el (tramp-gw-gw-proc-sentinel): Companion process might
not exist.
(tramp-gw-open-network-stream, tramp-gw-basic-authentication):
Clean password cache in error case only.

* texi/tramp.texi (Remote processes): Improve eshell example.
----------------------------
revision 2.178
date: 2007-03-05 13:57:52 -0800;  author: albinus;  state: Exp;  lines: +109 -85;

* lisp/tramp.el (tramp-methods): Add gateway parameter to "scp",
"scp1", "scp2", "scpc", "scpx", "sshx".
(tramp-do-copy-or-rename-file-out-of-band): Start implementation
for gateways.  It is not finished yet.
(tramp-make-copy-program-file-name): Change parameter to VEC.
(tramp-make-temp-file): New parameter FILENAME.  Append its
extension to the resulting temporary file name.
(tramp-handle-file-local-copy, tramp-handle-write-region): Apply
it.

* lisp/tramp-smb.el (tramp-smb-handle-file-local-copy)
(tramp-smb-handle-write-region): Apply it.

* lisp/tramp-fish.el (tramp-fish-handle-file-local-copy): Apply it.

* texi/tramp.texi (trampfn, trampfnmhl, trampfnuhl, trampfnhl): New
macros.  Apply them wherever possible, improving readability.
(Multi-hops): Add some words in the footnote regarding ethical
issues of passing firewalls.
(Remote processes): New subsection discussing integration into
eshell.
----------------------------
revision 2.177
date: 2007-02-27 14:09:44 -0800;  author: albinus;  state: Exp;  lines: +28 -13;

* lisp/tramp.el (tramp-error-with-buffer): New defsubst.  Apply it
wherever there is `pop-to-buffer', followed by `tramp-error'.
(tramp-maybe-open-connection): Rename `tramp-gw-http-method' to
`tramp-gw-tunnel-method'.

* lisp/tramp-gw.el (tramp-gw-tunnel-method)
(tramp-gw-default-tunnel-port): Renamed from
`tramp-gw-http-method' and `tramp-gw-default-http-port',
respectively.  Apply it everywhere.
(tramp-gw-open-connection): Improve doc-string.  Use only type 5
for `socks-server', we have our own 'http implementation.
(tramp-gw-open-network-stream): Improve error handling.
(tramp-gw-basic-authentication): Bind `tramp-current-*' locally
because of password cache key.

* texi/tramp.texi (History): Add gateway methods as well as relation to
GNU Emacs, XEmacs and GNU/Linux Debian.
(Gateway methods): Minor wording improvements.
(Multi-hops): Explain HTTP tunnel example in more detail.
----------------------------
revision 2.176
date: 2007-02-26 13:56:03 -0800;  author: albinus;  state: Exp;  lines: +70 -3;

* lisp/tramp.el (tramp-methods): Add "StrictHostKeyChecking=no" to
`tramp-gw-args' of ssh, ssh1 and ssh2 methods.
(tramp-maybe-open-connection): Implement changed interface of
`tramp-gw-open-connection'.
(tramp-send-eof): Removed.
(tramp-file-name-real-host, tramp-file-name-port): New defsubst.
(tramp-read-passwd): New parameter PROMPT.

* lisp/tramp-gw.el: Complete rewrite.  Use socks.el for SOCKS server;
implement HTTP tunnels on its own.

* texi/tramp.texi (Gateway methods): New section.
(Multi-hops): Describe useage of gateway methods.
----------------------------
revision 2.175
date: 2007-02-21 13:16:55 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* tramp.texi (Frequently Asked Questions): Improve ~/.zshrc
settings.  Reported by Ted Zlatanov <tzz@lifelogs.com>.
----------------------------
revision 2.174
date: 2007-01-31 14:35:38 -0800;  author: albinus;  state: Exp;  lines: +28 -0;

* lisp/tramp-smb.el (tramp-smb-handle-insert-directory)
* lisp/tramp.el (tramp-handle-insert-directory): Fix wildcard case.

* texi/tramp.texi (Frequently Asked Questions): New item for
performance considerations.
----------------------------
revision 2.173
date: 2007-01-22 22:01:36 -0800;  author: albinus;  state: Exp;  lines: +19 -0;

* tramp.texi (Frequently Asked Questions): New item for dired
listing options.
----------------------------
revision 2.172
date: 2007-01-13 11:59:33 -0800;  author: albinus;  state: Exp;  lines: +9 -6;

* lisp/tramp.el (top): Change declaration of `with-temp-message' if it
doesn't exist.
(tramp-buffer-name, tramp-debug-buffer-name)
(tramp-make-tramp-file-name, tramp-make-copy-program-file-name):
Check also for empty USER.

* lisp/tramp-smb.el (tramp-smb-actions-with-share):
(tramp-smb-actions-without-share): New defconst.
(tramp-smb-open-connection): Removed.  Code merged into
`tramp-smb-maybe-open-connection'.  Use new defconst.

* lisp/tramp.texi (Multi-hops): Change last example to `sudo'.
----------------------------
revision 2.171
date: 2006-12-27 14:12:29 -0800;  author: albinus;  state: Exp;  lines: +13 -0;

* Makefile.in: Add tramp-fish.el

* lisp/tramp-fish.el: New package.

* lisp/tramp.el (top): Require tramp-fish.
(tramp-inodes): New defvar.
(tramp-handle-expand-file-name): Cache "home-directory".
(tramp-get-inode): New defun.

* lisp/tramp-smb.el (tramp-smb-no-stat, tramp-smb-inodes)
(tramp-smb-get-inode): Removed.  Apply new names.

* lisp/tramp-util.el (tramp-advice-executable-find): Add check for
`tramp-fish-file-name-handler'.

* texi/tramp.texi (Inline methods): Add `fish' method.
----------------------------
revision 2.170
date: 2006-12-26 13:42:55 -0800;  author: albinus;  state: Exp;  lines: +5 -3;

* lisp/tramp.el (tramp-action-process-alive)
(tramp-wait-for-regexp): Pop connection buffer in case of error.
(tramp-exists-file-name-handler): Handle also `default-directory'.
(tramp-half-a-year, tramp-parse-time-months): New defconst.
Transferred from tramp-smb.el.
(tramp-time-less-p, tramp-time-subtract): New defuns.  Transferred
from tramp-smb.el.
(tramp-time-diff): Use them.

* lisp/tramp-smb.el (tramp-smb-half-a-year)
(tramp-smb-parse-time-months, tramp-smb-time-less-p)
(tramp-smb-time-subtract): Removed.  Apply new names.

* lisp/tramp-util.el (top): Don't check for file name handlers of
`start-process-shell-command' and `call-process-shell-command'.

* texi/tramp.texi (Connection types): Mention `scpc' method.
(Default Method): Offer `scpc' for editing large files.
----------------------------
revision 2.169
date: 2006-12-18 23:24:49 -0800;  author: albinus;  state: Exp;  lines: +20 -0;

* lisp/tramp.el (tramp-methods): Introduce new method `scpc'.  Remove
"ControlMaster" option from the other `scp*' methods.
(tramp-default-method): Check for ssh-agent before setting to
`scp'.
(top): Check for `font-lock-add-keywords' before calling; it
doesn't exist under XEmacs.

* texi/tramp.texi (External transfer methods): Describe new method
`scpc'.
----------------------------
revision 2.168
date: 2006-12-09 13:10:08 -0800;  author: albinus;  state: Exp;  lines: +13 -1;

* tramp.el (tramp-enter-password): Inhibit function call traces in
order to avoid passwords to be included there.

* tramp-smb.el (tramp-smb-errors): Add error messages.
(tramp-smb-handle-make-directory-internal): Local file names shall
carry "\\" instead of "/".  Reported by Tom Wurgler
<twurgl@goodyear.com>.

* tramp.texi (Bug Reports): Add code to retrieve function call
traces.
----------------------------
revision 2.167
date: 2006-11-07 03:49:33 -0800;  author: albinus;  state: Exp;  lines: +9 -21;

* lisp/tramp.el (tramp-copy-size-limit): New defcustom.
(tramp-methods): Add "ControlPath" and "ControlMaster" to scp,
scp1 and scp2 methods.  Suggested by Andreas Schwab
<schwab@suse.de>.  Rearrange entries for better readability.
Change syntax of `tramp-copy-args' to that of `tramp-login-args'.
Describe "%t" in the doc string.
(tramp-default-method): scp is the default method.
(tramp-do-copy-or-rename-file, tramp-handle-file-local-copy)
(tramp-handle-write-region): Check for `tramp-copy-size-limit'.
(tramp-do-copy-or-rename-file-out-of-band): Simplify
implementation.
(tramp-maybe-open-connection): Compute format spec only once.

* texi/tramp.texi (Configuration): scp is the default method.
(External transfer methods): Explain meaning of
`tramp-copy-size-limit'.  Don't mention password problems anymore,
this is solved.
(Default Method): Use ssh as example for another method.
----------------------------
revision 2.166
date: 2006-10-18 22:03:29 -0700;  author: albinus;  state: Exp;  lines: +7 -3;

* texi/tramp.texi (External transfer methods): Explain how to use the
WINS hostname for the smb method.
(Frequently Asked Questions): Remove questions marked with "???".
There have been no complaints for years, so the information must
be appropriate.
----------------------------
revision 2.165
date: 2006-09-03 05:23:58 -0700;  author: albinus;  state: Exp;  lines: +5 -3;

Version 2.1.7 released.
----------------------------
revision 2.164
date: 2006-08-30 23:06:16 -0700;  author: albinus;  state: Exp;  lines: +19 -0;

* lisp/tramp.el (tramp-default-proxies-alist): Extend doc string for %h
and %u patterns.
(tramp-wrong-passwd-regexp): Fix strings.
(tramp-maybe-open-connection): Add handling of %h and %u
patterns.  Suggested by Kirk Strauser <kirk@daycos.com>.

* texi/tramp.texi (Multi-hops): Adding %h and %u patterns to
`tramp-default-proxies-alist'.
----------------------------
revision 2.163
date: 2006-08-28 21:35:25 -0700;  author: albinus;  state: Exp;  lines: +4 -1;

* lisp/tramp.el (tramp-get-remote-uid, tramp-get-remote-gid): Return -1
when ID-FORMAT is 'integer, and the command doesn't yield an
integer.

* texi/tramp.texi (Bug Reports): The Tramp mailing list is moderated
now.  Suggested by Adrian Phillips <a.phillips@met.no>.
----------------------------
revision 2.162
date: 2006-06-05 13:05:06 -0700;  author: albinus;  state: Exp;  lines: +5 -5;

* texi/tramp.texi: Fix various typos.
----------------------------
revision 2.161
date: 2006-06-04 08:36:16 -0700;  author: albinus;  state: Exp;  lines: +7 -1;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Expand
`datarootdir´.  Perform all expansions with "eval".

* configure.ac: Add "-o /dev/null" to texi2dvi call.

* lisp/tramp.el (tramp-process-actions): Pop connection buffer in case
of error.  Modify error message depending on `tramp-action'.

* lisp/tramp-cache.el (tramp-persistency-file-name): Default value is
"~/.emacs.d/tramp" or "~/.xemacs/tramp", respectively.  Suggested
by Romain Francoise <romain@orebokech.com>.
(tramp-dump-connection-properties): Suppress error when
`tramp-persistency-file-name´ cannot be written.

* texi/tramp.texi (Connection caching): Change default file name.
----------------------------
revision 2.160
date: 2006-06-01 14:40:29 -0700;  author: albinus;  state: Exp;  lines: +14 -1;

* lisp/tramp.el (tramp-process-one-action): Remove `with-timeout'
clause.
(tramp-process-actions): Add optional TIMEOUT parameter.  If set,
apply it.
(tramp-maybe-open-connection): Call `tramp-process-actions' with a
timeout of 60".

* texi/tramp.texi (Filename completion): Explain how to enable
`partial-completion-mode' temporarily.
----------------------------
revision 2.159
date: 2006-05-29 13:39:22 -0700;  author: albinus;  state: Exp;  lines: +9 -0;

* texi/tramp.texi (Frequently Asked Questions): Disable zsh zle.
----------------------------
revision 2.158
date: 2006-05-24 13:12:23 -0700;  author: albinus;  state: Exp;  lines: +11 -13;

* lisp/tramp.el (tramp-message): Write into debug buffer only if
`tramp-verbose-level' is greater than or equal to 4.
(tramp-get-completion-function): Add
`tramp-parse-connection-properties´.
(tramp-process-initial-commands, tramp-post-connection): Removed,
also their respective calls..
(tramp-open-connection-setup-interactive-shell) Add code from
`tramp-process-initial-commands' and `tramp-post-connection'.

* lisp/tramp-cache.el (tramp-parse-connection-properties): New defun.

* lisp/tramp-util.el (tramp-ediff-setup): New defun.

* texi/tramp.texi (Traces and Profiles): Tramp debug buffer is written
with verbosity level 4 onwards.
----------------------------
revision 2.157
date: 2006-05-21 09:15:06 -0700;  author: albinus;  state: Exp;  lines: +25 -3;

Major rewrite.  Parameter lists changed from METHOD USER HOST to VEC.
----------------------------
revision 2.156
date: 2006-05-08 22:37:27 -0700;  author: albinus;  state: Exp;  lines: +3 -3;

* lisp/tramp.el (top): Eval expression for adding tramp-(ftp|efs) to
`tramp-unload-hook'.
(tramp-handle-file-name-all-completions)
(tramp-handle-insert-directory): Remove final "cd".
(tramp-register-file-name-handlers): Enable Tramp completion also
when ido is loaded.
(tramp-post-connection): Don't check for (en|de)coding.  It will
be done on-the-fly.
(tramp-find-inline-encoding): Remove tramp-get-* checks.
(tramp-get-remote-encoding, tramp-get-remote-decoding)
(tramp-get-local-encoding, tramp-get-local-decoding): Add
`tramp-find-inline-encoding'.

* lisp/tramp-cahe.el (top): Add unload code to
`tramp-cache-unload-hook'.  Remove also
`tramp-dump-connection-properties' from `kill-emacs-hook'.  Remove
"scripts" properties from connection history, they are not
persistent information.

* texi/tramp.texi (Filename completion): Improve wording.
----------------------------
revision 2.155
date: 2006-05-07 14:33:49 -0700;  author: albinus;  state: Exp;  lines: +14 -8;

* lisp/tramp.el (top): cl and custom are always required.
(tramp-verbose): Change description of levels.
(tramp-encoding-reads-stdin, tramp-repair-jka-compr)
(tramp-discard-garbage, tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name)
(tramp-find-default-method, tramp-find-default-user)
(tramp-find-default-host): Remove them.
(tramp-methods): Change defcustom into defvar.
(tramp-actions-before-shell, tramp-actions-copy-out-of-band):
Change defcustom into defconst.
(tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-make-temp-file, tramp-make-tramp-temp-file): Move them up.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-handle-make-auto-save-file-name): For Emacs 21, set
`tramp-auto-save-directory' if unset in order to guarantee unique
auto-save file names.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): New defsubst.  Added with
autoload cookie.  Code from `tramp-repair-jka-compr' moved here.
Register `tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-unload-file-name-handlers): Renamed from
`tramp-unload-file-name-handler-alist'.
(tramp-completion-handle-file-name-all-completions): Delete
directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-process-actions, tramp-wait-for-regexp)
(tramp-maybe-open-connection, tramp-send-command)
(tramp-send-command-internal): Trace sent command with level 6.
(tramp-check-for-regexp): Trace echo with level 5.
(tramp-dissect-file-name): Expand method, user, host.
(tramp-find-method, tramp-find-user, tramp-find-host): Add code
for default values.  Remove all calls but the one in
`tramp-dissect-file-name'.
(tramp-bug, tramp-reporter-dump-variable)
(tramp-append-tramp-buffers): Dump also hash variables.

* lisp/tramp-cache.el: Trace cache commands with level 7.  Trace
connection commands with level 8.
(tramp-cache-print): Dump strings as such.
(tramp-persistency-file-name): New defcustom.
(tramp-connection-properties): New defvar.
(tramp-dump-connection-properties): New defun.
(tramp-get-connection-property, tramp-set-connection-property):
Rewritten.
(top): Dump connection history when leaving Emacs.  Read it during
initialization.

* lisp/tramp-efs.el (tramp-efs-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-ftp.el (tramp-ftp-file-name-p): Don't use tramp-find-*
functions.

* lisp/tramp-smb.el: Trace sent commands with level 6.
(tramp-smb-file-name-p): Don't use tramp-find-* functions.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
(Bug Reports): Level 6 results already in file contents.
(Traces and Profiles): Describe new levels.
----------------------------
revision 2.154
date: 2006-04-16 03:02:56 -0700;  author: albinus;  state: Exp;  lines: +16 -4;

* lisp/tramp.el (tramp-completion-mode): ?\t has event-modifier
'control.  Reported by Matthias Förste
<slashdevslashnull@gmx.net>.

* texi/tramp.texi (History): Tell about commands on remote hosts.
(Filename completion): Remove exception of multi hop methods.
(Frequently Asked Questions): Give example for prompt checking.
----------------------------
revision 2.153
date: 2006-03-19 10:53:06 -0800;  author: albinus;  state: Exp;  lines: +46 -40;

* lisp/tramp.el (tramp-remote-path): Add `tramp-default-remote-path' as
first item.  Remove items which are usually returned by "getconf
PATH".  Extend custom parameters accordingly.
(tramp-set-remote-path): Apply "getconf PATH" in order to get
default directories.  Suggested by Kevin Rodgers <ihs_4664@yahoo.com>.
Remove patameters VAR and DIRLIST.
(tramp-post-connection): Set remote PATH variable as first action.
(tramp-handle-call-process): Add "</dev/null" when INFILE is nil.

* lisp/tramp-util.el (tramp-grep-setup): New defun.

* texi/tramp.texi (Remote Programs): Introduce `tramp-default-remote-path'.
----------------------------
revision 2.152
date: 2006-01-27 14:29:02 -0800;  author: albinus;  state: Exp;  lines: +24 -48;

Add code for unloading Tramp.

* lisp/tramp-vc.el (vc-user-login-name): Wrap defadvice with a test for
`process-file', in order to let it work for older Emacsen too.
----------------------------
revision 2.151
date: 2005-12-30 07:42:29 -0800;  author: albinus;  state: Exp;  lines: +53 -32;

* texi/tramp.texi (various): Apply "ftp" as method for the download
URL.
(Bug Reports): Refer to FAQ for common problems.
(Frequently Asked Questions): New item for common connection
problems.
----------------------------
revision 2.150
date: 2005-12-28 13:49:47 -0800;  author: albinus;  state: Exp;  lines: +43 -0;

* configure.ac: Bump version (to 2.1.6-pre).

* texi/tramp.texi (Frequently Asked Questions): Add bookmarks and
filecache to approaches shortening Tramp file names to be typed.
----------------------------
revision 2.149
date: 2005-12-02 14:16:36 -0800;  author: albinus;  state: Exp;  lines: +18 -7;

* INSTALL, configure.ac: We depend on GNU texinfo 4.6.

* lisp/tramp.el (tramp-verbose): Document level 7.
(tramp-send-command-and-check): Clean up tramp_exit_status from
buffer.
(tramp-handle-file-local-copy, tramp-send-command-and-read):
Remove cleaning of tramp_exit_status.
(tramp-handle-write-region): Make cksum check more robust.
(tramp-remote-path): Add "/usr/xpg4/bin/".  On Solaris, there are
the POSIX programs.
(tramp-find-executable): IGNORE-TILDE is optional now.  New
parameter IGNORE-PATH.  Adapt callees.
(tramp-set-remote-path): Return list of existing directories.
(tramp-post-connection): Make `tramp-remote-path' buffer local.
Set it to list of existing directories.
(tramp-find-id-command, tramp-get-remote-id ): New defun.
(tramp-get-remote-uid, tramp-get-remote-gid): Use them.

* texi/tramp.texi (Frequently Asked Questions): Example how to set
`file-precious-flag' buffer local.

* texi/test.texi: Expand check for Texinfo 4.6 feature.
----------------------------
revision 2.148
date: 2005-11-29 14:24:40 -0800;  author: albinus;  state: Exp;  lines: +19 -16;

* configure.ac: Remove creation of info directory.

* Makefile.in (MANIFEST): Call ./config.status in order to
regenerate $(CONFIG_FILES).

* lisp/tramp.el (tramp-do-copy-or-rename-file-via-buffer)
(tramp-handle-file-local-copy, tramp-handle-write-region):
Generate always a new temp buffer. Kill it finally.
(tramp-handle-unhandled-file-name-directory): Take home directory
on remote host.
(tramp-handle-write-region): When `file-precious-flag' is set,
check also the checksums (in case of inline methods).

* texi/Makefile.in ($(localinfodir)): New target.
($(localinfodir)/%, $(localinfodir)/dir): Depend on it.

* texi/tramp.texi (Remote processes): Explain gud.el integration in
more detail.
(Frequently Asked Questions): Recommend `file-precious-flag' when
`tramp-chunksize' is set.
----------------------------
revision 2.147
date: 2005-11-20 14:16:40 -0800;  author: albinus;  state: Exp;  lines: +2 -1;

* lisp/tramp.el (tramp-send-command-and-read): New defun.
(tramp-handle-file-attributes-with-perl)
(tramp-handle-file-attributes-with-stat)
(tramp-handle-directory-files-and-attributes-with-perl)
(tramp-handle-directory-files-and-attributes-with-stat)
(tramp-get-remote-stat, tramp-get-remote-uid)
(tramp-get-remote-gid): Apply it.
(tramp-handle-insert-directory): Remove unnecessary comments.
(tramp-point-at-eol): Removed. All callees replaced by
`tramp-line-end-position'.
(tramp-barf-unless-okay): Don't pop up Tramp buffer in case of
error.
(tramp-get-ls-command, tramp-get-test-command)
(tramp-get-test-nt-command, tramp-get-file-exists-command)
(tramp-get-remote-ln, tramp-get-remote-perl)
(tramp-get-remote-stat)
(tramp-get-remote-uid, tramp-get-remote-gid): Apply
`with-connection-property'.
(tramp-get-connection-property, tramp-set-connection-property):
Move to tramp-cache.el.

* lisp/tramp-cache.el:
(tramp-get-connection-property, tramp-set-connection-property):
Moved from tramp.el.  Tramp messages added.
(with-connection-property): New macro.

* lisp/tramp-smb.el (tramp-smb-read-file-entry): `tramp-point-at-eol'
replaced by `tramp-line-end-position'.

* lisp/tramp-vc.el (tramp-handle-vc-user-login-name): Removed.
(tramp-vc-user-login-name): Rewritten.

* texi/tramp.texi (Remote File Ownership): Replace `user-full-name' by
`user-login-name'.
(Traces and Profiles): Add trace level 7.
----------------------------
revision 2.146
date: 2005-11-09 15:01:23 -0800;  author: albinus;  state: Exp;  lines: +37 -8;

* lisp/tramp.el (tramp-remote-process-environment): New defcustom.
(tramp-file-name-handler-alist): Add `dired-call-process'.
(tramp-handle-dired-call-process ): New defun.
(tramp-debug-message): Extend regexp for backtrace.
(tramp-message): Apply level specific prefixes.
(tramp-error): New defsubst.  Replace all calls of `message',
`signal' and `error' with corresponding Tramp message functions.
(tramp-handle-file-truename): Apply `tramp-equal-remote'.
(tramp-handle-expand-file-name): Use "~root" for tilde expansion
in case of su(do)? methods.  The home directory of the local user
will be taken else.
(tramp-handle-start-process): Use narrowing for protecting buffer
contents.
(tramp-file-name-handler): Remove signal handling.  Not necessary,
because `tramp-error' handles it now.
(tramp-buffer-name, tramp-debug-buffer-name): Handle the case USER
is nil.
(tramp-outline-level): Change formula in order to handle level 0.
(tramp-set-remote-path): Add debug message.
(tramp-enter-password): Don't erase the buffer, not necessary.
(tramp-open-connection-setup-interactive-shell): Don't (un)set
explicitely "TERM", "HISTFILE", "HISTSIZE" "MAIL" "MAILCHECK"
"MAILPATH" "CDPATH" "LC_TIME".  Set
`tramp-remote-process-environment' instead of.
(tramp-barf-unless-okay): Remove SUBSHELL (always nil) and SIGNAL
(always 'file-error).  Change all callees.
(tramp-send-string): Apply `delete-region' instead of
`erase-buffer'.  Necessary because of narrowing.

* lisp/tramp-smb.el (all) Replace all calls of `message', `signal' and
`error' with corresponding Tramp message functions.

* lisp/tramp-util.el (tramp-advice-gud-perldb-massage-args): New
defadvice.

* texi/tramp.texi (Remote processes): Improve doc.
----------------------------
revision 2.145
date: 2005-11-06 12:40:18 -0800;  author: albinus;  state: Exp;  lines: +29 -17;

* lisp/tramp.el (tramp-file-name-handler-alist): Remove `shell-command.
(tramp-handle-start-process, tramp-handle-call-process): Apply
`save-excursion'.
(tramp-handle-shell-command): Removed.
(tramp-file-name-for-operation): Add `dired-call-process'. It IS a
file name handler primitive.
(tramp-wait-for-regexp): Take the message string from right
buffer.
(tramp-post-connection): Remove code for checking encoding
commands.  It is also in `tramp-find-inline-encoding'.
(tramp-find-inline-encoding): Check for connection properties.  By
this, the commands won't be executed again for new connection
buffers.
(tramp-maybe-open-connection): Apply `tramp-send-command' instead
of `tramp-send-string'.  No changed functionality, but better
traces.

* lisp/tramp-util.el (top): Don't require "compile".  Add handlers for
`compilation-mode-hook' and `gud-mode-hook'.
(tramp-advice-start-process, tramp-advice-call-process): Call the
handlers with `apply'.
(tramp-gud-file-name): New defun.
(tramp-compilation-parse-errors-filename-function): Removed.  It
wasn't such a good idea.

* texi/tramp.texi (Remote processes): New section.  Replaces
`Compilation'.
----------------------------
revision 2.144
date: 2005-10-18 12:43:26 -0700;  author: albinus;  state: Exp;  lines: +8 -8;

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): `datadir',
`lispdir' and `infodir' should still contain environment
variables, which can be changed during make. `lispdir_default' and
`infodir_default' must be expanded for the Tramp manual.

* texi/tramp.texi (Traces and Profiles): Reference to `Outline Mode'
should be done for info pages only.
----------------------------
revision 2.143
date: 2005-10-13 13:55:22 -0700;  author: albinus;  state: Exp;  lines: +23 -19;

Version 2.1.4 released.

* configure.ac: Bump version.

* texi/tramp.texi (Bug Reports): Make a cross reference to `Traces and
Profiles'.
(Traces and Profiles): Explain settings for backtraces.
----------------------------
revision 2.142
date: 2005-10-12 13:49:29 -0700;  author: albinus;  state: Exp;  lines: +59 -23;

* lisp/tramp.el (top): Try to simplify XEmacs byte-compiler
pacification.
(tramp-verbose): Finish doc string.  New default value is 3.
(all): Apply new verbosity levels.
(tramp-get-debug-buffer): Remove definition of outline faces.  The
default values are good enough.
(tramp-bug): Explain setting of `tramp-verbose'.

* lisp/tramp-cache.el (all): Apply new verbosity levels.

* lisp/tramp-smb.el (top): Try to simplify XEmacs byte-compiler
pacification.
(all): Apply new verbosity levels.

* lisp/tramp-vc.el (top): Try to simplify XEmacs byte-compiler
pacification.

* texi/tramp.texi (Bug Reports, Traces and Profiles): Explain setting
of `tramp-verbose'.

* texi/trampinst.texi (Installation parameters): Try it now with @w{}.
----------------------------
revision 2.141
date: 2005-10-09 12:43:36 -0700;  author: albinus;  state: Exp;  lines: +1 -21;

* INSTALL: Provide working options for installing on MS Windows.

* lisp/tramp.el (tramp-completion-without-shell-p): Removed.  Not
needed anymore.
(tramp-md5-function): Fix typo in error message.
(tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-handle-file-name-all-completions): Rewritten in order to
profit from caching results.
(tramp-handle-file-name-completion): Removed unnecessary code.

* lisp/tramp-cache.el (with-cache-data): ,@body must be wrapped by
`progn'.  Add `edebug-form-spec' property.

* lisp/tramp-smb.el (tramp-smb-handle-file-name-all-completions):
Rewritten in order to profit from caching results.

* texi/tramp.texi (Dired): Node removed.  There are no limitations on
directory listings anymore.
(Default Method): Fix typo in variable name.
(Filename completion): Remove limitations on directory listings.

* texi/trampinst.texi (Installation parameters): Provide working
options for installing on MS Windows.
----------------------------
revision 2.140
date: 2005-09-18 14:06:28 -0700;  author: albinus;  state: Exp;  lines: +27 -0;

* lisp/tramp.el (tramp-login-prompt-regexp): Expand regexp in order to
cover prompts like "login as:".  Reported by Slawomir Nowaczyk
<slawomir.nowaczyk.847@student.lu.se>.
(tramp-debug-message): Remove FACE as parameter.  Not necessary
any longer, we use outline mode now.
(tramp-message, tramp-trace): Change callees.
(tramp-message-for-buffer): It is a defsubst now.
(tramp-get-debug-buffer): Initialize outline mode.
(tramp-outline-level): New defun.
(tramp-insert-with-face): Removed.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-maybe-open-connection): tramp-current-* and
tramp-current-hop-* values should be already expanded.
(tramp-action-login, tramp-read-passwd): Use tramp-current-hop-*.

* texi/tramp.texi (Traces and Profiles): New node.
----------------------------
revision 2.139
date: 2005-09-18 05:02:51 -0700;  author: albinus;  state: Exp;  lines: +3 -3;

Update all files to specify GFDL version 1.2.
----------------------------
revision 2.138
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +121 -116;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.137
date: 2005-02-20 08:11:49 -0800;  author: albinus;  state: Exp;  lines: +11 -8;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set always
permissions, because there might be an old auto-saved file
belonging to another original file.  This could be a security
threat.

* texi/trampver.texi.in: Replace "Emacs" by "GNU Emacs".

* texi/tramp.texi: Replace "Emacs" by "GNU Emacs".
(Default Method): Offer shortened syntax for "su" and "sudo"
methods.
----------------------------
revision 2.136
date: 2005-02-13 10:42:44 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* INSTALL, texi/tramp.texi, texi/trampinst.texi: Replace "Linux" by
"GNU/Linux".  Suggested by Richard M. Stallman <rms@gnu.org>

* aclocal.m4 (AC_PATH_LISPDIR): Document an alternative approach
configuring `lispdir'.  Not activated (yet).

* configure.ac: Documentation fix.
----------------------------
revision 2.135
date: 2005-02-12 03:19:00 -0800;  author: albinus;  state: Exp;  lines: +5 -5;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.134
date: 2005-02-02 14:38:25 -0800;  author: albinus;  state: Exp;  lines: +31 -27;

* INSTALL: Linux configure option prefix should be
"--prefix=/usr".  Reported by Bradley Dilger <dilger@wrecking.org>.

* configure.ac: Bump version (to 2.1.4-pre).  Change bug report
address to [tramp-devel@gnu.org].

* texi/tramp.texi (all): Change all addresses to .gnu.org.
(Obtaining Tramp): Mention the Nightly CVS Tree Tarball as CVS
direct access alternative.

* texi/trampinst.texi (Installation parameters): Linux configure option
prefix should be "--prefix=/usr".  Reported by Bradley Dilger
<dilger@wrecking.org>.
----------------------------
revision 2.133
date: 2005-01-09 11:10:39 -0800;  author: albinus;  state: Exp;  lines: +7 -14;

* lisp/tramp-util.el (tramp-remap-command): New defun.
(top): Remove `define-key' calls.  They are replaced by respective
`tramp-remap-command' and `add-menu-button' calls.  Add
`tramp-minor-mode' to `dired-mode-hook'.
(tramp-compile, tramp-recompile): Call the commands
asynchronously.  Add `compilation-mode' to *Compilation* buffer.

* texi/tramp.texi: (Compilation): Make reference to (X)Emacs manual
flavor specific.  Remove mentioned restrictions for Emacs < 21.4
and for XEmacs.
----------------------------
revision 2.132
date: 2005-01-05 13:20:52 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el: Fix copyright years.

* lisp/tramp-smb.el: Fix copyright years.  Adapt author address.

* lisp/tramp-util.el: Fix copyright years.  Adapt author address.
(tramp-minor-mode): Mode must toggle.

* texi/tramp.texi: Fix copyright years.
----------------------------
revision 2.131
date: 2005-01-04 15:19:03 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp.el (tramp-maybe-open-connection): If the local host does
not run a UNIX derivate, the local shell cannot handle command
sequences separated with ";".  Reported by Takashi Tsunakawa
<tuna@is.s.u-tokyo.ac.jp>.

* lisp/tramp-smb.el (tramp-smb-open-connection): Check existence of
`tramp-smb-program'.

* lisp/tramp-util.el (tramp-compile, tramp-recompile): Enable
`tramp-minor-mode' in buffer "*Compilation*".

* texi/tramp.texi (Compilation): Give a note that remote compilation is
performed synchronously only, for the time being.
----------------------------
revision 2.130
date: 2004-12-29 13:15:27 -0800;  author: albinus;  state: Exp;  lines: +27 -0;

* lisp/tramp-smb.el: Add new Todo item.

* lisp/tramp-util.el (tramp-minor-mode): New minor mode.  Add it to
`find-file-hooks'.
(tramp-minor-mode-map): Respective map.  Add remapping for
`compile' and `recompile'.
(tramp-recompile): New defun.

* texi/tramp.texi (Compilation): New section, describing compilation of
remote files.
----------------------------
revision 2.129
date: 2004-10-17 09:33:31 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.128
date: 2004-10-10 09:48:44 -0700;  author: albinus;  state: Exp;  lines: +3 -0;


* Makefile.in (savannah): Don't apply "configure" for Japanese
manual, but call "make -C texi" with proper variable settings.

* aclocal.m4 (AC_EMACS_INFO): Write default values in help output
for "--with-xemacs" and "--with-emacs".
(AC_PATH_LISPDIR): Write default value in help output for
"--with-lispdir".
(all): Unify capitalization for help output.

* configure.ac: Bump version (to 2.1.3-pre).

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (NONGNU): Kai uses a new directory structure in his
working copies.
(savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.127
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +3 -3;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 2.126
date: 2004-09-07 14:19:18 -0700;  author: albinus;  state: Exp;  lines: +35 -0;


* texi/tramp.texi (Frequently Asked Questions): Add item for host name
indication in mode line.
----------------------------
revision 2.125
date: 2004-09-05 11:26:32 -0700;  author: albinus;  state: Exp;  lines: +42 -0;


* lisp/tramp.el (top): Undefine "/" in `read-file-name-map' when syntax
is 'url.  Otherwise, XEmacs would break the syntax with
`minibuffer-electric-separator'.

* text/tramp.texi (Alternative Syntax): New section.
----------------------------
revision 2.124
date: 2004-09-05 02:23:01 -0700;  author: albinus;  state: Exp;  lines: +13 -9;


* texi/tramp.texi (Frequently Asked Questions): Improve second
abbreviation example.
----------------------------
revision 2.123
date: 2004-09-04 07:52:00 -0700;  author: albinus;  state: Exp;  lines: +51 -6;


* lisp/tramp-efs.el (all): Rename `tramp-postfix-single-method-*' to
`tramp-postfix-method-*'.

* texi/tramp.texi (Frequently Asked Questions): Add two examples of
using abbreviations to shortening Tramp file names.
----------------------------
revision 2.122
date: 2004-08-31 14:20:58 -0700;  author: albinus;  state: Exp;  lines: +13 -11;


* texi/tramp.texi (Frequently Asked Questions): Add item describing
approaches shortening Tramp file names to be typed.
----------------------------
revision 2.121
date: 2004-08-31 13:57:16 -0700;  author: albinus;  state: Exp;  lines: +76 -1;


* texi/tramp.texi (Frequently Asked Questions): Add item describing
approaches shortening Tramp file names to be typed.
----------------------------
revision 2.120
date: 2004-08-29 09:17:37 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(Inline methods): Todo item for plink and
tramp-rsh-end-of-line issue.
----------------------------
revision 2.119
date: 2004-08-09 13:20:38 -0700;  author: albinus;  state: Exp;  lines: +40 -9;


Version 2.1.1 released.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-methods): "sftp", "psftp": new external methods.
"plink", "plink1" and "pscp": parameter for port specification is
"-P".

* texi/tramp.texi (Inline methods): Correct wrong (outdated) index
"km".  Say, that the port specification is also available for
"plink".
(External transfer methods): Add "sftp" and "psftp" methods.
----------------------------
revision 2.118
date: 2004-08-02 14:07:19 -0700;  author: albinus;  state: Exp;  lines: +32 -8;


* lisp/tramp.el (tramp-methods): Add "(-p" "%p)" in login-args where
applicable for the port kludge.  Arrange login-args as list of
lists, in order to discard a sublist when the corresponding
parameter is not set (like user name, port number).  Adapt
docstring.
(tramp-maybe-open-connection): Change evaluation of login-args
according the the changes above.
(tramp-make-tramp-file-name): Use "%l" as placeholder for the
localname part.  "%p" is used for port numbers now, and we want to
avoid headaches.

* texi/tramp.texi (all): Exchange nil by @code{nil} where not done
already.
(Inline methods): Say explicitely, that the host name part is
ignored for the su and sudo methods.
(Default User): Give an example for user name mismatch if the
connection method has an own configuration. Show solution.
----------------------------
revision 2.117
date: 2004-08-01 07:36:24 -0700;  author: albinus;  state: Exp;  lines: +64 -0;


* lisp/tramp.el (tramp-default-method-alist)
(tramp-default-proxies-alist): Correcting doc string.
(tramp-default-user, tramp-default-user-alist)
(tramp-default-host): New defcustom.
(tramp-do-copy-or-rename-file-out-of-band)
(tramp-handle-expand-file-name, tramp-action-login)
(tramp-buffer-name, tramp-debug-buffer-name)
(tramp-maybe-open-connection)
(tramp-read-passwd, tramp-clear-passwd): Apply `tramp-find-user'
and `tramp-find-host'.
(tramp-find-default-method): Allow nil regexps.
(tramp-find-default-user, tramp-find-user)
(tramp-find-default-host, tramp-find-host): New defun.

* lisp/tramp-smb.el (top): Add empty (anonymous) user to
`tramp-default-user-alist' for smb method.

* texi/tramp.texi (Default User, Default Host): New chapters.
----------------------------
revision 2.116
date: 2004-07-30 12:52:03 -0700;  author: albinus;  state: Exp;  lines: +87 -200;


* INSTALL: Precise supported (X)Emacs versions.

* aclocal.m4 (AC_EMACS_INFO): Add check for proper (X)Emacs
version.

* configure.ac: Precise comments.

* lisp/trampver.el.in: Check for (X)Emacs version.  Code is from macro
AC_EMACS_INFO of aclocal.m4.

* lisp/tramp.el (top): Remove (X)Emacs version check.
(tramp-maybe-open-connection): Handle NIL values in
`tramp-default-proxies-alist'.

* texi/trampver.texi.in: Remove `postfixmultihop'.  Rename
`postfixsinglehop' into `postfixhop'.

* texi/tramp.texi (top): Rename `postfixsinglehop' into `postfixhop'.
(Multi-hop Methods, Multi-hop filename syntax): Removed, including
al pointers to.
(Multi-hops): New chapter.
(History of Tramp): Proxy hosts mentioned.
(Frequently Asked Questions): Precise supported (X)Emacs
versions.
----------------------------
revision 2.115
date: 2004-04-25 08:41:10 -0700;  author: albinus;  state: Exp;  lines: +60 -7;
branches:  2.115.2;


* lisp/tramp.el (tramp-backup-directory-alist)
(tramp-bkup-backup-directory-info): New defcustoms.
(tramp-file-name-handler-alist): Add entry for
`find-backup-file-name'.
(tramp-handle-find-backup-file-name): New function.  Implements
Tramp's find-backup-file-name.

* lisp/tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
`find-backup-file-name'.

* texi/tramp.el (Auto-save and Backup): Explain exploitation of new
variables `tramp-backup-directory-alist' and
`tramp-bkup-backup-directory-info'.
----------------------------
revision 2.114
date: 2004-04-09 09:14:28 -0700;  author: albinus;  state: Exp;  lines: +277 -273;


Complete rework, based on review by Karl Berry <karl@gnu.org>

* aclocal.m4 (AC_EMACS_INSTALL): Rewrite function.  Apply a
variable substitution rather then a file substitution

* configure.ac: Adapt comment for AC_EMACS_INSTALL call.

* texi/Makefile.in (INSTALL_CHAPTER): New variable, set by configure.
(TEXI_FILES): Includes "trampinst.texi" also if $(INSTALL_CHAPTER)
is "yes".
($(localinfodir)/%, %.dvi, tramp-%.html, tramp_ja-%.html):
$(INSTALL_CHAPTER) is a parameter, too.

* texi/trampver.texi.in (trampver, tramp): Macros changed to flags.
(otherflavor, installationchapter): Macros removed.  Not necessary
any longer.
(all): "tramp-" and "-" removed from flag names.

* texi/tramp.texi, texi/tramp_ja.texi (tramp): Macro removed.
(Obtaining Tramp): Flag removed from title.
(all): "tramp-" and "-" removed from flag names.  Flags `tramp'
and `trampver' used properly.  Flag `tramp-inst' replaced by
`installchapter'.  Installation related text adapted.

* texi/trampinst.texi (otherflavor, installationchapter): Macros
removed.  Not necessary any longer.
(all): Includes "trampver.texi" for flag setting.  All local flags
moved to that file.  "tramp-" and "-" removed from flag names.
Flags `tramp' and `trampver' used properly.  Flag `tramp-inst'
replaced by `installchapter'.
----------------------------
revision 2.113
date: 2004-03-29 12:37:49 -0800;  author: albinus;  state: Exp;  lines: +2 -10;


* configure.ac: Beautify check for "install-info".

* INSTALL (Installation Names): Describe what to do in case of
errors and warnings.
(Load Path): Add XEmacs example.

* texi/Makefile.in (INSTALL_INFO): Use option `--quiet'.

* texi/tramp.texi (Frequently Asked Questions): Use "MS Windows
NT/2000/XP" (not only "NT").  Remove doubled entry "What kinds of
systems does @tramp{} work on".

* texi/trampinst.texi (Installation parameters): Describe what to do in
case of errors and warnings.
----------------------------
revision 2.112
date: 2004-03-21 12:55:48 -0800;  author: albinus;  state: Exp;  lines: +39 -12;


* lisp/tramp.el (TODO): Remove items done.

* texi/tramp.texi (Auto-save and Backup): Make file name example
(X)Emacs neutral. In case of XEmacs, `bkup-backup-directory-info'
and `auto-save-directory' must be used.
----------------------------
revision 2.111
date: 2004-03-07 22:11:15 -0800;  author: albinus;  state: Exp;  lines: +13 -23;


* lisp/tramp.el (tramp-out-of-band-prompt-regexp)
(tramp-actions-copy-out-of-band): New defcustoms.
(tramp-do-copy-or-rename-file-out-of-band): Asynchronous process
used instead of a synchronous one.  Allows password entering.
(tramp-action-out-of-band): New defun.
(tramp-open-connection-rsh, tramp-method-out-of-band-p): Remove
restriction with password from doc string.
(tramp-bug): Add variables `tramp-terminal-prompt-regexp',
`tramp-out-of-band-prompt-regexp',
`tramp-actions-copy-out-of-band', `password-cache' and
`password-cache-expiry'.
(toplevel): Remove todo item wrt ssh-agent.  Obsolete due to
password caching.

* texi/tramp.texi (Overview, Connection types)
(External transfer methods, Default Method)
(Windows setup hints): Remove restriction of password entering
with external methods.
----------------------------
revision 2.110
date: 2004-02-29 05:29:08 -0800;  author: albinus;  state: Exp;  lines: +48 -3;


* lisp/tramp.el (top-level): Require password.el if visible.  Should be
mandatory once No Gnus has found its way into (X)Emacs.
(tramp-read-passwd): Invoke `password-read' if available,
`read-passwd' otherwise. `ange-ftp-read-passwd' isn't used as
fallback any longer.
(tramp-clear-passwd): New function.
(tramp-process-actions, tramp-process-multi-actions): Clear
password cache if login has failed.

* lisp/tramp-smb.el (tramp-smb-open-connection): Clear password cache
if login has failed.

* texi/tramp.texi (all): Use "@value{emacs-name}" everywhere where it
is intended (some accidents of last fix corrected).
(Password caching): New node.
(External transfer methods): Refer to password caching for "smb"
method.

* contrib/password.el: New file.  Taken from No Gnus.
----------------------------
revision 2.109
date: 2004-02-06 01:25:46 -0800;  author: albinus;  state: Exp;  lines: +88 -59;


* texi/tramp.texi (all): Replace "Emacs" by "@value{emacs-other-name}"
where possible.
(External transfer methods): "ftp" is possible for XEmacs, too.
(Auto-save and Backup): Add auto-save.  Based on wording of Kai.
(Frequently Asked Questions): Remote hosts must not be Unix-like
for "smb" method.
----------------------------
revision 2.108
date: 2004-02-01 06:33:56 -0800;  author: albinus;  state: Exp;  lines: +15 -6;


* texi/tramp.texi (all): Savannah URLs unified to
"http://savannah.nongnu.org".
(Top): Refer to Savannah mailing list as the major one.  Mention
older mailing lists in HTML mode only.
----------------------------
revision 2.107
date: 2004-01-22 14:56:46 -0800;  author: albinus;  state: Exp;  lines: +15 -0;


* lisp/tramp.el (tramp-completion-function-alist-ssh): Add
`tramp-parse-shostkeys' and `tramp-parse-sknownhosts'.
(tramp-completion-function-alist): It's a defvar now, because we
want to apply the optimized `tramp-set-completion-function'
instead of a static list.
(tramp-set-completion-function): Implementation tuned.  Avoid
double entries, and entries where the function or the
file/directory doesn' exist.
(tramp-parse-shostkeys, tramp-parse-sknownhosts): New functions
for SSH2.

* texi/tramp.texi (Customizing Completion): Explain new functions
`tramp-parse-shostkeys' and `tramp-parse-sknownhosts'.
----------------------------
revision 2.106
date: 2004-01-05 14:30:37 -0800;  author: albinus;  state: Exp;  lines: +8 -4;


* lisp/tramp-smb.el (tramp-smb-maybe-open-connection): Use
`tramp-process-connection-type'.

* texi/tramp.texi (Issues): Explain disabling "auto-autoloads.el*" for
unified filenames with XEmacs.
----------------------------
revision 2.105
date: 2004-01-02 03:38:32 -0800;  author: albinus;  state: Exp;  lines: +3 -7;


* configure.ac: *.elc files must be removed always.  Otherwise,
there could be problems if they are created with the wrong Emacs
flavor.

* texi/tramp.texi (Obtaining TRAMP): Remove CVS login from example.
That's necessary for pserver password authentification only.
----------------------------
revision 2.104
date: 2003-12-29 15:18:36 -0800;  author: uid67418;  state: Exp;  lines: +1 -1;


* texi/tramp.texi (Obtaining TRAMP): Change remaining
"subversions.gnu.org" to "savannah.nongnu.org".  Overlooked last time.
----------------------------
revision 2.103
date: 2003-12-27 13:23:48 -0800;  author: uid67418;  state: Exp;  lines: +19 -0;


* lisp/tramp.el (tramp-completion-mode): Add XEmacs input
events. Until now it was not necessary, because they are
evaluated in case of unified filenames only.

* lisp/tramp-efs.el (top): Add all XEmacs download sites to
`tramp-default-method-alist'.  The existing settings should be
sufficient already, but it's better to make it explicitely.
(tramp-efs-method-given, tramp-efs-method-regexp): New variables.
(tramp-efs-path-regexp, tramp-efs-path-format-string)
(tramp-efs-path-format-without-user)
(tramp-efs-path-user-at-host-format)
(tramp-efs-path-host-format, tramp-efs-path-root-regexp): Changed
to a function.  Their values depend on the existence of the method
tag in filename.
(tramp-efs-file-name-handler): Check first whether the method tag
is given in a filename.
(tramp-efs-file-name-p): A syntax check must be performed first,
otherwise `tramp-dissect-file-name' returns with an error.

* lisp/tramp-ftp.el (Commentary): Removing pointer to EFS.  It has its
own module.

* lisp/tramp-smb.el (top): Setting default value in
`tramp-default-method-alist' corrected.  Order of USER and HOST
have been wrong.  Nobody claimed for months ...

* texi/tramp.texi (Issues): Describe how to use unified filenames with
XEmacs.
----------------------------
revision 2.102
date: 2003-12-25 08:18:29 -0800;  author: uid67418;  state: Exp;  lines: +2 -2;


	* lisp/tramp.el (tramp-completion-mode) Don't check for 'xemacs
but
	`tramp-unified-filenames'.

	* lisp/tramp-smb.el (tramp-smb-errors): Add
NT_STATUS_WRONG_PASSWORD"
	and "NT_STATUS_NETWORK_ACCESS_DENIED".
	(tramp-smb-maybe-open-connection): Set `process-connection-type'
	to 'pty.  Suggested by Piet van Oostrum <piet@cs.uu.nl>.

	* lisp/tramp-smb.el (tramp-smb-process-running): Removed.  Since
we
	acknowledge the virtual prompt for shares, there's no need for
	distinction of reading shares (process ends afterwards) and
	interactive mode of smblient.
	(tramp-smb-open-connection): Setting process sentinel removed.
	(tramp-smb-wait-for-output): Algorithm simplified, again.  Hope
it
	is more robust, too.

	* lisp/tramp-smb.el (tramp-smb-prompt): Add virtual prompt from
	listing shares, too.
	(tramp-smb-errors): Add "NT_STATUS_ACCOUNT_LOCKED_OUT".
	(tramp-smb-wait-for-output): Optimize algorithm getting pending
	output.  If it was received chunkwise, there have been problems.
	Remove the "prompt not found" error message; it is obvious.

	* lisp/tramp-smb.el (tramp-smb-handle-file-writable-p): Handle
the
case
	of non-existing filename, too.  Reported by Christoph Bauer
	<c_bauer@informatik.uni-kl.de>.
	(tramp-smb-get-file-entries): The directory in question should
	have permissions "drwxrwxrwx".  Just virtual, because we don't
	know the real permissions.  Don't we know?

	* lisp/tramp.texi (Obtaining TRAMP): Change Tramp CVS directory
to
	"-d:ext:anoncvs@savannah.nongnu.org:/cvsroot/tramp" as advised
on
	the Savannah page.
----------------------------
revision 2.101
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +18 -15;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 2.100
date: 2003-11-02 12:16:50 -0800;  author: albinus;  state: Exp;  lines: +5 -5;

	* texi/tramp.texi (Inline methods): Small grammar fix.
	(External transfer methods): Likewise.
	Submitted by Thien-Thi Nguyen <ttn@gnu.org> in Emacs CVS.
	Replace ASCII with @acronym{ASCII}.
	Submitted by Jesper Harder <harder@ifa.au.dk> in Emacs CVS.
----------------------------
revision 2.99
date: 2003-10-08 12:57:02 -0700;  author: kai;  state: Exp;  lines: +2 -2;
From Yoichi NAKAYAMA <yoichi@geiin.org>:

* tramp.texi (External transfer methods, Auto-save and Backup):
Typo fixes.
* tramp_ja.texi: Sync with tramp.texi version 2.68.
----------------------------
revision 2.98
date: 2003-08-23 08:33:01 -0700;  author: kai;  state: Exp;  lines: +8 -8;
(Default Method): Too many "use" in one sentence.
Rephrase.  Reported by Christian Kirsch.
(Filename Syntax): Old `su' example is probably a left-over from
the sm/su method naming.  Replace with `ssh', instead.
----------------------------
revision 2.97
date: 2003-08-22 13:04:53 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(Configuration): Pointer to new subsection added.
----------------------------
revision 2.96
date: 2003-08-22 13:01:31 -0700;  author: kai;  state: Exp;  lines: +1 -1;
@dots{} instead of @dots.
----------------------------
revision 2.95
date: 2003-08-22 12:54:30 -0700;  author: kai;  state: Exp;  lines: +54 -8;
(Configuration): Tramp now chooses base64/uuencode
automatically.  Update wording accordingly.
(Top): More description for the `Default Method' menu entry.
(Default Method): Use @code, not @var, for Lisp variables.
(Default Method): New subsection `Which method is the right one
for me?'  Suggested by Christian Kirsch.
----------------------------
revision 2.94
date: 2003-08-08 08:04:57 -0700;  author: kai;  state: Exp;  lines: +10 -0;
(Remote shell setup): Warn of environment variables
FRUMPLE if user frumple exists.  Suggested by Sven Gabriel
<sven.gabriel@imk.fzk.de>.
----------------------------
revision 2.93
date: 2003-07-19 12:59:29 -0700;  author: kai;  state: Exp;  lines: +5 -0;
(Remote shell setup): Mention tilde as another
problematic non-Bourne construct.
----------------------------
revision 2.92
date: 2003-07-17 13:06:01 -0700;  author: kai;  state: Exp;  lines: +40 -0;
(Remote shell setup): Explain about problems with
non-Bourne commands in ~/.profile and ~/.shrc.
----------------------------
revision 2.91
date: 2003-06-17 04:24:00 -0700;  author: kai;  state: Exp;  lines: +9 -3;
2003-06-17  Adrian Aichner  <adrian@xemacs.org>

	* tramp.texi: Fix minor typos.
	* tramp.texi (Concept Index): Added to make manual searchable via
	`Info-index'.
	* tramp.texi (Version Control): Add cindex entry.
----------------------------
revision 2.90
date: 2003-06-15 00:30:23 -0700;  author: kai;  state: Exp;  lines: +7 -7;
Move direntry later, after copying and before
titlepage.
----------------------------
revision 2.89
date: 2003-05-24 15:41:02 -0700;  author: albinus;  state: Exp;  lines: +17 -1;

* Makefile.in (configure): It depends on "aclocal.m4", too.

* aclocal.m4, lisp/Makefile.in, contrib/Makefile.in: Use
`--no-site-file' option for Emacs call, in order to avoid loading of
Tramp in site specific init files.  Reported by Harry Putnam
<reader@newsguy.com>.

* lisp/Makefile.in (.PHONY): New target.
(all): "trampver.el" and "tramp.el" must be handled first due to
dependencies.

* lisp/tramp.el (tramp-completion-function-alist): Add completion
function for "remcp", "remsh" and "plink1".

* texi/tramp.texi (Inline methods): Add methods `remsh' and `plink1'.
(External transfer methods): Add method `remcp'.
(Multi-hop Methods): Add method `remsh'.
----------------------------
revision 2.88
date: 2003-04-06 14:44:33 -0700;  author: albinus;  state: Exp;  lines: +26 -253;

* aclocal.m4 (AC_EMACS_INSTALL): New macro.  Depending on
configure option `--with-packaging', Tramp installation chapter
will be part of the manual, or not.

* configure.ac (top-level): Apply `AC_EMACS_INSTALL'.

* Makefile.in (xemacs, emacs): Call `./configure --with-packaging'
in order to generate `trampver.texi' without installation chapter.

* texi/Makefile.in (%.dvi): Apply parameter `-t "@set $(EMACS_INFO)"'
for texi2dvi.

* texi/tramp.texi (top-level): Move installation related entries to
trampinst.texi.  Apply respective macros instead of, in case flag
`tramp-inst' is set.
Move all (X)Emacs related flags to trampver.texi.in.

* texi/trampinst.texi: New file.  Contains installation related
entries.

* texi/trampver.texi.in (top-level): Define all (X)Emacs related
flags.  Include trampinst.texi depending on configure option
`--with-packaging'.
----------------------------
revision 2.87
date: 2003-03-30 12:12:18 -0800;  author: kai;  state: Exp;  lines: +3 -3;
Say "Emacs" instead of "GNU Emacs" to follow
Richard's change in Emacs CVS.
----------------------------
revision 2.86
date: 2003-03-28 09:29:58 -0800;  author: kai;  state: Exp;  lines: +34 -0;
(Auto-save and Backup): New node.
----------------------------
revision 2.85
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;  lines: +156 -74;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.84
date: 2003-03-05 14:33:17 -0800;  author: albinus;  state: Exp;  lines: +22 -2;

* Makefile (tramp.html): Generate both `tramp-emacs.html' and
`tramp-xemacs.html'.  Link `tramp.html' to
`tramp-emacs.html'. Since a web page is remote, a user must have
the choice to switch between the pages.
(tramp-%.html): New target for generating `tramp-emacs.html' and
`tramp-xemacs.html'.
(install-html): Copy `*.html'.
(savannah): More or less the same.

* tramp.texi (Top): Rename "Emacs" to "GNU Emacs" in order to have
better differentiation to "XEmacs".  `emacs-other-name',
`emacs-other-dir' and `emacs-other-file-name' are new macros in
order to point to the other Emacs flavor where appropriate.  In
info case, point to node `Installation' in order to explain how to
generate the other way.  In html case, make a link to the other
html file.
(Installation): Short explanation the option for the other Emacs
flavor.
----------------------------
revision 2.83
date: 2003-02-28 10:12:30 -0800;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.texi: Bump version.

* tramp.el (tramp-version): Bump.
(tramp-handle-expand-file-name): Protect against short localnames
when comparing with "/../".

* Makefile (VERSION): Bump.
----------------------------
revision 2.82
date: 2003-02-15 10:37:30 -0800;  author: kai;  state: Exp;  lines: +23 -22;
* tramp.texi: Replace word `path' with `localname' where used as
a component of a Tramp file name.  In GNU, the word `path' is
used only for search paths, ie lists of directories.

* tramp-vc.el, tramp.el: Replace term `path' with `localname'
unless it is used for a search path.  In GNU, the word `path' is
reserved for search paths.

* tramp.el (tramp-do-copy-or-rename-file-one-local): New
function.  Not implemented.  Not used.  Should invoke rcp or scp
directly to keep the time.
----------------------------
revision 2.81
date: 2003-02-09 11:22:36 -0800;  author: albinus;  state: Exp;  lines: +10 -0;

* tramp.el (tramp-chunksize): It's now a defcustom.  Set to 500 on
systems only known to have a buggy `process-send-string'
implementation.  First black-listed constellation is GNU Emacs/
hpux.
(tramp-send-region): Correct debug message.
(tramp-bug): Add `tramp-chunksize'.
* tramp.texi (Frequently Asked Questions): `tramp-chunksize'
introduced.
----------------------------
revision 2.80
date: 2003-02-08 10:39:55 -0800;  author: albinus;  state: Exp;  lines: +19 -6;

* tramp.texi (Installation): Explain what to do if files from the
tramp/contrib directory are needed.
----------------------------
revision 2.79
date: 2003-02-05 11:34:18 -0800;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.texi (Installation): In Emacs, use M-x
texinfo-format-buffer RET, not M-x makeinfo-buffer RET.  Reported
by gebser@ameritech.net.

* tramp.el (tramp-send-region): Protect against tramp-chunksize
being nil.

* Makefile (VERSION): Bump.
----------------------------
revision 2.78
date: 2003-02-05 11:30:30 -0800;  author: kai;  state: Exp;  lines: +1 -1;
(Installation): In Emacs, use M-x
texinfo-format-buffer RET, not M-x makeinfo-buffer RET.  Reported
by gebser@ameritech.net.
----------------------------
revision 2.77
date: 2003-02-01 08:22:10 -0800;  author: albinus;  state: Exp;  lines: +44 -12;


* tramp.texi (Frequently Asked Questions): Explain a workaround if
another package loads accidently Ange-FTP.
----------------------------
revision 2.76
date: 2003-01-24 12:29:24 -0800;  author: albinus;  state: Exp;  lines: +13 -7;


* tramp.el (tramp-completion-function-alist-ssh): Add parsing of
"/etc/ssh_config" and "~/.ssh/config".  Suggested by Kai.
(tramp-completion-function-alist, tramp-set-completion-function):
Doc string update.
(tramp-parse-sconfig, tramp-parse-sconfig-group): New functions.
Provide parsing of "~/.ssh/config" style files.

* tramp.texi (Customizing Completion): Add function
`tramp-parse-sconfig'.  Change example of
`tramp-set-completion-function', because parsing of ssh config
files looks more natural.
----------------------------
revision 2.75
date: 2002-12-23 06:03:45 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.28 released.
----------------------------
revision 2.74
date: 2002-12-05 14:29:23 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.27 released.
----------------------------
revision 2.73
date: 2002-11-28 13:38:40 -0800;  author: kai;  state: Exp;  lines: +1 -1;
Adjust version numbers in files.
----------------------------
revision 2.72
date: 2002-11-28 13:03:34 -0800;  author: albinus;  state: Exp;  lines: +6 -1;


* tramp.el (top-level): Require tramp-smb.el only if local
Operating System is not MS Windows.  There's no need for the SMB
method there, because those Emacsen support UNC file names.
(tramp-handle-file-modes): Use Emacs file name primitives instead
of calling tramp-handle-* equivalents directly.  Needed for
tramp-smb.

* tramp-smb.el (tramp-smb-errors): List of error strings extended.
(tramp-smb-not-handled-yet): Function removed.  All I/O primitives
are handled now.  All places where used updated accordingly.
(tramp-smb-handle-copy-file, tramp-smb-handle-delete-file)
(tramp-smb-handle-file-local-copy, tramp-smb-handle-rename-file)
(tramp-smb-handle-write-region, tramp-smb-open-connection): Error
handling improved.
(tramp-smb-handle-delete-directory)
(tramp-smb-handle-directory-files)
(tramp-smb-handle-directory-files-and-attributes)
(tramp-smb-handle-make-directory)
(tramp-smb-handle-make-directory-internal): New file name
primitive functions implemented.
(tramp-smb-handle-insert-directory): In case parameter is not a
directory, the result of "dir filename*" will return too many
results.  They are filtered out now.
(tramp-smb-send-command): Returns nil if there has been an error
message from smbclient.  Used for improved error handling
mentioned above.
(tramp-smb-wait-for-output): Timeouts removed.  Too much trouble
with.
(tramp-smb-time-less-p, tramp-smb-time-subtract): Handle the case
when T1 or T2 is nil.  It shouldn't happen ever, but it did once.

* tramp.texi (External transfer methods): Note added for `smb'
method that's not implemented for Emacsen running locally under MS
Windows.  UNC file names shall be used instead of.
----------------------------
revision 2.71
date: 2002-11-22 14:51:36 -0800;  author: albinus;  state: Exp;  lines: +23 -18;


* tramp-smb.el (tramp-smb-handle-substitute-in-file-name):
Removed.  The default handler is good enough for us now.
(tramp-smb-advice-PC-do-completion): Advice for
`PC-do-completion'.  Corrects a the inconvenient usage of
`substitute-in-file-name' there.

* tramp.texi (External transfer methods): Remind the application
of "$$" in share names of the `smb' method.
----------------------------
revision 2.70
date: 2002-11-21 14:04:25 -0800;  author: albinus;  state: Exp;  lines: +34 -1;

* tramp-smb.el (tramp-use-smb): Remove variable.  "smb" method is
active now; beta test can start.
(tramp-smb-handle-file-newer-than-file-p): Apply
`tramp-smb-time-less-p' but `tramp-time-diff'.  Seems to be more
general.
(tramp-smb-handle-insert-directory): Use SWITCHES in order to
decide how to sort (but obscure dired variables).  Don't apply
`save-excursion'; the cursor must be at the end of the buffer
after insertion.  I should have it done from the beginning ...
(tramp-smb-handle-write-region): Remove unused variable
`trampbuf'.  Thanx to XEmacs compiler warning.
(tramp-smb-read-file-entry): Simplify handling of the dont-know
mtime value.
(tramp-smb-maybe-open-connection): Remove unused variable
`last-cmd-time'.  Thanx to XEmacs compiler warning.

* tramp.texi (External transfer methods): Add description of `smb'
method.
----------------------------
revision 2.69
date: 2002-10-13 13:27:29 -0700;  author: albinus;  state: Exp;  lines: +20 -20;

2002-10-13  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-advice-find-file-name-handler): Remove defadvice
	because it might be not a good idea to hook into Emacs built-in
	subroutiones. Suggested by RMS.
	(tramp-primitive-file-name): Handle all primitives now.
	(tramp-file-name-handler): Allow call of
	`tramp-ftp-file-name-handler' for functions only defined in
	`tramp-file-name-handler-alist'.  Strange.

2002-10-12  Michael Albinus  <Michael.Albinus@alcatel.de>

	* Makefile (tramp): Add tramp-uu.elc and tramp-ftp.elc.

	* tramp.el (main): Require `tramp-ftp' after load in order to
	avoid infloop. Autoload `tramp-ftp-file-name-p' for compiler
	satisfaction.
	(tramp-primitive-file-name): Add handling of `expand-file-name'
	and `file-newer-than-file-p'.
	(tramp-file-name-handler): Call `tramp-primitive-file-name' via
	`apply'.

	* tramp-ftp.el (main): Require `tramp'.


2002-10-11  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp-ftp.el: New file.

	* tramp.el (tramp-default-method): Adapt doc string.
	(tramp-ftp-method, tramp-completion-function-alist-ftp)
	(tramp-disable-ange-ftp, tramp-invoke-ange-ftp)
	(tramp-ange-ftp-file-name-p, tramp-make-ange-ftp-file-name): Moved
	to tramp-ftp.el or removed (if not needed any longer).  Callees
	adapted.
	(tramp-completion-function-alist): "ftp" entry removed.  Will be
	added from within tramp-ftp.el.
	(tramp-set-completion-function ): Allow setting of methods not
	defined yet.
	(tramp-run-real-handler, tramp-completion-run-real-handler):
	Remove `ange-ftp-hook-function' handling.  Make
	`inhibit-file-name-handlers' a cons but a list.
	(tramp-advice-find-file-name-handler): Advice for
	`find-file-name-handler'.  Check for Ange-FTP file names,
	applicable for NON built-in primitives only.
	(tramp-primitive-file-name): New function.  Returns filename for
	some built-in primitives.
	(tramp-file-name-handler): Check for Ange-FTP file names (built-in
	primitives only).  Forward to Ange-FTP in case of.
	(tramp-completion-file-name-handler): Remove catch for
	`tramp-forward-to-ange-ftp'.  Not necessary any longer.
	(tramp-flatten-list): Remove function.  Never used.
	(tramp-completion-mode, tramp-get-completion-methods): Special
	handling of `tramp-ftp-method' removed.  It's part of
	`tramp-methods' now (as foreign method).

2002-10-13  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Windows setup hints): Fix typo (missing {} after
	@dots).
	(Inline methods, External transfer methods)
	(Remote shell setup, Windows setup hints)
	(Frequently Asked Questions, Issues): Replace "Tramp" by
	"@tramp{}".
----------------------------
revision 2.68
date: 2002-10-12 02:04:36 -0700;  author: kai;  state: Exp;  lines: +17 -0;
(Windows setup hints): Mention possible ssh-agent
issues under Windows.  Suggestion from Francis Litterio.
----------------------------
revision 2.67
date: 2002-10-11 01:17:55 -0700;  author: kai;  state: Exp;  lines: +17 -3;
(Windows setup hints): Mention possible scp problems
with Cygwin scp.
----------------------------
revision 2.66
date: 2002-10-08 11:01:22 -0700;  author: kai;  state: Exp;  lines: +7 -7;
(Installation, Inline methods)
(Customizing Completion, Remote shell setup)
(Frequently Asked Questions): Fix typos.  From Francis Litterio
<franl@world.std.com>.
----------------------------
revision 2.65
date: 2002-10-06 12:03:20 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(VERSION): Bump.
----------------------------
revision 2.64
date: 2002-10-03 12:31:09 -0700;  author: kai;  state: Exp;  lines: +28 -31;
* tramp.texi: Move @copying section to preamble of document.  Do
@insertcopying on page after the title page for tex output, and in
the top node otherwise.

* Makefile (realclean): New target, delete info file and tarball
here.
----------------------------
revision 2.63
date: 2002-09-29 09:07:44 -0700;  author: kai;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.62
date: 2002-09-27 14:37:15 -0700;  author: albinus;  state: Exp;  lines: +88 -204;


	* tramp.texi (Inline methods): Explain that encoding/decoding
	commands are selected automagically ,based on `uuencode',
	'mimencode' and anown Perl implementation of base-64
	coding. Actualize the methods with respect to reality.
	(External transfer methods): Add missing methods `scp1', `scp2',
	`scp1_old', `scp2_old' and `ftp'.
	(Multi-hop Methods): Remove `multiu'.

	* tramp.el (tramp-methods, tramp-completion-function-alist):
	Rename "scp1-old", "scp2-old", "ssh1-old", "ssh2-old" to
	"*_old". There have been problems in method name completion,
	because "-" is a word delimeter for partial completion mode.
	(tramp-completion-function-alist): Set
	`tramp-completion-function-alist-ssh' as completion function for
	"fcp".
----------------------------
revision 2.61
date: 2002-09-24 09:22:16 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.texi: Bump version.

* tramp.el (tramp-handle-file-truename): Eliminate unused
variable.
(tramp-version): Bump.
----------------------------
revision 2.60
date: 2002-09-24 02:57:55 -0700;  author: kai;  state: Exp;  lines: +4 -4;
(tramp-find-inline-encoding): Don't redirect stdout to
/dev/null to avoid "chmode go-rwx" operation from "mimencode
>/dev/null" as root(!), and to check the output of the decoding
command.
----------------------------
revision 2.59
date: 2002-09-22 10:29:46 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.22.
----------------------------
revision 2.58
date: 2002-09-22 09:25:41 -0700;  author: albinus;  state: Exp;  lines: +7 -8;

	* tramp.el (tramp-parse-rhosts, tramp-parse-shosts)
	(tramp-parse-hosts, tramp-parse-passwd): Apply `push' but
	`add-to-list' for performance reasons.
	(tramp-get-completion-user-host): Return `nil' in case both `user'
	and 'host' are empty (not necessarily `nil'.
	(tramp-parse-netrc, tramp-parse-netrc-group): New functions.
	(tramp-user-regexp): " \t" are not user regexp characters.
	(tramp-completion-handle-file-name-all-completions): Remove
	Ange-FTP cmpletion. It has a bug not handling the "/ftp:" prefix
	completely, and it returns local completions as well.
	(tramp-completion-function-alist-ftp): New constant.
	(tramp-completion-function-alist): Add completion function for
	"ftp".

	* tramp.texi (Customizing Completion): Introduce
	`tramp-parse-netrc'.
----------------------------
revision 2.57
date: 2002-09-22 06:53:01 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.21 released.

(tramp-handle-file-newer-than-file-p): If mtime of
both files is known, return a useful result.  Better error
message in case one is a Tramp file and one isn't.
(tramp-handle-file-local-copy, tramp-handle-write-region)
(tramp-find-shell, tramp-open-connection-telnet)
(tramp-open-connection-rsh, tramp-open-connection-su)
(tramp-open-connection-setup-interactive-shell)
(tramp-post-connection, tramp-maybe-open-connection)
(tramp-method-out-of-band-p): Correct number of args for
`tramp-get-rsh-program' and similar functions.
----------------------------
revision 2.56
date: 2002-09-22 06:11:59 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.20 released.
----------------------------
revision 2.55
date: 2002-09-13 14:19:49 -0700;  author: kai;  state: Exp;  lines: +7 -1;
Version 2.0.19 released.

* tramp-uu.el: New file.

* tramp.el (tramp-coding-commands): Use `tramp-uuencode-region'
as local encoder for the uuencode based entries.

* tramp.texi: Define macro for printing a Tramp filename.
----------------------------
revision 2.54
date: 2002-09-13 03:12:30 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-perl-decode): Perl changes to accomodate older
versions of Perl.  Now tested with 5.004.  Suggestion from
Michael Albinus.

* Makefile (VERSION): Bump
----------------------------
revision 2.53
date: 2002-09-12 09:08:06 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-find-inline-encoding): Call
tramp-call-local-coding-command with nil for INPUT and OUTPUT.
(tramp-call-local-coding-command): OUTPUT equals nil means to
discard the output.  INPUT equals nil means /dev/null.

* Makefile (tar): Depend on prepversion, not tag.
(dist): Depend on tag.
(VERSION): Bump.
----------------------------
revision 2.52
date: 2002-09-11 12:25:36 -0700;  author: albinus;  state: Exp;  lines: +263 -229;

* tramp.el (tramp-completion-handle-file-name-all-completions):
	Define `result1'.
	(tramp-parse-hosts-group): Discard IPv6 entries.

* tramp.texi (Copying): New node. Contains the disclaimer
	part. Two occurences of this text removed.
	(Obtaining @tramp{}): Harmonize example. Use "~/emacs" but "~/lisp".
	(Top): Introduce new flags `emacs'/`xemacs', `emacs-name',
	´emacs-dir', `ftp-package-name', `tramp-prefix',
	`tramp-prefix-single-hop', `tramp-postfix',
	`tramp-postfix-single-hop', `tramp-postfix-multi-hop'.
	(All): Use them. Fix typos where seen.
----------------------------
revision 2.51
date: 2002-09-08 11:33:03 -0700;  author: albinus;  state: Exp;  lines: +155 -14;

2002-09-08  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Configuration): New node `Customizing Completion'.
	(Usage): New node `Filename completion'. Respective sentences from
	node `Dired' moved to.

2002-09-07  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-methods): Remove `tramp-completion-function'
	entries. They are handled now by `tramp-completion-function-alist'.
	(tramp-completion-function): Defvar removed. I've never used
	it. Hmm.
	(tramp-get-completion-function)
	(tramp-get-completion-rsh, tramp-get-completion-ssh)
	(tramp-get-completion-telnet, tramp-get-completion-su): Functions
	removed as well. Not necessary any longer due to extended
	customization means.
	(tramp-completion-function-alist): New defcustom. Holds all
	FUNCTION FILE pairs used for user and host name completion
	relevant for METHOD.
	(tramp-completion-function-alist-rsh)
	(tramp-completion-function-alist-ssh)
	(tramp-completion-function-alist-telnet)
	(tramp-completion-function-alist-su): Defconst for initializing
	`tramp-completion-function-alist'. Unfortunately, mainly UNIX-like
	values are known for me until now. Needs to be completed for at
	least VMS++ like operating systems.
	(tramp-set-completion-function)
	(tramp-get-completion-function): New functions for configuration
	of `tramp-completion-function-alist'. The old definition of
	`tramp-get-completion-function' has been discarded.
	(tramp-completion-handle-file-name-all-completions): Change
	function call for user/host completion according to definition in
	`tramp-completion-function-alist'.
	(tramp-parse-passwd): Added exception handling for "root", because
	`tramp-get-completion-su' (the previous place for this stuff)
	doesn't exist any longer.
----------------------------
revision 2.50
date: 2002-09-06 03:10:13 -0700;  author: kai;  state: Exp;  lines: +3 -3;
Merge changes by Michael Albinus from "completion" branch.

2002-09-05  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-postfix-single-method-format)
	(tramp-postfix-multi-method-format)
	(tramp-postfix-multi-hop-format)
	(tramp-postfix-user-format): New format strings.
	(tramp-postfix-single-method-regexp)
	(tramp-postfix-multi-method-regexp)
	(tramp-postfix-multi-hop-regexp)
	(tramp-postfix-user-regexp)
	(tramp-make-multi-tramp-file-format)
	(tramp-make-tramp-file-name): Apply them.
	(tramp-completion-handle-file-name-all-completions): Fix for
	invoking ange-ftp in case of "/ftp:xxx" file names.

2002-09-04  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-prefix-format)
	(tramp-postfix-host-format): New format strings.
	(tramp-prefix-regexp, tramp-method-regexp)
	(tramp-postfix-single-method-regexp)
	(tramp-postfix-multi-method-regexp)
	(tramp-postfix-multi-hop-regexp)
	(tramp-user-regexp, tramp-postfix-user-regexp)
	(tramp-host-regexp, tramp-postfix-host-regexp)
	(tramp-path-regexp): New atomar regular expressions. If
	corresponding format strings exist, derived from them.
	(tramp-file-name-structure)
	(tramp-multi-file-name-structure)
	(tramp-multi-file-name-hop-structure)
	(tramp-make-multi-tramp-file-format)
	(tramp-completion-mode)
	(tramp-completion-dissect-file-name)
	(tramp-parse-rhosts-group)
	(tramp-parse-shosts-group)
	(tramp-parse-hosts-group)
	(tramp-parse-passwd-group): Apply these expressions.
	(tramp-file-name-structure-unified)
	(tramp-file-name-structure-separate)
	(tramp-make-tramp-file-format-unified)
	(tramp-make-tramp-file-format-separate)
	(tramp-make-tramp-file-format)
	(tramp-make-tramp-file-user-nil-format-unified)
	(tramp-make-tramp-file-user-nil-format-separate)
	(tramp-make-tramp-file-user-nil-format)
	(tramp-multi-file-name-structure-unified)
	(tramp-multi-file-name-structure-separate)
	(tramp-multi-file-name-hop-structure-unified)
	(tramp-multi-file-name-hop-structure-separate)
	(tramp-make-multi-tramp-file-format-unified)
	(tramp-make-multi-tramp-file-format-separate): Removed.
	(tramp-make-tramp-file-name): Allow partial tramp file
	names. Generate tramp file format on-the-fly depending on
	parameters. Apply atomar format strings resp expressions.
	(tramp-get-completion-methods)
	(tramp-get-completion-user-host): Apply
	`tramp-make-tramp-file-name'.
	(tramp-parse-hosts-group): Take all host names and IP addresses
	into account.
	(tramp-bug): Remove `tramp-make-tramp-file-format'.

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-methods): Add `tramp-completion-function' for
	"su" and "sudo".
	(tramp-get-completion-telnet): Implement it.
	(tramp-parse-hosts)
	(tramp-parse-hosts-group)
	(tramp-get-completion-su)
	(tramp-parse-passwd)
	(tramp-parse-passwd-group): New functions.

2002-08-31  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): Check for `last-input-char'.
	(tramp-completion-file-name-handler-alist): Add handler
	for `file-exists-p.
	(tramp-completion-handle-file-exists-p): New function.
	(tramp-completion-handle-file-name-completion): Simplified.
	(tramp-completion-dissect-file-name): Regexp's reorganised.
	(tramp-completion-handle-file-name-all-completions): Call
	completion-function only if `user' or `host' is given.
	(tramp-get-completion-user-host): New function.
	(tramp-get-completion-rsh)
	(tramp-get-completion-ssh): Apply it.

2002-08-29  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-handler-alist): Add handler
	for `expand-file-name'.
	(tramp-completion-handle-expand-file-name): New function.

2002-08-26  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): New function.
	(tramp-completion-handle-file-name-directory)
	(tramp-completion-handle-file-name-all-completions): Apply it.
	(tramp-methods): Remove double definition of `ssh1-old' and
	`ssh2-old'.
	(tramp-point-at-eol): New defalias.
	(tramp-parse-rhosts-group)
	(tramp-parse-shosts-group):: Apply it.

2002-08-25  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-get-completion-methods)
	(tramp-get-completion-rsh)
	(tramp-get-completion-ssh): Add "[" for Xemacs.
	(tramp-completion-file-name-regexp-separate): Expression adapted.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-directory' and `file-name-nondirectory'.
	(tramp-completion-handle-file-name-directory)
	(tramp-completion-handle-file-name-nondirectory)
	(tramp-completion-run-real-handler): New functions.
	(tramp-completion-file-name-handler)
	(tramp-completion-handle-file-name-all-completions): Apply
	`tramp-completion-run-real-handler'.
	(tramp-parse-rhosts)
	(tramp-parse-shosts): Use `with-temp-buffer'. `result´ renamed to
	`res' (otherwise side effects in XEmacs).

2002-08-24  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-regexp)
	(tramp-completion-file-name-handler-alist)
	(tramp-flatten-list)
	(tramp-completion-dissect-file-name)
	(tramp-get-completion-rsh)
	(tramp-parse-rhosts)
	(tramp-parse-rhosts-group)
	(tramp-get-completion-ssh): Doc string tuned.
	(tramp-methods): Doc string and custom type extended for
	`tramp-completion-function'.
	(tramp-completion-function): Variable added. Is it really used?
	Other variables like `tramp-completion-function' aren't used.
	(tramp-completion-file-name-handler-alist): Add handler for
	`file-name-completion'.
	(tramp-completion-handle-file-name-completion): New function.

2002-08-20  Michael Albinus  <Michael.Albinus@alcatel.de>

	Branch "completion" created. Version named (temporarily)
	"2.0.completion".

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.texi (Dired): Mention method, user name and machine name
	completion.
----------------------------
revision 2.49
date: 2002-09-01 12:29:45 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.15 is released.
----------------------------
revision 2.48
date: 2002-08-24 04:12:38 -0700;  author: kai;  state: Exp;  lines: +10 -0;
2002-08-22  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* tramp.el (tramp-open-connection-su): Use user name "root" if no
	user name is given.

2002-08-22  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* tramp.texi (Usage): Mention type-ahead problem.
----------------------------
revision 2.47
date: 2002-08-22 08:13:02 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Bump version number.
----------------------------
revision 2.46
date: 2002-08-22 08:12:23 -0700;  author: kai;  state: Exp;  lines: +26 -12;
* tramp.texi (Remote shell setup): Mention
`tramp-shell-prompt-pattern', `tramp-actions-before-shell', and
`tramp-multi-actions'.

* tramp.el (tramp-shell-prompt-pattern): New variable.
(tramp-actions-before-shell, tramp-multi-actions)
(tramp-find-shell, tramp-open-connection-multi)
(tramp-open-connection-setup-interactive-shell): Use it.
(tramp-open-connection-telnet, tramp-open-connection-rsh)
(tramp-open-connection-su): Mention `tramp-shell-prompt-pattern'
in the docstring.
(tramp-bug): Report `tramp-shell-prompt-pattern'.
(tramp-process-one-multi-action, tramp-process-one-action): Make
message clearer so people don't confuse it with Emacs asking them
a question if the regexp happens to end with "?".
(tramp-verbose): Change default value from 10 to 9.  Also change
some logging levels so that 10 is reserved for stuff which is
needed for debugging only, but 9 catches everything that people
might like to see in order to see that Tramp is actually working.

* Makefile (VERSION): Bump.
----------------------------
revision 2.45
date: 2002-08-07 07:51:36 -0700;  author: kai;  state: Exp;  lines: +1 -1;
branches:  2.45.2;
* tramp.el (tramp-find-shell)
(tramp-open-connection-setup-interactive-shell): Comment out
possibly obsolete "echo hello" commands.
(tramp-run-real-handler): If operation is
`ange-ftp-hook-function', use first arg as the real operation.
(tramp-check-ls-commands): Use / instead of \ as directory
separator.  (Relevant for XEmacs on Windows.)
(tramp-maybe-open-connection): Use tramp-wait-for-output when
waiting for the "are you awake" command.  Use a different string
for the "are you awake" command.
(tramp-send-command): New optional arg NEVEROPEN means to never
invoke tramp-maybe-open-connection.
(tramp-maybe-open-connection): Use it.

* Makefile (VERSION): Bump.
----------------------------
revision 2.44
date: 2002-08-05 07:53:48 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.11.

* tramp.el (tramp-invoke-ange-ftp): Avoid infloop by Ange-FTP
calling Tramp again: use tramp-run-real-handler to invoke
Ange-FTP.
(tramp-post-connection): Erase buffer after finding a remote
shell.
(tramp-find-file-exists-command): Try "test -e" and its variants
before "ls -d".

* Makefile (xemacs): Adjust to new directory names after moving
from SourceForge to Savannah.
(VERSION): Bump.
----------------------------
revision 2.43
date: 2002-08-04 07:12:56 -0700;  author: kai;  state: Exp;  lines: +2 -2;
(Inline methods, Remote shell setup): Typos.  From
Adrian Aichner.
----------------------------
revision 2.42
date: 2002-08-04 06:53:24 -0700;  author: kai;  state: Exp;  lines: +1 -1;
* tramp.el (tramp-perl-encode-with-module,
tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode): Doc fix.  From Andreas
Schwab.
(tramp-bug): New variables to report.
(tramp-post-connection): After finding shell, wait a bit.  I have
no idea why it is necessary, but Daniel also thinks it's
necessary.
(tramp-uudecode): New variable.  Shell function `tramp_uudecode'
for decoding to standard output for those Unices that don't have
it.
(tramp-post-connection): Install the function on the remote host.
(tramp-coding-commands): Add an alternative for using the
`tramp_uudecode' shell function.

* Makefile (VERSION): Bump.
----------------------------
revision 2.41
date: 2002-08-04 05:22:41 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-perl-encode-with-module, tramp-perl-decode-with-module)
(tramp-perl-encode, tramp-perl-decode): Doc fix.  From Andreas
Schwab.
(tramp-bug): New variables to report.
----------------------------
revision 2.40
date: 2002-08-03 13:52:41 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-perl-encode, tramp-perl-encode): Double the
backslashes in the string.
----------------------------
revision 2.39
date: 2002-08-03 02:25:07 -0700;  author: kai;  state: Exp;  lines: +1 -1;
Version 2.0.6 released.
----------------------------
revision 2.38
date: 2002-07-31 08:25:09 -0700;  author: kai;  state: Exp;  lines: +3 -0;
(tramp-handle-file-truename): Invoke Ange-FTP properly.
(tramp-handle-expand-many-files): Don't try to invoke Ange-FTP
twice.
----------------------------
revision 2.37
date: 2002-07-30 08:33:58 -0700;  author: kai;  state: Exp;  lines: +1 -1;
(tramp-coding-commands): Provide base64 encoding with recode.
----------------------------
revision 2.36
date: 2002-07-29 02:12:15 -0700;  author: kai;  state: Exp;  lines: +1 -1;
New version 2.0.4.
----------------------------
revision 2.35
date: 2002-07-29 01:22:47 -0700;  author: kai;  state: Exp;  lines: +3 -1;
* Makefile (prepversion): Edit tramp.texi for version number
instead of creating new file tramp-version.texi.

* tramp.texi: Define macro @trampver here instead of in
tramp-version.texi.  The value is edited from Makefile.

* Makefile (prepversion): Edit tramp.el instead of creating new
file tramp-version.el.
(clean): Don't remove tramp-version.el, the file doesn't exist
anymore.

* tramp.el (tramp-perl-encode, tramp-perl-decode): Very simple
implementations requiring the Perl module MIME::Base64.
(tramp-coding-commands): Use them.
(tramp-version): Move back here from tramp-version.el.  The
variable is automatically edited from the Makefile.
----------------------------
revision 2.34
date: 2002-07-26 10:12:36 -0700;  author: kai;  state: Exp;  lines: +67 -30;
* tramp.texi (Top): Add copying.
(Overview, Obtaining @tramp{}, Installation, Multi-hop Methods)
(Remote Programs, Multi-hop filename syntax)
(Frequently Asked Questions): Reformat.

* Makefile (clean): Delete more.

* tramp.el (tramp-coding-commands): New variable.
(tramp-find-inline-encoding): New function.
(tramp-handle-make-directory, tramp-handle-delete-directory)
(tramp-handle-delete-file): Do expand-file-name on arg.

* Makefile: Bump version, preparing for next release.  (But that
release is not soon.)
----------------------------
revision 2.33
date: 2002-07-23 09:46:31 -0700;  author: youngs;  state: Exp;  lines: +5 -5;

2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (all): Export $VERSION to the subdirectories.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target to create tramp-version.el.
	(all): Use it.
	(clean): Add tramp-version.elc.

	* tramp.el (tramp-version): Removed, we create it on the fly from
	the Makefile.


2002-07-24  Steve Youngs  <youngs@xemacs.org>

	* Makefile (prepversion): New target.  Creates
	tramp-version.texi.
	(all): Use it.
	(clean): Add tramp-version.texi.

	* tramp.texi: Include tramp-version.texi.
	(Top): Use macro defined in tramp-version.texi.
	(copying): Ditto.
----------------------------
revision 2.32
date: 2002-07-19 00:51:36 -0700;  author: kai;  state: Exp;  lines: +12 -4;
(Inline methods): Document new-style "ssh -1"
methods and the renaming of "ssh1" methods.
----------------------------
revision 2.31
date: 2002-07-14 12:50:38 -0700;  author: kai;  state: Exp;  lines: +2 -2;
Add @file markup to some index entries.
----------------------------
revision 2.30
date: 2002-07-14 12:46:37 -0700;  author: kai;  state: Exp;  lines: +70 -66;
* Makefile (tramp.info, tramp_ja.info): Create ../info directory
if necessary.

* tramp.texi: Use @dircategory, @copying.  Add lots of index
entries.  Use @samp or @kbd for stuff that users type on the
keyboard.  Use @item on its own line, except in tables.
Suggestion from Eli Zaretskii.
"@setfilename ../info/tramp" to be compatible with the Emacs
version.
----------------------------
revision 2.29
date: 2002-07-14 07:05:39 -0700;  author: kai;  state: Exp;  lines: +2 -3;
Texinfo syntax errors.
----------------------------
revision 2.28
date: 2002-07-14 07:02:32 -0700;  author: kai;  state: Exp;  lines: +394 -208;
Use @dircategory, @copying.  Add lots of index
entries.  Use @samp or @kbd for stuff that users type on the
keyboard.  Use @item on its own line, except in tables.
Suggestion from Eli Zaretskii.
----------------------------
revision 2.27
date: 2002-07-13 11:00:56 -0700;  author: kai;  state: Exp;  lines: +23 -8;
Fix copyright years.
(Filename Syntax): Describe two syntaxes.
(Multi-hop filename syntax): Describe two syntaxes.
(Issues): Explain why there are two syntaxes.
----------------------------
revision 2.26
date: 2002-07-13 10:29:03 -0700;  author: kai;  state: Exp;  lines: +45 -25;
Fix copyright years.
(Filename Syntax): Describe two syntaxes.
----------------------------
revision 2.25
date: 2002-07-13 03:54:11 -0700;  author: kai;  state: Exp;  lines: +7 -17;
Remove date/version variables.
(Remote shell setup): Say that shell-prompt-pattern
must match the end of the buffer.
----------------------------
revision 2.24
date: 2002-06-26 06:34:44 -0700;  author: kai;  state: Exp;  lines: +9 -2;
(Inline methods): Explain that method `smx' does not
eliminate all questions, just those from the shell.
----------------------------
revision 2.23
date: 2002-06-25 13:03:54 -0700;  author: kai;  state: Exp;  lines: +29 -5;
* tramp.texi (External transfer methods, Inline methods):
Document the "-p" hack for ssh.

* lisp/tramp.el (tramp-version): New version 2.0.1.
----------------------------
revision 2.22
date: 2002-06-19 14:37:57 -0700;  author: kai;  state: Exp;  lines: +3 -1;
*** empty log message ***
----------------------------
revision 2.21
date: 2002-06-19 14:36:36 -0700;  author: kai;  state: Exp;  lines: +3 -2;
*** empty log message ***
----------------------------
revision 2.20
date: 2002-06-15 10:44:15 -0700;  author: kai;  state: Exp;  lines: +4 -4;
* Makefile (savannah): Don't echo the echo commands.

* tramp.texi (Obtaining @tramp{}): Use `@@' for a literal at sign.

* tramp.el (tramp-handle-file-truename): Lower numchase-limit
(max number of symlink traversals) from 30 to 20.
----------------------------
revision 2.19
date: 2002-06-14 07:47:16 -0700;  author: kai;  state: Exp;  lines: +18 -23;
Project has moved to Savannah.  Change all
references to SourceForge correspondingly.
----------------------------
revision 2.18
date: 2002-06-10 08:23:02 -0700;  author: kai;  state: Exp;  lines: +17 -2;
(External transfer methods): Document the new `fcp'
method.
----------------------------
revision 2.17
date: 2002-06-07 02:36:03 -0700;  author: kai;  state: Exp;  lines: +32 -32;
Remove prev/next/up items from @node commands.
"makeinfo" adds them.
----------------------------
revision 2.16
date: 2002-06-05 01:57:08 -0700;  author: kai;  state: Exp;  lines: +5 -4;
Sync with latest SourceForge changes.
----------------------------
revision 2.15
date: 2002-05-28 04:01:36 -0700;  author: kaig;  state: Exp;  lines: +13 -3;
(Windows setup hints): New section.  Still too short.
----------------------------
revision 2.14
date: 2002-04-22 11:54:54 -0700;  author: kaig;  state: Exp;  lines: +56 -18;
2002-04-22  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* tramp.texi (Top, Connection types, Dired, Back-end Versions,
	Path deconstruction): It's "its", not "it's".  Thanks to Ted
	Stern for catching this.

2002-04-19  Kai Großjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>
	From Harry Putnam <reader@newsguy.com>.  Awaiting copyright
	assignment.

	* tramp.texi (Installation): Give more details on byte-compiling
	the Lisp files and creating and installing the info file.
----------------------------
revision 2.13
date: 2002-04-14 08:52:39 -0700;  author: kaig;  state: Exp;  lines: +11 -2;
* tramp.texi (External transfer methods): Document the `pscp'
method.

* tramp.el (tramp-methods): New method "pscp".  Suggestion from
lawrence mitchell.
----------------------------
revision 2.12
date: 2002-04-14 05:30:35 -0700;  author: kaig;  state: Exp;  lines: +22 -2;
* tramp.texi (Inline methods): Document the `km', `plinku' and
`plinkm' methods.

* tramp.el (file-expand-wildcards): Advise it even on Emacs 21.
(tramp-methods): New methods "plinku" and "plinkm".
"plinku" was suggested by Adam Przepiórkowski.
----------------------------
revision 2.11
date: 2002-01-20 08:39:40 -0800;  author: kaig;  state: Exp;  lines: +24 -4;
* tramp.texi (External transfer methods): Document double use of
`-t' for the `scpx' method.  Explain why it is useful for Windows
users.
(Inline methods): Ditto for the `smx' method.

* tramp.el: Remove some todo items which are done.
(tramp-methods): Use doubled `-t -t' for `scpx' and `smx'
methods.
----------------------------
revision 2.10
date: 2001-12-11 09:43:00 -0800;  author: kaig;  state: Exp;  lines: +4 -4;
(Connection types): Double-space sentence end.
----------------------------
revision 2.9
date: 2001-09-20 06:29:07 -0700;  author: kaig;  state: Exp;  lines: +32 -29;
branches:  2.9.2;
* tramp.texi (Module): New filenames.  Moved to SourceForge.

* tramp.el (tramp-bug-report-address): Update to reflect move to
SourceForge.
----------------------------
revision 2.8
date: 2001-09-07 06:50:27 -0700;  author: kaig;  state: Exp;  lines: +24 -12;
* tramp.texi (Module): Repository has moved to SF.

* Makefile (Module): Install things on SourceForge.

* Makefile (Module): Rule for submitting to SourceForge.
----------------------------
revision 2.7
date: 2001-08-05 13:39:51 -0700;  author: grossjoh;  state: Exp;  lines: +16 -15;
* tramp.el: Default file name format changed!  File names with
default method have changed from /r:user@host:/path/to/file to
/./user@host:/path/to/file.  Files with explicitly specified
method have changed from /r@meth:user@host:/path/to/file to
/./@meth:user@host:/path/to/file.  (Note one more colon for method
spec!)

* tramp.texi: New default file name format.
* tramp_ja.texi: Ditto.
----------------------------
revision 2.6
date: 2001-07-13 06:04:16 -0700;  author: grossjoh;  state: Exp;  lines: +5 -5;
(Obtaining @tramp{}): Host name change.
----------------------------
revision 2.5
date: 2001-07-13 02:34:09 -0700;  author: grossjoh;  state: Exp;  lines: +15 -2;
(Multi-hop Methods): Say how to customize multi-hop
connection methods.  Provide example.
----------------------------
revision 2.4
date: 2001-03-30 01:53:26 -0800;  author: grossjoh;  state: Exp;  lines: +11 -4;
(External transfer methods): Mention possibility of
providing password on command line for scp.
(Frequently Asked Questions): Mention Tom Roche's nifty Web page
with instructions for NT.
----------------------------
revision 2.3
date: 2001-03-26 00:25:08 -0800;  author: grossjoh;  state: Exp;  lines: +5 -5;
(Configuration): Syntax error.  Reported by Tom
Roche.
(Frequently Asked Questions): Dito.
----------------------------
revision 2.2
date: 2001-03-22 14:28:23 -0800;  author: grossjoh;  state: Exp;  lines: +22 -2;
(Frequently Asked Questions): ksh init code to turn
off history saving.  From Ted Stern and Tom Roche.
----------------------------
revision 2.1
date: 2001-03-01 06:19:11 -0800;  author: grossjoh;  state: Exp;  lines: +6 -2;
(Frequently Asked Questions): Pointer to Joe Stoy's
documentation for NT.
----------------------------
revision 2.0
date: 2001-02-28 02:39:33 -0800;  author: grossjoh;  state: Exp;  lines: +1 -1;
branches:  2.0.2;
Going stable?
----------------------------
revision 1.39
date: 2001-02-24 05:00:14 -0800;  author: grossjoh;  state: Exp;  lines: +75 -6;
(Remote shell setup): New section.  Explain that
people have to take care that their remote shell is setup
correctly, and why.
----------------------------
revision 1.38
date: 2001-01-03 15:51:19 -0800;  author: grossjoh;  state: Exp;  lines: +40 -4;
(Top): Added detailed node listing.
----------------------------
revision 1.37
date: 2000-10-01 05:53:29 -0700;  author: grossjoh;  state: Exp;  lines: +26 -2;
V. Balaji: (Frequently Asked Questions): Notification when
transfers are complete.
----------------------------
revision 1.36
date: 2000-09-22 06:05:25 -0700;  author: grossjoh;  state: Exp;  lines: +4 -3;
(Installation): Better URL for XEmacs package
installation instructions.
----------------------------
revision 1.35
date: 2000-09-21 06:42:46 -0700;  author: grossjoh;  state: Exp;  lines: +6 -2;
(Installation): Add URL for XEmacs package
installation instructions.
----------------------------
revision 1.34
date: 2000-09-11 15:29:19 -0700;  author: grossjoh;  state: Exp;  lines: +7 -3;
(Default Method): Add example.  Thanks to Henrik Holm
for suggesting this.
----------------------------
revision 1.33
date: 2000-07-06 06:29:11 -0700;  author: grossjoh;  state: Exp;  lines: +10 -10;
(Top): Make URLs clickable.
----------------------------
revision 1.32
date: 2000-06-07 15:03:28 -0700;  author: grossjoh;  state: Exp;  lines: +6 -6;
Correct TeXinfo syntax.
----------------------------
revision 1.31
date: 2000-06-07 15:00:17 -0700;  author: grossjoh;  state: Exp;  lines: +43 -21;
Revamp the installation section.
----------------------------
revision 1.30
date: 2000-06-05 10:10:03 -0700;  author: yyamano;  state: Exp;  lines: +3 -3;
Fix a typo.
----------------------------
revision 1.29
date: 2000-06-04 05:45:34 -0700;  author: daniel;  state: Exp;  lines: +65 -15;
Document the process of adding a remote path to search for programs.
Moved some text out of the 'configuration' introduction and into a node of
it's own - it was *far* too long for an introductory spiel.
----------------------------
revision 1.28
date: 2000-06-02 16:19:46 -0700;  author: grossjoh;  state: Exp;  lines: +17 -1;
System requirements.
----------------------------
revision 1.27
date: 2000-06-02 16:14:55 -0700;  author: grossjoh;  state: Exp;  lines: +35 -18;
More documentation.  Explain meaning of `tramp' and document the history.
----------------------------
revision 1.26
date: 2000-06-01 07:04:33 -0700;  author: grossjoh;  state: Exp;  lines: +16 -1;
Document problem due to globbing with large directories.
----------------------------
revision 1.25
date: 2000-05-31 15:07:49 -0700;  author: grossjoh;  state: Exp;  lines: +146 -146;
Name change.
----------------------------
revision 1.24
date: 2000-05-30 09:54:43 -0700;  author: grossjoh;  state: Exp;  lines: +5 -2;
Publish Yuji's Japanese translation on the Web.
----------------------------
revision 1.23
date: 2000-05-28 19:41:57 -0700;  author: daniel;  state: Exp;  lines: +17 -22;
Reword a few paragraphs to make their meanings clearer.

Also removed some bits and pieces of humor. Austrailan cultural references
don't seem to travel that well to Germany and Japan. :)
----------------------------
revision 1.22
date: 2000-05-27 01:21:31 -0700;  author: yyamano;  state: Exp;  lines: +3 -3;
Add missing `{}' after `@rcp'.
----------------------------
revision 1.21
date: 2000-05-26 03:17:56 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Change CVS instructions, include new todo item.
----------------------------
revision 1.20
date: 2000-05-25 06:00:07 -0700;  author: daniel;  state: Exp;  lines: +74 -30;
Documentation updates:
* Added notes on the cannonical web location of the document.
* Note the mailing list and archive in the top node.
* Add a download link to the top node for HTML only.
* Added a section on obtaining RCP, including the CVS server.
* Remove the dead section on caching - to be added when caching is. :)
----------------------------
revision 1.19
date: 2000-05-21 05:02:14 -0700;  author: daniel;  state: Exp;  lines: +7 -2;
Document the need to install 'fsf-compat' in the 'Installation' node.
Include a cross-reference to the xemacs info file regarding it.
----------------------------
revision 1.18
date: 2000-05-13 02:04:55 -0700;  author: grossjoh;  state: Exp;  lines: +2 -2;
Adjust copyright for 2000.
----------------------------
revision 1.17
date: 2000-05-13 02:02:01 -0700;  author: grossjoh;  state: Exp;  lines: +42 -1;
Document `sudo' inline methods.  Document `su' and `sudo' hops for
multi methods.
----------------------------
revision 1.16
date: 2000-05-05 15:10:52 -0700;  author: grossjoh;  state: Exp;  lines: +9 -2;
Document local and remote system requirements.
----------------------------
revision 1.15
date: 2000-04-28 13:53:52 -0700;  author: grossjoh;  state: Exp;  lines: +11 -1;
Add (and document) new method `scpx' which tries to set up a sane
remote shell.  This kind of workaround only works with `ssh', not with
`rsh'.
----------------------------
revision 1.14
date: 2000-04-18 14:05:58 -0700;  author: grossjoh;  state: Exp;  lines: +108 -1;
Some todo items, and an explanation what happens behind the scenes.
----------------------------
revision 1.13
date: 2000-04-16 14:15:24 -0700;  author: grossjoh;  state: Exp;  lines: +130 -9;
Document multi-hop methods.
----------------------------
revision 1.12
date: 2000-04-04 07:40:29 -0700;  author: grossjoh;  state: Exp;  lines: +11 -2;
Typos.
----------------------------
revision 1.11
date: 2000-04-01 13:08:04 -0800;  author: grossjoh;  state: Exp;  lines: +117 -84;
New section on stuff which I have decided not to do, with
explanation.  Feel free to convince me otherwise :-)
----------------------------
revision 1.10
date: 2000-02-01 04:56:27 -0800;  author: daniel;  state: Exp;  lines: +132 -85;
Updated the documentation in response to Kai Grosßjohann's comments. Many
minor and not-so-minor corrections to the documentation.

Added a chapter on reporting bugs, including the mailing list details.
----------------------------
revision 1.9
date: 2000-01-22 15:14:32 -0800;  author: grossjoh;  state: Exp;  lines: +376 -52;
Much expaned by Daniel Pittman.
----------------------------
revision 1.8
date: 1999-10-29 07:38:44 -0700;  author: grossjoh;  state: Exp;  lines: +77 -18;
Daniel Pittman: added FAQ section.
----------------------------
revision 1.7
date: 1999-10-17 03:38:23 -0700;  author: grossjoh;  state: Exp;  lines: +0 -36;
Node `Back-end versions' was duplicated.
----------------------------
revision 1.6
date: 1999-10-17 03:35:23 -0700;  author: grossjoh;  state: Exp;  lines: +10 -6;
Nodes and menus updated.
----------------------------
revision 1.5
date: 1999-10-17 03:33:34 -0700;  author: grossjoh;  state: Exp;  lines: +93 -25;
Doc updates from Daniel.
----------------------------
revision 1.4
date: 1999-10-16 04:39:42 -0700;  author: grossjoh;  state: Exp;  lines: +15 -14;
Updated nodes and menus.
----------------------------
revision 1.3
date: 1999-10-16 04:36:09 -0700;  author: grossjoh;  state: Exp;  lines: +30 -0;
Daniel Pittman: remote VC documentation.
----------------------------
revision 1.2
date: 1999-10-16 04:33:21 -0700;  author: grossjoh;  state: Exp;  lines: +3 -3;
Daniel Pittman: typo fix.
Kai: upgrade timestamp.el variables to new format.
----------------------------
revision 1.1
date: 1999-10-10 13:13:00 -0700;  author: grossjoh;  state: Exp;
Initial revision
----------------------------
revision 2.0.2.6
date: 2001-07-16 02:54:58 -0700;  author: grossjoh;  state: Exp;  lines: +15 -2;
Merge with head as of 2001-07-15.
----------------------------
revision 2.0.2.5
date: 2001-07-13 06:03:18 -0700;  author: grossjoh;  state: Exp;  lines: +5 -5;
Host name change bonny --> cirian.
----------------------------
revision 2.0.2.4
date: 2001-06-15 04:45:23 -0700;  author: grossjoh;  state: Exp;  lines: +1 -1;
Merge from head.
----------------------------
revision 2.0.2.3
date: 2001-06-03 05:13:18 -0700;  author: grossjoh;  state: Exp;  lines: +31 -4;
Sync with head.
----------------------------
revision 2.0.2.2
date: 2001-03-28 13:44:29 -0800;  author: grossjoh;  state: Exp;  lines: +3 -3;
(tramp-handle-file-directory-p): Use `test -d', not
`cd', to find out if it's a directory.
----------------------------
revision 2.0.2.1
date: 2001-03-01 06:16:14 -0800;  author: grossjoh;  state: Exp;  lines: +6 -2;
(Frequently Asked Questions): Pointer to Joe Stoy's
documentation for NT.
----------------------------
revision 2.9.2.1
date: 2001-12-11 19:35:34 -0800;  author: youngs;  state: Exp;  lines: +4 -4;
Sync with main branch
----------------------------
revision 2.45.2.2
date: 2002-09-01 12:17:59 -0700;  author: albinus;  state: Exp;  lines: +3 -3;

2002-09-01  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-methods): Add `tramp-completion-function' for
	"su" and "sudo".
	(tramp-get-completion-telnet): Implement it.
	(tramp-parse-hosts),
	(tramp-parse-hosts-group),
	(tramp-get-completion-su),
	(tramp-parse-passwd),
	(tramp-parse-passwd-group): New functions.
	* tramp.texi (Dired): Mention method, user name and machine name
	completion.

2002-08-31  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-mode): Check for `last-input-char'.
	(tramp-completion-file-name-handler-alist): Add handler
	for `file-exists-p.
	(tramp-completion-handle-file-exists-p): New function.
	(tramp-completion-handle-file-name-completion): Simplified.
	(tramp-completion-dissect-file-name): Regexp's reorganised.
	(tramp-completion-handle-file-name-all-completions): Call
	completion-function only if `user' or `host' is given.
	(tramp-get-completion-user-host): New function.
	(tramp-get-completion-rsh),
	(tramp-get-completion-ssh): Apply it.

2002-08-29  Michael Albinus  <Michael.Albinus@alcatel.de>

	* tramp.el (tramp-completion-file-name-handler-alist): Add handler
	for `expand-file-name'.
	(tramp-completion-handle-expand-file-name): New function.
----------------------------
revision 2.45.2.1
date: 2002-08-20 12:33:49 -0700;  author: albinus;  state: Exp;  lines: +1 -1;
*** empty log message ***
----------------------------
revision 2.115.2.26
date: 2008-02-02 02:35:18 -0800;  author: albinus;  state: Exp;  lines: +5 -5;  commitid: 7l5uGIVcq5OGmOPs;
* tramp.texi: Use new FSF's Back-Cover Text.
----------------------------
revision 2.115.2.25
date: 2007-07-14 02:37:22 -0700;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: bh2j4LByNNWgzIps;

* tramp.texi: Move @setfilename ../info/tramp up, outside the
header section.  Reported by <poti@potis.org>.
----------------------------
revision 2.115.2.24
date: 2007-05-28 01:49:43 -0700;  author: albinus;  state: Exp;  lines: +7 -1;  commitid: 3AYYXUpQ30DuOFjs;

Version 2.0.56 released.
----------------------------
revision 2.115.2.23
date: 2007-02-21 13:23:08 -0800;  author: albinus;  state: Exp;  lines: +5 -1;

* tramp.texi (Frequently Asked Questions): Improve ~/.zshrc
settings.  Reported by Ted Zlatanov <tzz@lifelogs.com>.
----------------------------
revision 2.115.2.22
date: 2006-12-18 23:09:49 -0800;  author: albinus;  state: Exp;  lines: +20 -0;

* lisp/tramp.el (tramp-methods): Introduce new method `scpc'.  Remove
"ControlMaster" option from the other `scp*' methods.
(tramp-default-method): Check for ssh-agent before setting to
`scp'.
(top): Check for `font-lock-add-keywords' before calling; it
doesn't exist under XEmacs.

* texi/tramp.texi (External transfer methods): Describe new method
`scpc'.
----------------------------
revision 2.115.2.21
date: 2006-11-07 03:06:09 -0800;  author: albinus;  state: Exp;  lines: +5 -6;

* lisp/tramp.el (tramp-default-method): scp is the default method.

* texi/tramp.texi (Configuration): scp is the default method.
(Default Method): Use ssh as example for another method.
----------------------------
revision 2.115.2.20
date: 2006-10-18 21:59:29 -0700;  author: albinus;  state: Exp;  lines: +0 -5;

* texi/tramp.texi (Frequently Asked Questions): Remove questions marked with
"???".  There have been no complaints for years, so the information
must be appropriate.
----------------------------
revision 2.115.2.19
date: 2006-08-28 22:21:43 -0700;  author: albinus;  state: Exp;  lines: +10 -6;

Version 2.0.54 released.
----------------------------
revision 2.115.2.18
date: 2006-06-05 13:04:41 -0700;  author: albinus;  state: Exp;  lines: +6 -6;

* texi/tramp.texi: Fix various typos.
----------------------------
revision 2.115.2.17
date: 2006-05-29 13:32:38 -0700;  author: albinus;  state: Exp;  lines: +5 -0;

* texi/tramp.texi (Frequently Asked Questions): Disable zsh zle.
----------------------------
revision 2.115.2.16
date: 2006-05-08 22:18:37 -0700;  author: albinus;  state: Exp;  lines: +3 -3;

* texi/tramp.texi (Filename completion): Improve wording.
----------------------------
revision 2.115.2.15
date: 2006-05-06 15:08:05 -0700;  author: albinus;  state: Exp;  lines: +9 -3;

* configure.ac: Bump version (to 2.0.54-pre).  Update merge
version to 2.0.53.

* lisp/tramp.el (tramp-completion-file-name-handler-alist)
(tramp-run-real-handler, tramp-completion-run-real-handler)
(tramp-completion-handle-file-name-all-completions)
(tramp-completion-handle-file-name-completion): Autoload them.
(tramp-handle-file-name-directory): Return the real directory
name.  Returning "/" only doesn't need to be necessary any longer.
(tramp-file-name-handler): Make special attention when in hostname
completion mode.
(tramp-register-file-name-handlers): That's a defsubst now.  Code
from `tramp-repair-jka-compr' moved here.  Register
`tramp-completion-file-name-handler' only when
`partial-completion-mode' is enabled.
(tramp-repair-jka-compr): Remove.
(tramp-completion-handle-file-exists-p)
(tramp-completion-handle-file-name-directory)
(tramp-completion-handle-file-name-nondirectory)
(tramp-completion-handle-expand-file-name): Remove them.
(tramp-completion-handle-file-name-all-completions):
Delete directory part from results.
(tramp-get-completion-methods, tramp-get-completion-user-host):
Discard deleting "/", it doesn't work after the change of
`tramp-handle-file-name-directory' above.
(tramp-completion-file-name-handler-alist): Delete
expand-file-name and other operations that can cause spurious loading.

* texi/tramp.texi (Filename completion): Completion of remote files'
method, user name and host name is active only in partial
completion mode.
----------------------------
revision 2.115.2.14
date: 2006-01-22 10:38:32 -0800;  author: albinus;  state: Exp;  lines: +24 -48;


Version 2.0.52 released.

* configure.ac: Bump version.

* lisp/tramp.el, lisp/tramp-ftp.el, lisp/tramp-util.el,
lisp/tramp-vc.el: Add code for unloading Tramp.  See comment before
`tramp-unload-tramp' for checklist.

* lisp/tramp.el (tramp-unload-file-name-handler-alist)
(tramp-unload-tramp): New defuns.
(tramp-advice-PC-expand-many-files): New defadvice.
(tramp-save-PC-expand-many-files, tramp-setup-complete) Defuns
removed.

* lisp/tramp-ftp.el (tramp-ftp-enable-ange-ftp): New defun.

* lisp/tramp-util.el (top): Apply `ignore' instead of `identity' for
byte-compiler pacification.

* texi/tramp.texi (Frequently Asked Questions): Remove Ange-FTP item.
Add Tramp disabling item.
----------------------------
revision 2.115.2.13
date: 2005-12-30 07:48:55 -0800;  author: albinus;  state: Exp;  lines: +35 -15;

* texi/tramp.texi (various): Apply "ftp" as method for the download
URL.
(Bug Reports): Refer to FAQ for common problems.
(Frequently Asked Questions): New item for common connection
problems.
----------------------------
revision 2.115.2.12
date: 2005-09-18 05:01:00 -0700;  author: albinus;  state: Exp;  lines: +3 -3;

Update all files to specify GFDL version 1.2.
----------------------------
revision 2.115.2.11
date: 2005-07-10 14:36:49 -0700;  author: albinus;  state: Exp;  lines: +113 -108;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.115.2.10
date: 2005-02-20 08:09:24 -0800;  author: albinus;  state: Exp;  lines: +13 -10;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set always
permissions, because there might be an old auto-saved file
belonging to another original file.  This could be a security
threat.

* lisp/tramp-smb.el (tramp-smb-open-connection): `executable-find'
doesn't exist in older Emacsen.  To be checked before applied.

* lisp/trampver.texi.in: Replace "Emacs" by "GNU Emacs".

* lisp/tramp.texi: Replace "Emacs" by "GNU Emacs".
(Default Method): Offer shortened syntax for "su" and "sudo"
methods.
----------------------------
revision 2.115.2.9
date: 2005-02-13 09:58:14 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* texi/tramp.texi: Replace "Linux" by "GNU/Linux".  Suggested by
Richard M. Stallman <rms@gnu.org>
----------------------------
revision 2.115.2.8
date: 2005-02-12 03:34:31 -0800;  author: albinus;  state: Exp;  lines: +5 -4;

Change release version from 21.4 to 22.1 throughout.
----------------------------
revision 2.115.2.7
date: 2005-02-02 14:08:21 -0800;  author: albinus;  state: Exp;  lines: +26 -27;

* configure.ac: Bump version (to 2.0.48-pre).  Update merge
version to 2.0.47.  Change bug report address to
[tramp-devel@gnu.org].

* lisp/tramp.el (tramp-file-name-for-operation) Use 'shell-command but
'shell.  Cut'n'waste error.  Reported by Vincent Bernat
<bernat@free.fr>.

* texi/tramp.texi (all): Change all addresses to .gnu.org.
----------------------------
revision 2.115.2.6
date: 2005-01-09 11:22:49 -0800;  author: albinus;  state: Exp;  lines: +7 -14;

* lisp/tramp-util.el (tramp-remap-command): New defun.
(top): Remove `define-key' calls.  They are replaced by respective
`tramp-remap-command' and `add-menu-button' calls.  Add
`tramp-minor-mode' to `dired-mode-hook'.
(tramp-compile, tramp-recompile): Call the commands
asynchronously.  Add `compilation-mode' to *Compilation* buffer.

* lisp/tramp.texi: (Compilation): Make reference to (X)Emacs manual
flavor specific.  Remove mentioned restrictions for Emacs < 21.4
and for XEmacs.
----------------------------
revision 2.115.2.5
date: 2005-01-05 13:32:35 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp-util.el: Fix copyright years.  Adapt author address.
(tramp-minor-mode): Mode must toggle.

* texi/tramp.texi: Fix copyright years.
----------------------------
revision 2.115.2.4
date: 2005-01-04 15:25:04 -0800;  author: albinus;  state: Exp;  lines: +8 -0;

* lisp/tramp-util.el (tramp-compile, tramp-recompile): Enable
`tramp-minor-mode' in buffer "*Compilation*".

* texi/tramp.texi (Compilation): Give a note that remote compilation is
performed synchronously only, for the time being.
----------------------------
revision 2.115.2.3
date: 2004-12-29 13:27:49 -0800;  author: albinus;  state: Exp;  lines: +27 -0;

* lisp/tramp-util.el (tramp-minor-mode): New minor mode.  Add it to
`find-file-hooks'.
(tramp-minor-mode-map): Respective map.  Add remapping for
`compile' and `recompile'.
(tramp-recompile): New defun.

* texi/tramp.texi (Compilation): New section, describing compilation of
remote files.
----------------------------
revision 2.115.2.2
date: 2004-10-17 09:03:18 -0700;  author: albinus;  state: Exp;  lines: +4 -0;


* Makefile.XEmacs, package-info.in: Synchronize with XEmacs CVS
repository.

* lisp/tramp-smb.el (tramp-smb-advice-PC-do-completion): Make the
advice less fragile.  Surround temporary redefinition of
`substitute-in-file-name' with `unwind-protect'.  Suggested by
Matt Hodges <MPHodges@member.fsf.org>.

* lisp/tramp.el (top): Set `edebug-form-spec' property directly rather
than calling `def-edebug-spec'.

* texi/tramp.texi (bottom): Add arch-tag.  It was lost, somehow.
----------------------------
revision 2.115.2.1
date: 2004-10-10 09:54:27 -0700;  author: albinus;  state: Exp;  lines: +3 -0;


* Makefile.in (savannah): Don't call make for texi.  Only the
trunk should place its files there.

* lisp/tramp.el (top): Apply `def-edebug-spec' only if function is
defined.  This is not the case for XEmacs without package
"edebug".
(tramp-set-auto-save-file-modes): Set permissions of autosaved
remote files to the permissions of the original file.  This is not
the case for Emacs < 21.3.50 and XEmacs < 21.5.  Add function to
`auto-save-hook'.  Reported by Thomas Prokosch <thomas@nadev.net>.

* texi/Makefile.in (savannah): Copy also index files.

* texi/tramp.texi (Frequently Asked Questions): Comment paragraph about
plink link.  The URL is outdated.  Originator contacted for
clarification.
----------------------------
revision 2.256.2.1
date: 2011-01-24 02:09:41 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
=============================================================================

RCS file: /sources/tramp/tramp/texi/Attic/tramp_ja.texi,v
Working file: texi/tramp_ja.texi
head: 2.9
branch:
locks: strict
access list:
symbolic names:
	branch-2-1-stable: 2.8.0.4
	branchpoint-2-1-stable: 2.8
	V-2-1-19: 2.8
	V-2-1-18: 2.8
	V-2-1-17: 2.8
	V-2-1-16: 2.8
	V-2-1-15: 2.8
	V-2-1-14: 2.8
	V-2-1-13: 2.8
	V-2-0-57: 2.8
	V-2-1-12: 2.8
	V-2-1-11: 2.8
	V-2-1-10: 2.8
	V-2-0-56: 2.8
	V-2-1-9: 2.8
	V-2-1-8: 2.8
	V-2-0-55: 2.8
	V-2-1-7: 2.8
	V-2-0-54: 2.8
	V-2-1-6: 2.8
	V-2-0-53: 2.8
	V-2-0-52: 2.8
	V-2-1-5: 2.8
	V-2-1-4: 2.8
	V-2-0-51: 2.8
	V-2-0-50: 2.8
	V-2-0-49: 2.8
	V-2-0-48: 2.8
	V-2-1-3: 2.8
	V-2-0-47: 2.8
	V-2-0-46: 2.8
	V-2-0-45: 2.8
	V-2-1-2: 2.8
	V-2-0-44: 2.8
	V-2-1-1: 2.8
	V-2-0-43: 2.8
	V-2-0-42: 2.8
	V-2-0-41: 2.8
	V-2-1-0: 2.8
	branch-2-0-stable: 2.8.0.2
	branchpoint-2-0-stable: 2.8
	V-2-0-40: 2.8
	V-2-0-39: 2.6
	V-2-0-38: 2.5
	V-2-0-37: 2.5
	V-2-0-36: 2.3
	V-2-0-35: 2.3
	V-2-0-34: 2.3
	V-2-0-33: 2.3
	V-2-0-32: 2.3
	V-2-0-30: 2.3
	V-2-0-29: 2.3
	V-2-0-28: 2.3
	V-2-0-27: 2.3
	V-2-0-26: 2.3
	V-2-0-25: 2.3
	V-2-0-24: 2.3
	V-2-0-23: 2.3
	V-2-0-22: 2.3
	V-2-0-21: 2.3
	V-2-0-20: 2.3
	V-2-0-19: 2.3
	V-2-0-18: 2.3
	V-2-0-17: 2.3
	V-2-0-16: 2.3
	V-2-0-15: 2.3
	V-2-0-14: 2.3
	V-2-0-13: 2.3
	completion: 2.3.0.2
	V-2-0-12: 2.3
	V-2-0-11: 2.3
	V-2-0-10: 2.3
	V-2-0-9: 2.3
	V-2-0-8: 2.3
	V-2-0-7: 2.3
	V-2-0-6: 2.3
	V-2-0-5: 2.3
	V-2-0-4: 2.3
	V-2-0-3: 2.3
	V-2-0-1: 2.3
	EMACS-21: 2.3
	V-2-0-0: 2.3
	tramp-xemacs-pkg: 2.2.0.2
	stable: 2.0.0.2
	rel-2-0: 2.0
keyword substitution: kv
total revisions: 28;	selected revisions: 28
description:
----------------------------
revision 2.9
date: 2010-09-13 08:30:49 -0700;  author: albinus;  state: dead;  lines: +0 -0;  commitid: 31xKlcFVn8iQkrOu;
* tramp.texi (Inline methods): Remove "ssh1_old", "ssh2_old" and
"fish" methods.
(External methods): Remove "scp1_old" and "scp2_old" methods.

* tramp_ja.texi: Remove file.
----------------------------
revision 2.8
date: 2004-04-09 09:14:28 -0700;  author: albinus;  state: Exp;  lines: +236 -233;


Complete rework, based on review by Karl Berry <karl@gnu.org>

* aclocal.m4 (AC_EMACS_INSTALL): Rewrite function.  Apply a
variable substitution rather then a file substitution

* configure.ac: Adapt comment for AC_EMACS_INSTALL call.

* texi/Makefile.in (INSTALL_CHAPTER): New variable, set by configure.
(TEXI_FILES): Includes "trampinst.texi" also if $(INSTALL_CHAPTER)
is "yes".
($(localinfodir)/%, %.dvi, tramp-%.html, tramp_ja-%.html):
$(INSTALL_CHAPTER) is a parameter, too.

* texi/trampver.texi.in (trampver, tramp): Macros changed to flags.
(otherflavor, installationchapter): Macros removed.  Not necessary
any longer.
(all): "tramp-" and "-" removed from flag names.

* texi/tramp.texi, texi/tramp_ja.texi (tramp): Macro removed.
(Obtaining Tramp): Flag removed from title.
(all): "tramp-" and "-" removed from flag names.  Flags `tramp'
and `trampver' used properly.  Flag `tramp-inst' replaced by
`installchapter'.  Installation related text adapted.

* texi/trampinst.texi (otherflavor, installationchapter): Macros
removed.  Not necessary any longer.
(all): Includes "trampver.texi" for flag setting.  All local flags
moved to that file.  "tramp-" and "-" removed from flag names.
Flags `tramp' and `trampver' used properly.  Flag `tramp-inst'
replaced by `installchapter'.
----------------------------
revision 2.7
date: 2004-03-28 08:44:41 -0800;  author: albinus;  state: Exp;  lines: +3 -2;


* configure.ac: Check existence of "install-info".  Taken from
Emacs configure.in.

* texi/Makefile.in (INSTALL_INFO): New Variable.
($(localinfodir)/dir, $(infodir)/dir): New Targets.
(.PHONY): Add "$(localinfodir)/dir" and "$(infodir)/dir".
(install): Depends on "$(infodir)/dir".
(tramp): Depends on "$(localinfodir)/dir".

* texi/dir_sample: Created new.  Existing one didn't work, don't know  why.

* texi/tramp_ja.texi: @direntry corrected to "tramp_ja".

* texi/trampinst.texi (Load paths): Remove explanation on applying
"install-info".  It should work now, even on Debian.
----------------------------
revision 2.6
date: 2003-12-28 13:24:34 -0800;  author: uid67418;  state: Exp;  lines: +2 -2;


* texi/tramp_ja.texi (Obtaining TRAMP, Using TRAMP): Fixing typos.
From Yuji Yamano <yyamano@kt.rim.or.jp>
----------------------------
revision 2.5
date: 2003-10-14 14:26:40 -0700;  author: kai;  state: Exp;  lines: +2 -2;
(Configuration, External transfer methods):
Typos.  From Yoichi NAKAYAMA <yoichi@geiin.org>.
----------------------------
revision 2.4
date: 2003-10-08 12:57:02 -0700;  author: kai;  state: Exp;  lines: +1139 -528;
From Yoichi NAKAYAMA <yoichi@geiin.org>:

* tramp.texi (External transfer methods, Auto-save and Backup):
Typo fixes.
* tramp_ja.texi: Sync with tramp.texi version 2.68.
----------------------------
revision 2.3
date: 2002-01-21 02:50:30 -0800;  author: kaig;  state: Exp;  lines: +170 -45;
Sync with tramp.texi rev 2.10.  From Yoichi NAKAYAMA <yoichi@FreeBSD.org>.
----------------------------
revision 2.2
date: 2001-09-07 06:50:27 -0700;  author: kaig;  state: Exp;  lines: +5 -5;
* tramp.texi (Module): Repository has moved to SF.

* Makefile (Module): Install things on SourceForge.

* Makefile (Module): Rule for submitting to SourceForge.
----------------------------
revision 2.1
date: 2001-08-05 13:39:50 -0700;  author: grossjoh;  state: Exp;  lines: +22 -16;
* tramp.el: Default file name format changed!  File names with
default method have changed from /r:user@host:/path/to/file to
/./user@host:/path/to/file.  Files with explicitly specified
method have changed from /r@meth:user@host:/path/to/file to
/./@meth:user@host:/path/to/file.  (Note one more colon for method
spec!)

* tramp.texi: New default file name format.
* tramp_ja.texi: Ditto.
----------------------------
revision 2.0
date: 2001-02-28 02:39:34 -0800;  author: grossjoh;  state: Exp;  lines: +1 -1;
Going stable?
----------------------------
revision 1.18
date: 2001-01-03 21:48:00 -0800;  author: yyamano;  state: Exp;  lines: +43 -6;
Sync with tramp.texi rev 1.38.
----------------------------
revision 1.17
date: 2000-10-28 20:56:10 -0700;  author: yyamano;  state: Exp;  lines: +43 -6;
Sync with tramp.texi rev 1.37.
----------------------------
revision 1.16
date: 2000-10-28 08:08:26 -0700;  author: yyamano;  state: Exp;  lines: +334 -334;
Proof reading is finished.
----------------------------
revision 1.15
date: 2000-07-24 09:21:19 -0700;  author: yyamano;  state: Exp;  lines: +9 -9;
proofread, not completely.
----------------------------
revision 1.14
date: 2000-07-23 03:02:08 -0700;  author: yyamano;  state: Exp;  lines: +11 -11;
Sync with tramp.texi rev 1.33.
----------------------------
revision 1.13
date: 2000-06-18 22:20:16 -0700;  author: yyamano;  state: Exp;  lines: +6 -8;
Fix my wrong translations.
Thank you, Daniel, Stefan and Kai.
----------------------------
revision 1.12
date: 2000-06-17 23:16:58 -0700;  author: yyamano;  state: Exp;  lines: +32 -3;
Translation is completely finished.
----------------------------
revision 1.11
date: 2000-06-17 08:54:09 -0700;  author: yyamano;  state: Exp;  lines: +34 -36;
- Translation finished.
  *How file names, directories and paths are mangled and managed
  *Debatable Issues and What Was Decided
----------------------------
revision 1.10
date: 2000-06-14 08:23:28 -0700;  author: yyamano;  state: Exp;  lines: +61 -59;
- Fix unknown command error.
- Translation finished.
  *Remote File Ownership
  *Back-end Versions
----------------------------
revision 1.9
date: 2000-06-13 06:53:01 -0700;  author: yyamano;  state: Exp;  lines: +101 -76;
- Translate the following sections.
  * Version Controlled Files
  * Remote Commands
  * Changed workfiles
  * Checking out files
----------------------------
revision 1.8
date: 2000-06-07 08:50:29 -0700;  author: yyamano;  state: Exp;  lines: +159 -124;
- Translate `Using tramp'.
- Fix a typo.
- Sync with tramp.texi rev 1.30.

XXX Fix warning: `.' or `,' must follow cross reference, not XX.
----------------------------
revision 1.7
date: 2000-06-03 19:40:14 -0700;  author: yyamano;  state: Exp;  lines: +137 -104;
- Sync with tramp.texi rev 1.28.
- Translate `Multi-hop Methods', `Default Method' and `Customizing Methods'.
----------------------------
revision 1.6
date: 2000-06-02 05:54:09 -0700;  author: yyamano;  state: Exp;  lines: +226 -222;
- Translate `External transfer methods'.
- Sync with tramp.texi 1.26.
  Just now, we have Japanese tramp manual (but not complete yet), and lost
  a walking breakfast and a gold star. :-p
----------------------------
revision 1.5
date: 2000-06-01 15:20:04 -0700;  author: yyamano;  state: Exp;  lines: +2 -1;
test change by kai for permission check
----------------------------
revision 1.4
date: 2000-05-31 09:05:52 -0700;  author: yyamano;  state: Exp;  lines: +70 -99;
- Translate `Inline methods'.
----------------------------
revision 1.3
date: 2000-05-30 10:02:42 -0700;  author: grossjoh;  state: Exp;  lines: +4 -2;
Specify @documentlanguage and @documentencoding.
----------------------------
revision 1.2
date: 2000-05-30 09:34:31 -0700;  author: yyamano;  state: Exp;  lines: +105 -99;
- Finished first part of `Configuration'
- Some cosmetic changes.
- Use Japanese date format.
- Fix my wrong translation and add comment.
  Thank you, Kai and Daniel.
----------------------------
revision 1.1
date: 2000-05-28 09:37:12 -0700;  author: yyamano;  state: Exp;
Japanese manual based on rcp.texi rev 1.22.
The following sections are finished to translate.

* Overview
* Obtaining RCP
* Installation
* Bug Reports
* Frequently Asked Questions

XXX I don't translate `Copying' section to avoid legal problem.
XXX Is it convenient to do it for reference and place both English
XXX and Japanese copyright in Japanese manual?
=============================================================================

RCS file: /sources/tramp/tramp/texi/trampinst.texi,v
Working file: texi/trampinst.texi
head: 2.20
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.19
	branch-2-1-stable: 2.18.0.2
	branchpoint-2-1-stable: 2.18
	V-2-1-19: 2.18
	V-2-1-18: 2.18
	V-2-1-17: 2.18
	V-2-1-16: 2.18
	V-2-1-15: 2.18
	V-2-1-14: 2.18
	V-2-1-13: 2.18
	V-2-0-57: 2.7.2.2
	V-2-1-12: 2.18
	V-2-1-11: 2.18
	V-2-1-10: 2.18
	V-2-0-56: 2.7.2.2
	V-2-1-9: 2.17
	V-2-1-8: 2.17
	V-2-0-55: 2.7.2.2
	V-2-1-7: 2.17
	V-2-0-54: 2.7.2.2
	V-2-1-6: 2.17
	V-2-0-53: 2.7.2.2
	V-2-0-52: 2.7.2.1
	V-2-1-5: 2.16
	V-2-1-4: 2.16
	V-2-0-51: 2.7.2.1
	V-2-0-50: 2.7.2.1
	V-2-0-49: 2.7
	V-2-0-48: 2.7
	V-2-1-3: 2.9
	V-2-0-47: 2.7
	V-2-0-46: 2.7
	V-2-0-45: 2.7
	V-2-1-2: 2.9
	V-2-0-44: 2.7
	V-2-1-1: 2.7
	V-2-0-43: 2.7
	V-2-0-42: 2.7
	V-2-0-41: 2.7
	V-2-1-0: 2.7
	branch-2-0-stable: 2.7.0.2
	branchpoint-2-0-stable: 2.7
	V-2-0-40: 2.7
	V-2-0-39: 2.3
	V-2-0-38: 2.3
	V-2-0-37: 2.3
	V-2-0-36: 2.2
	V-2-0-35: 2.2
	V-2-0-34: 2.1
	V-2-0-33: 2.1
	V-2-0-32: 2.1
keyword substitution: kv
total revisions: 22;	selected revisions: 22
description:
----------------------------
revision 2.20
date: 2011-01-26 01:43:34 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.19
date: 2010-09-02 02:37:55 -0700;  author: albinus;  state: Exp;  lines: +5 -27;  commitid: QmwMPkdzQ02BJZMu;
* Makefile.in: Remove japanese manual creation.

* tramp.texi:
* trampinst.texi: Remove Japanese manual.

* trampver.texi.in: Remove japanesemanual.
----------------------------
revision 2.18
date: 2007-04-15 14:03:41 -0700;  author: albinus;  state: Exp;  lines: +7 -2;

* configure.ac: Bump version (to 2.1.10-pre).

* INSTALL: Commands cannot contain whitespaces in their path.

* lisp/tramp.el (tramp-default-user): Fix typo in docstring.  Value can
also be nil.

* texi/trampinst.texi (Installation parameters): Commands cannot
contain whitespaces in their path.
----------------------------
revision 2.17
date: 2006-03-14 13:40:09 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

DESTDIR support
----------------------------
revision 2.16
date: 2005-10-12 13:49:30 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el (top): Try to simplify XEmacs byte-compiler
pacification.
(tramp-verbose): Finish doc string.  New default value is 3.
(all): Apply new verbosity levels.
(tramp-get-debug-buffer): Remove definition of outline faces.  The
default values are good enough.
(tramp-bug): Explain setting of `tramp-verbose'.

* lisp/tramp-cache.el (all): Apply new verbosity levels.

* lisp/tramp-smb.el (top): Try to simplify XEmacs byte-compiler
pacification.
(all): Apply new verbosity levels.

* lisp/tramp-vc.el (top): Try to simplify XEmacs byte-compiler
pacification.

* texi/tramp.texi (Bug Reports, Traces and Profiles): Explain setting
of `tramp-verbose'.

* texi/trampinst.texi (Installation parameters): Try it now with @w{}.
----------------------------
revision 2.15
date: 2005-10-10 14:07:48 -0700;  author: albinus;  state: Exp;  lines: +1 -1;

* lisp/tramp.el (tramp-handle-delete-directory)
(tramp-handle-dired-recursive-delete-directory): Apply
`tramp-cache-flush-directory'.
(tramp-handle-insert-directory): Apply `tramp-cache-flush-file'.

* lisp/tramp-cache.el: Autoload the needed functions from tramp.el.
(tramp-cache-flush-directory, tramp-cache-before-revert-function):
New defuns.
(top): Add `tramp-cache-before-revert-function' to
`before-revert-hook'.  Deactivate all Tramp messages for
performance reasons.

* lisp/tramp-smb.el (tramp-smb-handle-delete-directory): Apply
`tramp-cache-flush-directory'.
(tramp-smb-handle-insert-directory): Apply
`tramp-cache-flush-file'.
(tramp-smb-handle-directory-files): Local file must be handled as
directory, otherwise the listing is senseless.

* texi/trampinst.texi (Installation parameters): Don't use @tie{}, it
isn't defined in older texinfo versions.
----------------------------
revision 2.14
date: 2005-10-09 12:43:36 -0700;  author: albinus;  state: Exp;  lines: +11 -3;

* INSTALL: Provide working options for installing on MS Windows.

* lisp/tramp.el (tramp-completion-without-shell-p): Removed.  Not
needed anymore.
(tramp-md5-function): Fix typo in error message.
(tramp-handle-directory-files)
(tramp-handle-directory-files-and-attributes)
(tramp-handle-file-name-all-completions): Rewritten in order to
profit from caching results.
(tramp-handle-file-name-completion): Removed unnecessary code.

* lisp/tramp-cache.el (with-cache-data): ,@body must be wrapped by
`progn'.  Add `edebug-form-spec' property.

* lisp/tramp-smb.el (tramp-smb-handle-file-name-all-completions):
Rewritten in order to profit from caching results.

* texi/tramp.texi (Dired): Node removed.  There are no limitations on
directory listings anymore.
(Default Method): Fix typo in variable name.
(Filename completion): Remove limitations on directory listings.

* texi/trampinst.texi (Installation parameters): Provide working
options for installing on MS Windows.
----------------------------
revision 2.13
date: 2005-07-10 14:38:11 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
----------------------------
revision 2.12
date: 2005-02-13 10:42:44 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* INSTALL, texi/tramp.texi, texi/trampinst.texi: Replace "Linux" by
"GNU/Linux".  Suggested by Richard M. Stallman <rms@gnu.org>

* aclocal.m4 (AC_PATH_LISPDIR): Document an alternative approach
configuring `lispdir'.  Not activated (yet).

* configure.ac: Documentation fix.
----------------------------
revision 2.11
date: 2005-02-05 15:02:42 -0800;  author: albinus;  state: Exp;  lines: +12 -8;

* INSTALL: Explain in more detail configure parameters
"with-xemacs", "--with-lispdir" and "--infodir".  Change bug
report address to [tramp-devel@gnu.org].

* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_INFODIR): Rewrite
completely in order to apply better default values.

* configure.ac: Reorder substitution of installation directories
wrt changes in aclocal.m4.

* lisp/tramp.el (all): Change all addresses to .gnu.org.

* texi/Makefile.in (datadir): New variable.

* texi/trampinst.texi (Installation parameters): Explain in more detail
configure parameters "with-xemacs", "--with-lispdir" and
"--infodir".
----------------------------
revision 2.10
date: 2005-02-02 14:38:25 -0800;  author: albinus;  state: Exp;  lines: +1 -1;

* INSTALL: Linux configure option prefix should be
"--prefix=/usr".  Reported by Bradley Dilger <dilger@wrecking.org>.

* configure.ac: Bump version (to 2.1.4-pre).  Change bug report
address to [tramp-devel@gnu.org].

* texi/tramp.texi (all): Change all addresses to .gnu.org.
(Obtaining Tramp): Mention the Nightly CVS Tree Tarball as CVS
direct access alternative.

* texi/trampinst.texi (Installation parameters): Linux configure option
prefix should be "--prefix=/usr".  Reported by Bradley Dilger
<dilger@wrecking.org>.
----------------------------
revision 2.9
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +2 -2;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 2.8
date: 2004-09-16 13:04:47 -0700;  author: albinus;  state: Exp;  lines: +7 -0;


* Makefile.in (AUTOCONF): New variable.
(configure): Apply it.  Reported by Norbert Koch
<viteno@xemacs.org> in order to have a simple possibility applying
autoconf under another name.

* texi/trampinst.texi (Installation parameters): Mention usefull
configure option "--prefix=/usr/share" for Linux systems.
Reported by Charles Curley <charlescurley@charlescurley.com>.
----------------------------
revision 2.7
date: 2004-04-09 09:14:28 -0700;  author: albinus;  state: Exp;  lines: +39 -77;
branches:  2.7.2;


Complete rework, based on review by Karl Berry <karl@gnu.org>

* aclocal.m4 (AC_EMACS_INSTALL): Rewrite function.  Apply a
variable substitution rather then a file substitution

* configure.ac: Adapt comment for AC_EMACS_INSTALL call.

* texi/Makefile.in (INSTALL_CHAPTER): New variable, set by configure.
(TEXI_FILES): Includes "trampinst.texi" also if $(INSTALL_CHAPTER)
is "yes".
($(localinfodir)/%, %.dvi, tramp-%.html, tramp_ja-%.html):
$(INSTALL_CHAPTER) is a parameter, too.

* texi/trampver.texi.in (trampver, tramp): Macros changed to flags.
(otherflavor, installationchapter): Macros removed.  Not necessary
any longer.
(all): "tramp-" and "-" removed from flag names.

* texi/tramp.texi, texi/tramp_ja.texi (tramp): Macro removed.
(Obtaining Tramp): Flag removed from title.
(all): "tramp-" and "-" removed from flag names.  Flags `tramp'
and `trampver' used properly.  Flag `tramp-inst' replaced by
`installchapter'.  Installation related text adapted.

* texi/trampinst.texi (otherflavor, installationchapter): Macros
removed.  Not necessary any longer.
(all): Includes "trampver.texi" for flag setting.  All local flags
moved to that file.  "tramp-" and "-" removed from flag names.
Flags `tramp' and `trampver' used properly.  Flag `tramp-inst'
replaced by `installchapter'.
----------------------------
revision 2.6
date: 2004-03-29 12:37:49 -0800;  author: albinus;  state: Exp;  lines: +16 -0;


* configure.ac: Beautify check for "install-info".

* INSTALL (Installation Names): Describe what to do in case of
errors and warnings.
(Load Path): Add XEmacs example.

* texi/Makefile.in (INSTALL_INFO): Use option `--quiet'.

* texi/tramp.texi (Frequently Asked Questions): Use "MS Windows
NT/2000/XP" (not only "NT").  Remove doubled entry "What kinds of
systems does @tramp{} work on".

* texi/trampinst.texi (Installation parameters): Describe what to do in
case of errors and warnings.
----------------------------
revision 2.5
date: 2004-03-28 08:44:42 -0800;  author: albinus;  state: Exp;  lines: +0 -38;


* configure.ac: Check existence of "install-info".  Taken from
Emacs configure.in.

* texi/Makefile.in (INSTALL_INFO): New Variable.
($(localinfodir)/dir, $(infodir)/dir): New Targets.
(.PHONY): Add "$(localinfodir)/dir" and "$(infodir)/dir".
(install): Depends on "$(infodir)/dir".
(tramp): Depends on "$(localinfodir)/dir".

* texi/dir_sample: Created new.  Existing one didn't work, don't know  why.

* texi/tramp_ja.texi: @direntry corrected to "tramp_ja".

* texi/trampinst.texi (Load paths): Remove explanation on applying
"install-info".  It should work now, even on Debian.
----------------------------
revision 2.4
date: 2004-03-14 12:59:18 -0800;  author: albinus;  state: Exp;  lines: +12 -24;


* INSTALL: Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.

* Makefile.in: Don't check for $(USE_CONTRIB) any longer.
(xemacs): Use ""$(MAKE)" instead of "make".
(emacs): Use "--with-emacs" configure option.
(savannah): Use "ftp-upload" instead of "scp".  Hope it works for
Kai.

* aclocal.m4 (AC_EMACS_LISP): Use "-vanilla" in case of XEmacs.
(AC_CONTRIB_FILES): New function.  Checks for the need of
provisioning of a contributed package.

* configure.ac: Apply `AC_CONTRIB_FILES' for all Lisp files of
contrib directory.

* contrib/README: Clarify run-at-time.el.

* lisp/Makefile.in: New environment variables $(CONTRIB_FILES) and
$(INSTALL_FILES).  Don't check for $(USE_CONTRIB) any longer.
(all): Depends on $(CONTRIB_FILES), too.
(install): Copy $(INSTALL_FILES) but $?.
(distclean): Remove also $(CONTRIB_FILES).

* texi/Makefile.in (savannah): Simplify copy command.

* texi/trampinst.texi (Installation, Installation parameters)
(Load paths): Explain new option `--with-contrib'.  Remove
description for explicit use of "contrib" directory.  Remove
examples where EMACS environment variable is set explicitely; this
can cause confusion.
----------------------------
revision 2.3
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +44 -10;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 2.2
date: 2003-06-09 08:19:39 -0700;  author: kai;  state: Exp;  lines: +2 -2;
* dir_sample: New file.

* trampinst.texi (Load paths): gnu/linux --> GNU/Linux.
----------------------------
revision 2.1
date: 2003-04-06 14:44:33 -0700;  author: albinus;  state: Exp;

* aclocal.m4 (AC_EMACS_INSTALL): New macro.  Depending on
configure option `--with-packaging', Tramp installation chapter
will be part of the manual, or not.

* configure.ac (top-level): Apply `AC_EMACS_INSTALL'.

* Makefile.in (xemacs, emacs): Call `./configure --with-packaging'
in order to generate `trampver.texi' without installation chapter.

* texi/Makefile.in (%.dvi): Apply parameter `-t "@set $(EMACS_INFO)"'
for texi2dvi.

* texi/tramp.texi (top-level): Move installation related entries to
trampinst.texi.  Apply respective macros instead of, in case flag
`tramp-inst' is set.
Move all (X)Emacs related flags to trampver.texi.in.

* texi/trampinst.texi: New file.  Contains installation related
entries.

* texi/trampver.texi.in (top-level): Define all (X)Emacs related
flags.  Include trampinst.texi depending on configure option
`--with-packaging'.
----------------------------
revision 2.7.2.2
date: 2006-03-14 13:15:57 -0800;  author: albinus;  state: Exp;  lines: +7 -0;

DESTDIR support
----------------------------
revision 2.7.2.1
date: 2005-07-10 14:36:50 -0700;  author: albinus;  state: Exp;  lines: +2 -2;

Update FSF's address in GPL notices.

* configure.ac: Bump version (to 2.0.50-pre).  Update merge
version to 2.0.49.

* lisp/tramp.el (tramp-match-string-list): Remove function.
(tramp-wait-for-regexp): Remove call of that function.  Suggested
by Kim F. Storm <storm@cua.dk>.

* texi/tramp.texi: Use @option{} consequently for method names.
(Inline methods, External transfer methods): Remove references to
Cygwin.
(Issues with Cygwin ssh): Explain trouble with Cygwin's ssh
implementation.
(Customizing Completion, Auto-save and Backup):
Texinfo usage fixes.
=============================================================================

RCS file: /sources/tramp/tramp/texi/trampver.texi.in,v
Working file: texi/trampver.texi.in
head: 2.19
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 2.17
	branch-2-1-stable: 2.15.0.2
	branchpoint-2-1-stable: 2.15
	V-2-1-19: 2.15
	V-2-1-18: 2.15
	V-2-1-17: 2.14
	V-2-1-16: 2.13
	V-2-1-15: 2.12
	V-2-1-14: 2.11
	V-2-1-13: 2.11
	V-2-0-57: 2.4.2.5
	V-2-1-12: 2.10
	V-2-1-11: 2.10
	V-2-1-10: 2.10
	V-2-0-56: 2.4.2.4
	V-2-1-9: 2.10
	V-2-1-8: 2.9
	V-2-0-55: 2.4.2.3
	V-2-1-7: 2.9
	V-2-0-54: 2.4.2.3
	V-2-1-6: 2.9
	V-2-0-53: 2.4.2.3
	V-2-0-52: 2.4.2.3
	V-2-1-5: 2.9
	V-2-1-4: 2.9
	V-2-0-51: 2.4.2.3
	V-2-0-50: 2.4.2.3
	V-2-0-49: 2.4.2.3
	V-2-0-48: 2.4.2.3
	V-2-1-3: 2.8
	V-2-0-47: 2.4.2.2
	V-2-0-46: 2.4.2.2
	V-2-0-45: 2.4.2.1
	V-2-1-2: 2.7
	V-2-0-44: 2.4.2.1
	V-2-1-1: 2.6
	V-2-0-43: 2.4.2.1
	V-2-0-42: 2.4.2.1
	V-2-0-41: 2.4.2.1
	V-2-1-0: 2.4
	branch-2-0-stable: 2.4.0.2
	branchpoint-2-0-stable: 2.4
	V-2-0-40: 2.4
	V-2-0-39: 2.3
	V-2-0-38: 2.3
	V-2-0-37: 2.3
	V-2-0-36: 2.2
	V-2-0-35: 2.2
	V-2-0-34: 2.2
	V-2-0-33: 2.2
	V-2-0-32: 2.2
keyword substitution: kv
total revisions: 25;	selected revisions: 25
description:
----------------------------
revision 2.19
date: 2011-01-26 01:43:34 -0800;  author: albinus;  state: Exp;  lines: +1 -2;  commitid: U6ig4eJUKaeu4L5v;
Copyright years adapted.
----------------------------
revision 2.18
date: 2011-01-19 03:09:01 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: ReMqSaKDtjXRLR4v;
Adding copyright year.
----------------------------
revision 2.17
date: 2010-11-13 02:52:23 -0800;  author: albinus;  state: Exp;  lines: +0 -4;  commitid: uoouatkAZBGGPfWu;
Remove arch-tag
----------------------------
revision 2.16
date: 2010-09-02 02:37:55 -0700;  author: albinus;  state: Exp;  lines: +0 -2;  commitid: QmwMPkdzQ02BJZMu;
* Makefile.in: Remove japanese manual creation.

* tramp.texi:
* trampinst.texi: Remove Japanese manual.

* trampver.texi.in: Remove japanesemanual.
----------------------------
revision 2.15
date: 2010-01-14 20:52:28 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: zweSrHgxjm35ypju;
branches:  2.15.2;
Add 2010 to copyright years.
----------------------------
revision 2.14
date: 2009-09-24 02:00:52 -0700;  author: albinus;  state: Exp;  lines: +8 -3;  commitid: ONx8AvOue1gAyU4u;
* trampver.texi.in: Set default value of `emacsimap'.
----------------------------
revision 2.13
date: 2009-02-22 09:32:17 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: PdwPz4SxVQnvgsDt;
* trampver.texi.in: Set default value of `emacsgvfs'.
----------------------------
revision 2.12
date: 2009-01-03 06:38:57 -0800;  author: albinus;  state: Exp;  lines: +6 -2;  commitid: GIok02QvmQfGU0xt;
* trampver.texi.in (top): Declare ipv6prefix and ipv6postfix.
----------------------------
revision 2.11
date: 2008-01-23 12:29:56 -0800;  author: albinus;  state: Exp;  lines: +5 -0;  commitid: aOaIK5ot1tvBYzOs;
*** empty log message ***
----------------------------
revision 2.10
date: 2007-04-03 14:01:21 -0700;  author: albinus;  state: Exp;  lines: +5 -1;

* lisp/tramp.el (tramp-message): Don't print "Error" in level 1, this
is part of the message already.
(tramp-error-with-buffer, tramp-action-yesno, tramp-action-yn):
Let `enable-recursive-minibuffers' be t, in case we need
`pop-to-buffer' during editing of the minibuffer.
(tramp-barf-if-no-shell-prompt): Apply `tramp-error-with-buffer'.

* texi/trampver.texi.in: Set default value of `emacsgw'.
----------------------------
revision 2.9
date: 2005-02-20 08:11:49 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set always
permissions, because there might be an old auto-saved file
belonging to another original file.  This could be a security
threat.

* texi/trampver.texi.in: Replace "Emacs" by "GNU Emacs".

* texi/tramp.texi: Replace "Emacs" by "GNU Emacs".
(Default Method): Offer shortened syntax for "su" and "sudo"
methods.
----------------------------
revision 2.8
date: 2004-10-14 14:17:10 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


* texi/trampver.texi.in (top): Set default value of `emacs' or `xemacs'
derived from @EMACS_INFO@.  This simplifies synchronizing with
XEmacs CVS.
----------------------------
revision 2.7
date: 2004-09-19 11:27:10 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


Version 2.1.2 released.

* INSTALL: Mention useful configure option "--prefix=/usr/share"
for Linux systems.  Reported by Charles Curley
<charlescurley@charlescurley.com>.

* Makefile.in (XEMACS_FILES): New variable.
(emacs): Use "cvs -f diff" in order to suppress "~/.cvsrc".  There
might be conflicting options else.
(xemacs): Reworked.  Same philosophy as `emacs' now.

* configure.ac: Bump version.

* lisp/tramp.el (tramp-handle-substitute-in-file-name): Implementation
reworked.  It handles now both "//" and "/~" for URL syntax.
(top): Undefine also "~" in `read-file-name-map' when syntax is
'url.  Needed for XEmacs.

* lisp/tramp-efs.el, lisp/tramp-ftp.el (top): Add
`tramp-handle-substitute-in-file-name' to respective file name
handler.  Doesn't seem to work for EFS yet.

* texi/trampinst.texi, texi/trampver.texi.in: Rename `prefix' to
`instprefix'.  There was confusion with another tag with the same
name.
----------------------------
revision 2.6
date: 2004-07-30 12:52:03 -0700;  author: albinus;  state: Exp;  lines: +4 -6;


* INSTALL: Precise supported (X)Emacs versions.

* aclocal.m4 (AC_EMACS_INFO): Add check for proper (X)Emacs
version.

* configure.ac: Precise comments.

* lisp/trampver.el.in: Check for (X)Emacs version.  Code is from macro
AC_EMACS_INFO of aclocal.m4.

* lisp/tramp.el (top): Remove (X)Emacs version check.
(tramp-maybe-open-connection): Handle NIL values in
`tramp-default-proxies-alist'.

* texi/trampver.texi.in: Remove `postfixmultihop'.  Rename
`postfixsinglehop' into `postfixhop'.

* texi/tramp.texi (top): Rename `postfixsinglehop' into `postfixhop'.
(Multi-hop Methods, Multi-hop filename syntax): Removed, including
al pointers to.
(Multi-hops): New chapter.
(History of Tramp): Proxy hosts mentioned.
(Frequently Asked Questions): Precise supported (X)Emacs
versions.
----------------------------
revision 2.5
date: 2004-05-08 03:22:24 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Resurrect tagline.
----------------------------
revision 2.4
date: 2004-04-09 09:14:28 -0700;  author: albinus;  state: Exp;  lines: +28 -34;
branches:  2.4.2;


Complete rework, based on review by Karl Berry <karl@gnu.org>

* aclocal.m4 (AC_EMACS_INSTALL): Rewrite function.  Apply a
variable substitution rather then a file substitution

* configure.ac: Adapt comment for AC_EMACS_INSTALL call.

* texi/Makefile.in (INSTALL_CHAPTER): New variable, set by configure.
(TEXI_FILES): Includes "trampinst.texi" also if $(INSTALL_CHAPTER)
is "yes".
($(localinfodir)/%, %.dvi, tramp-%.html, tramp_ja-%.html):
$(INSTALL_CHAPTER) is a parameter, too.

* texi/trampver.texi.in (trampver, tramp): Macros changed to flags.
(otherflavor, installationchapter): Macros removed.  Not necessary
any longer.
(all): "tramp-" and "-" removed from flag names.

* texi/tramp.texi, texi/tramp_ja.texi (tramp): Macro removed.
(Obtaining Tramp): Flag removed from title.
(all): "tramp-" and "-" removed from flag names.  Flags `tramp'
and `trampver' used properly.  Flag `tramp-inst' replaced by
`installchapter'.  Installation related text adapted.

* texi/trampinst.texi (otherflavor, installationchapter): Macros
removed.  Not necessary any longer.
(all): Includes "trampver.texi" for flag setting.  All local flags
moved to that file.  "tramp-" and "-" removed from flag names.
Flags `tramp' and `trampver' used properly.  Flag `tramp-inst'
replaced by `installchapter'.
----------------------------
revision 2.3
date: 2003-11-02 13:44:49 -0800;  author: albinus;  state: Exp;  lines: +3 -1;

* INSTALL (Japanese Manual): New section.

* Makefile.in (distclean): Remove directory "info".
(savannah): Call "configure --with-japanese-manual".

* aclocal.m4 (AC_JA_MANUAL): New function.

* configure.ac: Move AC_EMACS_INSTALL.  Call AC_JA_MANUAL.

* lisp/tramp-ftp.el, lisp/tramp.el: Add new Todo item.

* texi/Makefile.in (all): New environment variables JA_MANUAL,
JA_TEXI_FILES, INFO_FILES.  Add all files in `$(localinfodir)' to
CLEAN_FILES.
(tramp.html): Rename to `html'.
(install): Depends on `tramp'. Install all `$(INFO_FILES)'.
(tramp): Depends on `$(INFO_FILES)'.
($(localinfodir)/tramp): Change to `$(localinfodir)/%'. Set
`jamanual' option (`$(JA_MANUAL)').
(dvi): Generate japanese manual if required.
(%/dvi): Set `jamanual' option (`$(JA_MANUAL)').
(html): Generate japanese manual if required.
(tramp_ja.html): New target for japanese manual.
(tramp-%.html): Generate japanese manual if required.
(tramp_ja-%.html): New target for japanese manual.
(install-html): Depends on `html'.
(savannah): Depends on `html'.  Copy japanese manual if required.

* texi/tramp.texi (all): Harmonize all occurences of @tramp{}.
(Top): Mention japanese manual only if flag `jamanual' is set.
Insert section `Japanese manual' in menu.

* texi/trampinst.texi (all): Mark all options with `@option'.
(Top): Insert section `Japanese manual' in menu.
(Load paths): Move all `@value' tags in lisp examples into own
macros.  Otherwise, there is an error with texi2dvi.
(Japanese manual): New section.

* texi/trampver.texi.in (all): New flag `japanese-manual'.  Typo fix.
----------------------------
revision 2.2
date: 2003-04-06 14:44:33 -0700;  author: albinus;  state: Exp;  lines: +46 -0;

* aclocal.m4 (AC_EMACS_INSTALL): New macro.  Depending on
configure option `--with-packaging', Tramp installation chapter
will be part of the manual, or not.

* configure.ac (top-level): Apply `AC_EMACS_INSTALL'.

* Makefile.in (xemacs, emacs): Call `./configure --with-packaging'
in order to generate `trampver.texi' without installation chapter.

* texi/Makefile.in (%.dvi): Apply parameter `-t "@set $(EMACS_INFO)"'
for texi2dvi.

* texi/tramp.texi (top-level): Move installation related entries to
trampinst.texi.  Apply respective macros instead of, in case flag
`tramp-inst' is set.
Move all (X)Emacs related flags to trampver.texi.in.

* texi/trampinst.texi: New file.  Contains installation related
entries.

* texi/trampver.texi.in (top-level): Define all (X)Emacs related
flags.  Include trampinst.texi depending on configure option
`--with-packaging'.
----------------------------
revision 2.1
date: 2003-03-22 09:21:12 -0800;  author: albinus;  state: Exp;

Makefiles rewritten.  See ChangeLogs for details.
----------------------------
revision 2.4.2.5
date: 2008-02-02 02:36:22 -0800;  author: albinus;  state: Exp;  lines: +1 -1;  commitid: Gyv6TCeWU6w5nOPs;
*** empty log message ***
----------------------------
revision 2.4.2.4
date: 2007-02-11 22:31:38 -0800;  author: albinus;  state: Exp;  lines: +5 -0;
*** empty log message ***
----------------------------
revision 2.4.2.3
date: 2005-02-20 08:09:24 -0800;  author: albinus;  state: Exp;  lines: +2 -2;

* lisp/tramp.el (tramp-set-auto-save-file-modes): Set always
permissions, because there might be an old auto-saved file
belonging to another original file.  This could be a security
threat.

* lisp/tramp-smb.el (tramp-smb-open-connection): `executable-find'
doesn't exist in older Emacsen.  To be checked before applied.

* lisp/trampver.texi.in: Replace "Emacs" by "GNU Emacs".

* lisp/tramp.texi: Replace "Emacs" by "GNU Emacs".
(Default Method): Offer shortened syntax for "su" and "sudo"
methods.
----------------------------
revision 2.4.2.2
date: 2004-10-14 14:13:21 -0700;  author: albinus;  state: Exp;  lines: +1 -1;


* configure.ac: Bump version (to 2.0.46-pre).  Update merge
version to 2.0.45.

* texi/trampver.texi.in (top): Set default value of `emacs' or `xemacs'
derived from @EMACS_INFO@.  This simplifies synchronizing with
XEmacs CVS.
----------------------------
revision 2.4.2.1
date: 2004-05-08 03:24:44 -0700;  author: kai;  state: Exp;  lines: +4 -0;
Resurrect tagline.
----------------------------
revision 2.15.2.1
date: 2011-01-24 02:09:41 -0800;  author: albinus;  state: Exp;  lines: +2 -2;  commitid: VsUSgZwl6vPxhv5v;
Add copyright year.
=============================================================================

RCS file: /sources/tramp/tramp/tramp2/tramp2-cache.el,v
Working file: tramp2/tramp2-cache.el
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.8
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
	V-2-1-18: 1.1
	V-2-1-17: 1.1
	V-2-1-16: 1.1
	V-2-1-15: 1.1
	V-2-1-14: 1.1
	V-2-1-13: 1.1
	V-2-0-57: 1.1
	V-2-1-12: 1.1
	V-2-1-11: 1.1
	V-2-1-10: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.6
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.4
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.2
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.1
date: 2001-12-06 04:18:48 -0800;  author: kaig;  state: Exp;
branches:  1.1.2;
New directory for experimental rewrite and redesign of Tramp.
----------------------------
revision 1.1.2.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +0 -0;
Removing files not needed for XEmacs package
=============================================================================

RCS file: /sources/tramp/tramp/tramp2/tramp2-compat.el,v
Working file: tramp2/tramp2-compat.el
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.8
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
	V-2-1-18: 1.1
	V-2-1-17: 1.1
	V-2-1-16: 1.1
	V-2-1-15: 1.1
	V-2-1-14: 1.1
	V-2-1-13: 1.1
	V-2-0-57: 1.1
	V-2-1-12: 1.1
	V-2-1-11: 1.1
	V-2-1-10: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.6
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.4
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.2
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.1
date: 2001-12-06 04:18:48 -0800;  author: kaig;  state: Exp;
branches:  1.1.2;
New directory for experimental rewrite and redesign of Tramp.
----------------------------
revision 1.1.2.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +0 -0;
Removing files not needed for XEmacs package
=============================================================================

RCS file: /sources/tramp/tramp/tramp2/tramp2-enc.el,v
Working file: tramp2/tramp2-enc.el
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.8
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
	V-2-1-18: 1.1
	V-2-1-17: 1.1
	V-2-1-16: 1.1
	V-2-1-15: 1.1
	V-2-1-14: 1.1
	V-2-1-13: 1.1
	V-2-0-57: 1.1
	V-2-1-12: 1.1
	V-2-1-11: 1.1
	V-2-1-10: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.6
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.4
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.2
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.1
date: 2001-12-06 04:18:48 -0800;  author: kaig;  state: Exp;
branches:  1.1.2;
New directory for experimental rewrite and redesign of Tramp.
----------------------------
revision 1.1.2.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +0 -0;
Removing files not needed for XEmacs package
=============================================================================

RCS file: /sources/tramp/tramp/tramp2/tramp2-hack.el,v
Working file: tramp2/tramp2-hack.el
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.8
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
	V-2-1-18: 1.1
	V-2-1-17: 1.1
	V-2-1-16: 1.1
	V-2-1-15: 1.1
	V-2-1-14: 1.1
	V-2-1-13: 1.1
	V-2-0-57: 1.1
	V-2-1-12: 1.1
	V-2-1-11: 1.1
	V-2-1-10: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.6
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.4
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.2
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.1
date: 2001-12-06 04:18:48 -0800;  author: kaig;  state: Exp;
branches:  1.1.2;
New directory for experimental rewrite and redesign of Tramp.
----------------------------
revision 1.1.2.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +0 -0;
Removing files not needed for XEmacs package
=============================================================================

RCS file: /sources/tramp/tramp/tramp2/tramp2-ops.el,v
Working file: tramp2/tramp2-ops.el
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.8
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
	V-2-1-18: 1.1
	V-2-1-17: 1.1
	V-2-1-16: 1.1
	V-2-1-15: 1.1
	V-2-1-14: 1.1
	V-2-1-13: 1.1
	V-2-0-57: 1.1
	V-2-1-12: 1.1
	V-2-1-11: 1.1
	V-2-1-10: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.6
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.4
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.2
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.1
date: 2001-12-06 04:18:48 -0800;  author: kaig;  state: Exp;
branches:  1.1.2;
New directory for experimental rewrite and redesign of Tramp.
----------------------------
revision 1.1.2.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +0 -0;
Removing files not needed for XEmacs package
=============================================================================

RCS file: /sources/tramp/tramp/tramp2/tramp2-util.el,v
Working file: tramp2/tramp2-util.el
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.8
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
	V-2-1-18: 1.1
	V-2-1-17: 1.1
	V-2-1-16: 1.1
	V-2-1-15: 1.1
	V-2-1-14: 1.1
	V-2-1-13: 1.1
	V-2-0-57: 1.1
	V-2-1-12: 1.1
	V-2-1-11: 1.1
	V-2-1-10: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.6
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.4
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.2
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.1
date: 2001-12-06 04:18:48 -0800;  author: kaig;  state: Exp;
branches:  1.1.2;
New directory for experimental rewrite and redesign of Tramp.
----------------------------
revision 1.1.2.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +0 -0;
Removing files not needed for XEmacs package
=============================================================================

RCS file: /sources/tramp/tramp/tramp2/tramp2.el,v
Working file: tramp2/tramp2.el
head: 1.1
branch:
locks: strict
access list:
symbolic names:
	V-2-2-0: 1.1
	branch-2-1-stable: 1.1.0.8
	branchpoint-2-1-stable: 1.1
	V-2-1-19: 1.1
	V-2-1-18: 1.1
	V-2-1-17: 1.1
	V-2-1-16: 1.1
	V-2-1-15: 1.1
	V-2-1-14: 1.1
	V-2-1-13: 1.1
	V-2-0-57: 1.1
	V-2-1-12: 1.1
	V-2-1-11: 1.1
	V-2-1-10: 1.1
	V-2-0-56: 1.1
	V-2-1-9: 1.1
	V-2-1-8: 1.1
	V-2-0-55: 1.1
	V-2-1-7: 1.1
	V-2-0-54: 1.1
	V-2-1-6: 1.1
	V-2-0-53: 1.1
	V-2-0-52: 1.1
	V-2-1-5: 1.1
	V-2-1-4: 1.1
	V-2-0-51: 1.1
	V-2-0-50: 1.1
	V-2-0-49: 1.1
	V-2-0-48: 1.1
	V-2-1-3: 1.1
	V-2-0-47: 1.1
	V-2-0-46: 1.1
	V-2-0-45: 1.1
	V-2-1-2: 1.1
	V-2-0-44: 1.1
	V-2-1-1: 1.1
	V-2-0-43: 1.1
	V-2-0-42: 1.1
	V-2-0-41: 1.1
	V-2-1-0: 1.1
	branch-2-0-stable: 1.1.0.6
	branchpoint-2-0-stable: 1.1
	V-2-0-40: 1.1
	V-2-0-39: 1.1
	V-2-0-38: 1.1
	V-2-0-37: 1.1
	V-2-0-36: 1.1
	V-2-0-35: 1.1
	V-2-0-34: 1.1
	V-2-0-33: 1.1
	V-2-0-32: 1.1
	V-2-0-30: 1.1
	V-2-0-29: 1.1
	V-2-0-28: 1.1
	V-2-0-27: 1.1
	V-2-0-26: 1.1
	V-2-0-25: 1.1
	V-2-0-24: 1.1
	V-2-0-23: 1.1
	V-2-0-22: 1.1
	V-2-0-21: 1.1
	V-2-0-20: 1.1
	V-2-0-19: 1.1
	V-2-0-18: 1.1
	V-2-0-17: 1.1
	V-2-0-16: 1.1
	V-2-0-15: 1.1
	V-2-0-14: 1.1
	V-2-0-13: 1.1
	completion: 1.1.0.4
	V-2-0-12: 1.1
	V-2-0-11: 1.1
	V-2-0-10: 1.1
	V-2-0-9: 1.1
	V-2-0-8: 1.1
	V-2-0-7: 1.1
	V-2-0-6: 1.1
	V-2-0-5: 1.1
	V-2-0-4: 1.1
	V-2-0-3: 1.1
	V-2-0-1: 1.1
	EMACS-21: 1.1
	V-2-0-0: 1.1
	tramp-xemacs-pkg: 1.1.0.2
keyword substitution: kv
total revisions: 2;	selected revisions: 2
description:
----------------------------
revision 1.1
date: 2001-12-06 04:18:48 -0800;  author: kaig;  state: Exp;
branches:  1.1.2;
New directory for experimental rewrite and redesign of Tramp.
----------------------------
revision 1.1.2.1
date: 2001-12-08 03:23:19 -0800;  author: youngs;  state: dead;  lines: +1 -1;
Removing files not needed for XEmacs package
=============================================================================
